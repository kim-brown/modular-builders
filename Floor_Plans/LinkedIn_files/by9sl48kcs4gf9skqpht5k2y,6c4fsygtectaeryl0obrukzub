"use strict";var _slicedToArray2=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass2=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _classCallCheck2(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}(function(){"use strict";!function(){var t={};function e(t,e){return t(e={exports:{}},e.exports),e.exports}t.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},t.createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),t.slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0){}}catch(t){a=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t.get=function t(e,n,i){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(i):void 0},t.set=function t(e,n,i,a){var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var s=Object.getPrototypeOf(e);null!==s&&t(s,n,i,a)}else if("value"in r&&r.writable)r.value=i;else{var o=r.set;void 0!==o&&o.call(a,i)}return i},t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},function(t,e){function n(){var t=x.splice(0,x.length);for(Gt=0;t.length;){t.shift().call(null,t.shift())}}function i(t,e){for(var n=0,i=t.length;n<i;n++){f(t[n],e)}}function a(t){return function(e){Pt(e)&&(f(e,t),at.length&&i(e.querySelectorAll(at),t))}}function r(t){var e=Vt.call(t,"is"),n=t.nodeName.toUpperCase(),i=st.call(nt,e?Q+e.toUpperCase():$+n);return e&&-1<i&&!s(n,e)?-1:i}function s(t,e){return-1<at.indexOf(t+'[is="'+e+'"]')}function o(t){var e=t.currentTarget,n=t.attrChange,i=t.attrName,a=t.target,r=t[Y]||2,s=t[X]||3;!ee||a&&a!==e||!e[W]||"style"===i||t.prevValue===t.newValue&&(""!==t.newValue||n!==r&&n!==s)||e[W](i,n===r?null:t.prevValue,n===s?null:t.newValue)}function l(t){var e=a(t);return function(t){x.push(e,t.target),Gt&&clearTimeout(Gt),Gt=setTimeout(n,1)}}function u(t){te&&(te=!1,t.currentTarget.removeEventListener(Z,u)),at.length&&i((t.target||E).querySelectorAll(at),t.detail===z?z:R),Nt&&function(){for(var t,e=0,n=Ht.length;e<n;e++){t=Ht[e],rt.contains(t)||(n--,Ht.splice(e--,1),f(t,z))}}()}function c(t,e){var n=this;jt.call(n,t,e),T.call(n,{target:n})}function d(t,e,n){var i=e.apply(t,n),a=r(i);return-1<a&&D(i,it[a]),n.pop()&&at.length&&function(t){for(var e,n=0,i=t.length;n<i;n++){e=t[n],D(e,it[r(e)])}}(i.querySelectorAll(at)),i}function h(t,e){It(t,e),I?I.observe(t,Yt):(Qt&&(t.setAttribute=c,t[P]=L(t),t[H](J,T)),t[H](G,o)),t[U]&&ee&&(t.created=!0,t[U](),t.created=!1)}function p(t){throw new Error("A "+t+" type is already registered")}function f(t,e){var n,i,a=r(t);-1<a&&(S(t,it[a]),a=0,e!==R||t[R]?e!==z||t[z]||(t[R]=!1,t[z]=!0,i="disconnected",a=1):(t[z]=!1,t[R]=!0,i="connected",a=1,Nt&&st.call(Ht,t)<0&&Ht.push(t)),a&&(n=t[e+F]||t[i+F])&&n.call(t))}function v(){}function m(t,e,n){var i=n&&n[V]||"",a=e.prototype,r=Lt(a),s=e.observedAttributes||dt,o={prototype:r};Ot(r,U,{value:function value(){if(_t)_t=!1;else if(!this[bt]){this[bt]=!0,new e(this),a[U]&&a[U].call(this);var t=At[Tt.get(e)];(!gt||t.create.length>1)&&g(this)}}}),Ot(r,W,{value:function value(t){-1<st.call(s,t)&&a[W]&&a[W].apply(this,arguments)}}),a[j]&&Ot(r,B,{value:a[j]}),a[q]&&Ot(r,K,{value:a[q]}),i&&(o[V]=i),t=t.toUpperCase(),At[t]={constructor:e,create:i?[i,wt(t)]:[t]},Tt.set(e,t),E[O](t.toLowerCase(),o),C(t),xt[t].r()}function b(t){var e=At[t.toUpperCase()];return e&&e.constructor}function y(t){return"string"==typeof t?t:t&&t.is||""}function g(t){for(var e,n=t[W],i=n?t.attributes:dt,a=i.length;a--;){e=i[a],n.call(t,e.name||e.nodeName,null,e.value||e.nodeValue)}}function C(t){return(t=t.toUpperCase())in xt||(xt[t]={},xt[t].p=new Et(function(e){xt[t].r=e})),xt[t].p}function k(){yt&&delete t.customElements,ct(t,"customElements",{configurable:!0,value:new v}),ct(t,"CustomElementRegistry",{configurable:!0,value:v});for(var e=A.get(/^HTML[A-Z]*[a-z]/),n=e.length;n--;function(e){var n=t[e];if(n){t[e]=function(t){var e,i;return t||(t=this),t[bt]||(_t=!0,e=At[Tt.get(t.constructor)],(t=(i=gt&&1===e.create.length)?Reflect.construct(n,dt,e.constructor):E.createElement.apply(E,e.create))[bt]=!0,_t=!1,i||g(t)),t},t[e].prototype=n.prototype;try{n.prototype.constructor=t[e]}catch(i){ct(n,bt,{value:t[e]})}}}(e[n])){}E.createElement=function(t,e){var n=y(e);return n?Kt.call(this,t,wt(n)):Kt.call(this,t)},Zt||($t=!0,E[O](""))}var E=t.document,_=t.Object,A=function(t){var e,n,i,a,r=/^[A-Z]+[a-z]/,s=function s(t,e){(e=e.toLowerCase())in o||(o[t]=(o[t]||[]).concat(e),o[e]=o[e.toUpperCase()]=t)},o=(_.create||_)(null),l={};for(n in t){for(a in t[n]){for(i=t[n][a],o[a]=i,e=0;e<i.length;e++){o[i[e].toLowerCase()]=o[i[e].toUpperCase()]=a}}}return l.get=function(t){return"string"==typeof t?o[t]||(r.test(t)?[]:""):function(t){var e,n=[];for(e in o){t.test(e)&&n.push(e)}return n}(t)},l.set=function(t,e){return r.test(t)?s(t,e):s(e,t),l},l}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=(typeof e==="undefined"?"undefined":_typeof2(e))&&(e={type:e||"auto"});var x,T,w,L,I,M,S,D,N,O="registerElement",P="__"+O+(1e5*t.Math.random()>>0),H="addEventListener",R="attached",F="Callback",z="detached",V="extends",W="attributeChanged"+F,B=R+F,j="connected"+F,q="disconnected"+F,U="created"+F,K=z+F,Y="ADDITION",X="REMOVAL",G="DOMAttrModified",Z="DOMContentLoaded",J="DOMSubtreeModified",$="<",Q="=",tt=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,et=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],nt=[],it=[],at="",rt=E.documentElement,st=nt.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;){}return e},ot=_.prototype,lt=ot.hasOwnProperty,ut=ot.isPrototypeOf,ct=_.defineProperty,dt=[],ht=_.getOwnPropertyDescriptor,pt=_.getOwnPropertyNames,ft=_.getPrototypeOf,vt=_.setPrototypeOf,mt=!!_.__proto__,bt="__dreCEv1",yt=t.customElements,gt=!/^force/.test(e.type)&&!!(yt&&yt.define&&yt.get&&yt.whenDefined),Ct=_.create||_,kt=t.Map||function(){var t,e=[],n=[];return{get:function get(t){return n[st.call(e,t)]},set:function set(i,a){(t=st.call(e,i))<0?n[e.push(i)-1]=a:n[t]=a}}},Et=t.Promise||function(t){function e(t){for(i=!0;n.length;){n.shift()(t)}}var n=[],i=!1,a={"catch":function _catch(){return a},then:function then(t){return n.push(t),i&&setTimeout(e,1),a}};return t(e),a},_t=!1,At=Ct(null),xt=Ct(null),Tt=new kt,wt=function wt(t){return t.toLowerCase()},Lt=_.create||function t(e){return e?(t.prototype=e,new t):this},It=vt||(mt?function(t,e){return t.__proto__=e,t}:pt&&ht?function(){function t(t,e){for(var n,i=pt(e),a=0,r=i.length;a<r;a++){n=i[a],lt.call(t,n)||ct(t,n,ht(e,n))}}return function(e,n){do{t(e,n)}while((n=ft(n))&&!ut.call(n,e));return e}}():function(t,e){for(var n in e){t[n]=e[n]}return t}),Mt=t.MutationObserver||t.WebKitMutationObserver,St=t.HTMLAnchorElement,Dt=(t.HTMLElement||t.Element||t.Node).prototype,Nt=!ut.call(Dt,rt),Ot=Nt?function(t,e,n){return t[e]=n.value,t}:ct,Pt=Nt?function(t){return 1===t.nodeType}:function(t){return ut.call(Dt,t)},Ht=Nt&&[],Rt=Dt.attachShadow,Ft=Dt.cloneNode,zt=Dt.dispatchEvent,Vt=Dt.getAttribute,Wt=Dt.hasAttribute,Bt=Dt.removeAttribute,jt=Dt.setAttribute,qt=E.createElement,Ut=E.importNode,Kt=qt,Yt=Mt&&{attributes:!0,characterData:!0,attributeOldValue:!0},Xt=Mt||function(t){Qt=!1,rt.removeEventListener(G,Xt)},Gt=0,Zt=O in E&&!/^force-all/.test(e.type),Jt=!0,$t=!1,Qt=!0,te=!0,ee=!0;if(Mt&&((N=E.createElement("div")).innerHTML="<div><div></div></div>",new Mt(function(t,e){if(t[0]&&"childList"==t[0].type&&!t[0].removedNodes[0].childNodes.length){var n=(N=ht(Dt,"innerHTML"))&&N.set;n&&ct(Dt,"innerHTML",{set:function set(t){for(;this.lastChild;){this.removeChild(this.lastChild)}n.call(this,t)}})}e.disconnect(),N=null}).observe(N,{childList:!0,subtree:!0}),N.innerHTML=""),Zt||(vt||mt?(S=function S(t,e){ut.call(e,t)||h(t,e)},D=h):D=S=function S(t,e){t[P]||(t[P]=_(!0),h(t,e))},Nt?(Qt=!1,function(){var t=ht(Dt,H),e=t.value,n=function n(t){var e=new CustomEvent(G,{bubbles:!0});e.attrName=t,e.prevValue=Vt.call(this,t),e.newValue=null,e[X]=e.attrChange=2,Bt.call(this,t),zt.call(this,e)},i=function i(t,e){var n=Wt.call(this,t),i=n&&Vt.call(this,t),a=new CustomEvent(G,{bubbles:!0});jt.call(this,t,e),a.attrName=t,a.prevValue=n?i:null,a.newValue=e,n?a.MODIFICATION=a.attrChange=1:a[Y]=a.attrChange=0,zt.call(this,a)},a=function a(t){var e,n=t.currentTarget,i=n[P],a=t.propertyName;i.hasOwnProperty(a)&&(i=i[a],(e=new CustomEvent(G,{bubbles:!0})).attrName=i.name,e.prevValue=i.value||null,e.newValue=i.value=n[a]||null,null==e.prevValue?e[Y]=e.attrChange=0:e.MODIFICATION=e.attrChange=1,zt.call(n,e))};t.value=function(t,r,s){t===G&&this[W]&&this.setAttribute!==i&&(this[P]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=n,e.call(this,"propertychange",a)),e.call(this,t,r,s)},ct(Dt,H,t)}()):Mt||(rt[H](G,Xt),rt.setAttribute(P,1),rt.removeAttribute(P),Qt&&(T=function T(t){var e,n,i,a=this;if(a===t.target){for(i in e=a[P],a[P]=n=L(a),n){if(!(i in e))return w(0,a,i,e[i],n[i],Y);if(n[i]!==e[i])return w(1,a,i,e[i],n[i],"MODIFICATION")}for(i in e){if(!(i in n))return w(2,a,i,e[i],n[i],X)}}},w=function w(t,e,n,i,a,r){var s={attrChange:t,currentTarget:e,attrName:n,prevValue:i,newValue:a};s[r]=t,o(s)},L=function L(t){for(var e,n,i={},a=t.attributes,r=0,s=a.length;r<s;r++){"setAttribute"!==(n=(e=a[r]).name)&&(i[n]=e.value)}return i})),E[O]=function(t,e){if(n=t.toUpperCase(),Jt&&(Jt=!1,Mt?(I=function(t,e){function n(t,e){for(var n=0,i=t.length;n<i;e(t[n++])){}}return new Mt(function(i){for(var a,r,s,o=0,l=i.length;o<l;o++){"childList"===(a=i[o]).type?(n(a.addedNodes,t),n(a.removedNodes,e)):(r=a.target,ee&&r[W]&&"style"!==a.attributeName&&(s=Vt.call(r,a.attributeName))!==a.oldValue&&r[W](a.attributeName,a.oldValue,s))}})}(a(R),a(z)),(M=function M(t){return I.observe(t,{childList:!0,subtree:!0}),t})(E),Rt&&(Dt.attachShadow=function(){return M(Rt.apply(this,arguments))})):(x=[],E[H]("DOMNodeInserted",l(R)),E[H]("DOMNodeRemoved",l(z))),E[H](Z,u),E[H]("readystatechange",u),E.importNode=function(t,e){switch(t.nodeType){case 1:return d(E,Ut,[t,!!e]);case 11:for(var n=E.createDocumentFragment(),i=t.childNodes,a=i.length,r=0;r<a;r++){n.appendChild(E.importNode(i[r],!!e))}return n;default:return Ft.call(t,!!e)}},Dt.cloneNode=function(t){return d(this,Ft,[!!t])}),$t)return $t=!1;if(-2<st.call(nt,Q+n)+st.call(nt,$+n)&&p(t),!tt.test(n)||-1<st.call(et,n))throw new Error("The type "+t+" is invalid");var n,r,s=function s(){return c?E.createElement(h,n):E.createElement(h)},o=e||ot,c=lt.call(o,V),h=c?e[V].toUpperCase():n;return c&&-1<st.call(nt,$+h)&&p(h),r=nt.push((c?Q:$)+n)-1,at=at.concat(at.length?",":"",c?h+'[is="'+t.toLowerCase()+'"]':h),s.prototype=it[r]=lt.call(o,"prototype")?o.prototype:Lt(Dt),at.length&&i(E.querySelectorAll(at),R),s},E.createElement=Kt=function Kt(t,e){var n=y(e),i=n?qt.call(E,t,wt(n)):qt.call(E,t),a=""+t,r=st.call(nt,(n?Q:$)+(n||a).toUpperCase()),o=-1<r;return n&&(i.setAttribute("is",n=n.toLowerCase()),o&&(o=s(a.toUpperCase(),n))),ee=!E.createElement.innerHTMLHelper,o&&D(i,it[r]),i}),v.prototype={constructor:v,define:gt?function(t,e,n){if(n)m(t,e,n);else{var i=t.toUpperCase();At[i]={constructor:e,create:[i]},Tt.set(e,i),yt.define(t,e)}}:m,get:gt?function(t){return yt.get(t)||b(t)}:b,whenDefined:gt?function(t){return Et.race([yt.whenDefined(t),C(t)])}:C},!yt||/^force/.test(e.type))k();else if(!e.noBuiltIn)try{!function(e,n,i){var a=new RegExp("^<a\\s+is=('|\")"+i+"\\1></a>$");if(n[V]="a",(e.prototype=Lt(St.prototype)).constructor=e,t.customElements.define(i,e,n),!a.test(E.createElement("a",{is:i}).outerHTML)||!a.test((new e).outerHTML))throw n}(function t(){return Reflect.construct(St,[],t)},{},"document-register-element-a")}catch(t){k()}if(!e.noBuiltIn)try{if(qt.call(E,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(t){wt=function wt(t){return{is:t.toLowerCase()}}}}(window);var n=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){if("function"==typeof window.CustomEvent)return window.CustomEvent;var t=function t(_t2,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(_t2,e.bubbles,e.cancelable,e.detail),n};return t.prototype=window.Event.prototype,t}return function(){}}(),i="data-is-animating-click",a=140,r={},s={init:function init(t){r.docEl=t.document.documentElement,r.isMouseDown=!1,r.lastClickedButton=null,r.timerId=null},install:function install(){var t=r.docEl;if(!t)throw new Error("Please init before running install().");t.addEventListener("mousedown",o,!0),t.addEventListener("mouseup",l,!0)},teardown:function teardown(){var t=r.docEl;t&&(t.removeEventListener("mousedown",o,!0),t.removeEventListener("mouseup",l,!0))}};function o(t){var e,n=t.target;return r.lastClickedButton?null:(e=function(t){var e=0;for(;t&&e<8;){if(u(t))return t;t=t.parentNode,e+=1}return null}(n))?(r.isMouseDown=!0,e.setAttribute(i,!0),r.lastClickedButton=e,void(r.timerId=setTimeout(function(){r.isMouseDown||c(),r.timerId=null},a))):null}function l(t){r.lastClickedButton&&(r.isMouseDown=!1,null===r.timerId&&c())}function u(t){return!(!t||!t.tagName||"button"!==t.tagName.toLowerCase())}function c(){r.lastClickedButton.removeAttribute(i),r.lastClickedButton=null}function d(t,e){var n=Array.isArray(e)?e:e.split(" "),i=t instanceof HTMLElement?t.className:null,a=i;if(null!==i){i=i.length?i.split(" "):[];for(var r=0,s=n.length;r<s;r++){-1===i.indexOf(n[r])&&i.push(n[r])}(i=i.join(" "))!==a&&(t.className=i)}}var h=/Edge\/(\d+)\./,p=/MSIE\s(\d+)\./,f=/Trident.*rv:11\./,v=[{name:"ios",match:/iPad|iPhone|iPod/},{name:"android",match:/Android/},{name:"windows",match:/Windows/},{name:"osx",match:/(PPC|Intel) Mac OS X/}],m={},b={init:function init(t){m.docEl=t.document.documentElement,m.userAgent=t.navigator.userAgent},install:function install(){if(!m.docEl||!m.userAgent)throw new Error("Please init before running install().");var t;d(m.docEl,"artdeco"),y("edge",(t=h.exec(m.userAgent))?parseInt(t[1],10):null),y("ie",function(){var t=p.exec(m.userAgent);if(t)return parseInt(t[1],10);return f.test(m.userAgent)?11:null}()),function(){for(var t=m.docEl,e=m.userAgent,n=void 0,i=0,a=v.length;i<a;i++){if((n=v[i]).match.test(e)){d(t,n.name);break}}}()}};function y(t,e){e&&d(m.docEl,[t,t+e,"lte"+e])}var g=/(?:^|\s)simple-form(?:\s|$)/,C=/(?:^|\s)floating-label(?:\s|$)/,k="data-form-elem-focus",E={date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},_={},A={init:function init(t){_.docEl=t.document.documentElement},install:function install(){var t=_.docEl;if(!t)throw new Error("Please init before running install().");t.addEventListener("focus",T,!0),t.addEventListener("blur",w,!0)},teardown:function teardown(){var t=_.docEl;t&&(t.removeEventListener("focus",T,!0),t.removeEventListener("blur",w,!0))}};function x(t){var e=null,n=!(!t||!t.parentNode)&&t.parentNode;return n&&(C.test(n.className)?e=n:"form"===n.tagName.toLowerCase()||g.test(n.className)||(e=x(n))),e}function T(t){var e=!!L(t.target)&&x(t.target);e&&e.setAttribute(k,"true")}function w(t){var e=!(t.target.value||!L(t.target))&&x(t.target);e&&e.removeAttribute(k)}function L(t){var e=t.tagName.toLowerCase();return("input"===e&&E[t.type]||"textarea"===e)&&t.form&&t.parentNode&&g.test(t.form.className)}var I=9,M="data-artdeco-is-focused",S={},D={init:function init(t){S.docEl=t.document.documentElement,S.isMouseEvt=!1},install:function install(){var t=S.docEl;if(!t)throw new Error("Please init before running install().");t.addEventListener("keydown",N,!1),t.addEventListener("mousedown",O,!1),t.addEventListener("focus",P,!0),t.addEventListener("blur",H,!0)},teardown:function teardown(){var t=S.docEl;t&&(t.removeEventListener("keydown",N,!1),t.removeEventListener("mousedown",O,!1),t.removeEventListener("focus",P,!0),t.removeEventListener("blur",H,!0))}};function N(t){t.keyCode===I&&(S.isMouseEvt=!1)}function O(t){S.isMouseEvt=!0}function P(t){S.isMouseEvt&&t.target!==t.currentTarget&&t.target.setAttribute(M,!0)}function H(t){t.target!==t.currentTarget&&t.target.removeAttribute(M)}function R(t,e,n){var i=t&&(t.nodeType===Node.DOCUMENT_NODE?t:t.ownerDocument);if(i&&i.createEvent){var a=i.createEvent("CustomEvent");a.initCustomEvent(e,!0,!0,n),t.dispatchEvent(a)}}var F={},z=function z(){},V="artdeco-icons-loaded",W={init:function init(t){F.document=t.document,F.iconCache={},F.sourceEl=null,F.nextTitleId=1,F.loadListeners=[]},load:function load(t,e){t({url:"artdeco/static/images/icons.svg",dataType:"xml",error:e,success:function success(t){return function(t,e){F.sourceEl=t,F.document&&F.document.getElementsByTagName("base")[0]&&F.sourceEl&&(n=window.location.href.replace(window.location.hash,""),i={mask:F.sourceEl.querySelectorAll("[*|mask^=url]"),fill:F.sourceEl.querySelectorAll("[*|fill^=url]"),style:F.sourceEl.querySelectorAll('[*|style^="fill:url"],[*|style^="fill: url"]')},a=F.sourceEl.querySelectorAll("style"),Object.keys(i).forEach(function(t){[].slice.call(i[t]).filter(function(e){return e.getAttribute(t).indexOf("url(#")>=0}).forEach(function(e){e.setAttribute(t,e.getAttribute(t).replace("url(#","url("+n+"#"))})}),[].forEach.call(a,function(t){var e=/url\(#([^\)]+)\)/g;t.textContent&&e.test(t.textContent)&&(t.textContent="/*<![CDATA[*/"+t.textContent.replace(e,function(t){var e=t.split("#");return""+e[0]+n+"#"+e[1]})+"/*]]>*/")}));var n,i,a;var r=F.loadListeners;if(r&&r.length){for(var s=0;s<r.length;s++){r[s](F.sourceEl)}F.loadListeners.length=0}R(F.document,V),e&&e()}(t,e)}})},install:function install(){},isLoaded:function isLoaded(){return!!F.sourceEl},_onLoad:function _onLoad(t){F.loadListeners.push(t)},getIcon:function getIcon(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?z:arguments[2],i=function i(_i3){_i3?n(null,function(t,e){var n=e.size,i=e.color,a=void 0;n&&(a=function(t,e){return B(t,e+"-icon")}(t,n));a||void 0===i||(a=i?function(t){return B(t,"color-icon")}(t):function(t){return B(t,"solid-icon")}(t));return a=a||t.cloneNode(!0)}(_i3,e)):n('Unable to find icon "'+t+'"',null)};F.iconCache||(F.iconCache={});var a=F.iconCache[t];void 0===a?W.getSourceEl(function(e){a=(a=e.getElementById?e.getElementById(t):e.querySelector('[id="'+t+'"]'))&&function(t){(t=t.cloneNode(!0)).removeAttribute("id");for(var e=t.childNodes,n=0,i=e.length;n<i;n++){var a=e[n];a.removeAttribute&&a.removeAttribute("id")}return t}(a),F.iconCache[t]=a||null,i(a)}):i(a)},getSourceEl:function getSourceEl(){var t=arguments.length<=0||void 0===arguments[0]?z:arguments[0];W.isLoaded()?t(F.sourceEl):W._onLoad(t)},teardown:function teardown(){W.isLoaded()&&(F.sourceEl.remove(),F.sourceEl=null)},setIconTitle:function setIconTitle(t,e){!function(){if(!F.document)throw new Error("No document object present. Please init() with a document.")}();var n=F.document.createElementNS("http://www.w3.org/2000/svg","title"),i="li-icon-title-"+F.nextTitleId++;n.textContent=e,n.setAttribute("id",i),t.insertBefore(n,t.firstChild),t.setAttribute("aria-labelledby",i)}};function B(t,e){if(/^\d/.test(e))return null;var n=t.querySelector("."+e);return n?((t=t.cloneNode()).appendChild(n.cloneNode(!0)),t):null}var j=e(function(t){t.exports={coreColors:{blue0:[230,247,255],blue1:[202,237,255],blue2:[152,216,244],blue3:[101,195,232],blue4:[51,170,218],blue5:[0,145,202],blue6:[0,132,191],blue7:[0,115,177],blue8:[0,96,151],blue9:[0,75,124],blue10:[0,63,103],purple0:[245,245,254],purple1:[230,230,255],purple2:[202,202,252],purple3:[178,176,250],purple4:[152,150,242],purple5:[130,123,233],purple6:[117,109,221],purple7:[102,94,208],purple8:[84,75,194],purple9:[64,52,176],purple10:[44,43,157],red0:[254,242,241],red1:[255,224,219],red2:[255,188,186],red3:[255,153,154],red4:[255,108,112],red5:[255,44,51],red6:[238,22,32],red7:[209,17,36],red8:[177,8,35],red9:[144,0,33],red10:[121,0,33],orange0:[255,243,234],orange1:[253,227,210],orange2:[248,193,158],orange3:[246,161,108],orange4:[239,126,55],orange5:[229,88,0],orange6:[207,80,0],orange7:[183,71,0],orange8:[153,58,0],orange9:[124,46,0],orange10:[106,35,0],teal0:[236,249,251],teal1:[204,240,243],teal2:[152,218,222],teal3:[104,197,205],teal4:[23,175,184],teal5:[14,149,160],teal6:[12,137,150],teal7:[8,120,137],teal8:[3,100,117],teal9:[0,80,93],teal10:[0,65,76],pink0:[255,241,250],pink1:[255,223,246],pink2:[255,185,226],pink3:[255,145,207],pink4:[255,97,182],pink5:[255,27,144],pink6:[230,30,137],pink7:[204,22,126],pink8:[172,10,112],pink9:[137,0,96],pink10:[114,0,89],green0:[240,247,232],green1:[220,240,203],green2:[181,217,159],green3:[145,196,117],green4:[107,175,73],green5:[70,154,31],green6:[57,139,24],green7:[47,123,21],green8:[34,103,15],green9:[22,82,9],green10:[14,69,7],gray0:[243,246,248],gray1:[230,233,236],gray2:[205,207,210],gray3:[179,182,185],gray4:[155,158,162],gray5:[132,135,138],gray6:[119,122,125],gray7:[105,108,111],gray8:[87,90,93],gray9:[68,71,74],gray10:[55,58,61],"light-gray-1":[246,248,250],"light-gray-2":[237,240,243],slate0:[243,246,248],slate1:[225,233,238],slate2:[199,209,216],slate3:[172,185,194],slate4:[146,161,172],slate5:[122,139,152],slate6:[106,126,137],slate7:[92,111,124],slate8:[72,93,105],slate9:[52,74,87],slate10:[40,62,74],silver0:[245,245,245],silver1:[233,233,233],silver2:[207,207,207],silver3:[182,182,182],silver4:[158,158,158],silver5:[135,135,135],silver6:[122,122,122],silver7:[108,108,108],silver8:[90,90,90],silver9:[71,71,71],silver10:[58,58,58],gold0:[253,244,220],gold1:[241,232,197],gold2:[220,206,164],gold3:[197,181,131],gold4:[175,155,98],gold5:[155,132,67],gold6:[139,120,63],gold7:[122,107,59],gold8:[100,88,49],gold9:[78,70,40],gold10:[66,57,30],copper0:[253,243,241],copper1:[245,227,224],copper2:[226,199,196],copper3:[210,173,172],copper4:[193,145,145],copper5:[178,120,120],copper6:[167,105,105],copper7:[155,89,89],copper8:[131,74,74],copper9:[105,57,57],copper10:[92,45,45],white:[255,255,255],black:[0,0,0]}}});j&&"object"==(typeof j==="undefined"?"undefined":_typeof2(j))&&"default"in j&&j.default;var q=j.coreColors,U=["active","animate"],K="large-icon",Y={},X={init:function init(t){Y.document=t.document},create:function create(t){G();var e=Y.document.createElement("li-icon");return X.setAttrs(e,t),e},createA11yCaption:function createA11yCaption(t){G();var e=Y.document.createElement("span");return e.setAttribute("class","a11y-text"),e.textContent=t,e},createWithIcon:function createWithIcon(t){var e=X.create(t);return X.setIcon(e,t.type,t.size,t.color),e},setIcon:function setIcon(t,e,n,i){for(G();t.firstChild;){t.removeChild(t.firstChild)}e&&"loader"===e?function(t){G();var e=t.getAttribute("type")||"";if(e&&"loader"===e){var n=Y.document.createElement("div");n.className="artdeco-spinner";for(var i=0;i<12;i++){var a=Y.document.createElement("span");a.className="artdeco-spinner-bars",n.appendChild(a)}t.appendChild(n)}}(t):W.getIcon(e,{size:n,color:i},function(n,i){i&&"loader"!==e&&(i.setAttribute("focusable",!1),t.appendChild(i))})},setAttrs:function setAttrs(t,e){var n=e.size,i=e.type,a=e.color,r=(e["a11y-text"],e.class||"");t.setAttribute("aria-hidden","true"),t.setAttribute("type",i),function(t,e){for(var n=0,i=U.length;n<i;n++){var a=U[n];e[a]?t.setAttribute(a,"true"):t.removeAttribute(a)}}(t,e),r&&t.setAttribute("class",r),i&&"cake-icon"===i&&t.setAttribute("data-lie","true"),n?t.setAttribute("size",n):t.removeAttribute("size"),a?t.setAttribute("color",a):t.removeAttribute("color"),function(t){var e=t.getAttribute("type")||"",n=t.getAttribute("class")||"";0===e.indexOf("large-")&&-1===n.indexOf(K)&&t.setAttribute("class",n+" "+K)}(t)},setA11yText:function setA11yText(t,e){e?(t.removeAttribute("aria-hidden"),t.setAttribute("role","img"),t.setAttribute("aria-label",e)):t.getAttribute("aria-hidden")||(t.removeAttribute("aria-label"),t.removeAttribute("role"),t.setAttribute("aria-hidden","true"))}};function G(){if(!Y.document)throw new Error("No document object present. Please init() with a document.")}var Z={},J="-apple-system, system-ui, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Fira Sans, Ubuntu, Oxygen, Oxygen Sans, Cantarell, Droid Sans, Lucida Grande, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Emoji, Segoe UI Symbol, /* CJK */ Hiragino Kaku Gothic Pro, Meiryo, Hiragino Sans GB W3, /* Arabic */ Noto Naskh Arabic, Droid Arabic Naskh, Geeza Pro, Simplified Arabic, /* Thai */ Noto Sans Thai, Thonburi, Dokchampa, Droid Sans Thai, /* Sans Fallbacks */ Droid Sans Fallback, '.SFNSDisplay-Regular', /* CJK Fallbacks */ Heiti SC,  Microsoft Yahei",$=23,Q=function Q(t){var e=t||"",n=document.createElement("pre");n.appendChild(document.createTextNode(e)),n.style.fontFamily=J,n.style.fontWeight=600,n.style.fontSize="14px",n.style.visibility="hidden",n.style.display="inline-block",document.body.appendChild(n);var i=n.offsetWidth;return document.body.removeChild(n),i+4},tt=function tt(t,e,n){t.style.width=e>n-50?e+22+24+4+"px":n+"px"},et={init:function init(t){Z.document=t.document},getNextId:function getNextId(){return"deco-pill-input-"+ ++$},getTextWidth:Q,isInCompletedState:function isInCompletedState(t){return t.isComplete},isReadonly:function isReadonly(t){return t.hasAttribute("readonly")},isValueValid:function isValueValid(t){return""!==t.trim()},focus:function focus(t){var e=t.container,n=t.input,i=t.fullWidth;this.isInCompletedState(e)||(n.style.width=i+"px",e.setAttribute("data-artdeco-focus","true"))},blur:function blur(t){var e=t.container,n=t.input,i=t.inputWidth,a=t.id;this.isValueValid(n.value)?this.fireCompleteEvent(e,a):this.isInCompletedState(e)||(e.style.minWidth=i+24+"px",n.style.width=i+"px",e.removeAttribute("data-artdeco-focus"),e.removeAttribute("data-artdeco-has-content"),n.value="",n.dispatchEvent(new Event("input")))},receivedInput:function receivedInput(t){var e=t.container,n=t.input,i=t.fullWidth,a=n.value,r=Q(a);tt(n,r,i),""!==a?e.setAttribute("data-artdeco-has-content","true"):e.removeAttribute("data-artdeco-has-content")},fireCompleteEvent:function fireCompleteEvent(t,e){t.dispatchEvent(new n("complete",{detail:{id:e},bubbles:!0,cancelable:!0}))},keyup:function keyup(t,e){var n=t.container,i=t.id,a=t.input;switch(e){case 27:a.value="",a.dispatchEvent(new Event("input"));break;case 13:a.value&&!this.isInCompletedState(n)?this.fireCompleteEvent(n,i):this.empty(t)}},inputClick:function inputClick(t,e){var n=t.container,i=t.input;this.isInCompletedState(n)&&!this.isReadonly(n)&&(e.stopPropagation(),this.edit({container:n,input:i}))},iconClick:function iconClick(t,e){this.isInCompletedState(t.container)&&(e.preventDefault(),e.stopPropagation(),this.empty(t))},edit:function edit(t){var e=t.container,n=t.input;e.setAttribute("data-artdeco-has-content","true"),e.isComplete=!1,e.removeAttribute("complete"),e.setAttribute("data-artdeco-focus","true"),n.removeAttribute("readonly"),n.focus()},empty:function empty(t){
var e=t.container,i=t.input,a=t.inputWidth,r=t.fullWidth;e.dispatchEvent(new n("dismiss",{bubbles:!0,cancelable:!0})),e.isComplete=!1,e.removeAttribute("complete"),document.activeElement===i?(e.setAttribute("data-artdeco-focus","true"),i.style.width=r+"px"):(i.style.width=a+"px",e.style.minWidth=a+24+"px"),i.value="",i.removeAttribute("readonly")},complete:function complete(t){var e=t.container,n=t.input;n.setAttribute("readonly","true"),e.removeAttribute("data-artdeco-focus"),e.isComplete=!0,e.removeAttribute("data-artdeco-has-content"),e.setAttribute("complete","true");var i=Q(n.value);tt(n,i,0),e.style.minWidth=""},install:function install(){},iconWidth:22,pillPadding:24,pillBorder:4,pillFont:J},nt={},it=23,at={init:function init(t){nt.document=t.document},getNextId:function getNextId(){return"deco-pill-toggle-"+ ++it},focusIn:function focusIn(t){t.setAttribute("data-artdeco-focus","true")},focusOut:function focusOut(t){t.removeAttribute("data-artdeco-focus")},change:function change(t,e){e.checked?this.check(t):this.uncheck(t)},check:function check(t){t.setAttribute("checked","true")},uncheck:function uncheck(t){t.removeAttribute("checked")},install:function install(){}},rt={locales:{en_US:{separator:"/",dayIndex:1,monthIndex:0,yearIndex:2,startWeekday:0},ar_AE:{separator:"/",dayIndex:2,monthIndex:1,yearIndex:0,startWeekday:0},in_ID:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:0},zh_CN:{separator:"/",dayIndex:2,monthIndex:1,yearIndex:0,startWeekday:0},zh_TW:{separator:"/",dayIndex:2,monthIndex:1,yearIndex:0,startWeekday:0},cs_CZ:{separator:". ",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},da_DK:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},nl_NL:{separator:"-",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},fr_FR:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},de_DE:{separator:".",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},it_IT:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},ja_JP:{separator:"/",dayIndex:2,monthIndex:1,yearIndex:0,startWeekday:0},ko_KR:{separator:". ",dayIndex:2,monthIndex:1,yearIndex:0,startWeekday:0},ms_MY:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:0},no_NO:{separator:".",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},pl_PL:{separator:".",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},pt_BR:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},ro_RO:{separator:".",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},ru_RU:{separator:".",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},es_ES:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1},sv_SE:{separator:"-",dayIndex:2,monthIndex:1,yearIndex:0,startWeekday:1},tl_PH:{separator:"/",dayIndex:1,monthIndex:0,yearIndex:2,startWeekday:0},th_TH:{separator:"/",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:0},tr_TR:{separator:".",dayIndex:0,monthIndex:1,yearIndex:2,startWeekday:1}},_constructRegex:function _constructRegex(t){var e=this.getLocaleInfo(t),n=e.separator,i=0===e.yearIndex;return new RegExp("(\\d{"+(i?"4":"1,2")+"})"+n+"(\\d{1,2})"+n+"(\\d{"+(i?"1,2":"4")+"})(?:"+n+")?")},parse:function parse(t,e){var n=this._constructRegex(e),i=this.getLocaleInfo(e),a=i.dayIndex,r=i.monthIndex,s=i.yearIndex,o=n.exec(t);if(o)return o.shift(),new Date(o[s],o[r]-1,o[a]);var l=t.split("").filter(function(t){return t.charCodeAt(0)<200}).join(""),u=new Date(l);return"invalid date"!=u.toString().toLowerCase()?new Date(u.getFullYear(),u.getMonth(),u.getDate()):null},getLocaleInfo:function getLocaleInfo(t){return t&&this.locales[t]||this.locales.en_US}},st=[1,2,3,4,5,6,7],ot=function ot(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},lt=function lt(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1];return ot(t)?new Date(t.getFullYear(),t.getMonth()+e,1):null},ut=function ut(t,e){return!!(t&&e&&ot(t)&&ot(e))&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},ct={},dt={init:function init(t){ct.document=t.document,this.locale="en_US",this.firstDayOfWeek=0},install:function install(){},isDate:ot,setLocale:function setLocale(t){this.locale=t;var e=rt.getLocaleInfo(this.locale).startWeekday;this.firstDayOfWeek=e},getMonthByOffset:lt,getPreviousMonth:function getPreviousMonth(t){return lt(t,-1)},getNextMonth:function getNextMonth(t){return lt(t,1)},isSameDate:ut,parseDateStr:function parseDateStr(t){return rt.parse(t,this.locale)},validateDateRange:function validateDateRange(t,e){return t<=e},getMonthDiff:function getMonthDiff(t,e){var n=12*(e.getFullYear()-t.getFullYear());return n=n-t.getMonth()+1,n+=e.getMonth()},getCalendarModel:function getCalendarModel(t,e){var n=function(t){return ot(t)?32-new Date(t.getFullYear(),t.getMonth(),32).getDate():null}(t),i=function(t){return ot(t)?new Date(t.getFullYear(),t.getMonth(),1).getDay():null}(t)-this.firstDayOfWeek,a=Math.ceil((n+i)/7);Array.isArray(e)||(e=[e]);for(var r=[0,1,2,3,4,5,6],s=this.firstDayOfWeek;s>0;){r.push(r.shift()),s--}return{weeks:Array.apply(null,{length:a}).map(function(a,r){var s={previousMonthDays:[],nextMonthDays:[]};return s.days=st.map(function(a){var o=7*r+a-i,l=function(t){return{date:t,dayOfMonth:t.getDate(),weekday:t.getDay()}}(new Date(t.getFullYear(),t.getMonth(),o));if(e[0]&&ut(e[0],l.date)?(l.isSelectedStart=!0,l.isSelected=!0):e[1]&&ut(e[1],l.date)&&(l.isSelectedEnd=!0,l.isSelected=!0),o<=0)s.previousMonthDays.push(l);else{if(!(o>n))return l;s.nextMonthDays.push(l)}}).filter(function(t){return t}),s}),dayNames:r}}},ht={},pt="ltr";function ft(){if(!document)return pt;if(document.dir)return document.dir;var t=document.getElementsByTagName("html")[0].getAttribute("dir");return t||(t=document.getElementsByTagName("body")[0].getAttribute("dir"))||pt}function vt(t){return t&&"INPUT"===t.tagName.toUpperCase()&&"range"===t.type}function mt(t){var e={min:NaN,max:NaN,value:NaN,step:NaN,range:NaN,progress:NaN,valuetext:null,minvaluetext:null,maxvaluetext:null};return vt(t)?(e.max=parseFloat(t.max),e.min=parseFloat(t.min),e.value=parseFloat(t.value),e.step=parseFloat(t.step),isNaN(e.max)||isNaN(e.min)||isNaN(e.value)||isNaN(e.step)?e:(e.range=e.max-e.min,e.valuetext=t.valuetext||e.value,e.minvaluetext=t.minvaluetext||e.min,e.maxvaluetext=t.maxvaluetext||e.max,e.progress=(e.value-e.min)/e.range*100,e.steps=e.range/e.step,e)):e}var bt={init:function init(t){ht.docEl=t.document.documentElement,ht.elements=document.getElementsByTagName("input"),this.onInsert=this.onInsert.bind(this),this.onInput=this.onInput.bind(this),ht.isIE11=!!t.MSInputMethodContext&&!!document.documentMode,ht.isIE11&&(ht.docEl.addEventListener("mousemove",this.IE11InputMouseMove.bind(this)),ht.docEl.addEventListener("mousedown",this.IE11InputMouseDown.bind(this)),ht.docEl.addEventListener("mouseup",this.IE11InputMouseUp.bind(this)))},processAll:function processAll(){for(var t=ht.elements.length,e=0;e<t;e++){this.processMultiSlider({target:ht.elements[e]}),this.process(ht.elements[e])}},IE11InputMouseMove:function IE11InputMouseMove(t){var e=t.target;if(vt(e)&&"mousemove"===t.type&&e.hasAttribute("data-artdeco-pressed")){var n=document.createEvent("Event");n.initEvent("input",!0,!0),e.dispatchEvent(n)}},IE11InputMouseDown:function IE11InputMouseDown(t){var e=t.target;vt(e)&&"mousedown"===t.type&&e.setAttribute("data-artdeco-pressed",!0)},IE11InputMouseUp:function IE11InputMouseUp(t){var e=t.target;vt(e)&&"mouseup"===t.type&&e.removeAttribute("data-artdeco-pressed")},onInsert:function onInsert(t){var e=t.target;vt(e)&&(t.hasOwnProperty("animationName")&&"nodeInserted"!==t.animationName||(this.processMultiSlider(t),this.process(e)))},onInput:function onInput(t){var e=t.target;vt(e)&&(this.processMultiSlider(t),this.process(e))},processMultiSlider:function processMultiSlider(t){var e=t.target,n=e.parentNode;if(n&&("ARTDECO-SLIDER"!==n.tagName.toUpperCase()&&(n=n.parentNode),"ARTDECO-SLIDER"===n.tagName.toUpperCase())){var i=n.querySelectorAll("input[artdeco-min-slider]")[0],a=n.querySelectorAll("input[artdeco-max-slider]")[0];if(i&&a){var r=mt(i),s=mt(a),o=e===a?i:a;if(e===a&&s.value<=r.value)return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),e.value=r.value+s.step,o;if(e===i&&r.value>=s.value)return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),e.value=s.value-r.step,o;var l=(s.progress-r.progress)/2+r.progress,u=(l-50)/50*20/2+"px",c="translateX(calc(-"+l+"% + "+u+"))",d="translateX(calc("+l+"% - "+u+"))",h="calc("+l+"% - "+u+")",p="calc("+l+"% -+"+u+")";return"rtl"===ft()?(a.style.webkitTransform=d,a.style.msTransform=d,a.style.transform=d,a.parentNode.style.right=p):(a.style.webkitTransform=c,a.style.msTransform=c,a.style.transform=c,a.parentNode.style.left=h),o}}},install:function install(){this.processAll(),ht.docEl.addEventListener("animationstart",this.onInsert,!1),ht.docEl.addEventListener("MSAnimationStart",this.onInsert,!1),ht.docEl.addEventListener("webkitAnimationStart",this.onInsert,!1),ht.docEl.addEventListener("input",this.onInput)},process:function process(t){if(vt(t)){var e=mt(t);"rtl"===ft()&&(e.progress=100-e.progress),e.steps>10?(t.style.backgroundSize="100%, 300% 100%, 200%",t.style.backgroundPosition="top left, 0px -100%, calc("+(100-e.progress)+"% - "+(e.progress/100*20-10)+"px)"):(t.style.backgroundSize="100%, calc("+100/e.steps+"% - "+20/e.steps+"px) 100%, 200%",t.style.backgroundPosition="top left, 10px center, calc("+(100-e.progress)+"% - "+(e.progress/100*20-10)+"px)"),t.setAttribute("value",e.value)}}},yt=function yt(t,e){e.focus&&t.setAttribute("data-form-elem-focus","true")},gt=function gt(t,e){t.setAttribute("data-form-elem-focus",e.value.length?"true":"false")},Ct="function"==typeof HTMLElement?HTMLElement:function(){};"object"==(typeof HTMLElement==="undefined"?"undefined":_typeof2(HTMLElement))&&"object"==_typeof2(HTMLElement.prototype)&&(Ct.prototype=HTMLElement.prototype);var kt=e(function(t){t.exports={timings:{linear:[{x:.25,y:.25},{x:.75,y:.75}],easeIn:[{x:.4,y:0},{x:1,y:1}],easeOut:[{x:0,y:0},{x:.2,y:1}],easeInOut:[{x:.4,y:0},{x:.2,y:1}]},durations:{slow:834,casual:667,important:500,focused:334,quick:167,fast:83},delays:{"short":25,medium:50,"long":1e3}}}),Et=kt&&"object"==(typeof kt==="undefined"?"undefined":_typeof2(kt))&&"default"in kt?kt.default:kt,_t=(kt.timings,kt.durations,kt.delays,Et.timings),At=Et.durations,xt={x:0,y:0},Tt={x:1,y:1},wt=Math.floor(1e3/60),Lt=Math.ceil(At.slow/wt),It=void 0;var Mt=function(){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.easing,a=void 0===i?"easeIn":i,r=n.speed,s=void 0===r?"slow":r,o=n.startVal,l=void 0===o?0:o,u=n.endVal,c=void 0===u?0:u;if(t.classCallCheck(this,e),e.init(window),!It[a])throw new Error('ArtDeco easing method "'+a+'" does not exist.');this._easingData=It[a],this.animationSpeed=s,this.startVal=l,this.endVal=c}return t.createClass(e,[{key:"startVal",get:function get(){return this._startVal},set:function set(t){this._startVal=t,this._delta=this._endVal-this._startVal}},{key:"endVal",get:function get(){return this._endVal},set:function set(t){this._endVal=t,this._delta=this._endVal-this._startVal}},{key:"easingData",get:function get(){return this._easingData}},{key:"animationSpeed",get:function get(){return this._animationSpeed},set:function set(t){if(At[t])this._animationSpeed=At[t];else{if(!function(t){return t-0==t}(t))throw new Error('Unable to set animation speed "'+speed+'". Value must be a valid ArtDeco speed or a number.');this._animationSpeed=t}}},{key:"isAnimating",get:function get(){var t=!1;return(this.startTime||this._animationSpeed)&&(t=(Date.now()-this.startTime)/this._animationSpeed<1),t}}]),t.createClass(e,[{key:"begin",value:function value(){this.startTime=Date.now(),this.lastIndex=0}},{key:"next",value:function value(){var t=(Date.now()-this.startTime)/this._animationSpeed;return this.valueAtTime(t,!0)}},{key:"valueAtTime",value:function value(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1]?this.lastIndex:0,n=this._findIndexForValue(t,e,0);return this._startVal+this._easingData[n][1]*this._delta}},{key:"timeAtValue",value:function value(t){t/=this._delta;var e=this._findIndexForValue(t,0,1);return this._easingData[e][0]}},{key:"_findIndexForValue",value:function value(t,e,n){if(t<=0)return 0;if(t>=1)return this._easingData.length-1;for(var i=e;i<Lt&&!(this._easingData[i][n]>t);i++){}return i-1}},{key:"_calcDelta",value:function value(){this._delta=this._endVal-this._startVal}}],[{key:"init",value:function value(t){(It=t._artdecoBakedCurves)||(It={},Object.keys(_t).forEach(function(t){It[t]=e.bakeCurves(t)}),t._artdecoBakedCurves=It)}},{key:"bakeCurves",value:function value(t){for(var n=[[0,0]],i=0;i<Lt;i++){var a=e.pointOnCurve(i/Lt,t);n.push([a.x,a.y])}return n.push([1,1]),n}},{key:"linearInterpolation",value:function value(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}},{key:"pointOnCurve",value:function value(n,i){var a=e.linearInterpolation,r=t.slicedToArray(_t[i],2),s=r[0],o=r[1],l=a(xt,s,n),u=a(s,o,n),c=a(o,Tt,n),d=a(l,u,n),h=a(u,c,n);return a(d,h,n)}}]),e}();function St(t,e,n,i){t.addEventListener(e,function(e){for(var a=!1,r=e.target,s=e.relatedTarget;r&&r!==t;){r.matches(n)?(a=!0,r=!1):r=r.parentElement}for(;a&&s&&s!==t;){s.matches(n)?a=!1:s=s.parentElement}a&&i(e)})}function Dt(t){var e=null;if(t instanceof HTMLElement){var n=window.getComputedStyle(t),i=t.clientWidth,a=parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),r=parseFloat(n.marginLeft)+parseFloat(n.marginRight);e=Math.ceil(r+a+i)}return e}var Nt=Object.freeze({getBoxModelWidth:Dt}),Ot=(Et.durations,function(){}),Pt="artdeco-transport-hidden",Ht=function(){function e(n){t.classCallCheck(this,e),this._direction=n,this._onClick=Ot,this._handleClick=this.handleClick.bind(this),this._handleTransitionEnd=this.handleTransitionEnd.bind(this),this.createDOMStructure()}return t.createClass(e,[{key:"element",get:function get(){return this._el}},{key:"width",get:function get(){return Dt(this._el)}},{key:"direction",get:function get(){return this._direction}},{key:"iconEl",set:function set(t){this._el.removeChild(this._iconEl),this._el.appendChild(t),this._iconEl=t}},{key:"onClick",set:function set(t){if("function"!=typeof t)throw new Error("Transport controll onClick callback must be a function");this._onClick=t}},{key:"height",set:function set(t){this._el.style.height=t+"px"}}]),t.createClass(e,[{key:"createDOMStructure",value:function value(){var t=document.createElement("button");t.setAttribute("data-direction",this._direction),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.className="artdeco-transport "+Pt;var e=document.createElement("li-icon");e.setAttribute("type","previous"===this._direction?"chevron-left-icon":"chevron-right-icon"),e.setAttribute("size","small"),t.appendChild(e),t.addEventListener("click",this._handleClick),t.addEventListener("transitionend",this._handleTransitionEnd),this._iconEl=e,this._el=t}},{key:"handleClick",value:function value(t){this._onClick(this)}},{key:"handleTransitionEnd",value:function value(t){this._el.classList.contains(Pt)&&this.hide(!0)}},{key:"hide",value:function value(t){var e=this._el.classList.contains(Pt),n=this._el.style;e?e&&t&&"none"!==n.display&&(n.display="none"):(this._el.classList.add(Pt),t&&(n.display="none"))}},{key:"show",value:function value(t){var e=this;this._el.classList.contains(Pt)&&(t?(this._el.classList.remove(Pt),this._el.style.display="block"):(this._el.classList.add(Pt),this._el.style.display="block",window.requestAnimationFrame(function(){e._el.classList.remove(Pt)})))}},{key:"teardown",value:function value(){this._el.removeEventListener("click",this._handleClick),this._el.removeEventListener("transitionend",this._handleTransitionEnd)}}]),e}();function Rt(){var t={};return"undefined"!=typeof window&&(window.hasOwnProperty("artdeco")||(window.artdeco={}),t=window.artdeco),t}var Ft=Rt(),zt="default",Vt="reverse",Wt="negative";function Bt(){var t=Ft.rtlScroll;if(!t){var e=document.createElement("div");e.setAttribute("dir","rtl"),e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",e.appendChild(document.createTextNode("LinkedIn")),document.documentElement.appendChild(e),t=Vt,e.scrollLeft>0?t=zt:(e.scrollLeft=1,0===e.scrollLeft&&(t=Wt)),Ft.rtlScroll=t,document.documentElement.removeChild(e)}return t}function jt(t){var e=t;for(t._isRtl=!1;e instanceof HTMLElement;){if("rtl"===(e.getAttribute("dir")||"").toLowerCase()){t._isRtl=!0;break}e=e.parentNode||null}return t._isRtl}function qt(t){t.hasOwnProperty("_isRtl")||jt(t);var e=t.scrollLeft;if(t._isRtl){var n=Bt(),i=t.clientWidth;switch(n){case Vt:e=t.scrollWidth-Dt(t)-e;break;case Wt:e=t.scrollWidth-(i-e)}}return e}function Ut(t,e){if(t.hasOwnProperty("_isRtl")||jt(t),t._isRtl){var n=Bt();if(n===Wt||n===Vt){var i=t.scrollWidth-Dt(t)-e,a=n===Wt?-1:1;t.scrollLeft=i*a}else t.scrollLeft=e}else t.scrollLeft=e}var Kt=Object.freeze({isRtl:jt,getScrollLeft:qt,setScrollLeft:Ut}),Yt=wt;var Xt=function(){function e(n){t.classCallCheck(this,e),this._contentEl=n,this._transportClick=this.handleTransportClick.bind(this),this._handleResize=this.handleResize.bind(this),this._updateScroll=this.updateScroll.bind(this),this._adjustForResize=this.adjustForResize.bind(this),this._handleScroll=this.handleScroll.bind(this),this._updateTransportControls=this.updateTransportControls.bind(this),this._scrollTimer=null,this._onTransport=null,this._scrollMotion=new Mt({easing:"easeInOut",speed:"focused"}),this.createDOMStructure()}return t.createClass(e,[{key:"element",get:function get(){return this._el}},{key:"previousControl",get:function get(){return this._previousButton}},{key:"nextControl",get:function get(){return this._nextButton}},{key:"onTransport",set:function set(t){if("function"!=typeof t)throw new Error("[Scrolling Container] onTransport callback must be a function");this._onTransport=t}},{key:"maxScrollLeft",get:function get(){return this._el.scrollWidth-this._el.clientWidth}}]),t.createClass(e,[{key:"createDOMStructure",value:function value(){this._el=document.createElement("div"),this._el.className="artdeco-scrolling-container",this._previousButton=this.createTransportButton("previous"),this._nextButton=this.createTransportButton("next")}},{key:"createTransportButton",value:function value(t){var e=new Ht(t);return e.onClick=this._transportClick,e}},{key:"handleTransportClick",value:function value(t){var e=void 0;this._scrollMotion.isAnimating?e=this._scrollMotion.endVal:(e=qt(this._el),this._isRtl?e+=Dt(this._el)-this._previousButton.width:e+=this._previousButton.width);var n=this.onScroll(t.direction,Math.ceil(e),this._isRtl);this.scrollTo(n)}},{key:"handleResize",value:function value(){clearTimeout(this._resizeDebounce),this._resizeDebounce=setTimeout(this._adjustForResize,Yt)}},{key:"handleScroll",value:function value(t){this._scrollTimer||(clearTimeout(this._scrollDebounce),this._scrollDebounce=setTimeout(this._updateTransportControls,Yt))}},{key:"scrollTo",value:function value(t){if(t instanceof HTMLElement){var e=this._scrollMotion,n=t.offsetLeft-this._previousButton.width,i=this.maxScrollLeft;this._isRtl&&(n=i-(this._el.scrollWidth-(Dt(t)+t.offsetLeft))+this._previousButton.width),n=n>i?i:n,this.stopScroll(),e.startVal=qt(this._el),e.endVal=n,e.begin(),this._scrollTimer=setInterval(this._updateScroll,wt),this.updateTransportControls()}}},{key:"updateScroll",value:function value(){var t=this._scrollMotion.next();Ut(this._el,t),this._scrollMotion.isAnimating||(this.stopScroll(),this.updateTransportControls())}},{key:"stopScroll",value:function value(){clearInterval(this._scrollTimer),this._scrollTimer=null}},{key:"insertContainer",value:function value(t){t.insertBefore(this._el,this._contentEl),this._el.appendChild(this._previousButton.element),this._el.appendChild(this._nextButton.element),this._el.addEventListener("scroll",this._handleScroll),window.addEventListener("resize",this._handleResize),this._el.appendChild(this._contentEl),this._isRtl=jt(this._el),this.handleResize()}},{key:"adjustForResize",value:function value(){if(!this._initialized){var t=this._isRtl?this.maxScrollLeft:0;Ut(this._el,t),this._initialized=!0}var e=this._contentEl.clientHeight;this._previousButton.height=e,this._nextButton.height=e,this.updateTransportControls()}},{key:"updateTransportControls",value:function value(){var t=this.maxScrollLeft,e=qt(this._el);this._isRtl&&(e=Math.abs(e-t)),t?(e<=0?this._previousButton.hide():this._previousButton.show(),e>=t?this._nextButton.hide():this._nextButton.show()):(Ut(this._el,0),this._previousButton.hide(!0),this._nextButton.hide(!0))}},{key:"teardown",value:function value(){this.stopScroll(),clearTimeout(this._scrollDebounce),clearTimeout(this._resizeDebounce),this._previousButton.teardown(),this._nextButton.teardown(),this._el.removeChild(this._previousButton.element),this._el.removeChild(this._nextButton.element),this._el.removeEventListener("scroll",this._handleScroll),window.removeEventListener("resize",this._handleResize),this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el)}}]),e}(),Gt="_bootEventListeners";function Zt(){var t=Rt();return t[Gt]||(t[Gt]={}),t[Gt]}var Jt={on:function on(t,e){var n=Zt();!0===n[t]?e():(n[t]||(n[t]=[]),n[t].push(e))},trigger:function trigger(t){var e=Zt();Array.isArray(e[t])&&e[t].forEach(function(t){return t()}),e[t]=!0},reset:function reset(){Rt()[Gt]={}}};function $t(t,e,n){var i=Rt();if(i.registeredElements||(i.registeredElements={}),!i.registeredElements[e]){i.registeredElements[e]=!0;try{t.registerElement&&t.registerElement(e,n)}catch(t){}}}var Qt="undefined"!=typeof window?window:null,te=Qt?Qt.document:null;Qt&&te&&([s,b,dt,A,D,W,X,et,at,bt,Mt].forEach(function(t){return t.init(Qt)}),Jt.trigger("core-ready"));var ee={buttonAnimation:s,contextClasses:b,datepicker:dt,floatingLabel:A,focusOutline:D,icons:W,liIcon:X,pillInput:et,pillToggle:at,rangeSlider:bt,Motion:Mt,colors:q,ComponentCore:Ct,triggerEvent:R,delegateEvent:St,registerArtDecoElement:$t,ScrollingContainer:Xt,BoxModelHelpers:Nt,RtlHelpers:Kt,artdecoBoot:Jt,artdecoGlobal:Rt};var ne="__ARTDECO_INVALID_DATA__",ie={xml:function xml(t){var e=null;if(t)try{(e=t.responseXML?t.responseXML.firstChild:(new DOMParser).parseFromString(t.responseText,"application/xml").firstChild).getElementsByTagName("parsererror").length&&(e=ne)}catch(t){e=ne}return e},json:function json(t){var e=null;if(t)try{e=JSON.parse(t.responseText)}catch(t){e=ne}return e},raw:function raw(t){return t?t.responseText:null}};function ae(){}var re=function t(e){var n=e.url||null;if(n){n=t.urlResolver(n);var i="undefined"!=typeof XDomainRequest,a=e.type||"GET",r=e.data||null,s="function"==typeof e.success?e.success:ae,o="function"==typeof e.error?e.error:ae,l=e.dataType||"raw",u=ie.hasOwnProperty(l)?ie[l]:ie.raw,c=i&&!~n.indexOf(window.location.hostname)&&!!n.match(/^([a-z]+:)|^(\/\/)|^([^\/]+\.)/),d=c?"onload":"onreadystatechange",h=c?new XDomainRequest:new XMLHttpRequest;h[d]=function(){var t=null;(c||4===this.readyState)&&(c||200===this.status?(t=u(this))===ne?o(this):s(t,this):o(this))},c&&(h.onerror=o,h.ontimeout=o),h.addEventListener=ae,h.open(a,n,!0),"xml"===l&&h.overrideMimeType&&(h.responseType="document",h.overrideMimeType("text/xml")),h.send(r)}};re.urlResolver=function(t){return t},re.urlResolver=function(t){var e="",n=document.getElementById(t);return n?e=n.getAttribute("content"):window.play&&window.play.assetUrl&&(e=window.play.assetUrl(t)),e||(console.warn('[artdeco] Was unable to resolve asset URL "'+t+'"'),e=""),e};var se="large-icon",oe=["type","size","color"],le="undefined"!=typeof HTMLElement?Object.create(HTMLElement.prototype):{};function ue(t){var e=t.getAttribute("type");e&&0===e.indexOf("large-")&&d(t,[se])}le.attachedCallback=function(){this._installA11yCaption()},le.createdCallback=function(){this.update(),this._syncA11yCaption(),this.setAttribute("aria-hidden","true"),ue(this)},le.detachedCallback=function(){this._removeA11yCaption()},le.attributeChangedCallback=function(t,e,n){oe.indexOf(t)>-1&&this.update(),"a11y-text"===t&&this._syncA11yCaption(),"type"!==t&&"class"!==t||ue(this)},le.update=function(){var t=this.getAttribute("type"),e=this.getAttribute("size")||"large",n=!1;t&&(this.hasAttribute("color")&&(n="false"!==this.getAttribute("color")),X.setIcon(this,t,e,n))},le._installA11yCaption=function(){var t=this.parentNode,e=this._a11yCaption;t&&e&&!e.parentNode&&t.insertBefore(e,this)},le._removeA11yCaption=function(){var t=this._a11yCaption;t&&t.parentNode&&t.parentNode.removeChild(t),this._a11yCaption=null},le._syncA11yCaption=function(){var t=this._a11yCaption,e=this.getAttribute("a11y-text");e?t?t.textContent=e:(this._a11yCaption=X.createA11yCaption(e),this._installA11yCaption()):this._removeA11yCaption()};var ce=function(e){function i(){t.classCallCheck(this,i),t.get(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}return t.inherits(i,e),t.createClass(i,[{key:"attachedCallback",value:function value(){this.render(),this.dispatchEvent(new n("rendered",{bubbles:!0,cancelable:!0})),this.cacheDOMElements(),this._isInput()&&(this.setPillWidth(this.getAttribute("label")),this.apiValues={container:this,input:this.input,inputWidth:this.inputWidth,fullWidth:this.fullWidth,id:this.inputId},"true"===this.getAttribute("complete")&&this.getAttribute("value")&&this.complete()),this.addAllEventListeners()}},{key:"addAllEventListeners",value:function value(){var t,e=this;this._isInput()?(t=e.apiValues,e.addEventListener("focus",function(){et.focus(t)},!0),e.addEventListener("blur",function(){et.blur(t)},!0),e.addEventListener("input",function(t){return e.handleInput(t)}),e.addEventListener("keydown",function(t){return e.handleKeydown(t)}),e.addEventListener("keyup",function(e){return et.keyup(t,e.which)}),e.input.addEventListener("click",function(e){return et.inputClick(t,e)}),e.icons.addEventListener("click",function(e){return et.iconClick(t,e)}),document.body.addEventListener("complete",function(t){e.inputId===t.detail.id&&e.complete()})):"toggle"===this.getAttribute("type")&&(this.input.addEventListener("focus",function(){at.focusIn(e)}),this.input.addEventListener("blur",function(){at.focusOut(e)}),this.addEventListener("change",function(){return at.change(e,e.input)}))}},{key:"attributeChangedCallback",value:function value(t,e,n){if(e&&"label"===t){var i=this.labelText;i.removeChild(i.firstChild),i.appendChild(document.createTextNode(n)),this.setPillWidth(n)}else"value"===t&&this._isInput()&&this.handleValueChange(n)}},{key:"setPillWidth",value:function value(t){var e=this.inputWidth=et.getTextWidth(t)+et.iconWidth;this.fullWidth=e+et.pillPadding,this.style.minWidth=this.fullWidth+"px",this.input.style.width=this.inputWidth+"px"}},{key:"handleValueChange",value:function value(t){var e=this.apiValues;""===t?et.empty(e):(this.input!==document.activeElement&&(this.input.value=t),et.receivedInput(e))}},{key:"handleInput",value:function value(t){this.setAttribute("value",t.target.value),et.receivedInput(this.apiValues)}},{key:"handleKeydown",value:function value(t){13===t.which&&(t.preventDefault(),t.stopPropagation())}},{key:"complete",value:function value(){et.complete(this.apiValues)}},{key:"render",value:function value(){var t=document.createElement("label"),e=document.createElement("input"),n=document.createElement("span");n.setAttribute("class","artdeco-pill-icons"),["plus-icon","check-icon","cancel-icon"].map(function(t){var e=document.createElement("li-icon");e.setAttribute("type",t),e.setAttribute("size","small"),e.setAttribute("class","icon"),n.appendChild(e)});var i=document.createElement("span");i.setAttribute("class","artdeco-pill-label-text"),i.appendChild(document.createTextNode(this.getAttribute("label"))),t.appendChild(n),t.appendChild(i);var a=this.inputId=et.getNextId(),r=[["type",this._isInput()?"text":"checkbox"],["id",a],["value",this.getAttribute("value")||""]];"true"===this.getAttribute("checked")&&r.push(["checked","true"]),r.map(function(t){e.setAttribute(t[0],t[1])}),t.setAttribute("for",a),this.appendChild(t),this.appendChild(e)}},{key:"cacheDOMElements",value:function value(){this.input=this.querySelector("input"),this.icons=this.querySelector(".artdeco-pill-icons"),this.labelText=this.querySelector("label .artdeco-pill-label-text")}},{key:"_isInput",value:function value(){return"input"===this.getAttribute("type")}}]),i}(Ct);var de=function(e){function i(){t.classCallCheck(this,i),t.get(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}return t.inherits(i,e),t.createClass(i,[{key:"createdCallback",value:function value(){this.addEventListener("input",this.retargetEvent),this.addEventListener("change",this.retargetEvent),this.render()}},{key:"retargetEvent",value:function value(t){if(!this._isDispatching){t.stopImmediatePropagation(),t.preventDefault(),this.update(t.target);var e=new n(t.type,{bubbles:!0,cancelable:!0,detail:this});this._isDispatching=!0,this.dispatchEvent(e),this._isDispatching=!1}}},{key:"attributeChangedCallback",value:function value(t,e,n){switch(t){case"multiple":this.render();break;case"id":this.id=n;break;case"name":this.name=n;break;case"list":this.list=n;break;case"max":this.max=n;break;case"min":this.min=n;break;case"step":this.step=n;break;case"value":this.value=n;break;case"minvalue":this.minvalue=n;break;case"maxvalue":this.maxvalue=n;break;case"ariavaluetext":this.valuetext=n}this.update()}},{key:"render",value:function value(){this.isMultiSlider=this.hasAttribute("multiple"),this.isMultiSlider?function(t){for(;t.firstChild;){t.removeChild(t.firstChild)}var e=document.createElement("input");e.setAttribute("type","range"),e.setAttribute("min","0"),e.setAttribute("max","100"),e.setAttribute("step","10"),e.setAttribute("value","30"),e.setAttribute("artdeco-min-slider",""),e.setAttribute("aria-valuetext",e.getAttribute("value")),e.setAttribute("data-artdeco-slider-reverse",""),t.appendChild(e);var n=document.createElement("div");n.setAttribute("class","artdeco-max-slider-container");var i=document.createElement("input");i.setAttribute("type","range"),i.setAttribute("min","0"),i.setAttribute("max","100"),i.setAttribute("step","10"),i.setAttribute("value","70"),i.setAttribute("aria-valuetext",i.getAttribute("value")),i.setAttribute("artdeco-max-slider",""),n.appendChild(i),t.appendChild(n)}(this):function(t){for(;t.firstChild;){t.removeChild(t.firstChild)}var e=document.createElement("input");e.setAttribute("type","range"),e.setAttribute("min","0"),e.setAttribute("max","100"),e.setAttribute("step","10"),e.setAttribute("value","50"),e.setAttribute("aria-valuetext",e.getAttribute("value")),t.appendChild(e)}(this);var t=this.getElementsByTagName("input")||[];this.minInput=t[0],this.maxInput=t[1],this.hasAttribute("id")&&(this.id=this.getAttribute("id")),this.hasAttribute("name")&&(this.name=this.getAttribute("name")),this.hasAttribute("list")&&(this.name=this.getAttribute("list")),this.hasAttribute("min")&&(this.min=this.getAttribute("min")),this.hasAttribute("max")&&(this.max=this.getAttribute("max")),this.hasAttribute("step")&&(this.step=this.getAttribute("step")),this.hasAttribute("value")&&(this.value=this.getAttribute("value")),this.hasAttribute("minvalue")&&(this.minvalue=this.getAttribute("minvalue")),this.hasAttribute("maxvalue")&&(this.maxvalue=this.getAttribute("maxvalue")),this.hasAttribute("aria-valuetext")&&(this.valuetext=this.getAttribute("aria-valuetext")),this.update()}},{key:"update",value:function value(t){this._pendingRender&&window.cancelAnimationFrame(this._pending);var e=t?[t]:[this.minInput,this.maxInput];this._pendingRender=window.requestAnimationFrame(function(t){delete this._pendingRender,t.forEach(function(t){t&&(bt.processMultiSlider({target:t}),bt.process(t))})}.bind(this,e))}},{key:"detachedCallback",
value:function value(){this._pendingRender&&window.cancelAnimationFrame(this._pending),this.removeEventListener("input",this.retargetEvent),this.addEventListener("change",this.retargetEvent)}},{key:"id",get:function get(){return this.minInput.id},set:function set(t){return String(this.id)===String(t)?t:(this.minInput&&this.minInput.setAttribute("id",t),t)}},{key:"name",get:function get(){return this.getAttribute("name")},set:function set(t){return this.minInput&&this.minInput.setAttribute("name",t+"[]"),this.maxInput&&this.maxInput.setAttribute("name",t+"[]"),t}},{key:"list",get:function get(){return this.minInput.getAttribute("list")},set:function set(t){return this.minInput&&this.minInput.setAttribute("list",t),this.maxInput&&this.maxInput.setAttribute("list",t),t}},{key:"max",get:function get(){return parseFloat(this.minInput.max)},set:function set(t){return t=parseFloat(t),this.max===t?t:isNaN(t)?console.error('"'+t+'" is not a valid value for "max" on '+this):(this.minInput&&(this.minInput.max=t),this.maxInput&&(this.maxInput.max=t),this.update(),t)}},{key:"min",get:function get(){return parseFloat(this.minInput.min)},set:function set(t){return t=parseFloat(t),this.min===t?t:isNaN(t)?console.error('"'+t+'" is not a valid value for "min" on '+this):(this.minInput&&(this.minInput.min=t),this.maxInput&&(this.maxInput.min=t),this.update(),t)}},{key:"step",get:function get(){return parseFloat(this.minInput.step)},set:function set(t){return t=parseFloat(t),this.step===t?t:isNaN(t)?console.error('"'+t+'" is not a valid value for "step" on '+this):(this.minInput&&(this.minInput.step=t),this.maxInput&&(this.maxInput.step=t),this.update(),t)}},{key:"value",get:function get(){return this.isMultiSlider?void 0:parseFloat(this.minInput.value)},set:function set(t){return this.isMultiSlider?t:(t=parseFloat(t),this.value===t?t:isNaN(t)?console.error('"'+t+'" is not a valid value for "value" on '+this):(this.minInput&&(this.minInput.value=t),this.update(),t))}},{key:"minvalue",get:function get(){return this.isMultiSlider?parseFloat(this.minInput.value):void 0},set:function set(t){return this.isMultiSlider?(t=parseFloat(t),this.minvalue===t?t:isNaN(t)?console.error('"'+t+'" is not a valid value for "minvalue" on '+this):(this.minInput&&(this.minInput.value=t),this.update(this.minInput),t)):t}},{key:"maxvalue",get:function get(){return this.isMultiSlider?parseFloat(this.maxInput.value):void 0},set:function set(t){return this.isMultiSlider?(t=parseFloat(t),this.maxvalue===t?t:isNaN(t)?console.error('"'+t+'" is not a valid value for "maxvalue" on '+this):this.isMultiSlider?(this.maxInput&&(this.maxInput.value=t),this.update(this.maxInput),t):t):t}},{key:"minvaluetext",get:function get(){return this.isMultiSlider?this.minInput.valuetext:void 0},set:function set(t){return this.isMultiSlider?this.minvaluetext===t?t:(this.minInput&&(this.minInput.valuetext=t),this.update(this.minInput),t):t}},{key:"maxvaluetext",get:function get(){return this.isMultiSlider?this.maxInput.valuetext:void 0},set:function set(t){return this.isMultiSlider?this.maxvaluetext===t?t:this.isMultiSlider?(this.maxInput&&(this.maxInput.valuetext=t),this.update(this.maxInput),t):t:t}},{key:"valuetext",get:function get(){return this.isMultiSlider?void 0:this.value},set:function set(t){return this.isMultiSlider?t:this.valuetext===t?t:(this.minInput&&(this.minInput.valuetext=t),this.update(),t)}}]),i}(Ct);var he=["type","size","color"],pe={iconType:{msg:'The linkedin-logo requires the type attribute be suffixed with either "-bug" or "-logo" corresponding to the icon type.',values:["linkedin-bug","linkedin-logo"]},iconVariant:{msg:"The type attribute on linkedin-logo is prefixed with an unsupported variant. Please add a variant based on the supported icon colors.",values:["","premium","brand","inverse"]},size:{msg:'The linkedin-logo requires an attribute of "size" with a value corresponding to a supported icon size. Supported sizes are 14dp, 21dp, 28dp, 34dp, 40dp and 48dp',values:["14dp","21dp","28dp","34dp","40dp","48dp"]},color:{msg:'The linkedin-logo expects to color attribute to be null, "dark", or "inverse"',values:["dark","inverse"]}},fe=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"attachedCallback",value:function value(){var t=this.getAttribute("type"),e=this.getAttribute("size");this.getAttribute("color");this.iconEl=this.querySelector("li-icon")||function(t,e){var n=ve(t);return X.create({type:n.iconType,color:n.iconVariant,size:e||"14dp"})}(t,e),this.lockupTextEl=this.querySelector(".logo-text")||this.createLockupTextEl(this.textContent),this.appendLogoEls(),this.update()}},{key:"attributeChangedCallback",value:function value(t,e,n){he.indexOf(t)>-1&&("type"===t&&this.nullPropCheck("type",this.getAttribute("type")),"size"===t&&this.nullPropCheck("size",this.getAttribute("size")),"color"===t?this.update():e&&this.update())}},{key:"update",value:function value(){var t=this.getAttribute("type"),e=this.getAttribute("size"),n=this.getAttribute("color");t&&e&&(!function(t,e,n){var i=ve(e);X.setAttrs(t,{type:i.iconType,color:i.iconVariant,size:n||"14dp"})}(this.iconEl,t,e),this.setColorClassname(n))}},{key:"setColorClassname",value:function value(t){var e=this,n=/^(logo-lockup-)/;if([].some.call(this.lockupTextEl.classList,function(t){n.test(t)&&e.lockupTextEl.classList.remove(t)}),[].some.call(this.iconEl.classList,function(t){n.test(t)&&e.iconEl.classList.remove(t)}),t){var i="logo-lockup-"+t;this.lockupTextEl.classList.add(i),this.iconEl.classList.add(i)}}},{key:"appendLogoEls",value:function value(){this.textContent="",this.appendChild(this.iconEl),this.appendChild(this.lockupTextEl)}},{key:"createLockupTextEl",value:function value(t){var e=document.createElement("span");return e.classList.add("logo-text"),e.textContent=t,e}},{key:"nullPropCheck",value:function value(t,e){if(!e)return console.warn("An attribute of "+t+" is required for the linkedin-logo custom element"),!1}},{key:"validateProp",value:function value(t,e){var n=pe[t];n&&n.values&&-1===n.values.indexOf(e)&&console.warn(n.msg)}}]),n}(Ct);function ve(t){if(!t)return{iconType:"linkedin-bug",iconVariant:"brand"};var e=t.split("-"),n=e.length>1?e[0]:"",i=e.length>1?e[1]:e[0];return i="linkedin-"+i,fe.prototype.validateProp("iconVariant",n),fe.prototype.validateProp("iconType",i),{iconType:i,iconVariant:n}}var me=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"attachedCallback",value:function value(){this.render(),this.addAllEventListeners(),this.input.value&&yt(this,this.input)}},{key:"addAllEventListeners",value:function value(){var t=this;this.addEventListener("focus",function(){return yt(t,t.input)},!0),this.addEventListener("blur",function(){return gt(t,t.input)},!0)}},{key:"render",value:function value(){var t=document.createElement("label"),e=document.createElement("input");this.input=e;var n=this.getAttribute("label"),i=this.getAttribute("inputId"),a=this.getAttribute("value"),r=this.getAttribute("name")||i,s=this.getAttribute("type")||"text",o=this.getAttribute("required"),l=this.getAttribute("disabled");this.nullPropCheck("label",n),this.nullPropCheck("inputId",i),t.setAttribute("for",i),e.setAttribute("id",i),e.setAttribute("name",r),e.setAttribute("type",s),t.setAttribute("class","artdeco-label-text"),a&&e.setAttribute("value",a),l&&e.setAttribute("disabled","disabled"),o&&e.setAttribute("required","required"),t.appendChild(document.createTextNode(n)),this.appendChild(t),this.appendChild(e)}},{key:"nullPropCheck",value:function value(t,e){e||console.warn(t+" is a required attribute for the artdeco-floatlabel custom element")}}]),n}(Ct);var be=function(e){function i(){t.classCallCheck(this,i),t.get(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}return t.inherits(i,e),t.createClass(i,[{key:"attachedCallback",value:function value(){this.render()}},{key:"render",value:function value(){var t=this,e=this.getProperty("heading",!0),i=this.getProperty("subhead",!0),a=this.getProperty("url",!1),r=this.getProperty("cta",!1),s=this.getProperty("textCta",!1),o=r||s,l=document.createElement("strong"),u=document.createElement("p");if(l.classList.add("artdeco-heading"),u.classList.add("artdeco-subhead"),this.appendChild(l),this.appendChild(u),l.appendChild(document.createTextNode(e)),u.appendChild(document.createTextNode(i)),a&&o){var c=document.createElement("a");c.appendChild(document.createTextNode(o)),c.href=a,c.classList.add(s?"artdeco-textCta":"artdeco-cta"),this.appendChild(c)}else if(o){var d=document.createElement("button");d.appendChild(document.createTextNode(o)),d.classList.add(s?"artdeco-textCta":"artdeco-cta"),this.appendChild(d),this.addEventListener("click",function(e){return t.dispatchEvent(new n("empty-state-cta-click",{bubbles:!0,cancelable:!0}))})}}},{key:"getProperty",value:function value(t,e){var n=this.getAttribute(t);return!n&&e&&console.error(t+" is a required attribute for the artdeco-empty-state custom element"),n}}]),i}(Ct);var ye=function(e){function i(){t.classCallCheck(this,i),t.get(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}return t.inherits(i,e),t.createClass(i,[{key:"attachedCallback",value:function value(){this.render(),this.addAllEventListeners()}},{key:"addAllEventListeners",value:function value(){var t=this;this.button.addEventListener("click",function(e){t.dispatchEvent(new n("dismiss",{bubbles:!0,cancelable:!0}))})}},{key:"render",value:function value(){for(var t=this.label=document.createElement("label"),e=this.button=document.createElement("button"),n=document.createElement("li-icon");this.firstChild;){this.removeChild(this.firstChild)}t.classList.add("artdeco-chip-text"),e.classList.add("artdeco-chip-button"),t.textContent=this.getAttribute("value")||"",n.setAttribute("type","cancel-icon"),n.setAttribute("size","small"),e.appendChild(n),this.appendChild(t),this.appendChild(e),this.isRendered=!0}},{key:"attributeChangedCallback",value:function value(t,e,n){this.isRendered&&"value"===t&&(this.label.textContent=n)}}]),i}(Ct);var ge,Ce={"default":"blue7",pro:"teal7",positive:"green7",muted:"slate7",defaultInverse:"teal3",proInverse:"teal3",positiveInverse:"green3",mutedInverse:"slate3"},ke={small:56,"default":96,large:128},Ee=function Ee(e){var n=t.slicedToArray(e,3);return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+(arguments.length<=1||void 0===arguments[1]?1:arguments[1])+")"},_e=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"attachedCallback",value:function value(){this.max=parseInt(this.getAttribute("max"),10),this.value=parseInt(this.getAttribute("value"),10),this.benchmark=parseInt(this.getAttribute("benchmark"),10),this.size=this.getAttribute("size")||"default",this.type=this.getAttribute("type")||"linear",this.fillPercent=this.value/this.max,this.isCircular="circular"===this.type,this.isCircular?this.setCircleValues():this.setAttribute("type","linear"),this.render(),void 0!==this.benchmark&&this._setBenchmark()}},{key:"setCircleValues",value:function value(){var t=this.size,e="large"===t?14:8,n="large"===t?6:4,i=(this.canvasSize=ke[this.size])/2,a=i-(e-n-("large"===t?1:0));this.circleValues={circleCenter:i,radius:a,benchmarkHeight:e,benchmarkWidth:2,lineWidth:n}}},{key:"attributeChangedCallback",value:function value(t,e,n){switch(t){case"max":case"value":this[t]=n,this.fillPercent=this.value/this.max,this.isCircular&&this._drawCircularMeter(),this.setProgressValues(this.fill),this._setBenchmark();break;case"benchmark":this.benchmark=n,this._setBenchmark()}}},{key:"render",value:function value(){this.isCircular?this.renderCircularMeter():this.renderLinearMeter()}},{key:"renderLinearMeter",value:function value(){var t=document.createElement("div"),e=this.renderProgressEl();t.classList.add("artdeco-completeness-background"),t.appendChild(e),this.appendChild(t)}},{key:"renderCircularMeter",value:function value(){var t=this.canvas=document.createElement("canvas"),e=this.renderProgressEl();t.setAttribute("class","artdeco-completeness-canvas"),t.setAttribute("height",this.canvasSize),t.setAttribute("width",this.canvasSize),this.appendChild(t),this.appendChild(e),this._drawCircularMeter()}},{key:"renderProgressEl",value:function value(){var t=this.fill=document.createElement("progress");return this.setProgressValues(t),t}},{key:"setProgressValues",value:function value(t){t.setAttribute("max",this.max),t.setAttribute("value",this.value),t.style.width=100*this.fillPercent+"%"}},{key:"_drawCircularMeter",value:function value(){var t=this,e=this.canvas,n=e.getContext("2d"),i=e.width,a=e.height,r=this.getAttribute("inverse"),s=this.getAttribute("benchmark"),o=this.circleValues,l=o.circleCenter,u=o.radius,c=o.benchmarkHeight,d=o.benchmarkWidth,h=o.lineWidth,p=this.fillPercent,f=r?Ee(q.black,.25):Ee(q.slate1),v=r?Ee(q.black,.55):Ee(q.slate2),m=r?f:v,b=(this.getAttribute("color")||"default")+(r?"Inverse":""),y=Ee(q[Ce[b]]),g=-.5*Math.PI,C=function C(){if(n.strokeStyle=f,n.lineWidth=h,n.beginPath(),n.imageSmoothingEnabled=!1,n.arc(l,l,u,g,1.5*Math.PI,!1),n.stroke(),s){var e=g+2*Math.PI*s/t.max;n.strokeStyle=m,n.imageSmoothingEnabled=!1,n.beginPath(),n.arc(l,l,u,g,e,!1),n.stroke()}n.strokeStyle=t.value>0?y:v,n.lineWidth=d,n.beginPath(),n.imageSmoothingEnabled=!1,n.moveTo(l,0),n.lineTo(l,c),n.stroke()},k=new Mt({easing:"easeInOut",speed:1e3,endVal:p});C(),k.begin(),window.requestAnimationFrame(function t(){var e=k.next();n.clearRect(0,0,i,a),C();var r=g+2*Math.PI*e;n.strokeStyle=y,n.lineWidth=h,n.imageSmoothingEnabled=!1,n.beginPath(),n.arc(l,l,u,g,r,!1),n.stroke(),e<p&&window.requestAnimationFrame(t)})}},{key:"_setBenchmark",value:function value(){var t=this.isCircular,e=this.benchmark,n=this.value,i=this.max,a=this.size,r=document.styleSheets[0],s='artdeco-completeness-meter[type="'+this.type+'"][max="'+i+'"][value="'+n+'"][benchmark="'+e+'"]::after',o='artdeco-completeness-meter[type="'+this.type+'"][max="'+i+'"][value="'+n+'"][benchmark="'+e+'"]::before',l=e/i,u=void 0;t?(u="rotate("+(-.5*Math.PI+2*Math.PI*l)+"rad) translate("+this.circleValues.radius+"px) rotate(90deg)",r.insertRule(s+" {\n        transform: "+u+";\n      }",0)):(r.insertRule(s+" {left: "+100*l+"%;}",0),r.insertRule(o+" {width: "+100*l+"%;}",0));if(e<=n){var c=1e3*new Mt({easing:"easeInOut",speed:1e3,startVal:0,endVal:n}).timeAtValue(e),d="completenessBenchmark";t&&(d="completenessCircularBenchmark"+a+l.toString().replace(".","-"),r.insertRule("\n          @keyframes "+d+" {\n            0% {\n              background-color: currentColor;\n              transform: "+u+" scaleY(1);\n            }\n\n            50% {\n              transform: "+u+" scaleY(1.5);\n            }\n\n            100% {\n              background-color: currentColor;\n              transform: "+u+" scaleY(1);\n            }\n          }\n        ",0)),r.insertRule(s+" {\n        animation-name: "+d+";\n        animation-delay: "+c+"ms;\n      }",0)}}}]),n}(Ct),Ae={ar_AE:"ar",cs_CZ:"cs",da_DK:"da",de_DE:"de",en_US:"en",es_ES:"es",fr_FR:"fr",in_ID:"id",it_IT:"it",ja_JP:"ja",ko_KR:"ko",ms_MY:"ms",nl_NL:"nl",no_NO:"nb",pl_PL:"pl",pt_BR:"pt",ro_RO:"ro",ru_RU:"ru",sv_SE:"sv",th_TH:"th",tl_PH:"fil",tr_TR:"tr",zh_CN:"zh",zh_TW:"zh"},xe=(ge=void 0,ge=window.i18n&&window.i18n.getLocale?window.i18n.getLocale():window.play&&window.play.getPageContextValue?window.play.getPageContextValue("locale"):"en_US",Ae[ge]||"en"),Te=null,we=null,Le=null,Ie=function Ie(t,e){var n=document.createElement(t);return e&&n.classList.add(e),n},Me=function(e){function i(){t.classCallCheck(this,i),t.get(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments)}return t.inherits(i,e),t.createClass(i,[{key:"attachedCallback",value:function value(){this.setInitialData(),this.render(),this.addAllEventListeners()}},{key:"setInitialData",value:function value(){var t=this.getAttribute("date");this.displayDate=t?new Date(t):new Date,this.isCalendarVisible=!1,this.selectedDate=t?new Date(t):""}},{key:"addAllEventListeners",value:function value(){var t=this;this.addEventListener("focusout",function(e){return t.focusOut(e)}),St(this,"focusin","input",function(){return t.showCalendar()}),St(this,"mouseover",".artdeco-week .artdeco-day",function(e){return t.dateMouseover(e)}),St(this,"mouseout",".artdeco-week",function(){return t.displayDateInInput(t.selectedDate)}),St(this,"click",".artdeco-day",function(e){return t.dateClick(e)}),St(this,"click",".artdeco-next-month-day, .artdeco-prev-month-day",function(e){return t.otherMonthClick(e)}),St(this,"click",".artdeco-next-month",function(){return t.nextMonth()}),St(this,"click",".artdeco-prev-month",function(){return t.prevMonth()}),St(this,"input","input",function(e){return t.dateInputChange(e)}),St(this,"keyup","input",function(e){return t.inputKeyup(e)})}},{key:"showCalendar",value:function value(){this.isCalendarVisible||(this.isCalendarVisible=!0,this.renderCal())}},{key:"hideCalendar",value:function value(){this.isCalendarVisible=!1,this.renderCal()}},{key:"nextMonth",value:function value(){var t=dt.getNextMonth(this.displayDate);this.displayDate=t,this.renderCal()}},{key:"prevMonth",value:function value(){var t=dt.getPreviousMonth(this.displayDate);this.displayDate=t,this.renderCal()}},{key:"dateMouseover",value:function value(t){this.displayDateInInput(this._dateFromDayElement(t.target));var e=this.calContainer&&this.calContainer.querySelector(".artdeco-hover-date");e&&e.classList.remove("artdeco-hover-date"),t.target.parentNode.classList.add("artdeco-hover-date")}},{key:"focusOut",value:function value(t){this.renderingCal||t.relatedTarget&&this.contains(t.relatedTarget)||(this.hideCalendar(),this.setSelectedDate(this.selectedDate),this.displayDateInInput(this.selectedDate))}},{key:"inputKeyup",value:function value(t){var e=t.which;27===e?(t.preventDefault(),t.stopPropagation(),this.hideCalendar()):13===e&&this.isComplete()&&(t.preventDefault(),t.stopPropagation(),this.hideCalendar())}},{key:"displayDateInInput",value:function value(t){var e=this._formatDateString(t);this.querySelector("input").value=e}},{key:"_dateFromDayElement",value:function value(t){return new Date(t.getAttribute("data-artdeco-date"))}},{key:"_formatDateString",value:function value(t){return t?(null===Le&&(Le=new Intl.DateTimeFormat(xe)),Le).format(t):""}},{key:"dateClick",value:function value(t){this.setSelectedDate(this._dateFromDayElement(t.target)),this.hideCalendar()}},{key:"dateInputChange",value:function value(t){var e=dt.parseDateStr(t.target.value);e&&(this.displayDate=e,this.selectedDate=e,this.isCalendarVisible=!0,this.renderCal())}},{key:"setSelectedDate",value:function value(t){this.selectedDate=t,this.setAttribute("date",this.querySelector("input").value),this.dispatchEvent(new n("dateSelected",{bubbles:!0,cancelable:!0,detail:{date:t}}))}},{key:"otherMonthClick",value:function value(t){this.displayDate=this._dateFromDayElement(t.target),this.renderCal()}},{key:"isComplete",value:function value(){return this.selectedDate&&dt.isDate(this.selectedDate)}},{key:"decorateModelData",value:function value(t){t.formattedDisplayMonth=(null===we&&(we=new Intl.DateTimeFormat(xe,{month:"long",year:"numeric"})),we).format(this.displayDate),t.isCalendarVisible=this.isCalendarVisible;var e=new Date,n=e.getDay();return t.dayNames=t.dayNames.map(function(t){var i=t-n,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()+i);return(null===Te&&(Te=new Intl.DateTimeFormat(xe,{weekday:"narrow"})),Te).format(a)}),t}},{key:"buildCalendarDom",value:function value(t){var e=function e(t,_e3,n){var i=Ie("button",t),a=Ie("span","a11y-text"),r=Ie("li-icon");return a.appendChild(document.createTextNode(_e3)),i.appendChild(a),r.setAttribute("type",n),r.setAttribute("size","small"),i.appendChild(r),i},n=document.createDocumentFragment(),i=Ie("div","artdeco-actions"),a=Ie("div","artdeco-month-year"),r=Ie("div","artdeco-calendar"),s=Ie("div","artdeco-weekdays");return i.appendChild(e("artdeco-prev-month","Previous","arrow-left-icon")),i.appendChild(e("artdeco-next-month","Next","arrow-right-icon")),n.appendChild(i),a.appendChild(document.createTextNode(t.formattedDisplayMonth)),n.appendChild(a),n.appendChild(r),t.dayNames.map(function(t){var e=Ie("span","artdeco-dayname");e.appendChild(document.createTextNode(t)),s.appendChild(e)}),r.appendChild(s),t.weeks.map(function(t){var e=Ie("div","artdeco-week");t.previousMonthDays.map(function(t){var n=Ie("button","artdeco-day-container"),i=Ie("span","artdeco-day");n.setAttribute("type","button"),i.classList.add("artdeco-prev-month-day"),i.setAttribute("data-artdeco-date",t.date),i.appendChild(document.createTextNode(t.dayOfMonth)),n.appendChild(i),e.appendChild(n)}),t.days.map(function(t){var n=Ie("button","artdeco-day-container"),i=Ie("span","artdeco-day");n.setAttribute("type","button"),t.isSelected&&i.classList.add("artdeco-selected"),i.setAttribute("data-artdeco-date",t.date),i.appendChild(document.createTextNode(t.dayOfMonth)),n.appendChild(i),e.appendChild(n)}),t.nextMonthDays.map(function(t){var n=Ie("button","artdeco-day-container"),i=Ie("span","artdeco-day");n.setAttribute("type","button"),i.classList.add("artdeco-next-month-day"),i.setAttribute("data-artdeco-date",t.date),i.appendChild(document.createTextNode(t.dayOfMonth)),n.appendChild(i),e.appendChild(n)}),r.appendChild(e)}),n}},{key:"renderCal",value:function value(){if(this.renderingCal=!0,this.isCalendarVisible&&!this.calContainer?this.calContainer=Ie("div","artdeco-datepicker-calendar"):!this.isCalendarVisible&&this.calContainer&&(this.calContainer.remove(),this.calContainer=void 0),this.isCalendarVisible){var t=this.decorateModelData(dt.getCalendarModel(this.displayDate,this.selectedDate));this.calContainer.innerHTML="",this.calContainer.appendChild(this.buildCalendarDom(t)),this.appendChild(this.calContainer)}this.renderingCal=!1}},{key:"render",value:function value(){var t=document.createDocumentFragment(),e=Ie("div","artdeco-datepicker-input-container"),n=Ie("input"),i=Ie("li-icon");n.setAttribute("type","text"),n.value=this._formatDateString(this.selectedDate),e.appendChild(n),i.setAttribute("type","calendar-icon"),i.setAttribute("size","small"),e.appendChild(i),t.appendChild(e),this.appendChild(t)}}]),i}(Ct),Se="ad-tab-register",De="ad-tab-select",Ne="ad-tab-unregister",Oe="ad-tablist-register",Pe="ad-active-tab-change",He="ad-tabpanel-register",Re="ad-tabpanel-unregister",Fe="ad-tabs-update-disable",ze="ad-tabpanel-seeking-mate",Ve="ad-tab-seeking-mate",We=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"createdCallback",value:function value(){this._handleTabSelect=this.handleTabSelect.bind(this),this._handleTablistRegister=this.handleTablistRegister.bind(this),this._handleTabpanelRegister=this.handleTabpanelRegister.bind(this)}},{key:"attachedCallback",value:function value(){this._activeTab=null,this._tablist=null,this._tabpanels={},this._disabled=this.hasAttribute("disabled"),this.bindEventListeners()}},{key:"detachedCallback",value:function value(){this.unbindEventListeners()}},{key:"attributeChangedCallback",value:function value(t,e,n){switch(t){case"disabled":this.disabled=this.hasAttribute("disabled")}}},{key:"handleTabSelect",value:function value(t){R(this,"select",t.detail)}},{key:"handleTablistRegister",value:function value(t){this._tablist=t.detail,this._tablist.tabsContainer=this}},{key:"handleTabpanelRegister",value:function value(t){t.stopPropagation();var e=t.detail,n=e.id;this._tabpanels[n]?console.error('A tabpanel with ID "'+n+'" has already been registered.'):(this._tabpanels[n]=e,e.tabsContainer=this)}},{key:"handleTabpanelUnregister",value:function value(t){t.stopPropagation();var e=t.detail.id;this._tabpanels[e]&&(this._tabpanels[e]=void 0)}},{key:"bindEventListeners",value:function value(){this.addEventListener(De,this._handleTabSelect),this.addEventListener(Oe,this._handleTablistRegister),this.addEventListener(He,this._handleTabpanelRegister),this.addEventListener(Re,this._handleTabpanelUnregister)}},{key:"unbindEventListeners",value:function value(){this.removeEventListener(De,this._handleTabSelect),this.removeEventListener(Oe,this._handleTablistRegister),this.removeEventListener(He,this._handleTabpanelRegister),this.removeEventListener(Re,this._handleTabpanelUnregister)}},{key:"activeTab",get:function get(){return this._activeTab},set:function set(t){this._activeTab=t,R(this,Pe,t)}},{key:"disabled",get:function get(){return this._disabled},set:function set(t){if((t=!!t)!==this._disabled){this._disabled=t;var e=this.hasAttribute("disabled");t?(this.setAttribute("aria-disabled","true"),e||this.setAttribute("disabled","disabled")):(this.removeAttribute("aria-disabled"),e&&this.removeAttribute("disabled")),R(this,Fe,this._disabled)}}}]),n}(Ct);var Be=wt,je=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"createdCallback",value:function value(){this._handleTabRegister=this.handleTabRegister.bind(this),this._handleTabUnregister=this.handleTabUnregister.bind(this),this._handleKeyDown=this.handleKeyDown.bind(this),this._handleResize=this.handleResize.bind(this),this._resizeTabs=this.resizeTabs.bind(this),this.tabs=[],this._resizeDebounce=null,this._focusTimer=null}},{key:"attachedCallback",value:function value(){this.setAttribute("role","tablist"),this.classList.add("native-scroll"),this._tabsContainer=null,this.disabled=this.hasAttribute("disabled"),this.bindEventListeners(),this.resizeTabs(),R(this,Oe,this),this._initialized=!0}},{key:"detachedCallback",value:function value(){this._initialized&&(this.unbindEventListeners(),this._initialized=!1)}},{key:"handleTabRegister",value:function value(t){t.stopPropagation();var e=t.detail,n=this.tabs.indexOf(e)>-1;if(!n&&this.tabs.some(function(t){return t.id===e.id}))throw new Error('tablist already contains a tab with the ID "'+e.id+'"');n||this.tabs.push(e),this._tabsContainer&&(e.tabsContainer=this._tabsContainer),this.tabs.sort(function(t,e){var n=0;return t.previousSibling&&t.nextSibling!==e?t.nextSibling&&t.previousSibling!==e||(n=1):n=-1,n}),this.handleResize()}},{key:"handleTabUnregister",value:function value(t){this.tabs=this.tabs.filter(function(e){return e!==t.detail})}},{key:"handleKeyDown",value:function value(t){var e=this;if(!this._tabsContainer||!this._tabsContainer.disabled){var n=!1,i=this._tabsContainer.activeTab;switch(t.keyCode||t.charCode){case 37:case 38:this.selectPreviousTab(),n=!0;break;case 39:case 40:this.selectNextTab(),n=!0;break;default:return}n&&(clearTimeout(this._focusTimer),this._focusTimer=setTimeout(function(){e._tabsContainer.activeTab!==i&&e._tabsContainer.activeTab.focus()},5*wt)),t.preventDefault()}}},{key:"handleResize",value:function value(t){clearTimeout(this._resizeDebounce),this._resizeDebounce=setTimeout(this._resizeTabs,Be)}},{key:"resizeTabs",value:function value(){if(this._tabsContainer){var t=this._tabsContainer.clientWidth,e=!1;t<800&&!this.classList.contains("no-wrap")?(this.classList.add("no-wrap"),e=!0):t>=800&&this.classList.contains("no-wrap")&&(this.classList.remove("no-wrap"),e=!0),e&&window.requestAnimationFrame(this.resizeTablist.bind(this))}}},{key:"resizeTablist",value:function value(){this._handleResize()}},{key:"getAdjacentFocusableTab",value:function value(t,e){var n=null;if(this.tabs&&this.tabs.length){for(var i=-1,a=0;a<this.tabs.length;a++){if(this.tabs[a]===t){i=a;break}}var r=this.tabs.length-1,s=1===e?0:r;if(i>-1)for(a=(a=i+e)<0||a>r?s:a;a!==i;){if(!this.tabs[a].disabled){n=this.tabs[a];break}a=(a+=e)<0||a>r?s:a}}return n}},{key:"selectNextTab",value:function value(){if(this._tabsContainer){var t=this.getAdjacentFocusableTab(this._tabsContainer.activeTab,1);t&&R(this,De,t)}}},{key:"selectPreviousTab",value:function value(){if(this._tabsContainer){var t=this.getAdjacentFocusableTab(this._tabsContainer.activeTab,-1);t&&R(this,De,t)}}},{key:"bindEventListeners",value:function value(){this.addEventListener("keydown",this._handleKeyDown),this.addEventListener(Se,this._handleTabRegister),window.addEventListener("resize",this._handleResize),this._tabsContainer&&this._tabsContainer.addEventListener(Ne,this._handleTabUnregister)}},{key:"unbindEventListeners",value:function value(){this.removeEventListener("keydown",this._handleKeyDown),this.removeEventListener(Se,this._handleTabRegister),window.removeEventListener("resize",this._handleResize),clearTimeout(this._resizeDebounce),clearTimeout(this._focusTimer),this._tabsContainer&&this._tabsContainer.removeEventListener(Ne,this._handleTabUnregister)}},{key:"tabsContainer",set:function set(t){this.unbindEventListeners(),this._tabsContainer=t,this.bindEventListeners(),this.tabs.forEach(function(e){return e.tabsContainer=t}),this.resizeTabs()}},{key:"tabsWidth",get:function get(){return this.tabs.length?this.tabs.reduce(function(t,e){return(t=t instanceof HTMLElement?t.width:t)+e.width}):0}}]),n}(Ct);var qe=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"createdCallback",value:function value(){var t=this;this._handleActiveTabChange=this.handleActiveTabChange.bind(this),this._handleClick=this.handleClick.bind(this),this._handleDisableUpdate=function(e){t.updateFocus()}}},{key:"attachedCallback",value:function value(){this._tabsContainer=null,this.id=this.getAttribute("id")||"adTab_"+Date.now()+"_"+Math.floor(20030505*Math.random()),this._forPanel=this.getAttribute("for-panel")||null,this._associatedPanel=null,this.setAttribute("role","tab"),this.setAttribute("id",this.id),this.selected="selected"===this.getAttribute("selected"),this._disabled=this.hasAttribute("disabled"),this.bindEventListeners(),R(this,Se,this)}},{key:"detachedCallback",value:function value(){this.unbindEventListeners(),this._tabsContainer&&R(this._tabsContainer,Ne,this)}},{key:"attributeChangedCallback",value:function value(t,e,n){switch(t){case"disabled":this._disabled=this.hasAttribute("disabled")}}},{key:"handleClick",value:function value(t){this._disabled||R(this,De,this)}},{key:"handleActiveTabChange",value:function value(t){this.selected=t.detail===this}},{key:"bindEventListeners",value:function value(){this.addEventListener("click",this._handleClick),this._tabsContainer&&(this._tabsContainer.addEventListener(Pe,this._handleActiveTabChange),this._tabsContainer.addEventListener(Fe,this._handleDisableUpdate))}},{key:"unbindEventListeners",value:function value(){this.removeEventListener("click",this._handleClick),this._tabsContainer&&(this._tabsContainer.removeEventListener(Pe,this._handleActiveTabChange),this._tabsContainer.removeEventListener(Fe,this._handleDisableUpdate))}},{key:"updateFocus",value:function value(){this._tabsContainer&&this._tabsContainer.disabled?this.removeAttribute("tabindex"):this._selected?this.setAttribute("tabindex","0"):this.removeAttribute("tabindex")}},{key:"selected",get:function get(){return this._selected},set:function set(t){t!==this._selected&&(this._selected=t,t?(this.setAttribute("selected","selected"),this.setAttribute("aria-selected","true"),this.setAttribute("aria-expanded","true"),this.focus()):(this.removeAttribute("selected"),this.removeAttribute("aria-selected"),this.removeAttribute("aria-expanded")),this.updateFocus())}},{key:"disabled",get:function get(){return this._disabled},set:function set(t){this._disabled=!!t,this._disabled&&!this.hasAttribute("disabled")?(this.setAttribute("disabled","disabled"),
this.setAttribute("aria-disabled","true")):!this._disabled&&this.hasAttribute("disabled")&&(this.removeAttribute("disabled"),this.removeAttribute("aria-disabled"))}},{key:"tabsContainer",set:function set(t){this.unbindEventListeners(),this._tabsContainer=t,this.bindEventListeners(),this._selected&&(this._tabsContainer.activeTab=this)}},{key:"width",get:function get(){return Dt(this)}}]),n}(Ct),Ue=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"createdCallback",value:function value(){t.get(Object.getPrototypeOf(n.prototype),"createdCallback",this).call(this),this._handleSeekRequest=this.handleSeekRequest.bind(this)}},{key:"handleSeekRequest",value:function value(t){var e=t.detail;e.panelName===this._forPanel&&(this.associatedPanel=e,e.associatedTab=this)}},{key:"bindEventListeners",value:function value(){t.get(Object.getPrototypeOf(n.prototype),"bindEventListeners",this).call(this),this._tabsContainer&&this._tabsContainer.addEventListener(ze,this._handleSeekRequest)}},{key:"unbindEventListeners",value:function value(){t.get(Object.getPrototypeOf(n.prototype),"unbindEventListeners",this).call(this),this._tabsContainer&&this._tabsContainer.removeEventListener(ze,this._handleSeekRequest)}},{key:"tabsContainer",set:function set(e){t.set(Object.getPrototypeOf(n.prototype),"tabsContainer",e,this),R(this._tabsContainer,Ve,this)}},{key:"associatedPanel",set:function set(t){this._associatedPanel=t,this.setAttribute("aria-controls",t.id)}},{key:"forPanel",get:function get(){return this._forPanel}}]),n}(qe);var Ke=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"createdCallback",value:function value(){this._handleActiveTabChange=this.handleActiveTabChange.bind(this),this._handleSeekRequest=this.handleSeekRequest.bind(this)}},{key:"attachedCallback",value:function value(){this.id=this.getAttribute("id")||"adTabpanel_"+Date.now()+"_"+Math.floor(20030505*Math.random()),this.setAttribute("id",this.id),this.setAttribute("role","tabpanel"),this.setAttribute("aria-hidden","true"),this._panelName=this.getAttribute("panel-name"),R(this,He,this)}},{key:"detachedCallback",value:function value(){this.unbindEventListeners(),this._tabsContainer&&R(this._tabsContainer,Re,this)}},{key:"handleActiveTabChange",value:function value(t){this.visible=t.detail===this._associatedTab}},{key:"handleSeekRequest",value:function value(t){var e=t.detail;e.forPanel===this._panelName&&(this.associatedTab=e,e.associatedTabpanel=this)}},{key:"bindEventListeners",value:function value(){this._tabsContainer&&(this._tabsContainer.addEventListener(Pe,this._handleActiveTabChange),this._tabsContainer.addEventListener(Ve,this._handleSeekRequest))}},{key:"unbindEventListeners",value:function value(){this._tabsContainer&&(this._tabsContainer.removeEventListener(Pe,this._handleActiveTabChange),this._tabsContainer.removeEventListener(Ve,this._handleSeekRequest))}},{key:"panelName",get:function get(){return this._panelName}},{key:"associatedTab",set:function set(t){this._associatedTab=t,this.setAttribute("aria-labelledby",t.id),this.visible=t.selected}},{key:"tabsContainer",set:function set(t){this.unbindEventListeners(),this._tabsContainer=t,this.bindEventListeners(),R(this._tabsContainer,ze,this)}},{key:"visible",set:function set(t){this._visible=t,t?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true")}}]),n}(Ct);var Ye=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),t.createClass(n,[{key:"attachedCallback",value:function value(){this.createDOMStructure(),t.get(Object.getPrototypeOf(n.prototype),"attachedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function value(e,i,a){e=e.toLowerCase(),this._initialized&&e==="primaryText".toLowerCase()?this.updateTextLabel(this._primaryText,a):this._initialized&&e==="secondaryText".toLowerCase()?this.updateTextLabel(this._secondaryText,a):t.get(Object.getPrototypeOf(n.prototype),"attributeChangedCallback",this).call(this,e,i,a)}},{key:"createDOMStructure",value:function value(){var t=this.getAttribute("primaryText"),e=this.getAttribute("secondaryText"),n=this.querySelector(".artdeco-tab-primary-text"),i=this.querySelector(".artdeco-tab-secondary-text");if(!t)throw new Error("[artdeco-spotlight-tab] primaryText attribute is required");if(!e)throw new Error("[artdeco-spotlight-tab] secondaryText attribute is required");n||((n=document.createElement("span")).className="artdeco-tab-primary-text",i?this.insertBefore(n,i):this.appendChild(n)),this._primaryText=n,this.updateTextLabel(this._primaryText,t),i||((i=document.createElement("span")).className="artdeco-tab-secondary-text",this.insertBefore(i,this._primaryText.nextSibling)),this._secondaryText=i,this.updateTextLabel(this._secondaryText,e),this._initialized=!0}},{key:"updateTextLabel",value:function value(t,e){!function(t){if(t instanceof HTMLElement)for(;t.firstChild;){t.removeChild(t.firstChild)}}(t),t.appendChild(document.createTextNode(e))}}]),n}(qe);var Xe=function(e){function n(){t.classCallCheck(this,n),t.get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return t.inherits(n,e),n}(je);var Ge,Ze=0,Je=function Je(){Ze+=1},$e=function $e(){setTimeout(function(){(Ze-=1)||Ge&&Ge()},1)},Qe=function Qe(t){Ge=t};if("undefined"!=typeof window||"undefined"!=typeof document){!function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];Je(),t.load(re,function(n){if(n)throw n;t.install(),e&&e(),$e()})}(ee.icons,function(){$t(document,"li-icon",{prototype:le}),function(t){$t(t,"linkedin-logo",{prototype:fe.prototype})}(document)}),[ee.buttonAnimation,ee.contextClasses,ee.floatingLabel,ee.focusOutline,ee.pillInput,ee.pillToggle,ee.rangeSlider].forEach(function(t){return t.install()}),function(t){$t(t,"artdeco-pill",{prototype:ce.prototype})}(window.document),function(t){$t(t,"artdeco-floatlabel",{prototype:me.prototype})}(window.document),function(t){$t(t,"artdeco-empty-state",{prototype:be.prototype})}(window.document),function(t){$t(t,"artdeco-slider",{prototype:de.prototype})}(window.document),function(t){$t(t,"artdeco-chip",{prototype:ye.prototype})}(window.document),function(t){$t(t,"artdeco-completeness-meter",{prototype:_e.prototype})}(window.document),function(t){$t(t,"artdeco-datepicker",{prototype:Me.prototype})}(window.document),function(t){$t(t,"artdeco-tabs",{prototype:We.prototype})}(window.document),function(t){$t(t,"artdeco-tablist",{prototype:je.prototype})}(window.document),function(t){$t(t,"artdeco-tab",{prototype:Ue.prototype})}(window.document),function(t){$t(t,"artdeco-tabpanel",{prototype:Ke.prototype})}(window.document),function(t){$t(t,"artdeco-spotlight-tab",{prototype:Ye.prototype})}(window.document),function(t){$t(t,"artdeco-spotlight-tablist",{prototype:Xe.prototype})}(window.document),Qe(function(){Jt.trigger("register-elements")})}}();var commonjsGlobal=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var dist=createCommonjsModule(function(module){var babelHelpers={};babelHelpers.inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};babelHelpers.createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();babelHelpers.get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};babelHelpers.classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var commonjsGlobal$$1=typeof window!=="undefined"?window:typeof commonjsGlobal!=="undefined"?commonjsGlobal:typeof self!=="undefined"?self:{};function unwrapExports$$1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}function createCommonjsModule$$1(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var _global=createCommonjsModule$$1(function(module){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global});var hasOwnProperty={}.hasOwnProperty;var _has=function _has(it,key){return hasOwnProperty.call(it,key)};var _fails=function _fails(exec){try{return!!exec()}catch(e){return true}};var _descriptors=!_fails(function(){return Object.defineProperty({},"a",{get:function get(){return 7}}).a!=7});var _core=createCommonjsModule$$1(function(module){var core=module.exports={version:"2.4.0"};if(typeof __e=="number")__e=core});var _isObject=function _isObject(it){return(typeof it==="undefined"?"undefined":_typeof2(it))==="object"?it!==null:typeof it==="function"};var _anObject=function _anObject(it){if(!_isObject(it))throw TypeError(it+" is not an object!");return it};var document$1=_global.document;var is=_isObject(document$1)&&_isObject(document$1.createElement);var _domCreate=function _domCreate(it){return is?document$1.createElement(it):{}};var _ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(_domCreate("div"),"a",{get:function get(){return 7}}).a!=7});var _toPrimitive=function _toPrimitive(it,S){if(!_isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!_isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!_isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!_isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")};var dP$1=Object.defineProperty;var f$1=_descriptors?Object.defineProperty:function defineProperty(O,P,Attributes){_anObject(O);P=_toPrimitive(P,true);_anObject(Attributes);if(_ie8DomDefine)try{return dP$1(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O};var _objectDp={f:f$1};var _propertyDesc=function _propertyDesc(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}};var _hide=_descriptors?function(object,key,value){return _objectDp.f(object,key,_propertyDesc(1,value))}:function(object,key,value){object[key]=value;return object};var id=0;var px=Math.random();var _uid=function _uid(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))};var _redefine=createCommonjsModule$$1(function(module){var SRC=_uid("src"),TO_STRING="toString",$toString=Function[TO_STRING],TPL=(""+$toString).split(TO_STRING);_core.inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){var isFunction=typeof val=="function";if(isFunction)_has(val,"name")||_hide(val,"name",key);if(O[key]===val)return;if(isFunction)_has(val,SRC)||_hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));if(O===_global){O[key]=val}else{if(!safe){delete O[key];_hide(O,key,val)}else{if(O[key])O[key]=val;else _hide(O,key,val)}}})(Function.prototype,TO_STRING,function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)})});var _aFunction=function _aFunction(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it};var _ctx=function _ctx(fn,that,length){_aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}};var PROTOTYPE$1="prototype";var $export=function $export(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?_global:IS_STATIC?_global[name]||(_global[name]={}):(_global[name]||{})[PROTOTYPE$1],exports=IS_GLOBAL?_core:_core[name]||(_core[name]={}),expProto=exports[PROTOTYPE$1]||(exports[PROTOTYPE$1]={}),key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;out=(own?target:source)[key];exp=IS_BIND&&own?_ctx(out,_global):IS_PROTO&&typeof out=="function"?_ctx(Function.call,out):out;if(target)_redefine(target,key,out,type&$export.U);if(exports[key]!=out)_hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};_global.core=_core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;var _export=$export;var _meta=createCommonjsModule$$1(function(module){var META=_uid("meta"),setDesc=_objectDp.f,id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!_fails(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function setMeta(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})};var fastKey=function fastKey(it,create){if(!_isObject(it))return(typeof it==="undefined"?"undefined":_typeof2(it))=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!_has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i};var getWeak=function getWeak(it,create){if(!_has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function onFreeze(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!_has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}});var SHARED="__core-js_shared__";var store=_global[SHARED]||(_global[SHARED]={});var _shared=function _shared(key){return store[key]||(store[key]={})};var _wks=createCommonjsModule$$1(function(module){var store=_shared("wks"),_Symbol=_global.Symbol,USE_SYMBOL=typeof _Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&_Symbol[name]||(USE_SYMBOL?_Symbol:_uid)("Symbol."+name))};$exports.store=store});var def=_objectDp.f;var TAG=_wks("toStringTag");var _setToStringTag=function _setToStringTag(it,tag,stat){if(it&&!_has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})};var f$2=_wks;var _wksExt={f:f$2};var _library=false;var defineProperty=_objectDp.f;var _wksDefine=function _wksDefine(name){var $Symbol=_core.Symbol||(_core.Symbol=_library?{}:_global.Symbol||{});if(name.charAt(0)!="_"&&!(name in $Symbol))defineProperty($Symbol,name,{value:_wksExt.f(name)})};var toString={}.toString;var _cof=function _cof(it){return toString.call(it).slice(8,-1)};var _iobject=Object("z").propertyIsEnumerable(0)?Object:function(it){return _cof(it)=="String"?it.split(""):Object(it)};var _defined=function _defined(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it};var _toIobject=function _toIobject(it){return _iobject(_defined(it))};var ceil=Math.ceil;var floor=Math.floor;var _toInteger=function _toInteger(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)};var min=Math.min;var _toLength=function _toLength(it){return it>0?min(_toInteger(it),9007199254740991):0};var max=Math.max;var min$1=Math.min;var _toIndex=function _toIndex(index,length){index=_toInteger(index);return index<0?max(index+length,0):min$1(index,length)};var _arrayIncludes=function _arrayIncludes(IS_INCLUDES){return function($this,el,fromIndex){var O=_toIobject($this),length=_toLength(O.length),index=_toIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++){if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}}return!IS_INCLUDES&&-1}};var shared=_shared("keys");var _sharedKey=function _sharedKey(key){return shared[key]||(shared[key]=_uid(key))};var arrayIndexOf=_arrayIncludes(false);var IE_PROTO=_sharedKey("IE_PROTO");var _objectKeysInternal=function _objectKeysInternal(object,names){var O=_toIobject(object),i=0,result=[],key;for(key in O){if(key!=IE_PROTO)_has(O,key)&&result.push(key)}while(names.length>i){if(_has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}}return result};var _enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");var _objectKeys=Object.keys||function keys(O){return _objectKeysInternal(O,_enumBugKeys)};var _keyof=function _keyof(object,el){var O=_toIobject(object),keys=_objectKeys(O),length=keys.length,index=0,key;while(length>index){if(O[key=keys[index++]]===el)return key}};var f$3=Object.getOwnPropertySymbols;var _objectGops={f:f$3};var f$4={}.propertyIsEnumerable;var _objectPie={f:f$4};var _enumKeys=function _enumKeys(it){var result=_objectKeys(it),getSymbols=_objectGops.f;if(getSymbols){var symbols=getSymbols(it),isEnum=_objectPie.f,i=0,key;while(symbols.length>i){if(isEnum.call(it,key=symbols[i++]))result.push(key)}}return result};var _isArray=Array.isArray||function isArray(arg){return _cof(arg)=="Array"};var _objectDps=_descriptors?Object.defineProperties:function defineProperties(O,Properties){_anObject(O);var keys=_objectKeys(Properties),length=keys.length,i=0,P;while(length>i){_objectDp.f(O,P=keys[i++],Properties[P])}return O};var _html=_global.document&&document.documentElement;var IE_PROTO$1=_sharedKey("IE_PROTO");var Empty=function Empty(){};var PROTOTYPE$2="prototype";var _createDict=function createDict(){var iframe=_domCreate("iframe"),i=_enumBugKeys.length,lt="<",gt=">",iframeDocument;iframe.style.display="none";_html.appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();_createDict=iframeDocument.F;while(i--){delete _createDict[PROTOTYPE$2][_enumBugKeys[i]]}return _createDict()};var _objectCreate=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE$2]=_anObject(O);result=new Empty;Empty[PROTOTYPE$2]=null;result[IE_PROTO$1]=O}else result=_createDict();return Properties===undefined?result:_objectDps(result,Properties)};var hiddenKeys=_enumBugKeys.concat("length","prototype");var f$6=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return _objectKeysInternal(O,hiddenKeys)};var _objectGopn={f:f$6};var gOPN$1=_objectGopn.f;var toString$1={}.toString;var windowNames=(typeof window==="undefined"?"undefined":_typeof2(window))=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function getWindowNames(it){try{return gOPN$1(it)}catch(e){return windowNames.slice()}};var f$5=function getOwnPropertyNames(it){return windowNames&&toString$1.call(it)=="[object Window]"?getWindowNames(it):gOPN$1(_toIobject(it))};var _objectGopnExt={f:f$5};var gOPD$1=Object.getOwnPropertyDescriptor;var f$7=_descriptors?gOPD$1:function getOwnPropertyDescriptor(O,P){O=_toIobject(O);P=_toPrimitive(P,true);if(_ie8DomDefine)try{return gOPD$1(O,P)}catch(e){}if(_has(O,P))return _propertyDesc(!_objectPie.f.call(O,P),O[P])};var _objectGopd={f:f$7};var META=_meta.KEY;var gOPD=_objectGopd.f;var dP=_objectDp.f;var gOPN=_objectGopnExt.f;var $Symbol=_global.Symbol;var $JSON=_global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE="prototype";var HIDDEN=_wks("_hidden");var TO_PRIMITIVE=_wks("toPrimitive");var isEnum={}.propertyIsEnumerable;var SymbolRegistry=_shared("symbol-registry");var AllSymbols=_shared("symbols");var OPSymbols=_shared("op-symbols");var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol=="function";var QObject=_global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=_descriptors&&_fails(function(){return _objectCreate(dP({},"a",{get:function get(){return dP(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function wrap(tag){var sym=AllSymbols[tag]=_objectCreate($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&_typeof2($Symbol.iterator)=="symbol"?function(it){return(typeof it==="undefined"?"undefined":_typeof2(it))=="symbol"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);_anObject(it);key=_toPrimitive(key,true);_anObject(D);if(_has(AllSymbols,key)){if(!D.enumerable){if(!_has(it,HIDDEN))dP(it,HIDDEN,_propertyDesc(1,{}));it[HIDDEN][key]=true}else{if(_has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_objectCreate(D,{enumerable:_propertyDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){_anObject(it);var keys=_enumKeys(P=_toIobject(P)),i=0,l=keys.length,key;while(l>i){$defineProperty(it,key=keys[i++],P[key])}return it};var $create=function create(it,P){return P===undefined?_objectCreate(it):$defineProperties(_objectCreate(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=_toPrimitive(key,true));if(this===ObjectProto&&_has(AllSymbols,key)&&!_has(OPSymbols,key))return false;return E||!_has(this,key)||!_has(AllSymbols,key)||_has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=_toIobject(it);key=_toPrimitive(key,true);if(it===ObjectProto&&_has(AllSymbols,key)&&!_has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&_has(AllSymbols,key)&&!(_has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(_toIobject(it)),result=[],i=0,key;while(names.length>i){if(!_has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:_toIobject(it)),result=[],i=0,key;while(names.length>i){if(_has(AllSymbols,key=names[i++])&&(IS_OP?_has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function _Symbol2(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=_uid(arguments.length>0?arguments[0]:undefined);var $set=function $set(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(_has(this,HIDDEN)&&_has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,_propertyDesc(1,value))};if(_descriptors&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};_redefine($Symbol[PROTOTYPE],"toString",function toString(){return this._k});_objectGopd.f=$getOwnPropertyDescriptor;_objectDp.f=$defineProperty;_objectGopn.f=_objectGopnExt.f=$getOwnPropertyNames;_objectPie.f=$propertyIsEnumerable;_objectGops.f=$getOwnPropertySymbols;if(_descriptors&&!_library){_redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}_wksExt.f=function(name){return wrap(_wks(name))}}_export(_export.G+_export.W+_export.F*!USE_NATIVE,{Symbol:$Symbol});for(var symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),i=0;symbols.length>i;){_wks(symbols[i++])}for(var symbols=_objectKeys(_wks.store),i=0;symbols.length>i;){_wksDefine(symbols[i++])}_export(_export.S+_export.F*!USE_NATIVE,"Symbol",{"for":function _for(key){return _has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(key){if(isSymbol(key))return _keyof(SymbolRegistry,key);throw TypeError(key+" is not a symbol!")},useSetter:function useSetter(){setter=true},useSimple:function useSimple(){setter=false}});_export(_export.S+_export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&_export(_export.S+_export.F*(!USE_NATIVE||_fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"})),"JSON",{stringify:function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it],i=1,replacer,$replacer;while(arguments.length>i){args.push(arguments[i++])}replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!_isArray(replacer))replacer=function replacer(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||_hide($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);_setToStringTag($Symbol,"Symbol");_setToStringTag(Math,"Math",true);_setToStringTag(_global.JSON,"JSON",true);_export(_export.S,"Object",{create:_objectCreate});_export(_export.S+_export.F*!_descriptors,"Object",{defineProperty:_objectDp.f});_export(_export.S+_export.F*!_descriptors,"Object",{defineProperties:_objectDps});var _objectSap=function _objectSap(KEY,exec){var fn=(_core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);_export(_export.S+_export.F*_fails(function(){fn(1)}),"Object",exp)};var $getOwnPropertyDescriptor$1=_objectGopd.f;_objectSap("getOwnPropertyDescriptor",function(){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor$1(_toIobject(it),key)}});var _toObject=function _toObject(it){return Object(_defined(it))};var IE_PROTO$2=_sharedKey("IE_PROTO");var ObjectProto$1=Object.prototype;var _objectGpo=Object.getPrototypeOf||function(O){O=_toObject(O);if(_has(O,IE_PROTO$2))return O[IE_PROTO$2];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto$1:null};_objectSap("getPrototypeOf",function(){return function getPrototypeOf(it){return _objectGpo(_toObject(it))}});_objectSap("keys",function(){return function keys(it){return _objectKeys(_toObject(it))}});_objectSap("getOwnPropertyNames",function(){return _objectGopnExt.f});var meta=_meta.onFreeze;_objectSap("freeze",function($freeze){return function freeze(it){return $freeze&&_isObject(it)?$freeze(meta(it)):it}});var meta$1=_meta.onFreeze;_objectSap("seal",function($seal){return function seal(it){return $seal&&_isObject(it)?$seal(meta$1(it)):it}});var meta$2=_meta.onFreeze;_objectSap("preventExtensions",function($preventExtensions){return function preventExtensions(it){return $preventExtensions&&_isObject(it)?$preventExtensions(meta$2(it)):it}});_objectSap("isFrozen",function($isFrozen){return function isFrozen(it){return _isObject(it)?$isFrozen?$isFrozen(it):false:true}});_objectSap("isSealed",function($isSealed){return function isSealed(it){return _isObject(it)?$isSealed?$isSealed(it):false:true}});_objectSap("isExtensible",function($isExtensible){return function isExtensible(it){return _isObject(it)?$isExtensible?$isExtensible(it):true:false}});var $assign=Object.assign;var _objectAssign=!$assign||_fails(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach(function(k){B[k]=k});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join("")!=K})?function assign(target,source){var T=_toObject(target),aLen=arguments.length,index=1,getSymbols=_objectGops.f,isEnum=_objectPie.f;while(aLen>index){var S=_iobject(arguments[index++]),keys=getSymbols?_objectKeys(S).concat(getSymbols(S)):_objectKeys(S),length=keys.length,j=0,key;while(length>j){if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}}return T}:$assign;_export(_export.S+_export.F,"Object",{assign:_objectAssign});var _sameValue=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y};_export(_export.S,"Object",{is:_sameValue});var check=function check(O,proto){_anObject(O);if(!_isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};var _setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=_ctx(Function.call,_objectGopd.f(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check};_export(_export.S,"Object",{setPrototypeOf:_setProto.set});var TAG$1=_wks("toStringTag");var ARG=_cof(function(){return arguments}())=="Arguments";var tryGet=function tryGet(it,key){try{return it[key]}catch(e){}};var _classof=function _classof(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG$1))=="string"?T:ARG?_cof(O):(B=_cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B};var test={};test[_wks("toStringTag")]="z";if(test+""!="[object z]"){_redefine(Object.prototype,"toString",function toString(){return"[object "+_classof(this)+"]"},true)}var _invoke=function _invoke(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)};var arraySlice=[].slice;var factories={};var construct=function construct(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++){n[i]="a["+i+"]"}factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)};var _bind=Function.bind||function bind(that){var fn=_aFunction(this),partArgs=arraySlice.call(arguments,1);var bound=function bound(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):_invoke(fn,args,that)};if(_isObject(fn.prototype))bound.prototype=fn.prototype;return bound};_export(_export.P,"Function",{bind:_bind});var dP$3=_objectDp.f;var FProto=Function.prototype;var nameRE=/^\s*function ([^ (]*)/;var NAME="name";var isExtensible=Object.isExtensible||function(){return true};NAME in FProto||_descriptors&&dP$3(FProto,NAME,{configurable:true,get:function get(){try{var that=this,name=(""+that).match(nameRE)[1];_has(that,NAME)||!isExtensible(that)||dP$3(that,NAME,_propertyDesc(5,name));return name}catch(e){return""}}});var HAS_INSTANCE=_wks("hasInstance");var FunctionProto=Function.prototype;if(!(HAS_INSTANCE in FunctionProto))_objectDp.f(FunctionProto,HAS_INSTANCE,{
value:function value(O){if(typeof this!="function"||!_isObject(O))return false;if(!_isObject(this.prototype))return O instanceof this;while(O=_objectGpo(O)){if(this.prototype===O)return true}return false}});var _stringWs="\t\n\x0B\f\r   ᠎    "+"         　\u2028\u2029\ufeff";var space="["+_stringWs+"]";var non="​";var ltrim=RegExp("^"+space+space+"*");var rtrim=RegExp(space+space+"*$");var exporter=function exporter(KEY,exec,ALIAS){var exp={};var FORCE=_fails(function(){return!!_stringWs[KEY]()||non[KEY]()!=non});var fn=exp[KEY]=FORCE?exec(trim):_stringWs[KEY];if(ALIAS)exp[ALIAS]=fn;_export(_export.P+_export.F*FORCE,"String",exp)};var trim=exporter.trim=function(string,TYPE){string=String(_defined(string));if(TYPE&1)string=string.replace(ltrim,"");if(TYPE&2)string=string.replace(rtrim,"");return string};var _stringTrim=exporter;var $parseInt=_global.parseInt;var $trim=_stringTrim.trim;var hex=/^[\-+]?0[xX]/;var _parseInt=$parseInt(_stringWs+"08")!==8||$parseInt(_stringWs+"0x16")!==22?function parseInt(str,radix){var string=$trim(String(str),3);return $parseInt(string,radix>>>0||(hex.test(string)?16:10))}:$parseInt;_export(_export.G+_export.F*(parseInt!=_parseInt),{parseInt:_parseInt});var $parseFloat=_global.parseFloat;var $trim$1=_stringTrim.trim;var _parseFloat=1/$parseFloat(_stringWs+"-0")!==-Infinity?function parseFloat(str){var string=$trim$1(String(str),3),result=$parseFloat(string);return result===0&&string.charAt(0)=="-"?-0:result}:$parseFloat;_export(_export.G+_export.F*(parseFloat!=_parseFloat),{parseFloat:_parseFloat});var setPrototypeOf=_setProto.set;var _inheritIfRequired=function _inheritIfRequired(that,target,C){var P,S=target.constructor;if(S!==C&&typeof S=="function"&&(P=S.prototype)!==C.prototype&&_isObject(P)&&setPrototypeOf){setPrototypeOf(that,P)}return that};var gOPN$3=_objectGopn.f;var gOPD$3=_objectGopd.f;var dP$4=_objectDp.f;var $trim$2=_stringTrim.trim;var NUMBER="Number";var $Number=_global[NUMBER];var Base=$Number;var proto=$Number.prototype;var BROKEN_COF=_cof(_objectCreate(proto))==NUMBER;var TRIM="trim"in String.prototype;var toNumber=function toNumber(argument){var it=_toPrimitive(argument,false);if(typeof it=="string"&&it.length>2){it=TRIM?it.trim():$trim$2(it,3);var first=it.charCodeAt(0),third,radix,maxCode;if(first===43||first===45){third=it.charCodeAt(2);if(third===88||third===120)return NaN}else if(first===48){switch(it.charCodeAt(1)){case 66:case 98:radix=2;maxCode=49;break;case 79:case 111:radix=8;maxCode=55;break;default:return+it}for(var digits=it.slice(2),i=0,l=digits.length,code;i<l;i++){code=digits.charCodeAt(i);if(code<48||code>maxCode)return NaN}return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function Number(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?_fails(function(){proto.valueOf.call(that)}):_cof(that)!=NUMBER)?_inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it)};for(var keys=_descriptors?gOPN$3(Base):("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,"+"EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,"+"MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger").split(","),j=0,key;keys.length>j;j++){if(_has(Base,key=keys[j])&&!_has($Number,key)){dP$4($Number,key,gOPD$3(Base,key))}}$Number.prototype=proto;proto.constructor=$Number;_redefine(_global,NUMBER,$Number)}var _aNumberValue=function _aNumberValue(it,msg){if(typeof it!="number"&&_cof(it)!="Number")throw TypeError(msg);return+it};var _stringRepeat=function repeat(count){var str=String(_defined(this)),res="",n=_toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str)){if(n&1)res+=str}return res};var $toFixed=1..toFixed;var floor$1=Math.floor;var data=[0,0,0,0,0,0];var ERROR="Number.toFixed: incorrect invocation!";var ZERO="0";var multiply=function multiply(n,c){var i=-1,c2=c;while(++i<6){c2+=n*data[i];data[i]=c2%1e7;c2=floor$1(c2/1e7)}};var divide=function divide(n){var i=6,c=0;while(--i>=0){c+=data[i];data[i]=floor$1(c/n);c=c%n*1e7}};var numToString=function numToString(){var i=6,s="";while(--i>=0){if(s!==""||i===0||data[i]!==0){var t=String(data[i]);s=s===""?t:s+_stringRepeat.call(ZERO,7-t.length)+t}}return s};var pow=function pow(_x,_x2,_x3){var _again=true;_function:while(_again){var x=_x,n=_x2,acc=_x3;_again=false;if(n===0){return acc}else{if(n%2===1){_x=x;_x2=n-1;_x3=acc*x;_again=true;continue _function}else{_x=x*x;_x2=n/2;_x3=acc;_again=true;continue _function}}}};var log=function log(x){var n=0,x2=x;while(x2>=4096){n+=12;x2/=4096}while(x2>=2){n+=1;x2/=2}return n};_export(_export.P+_export.F*(!!$toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(0xde0b6b3a7640080).toFixed(0)!=="1000000000000000128")||!_fails(function(){$toFixed.call({})})),"Number",{toFixed:function toFixed(fractionDigits){var x=_aNumberValue(this,ERROR),f=_toInteger(fractionDigits),s="",m=ZERO,e,z,j,k;if(f<0||f>20)throw RangeError(ERROR);if(x!=x)return"NaN";if(x<=-1e21||x>=1e21)return String(x);if(x<0){s="-";x=-x}if(x>1e-21){e=log(x*pow(2,69,1))-69;z=e<0?x*pow(2,-e,1):x/pow(2,e,1);z*=4503599627370496;e=52-e;if(e>0){multiply(0,z);j=f;while(j>=7){multiply(1e7,0);j-=7}multiply(pow(10,j,1),0);j=e-1;while(j>=23){divide(1<<23);j-=23}divide(1<<j);multiply(1,1);divide(2);m=numToString()}else{multiply(0,z);multiply(1<<-e,0);m=numToString()+_stringRepeat.call(ZERO,f)}}if(f>0){k=m.length;m=s+(k<=f?"0."+_stringRepeat.call(ZERO,f-k)+m:m.slice(0,k-f)+"."+m.slice(k-f))}else{m=s+m}return m}});var $toPrecision=1..toPrecision;_export(_export.P+_export.F*(_fails(function(){return $toPrecision.call(1,undefined)!=="1"})||!_fails(function(){$toPrecision.call({})})),"Number",{toPrecision:function toPrecision(precision){var that=_aNumberValue(this,"Number#toPrecision: incorrect invocation!");return precision===undefined?$toPrecision.call(that):$toPrecision.call(that,precision)}});_export(_export.S,"Number",{EPSILON:Math.pow(2,-52)});var _isFinite=_global.isFinite;_export(_export.S,"Number",{isFinite:function isFinite(it){return typeof it=="number"&&_isFinite(it)}});var floor$2=Math.floor;var _isInteger=function isInteger(it){return!_isObject(it)&&isFinite(it)&&floor$2(it)===it};_export(_export.S,"Number",{isInteger:_isInteger});_export(_export.S,"Number",{isNaN:function isNaN(number){return number!=number}});var abs=Math.abs;_export(_export.S,"Number",{isSafeInteger:function isSafeInteger(number){return _isInteger(number)&&abs(number)<=9007199254740991}});_export(_export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});_export(_export.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});_export(_export.S+_export.F*(Number.parseFloat!=_parseFloat),"Number",{parseFloat:_parseFloat});_export(_export.S+_export.F*(Number.parseInt!=_parseInt),"Number",{parseInt:_parseInt});var _mathLog1p=Math.log1p||function log1p(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x)};var sqrt=Math.sqrt;var $acosh=Math.acosh;_export(_export.S+_export.F*!($acosh&&Math.floor($acosh(Number.MAX_VALUE))==710&&$acosh(Infinity)==Infinity),"Math",{acosh:function acosh(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:_mathLog1p(x-1+sqrt(x-1)*sqrt(x+1))}});var $asinh=Math.asinh;function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1))}_export(_export.S+_export.F*!($asinh&&1/$asinh(0)>0),"Math",{asinh:asinh});var $atanh=Math.atanh;_export(_export.S+_export.F*!($atanh&&1/$atanh(-0)<0),"Math",{atanh:function atanh(x){return(x=+x)==0?x:Math.log((1+x)/(1-x))/2}});var _mathSign=Math.sign||function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1};_export(_export.S,"Math",{cbrt:function cbrt(x){return _mathSign(x=+x)*Math.pow(Math.abs(x),1/3)}});_export(_export.S,"Math",{clz32:function clz32(x){return(x>>>=0)?31-Math.floor(Math.log(x+.5)*Math.LOG2E):32}});var exp=Math.exp;_export(_export.S,"Math",{cosh:function cosh(x){return(exp(x=+x)+exp(-x))/2}});var $expm1=Math.expm1;var _mathExpm1=!$expm1||$expm1(10)>22025.465794806718||$expm1(10)<22025.465794806718||$expm1(-2e-17)!=-2e-17?function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1}:$expm1;_export(_export.S+_export.F*(_mathExpm1!=Math.expm1),"Math",{expm1:_mathExpm1});var pow$1=Math.pow;var EPSILON=pow$1(2,-52);var EPSILON32=pow$1(2,-23);var MAX32=pow$1(2,127)*(2-EPSILON32);var MIN32=pow$1(2,-126);var roundTiesToEven=function roundTiesToEven(n){return n+1/EPSILON-1/EPSILON};_export(_export.S,"Math",{fround:function fround(x){var $abs=Math.abs(x),$sign=_mathSign(x),a,result;if($abs<MIN32)return $sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32;a=(1+EPSILON32/EPSILON)*$abs;result=a-(a-$abs);if(result>MAX32||result!=result)return $sign*Infinity;return $sign*result}});var abs$1=Math.abs;_export(_export.S,"Math",{hypot:function hypot(value1,value2){var sum=0,i=0,aLen=arguments.length,larg=0,arg,div;while(i<aLen){arg=abs$1(arguments[i++]);if(larg<arg){div=larg/arg;sum=sum*div*div+1;larg=arg}else if(arg>0){div=arg/larg;sum+=div*div}else sum+=arg}return larg===Infinity?Infinity:larg*Math.sqrt(sum)}});var $imul=Math.imul;_export(_export.S+_export.F*_fails(function(){return $imul(4294967295,5)!=-5||$imul.length!=2}),"Math",{imul:function imul(x,y){var UINT16=65535,xn=+x,yn=+y,xl=UINT16&xn,yl=UINT16&yn;return 0|xl*yl+((UINT16&xn>>>16)*yl+xl*(UINT16&yn>>>16)<<16>>>0)}});_export(_export.S,"Math",{log10:function log10(x){return Math.log(x)/Math.LN10}});_export(_export.S,"Math",{log1p:_mathLog1p});_export(_export.S,"Math",{log2:function log2(x){return Math.log(x)/Math.LN2}});_export(_export.S,"Math",{sign:_mathSign});var exp$1=Math.exp;_export(_export.S+_export.F*_fails(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function sinh(x){return Math.abs(x=+x)<1?(_mathExpm1(x)-_mathExpm1(-x))/2:(exp$1(x-1)-exp$1(-x-1))*(Math.E/2)}});var exp$2=Math.exp;_export(_export.S,"Math",{tanh:function tanh(x){var a=_mathExpm1(x=+x),b=_mathExpm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp$2(x)+exp$2(-x))}});_export(_export.S,"Math",{trunc:function trunc(it){return(it>0?Math.floor:Math.ceil)(it)}});var fromCharCode=String.fromCharCode;var $fromCodePoint=String.fromCodePoint;_export(_export.S+_export.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),"String",{fromCodePoint:function fromCodePoint(x){var res=[],aLen=arguments.length,i=0,code;while(aLen>i){code=+arguments[i++];if(_toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")}});_export(_export.S,"String",{raw:function raw(callSite){var tpl=_toIobject(callSite.raw),len=_toLength(tpl.length),aLen=arguments.length,res=[],i=0;while(len>i){res.push(String(tpl[i++]));if(i<aLen)res.push(String(arguments[i]))}return res.join("")}});_stringTrim("trim",function($trim){return function trim(){return $trim(this,3)}});var _stringAt=function _stringAt(TO_STRING){return function(that,pos){var s=String(_defined(that)),i=_toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}};var _iterators={};var IteratorPrototype={};_hide(IteratorPrototype,_wks("iterator"),function(){return this});var _iterCreate=function _iterCreate(Constructor,NAME,next){Constructor.prototype=_objectCreate(IteratorPrototype,{next:_propertyDesc(1,next)});_setToStringTag(Constructor,NAME+" Iterator")};var ITERATOR=_wks("iterator");var BUGGY=!([].keys&&"next"in[].keys());var FF_ITERATOR="@@iterator";var KEYS="keys";var VALUES="values";var returnThis=function returnThis(){return this};var _iterDefine=function _iterDefine(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){_iterCreate(Constructor,NAME,next);var getMethod=function getMethod(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined,$anyNative=NAME=="Array"?proto.entries||$native:$native,methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=_objectGpo($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype){_setToStringTag(IteratorPrototype,TAG,true);if(!_library&&!_has(IteratorPrototype,ITERATOR))_hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!_library||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){_hide(proto,ITERATOR,$default)}_iterators[NAME]=$default;_iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))_redefine(proto,key,methods[key])}else _export(_export.P+_export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods};var $at=_stringAt(true);_iterDefine(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}});var $at$1=_stringAt(false);_export(_export.P,"String",{codePointAt:function codePointAt(pos){return $at$1(this,pos)}});var MATCH=_wks("match");var _isRegexp=function _isRegexp(it){var isRegExp;return _isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:_cof(it)=="RegExp")};var _stringContext=function _stringContext(that,searchString,NAME){if(_isRegexp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(_defined(that))};var MATCH$1=_wks("match");var _failsIsRegexp=function _failsIsRegexp(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{re[MATCH$1]=false;return!"/./"[KEY](re)}catch(f){}}return true};var ENDS_WITH="endsWith";var $endsWith=""[ENDS_WITH];_export(_export.P+_export.F*_failsIsRegexp(ENDS_WITH),"String",{endsWith:function endsWith(searchString){var that=_stringContext(this,searchString,ENDS_WITH),endPosition=arguments.length>1?arguments[1]:undefined,len=_toLength(that.length),end=endPosition===undefined?len:Math.min(_toLength(endPosition),len),search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}});var INCLUDES="includes";_export(_export.P+_export.F*_failsIsRegexp(INCLUDES),"String",{includes:function includes(searchString){return!!~_stringContext(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:undefined)}});_export(_export.P,"String",{repeat:_stringRepeat});var STARTS_WITH="startsWith";var $startsWith=""[STARTS_WITH];_export(_export.P+_export.F*_failsIsRegexp(STARTS_WITH),"String",{startsWith:function startsWith(searchString){var that=_stringContext(this,searchString,STARTS_WITH),index=_toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length)),search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}});var quot=/"/g;var createHTML=function createHTML(string,tag,attribute,value){var S=String(_defined(string)),p1="<"+tag;if(attribute!=="")p1+=" "+attribute+'="'+String(value).replace(quot,"&quot;")+'"';return p1+">"+S+"</"+tag+">"};var _stringHtml=function _stringHtml(NAME,exec){var O={};O[NAME]=exec(createHTML);_export(_export.P+_export.F*_fails(function(){var test=""[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3}),"String",O)};_stringHtml("anchor",function(createHTML){return function anchor(name){return createHTML(this,"a","name",name)}});_stringHtml("big",function(createHTML){return function big(){return createHTML(this,"big","","")}});_stringHtml("blink",function(createHTML){return function blink(){return createHTML(this,"blink","","")}});_stringHtml("bold",function(createHTML){return function bold(){return createHTML(this,"b","","")}});_stringHtml("fixed",function(createHTML){return function fixed(){return createHTML(this,"tt","","")}});_stringHtml("fontcolor",function(createHTML){return function fontcolor(color){return createHTML(this,"font","color",color)}});_stringHtml("fontsize",function(createHTML){return function fontsize(size){return createHTML(this,"font","size",size)}});_stringHtml("italics",function(createHTML){return function italics(){return createHTML(this,"i","","")}});_stringHtml("link",function(createHTML){return function link(url){return createHTML(this,"a","href",url)}});_stringHtml("small",function(createHTML){return function small(){return createHTML(this,"small","","")}});_stringHtml("strike",function(createHTML){return function strike(){return createHTML(this,"strike","","")}});_stringHtml("sub",function(createHTML){return function sub(){return createHTML(this,"sub","","")}});_stringHtml("sup",function(createHTML){return function sup(){return createHTML(this,"sup","","")}});_export(_export.S,"Date",{now:function now(){return(new Date).getTime()}});_export(_export.P+_export.F*_fails(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function toISOString(){return 1}})!==1}),"Date",{toJSON:function toJSON(key){var O=_toObject(this),pv=_toPrimitive(O);return typeof pv=="number"&&!isFinite(pv)?null:O.toISOString()}});var getTime=Date.prototype.getTime;var lz=function lz(num){return num>9?num:"0"+num};_export(_export.P+_export.F*(_fails(function(){return new Date(-5e13-1).toISOString()!="0385-07-25T07:06:39.999Z"})||!_fails(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function toISOString(){if(!isFinite(getTime.call(this)))throw RangeError("Invalid time value");var d=this,y=d.getUTCFullYear(),m=d.getUTCMilliseconds(),s=y<0?"-":y>9999?"+":"";return s+("00000"+Math.abs(y)).slice(s?-6:-4)+"-"+lz(d.getUTCMonth()+1)+"-"+lz(d.getUTCDate())+"T"+lz(d.getUTCHours())+":"+lz(d.getUTCMinutes())+":"+lz(d.getUTCSeconds())+"."+(m>99?m:"0"+lz(m))+"Z"}});var DateProto=Date.prototype;var INVALID_DATE="Invalid Date";var TO_STRING="toString";var $toString=DateProto[TO_STRING];var getTime$1=DateProto.getTime;if(new Date(NaN)+""!=INVALID_DATE){_redefine(DateProto,TO_STRING,function toString(){var value=getTime$1.call(this);return value===value?$toString.call(this):INVALID_DATE})}var NUMBER$1="number";var _dateToPrimitive=function _dateToPrimitive(hint){if(hint!=="string"&&hint!==NUMBER$1&&hint!=="default")throw TypeError("Incorrect hint");return _toPrimitive(_anObject(this),hint!=NUMBER$1)};var TO_PRIMITIVE$1=_wks("toPrimitive");var proto$1=Date.prototype;if(!(TO_PRIMITIVE$1 in proto$1))_hide(proto$1,TO_PRIMITIVE$1,_dateToPrimitive);_export(_export.S,"Array",{isArray:_isArray});var _iterCall=function _iterCall(iterator,fn,value,entries){try{return entries?fn(_anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)_anObject(ret.call(iterator));throw e}};var ITERATOR$1=_wks("iterator");var ArrayProto=Array.prototype;var _isArrayIter=function _isArrayIter(it){return it!==undefined&&(_iterators.Array===it||ArrayProto[ITERATOR$1]===it)};var _createProperty=function _createProperty(object,index,value){if(index in object)_objectDp.f(object,index,_propertyDesc(0,value));else object[index]=value};var ITERATOR$2=_wks("iterator");var core_getIteratorMethod=_core.getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR$2]||it["@@iterator"]||_iterators[_classof(it)]};var ITERATOR$3=_wks("iterator");var SAFE_CLOSING=false;try{var riter=[7][ITERATOR$3]();riter["return"]=function(){SAFE_CLOSING=true}}catch(e){}var _iterDetect=function _iterDetect(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR$3]();iter.next=function(){return{done:safe=true}};arr[ITERATOR$3]=function(){return iter};exec(arr)}catch(e){}return safe};_export(_export.S+_export.F*!_iterDetect(function(iter){}),"Array",{from:function from(arrayLike){var O=_toObject(arrayLike),C=typeof this=="function"?this:Array,aLen=arguments.length,mapfn=aLen>1?arguments[1]:undefined,mapping=mapfn!==undefined,index=0,iterFn=core_getIteratorMethod(O),length,result,step,iterator;if(mapping)mapfn=_ctx(mapfn,aLen>2?arguments[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&_isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){_createProperty(result,index,mapping?_iterCall(iterator,mapfn,[step.value,index],true):step.value)}}else{length=_toLength(O.length);for(result=new C(length);length>index;index++){_createProperty(result,index,mapping?mapfn(O[index],index):O[index])}}result.length=index;return result}});_export(_export.S+_export.F*_fails(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function of(){var index=0,aLen=arguments.length,result=new(typeof this=="function"?this:Array)(aLen);while(aLen>index){_createProperty(result,index,arguments[index++])}result.length=aLen;return result}});var _strictMethod=function _strictMethod(method,arg){return!!method&&_fails(function(){arg?method.call(null,function(){},1):method.call(null)})};var arrayJoin=[].join;_export(_export.P+_export.F*(_iobject!=Object||!_strictMethod(arrayJoin)),"Array",{join:function join(separator){return arrayJoin.call(_toIobject(this),separator===undefined?",":separator)}});var arraySlice$1=[].slice;_export(_export.P+_export.F*_fails(function(){if(_html)arraySlice$1.call(_html)}),"Array",{slice:function slice(begin,end){var len=_toLength(this.length),klass=_cof(this);end=end===undefined?len:end;if(klass=="Array")return arraySlice$1.call(this,begin,end);var start=_toIndex(begin,len),upTo=_toIndex(end,len),size=_toLength(upTo-start),cloned=Array(size),i=0;for(;i<size;i++){cloned[i]=klass=="String"?this.charAt(start+i):this[start+i]}return cloned}});var $sort=[].sort;var test$1=[1,2,3];_export(_export.P+_export.F*(_fails(function(){test$1.sort(undefined)})||!_fails(function(){test$1.sort(null)})||!_strictMethod($sort)),"Array",{sort:function sort(comparefn){return comparefn===undefined?$sort.call(_toObject(this)):$sort.call(_toObject(this),_aFunction(comparefn))}});var SPECIES=_wks("species");var _arraySpeciesConstructor=function _arraySpeciesConstructor(original){var C;if(_isArray(original)){C=original.constructor;if(typeof C=="function"&&(C===Array||_isArray(C.prototype)))C=undefined;if(_isObject(C)){C=C[SPECIES];if(C===null)C=undefined}}return C===undefined?Array:C};var _arraySpeciesCreate=function _arraySpeciesCreate(original,length){return new(_arraySpeciesConstructor(original))(length)};var _arrayMethods=function _arrayMethods(TYPE,$create){var IS_MAP=TYPE==1,IS_FILTER=TYPE==2,IS_SOME=TYPE==3,IS_EVERY=TYPE==4,IS_FIND_INDEX=TYPE==6,NO_HOLES=TYPE==5||IS_FIND_INDEX,create=$create||_arraySpeciesCreate;return function($this,callbackfn,that){var O=_toObject($this),self=_iobject(O),f=_ctx(callbackfn,that,3),length=_toLength(self.length),index=0,result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined,val,res;for(;length>index;index++){if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}};var $forEach=_arrayMethods(0);var STRICT=_strictMethod([].forEach,true);_export(_export.P+_export.F*!STRICT,"Array",{forEach:function forEach(callbackfn){return $forEach(this,callbackfn,arguments[1])}});var $map=_arrayMethods(1);_export(_export.P+_export.F*!_strictMethod([].map,true),"Array",{map:function map(callbackfn){return $map(this,callbackfn,arguments[1])}});var $filter=_arrayMethods(2);_export(_export.P+_export.F*!_strictMethod([].filter,true),"Array",{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments[1])}});var $some=_arrayMethods(3);_export(_export.P+_export.F*!_strictMethod([].some,true),"Array",{some:function some(callbackfn){return $some(this,callbackfn,arguments[1])}});var $every=_arrayMethods(4);_export(_export.P+_export.F*!_strictMethod([].every,true),"Array",{every:function every(callbackfn){return $every(this,callbackfn,arguments[1])}});var _arrayReduce=function _arrayReduce(that,callbackfn,aLen,memo,isRight){_aFunction(callbackfn);var O=_toObject(that),self=_iobject(O),length=_toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index];index+=i;break}index+=i;if(isRight?index<0:length<=index){throw TypeError("Reduce of empty array with no initial value")}}for(;isRight?index>=0:length>index;index+=i){if(index in self){memo=callbackfn(memo,self[index],index,O)}}return memo};_export(_export.P+_export.F*!_strictMethod([].reduce,true),"Array",{reduce:function reduce(callbackfn){return _arrayReduce(this,callbackfn,arguments.length,arguments[1],false)}});_export(_export.P+_export.F*!_strictMethod([].reduceRight,true),"Array",{reduceRight:function reduceRight(callbackfn){return _arrayReduce(this,callbackfn,arguments.length,arguments[1],true)}});var $indexOf=_arrayIncludes(false);var $native=[].indexOf;var NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;_export(_export.P+_export.F*(NEGATIVE_ZERO||!_strictMethod($native)),"Array",{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1])}});var $native$1=[].lastIndexOf;var NEGATIVE_ZERO$1=!!$native$1&&1/[1].lastIndexOf(1,-0)<0;_export(_export.P+_export.F*(NEGATIVE_ZERO$1||!_strictMethod($native$1)),"Array",{lastIndexOf:function lastIndexOf(searchElement){if(NEGATIVE_ZERO$1)return $native$1.apply(this,arguments)||0;var O=_toIobject(this),length=_toLength(O.length),index=length-1;if(arguments.length>1)index=Math.min(index,_toInteger(arguments[1]));if(index<0)index=length+index;for(;index>=0;index--){if(index in O)if(O[index]===searchElement)return index||0}return-1}});var _arrayCopyWithin=[].copyWithin||function copyWithin(target,start){var O=_toObject(this),len=_toLength(O.length),to=_toIndex(target,len),from=_toIndex(start,len),end=arguments.length>2?arguments[2]:undefined,count=Math.min((end===undefined?len:_toIndex(end,len))-from,len-to),inc=1;if(from<to&&to<from+count){inc=-1;from+=count-1;to+=count-1}while(count-- >0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O};var UNSCOPABLES=_wks("unscopables");var ArrayProto$1=Array.prototype;if(ArrayProto$1[UNSCOPABLES]==undefined)_hide(ArrayProto$1,UNSCOPABLES,{});var _addToUnscopables=function _addToUnscopables(key){ArrayProto$1[UNSCOPABLES][key]=true};_export(_export.P,"Array",{copyWithin:_arrayCopyWithin});_addToUnscopables("copyWithin");var _arrayFill=function fill(value){var O=_toObject(this),length=_toLength(O.length),aLen=arguments.length,index=_toIndex(aLen>1?arguments[1]:undefined,length),end=aLen>2?arguments[2]:undefined,endPos=end===undefined?length:_toIndex(end,length);while(endPos>index){O[index++]=value}return O};_export(_export.P,"Array",{fill:_arrayFill});_addToUnscopables("fill");var $find=_arrayMethods(5);var KEY="find";var forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false});_export(_export.P+_export.F*forced,"Array",{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});_addToUnscopables(KEY);var $find$1=_arrayMethods(6);var KEY$1="findIndex";var forced$1=true;if(KEY$1 in[])Array(1)[KEY$1](function(){forced$1=false});_export(_export.P+_export.F*forced$1,"Array",{findIndex:function findIndex(callbackfn){return $find$1(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});_addToUnscopables(KEY$1);var SPECIES$1=_wks("species");var _setSpecies=function _setSpecies(KEY){var C=_global[KEY];if(_descriptors&&C&&!C[SPECIES$1])_objectDp.f(C,SPECIES$1,{configurable:true,get:function get(){return this}})};_setSpecies("Array");var _iterStep=function _iterStep(done,value){return{value:value,done:!!done}};var es6_array_iterator=_iterDefine(Array,"Array",function(iterated,kind){this._t=_toIobject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return _iterStep(1)}if(kind=="keys")return _iterStep(0,index);if(kind=="values")return _iterStep(0,O[index]);return _iterStep(0,[index,O[index]])},"values");_iterators.Arguments=_iterators.Array;_addToUnscopables("keys");_addToUnscopables("values");_addToUnscopables("entries");var _flags=function _flags(){var that=_anObject(this),result="";if(that.global)result+="g";if(that.ignoreCase)result+="i";if(that.multiline)result+="m";if(that.unicode)result+="u";if(that.sticky)result+="y";return result};var dP$5=_objectDp.f;var gOPN$4=_objectGopn.f;var $RegExp=_global.RegExp;var Base$1=$RegExp;var proto$2=$RegExp.prototype;var re1=/a/g;var re2=/a/g;var CORRECT_NEW=new $RegExp(re1)!==re1;if(_descriptors&&(!CORRECT_NEW||_fails(function(){re2[_wks("match")]=false;return $RegExp(re1)!=re1||$RegExp(re2)==re2||$RegExp(re1,"i")!="/a/i"}))){$RegExp=function RegExp(p,f){var tiRE=this instanceof $RegExp,piRE=_isRegexp(p),fiU=f===undefined;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:_inheritIfRequired(CORRECT_NEW?new Base$1(piRE&&!fiU?p.source:p,f):Base$1((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?_flags.call(p):f),tiRE?this:proto$2,$RegExp)};var proxy=function proxy(key){key in $RegExp||dP$5($RegExp,key,{configurable:true,get:function get(){return Base$1[key]},set:function set(it){Base$1[key]=it}})};for(var keys$1=gOPN$4(Base$1),i$1=0;keys$1.length>i$1;){proxy(keys$1[i$1++])}proto$2.constructor=$RegExp;$RegExp.prototype=proto$2;_redefine(_global,"RegExp",$RegExp)}_setSpecies("RegExp");if(_descriptors&&/./g.flags!="g")_objectDp.f(RegExp.prototype,"flags",{configurable:true,get:_flags});var TO_STRING$1="toString";var $toString$1=/./[TO_STRING$1];var define=function define(fn){_redefine(RegExp.prototype,TO_STRING$1,fn,true)};if(_fails(function(){return $toString$1.call({source:"a",flags:"b"})!="/a/b"})){define(function toString(){var R=_anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!_descriptors&&R instanceof RegExp?_flags.call(R):undefined)})}else if($toString$1.name!=TO_STRING$1){define(function toString(){return $toString$1.call(this)})}var _fixReWks=function _fixReWks(KEY,length,exec){var SYMBOL=_wks(KEY),fns=exec(_defined,SYMBOL,""[KEY]),strfn=fns[0],rxfn=fns[1];if(_fails(function(){var O={};O[SYMBOL]=function(){return 7};return""[KEY](O)!=7})){_redefine(String.prototype,KEY,strfn);_hide(RegExp.prototype,SYMBOL,length==2?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)})}};_fixReWks("match",1,function(defined,MATCH,$match){return[function match(regexp){var O=defined(this),fn=regexp==undefined?undefined:regexp[MATCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},$match]});_fixReWks("replace",2,function(defined,REPLACE,$replace){return[function replace(searchValue,replaceValue){var O=defined(this),fn=searchValue==undefined?undefined:searchValue[REPLACE];return fn!==undefined?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)},$replace]});_fixReWks("search",1,function(defined,SEARCH,$search){return[function search(regexp){var O=defined(this),fn=regexp==undefined?undefined:regexp[SEARCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},$search]});_fixReWks("split",2,function(defined,SPLIT,$split){var isRegExp=_isRegexp,_split=$split,$push=[].push,$SPLIT="split",LENGTH="length",LAST_INDEX="lastIndex";
if("abbc"[$SPLIT](/(b)*/)[1]=="c"||"test"[$SPLIT](/(?:)/,-1)[LENGTH]!=4||"ab"[$SPLIT](/(?:ab)*/)[LENGTH]!=2||"."[$SPLIT](/(.?)(.?)/)[LENGTH]!=4||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]){var NPCG=/()??/.exec("")[1]===undefined;$split=function $split(separator,limit){var string=String(this);if(separator===undefined&&limit===0)return[];if(!isRegExp(separator))return _split.call(string,separator,limit);var output=[];var flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":"");var lastLastIndex=0;var splitLimit=limit===undefined?4294967295:limit>>>0;var separatorCopy=new RegExp(separator.source,flags+"g");var separator2,match,lastIndex,lastLength,i;if(!NPCG)separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags);while(match=separatorCopy.exec(string)){lastIndex=match.index+match[0][LENGTH];if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(!NPCG&&match[LENGTH]>1)match[0].replace(separator2,function(){for(i=1;i<arguments[LENGTH]-2;i++){if(arguments[i]===undefined)match[i]=undefined}});if(match[LENGTH]>1&&match.index<string[LENGTH])$push.apply(output,match.slice(1));lastLength=match[0][LENGTH];lastLastIndex=lastIndex;if(output[LENGTH]>=splitLimit)break}if(separatorCopy[LAST_INDEX]===match.index)separatorCopy[LAST_INDEX]++}if(lastLastIndex===string[LENGTH]){if(lastLength||!separatorCopy.test(""))output.push("")}else output.push(string.slice(lastLastIndex));return output[LENGTH]>splitLimit?output.slice(0,splitLimit):output}}else if("0"[$SPLIT](undefined,0)[LENGTH]){$split=function $split(separator,limit){return separator===undefined&&limit===0?[]:_split.call(this,separator,limit)}}return[function split(separator,limit){var O=defined(this),fn=separator==undefined?undefined:separator[SPLIT];return fn!==undefined?fn.call(separator,O,limit):$split.call(String(O),separator,limit)},$split]});var _anInstance=function _anInstance(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+": incorrect invocation!")}return it};var _forOf=createCommonjsModule$$1(function(module){var BREAK={},RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:core_getIteratorMethod(iterable),f=_ctx(fn,that,entries?2:1),index=0,length,step,iterator,result;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(_isArrayIter(iterFn))for(length=_toLength(iterable.length);length>index;index++){result=entries?f(_anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=_iterCall(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN});var SPECIES$2=_wks("species");var _speciesConstructor=function _speciesConstructor(O,D){var C=_anObject(O).constructor,S;return C===undefined||(S=_anObject(C)[SPECIES$2])==undefined?D:_aFunction(S)};var process$2=_global.process;var setTask=_global.setImmediate;var clearTask=_global.clearImmediate;var MessageChannel$1=_global.MessageChannel;var counter=0;var queue={};var ONREADYSTATECHANGE="onreadystatechange";var defer;var channel;var port;var run=function run(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listener=function listener(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[],i=1;while(arguments.length>i){args.push(arguments[i++])}queue[++counter]=function(){_invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(_cof(process$2)=="process"){defer=function defer(id){process$2.nextTick(_ctx(run,id,1))}}else if(MessageChannel$1){channel=new MessageChannel$1;port=channel.port2;channel.port1.onmessage=listener;defer=_ctx(port.postMessage,port,1)}else if(_global.addEventListener&&typeof postMessage=="function"&&!_global.importScripts){defer=function defer(id){_global.postMessage(id+"","*")};_global.addEventListener("message",listener,false)}else if(ONREADYSTATECHANGE in _domCreate("script")){defer=function defer(id){_html.appendChild(_domCreate("script"))[ONREADYSTATECHANGE]=function(){_html.removeChild(this);run.call(id)}}}else{defer=function defer(id){setTimeout(_ctx(run,id,1),0)}}}var _task={set:setTask,clear:clearTask};var macrotask=_task.set;var Observer=_global.MutationObserver||_global.WebKitMutationObserver;var process$3=_global.process;var Promise=_global.Promise;var isNode$1=_cof(process$3)=="process";var _microtask=function _microtask(){var head,last,notify;var flush=function flush(){var parent,fn;if(isNode$1&&(parent=process$3.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn()}catch(e){if(head)notify();else last=undefined;throw e}}last=undefined;if(parent)parent.enter()};if(isNode$1){notify=function notify(){process$3.nextTick(flush)}}else if(Observer){var toggle=true,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function notify(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function notify(){promise.then(flush)}}else{notify=function notify(){macrotask.call(_global,flush)}}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify()}last=task}};var _redefineAll=function _redefineAll(target,src,safe){for(var key in src){_redefine(target,key,src[key],safe)}return target};var task=_task.set;var microtask=_microtask();var PROMISE="Promise";var TypeError$1=_global.TypeError;var process$1=_global.process;var $Promise=_global[PROMISE];var process$1=_global.process;var isNode=_classof(process$1)=="process";var empty=function empty(){};var Internal;var GenericPromiseCapability;var Wrapper;var USE_NATIVE$1=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[_wks("species")]=function(exec){exec(empty,empty)};return(isNode||typeof PromiseRejectionEvent=="function")&&promise.then(empty)instanceof FakePromise}catch(e){}}();var sameConstructor=function sameConstructor(a,b){return a===b||a===$Promise&&b===Wrapper};var isThenable=function isThenable(it){var then;return _isObject(it)&&typeof(then=it.then)=="function"?then:false};var newPromiseCapability=function newPromiseCapability(C){return sameConstructor($Promise,C)?new PromiseCapability(C):new GenericPromiseCapability(C)};var PromiseCapability=GenericPromiseCapability=function GenericPromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError$1("Bad Promise constructor");resolve=$$resolve;reject=$$reject});this.resolve=_aFunction(resolve);this.reject=_aFunction(reject)};var perform=function perform(exec){try{exec()}catch(e){return{error:e}}};var notify=function notify(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v,ok=promise._s==1,i=0;var run=function run(reaction){var handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain,result,then;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain)domain.exit()}if(result===reaction.promise){reject(TypeError$1("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){reject(e)}};while(chain.length>i){run(chain[i++])}promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise)})};var onUnhandled=function onUnhandled(promise){task.call(_global,function(){var value=promise._v,abrupt,handler,console;if(isUnhandled(promise)){abrupt=perform(function(){if(isNode){process$1.emit("unhandledRejection",value,promise)}else if(handler=_global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=_global.console)&&console.error){console.error("Unhandled promise rejection",value)}});promise._h=isNode||isUnhandled(promise)?2:1}promise._a=undefined;if(abrupt)throw abrupt.error})};var isUnhandled=function isUnhandled(promise){if(promise._h==1)return false;var chain=promise._a||promise._c,i=0,reaction;while(chain.length>i){reaction=chain[i++];if(reaction.fail||!isUnhandled(reaction.promise))return false}return true};var onHandleUnhandled=function onHandleUnhandled(promise){task.call(_global,function(){var handler;if(isNode){process$1.emit("rejectionHandled",promise)}else if(handler=_global.onrejectionhandled){handler({promise:promise,reason:promise._v})}})};var $reject=function $reject(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true)};var $resolve=function $resolve(value){var promise=this,then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError$1("Promise can't be resolved itself");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};try{then.call(value,_ctx($resolve,wrapper,1),_ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}})}else{promise._v=value;promise._s=1;notify(promise,false)}}catch(e){$reject.call({_w:promise,_d:false},e)}};if(!USE_NATIVE$1){$Promise=function Promise(executor){_anInstance(this,$Promise,PROMISE,"_h");_aFunction(executor);Internal.call(this);try{executor(_ctx($resolve,this,1),_ctx($reject,this,1))}catch(err){$reject.call(this,err)}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};Internal.prototype=_redefineAll($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(_speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;reaction.domain=isNode?process$1.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise},"catch":function _catch(onRejected){return this.then(undefined,onRejected)}});PromiseCapability=function PromiseCapability(){var promise=new Internal;this.promise=promise;this.resolve=_ctx($resolve,promise,1);this.reject=_ctx($reject,promise,1)}}_export(_export.G+_export.W+_export.F*!USE_NATIVE$1,{Promise:$Promise});_setToStringTag($Promise,PROMISE);_setSpecies(PROMISE);Wrapper=_core[PROMISE];_export(_export.S+_export.F*!USE_NATIVE$1,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this),$$reject=capability.reject;$$reject(r);return capability.promise}});_export(_export.S+_export.F*(_library||!USE_NATIVE$1),PROMISE,{resolve:function resolve(x){if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;var capability=newPromiseCapability(this),$$resolve=capability.resolve;$$resolve(x);return capability.promise}});_export(_export.S+_export.F*!(USE_NATIVE$1&&_iterDetect(function(iter){$Promise.all(iter)["catch"](empty)})),PROMISE,{all:function all(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject;var abrupt=perform(function(){var values=[],index=0,remaining=1;_forOf(iterable,false,function(promise){var $index=index++,alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values)},reject)});--remaining||resolve(values)});if(abrupt)reject(abrupt.error);return capability.promise},race:function race(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject;var abrupt=perform(function(){_forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(abrupt)reject(abrupt.error);return capability.promise}});var dP$6=_objectDp.f;var fastKey=_meta.fastKey;var SIZE=_descriptors?"_s":"size";var getEntry=function getEntry(that,key){var index=fastKey(key),entry;if(index!=="F")return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry}};var _collectionStrong={getConstructor:function getConstructor(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){_anInstance(that,C,NAME,"_i");that._i=_objectCreate(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)_forOf(iterable,IS_MAP,that[ADDER],that)});_redefineAll(C.prototype,{clear:function clear(){for(var that=this,data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that._f=that._l=undefined;that[SIZE]=0},"delete":function _delete(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){_anInstance(this,C,"forEach");var f=_ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3),entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r){entry=entry.p}}},has:function has(key){return!!getEntry(this,key)}});if(_descriptors)dP$6(C.prototype,"size",{get:function get(){return _defined(this[SIZE])}});return C},def:function def(that,key,value){var entry=getEntry(that,key),prev,index;if(entry){entry.v=value}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!=="F")that._i[index]=entry}return that},getEntry:getEntry,setStrong:function setStrong(C,NAME,IS_MAP){_iterDefine(C,NAME,function(iterated,kind){this._t=iterated;this._k=kind;this._l=undefined},function(){var that=this,kind=that._k,entry=that._l;while(entry&&entry.r){entry=entry.p}if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return _iterStep(1)}if(kind=="keys")return _iterStep(0,entry.k);if(kind=="values")return _iterStep(0,entry.v);return _iterStep(0,[entry.k,entry.v])},IS_MAP?"entries":"values",!IS_MAP,true);_setSpecies(NAME)}};var _collection=function _collection(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=_global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={};var fixMethod=function fixMethod(KEY){var fn=proto[KEY];_redefine(proto,KEY,KEY=="delete"?function(a){return IS_WEAK&&!_isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="has"?function has(a){return IS_WEAK&&!_isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="get"?function get(a){return IS_WEAK&&!_isObject(a)?undefined:fn.call(this,a===0?0:a)}:KEY=="add"?function add(a){fn.call(this,a===0?0:a);return this}:function set(a,b){fn.call(this,a===0?0:a,b);return this})};if(typeof C!="function"||!(IS_WEAK||proto.forEach&&!_fails(function(){(new C).entries().next()}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);_redefineAll(C.prototype,methods);_meta.NEED=true}else{var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=_fails(function(){instance.has(1)}),ACCEPT_ITERABLES=_iterDetect(function(iter){new C(iter)}),BUGGY_ZERO=!IS_WEAK&&_fails(function(){var $instance=new C,index=5;while(index--){$instance[ADDER](index,index)}return!$instance.has(-0)});if(!ACCEPT_ITERABLES){C=wrapper(function(target,iterable){_anInstance(target,C,NAME);var that=_inheritIfRequired(new Base,target,C);if(iterable!=undefined)_forOf(iterable,IS_MAP,that[ADDER],that);return that});C.prototype=proto;proto.constructor=C}if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get")}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&proto.clear)delete proto.clear}_setToStringTag(C,NAME);O[NAME]=C;_export(_export.G+_export.W+_export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C};var es6_map=_collection("Map",function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function get(key){var entry=_collectionStrong.getEntry(this,key);return entry&&entry.v},set:function set(key,value){return _collectionStrong.def(this,key===0?0:key,value)}},_collectionStrong,true);var es6_set=_collection("Set",function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return _collectionStrong.def(this,value=value===0?0:value,value)}},_collectionStrong);var getWeak=_meta.getWeak;var arrayFind=_arrayMethods(5);var arrayFindIndex=_arrayMethods(6);var id$1=0;var uncaughtFrozenStore=function uncaughtFrozenStore(that){return that._l||(that._l=new UncaughtFrozenStore)};var UncaughtFrozenStore=function UncaughtFrozenStore(){this.a=[]};var findUncaughtFrozen=function findUncaughtFrozen(store,key){return arrayFind(store.a,function(it){return it[0]===key})};UncaughtFrozenStore.prototype={get:function get(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function has(key){return!!findUncaughtFrozen(this,key)},set:function set(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.a.push([key,value])},"delete":function _delete(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key});if(~index)this.a.splice(index,1);return!!~index}};var _collectionWeak={getConstructor:function getConstructor(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){_anInstance(that,C,NAME,"_i");that._i=id$1++;that._l=undefined;if(iterable!=undefined)_forOf(iterable,IS_MAP,that[ADDER],that)});_redefineAll(C.prototype,{"delete":function _delete(key){if(!_isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(this)["delete"](key);return data&&_has(data,this._i)&&delete data[this._i]},has:function has(key){if(!_isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(this).has(key);return data&&_has(data,this._i)}});return C},def:function def(that,key,value){var data=getWeak(_anObject(key),true);if(data===true)uncaughtFrozenStore(that).set(key,value);else data[that._i]=value;return that},ufstore:uncaughtFrozenStore};var es6_weakMap=createCommonjsModule$$1(function(module){var each=_arrayMethods(0),getWeak=_meta.getWeak,isExtensible=Object.isExtensible,uncaughtFrozenStore=_collectionWeak.ufstore,tmp={},InternalMap;var wrapper=function wrapper(get){return function WeakMap(){return get(this,arguments.length>0?arguments[0]:undefined)}};var methods={get:function get(key){if(_isObject(key)){var data=getWeak(key);if(data===true)return uncaughtFrozenStore(this).get(key);return data?data[this._i]:undefined}},set:function set(key,value){return _collectionWeak.def(this,key,value)}};var $WeakMap=module.exports=_collection("WeakMap",wrapper,methods,_collectionWeak,true,true);if((new $WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)!=7){InternalMap=_collectionWeak.getConstructor(wrapper);_objectAssign(InternalMap.prototype,methods);_meta.NEED=true;each(["delete","has","get","set"],function(key){var proto=$WeakMap.prototype,method=proto[key];_redefine(proto,key,function(a,b){if(_isObject(a)&&!isExtensible(a)){if(!this._f)this._f=new InternalMap;var result=this._f[key](a,b);return key=="set"?this:result}return method.call(this,a,b)})})}});_collection("WeakSet",function(get){return function WeakSet(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return _collectionWeak.def(this,value,true)}},_collectionWeak,false,true);var TYPED=_uid("typed_array");var VIEW$1=_uid("view");var ABV=!!(_global.ArrayBuffer&&_global.DataView);var CONSTR=ABV;var i$2=0;var l=9;var Typed;var TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(i$2<l){if(Typed=_global[TypedArrayConstructors[i$2++]]){_hide(Typed.prototype,TYPED,true);_hide(Typed.prototype,VIEW$1,true)}else CONSTR=false}var _typed={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW$1};var _typedBuffer=createCommonjsModule$$1(function(module,exports){var gOPN=_objectGopn.f,dP=_objectDp.f,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length!",WRONG_INDEX="Wrong index!",$ArrayBuffer=_global[ARRAY_BUFFER],$DataView=_global[DATA_VIEW],Math=_global.Math,RangeError=_global.RangeError,Infinity=_global.Infinity,BaseBuffer=$ArrayBuffer,abs=Math.abs,pow=Math.pow,floor=Math.floor,log=Math.log,LN2=Math.LN2,BUFFER="buffer",BYTE_LENGTH="byteLength",BYTE_OFFSET="byteOffset",$BUFFER=_descriptors?"_b":BUFFER,$LENGTH=_descriptors?"_l":BYTE_LENGTH,$OFFSET=_descriptors?"_o":BYTE_OFFSET;var packIEEE754=function packIEEE754(value,mLen,nBytes){var buffer=Array(nBytes),eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?pow(2,-24)-pow(2,-77):0,i=0,s=value<0||value===0&&1/value<0?1:0,e,m,c;value=abs(value);if(value!=value||value===Infinity){m=value!=value?1:0;e=eMax}else{e=floor(log(value)/LN2);if(value*(c=pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*pow(2,mLen);e=e+eBias}else{m=value*pow(2,eBias-1)*pow(2,mLen);e=0}}for(;mLen>=8;buffer[i++]=m&255,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[i++]=e&255,e/=256,eLen-=8){}buffer[--i]|=s*128;return buffer};var unpackIEEE754=function unpackIEEE754(buffer,mLen,nBytes){var eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=eLen-7,i=nBytes-1,s=buffer[i--],e=s&127,m;s>>=7;for(;nBits>0;e=e*256+buffer[i],i--,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[i],i--,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:s?-Infinity:Infinity}else{m=m+pow(2,mLen);e=e-eBias}return(s?-1:1)*m*pow(2,e-mLen)};var unpackI32=function unpackI32(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0]};var packI8=function packI8(it){return[it&255]};var packI16=function packI16(it){return[it&255,it>>8&255]};var packI32=function packI32(it){return[it&255,it>>8&255,it>>16&255,it>>24&255]};var packF64=function packF64(it){return packIEEE754(it,52,8)};var packF32=function packF32(it){return packIEEE754(it,23,4)};var addGetter=function addGetter(C,key,internal){dP(C[PROTOTYPE],key,{get:function get(){return this[internal]}})};var get=function get(view,bytes,index,isLittleEndian){var numIndex=+index,intIndex=_toInteger(numIndex);if(numIndex!=intIndex||intIndex<0||intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse()};var set=function set(view,bytes,index,conversion,value,isLittleEndian){var numIndex=+index,intIndex=_toInteger(numIndex);if(numIndex!=intIndex||intIndex<0||intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=conversion(+value);for(var i=0;i<bytes;i++){store[start+i]=pack[isLittleEndian?i:bytes-i-1]}};var validateArrayBufferArguments=function validateArrayBufferArguments(that,length){_anInstance(that,$ArrayBuffer,ARRAY_BUFFER);var numberLength=+length,byteLength=_toLength(numberLength);if(numberLength!=byteLength)throw RangeError(WRONG_LENGTH);return byteLength};if(!_typed.ABV){$ArrayBuffer=function ArrayBuffer(length){var byteLength=validateArrayBufferArguments(this,length);this._b=_arrayFill.call(Array(byteLength),0);this[$LENGTH]=byteLength};$DataView=function DataView(buffer,byteOffset,byteLength){_anInstance(this,$DataView,DATA_VIEW);_anInstance(buffer,$ArrayBuffer,DATA_VIEW);var bufferLength=buffer[$LENGTH],offset=_toInteger(byteOffset);if(offset<0||offset>bufferLength)throw RangeError("Wrong offset!");byteLength=byteLength===undefined?bufferLength-offset:_toLength(byteLength);if(offset+byteLength>bufferLength)throw RangeError(WRONG_LENGTH);this[$BUFFER]=buffer;this[$OFFSET]=offset;this[$LENGTH]=byteLength};if(_descriptors){addGetter($ArrayBuffer,BYTE_LENGTH,"_l");addGetter($DataView,BUFFER,"_b");addGetter($DataView,BYTE_LENGTH,"_l");addGetter($DataView,BYTE_OFFSET,"_o")}_redefineAll($DataView[PROTOTYPE],{getInt8:function getInt8(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function getUint8(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function getInt16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16},getUint16:function getUint16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0]},getInt32:function getInt32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))},getUint32:function getUint32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0},getFloat32:function getFloat32(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4)},getFloat64:function getFloat64(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8)},setInt8:function setInt8(byteOffset,value){set(this,1,byteOffset,packI8,value)},setUint8:function setUint8(byteOffset,value){set(this,1,byteOffset,packI8,value)},setInt16:function setInt16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setUint16:function setUint16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setInt32:function setInt32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setUint32:function setUint32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setFloat32:function setFloat32(byteOffset,value){set(this,4,byteOffset,packF32,value,arguments[2])},setFloat64:function setFloat64(byteOffset,value){set(this,8,byteOffset,packF64,value,arguments[2])}})}else{if(!_fails(function(){new $ArrayBuffer})||!_fails(function(){new $ArrayBuffer(.5)})){$ArrayBuffer=function ArrayBuffer(length){return new BaseBuffer(validateArrayBufferArguments(this,length))};var ArrayBufferProto=$ArrayBuffer[PROTOTYPE]=BaseBuffer[PROTOTYPE];for(var keys=gOPN(BaseBuffer),j=0,key;keys.length>j;){if(!((key=keys[j++])in $ArrayBuffer))_hide($ArrayBuffer,key,BaseBuffer[key])}if(!_library)ArrayBufferProto.constructor=$ArrayBuffer}var view=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648);view.setInt8(1,2147483649);if(view.getInt8(0)||!view.getInt8(1))_redefineAll($DataView[PROTOTYPE],{setInt8:function setInt8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)},setUint8:function setUint8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)}},true)}_setToStringTag($ArrayBuffer,ARRAY_BUFFER);_setToStringTag($DataView,DATA_VIEW);_hide($DataView[PROTOTYPE],_typed.VIEW,true);exports[ARRAY_BUFFER]=$ArrayBuffer;exports[DATA_VIEW]=$DataView});var ArrayBuffer$1=_global.ArrayBuffer;var $ArrayBuffer=_typedBuffer.ArrayBuffer;var $DataView=_typedBuffer.DataView;var $isView=_typed.ABV&&ArrayBuffer$1.isView;var $slice=$ArrayBuffer.prototype.slice;var VIEW=_typed.VIEW;var ARRAY_BUFFER="ArrayBuffer";_export(_export.G+_export.W+_export.F*(ArrayBuffer$1!==$ArrayBuffer),{ArrayBuffer:$ArrayBuffer});_export(_export.S+_export.F*!_typed.CONSTR,ARRAY_BUFFER,{isView:function isView(it){return $isView&&$isView(it)||_isObject(it)&&VIEW in it}});_export(_export.P+_export.U+_export.F*_fails(function(){return!new $ArrayBuffer(2).slice(1,undefined).byteLength}),ARRAY_BUFFER,{slice:function slice(start,end){if($slice!==undefined&&end===undefined)return $slice.call(_anObject(this),start);var len=_anObject(this).byteLength,first=_toIndex(start,len),final=_toIndex(end===undefined?len:end,len),result=new(_speciesConstructor(this,$ArrayBuffer))(_toLength(final-first)),viewS=new $DataView(this),viewT=new $DataView(result),index=0;while(first<final){viewT.setUint8(index++,viewS.getUint8(first++))}return result}});_setSpecies(ARRAY_BUFFER);_export(_export.G+_export.W+_export.F*!_typed.ABV,{DataView:_typedBuffer.DataView});var _typedArray=createCommonjsModule$$1(function(module){if(_descriptors){var LIBRARY=_library,global=_global,fails=_fails,$export=_export,$typed=_typed,$buffer=_typedBuffer,ctx=_ctx,anInstance=_anInstance,propertyDesc=_propertyDesc,hide=_hide,redefineAll=_redefineAll,toInteger=_toInteger,toLength=_toLength,toIndex=_toIndex,toPrimitive=_toPrimitive,has=_has,same=_sameValue,classof=_classof,isObject=_isObject,toObject=_toObject,isArrayIter=_isArrayIter,create=_objectCreate,getPrototypeOf=_objectGpo,gOPN=_objectGopn.f,getIterFn=core_getIteratorMethod,uid=_uid,wks=_wks,createArrayMethod=_arrayMethods,createArrayIncludes=_arrayIncludes,speciesConstructor=_speciesConstructor,ArrayIterators=es6_array_iterator,Iterators=_iterators,$iterDetect=_iterDetect,setSpecies=_setSpecies,arrayFill=_arrayFill,arrayCopyWithin=_arrayCopyWithin,$DP=_objectDp,$GOPD=_objectGopd,dP=$DP.f,gOPD=$GOPD.f,RangeError=global.RangeError,TypeError=global.TypeError,Uint8Array=global.Uint8Array,ARRAY_BUFFER="ArrayBuffer",SHARED_BUFFER="Shared"+ARRAY_BUFFER,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",PROTOTYPE="prototype",ArrayProto=Array[PROTOTYPE],$ArrayBuffer=$buffer.ArrayBuffer,$DataView=$buffer.DataView,arrayForEach=createArrayMethod(0),arrayFilter=createArrayMethod(2),arraySome=createArrayMethod(3),arrayEvery=createArrayMethod(4),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),arrayIncludes=createArrayIncludes(true),arrayIndexOf=createArrayIncludes(false),arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,arrayLastIndexOf=ArrayProto.lastIndexOf,arrayReduce=ArrayProto.reduce,arrayReduceRight=ArrayProto.reduceRight,arrayJoin=ArrayProto.join,arraySort=ArrayProto.sort,arraySlice=ArrayProto.slice,arrayToString=ArrayProto.toString,arrayToLocaleString=ArrayProto.toLocaleString,ITERATOR=wks("iterator"),TAG=wks("toStringTag"),TYPED_CONSTRUCTOR=uid("typed_constructor"),DEF_CONSTRUCTOR=uid("def_constructor"),ALL_CONSTRUCTORS=$typed.CONSTR,TYPED_ARRAY=$typed.TYPED,VIEW=$typed.VIEW,WRONG_LENGTH="Wrong length!";var $map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length)});var LITTLE_ENDIAN=fails(function(){return new Uint8Array(new Uint16Array([1]).buffer)[0]===1});var FORCED_SET=!!Uint8Array&&!!Uint8Array[PROTOTYPE].set&&fails(function(){new Uint8Array(1).set({})});var strictToLength=function strictToLength(it,SAME){if(it===undefined)throw TypeError(WRONG_LENGTH);var number=+it,length=toLength(it);if(SAME&&!same(number,length))throw RangeError(WRONG_LENGTH);return length};var toOffset=function toOffset(it,BYTES){var offset=toInteger(it);if(offset<0||offset%BYTES)throw RangeError("Wrong offset!");return offset};var validate=function validate(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+" is not a typed array!")};var allocate=function allocate(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C)){throw TypeError("It is not a typed array constructor!")}return new C(length)};var speciesFromList=function speciesFromList(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list)};var fromList=function fromList(C,list){var index=0,length=list.length,result=allocate(C,length);while(length>index){result[index]=list[index++]}return result};var addGetter=function addGetter(it,key,internal){dP(it,key,{get:function get(){return this._d[internal]}})};var $from=function from(source){var O=toObject(source),aLen=arguments.length,mapfn=aLen>1?arguments[1]:undefined,mapping=mapfn!==undefined,iterFn=getIterFn(O),i,length,values,result,step,iterator;if(iterFn!=undefined&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++){values.push(step.value);
}O=values}if(mapping&&aLen>2)mapfn=ctx(mapfn,arguments[2],2);for(i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++){result[i]=mapping?mapfn(O[i],i):O[i]}return result};var $of=function of(){var index=0,length=arguments.length,result=allocate(this,length);while(length>index){result[index]=arguments[index++]}return result};var TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1))});var $toLocaleString=function toLocaleString(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments)};var proto={copyWithin:function copyWithin(target,start){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:undefined)},every:function every(callbackfn){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},fill:function fill(value){return arrayFill.apply(validate(this),arguments)},filter:function filter(callbackfn){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined))},find:function find(predicate){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},findIndex:function findIndex(predicate){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},forEach:function forEach(callbackfn){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},indexOf:function indexOf(searchElement){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},includes:function includes(searchElement){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},join:function join(separator){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function lastIndexOf(searchElement){return arrayLastIndexOf.apply(validate(this),arguments)},map:function map(mapfn){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:undefined)},reduce:function reduce(callbackfn){return arrayReduce.apply(validate(this),arguments)},reduceRight:function reduceRight(callbackfn){return arrayReduceRight.apply(validate(this),arguments)},reverse:function reverse(){var that=this,length=validate(that).length,middle=Math.floor(length/2),index=0,value;while(index<middle){value=that[index];that[index++]=that[--length];that[length]=value}return that},some:function some(callbackfn){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},sort:function sort(comparefn){return arraySort.call(validate(this),comparefn)},subarray:function subarray(begin,end){var O=validate(this),length=O.length,$begin=toIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((end===undefined?length:toIndex(end,length))-$begin))}};var $slice=function slice(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end))};var $set=function set(arrayLike){validate(this);var offset=toOffset(arguments[1],1),length=this.length,src=toObject(arrayLike),len=toLength(src.length),index=0;if(len+offset>length)throw RangeError(WRONG_LENGTH);while(index<len){this[offset+index]=src[index++]}};var $iterators={entries:function entries(){return arrayEntries.call(validate(this))},keys:function keys(){return arrayKeys.call(validate(this))},values:function values(){return arrayValues.call(validate(this))}};var isTAIndex=function isTAIndex(target,key){return isObject(target)&&target[TYPED_ARRAY]&&(typeof key==="undefined"?"undefined":_typeof2(key))!="symbol"&&key in target&&String(+key)==String(key)};var $getDesc=function getOwnPropertyDescriptor(target,key){return isTAIndex(target,key=toPrimitive(key,true))?propertyDesc(2,target[key]):gOPD(target,key)};var $setDesc=function defineProperty(target,key,desc){if(isTAIndex(target,key=toPrimitive(key,true))&&isObject(desc)&&has(desc,"value")&&!has(desc,"get")&&!has(desc,"set")&&!desc.configurable&&(!has(desc,"writable")||desc.writable)&&(!has(desc,"enumerable")||desc.enumerable)){target[key]=desc.value;return target}else return dP(target,key,desc)};if(!ALL_CONSTRUCTORS){$GOPD.f=$getDesc;$DP.f=$setDesc}$export($export.S+$export.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc});if(fails(function(){arrayToString.call({})})){arrayToString=arrayToLocaleString=function toString(){return arrayJoin.call(this)}}var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators);hide($TypedArrayPrototype$,ITERATOR,$iterators.values);redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function constructor(){},toString:arrayToString,toLocaleString:$toLocaleString});addGetter($TypedArrayPrototype$,"buffer","b");addGetter($TypedArrayPrototype$,"byteOffset","o");addGetter($TypedArrayPrototype$,"byteLength","l");addGetter($TypedArrayPrototype$,"length","e");dP($TypedArrayPrototype$,TAG,{get:function get(){return this[TYPED_ARRAY]}});module.exports=function(KEY,BYTES,wrapper,CLAMPED){CLAMPED=!!CLAMPED;var NAME=KEY+(CLAMPED?"Clamped":"")+"Array",ISNT_UINT8=NAME!="Uint8Array",GETTER="get"+KEY,SETTER="set"+KEY,TypedArray=global[NAME],Base=TypedArray||{},TAC=TypedArray&&getPrototypeOf(TypedArray),FORCED=!TypedArray||!$typed.ABV,O={},TypedArrayPrototype=TypedArray&&TypedArray[PROTOTYPE];var getter=function getter(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN)};var setter=function setter(that,index,value){var data=that._d;if(CLAMPED)value=(value=Math.round(value))<0?0:value>255?255:value&255;data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN)};var addElement=function addElement(that,index){dP(that,index,{get:function get(){return getter(this,index)},set:function set(value){return setter(this,index,value)},enumerable:true})};if(FORCED){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,"_d");var index=0,offset=0,buffer,byteLength,length,klass;if(!isObject(data)){length=strictToLength(data,true);byteLength=length*BYTES;buffer=new $ArrayBuffer(byteLength)}else if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){buffer=data;offset=toOffset($offset,BYTES);var $len=data.byteLength;if($length===undefined){if($len%BYTES)throw RangeError(WRONG_LENGTH);byteLength=$len-offset;if(byteLength<0)throw RangeError(WRONG_LENGTH)}else{byteLength=toLength($length)*BYTES;if(byteLength+offset>$len)throw RangeError(WRONG_LENGTH)}length=byteLength/BYTES}else if(TYPED_ARRAY in data){return fromList(TypedArray,data)}else{return $from.call(TypedArray,data)}hide(that,"_d",{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});while(index<length){addElement(that,index++)}});TypedArrayPrototype=TypedArray[PROTOTYPE]=create($TypedArrayPrototype$);hide(TypedArrayPrototype,"constructor",TypedArray)}else if(!$iterDetect(function(iter){new TypedArray(null);new TypedArray(iter)},true)){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME);var klass;if(!isObject(data))return new Base(strictToLength(data,ISNT_UINT8));if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){return $length!==undefined?new Base(data,toOffset($offset,BYTES),$length):$offset!==undefined?new Base(data,toOffset($offset,BYTES)):new Base(data)}if(TYPED_ARRAY in data)return fromList(TypedArray,data);return $from.call(TypedArray,data)});arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){if(!(key in TypedArray))hide(TypedArray,key,Base[key])});TypedArray[PROTOTYPE]=TypedArrayPrototype;if(!LIBRARY)TypedArrayPrototype.constructor=TypedArray}var $nativeIterator=TypedArrayPrototype[ITERATOR],CORRECT_ITER_NAME=!!$nativeIterator&&($nativeIterator.name=="values"||$nativeIterator.name==undefined),$iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,true);hide(TypedArrayPrototype,TYPED_ARRAY,NAME);hide(TypedArrayPrototype,VIEW,true);hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray);if(CLAMPED?new TypedArray(1)[TAG]!=NAME:!(TAG in TypedArrayPrototype)){dP(TypedArrayPrototype,TAG,{get:function get(){return NAME}})}O[NAME]=TypedArray;$export($export.G+$export.W+$export.F*(TypedArray!=Base),O);$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES,from:$from,of:$of});if(!(BYTES_PER_ELEMENT in TypedArrayPrototype))hide(TypedArrayPrototype,BYTES_PER_ELEMENT,BYTES);$export($export.P,NAME,proto);setSpecies(NAME);$export($export.P+$export.F*FORCED_SET,NAME,{set:$set});$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators);$export($export.P+$export.F*(TypedArrayPrototype.toString!=arrayToString),NAME,{toString:arrayToString});$export($export.P+$export.F*fails(function(){new TypedArray(1).slice()}),NAME,{slice:$slice});$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString()})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2])})),NAME,{toLocaleString:$toLocaleString});Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator;if(!LIBRARY&&!CORRECT_ITER_NAME)hide(TypedArrayPrototype,ITERATOR,$iterator)}}else module.exports=function(){}});_typedArray("Int8",1,function(init){return function Int8Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});_typedArray("Uint8",1,function(init){return function Uint8Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});_typedArray("Uint8",1,function(init){return function Uint8ClampedArray(data,byteOffset,length){return init(this,data,byteOffset,length)}},true);_typedArray("Int16",2,function(init){return function Int16Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});_typedArray("Uint16",2,function(init){return function Uint16Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});_typedArray("Int32",4,function(init){return function Int32Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});_typedArray("Uint32",4,function(init){return function Uint32Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});_typedArray("Float32",4,function(init){return function Float32Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});_typedArray("Float64",8,function(init){return function Float64Array(data,byteOffset,length){return init(this,data,byteOffset,length)}});var rApply=(_global.Reflect||{}).apply;var fApply=Function.apply;_export(_export.S+_export.F*!_fails(function(){rApply(function(){})}),"Reflect",{apply:function apply(target,thisArgument,argumentsList){var T=_aFunction(target),L=_anObject(argumentsList);return rApply?rApply(T,thisArgument,L):fApply.call(T,thisArgument,L)}});var rConstruct=(_global.Reflect||{}).construct;var NEW_TARGET_BUG=_fails(function(){function F(){}return!(rConstruct(function(){},[],F)instanceof F)});var ARGS_BUG=!_fails(function(){rConstruct(function(){})});_export(_export.S+_export.F*(NEW_TARGET_BUG||ARGS_BUG),"Reflect",{construct:function construct(Target,args){_aFunction(Target);_anObject(args);var newTarget=arguments.length<3?Target:_aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];$args.push.apply($args,args);return new(_bind.apply(Target,$args))}var proto=newTarget.prototype,instance=_objectCreate(_isObject(proto)?proto:Object.prototype),result=Function.apply.call(Target,instance,args);return _isObject(result)?result:instance}});_export(_export.S+_export.F*_fails(function(){Reflect.defineProperty(_objectDp.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function defineProperty(target,propertyKey,attributes){_anObject(target);propertyKey=_toPrimitive(propertyKey,true);_anObject(attributes);try{_objectDp.f(target,propertyKey,attributes);return true}catch(e){return false}}});var gOPD$4=_objectGopd.f;_export(_export.S,"Reflect",{deleteProperty:function deleteProperty(target,propertyKey){var desc=gOPD$4(_anObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey]}});var Enumerate=function Enumerate(iterated){this._t=_anObject(iterated);this._i=0;var keys=this._k=[],key;for(key in iterated){keys.push(key)}};_iterCreate(Enumerate,"Object",function(){var that=this,keys=that._k,key;do{if(that._i>=keys.length)return{value:undefined,done:true}}while(!((key=keys[that._i++])in that._t));return{value:key,done:false}});_export(_export.S,"Reflect",{enumerate:function enumerate(target){return new Enumerate(target)}});function get$1(_x,_x2){var _arguments=arguments;var _again=true;_function:while(_again){var target=_x,propertyKey=_x2;_again=false;var receiver=_arguments.length<3?target:_arguments[2],desc,proto;if(_anObject(target)===receiver)return target[propertyKey];if(desc=_objectGopd.f(target,propertyKey))return _has(desc,"value")?desc.value:desc.get!==undefined?desc.get.call(receiver):undefined;if(_isObject(proto=_objectGpo(target))){_arguments=[_x=proto,_x2=propertyKey,receiver];_again=true;receiver=desc=proto=undefined;continue _function}}}_export(_export.S,"Reflect",{get:get$1});_export(_export.S,"Reflect",{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return _objectGopd.f(_anObject(target),propertyKey)}});_export(_export.S,"Reflect",{getPrototypeOf:function getPrototypeOf(target){return _objectGpo(_anObject(target))}});_export(_export.S,"Reflect",{has:function has(target,propertyKey){return propertyKey in target}});var $isExtensible=Object.isExtensible;_export(_export.S,"Reflect",{isExtensible:function isExtensible(target){_anObject(target);return $isExtensible?$isExtensible(target):true}});var Reflect$1=_global.Reflect;var _ownKeys=Reflect$1&&Reflect$1.ownKeys||function ownKeys(it){var keys=_objectGopn.f(_anObject(it)),getSymbols=_objectGops.f;return getSymbols?keys.concat(getSymbols(it)):keys};_export(_export.S,"Reflect",{ownKeys:_ownKeys});var $preventExtensions=Object.preventExtensions;_export(_export.S,"Reflect",{preventExtensions:function preventExtensions(target){_anObject(target);try{if($preventExtensions)$preventExtensions(target);return true}catch(e){return false}}});function set(_x,_x2,_x3){var _arguments=arguments;var _again=true;_function:while(_again){var target=_x,propertyKey=_x2,V=_x3;_again=false;var receiver=_arguments.length<4?target:_arguments[3],ownDesc=_objectGopd.f(_anObject(target),propertyKey),existingDescriptor,proto;if(!ownDesc){if(_isObject(proto=_objectGpo(target))){_arguments=[_x=proto,_x2=propertyKey,_x3=V,receiver];_again=true;receiver=ownDesc=existingDescriptor=proto=undefined;continue _function}ownDesc=_propertyDesc(0)}if(_has(ownDesc,"value")){if(ownDesc.writable===false||!_isObject(receiver))return false;existingDescriptor=_objectGopd.f(receiver,propertyKey)||_propertyDesc(0);existingDescriptor.value=V;_objectDp.f(receiver,propertyKey,existingDescriptor);return true}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true)}}_export(_export.S,"Reflect",{set:set});if(_setProto)_export(_export.S,"Reflect",{setPrototypeOf:function setPrototypeOf(target,proto){_setProto.check(target,proto);try{_setProto.set(target,proto);return true}catch(e){return false}}});var $includes=_arrayIncludes(true);_export(_export.P,"Array",{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined)}});_addToUnscopables("includes");var $at$2=_stringAt(true);_export(_export.P,"String",{at:function at(pos){return $at$2(this,pos)}});var _stringPad=function _stringPad(that,maxLength,fillString,left){var S=String(_defined(that)),stringLength=S.length,fillStr=fillString===undefined?" ":String(fillString),intMaxLength=_toLength(maxLength);if(intMaxLength<=stringLength||fillStr=="")return S;var fillLen=intMaxLength-stringLength,stringFiller=_stringRepeat.call(fillStr,Math.ceil(fillLen/fillStr.length));if(stringFiller.length>fillLen)stringFiller=stringFiller.slice(0,fillLen);return left?stringFiller+S:S+stringFiller};_export(_export.P,"String",{padStart:function padStart(maxLength){return _stringPad(this,maxLength,arguments.length>1?arguments[1]:undefined,true)}});_export(_export.P,"String",{padEnd:function padEnd(maxLength){return _stringPad(this,maxLength,arguments.length>1?arguments[1]:undefined,false)}});_stringTrim("trimLeft",function($trim){return function trimLeft(){return $trim(this,1)}},"trimStart");_stringTrim("trimRight",function($trim){return function trimRight(){return $trim(this,2)}},"trimEnd");var RegExpProto=RegExp.prototype;var $RegExpStringIterator=function $RegExpStringIterator(regexp,string){this._r=regexp;this._s=string};_iterCreate($RegExpStringIterator,"RegExp String",function next(){var match=this._r.exec(this._s);return{value:match,done:match===null}});_export(_export.P,"String",{matchAll:function matchAll(regexp){_defined(this);if(!_isRegexp(regexp))throw TypeError(regexp+" is not a regexp!");var S=String(this),flags="flags"in RegExpProto?String(regexp.flags):_flags.call(regexp),rx=new RegExp(regexp.source,~flags.indexOf("g")?flags:"g"+flags);rx.lastIndex=_toLength(regexp.lastIndex);return new $RegExpStringIterator(rx,S)}});_wksDefine("asyncIterator");_wksDefine("observable");_export(_export.S,"Object",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(object){var O=_toIobject(object),getDesc=_objectGopd.f,keys=_ownKeys(O),result={},i=0,key;while(keys.length>i){_createProperty(result,key=keys[i++],getDesc(O,key))}return result}});var isEnum$1=_objectPie.f;var _objectToArray=function _objectToArray(isEntries){return function(it){var O=_toIobject(it),keys=_objectKeys(O),length=keys.length,i=0,result=[],key;while(length>i){if(isEnum$1.call(O,key=keys[i++])){result.push(isEntries?[key,O[key]]:O[key])}}return result}};var $values=_objectToArray(false);_export(_export.S,"Object",{values:function values(it){return $values(it)}});var $entries=_objectToArray(true);_export(_export.S,"Object",{entries:function entries(it){return $entries(it)}});var _objectForcedPam=_library||!_fails(function(){var K=Math.random();__defineSetter__.call(null,K,function(){});delete _global[K]});_descriptors&&_export(_export.P+_objectForcedPam,"Object",{__defineGetter__:function __defineGetter__(P,getter){_objectDp.f(_toObject(this),P,{get:_aFunction(getter),enumerable:true,configurable:true})}});_descriptors&&_export(_export.P+_objectForcedPam,"Object",{__defineSetter__:function __defineSetter__(P,setter){_objectDp.f(_toObject(this),P,{set:_aFunction(setter),enumerable:true,configurable:true})}});var getOwnPropertyDescriptor=_objectGopd.f;_descriptors&&_export(_export.P+_objectForcedPam,"Object",{__lookupGetter__:function __lookupGetter__(P){var O=_toObject(this),K=_toPrimitive(P,true),D;do{if(D=getOwnPropertyDescriptor(O,K))return D.get}while(O=_objectGpo(O))}});var getOwnPropertyDescriptor$1=_objectGopd.f;_descriptors&&_export(_export.P+_objectForcedPam,"Object",{__lookupSetter__:function __lookupSetter__(P){var O=_toObject(this),K=_toPrimitive(P,true),D;do{if(D=getOwnPropertyDescriptor$1(O,K))return D.set}while(O=_objectGpo(O))}});var _arrayFromIterable=function _arrayFromIterable(iter,ITERATOR){var result=[];_forOf(iter,false,result.push,result,ITERATOR);return result};var _collectionToJson=function _collectionToJson(NAME){return function toJSON(){if(_classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return _arrayFromIterable(this)}};_export(_export.P+_export.R,"Map",{toJSON:_collectionToJson("Map")});_export(_export.P+_export.R,"Set",{toJSON:_collectionToJson("Set")});_export(_export.S,"System",{global:_global});_export(_export.S,"Error",{isError:function isError(it){return _cof(it)==="Error"}});_export(_export.S,"Math",{iaddh:function iaddh(x0,x1,y0,y1){var $x0=x0>>>0,$x1=x1>>>0,$y0=y0>>>0;return $x1+(y1>>>0)+(($x0&$y0|($x0|$y0)&~($x0+$y0>>>0))>>>31)|0}});_export(_export.S,"Math",{isubh:function isubh(x0,x1,y0,y1){var $x0=x0>>>0,$x1=x1>>>0,$y0=y0>>>0;return $x1-(y1>>>0)-((~$x0&$y0|~($x0^$y0)&$x0-$y0>>>0)>>>31)|0}});_export(_export.S,"Math",{imulh:function imulh(u,v){var UINT16=65535,$u=+u,$v=+v,u0=$u&UINT16,v0=$v&UINT16,u1=$u>>16,v1=$v>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>16)+((u0*v1>>>0)+(t&UINT16)>>16)}});_export(_export.S,"Math",{umulh:function umulh(u,v){var UINT16=65535,$u=+u,$v=+v,u0=$u&UINT16,v0=$v&UINT16,u1=$u>>>16,v1=$v>>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>>16)+((u0*v1>>>0)+(t&UINT16)>>>16)}});var shared$1=_shared("metadata");var store$1=shared$1.store||(shared$1.store=new es6_weakMap);var getOrCreateMetadataMap=function getOrCreateMetadataMap(target,targetKey,create){var targetMetadata=store$1.get(target);if(!targetMetadata){if(!create)return undefined;store$1.set(target,targetMetadata=new es6_map)}var keyMetadata=targetMetadata.get(targetKey);if(!keyMetadata){if(!create)return undefined;targetMetadata.set(targetKey,keyMetadata=new es6_map)}return keyMetadata};var ordinaryHasOwnMetadata=function ordinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?false:metadataMap.has(MetadataKey)};var ordinaryGetOwnMetadata=function ordinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?undefined:metadataMap.get(MetadataKey)};var ordinaryDefineOwnMetadata$1=function ordinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){getOrCreateMetadataMap(O,P,true).set(MetadataKey,MetadataValue)};var ordinaryOwnMetadataKeys=function ordinaryOwnMetadataKeys(target,targetKey){var metadataMap=getOrCreateMetadataMap(target,targetKey,false),keys=[];if(metadataMap)metadataMap.forEach(function(_,key){keys.push(key)});return keys};var toMetaKey$1=function toMetaKey(it){return it===undefined||(typeof it==="undefined"?"undefined":_typeof2(it))=="symbol"?it:String(it)};var exp$3=function exp(O){_export(_export.S,"Reflect",O)};var _metadata={store:store$1,map:getOrCreateMetadataMap,has:ordinaryHasOwnMetadata,get:ordinaryGetOwnMetadata,set:ordinaryDefineOwnMetadata$1,keys:ordinaryOwnMetadataKeys,key:toMetaKey$1,exp:exp$3};var toMetaKey=_metadata.key;var ordinaryDefineOwnMetadata=_metadata.set;_metadata.exp({defineMetadata:function defineMetadata(metadataKey,metadataValue,target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,_anObject(target),toMetaKey(targetKey))}});var toMetaKey$2=_metadata.key;var getOrCreateMetadataMap$1=_metadata.map;var store$2=_metadata.store;_metadata.exp({deleteMetadata:function deleteMetadata(metadataKey,target){var targetKey=arguments.length<3?undefined:toMetaKey$2(arguments[2]),metadataMap=getOrCreateMetadataMap$1(_anObject(target),targetKey,false);if(metadataMap===undefined||!metadataMap["delete"](metadataKey))return false;if(metadataMap.size)return true;var targetMetadata=store$2.get(target);targetMetadata["delete"](targetKey);return!!targetMetadata.size||store$2["delete"](target)}});var ordinaryHasOwnMetadata$1=_metadata.has;var ordinaryGetOwnMetadata$1=_metadata.get;var toMetaKey$3=_metadata.key;var ordinaryGetMetadata=function ordinaryGetMetadata(_x,_x2,_x3){var _again=true;_function:while(_again){var MetadataKey=_x,O=_x2,P=_x3;_again=false;var hasOwn=ordinaryHasOwnMetadata$1(MetadataKey,O,P);if(hasOwn)return ordinaryGetOwnMetadata$1(MetadataKey,O,P);var parent=_objectGpo(O);if(parent!==null){_x=MetadataKey;_x2=parent;_x3=P;_again=true;hasOwn=parent=undefined;continue _function}else{return undefined}}};_metadata.exp({getMetadata:function getMetadata(metadataKey,target){return ordinaryGetMetadata(metadataKey,_anObject(target),arguments.length<3?undefined:toMetaKey$3(arguments[2]))}});var ordinaryOwnMetadataKeys$1=_metadata.keys;var toMetaKey$4=_metadata.key;var ordinaryMetadataKeys=function ordinaryMetadataKeys(O,P){var oKeys=ordinaryOwnMetadataKeys$1(O,P),parent=_objectGpo(O);if(parent===null)return oKeys;var pKeys=ordinaryMetadataKeys(parent,P);return pKeys.length?oKeys.length?_arrayFromIterable(new es6_set(oKeys.concat(pKeys))):pKeys:oKeys};_metadata.exp({getMetadataKeys:function getMetadataKeys(target){return ordinaryMetadataKeys(_anObject(target),arguments.length<2?undefined:toMetaKey$4(arguments[1]))}});var ordinaryGetOwnMetadata$2=_metadata.get;var toMetaKey$5=_metadata.key;_metadata.exp({getOwnMetadata:function getOwnMetadata(metadataKey,target){return ordinaryGetOwnMetadata$2(metadataKey,_anObject(target),arguments.length<3?undefined:toMetaKey$5(arguments[2]))}});var ordinaryOwnMetadataKeys$2=_metadata.keys;var toMetaKey$6=_metadata.key;_metadata.exp({getOwnMetadataKeys:function getOwnMetadataKeys(target){return ordinaryOwnMetadataKeys$2(_anObject(target),arguments.length<2?undefined:toMetaKey$6(arguments[1]))}});var ordinaryHasOwnMetadata$2=_metadata.has;var toMetaKey$7=_metadata.key;var ordinaryHasMetadata=function ordinaryHasMetadata(_x,_x2,_x3){var _again=true;_function:while(_again){var MetadataKey=_x,O=_x2,P=_x3;_again=false;var hasOwn=ordinaryHasOwnMetadata$2(MetadataKey,O,P);if(hasOwn)return true;var parent=_objectGpo(O);if(parent!==null){_x=MetadataKey;_x2=parent;_x3=P;_again=true;hasOwn=parent=undefined;continue _function}else{return false}}};_metadata.exp({hasMetadata:function hasMetadata(metadataKey,target){return ordinaryHasMetadata(metadataKey,_anObject(target),arguments.length<3?undefined:toMetaKey$7(arguments[2]))}});var ordinaryHasOwnMetadata$3=_metadata.has;var toMetaKey$8=_metadata.key;_metadata.exp({hasOwnMetadata:function hasOwnMetadata(metadataKey,target){return ordinaryHasOwnMetadata$3(metadataKey,_anObject(target),arguments.length<3?undefined:toMetaKey$8(arguments[2]))}});var toMetaKey$9=_metadata.key;var ordinaryDefineOwnMetadata$2=_metadata.set;_metadata.exp({metadata:function metadata(metadataKey,metadataValue){return function decorator(target,targetKey){ordinaryDefineOwnMetadata$2(metadataKey,metadataValue,(targetKey!==undefined?_anObject:_aFunction)(target),toMetaKey$9(targetKey))}}});var microtask$1=_microtask();var process$4=_global.process;var isNode$2=_cof(process$4)=="process";_export(_export.G,{asap:function asap(fn){var domain=isNode$2&&process$4.domain;microtask$1(domain?domain.bind(fn):fn)}});var microtask$2=_microtask();var OBSERVABLE=_wks("observable");var RETURN=_forOf.RETURN;var getMethod=function getMethod(fn){return fn==null?undefined:_aFunction(fn)};var cleanupSubscription=function cleanupSubscription(subscription){var cleanup=subscription._c;if(cleanup){subscription._c=undefined;cleanup()}};var subscriptionClosed=function subscriptionClosed(subscription){return subscription._o===undefined};var closeSubscription=function closeSubscription(subscription){if(!subscriptionClosed(subscription)){subscription._o=undefined;cleanupSubscription(subscription)}};var Subscription=function Subscription(observer,subscriber){_anObject(observer);this._c=undefined;this._o=observer;observer=new SubscriptionObserver(this);try{var cleanup=subscriber(observer),subscription=cleanup;if(cleanup!=null){if(typeof cleanup.unsubscribe==="function")cleanup=function cleanup(){subscription.unsubscribe()};else _aFunction(cleanup);this._c=cleanup}}catch(e){observer.error(e);return}if(subscriptionClosed(this))cleanupSubscription(this)};Subscription.prototype=_redefineAll({},{unsubscribe:function unsubscribe(){closeSubscription(this)}});var SubscriptionObserver=function SubscriptionObserver(subscription){this._s=subscription};SubscriptionObserver.prototype=_redefineAll({},{next:function next(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;try{var m=getMethod(observer.next);if(m)return m.call(observer,value)}catch(e){try{closeSubscription(subscription)}finally{throw e}}}},error:function error(value){var subscription=this._s;if(subscriptionClosed(subscription))throw value;var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.error);if(!m)throw value;value=m.call(observer,value)}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}cleanupSubscription(subscription);return value},complete:function complete(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.complete);value=m?m.call(observer,value):undefined}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}cleanupSubscription(subscription);return value}}});var $Observable=function Observable(subscriber){_anInstance(this,$Observable,"Observable","_f")._f=_aFunction(subscriber)};_redefineAll($Observable.prototype,{subscribe:function subscribe(observer){return new Subscription(observer,this._f)},forEach:function forEach(fn){var that=this;return new(_core.Promise||_global.Promise)(function(resolve,reject){_aFunction(fn);var subscription=that.subscribe({next:function next(value){try{return fn(value)}catch(e){reject(e);subscription.unsubscribe()}},error:reject,complete:resolve})})}});_redefineAll($Observable,{from:function from(x){var C=typeof this==="function"?this:$Observable;var method=getMethod(_anObject(x)[OBSERVABLE]);if(method){var observable=_anObject(method.call(x));return observable.constructor===C?observable:new C(function(observer){return observable.subscribe(observer)})}return new C(function(observer){var done=false;microtask$2(function(){if(!done){try{if(_forOf(x,false,function(it){observer.next(it);if(done)return RETURN})===RETURN)return}catch(e){if(done)throw e;observer.error(e);return}observer.complete()}});return function(){done=true}})},of:function of(){for(var i=0,l=arguments.length,items=Array(l);i<l;){items[i]=arguments[i++]}return new(typeof this==="function"?this:$Observable)(function(observer){var done=false;microtask$2(function(){if(!done){for(var i=0;i<items.length;++i){observer.next(items[i]);if(done)return}observer.complete()}});return function(){done=true}})}});_hide($Observable.prototype,OBSERVABLE,function(){return this});_export(_export.G,{Observable:$Observable});_setSpecies("Observable");var _path=_global;var _partial=function _partial(){var fn=_aFunction(this),length=arguments.length,pargs=Array(length),i=0,_=_path._,holder=false;while(length>i){if((pargs[i]=arguments[i++])===_)holder=true}return function(){var that=this,aLen=arguments.length,j=0,k=0,args;if(!holder&&!aLen)return _invoke(fn,pargs,that);args=pargs.slice();if(holder)for(;length>j;j++){if(args[j]===_)args[j]=arguments[k++]}while(aLen>k){args.push(arguments[k++])}return _invoke(fn,args,that)}};var navigator$1=_global.navigator;var MSIE=!!navigator$1&&/MSIE .\./.test(navigator$1.userAgent);var wrap$1=function wrap(set){return MSIE?function(fn,time){return set(_invoke(_partial,[].slice.call(arguments,2),typeof fn=="function"?fn:Function(fn)),time)}:set};_export(_export.G+_export.B+_export.F*MSIE,{setTimeout:wrap$1(_global.setTimeout),setInterval:wrap$1(_global.setInterval)});_export(_export.G+_export.B,{setImmediate:_task.set,clearImmediate:_task.clear});var ITERATOR$4=_wks("iterator");var TO_STRING_TAG=_wks("toStringTag");var ArrayValues=_iterators.Array;for(var collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i$3=0;i$3<5;i$3++){var NAME$1=collections[i$3],Collection=_global[NAME$1],proto$3=Collection&&Collection.prototype,key$1;if(proto$3){if(!proto$3[ITERATOR$4])_hide(proto$3,ITERATOR$4,ArrayValues);if(!proto$3[TO_STRING_TAG])_hide(proto$3,TO_STRING_TAG,NAME$1);_iterators[NAME$1]=ArrayValues;for(key$1 in es6_array_iterator){if(!proto$3[key$1])_redefine(proto$3,key$1,es6_array_iterator[key$1],true)}}}var ITERATOR$5=_wks("iterator");var core_isIterable=_core.isIterable=function(it){var O=Object(it);return O[ITERATOR$5]!==undefined||"@@iterator"in O||_iterators.hasOwnProperty(_classof(O))};var createDictMethod=function createDictMethod(TYPE){
var IS_MAP=TYPE==1,IS_EVERY=TYPE==4;return function(object,callbackfn,that){var f=_ctx(callbackfn,that,3),O=_toIobject(object),result=IS_MAP||TYPE==7||TYPE==2?new(typeof this=="function"?this:Dict):undefined,key,val,res;for(key in O){if(_has(O,key)){val=O[key];res=f(val,key,object);if(TYPE){if(IS_MAP)result[key]=res;else if(res)switch(TYPE){case 2:result[key]=val;break;case 3:return true;case 5:return val;case 6:return key;case 7:result[res[0]]=res[1]}else if(IS_EVERY)return false}}}return TYPE==3||IS_EVERY?IS_EVERY:result}};var findKey=createDictMethod(6);var createDictIter=function createDictIter(kind){return function(it){return new DictIterator(it,kind)}};var DictIterator=function DictIterator(iterated,kind){this._t=_toIobject(iterated);this._a=_objectKeys(iterated);this._i=0;this._k=kind};_iterCreate(DictIterator,"Dict",function(){var that=this,O=that._t,keys=that._a,kind=that._k,key;do{if(that._i>=keys.length){that._t=undefined;return _iterStep(1)}}while(!_has(O,key=keys[that._i++]));if(kind=="keys")return _iterStep(0,key);if(kind=="values")return _iterStep(0,O[key]);return _iterStep(0,[key,O[key]])});function Dict(iterable){var dict=_objectCreate(null);if(iterable!=undefined){if(core_isIterable(iterable)){_forOf(iterable,true,function(key,value){dict[key]=value})}else _objectAssign(dict,iterable)}return dict}Dict.prototype=null;function reduce(object,mapfn,init){_aFunction(mapfn);var O=_toIobject(object),keys=_objectKeys(O),length=keys.length,i=0,memo,key;if(arguments.length<3){if(!length)throw TypeError("Reduce of empty object with no initial value");memo=O[keys[i++]]}else memo=Object(init);while(length>i){if(_has(O,key=keys[i++])){memo=mapfn(memo,O[key],key,object)}}return memo}function includes(object,el){return(el==el?_keyof(object,el):findKey(object,function(it){return it!=it}))!==undefined}function get$2(object,key){if(_has(object,key))return object[key]}function set$1(object,key,value){if(_descriptors&&key in Object)_objectDp.f(object,key,_propertyDesc(0,value));else object[key]=value;return object}function isDict(it){return _isObject(it)&&_objectGpo(it)===Dict.prototype}_export(_export.G+_export.F,{Dict:Dict});_export(_export.S,"Dict",{keys:createDictIter("keys"),values:createDictIter("values"),entries:createDictIter("entries"),forEach:createDictMethod(0),map:createDictMethod(1),filter:createDictMethod(2),some:createDictMethod(3),every:createDictMethod(4),find:createDictMethod(5),findKey:findKey,mapPairs:createDictMethod(7),reduce:reduce,keyOf:_keyof,includes:includes,has:_has,get:get$2,set:set$1,isDict:isDict});var core_getIterator=_core.getIterator=function(it){var iterFn=core_getIteratorMethod(it);if(typeof iterFn!="function")throw TypeError(it+" is not iterable!");return _anObject(iterFn.call(it))};_export(_export.G+_export.F,{delay:function delay(time){return new(_core.Promise||_global.Promise)(function(resolve){setTimeout(_partial.call(resolve,true),time)})}});_core._=_path._=_path._||{};_export(_export.P+_export.F,"Function",{part:_partial});_export(_export.S+_export.F,"Object",{isObject:_isObject});_export(_export.S+_export.F,"Object",{classof:_classof});var _objectDefine=function define(target,mixin){var keys=_ownKeys(_toIobject(mixin)),length=keys.length,i=0,key;while(length>i){_objectDp.f(target,key=keys[i++],_objectGopd.f(mixin,key))}return target};_export(_export.S+_export.F,"Object",{define:_objectDefine});_export(_export.S+_export.F,"Object",{make:function make(proto,mixin){return _objectDefine(_objectCreate(proto),mixin)}});_iterDefine(Number,"Number",function(iterated){this._l=+iterated;this._i=0},function(){var i=this._i++,done=!(i<this._l);return{done:done,value:done?undefined:i}});var _replacer=function _replacer(regExp,replace){var replacer=replace===Object(replace)?function(part){return replace[part]}:replace;return function(it){return String(it).replace(regExp,replacer)}};var $re=_replacer(/[\\^$*+?.()|[\]{}]/g,"\\$&");_export(_export.S,"RegExp",{escape:function escape(it){return $re(it)}});var $re$1=_replacer(/[&<>"']/g,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"});_export(_export.P+_export.F,"String",{escapeHTML:function escapeHTML(){return $re$1(this)}});var $re$2=_replacer(/&(?:amp|lt|gt|quot|apos);/g,{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"});_export(_export.P+_export.F,"String",{unescapeHTML:function unescapeHTML(){return $re$2(this)}});var ssplayer=createCommonjsModule$$1(function(module,exports){(function webpackUniversalModuleDefinition(root,factory){module.exports=factory()})(commonjsGlobal$$1,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){var _Array$from=__webpack_require__(1)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];var _interopRequireWildcard=__webpack_require__(39)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _componentsActivatable=__webpack_require__(40);var _componentsActivatable2=_interopRequireDefault(_componentsActivatable);var _componentsBuffer=__webpack_require__(119);var _componentsBuffer2=_interopRequireDefault(_componentsBuffer);var _componentsButton=__webpack_require__(120);var _componentsButton2=_interopRequireDefault(_componentsButton);var _componentsCarousel=__webpack_require__(127);var _componentsCarousel2=_interopRequireDefault(_componentsCarousel);var _componentsDiscreteProgress=__webpack_require__(154);var _componentsDiscreteProgress2=_interopRequireDefault(_componentsDiscreteProgress);var _componentsPresentationPreviewThumbnail=__webpack_require__(161);var _componentsPresentationPreviewThumbnail2=_interopRequireDefault(_componentsPresentationPreviewThumbnail);var _componentsEndcard=__webpack_require__(162);var _componentsEndcard2=_interopRequireDefault(_componentsEndcard);var _componentsFocusable=__webpack_require__(165);var _componentsFocusable2=_interopRequireDefault(_componentsFocusable);var _componentsHorizontalSlider=__webpack_require__(166);var _componentsHorizontalSlider2=_interopRequireDefault(_componentsHorizontalSlider);var _componentsKeyboard=__webpack_require__(168);var _componentsKeyboard2=_interopRequireDefault(_componentsKeyboard);var _componentsLoader=__webpack_require__(169);var _componentsLoader2=_interopRequireDefault(_componentsLoader);var _componentsModal=__webpack_require__(170);var _componentsModal2=_interopRequireDefault(_componentsModal);var _componentsPagination=__webpack_require__(171);var _componentsPagination2=_interopRequireDefault(_componentsPagination);var _componentsPresentationPlayer=__webpack_require__(173);var _componentsPresentationPlayer2=_interopRequireDefault(_componentsPresentationPlayer);var _componentsPresentationSidepanel=__webpack_require__(175);var _componentsPresentationSidepanel2=_interopRequireDefault(_componentsPresentationSidepanel);var _componentsRumTracking=__webpack_require__(176);var _componentsRumTracking2=_interopRequireDefault(_componentsRumTracking);var _componentsSelectable=__webpack_require__(179);var _componentsSelectable2=_interopRequireDefault(_componentsSelectable);var _componentsShareButton=__webpack_require__(180);var _componentsShareButton2=_interopRequireDefault(_componentsShareButton);var _componentsTimeDisplay=__webpack_require__(183);var _componentsTimeDisplay2=_interopRequireDefault(_componentsTimeDisplay);var _componentsToolbar=__webpack_require__(185);var _componentsToolbar2=_interopRequireDefault(_componentsToolbar);var _componentsVerticalSlider=__webpack_require__(187);var _componentsVerticalSlider2=_interopRequireDefault(_componentsVerticalSlider);var _componentsVideoPlayer=__webpack_require__(188);var _componentsVideoPlayer2=_interopRequireDefault(_componentsVideoPlayer);var _componentsVolumeSwitch=__webpack_require__(190);var _componentsVolumeSwitch2=_interopRequireDefault(_componentsVolumeSwitch);var _behaviorsEndcard=__webpack_require__(191);var _behaviorsEndcard2=_interopRequireDefault(_behaviorsEndcard);var _behaviorsFullscreen=__webpack_require__(192);var _behaviorsFullscreen2=_interopRequireDefault(_behaviorsFullscreen);var _behaviorsModalManager=__webpack_require__(193);var _behaviorsModalManager2=_interopRequireDefault(_behaviorsModalManager);var _behaviorsPresentation=__webpack_require__(194);var _behaviorsPresentation2=_interopRequireDefault(_behaviorsPresentation);var _behaviorsShareLink=__webpack_require__(196);var _behaviorsShareLink2=_interopRequireDefault(_behaviorsShareLink);var _behaviorsShareModal=__webpack_require__(197);var _behaviorsShareModal2=_interopRequireDefault(_behaviorsShareModal);var _behaviorsVideojsBuffer=__webpack_require__(198);var _behaviorsVideojsBuffer2=_interopRequireDefault(_behaviorsVideojsBuffer);var _behaviorsVideojsMetrics=__webpack_require__(199);var _behaviorsVideojsMetrics2=_interopRequireDefault(_behaviorsVideojsMetrics);var _behaviorsVideojsPlayback=__webpack_require__(201);var _behaviorsVideojsPlayback2=_interopRequireDefault(_behaviorsVideojsPlayback);var _behaviorsVideojsTime=__webpack_require__(202);var _behaviorsVideojsTime2=_interopRequireDefault(_behaviorsVideojsTime);var _behaviorsVideojsTracking=__webpack_require__(203);var _behaviorsVideojsTracking2=_interopRequireDefault(_behaviorsVideojsTracking);var _behaviorsVideojsUserActivity=__webpack_require__(207);var _behaviorsVideojsUserActivity2=_interopRequireDefault(_behaviorsVideojsUserActivity);var _behaviorsVideojsVolume=__webpack_require__(208);var _behaviorsVideojsVolume2=_interopRequireDefault(_behaviorsVideojsVolume);var _behaviorsVideojsWaiting=__webpack_require__(209);var _behaviorsVideojsWaiting2=_interopRequireDefault(_behaviorsVideojsWaiting);var _playersVideo=__webpack_require__(210);var _playersVideo2=_interopRequireDefault(_playersVideo);var _playersPresentation=__webpack_require__(419);var _playersPresentation2=_interopRequireDefault(_playersPresentation);var _playersDocument=__webpack_require__(438);var _playersDocument2=_interopRequireDefault(_playersDocument);var _helpersTrackingUtil=__webpack_require__(450);var tracking=_interopRequireWildcard(_helpersTrackingUtil);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersArrayFromShim=__webpack_require__(451);var _helpersArrayFromShim2=_interopRequireDefault(_helpersArrayFromShim);if(!_Array$from){Array.from=_helpersArrayFromShim2["default"]}exports["default"]={ActivatableComponent:_componentsActivatable2["default"],BufferComponent:_componentsBuffer2["default"],ButtonComponent:_componentsButton2["default"],CarouselComponent:_componentsCarousel2["default"],DiscreteProgressComponent:_componentsDiscreteProgress2["default"],PreviewThumbnailComponent:_componentsPresentationPreviewThumbnail2["default"],EndcardComponent:_componentsEndcard2["default"],FocusableComponent:_componentsFocusable2["default"],HorizontalSlider:_componentsHorizontalSlider2["default"],KeyboardComponent:_componentsKeyboard2["default"],LoaderComponent:_componentsLoader2["default"],ModalComponent:_componentsModal2["default"],PaginationComponent:_componentsPagination2["default"],PresentationPlayerComponent:_componentsPresentationPlayer2["default"],PresentationSidepanelComponent:_componentsPresentationSidepanel2["default"],RumTrackingComponent:_componentsRumTracking2["default"],SelectableComponent:_componentsSelectable2["default"],ShareButtonComponent:_componentsShareButton2["default"],TimeDisplayComponent:_componentsTimeDisplay2["default"],ToolbarComponent:_componentsToolbar2["default"],VerticalSliderComponent:_componentsVerticalSlider2["default"],VideoPlayerComponent:_componentsVideoPlayer2["default"],VolumeSwitchComponent:_componentsVolumeSwitch2["default"],EndcardBehavior:_behaviorsEndcard2["default"],FullscreenBehavior:_behaviorsFullscreen2["default"],ModalManagerBehavior:_behaviorsModalManager2["default"],PresentationBehavior:_behaviorsPresentation2["default"],ShareLinkBehavior:_behaviorsShareLink2["default"],ShareModalBehavior:_behaviorsShareModal2["default"],VideojsBufferBehavior:_behaviorsVideojsBuffer2["default"],VideojsMetricsBehavior:_behaviorsVideojsMetrics2["default"],VideojsPlaybackBehavior:_behaviorsVideojsPlayback2["default"],VideojsTimeBehavior:_behaviorsVideojsTime2["default"],VideojsTrackingBehavior:_behaviorsVideojsTracking2["default"],VideojsUserActivityBehavior:_behaviorsVideojsUserActivity2["default"],VideojsVolumeBehavior:_behaviorsVideojsVolume2["default"],VideojsWaitingBehavior:_behaviorsVideojsWaiting2["default"],initDocument:_playersDocument2["default"],initPresentation:_playersPresentation2["default"],initVideo:_playersVideo2["default"].create.bind(_playersVideo2["default"]),VideoPlayer:_playersVideo2["default"],EventListener:_coreEventListener2["default"],tracking:tracking};module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(2),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(3);__webpack_require__(27);module.exports=__webpack_require__(11).Array.from},function(module,exports,__webpack_require__){var $at=__webpack_require__(4)(true);__webpack_require__(7)(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(5),defined=__webpack_require__(6);module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},function(module,exports,__webpack_require__){var LIBRARY=__webpack_require__(8),$export=__webpack_require__(9),redefine=__webpack_require__(14),hide=__webpack_require__(15),has=__webpack_require__(20),Iterators=__webpack_require__(21),$iterCreate=__webpack_require__(22),setToStringTag=__webpack_require__(23),getProto=__webpack_require__(16).getProto,ITERATOR=__webpack_require__(24)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values";var returnThis=function returnThis(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function getMethod(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),methods,key;if($native){var IteratorPrototype=getProto($default.call(new Base));setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&has(proto,FF_ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis);if(DEF_VALUES&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:!DEF_VALUES?$default:getMethod("entries")};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},function(module,exports){module.exports=true},function(module,exports,__webpack_require__){var global=__webpack_require__(10),core=__webpack_require__(11),ctx=__webpack_require__(12),PROTOTYPE="prototype";var $export=function $export(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE],key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&key in target;if(own&&key in exports)continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!="function"?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function F(param){return this instanceof C?new C(param):C(param)};F[PROTOTYPE]=C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(IS_PROTO)(exports[PROTOTYPE]||(exports[PROTOTYPE]={}))[key]=out}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;module.exports=$export},function(module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},function(module,exports){var core=module.exports={version:"1.2.6"};if(typeof __e=="number")__e=core},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(13);module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(15)},function(module,exports,__webpack_require__){var $=__webpack_require__(16),createDesc=__webpack_require__(17);module.exports=__webpack_require__(18)?function(object,key,value){return $.setDesc(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},function(module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(19)(function(){return Object.defineProperty({},"a",{get:function get(){return 7}}).a!=7})},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var $=__webpack_require__(16),descriptor=__webpack_require__(17),setToStringTag=__webpack_require__(23),IteratorPrototype={};__webpack_require__(15)(IteratorPrototype,__webpack_require__(24)("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=$.create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var def=__webpack_require__(16).setDesc,has=__webpack_require__(20),TAG=__webpack_require__(24)("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},function(module,exports,__webpack_require__){var store=__webpack_require__(25)("wks"),uid=__webpack_require__(26),_Symbol3=__webpack_require__(10).Symbol;module.exports=function(name){return store[name]||(store[name]=_Symbol3&&_Symbol3[name]||(_Symbol3||uid)("Symbol."+name))}},function(module,exports,__webpack_require__){var global=__webpack_require__(10),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(12),$export=__webpack_require__(9),toObject=__webpack_require__(28),call=__webpack_require__(29),isArrayIter=__webpack_require__(32),toLength=__webpack_require__(33),getIterFn=__webpack_require__(34);$export($export.S+$export.F*!__webpack_require__(37)(function(iter){}),"Array",{from:function from(arrayLike){var O=toObject(arrayLike),C=typeof this=="function"?this:Array,$$=arguments,$$len=$$.length,mapfn=$$len>1?$$[1]:undefined,mapping=mapfn!==undefined,index=0,iterFn=getIterFn(O),length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,$$len>2?$$[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){result[index]=mapping?call(iterator,mapfn,[step.value,index],true):step.value}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){result[index]=mapping?mapfn(O[index],index):O[index]}}result.length=index;return result}})},function(module,exports,__webpack_require__){var defined=__webpack_require__(6);module.exports=function(it){return Object(defined(it))}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(30);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(31);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports){module.exports=function(it){return(typeof it==="undefined"?"undefined":_typeof2(it))==="object"?it!==null:typeof it==="function"}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(21),ITERATOR=__webpack_require__(24)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(5),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){var classof=__webpack_require__(35),ITERATOR=__webpack_require__(24)("iterator"),Iterators=__webpack_require__(21);module.exports=__webpack_require__(11).getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){var cof=__webpack_require__(36),TAG=__webpack_require__(24)("toStringTag"),ARG=cof(function(){return arguments}())=="Arguments";module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=(O=Object(it))[TAG])=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(24)("iterator"),SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true}}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},function(module,exports){exports["default"]=function(obj){return obj&&obj.__esModule?obj:{"default":obj}};exports.__esModule=true},function(module,exports){exports["default"]=function(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}};exports.__esModule=true},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var ActivatableComponent=function(_UIComponent){_inherits(ActivatableComponent,_UIComponent);function ActivatableComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,ActivatableComponent);_get(Object.getPrototypeOf(ActivatableComponent.prototype),"constructor",this).call(this,element);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{activeClass:"ssplayer-active"})}_createClass(ActivatableComponent,[{key:"active",get:function get(){return this.isActive},set:function set(isActive){this.isActive=isActive;this.adapter.toggleClass(this.adaptedElement,this.options.activeClass,isActive)}}]);return ActivatableComponent}(_ui2["default"]);exports["default"]=ActivatableComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _Object$getOwnPropertyDescriptor=__webpack_require__(42)["default"];exports["default"]=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=_Object$getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};exports.__esModule=true},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(43),__esModule:true}},function(module,exports,__webpack_require__){var $=__webpack_require__(16);__webpack_require__(44);module.exports=function getOwnPropertyDescriptor(it,key){return $.getDesc(it,key)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(45);__webpack_require__(47)("getOwnPropertyDescriptor",function($getOwnPropertyDescriptor){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},function(module,exports,__webpack_require__){var IObject=__webpack_require__(46),defined=__webpack_require__(6);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var cof=__webpack_require__(36);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(9),core=__webpack_require__(11),fails=__webpack_require__(19);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports,__webpack_require__){var _Object$create=__webpack_require__(49)["default"];var _Object$setPrototypeOf=__webpack_require__(51)["default"];exports["default"]=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=_Object$create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)_Object$setPrototypeOf?_Object$setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};exports.__esModule=true},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(50),__esModule:true}},function(module,exports,__webpack_require__){var $=__webpack_require__(16);module.exports=function create(P,D){return $.create(P,D)}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(52),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(53);module.exports=__webpack_require__(11).Object.setPrototypeOf},function(module,exports,__webpack_require__){var $export=__webpack_require__(9);$export($export.S,"Object",{setPrototypeOf:__webpack_require__(54).set})},function(module,exports,__webpack_require__){var getDesc=__webpack_require__(16).getDesc,isObject=__webpack_require__(31),anObject=__webpack_require__(30);var check=function check(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=__webpack_require__(12)(Function.call,getDesc(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},function(module,exports,__webpack_require__){var _Object$defineProperty=__webpack_require__(56)["default"];exports["default"]=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;_Object$defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.__esModule=true},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(57),__esModule:true}},function(module,exports,__webpack_require__){var $=__webpack_require__(16);module.exports=function defineProperty(it,key,desc){return $.setDesc(it,key,desc)}},function(module,exports){exports["default"]=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};exports.__esModule=true},function(module,exports,__webpack_require__){(function(global,module){var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";
var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reFlags=/\w*$/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var freeGlobal=(typeof global==="undefined"?"undefined":_typeof2(global))=="object"&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":_typeof2(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=(typeof exports==="undefined"?"undefined":_typeof2(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":_typeof2(module))=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}function addSetEntry(set,value){set.add(value);return set}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayEach(array,iteratee){var index=-1,length=array?array.length:0;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseUnary(func){return function(value){return func(value)}}function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectCtorString=funcToString.call(Object);var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?root.Buffer:undefined,_Symbol4=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max;var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create");var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=_Symbol4?_Symbol4.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__["delete"](key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this}cache=this.__data__=new MapCache(pairs)}cache.set(key,value);return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isIndex(key,length)))){result.push(key)}}return result}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||typeof key=="number"&&value===undefined&&!(key in object)){object[key]=value}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){object[key]=value}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value)){return object?value:{}}result=initCloneObject(isFunc?{}:value);if(!isDeep){return copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(!isArr){var props=isFull?getAllKeys(value):keys(value)}arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))});return result}function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return objectToString.call(value)}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}if(!(isArray(source)||isTypedArray(source))){var props=baseKeysIn(source)}arrayEach(props||source,function(srcValue,key){if(props){key=srcValue;srcValue=source[key]}if(isObject(srcValue)){stack||(stack=new Stack);baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;if(newValue===undefined){newValue=srcValue}assignMergeValue(object,key,newValue)}})}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){newValue=srcValue;if(isArray(srcValue)||isTypedArray(srcValue)){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else{isCommon=false;newValue=baseClone(srcValue,true)}}else if(isPlainObject(srcValue)||isArguments(srcValue)){if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||srcIndex&&isFunction(objValue)){isCommon=false;newValue=baseClone(srcValue,true)}else{newValue=objValue}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}function baseRest(func,start){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=array;return apply(func,this,otherArgs)}}function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var result=new buffer.constructor(buffer.length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),true):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),true):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copyObject(source,props,object,customizer){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;assignValue(object,key,newValue===undefined?source[key]:newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):stubArray;var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function getTag(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor((+object));case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index==="undefined"?"undefined":_typeof2(index);if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function isKeyable(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function mergeDefaults(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,mergeDefaults,stack);stack["delete"](srcValue)}return objValue}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value)){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toPlainObject(value){return copyObject(value,keysIn(value))}var defaultsDeep=baseRest(function(args){args.push(undefined,mergeDefaults);return apply(mergeWith,undefined,args)});function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});function stubArray(){return[]}function stubFalse(){return false}module.exports=defaultsDeep}).call(exports,function(){return this}(),__webpack_require__(60)(module))},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];module.children=[];module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _domAdapterJqueryInternal=__webpack_require__(62);var _domAdapterJqueryInternal2=_interopRequireDefault(_domAdapterJqueryInternal);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var UIComponent=function(_EventListener){_inherits(UIComponent,_EventListener);function UIComponent(element){_classCallCheck(this,UIComponent);_get(Object.getPrototypeOf(UIComponent.prototype),"constructor",this).call(this);this.element=element;this.adapter=this.constructor.createDomAdapter();this.adaptedElement=this.adapter.adapt(element);this.hideClass="ssplayer-component-hide"}_createClass(UIComponent,[{key:"hide",value:function hide(){this.adaptedElement.addClass(this.hideClass)}},{key:"show",value:function show(){this.adaptedElement.removeClass(this.hideClass)}}],[{key:"createDomAdapter",value:function createDomAdapter(){return new _domAdapterJqueryInternal2["default"]}}]);return UIComponent}(_coreEventListener2["default"]);exports["default"]=UIComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _jquery=__webpack_require__(63);var _jquery2=_interopRequireDefault(_jquery);var _vendorJqueryInternal=__webpack_require__(110);var _vendorJqueryInternal2=_interopRequireDefault(_vendorJqueryInternal);var InternalJqueryDOMAdapter=function(_JQueryDOMAdapter){_inherits(InternalJqueryDOMAdapter,_JQueryDOMAdapter);function InternalJqueryDOMAdapter(){_classCallCheck(this,InternalJqueryDOMAdapter);_get(Object.getPrototypeOf(InternalJqueryDOMAdapter.prototype),"constructor",this).call(this,_vendorJqueryInternal2["default"])}return InternalJqueryDOMAdapter}(_jquery2["default"]);exports["default"]=InternalJqueryDOMAdapter;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _lodashPairs=__webpack_require__(104);var _lodashPairs2=_interopRequireDefault(_lodashPairs);var _abstract=__webpack_require__(109);var _abstract2=_interopRequireDefault(_abstract);var splice=_linkedinSlideshareClientUtils.fn.imperative(Array.prototype.splice);var JQueryDOMAdapter=function(_AbstractDOMAdapter){_inherits(JQueryDOMAdapter,_AbstractDOMAdapter);function JQueryDOMAdapter($){_classCallCheck(this,JQueryDOMAdapter);_get(Object.getPrototypeOf(JQueryDOMAdapter.prototype),"constructor",this).call(this);this.$=$}_createClass(JQueryDOMAdapter,[{key:"adapt",value:function adapt(element){return this.$(element)}},{key:"adaptAll",value:function adaptAll(elements){return this.$(elements)}},{key:"query",value:function query(selector){return this.$(this.$(selector)[0])}},{key:"queryAll",value:function queryAll(selector){return this.$(selector)}},{key:"find",value:function find(element,selector){return this.$(element.find(selector)[0])}},{key:"filter",value:function filter(elements,selector,not){return not?elements.not(selector):elements.filter(selector)}},{key:"forEach",value:function forEach(elements,func){this.$.each(elements,function(i,element){func(element,i)})}}]);return JQueryDOMAdapter}(_abstract2["default"]);exports["default"]=JQueryDOMAdapter;var methods={findAll:"find",children:"children",one:"one",getAttr:"attr",setAttr:"attr",removeAttr:"removeAttr",getCss:"css",setCss:"css",getData:"data",setData:"data",getHtml:"html",setHtml:"html",getText:"text",setText:"text",restore:"get",addClass:"addClass",removeClass:"removeClass",toggleClass:"toggleClass",hasClass:"hasClass",wrap:"wrap",wrapAll:"wrapAll",getHeight:"height",setHeight:"height",getWidth:"width",setWidth:"width"};JQueryDOMAdapter.prototype=(0,_lodashPairs2["default"])(methods).reduce(function(prototype,_ref){var _ref2=_slicedToArray(_ref,2);var methodName=_ref2[0];var jMethodName=_ref2[1];prototype[methodName]=function(elements){return elements[jMethodName].apply(elements,_toConsumableArray(splice(arguments,1)))};return prototype},JQueryDOMAdapter.prototype);module.exports=exports["default"]},function(module,exports,__webpack_require__){var _getIterator=__webpack_require__(65)["default"];var _isIterable=__webpack_require__(72)["default"];exports["default"]=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=_getIterator(arr),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(_isIterable(Object(arr))){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.__esModule=true},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(66),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(67);__webpack_require__(3);module.exports=__webpack_require__(71)},function(module,exports,__webpack_require__){__webpack_require__(68);var Iterators=__webpack_require__(21);Iterators.NodeList=Iterators.HTMLCollection=Iterators.Array},function(module,exports,__webpack_require__){var addToUnscopables=__webpack_require__(69),step=__webpack_require__(70),Iterators=__webpack_require__(21),toIObject=__webpack_require__(45);module.exports=__webpack_require__(7)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},function(module,exports){module.exports=function(){}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(30),get=__webpack_require__(34);module.exports=__webpack_require__(11).getIterator=function(it){var iterFn=get(it);if(typeof iterFn!="function")throw TypeError(it+" is not iterable!");return anObject(iterFn.call(it))}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(73),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(67);__webpack_require__(3);module.exports=__webpack_require__(74)},function(module,exports,__webpack_require__){var classof=__webpack_require__(35),ITERATOR=__webpack_require__(24)("iterator"),Iterators=__webpack_require__(21);module.exports=__webpack_require__(11).isIterable=function(it){var O=Object(it);return O[ITERATOR]!==undefined||"@@iterator"in O||Iterators.hasOwnProperty(classof(O))}},function(module,exports,__webpack_require__){var _Array$from=__webpack_require__(1)["default"];exports["default"]=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return _Array$from(arr)}};exports.__esModule=true},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _dom=__webpack_require__(77);var dom=_interopRequireWildcard(_dom);var _events=__webpack_require__(87);var events=_interopRequireWildcard(_events);var _fn=__webpack_require__(90);var fn=_interopRequireWildcard(_fn);var _lang=__webpack_require__(91);var lang=_interopRequireWildcard(_lang);var _li=__webpack_require__(92);var li=_interopRequireWildcard(_li);var _net=__webpack_require__(94);var net=_interopRequireWildcard(_net);var _string=__webpack_require__(93);var string=_interopRequireWildcard(_string);var _svg=__webpack_require__(96);var svg=_interopRequireWildcard(_svg);var _tracking=__webpack_require__(97);var tracking=_interopRequireWildcard(_tracking);var _url=__webpack_require__(98);var url=_interopRequireWildcard(_url);exports["default"]={dom:dom,events:events,fn:fn,lang:lang,li:li,net:net,string:string,svg:svg,tracking:tracking,url:url};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});exports.createContentLoadedPromise=createContentLoadedPromise;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise=__webpack_require__(78);var _promise2=_interopRequireDefault(_promise);function createContentLoadedPromise(){var doc=arguments.length<=0||arguments[0]===undefined?document:arguments[0];return new _promise2["default"](function(resolve){if(doc.readyState==="interactive"||doc.readyState==="complete"){
resolve(doc)}else{doc.addEventListener("DOMContentLoaded",function(){return resolve(doc)})}})}var onContentLoaded=createContentLoadedPromise(document);exports.onContentLoaded=onContentLoaded},function(module,exports,__webpack_require__){module.exports=__webpack_require__(79);__webpack_require__(84);__webpack_require__(85);__webpack_require__(86)},function(module,exports,__webpack_require__){var asap=__webpack_require__(80);module.exports=Promise;function Promise(fn){if(_typeof2(this)!=="object")throw new TypeError("Promises must be constructed via new");if(typeof fn!=="function")throw new TypeError("not a function");var state=null;var value=null;var deferreds=[];var self=this;this.then=function(onFulfilled,onRejected){return new self.constructor(function(resolve,reject){handle(new Handler(onFulfilled,onRejected,resolve,reject))})};function handle(deferred){if(state===null){deferreds.push(deferred);return}asap(function(){var cb=state?deferred.onFulfilled:deferred.onRejected;if(cb===null){(state?deferred.resolve:deferred.reject)(value);return}var ret;try{ret=cb(value)}catch(e){deferred.reject(e);return}deferred.resolve(ret)})}function resolve(newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&((typeof newValue==="undefined"?"undefined":_typeof2(newValue))==="object"||typeof newValue==="function")){var then=newValue.then;if(typeof then==="function"){doResolve(then.bind(newValue),resolve,reject);return}}state=true;value=newValue;finale()}catch(e){reject(e)}}function reject(newValue){state=false;value=newValue;finale()}function finale(){for(var i=0,len=deferreds.length;i<len;i++){handle(deferreds[i])}deferreds=null}doResolve(fn,resolve,reject)}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.resolve=resolve;this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=false;try{fn(function(value){if(done)return;done=true;onFulfilled(value)},function(reason){if(done)return;done=true;onRejected(reason)})}catch(ex){if(done)return;done=true;onRejected(ex)}}},function(module,exports,__webpack_require__){(function(process,setImmediate){var head={task:void 0,next:null};var tail=head;var flushing=false;var requestFlush=void 0;var isNodeJS=false;function flush(){while(head.next){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;if(domain){head.domain=void 0;domain.enter()}try{task()}catch(e){if(isNodeJS){if(domain){domain.exit()}setTimeout(flush,0);if(domain){domain.enter()}throw e}else{setTimeout(function(){throw e},0)}}if(domain){domain.exit()}}flushing=false}if(typeof process!=="undefined"&&process.nextTick){isNodeJS=true;requestFlush=function requestFlush(){process.nextTick(flush)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){requestFlush=setImmediate.bind(window,flush)}else{requestFlush=function requestFlush(){setImmediate(flush)}}}else if(typeof MessageChannel!=="undefined"){var channel=new MessageChannel;channel.port1.onmessage=flush;requestFlush=function requestFlush(){channel.port2.postMessage(0)}}else{requestFlush=function requestFlush(){setTimeout(flush,0)}}function asap(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null};if(!flushing){flushing=true;requestFlush()}}module.exports=asap}).call(exports,__webpack_require__(81),__webpack_require__(82).setImmediate)},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){(function(global){var scope=typeof global!=="undefined"&&global||typeof self!=="undefined"&&self||window;var apply=Function.prototype.apply;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){if(timeout){timeout.close()}};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};__webpack_require__(83);exports.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof global!=="undefined"&&global.setImmediate||this&&this.setImmediate;exports.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof global!=="undefined"&&global.clearImmediate||this&&this.clearImmediate}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global,process){(function(global,undefined){if(global.setImmediate){return}var nextHandle=1;var tasksByHandle={};var currentlyRunningATask=false;var doc=global.document;var registerImmediate;function setImmediate(callback){if(typeof callback!=="function"){callback=new Function(""+callback)}var args=new Array(arguments.length-1);for(var i=0;i<args.length;i++){args[i]=arguments[i+1]}var task={callback:callback,args:args};tasksByHandle[nextHandle]=task;registerImmediate(nextHandle);return nextHandle++}function clearImmediate(handle){delete tasksByHandle[handle]}function run(task){var callback=task.callback;var args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args);break}}function runIfPresent(handle){if(currentlyRunningATask){setTimeout(runIfPresent,0,handle)}else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=true;try{run(task)}finally{clearImmediate(handle);currentlyRunningATask=false}}}}function installNextTickImplementation(){registerImmediate=function registerImmediate(handle){process.nextTick(function(){runIfPresent(handle)})}}function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=true;var oldOnMessage=global.onmessage;global.onmessage=function(){postMessageIsAsynchronous=false};global.postMessage("","*");global.onmessage=oldOnMessage;return postMessageIsAsynchronous}}function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$";var onGlobalMessage=function onGlobalMessage(event){if(event.source===global&&typeof event.data==="string"&&event.data.indexOf(messagePrefix)===0){runIfPresent(+event.data.slice(messagePrefix.length))}};if(global.addEventListener){global.addEventListener("message",onGlobalMessage,false)}else{global.attachEvent("onmessage",onGlobalMessage)}registerImmediate=function registerImmediate(handle){global.postMessage(messagePrefix+handle,"*")}}function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){var handle=event.data;runIfPresent(handle)};registerImmediate=function registerImmediate(handle){channel.port2.postMessage(handle)}}function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function registerImmediate(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle);script.onreadystatechange=null;html.removeChild(script);script=null};html.appendChild(script)}}function installSetTimeoutImplementation(){registerImmediate=function registerImmediate(handle){setTimeout(runIfPresent,0,handle)}}var attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global;if({}.toString.call(global.process)==="[object process]"){installNextTickImplementation()}else if(canUsePostMessage()){installPostMessageImplementation()}else if(global.MessageChannel){installMessageChannelImplementation()}else if(doc&&"onreadystatechange"in doc.createElement("script")){installReadyStateChangeImplementation()}else{installSetTimeoutImplementation()}attachTo.setImmediate=setImmediate;attachTo.clearImmediate=clearImmediate})(typeof self==="undefined"?typeof global==="undefined"?this:global:self)}).call(exports,function(){return this}(),__webpack_require__(81))},function(module,exports,__webpack_require__){var Promise=__webpack_require__(79);var asap=__webpack_require__(80);module.exports=Promise;Promise.prototype.done=function(onFulfilled,onRejected){var self=arguments.length?this.then.apply(this,arguments):this;self.then(null,function(err){asap(function(){throw err})})}},function(module,exports,__webpack_require__){var Promise=__webpack_require__(79);var asap=__webpack_require__(80);module.exports=Promise;function ValuePromise(value){this.then=function(onFulfilled){if(typeof onFulfilled!=="function")return this;return new Promise(function(resolve,reject){asap(function(){try{resolve(onFulfilled(value))}catch(ex){reject(ex)}})})}}ValuePromise.prototype=Promise.prototype;var TRUE=new ValuePromise(true);var FALSE=new ValuePromise(false);var NULL=new ValuePromise(null);var UNDEFINED=new ValuePromise(undefined);var ZERO=new ValuePromise(0);var EMPTYSTRING=new ValuePromise("");Promise.resolve=function(value){if(value instanceof Promise)return value;if(value===null)return NULL;if(value===undefined)return UNDEFINED;if(value===true)return TRUE;if(value===false)return FALSE;if(value===0)return ZERO;if(value==="")return EMPTYSTRING;if((typeof value==="undefined"?"undefined":_typeof2(value))==="object"||typeof value==="function"){try{var then=value.then;if(typeof then==="function"){return new Promise(then.bind(value))}}catch(ex){return new Promise(function(resolve,reject){reject(ex)})}}return new ValuePromise(value)};Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&((typeof val==="undefined"?"undefined":_typeof2(val))==="object"||typeof val==="function")){var then=val.then;if(typeof then==="function"){then.call(val,function(val){res(i,val)},reject);return}}args[i]=val;if(--remaining===0){resolve(args)}}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})};Promise.race=function(values){return new Promise(function(resolve,reject){values.forEach(function(value){Promise.resolve(value).then(resolve,reject)})})};Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)}},function(module,exports,__webpack_require__){var Promise=__webpack_require__(79);var asap=__webpack_require__(80);module.exports=Promise;Promise.denodeify=function(fn,argumentCount){argumentCount=argumentCount||Infinity;return function(){var self=this;var args=Array.prototype.slice.call(arguments);return new Promise(function(resolve,reject){while(args.length&&args.length>argumentCount){args.pop()}args.push(function(err,res){if(err)reject(err);else resolve(res)});var res=fn.apply(self,args);if(res&&((typeof res==="undefined"?"undefined":_typeof2(res))==="object"||typeof res==="function")&&typeof res.then==="function"){resolve(res)}})}};Promise.nodeify=function(fn){return function(){var args=Array.prototype.slice.call(arguments);var callback=typeof args[args.length-1]==="function"?args.pop():null;var ctx=this;try{return fn.apply(this,arguments).nodeify(callback,ctx)}catch(ex){if(callback===null||typeof callback=="undefined"){return new Promise(function(resolve,reject){reject(ex)})}else{asap(function(){callback.call(ctx,ex)})}}}};Promise.prototype.nodeify=function(callback,ctx){if(typeof callback!="function")return this;this.then(function(value){asap(function(){callback.call(ctx,null,value)})},function(err){asap(function(){callback.call(ctx,err)})})}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});exports.mixin=mixin;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _eventemitter3=__webpack_require__(88);var _eventemitter32=_interopRequireDefault(_eventemitter3);var _es6Mixin=__webpack_require__(89);function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return(0,_es6Mixin.mixin)(target,_eventemitter32["default"])}},function(module,exports,__webpack_require__){var has=Object.prototype.hasOwnProperty;var prefix=typeof Object.create!=="function"?"~":false;function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false}function EventEmitter(){}EventEmitter.prototype._events=undefined;EventEmitter.prototype.eventNames=function eventNames(){var events=this._events,names=[],name;if(!events)return names;for(name in events){if(has.call(events,name))names.push(prefix?name.slice(1):name)}if(Object.getOwnPropertySymbols){return names.concat(Object.getOwnPropertySymbols(events))}return names};EventEmitter.prototype.listeners=function listeners(event,exists){var evt=prefix?prefix+event:event,available=this._events&&this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++){ee[i]=available[i].fn}return ee};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if("function"===typeof listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i]}listeners.fn.apply(listeners.context,args)}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j]}listeners[i].fn.apply(listeners[i].context,args)}}}return true};EventEmitter.prototype.on=function on(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.once=function once(event,fn,context){var listener=new EE(fn,context||this,true),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return this;var listeners=this._events[evt],events=[];if(fn){if(listeners.fn){if(listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context){events.push(listeners)}}else{for(var i=0,length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i])}}}}if(events.length){this._events[evt]=events.length===1?events[0]:events}else{delete this._events[evt]}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){if(!this._events)return this;if(event)delete this._events[prefix?prefix+event:event];else this._events=prefix?{}:Object.create(null);return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prefixed=prefix;{module.exports=EventEmitter}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.mixin=mixin;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function entries(object){return Object.getOwnPropertyNames(object).map(function(key){return[key,object[key]]})}var Mixin=exports.Mixin=function(){function Mixin(){_classCallCheck(this,Mixin)}_createClass(Mixin,null,[{key:"mixin",value:function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var MixedIn=arguments.length<=1||arguments[1]===undefined?this:arguments[1];for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}var instance=new(Function.prototype.bind.apply(MixedIn,[null].concat(args)));entries(MixedIn.prototype).filter(function(_ref){var _ref2=_slicedToArray(_ref,2);var methodName=_ref2[0];var method=_ref2[1];return typeof method==="function"&&methodName!=="constructor"}).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2);var methodName=_ref4[0];var method=_ref4[1];return target[methodName]=method.bind(instance)});return target}}]);return Mixin}();function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var MixedIn=arguments.length<=1||arguments[1]===undefined?Mixin:arguments[1];for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}return Mixin.mixin.apply(Mixin,[target,MixedIn].concat(args))}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.imperative=imperative;var call=Function.prototype.call;function imperative(method){return function(){return call.apply(method,arguments)}}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.isDescendantClass=isDescendantClass;exports.assign=assign;exports.defaults=defaults;exports.entries=entries;var _fn=__webpack_require__(90);function isDescendantClass(child,ancestor){return Boolean(ancestor&&child&&child.prototype&&child.prototype instanceof ancestor)}function assign(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var key=_ref2[0];var value=_ref2[1];target[key]=value});return target},target)}var hasOwn=(0,_fn.imperative)(Object.prototype.hasOwnProperty);function defaults(target){for(var _len2=arguments.length,sources=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){sources[_key2-1]=arguments[_key2]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref3){var _ref32=_slicedToArray(_ref3,2);var key=_ref32[0];var value=_ref32[1];if(!hasOwn(target,key)){target[key]=value}});return target},target)}var slice=(0,_fn.imperative)(Array.prototype.slice);var toArray=function toArray(o){return slice(o)};exports.toArray=toArray;function entries(o){return Object.keys(o).map(function(key){return[key,o[key]]})}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});exports.getUrn=getUrn;exports.getPageKey=getPageKey;var _string=__webpack_require__(93);var urnMap={clip:"slideShareClip",clipboard:"slideShareClipboard",guest:"slideShareGuest",slideshow:"slideShareSlideshow",user:"slideShareUser"};var urnPrefix="urn:li";function getUrn(entityType,entityId){if(!entityType){return null}var urn=urnMap[entityType];if(!urn){urn="slideShare"+(0,_string.capitalize)(entityType)}return[urnPrefix,urn,entityId].join(":")}function getPageKey(){var el=arguments.length<=0||arguments[0]===undefined?document.body:arguments[0];var match=/^pagekey-(.*)/.exec(el.id);if(match&&match[1]){return match[1]}}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.capitalize=capitalize;function capitalize(word){if(typeof word==="string"){return word.charAt(0).toUpperCase()+word.substring(1)}return""}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});exports.request=request;exports.requestXml=requestXml;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise=__webpack_require__(78);var _promise2=_interopRequireDefault(_promise);var _netHeaders=__webpack_require__(95);var _netHeaders2=_interopRequireDefault(_netHeaders);exports.Headers=_netHeaders2["default"];function request(url){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref$method=_ref.method;var method=_ref$method===undefined?"get":_ref$method;var body=_ref.body;var _ref$headers=_ref.headers;var headers=_ref$headers===undefined?{}:_ref$headers;var xhr=new XMLHttpRequest;xhr.open(method,url,true);_netHeaders2["default"].create(headers).addTo(xhr);var promise=new _promise2["default"](function(resolve,reject){xhr.addEventListener("readystatechange",function(){if(this.readyState===4){if(this.status>=200&&this.status<400){resolve(this)}else{reject(this)}}})});xhr.send(body);return promise}function requestXml(){return request.apply(undefined,arguments).then(function(xhr){return xhr.responseXML})}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _lang=__webpack_require__(91);var nameToKey=function nameToKey(name){return name.toLowerCase()};var Headers=function(){function Headers(){_classCallCheck(this,Headers);this._values=Object.create(null)}_createClass(Headers,[{key:"append",value:function append(name,value){var key=nameToKey(name);if(!this._values[key]){this._values[key]=[]}this._values[key].push(value)}},{key:"keys",value:function keys(){return Object.keys(this._values)}},{key:"getAll",value:function getAll(name){var key=nameToKey(name);return this._values[key].slice(0)}},{key:"entries",value:function entries(){var _this=this;return this.keys().reduce(function(entries,key){_this.getAll(key).forEach(function(value){return entries.push([key,value])});return entries},[])}},{key:"addTo",value:function addTo(xhr){this.entries().forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var name=_ref2[0];var value=_ref2[1];return xhr.setRequestHeader(name,value)})}},{key:"nameToKey",value:function nameToKey(name){return name.toLowerCase()}}],[{key:"create",value:function create(obj){var objEntries=obj instanceof Headers?obj.entries():(0,_lang.entries)(obj);return objEntries.reduce(function(headers,_ref3){var _ref32=_slicedToArray(_ref3,2);var name=_ref32[0];var value=_ref32[1];headers.append(name,value);return headers},new Headers)}}]);return Headers}();exports["default"]=Headers;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});exports.getSvgUrls=getSvgUrls;exports.injectSvg=injectSvg;exports.loadSvgs=loadSvgs;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _lang=__webpack_require__(91);var _promise=__webpack_require__(78);var _promise2=_interopRequireDefault(_promise);var _net=__webpack_require__(94);function getSvgUrls(){var el=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var metaTagName=arguments.length<=1||arguments[1]===undefined?"ss-svg-icons":arguments[1];var metas=(0,_lang.toArray)(el.querySelectorAll('meta[name="'+metaTagName+'"]'));return metas.map(function(meta){return meta.getAttribute("content")})}function injectSvg(xml){var el=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var firstChild=xml.firstChild;firstChild.style.display="none";el.insertBefore(firstChild,el.firstChild)}function loadSvgs(){var searchEl=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var destEl=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var svgPromises=getSvgUrls(searchEl).map(function(url){return(0,_net.requestXml)(url).then(function(svg){return injectSvg(svg,destEl)})});return _promise2["default"].all(svgPromises)}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getGlobalTrackingUrl=getGlobalTrackingUrl;var metaTagName="globalTrackingUrl";function getGlobalTrackingUrl(){var meta=document.querySelector('meta[name="'+metaTagName+'"]');return meta?meta.getAttribute("content"):null}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});exports.getTrackingCode=getTrackingCode;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _url=__webpack_require__(99);var _url2=_interopRequireDefault(_url);function getTrackingCode(link){if(typeof link!=="string"){throw new TypeError("link argument must be a string; found "+(typeof link==="undefined"?"undefined":_typeof2(link)))}var query=_url2["default"].parse(link,true).query;if(query){var trk=query.trk;if(trk){return Array.isArray(trk)?trk[trk.length-1]:trk}}return null}},function(module,exports,__webpack_require__){var punycode=__webpack_require__(100);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={
javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(101);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+(typeof url==="undefined"?"undefined":_typeof2(url)))}var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){var domainArray=this.hostname.split(".");var newOut=[];for(var i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;Object.keys(this).forEach(function(k){result[k]=this[k]},this);result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){Object.keys(relative).forEach(function(k){if(k!=="protocol")result[k]=relative[k]});if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){Object.keys(relative).forEach(function(k){result[k]=relative[k]});result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift())){}if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last=="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host};function isString(arg){return typeof arg==="string"}function isObject(arg){return(typeof arg==="undefined"?"undefined":_typeof2(arg))==="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global){(function(root){var freeExports=(typeof exports==="undefined"?"undefined":_typeof2(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule=(typeof module==="undefined"?"undefined":_typeof2(module))=="object"&&module&&!module.nodeType&&module;var freeGlobal=(typeof global==="undefined"?"undefined":_typeof2(global))=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};{!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})(this)}).call(exports,__webpack_require__(60)(module),function(){return this}())},function(module,exports,__webpack_require__){exports.decode=exports.parse=__webpack_require__(102);exports.encode=exports.stringify=__webpack_require__(103)},function(module,exports){function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(Array.isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj}},function(module,exports){var stringifyPrimitive=function stringifyPrimitive(v){switch(typeof v==="undefined"?"undefined":_typeof2(v)){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if((typeof obj==="undefined"?"undefined":_typeof2(obj))==="object"){return Object.keys(obj).map(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(Array.isArray(obj[k])){return obj[k].map(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))}},function(module,exports,__webpack_require__){var keys=__webpack_require__(105);function toObject(value){return isObject(value)?value:Object(value)}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function pairs(object){object=toObject(object);var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}module.exports=pairs},function(module,exports,__webpack_require__){var getNative=__webpack_require__(106),isArguments=__webpack_require__(107),isArray=__webpack_require__(108);var reIsUint=/^\d+$/;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeKeys=getNative(Object,"keys");var MAX_SAFE_INTEGER=9007199254740991;function baseProperty(key){return function(object){return object==null?undefined:object[key]}}var getLength=baseProperty("length");function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=keys},function(module,exports){var funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=getNative},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var propertyIsEnumerable=objectProto.propertyIsEnumerable;function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}module.exports=isArguments},function(module,exports){var arrayTag="[object Array]",funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var nativeIsArray=getNative(Array,"isArray");var MAX_SAFE_INTEGER=9007199254740991;function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=isArray},function(module,exports,__webpack_require__){var _classCallCheck=__webpack_require__(58)["default"];Object.defineProperty(exports,"__esModule",{value:true});var AbstractDOMAdapter=function AbstractDOMAdapter(){_classCallCheck(this,AbstractDOMAdapter);this.components={}};exports["default"]=AbstractDOMAdapter;module.exports=exports["default"]},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){if((typeof module==="undefined"?"undefined":_typeof2(module))==="object"&&_typeof2(module.exports)==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var _slice2=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var document=window.document,version="2.1.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated,-effects,-effects/Tween,-effects/animatedSelector,-event-alias,-css/hiddenVisibleSelectors",jQuery=function jQuery(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function fcamelCase(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function toArray(){return _slice2.call(this)},get:function get(num){return num!=null?num<0?this[num+this.length]:this[num]:_slice2.call(this)},pushStack:function pushStack(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function each(callback,args){return jQuery.each(this,callback,args)},map:function map(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function slice(){return this.pushStack(_slice2.apply(this,arguments))},first:function first(){return this.eq(0)},last:function last(){return this.eq(-1)},eq:function eq(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function end(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if((typeof target==="undefined"?"undefined":_typeof2(target))!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function error(msg){throw new Error(msg)},noop:function noop(){},isFunction:function isFunction(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function isWindow(obj){return obj!=null&&obj===obj.window},isNumeric:function isNumeric(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)>=0},isPlainObject:function isPlainObject(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}return true},isEmptyObject:function isEmptyObject(obj){var name;for(name in obj){return false}return true},type:function type(obj){if(obj==null){return obj+""}return(typeof obj==="undefined"?"undefined":_typeof2(obj))==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj==="undefined"?"undefined":_typeof2(obj)},globalEval:function globalEval(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function camelCase(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function each(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}}return obj},trim:function trim(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function makeArray(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function inArray(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function grep(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function map(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function proxy(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=_slice2.call(arguments,2);proxy=function proxy(){return fn.apply(context||this,args.concat(_slice2.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}if(obj.nodeType===1&&length){return true}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var docElem=window.document.documentElement,selector_hasDuplicate,matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector,selector_sortOrder=function selector_sortOrder(a,b){if(a===b){selector_hasDuplicate=true;return 0}var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);if(compare){if(compare&1){if(a===document||jQuery.contains(document,a)){return-1}if(b===document||jQuery.contains(document,b)){return 1}return 0}return compare&4?-1:1}return a.compareDocumentPosition?-1:1};jQuery.extend({find:function find(selector,context,results,seed){var elem,nodeType,i=0;results=results||[];context=context||document;if(!selector||typeof selector!=="string"){return results}if((nodeType=context.nodeType)!==1&&nodeType!==9){return[]}if(seed){while(elem=seed[i++]){if(jQuery.find.matchesSelector(elem,selector)){results.push(elem)}}}else{jQuery.merge(results,context.querySelectorAll(selector));
}return results},unique:function unique(results){var elem,duplicates=[],i=0,j=0;selector_hasDuplicate=false;results.sort(selector_sortOrder);if(selector_hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}return results},text:function text(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=jQuery.text(node)}}else if(nodeType===1||nodeType===9||nodeType===11){return elem.textContent}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret},contains:function contains(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains(bup))},isXMLDoc:function isXMLDoc(elem){return(elem.ownerDocument||elem).documentElement.nodeName!=="HTML"},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}});jQuery.extend(jQuery.find,{matches:function matches(expr,elements){return jQuery.find(expr,null,null,elements)},matchesSelector:function matchesSelector(elem,expr){return matches.call(elem,expr)},attr:function attr(elem,name){return elem.getAttribute(name)}});var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function find(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function filter(selector){return this.pushStack(winnow(this,selector||[],false))},not:function not(selector){return this.pushStack(winnow(this,selector||[],true))},is:function is(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector){return this}if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function dir(elem,_dir2,until){var matched=[],truncate=until!==undefined;while((elem=elem[_dir2])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched},sibling:function sibling(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched}});jQuery.fn.extend({has:function has(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function closest(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function index(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function add(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function addBack(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function parent(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function parents(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function parentsUntil(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function next(elem){return sibling(elem,"nextSibling")},prev:function prev(elem){return sibling(elem,"previousSibling")},nextAll:function nextAll(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function prevAll(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function nextUntil(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function prevUntil(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function siblings(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function children(elem){return jQuery.sibling(elem.firstChild)},contents:function contents(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=/\S+/g;var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,_fired2,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function fire(data){memory=options.memory&&data;_fired2=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else if(memory){list=[]}else{self.disable()}}},self={add:function add(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&type!=="string"){add(arg)}})})(arguments);if(firing){firingLength=list.length}else if(memory){firingStart=start;fire(memory)}}return this},remove:function remove(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function has(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function empty(){list=[];firingLength=0;return this},disable:function disable(){list=stack=memory=undefined;return this},disabled:function disabled(){return!list},lock:function lock(){stack=undefined;if(!memory){self.disable()}return this},locked:function locked(){return!stack},fireWith:function fireWith(context,args){if(list&&(!_fired2||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args)}else{fire(args)}}return this},fire:function fire(){self.fireWith(this,arguments);return this},fired:function fired(){return!!_fired2}};return self};jQuery.extend({Deferred:function Deferred(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],_state2="pending",_promise3={state:function state(){return _state2},always:function always(){deferred.done(arguments).fail(arguments);return this},then:function then(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[tuple[0]+"With"](this===_promise3?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function promise(obj){return obj!=null?jQuery.extend(obj,_promise3):_promise3}},deferred={};_promise3.pipe=_promise3.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];_promise3[tuple[1]]=list.add;if(stateString){list.add(function(){_state2=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?_promise3:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});_promise3.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function when(subordinate){var i=0,resolveValues=_slice2.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function updateFunc(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?_slice2.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function holdReady(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function ready(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(obj)};jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function fn(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){Object.defineProperty(this.cache={},0,{get:function get(){return{}}});this.expando=jQuery.expando+Math.random()}Data.uid=1;Data.accepts=jQuery.acceptData;Data.prototype={key:function key(owner){if(!Data.accepts(owner)){return 0}var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor)}}if(!this.cache[unlock]){this.cache[unlock]={}}return unlock},set:function set(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if(typeof data==="string"){cache[data]=value}else{if(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data)}else{for(prop in data){cache[prop]=data[prop]}}}return cache},get:function get(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function access(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function remove(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined){this.cache[unlock]={}}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--){delete cache[name[i]]}}},hasData:function hasData(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function discard(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]]}}};var data_priv=new Data;var data_user=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function hasData(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function data(elem,name,_data2){return data_user.access(elem,name,_data2)},removeData:function removeData(elem,name){data_user.remove(elem,name)},_data:function _data(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function _removeData(elem,name){data_priv.remove(elem,name)}});jQuery.fn.extend({data:function data(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}data_priv.set(elem,"hasDataAttrs",true)}}return data}if((typeof key==="undefined"?"undefined":_typeof2(key))==="object"){return this.each(function(){data_user.set(this,key)})}return access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined){return data}data=data_user.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function removeData(key){return this.each(function(){data_user.remove(this,key)})}});jQuery.extend({queue:function queue(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function dequeue(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function next(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function _queueHooks(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function queue(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function dequeue(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function clearQueue(type){return this.queue(type||"fx",[])},promise:function promise(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function resolve(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var strundefined=typeof undefined==="undefined"?"undefined":_typeof2(undefined);support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function add(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return(typeof jQuery==="undefined"?"undefined":_typeof2(jQuery))!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function remove(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events")}},trigger:function trigger(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,(typeof event==="undefined"?"undefined":_typeof2(event))==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},dispatch:function dispatch(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=_slice2.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function handlers(event,_handlers2){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=_handlers2.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=_handlers2[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<_handlers2.length){handlerQueue.push({elem:this,handlers:_handlers2.slice(delegateCount)})}return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function filter(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function filter(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function fix(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function trigger(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function trigger(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function trigger(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function _default(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function postDispatch(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}},simulate:function simulate(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function preventDefault(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function stopPropagation(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function stopImmediatePropagation(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function handle(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function handler(event){
jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function setup(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}data_priv.access(doc,fix,(attaches||0)+1)},teardown:function teardown(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);data_priv.remove(doc,fix)}else{data_priv.access(doc,fix,attaches)}}}})}jQuery.fn.extend({on:function on(types,selector,data,fn,one){var origFn,type;if((typeof types==="undefined"?"undefined":_typeof2(types))==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return this}if(one===1){origFn=fn;fn=function fn(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function one(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function off(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if((typeof types==="undefined"?"undefined":_typeof2(types))==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function trigger(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function triggerHandler(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=data_priv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur)}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}jQuery.extend({clone:function clone(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},buildFragment:function buildFragment(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==-1){continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment},cleanData:function cleanData(elems){var data,elem,type,key,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(jQuery.acceptData(elem)){key=elem[data_priv.expando];if(key&&(data=data_priv.cache[key])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(data_priv.cache[key]){delete data_priv.cache[key]}}}delete data_user.cache[elem[data_user.expando]]}}});jQuery.fn.extend({text:function text(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function append(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function prepend(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function before(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function after(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},remove:function remove(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))}elem.parentNode.removeChild(elem)}}return this},empty:function empty(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function clone(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function html(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function replaceWith(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;jQuery.cleanData(getAll(this));if(arg){arg.replaceChild(elem,this)}});return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function detach(selector){return this.remove(selector,true)},domManip:function domManip(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}self.domManip(args,callback)})}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function getStyles(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name]}if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function get(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;"+"position:absolute";container.appendChild(div);function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";div.innerHTML="";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}if(window.getComputedStyle){jQuery.extend(support,{pixelPosition:function pixelPosition(){computePixelPositionAndBoxSizingReliable();return pixelPositionVal},boxSizingReliable:function boxSizingReliable(){if(boxSizingReliableVal==null){computePixelPositionAndBoxSizingReliable()}return boxSizingReliableVal},reliableMarginRight:function reliableMarginRight(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);return ret}})}})();jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style){return name}var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function get(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function style(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value==="undefined"?"undefined":_typeof2(value);if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||value!==value){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function css(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function get(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function set(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function expand(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function css(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function show(){return showHide(this,true)},hide:function hide(){return showHide(this)},toggle:function toggle(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function attr(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function removeAttr(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function attr(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(_typeof2(elem.getAttribute)===strundefined){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)}else if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}},removeAttr:function removeAttr(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}},attrHooks:{type:{set:function set(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}}});boolHook={set:function set(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function prop(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function removeProp(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function prop(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){return hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value}else{return hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]}},propHooks:{tabIndex:{get:function get(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}});if(!support.optSelected){jQuery.propHooks.selected={get:function get(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function addClass(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(elem.className!==finalValue){elem.className=finalValue}}}}return this},removeClass:function removeClass(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length===0||typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")}}finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue){elem.className=finalValue}}}}return this},toggleClass:function toggleClass(value,stateVal){var type=typeof value==="undefined"?"undefined":_typeof2(value);if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(type===strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)}this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""}})},hasClass:function hasClass(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function val(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function get(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem))}},select:{get:function get(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function set(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(option.value,values)>=0){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function set(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function hover(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function bind(types,data,fn){return this.on(types,null,data,fn)},unbind:function unbind(types,fn){return this.off(types,null,fn)},delegate:function delegate(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function undelegate(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});jQuery.fn.extend({wrapAll:function wrapAll(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function wrapInner(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function wrap(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function unwrap(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+((typeof v==="undefined"?"undefined":_typeof2(v))==="object"?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function add(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;
}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function serialize(){return jQuery.param(this.serializeArray())},serializeArray:function serializeArray(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function setOffset(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function offset(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(_typeof2(elem.getBoundingClientRect)!==strundefined){box=elem.getBoundingClientRect()}win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function position(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function offsetParent(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset)}else{elem[method]=val}},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});{!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return jQuery}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if((typeof noGlobal==="undefined"?"undefined":_typeof2(noGlobal))===strundefined){window.jQuery=window.$=jQuery}return jQuery})},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _bind=__webpack_require__(112)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _eventBinder=__webpack_require__(113);var _eventBinder2=_interopRequireDefault(_eventBinder);var EventListener=function(){function EventListener(){_classCallCheck(this,EventListener);this.eventBinders=[];this.initialized=false}_createClass(EventListener,[{key:"addEvents",value:function addEvents(){for(var _len=arguments.length,events=Array(_len),_key=0;_key<_len;_key++){events[_key]=arguments[_key]}this.eventBinders=this.eventBinders.concat(events.map(_eventBinder2["default"].create))}},{key:"init",value:function init(){if(this.initialized){throw new Error("Trying to call init on an already initialized event listener")}this.beforeInit();this.bindEvents();this.initialized=true}},{key:"beforeInit",value:function beforeInit(){}},{key:"bindEvents",value:function bindEvents(){var _this=this;this.eventBinders.forEach(function(binder){return binder.bind(_this)})}},{key:"dispose",value:function dispose(){if(!this.initialized){throw new Error("Trying to call dispose on non-initialized event listener")}this.beforeDispose();this.unbindEvents();this.eventBinders=[];this.initialized=false}},{key:"beforeDispose",value:function beforeDispose(){}},{key:"unbindEvents",value:function unbindEvents(){this.eventBinders.forEach(function(binder){return binder.unbind()})}}],[{key:"create",value:function create(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var listener=new(_bind.apply(this,[null].concat(args)));listener.init();return listener}}]);return EventListener}();exports["default"]=EventListener;module.exports=exports["default"]},function(module,exports){exports["default"]=Function.prototype.bind;exports.__esModule=true},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _bind=__webpack_require__(112)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashIsfunction=__webpack_require__(114);var _lodashIsfunction2=_interopRequireDefault(_lodashIsfunction);var _lodashIsobject=__webpack_require__(115);var _lodashIsobject2=_interopRequireDefault(_lodashIsobject);var _lodashIsstring=__webpack_require__(117);var _lodashIsstring2=_interopRequireDefault(_lodashIsstring);var _domEventEmitter=__webpack_require__(118);var _domEventEmitter2=_interopRequireDefault(_domEventEmitter);var EventBinder=function(){function EventBinder(target,eventName,handler){_classCallCheck(this,EventBinder);if(!(0,_lodashIsstring2["default"])(eventName)){throw new Error("Expecting eventName to be a string, got "+(typeof eventName==="undefined"?"undefined":_typeof2(eventName)))}if(!(0,_lodashIsobject2["default"])(target)){throw new Error('Expecting target for event "'+eventName+'" to be an object, got '+(typeof target==="undefined"?"undefined":_typeof2(target)))}if(!(0,_lodashIsfunction2["default"])(handler)){throw new Error('Expecting handler for event "'+eventName+'" to be a function, got '+(typeof handler==="undefined"?"undefined":_typeof2(handler)))}this.target=target;this.eventName=eventName;this.handler=handler}_createClass(EventBinder,[{key:"bind",value:function bind(context){if(this.boundHandler){this.unbind()}this.boundHandler=this.handler.bind(context);this.target.on(this.eventName,this.boundHandler)}},{key:"unbind",value:function unbind(){if(this.boundHandler){this.target.off(this.eventName,this.boundHandler);delete this.boundHandler}}}],[{key:"fromArray",value:function fromArray(array){return new(_bind.apply(this,[null].concat(_toConsumableArray(array))))}},{key:"create",value:function create(o,eventName,handler){if(o instanceof EventBinder){return o}else if(Array.isArray(o)){return EventBinder.create.apply(EventBinder,_toConsumableArray(o))}else if((0,_lodashIsobject2["default"])(o)&&(0,_lodashIsstring2["default"])(eventName)&&(0,_lodashIsfunction2["default"])(handler)){var target=_domEventEmitter2["default"].isEventTarget(o)?new _domEventEmitter2["default"](o):o;for(var _len=arguments.length,args=Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){args[_key-3]=arguments[_key]}return new(_bind.apply(this,[null].concat([target,eventName,handler],args)))}throw new TypeError("Could not infer argument format")}}]);return EventBinder}();exports["default"]=EventBinder;module.exports=exports["default"]},function(module,exports){function isFunction(value){return typeof value=="function"}module.exports=isFunction},function(module,exports,__webpack_require__){var objectTypes=__webpack_require__(116);function isObject(value){return!!(value&&objectTypes[typeof value==="undefined"?"undefined":_typeof2(value)])}module.exports=isObject},function(module,exports){var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};module.exports=objectTypes},function(module,exports){var stringTag="[object String]";function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var objectProto=Object.prototype;var objToString=objectProto.toString;function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}module.exports=isString},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashIsfunction=__webpack_require__(114);var _lodashIsfunction2=_interopRequireDefault(_lodashIsfunction);var _lodashIsobject=__webpack_require__(115);var _lodashIsobject2=_interopRequireDefault(_lodashIsobject);var DomEventEmitter=function(){_createClass(DomEventEmitter,null,[{key:"isEventTarget",value:function isEventTarget(o){return(0,_lodashIsobject2["default"])(o)&&["addEventListener","removeEventListener"].every(function(p){return(0,_lodashIsfunction2["default"])(o[p])})}}]);function DomEventEmitter(target){var useCapture=arguments.length<=1||arguments[1]===undefined?false:arguments[1];_classCallCheck(this,DomEventEmitter);this.target=target;this.useCapture=useCapture}_createClass(DomEventEmitter,[{key:"on",value:function on(eventName,listener){this.target.addEventListener(eventName,listener,this.useCapture)}},{key:"off",value:function off(eventName,listener){this.target.removeEventListener(eventName,listener)}}]);return DomEventEmitter}();exports["default"]=DomEventEmitter;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var defaultBuffered=0;var BufferComponent=function(_EventListener){_inherits(BufferComponent,_EventListener);function BufferComponent(element){_classCallCheck(this,BufferComponent);_get(Object.getPrototypeOf(BufferComponent.prototype),"constructor",this).call(this);this.element=element;this.buffered=defaultBuffered}_createClass(BufferComponent,[{key:"buffered",get:function get(){return this.element.value},set:function set(value){this.element.value=value}}]);return BufferComponent}(_coreEventListener2["default"]);exports["default"]=BufferComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _helpersA11yHelper=__webpack_require__(121);var _activatable=__webpack_require__(40);var _activatable2=_interopRequireDefault(_activatable);var ButtonComponent=function(_ActivatableComponent){_inherits(ButtonComponent,_ActivatableComponent);function ButtonComponent(buttonElement){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,ButtonComponent);_get(Object.getPrototypeOf(ButtonComponent.prototype),"constructor",this).call(this,buttonElement,options);_linkedinSlideshareClientUtils.events.mixin(this);if(options.a11yControlText){var a11yControlTextElement=(0,_helpersA11yHelper.createA11yControlTextElement)(options.a11yControlText);this.adaptedElement.append(a11yControlTextElement)}}_createClass(ButtonComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"click",this.onClick])}},{key:"onClick",value:function onClick(){this.emit("click")}}]);return ButtonComponent}(_activatable2["default"]);exports["default"]=ButtonComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _defineProperty=__webpack_require__(122)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _Object$keys=__webpack_require__(123)["default"];Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultControlTextObj=getDefaultControlTextObj;exports.testControlTextObj=testControlTextObj;exports.testLanguageControlTextObj=testLanguageControlTextObj;exports.getDefaultLanguageControlTextObj=getDefaultLanguageControlTextObj;exports.createA11yControlTextElement=createA11yControlTextElement;var _languageCodes=__webpack_require__(126);var KEY_CODE={TAB:9,ESCAPE:27,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,ARROW_DOWN:40};exports.KEY_CODE=KEY_CODE;var SLIDER_TYPE={PLAYBACK:"playback",VOLUME:"volume"};exports.SLIDER_TYPE=SLIDER_TYPE;var DEFAULT_A11Y_OBJECT={videoPlayerContainerA11yAriaLabel:"video player",bigPlayButtonA11yControlText:"play video",linkedinLogoLinkA11yControlText:"visit linkedin",backButtonA11yControlText:"back button",playButtonA11yControlText:"play",replayButtonA11yControlText:"replay",pauseButtonA11yControlText:"pause",shareButtonA11yControlText:"share",zoomInButtonA11yControlText:"zoom in",zoomOutButtonA11yControlText:"zoom out",zoomSelectA11yControlText:"select zoom value",volumeOnButtonA11yControlText:"volume on",volumeOffButtonA11yControlText:"volume off",fullscreenOnButtonA11yControlText:"fullscreen on",fullscreenOffButtonA11yControlText:"fullscreen off",progressSliderA11yControlText:"playback progress slider",volumeSliderA11yControlText:"volume slider",volumeSliderAriaValueTextA11yControlText:"volume",closeModalButtonA11yControlText:"close share overlay"};var ERROR_MESSAGE_OBJECT={"You aborted the media playback":"You aborted the media playback","A network error caused the media download to fail part-way.":"A network error caused the media download to fail part-way.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"The media could not be loaded, either because the server or network failed or because the format is not supported.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.","No compatible source was found for this media.":"No compatible source was found for this media.","The media is encrypted and we do not have the keys to decrypt it.":"The media is encrypted and we do not have the keys to decrypt it."};var CONTROL_TEXT_OBJECT_MAP={a11y:DEFAULT_A11Y_OBJECT,errorMessage:ERROR_MESSAGE_OBJECT};function getDefaultControlTextObj(controlTextObjType){return CONTROL_TEXT_OBJECT_MAP[controlTextObjType]}function testControlTextObj(controlTextObj,controlTextObjType){if(controlTextObj===undefined)controlTextObj={};var isValidInput=true;if(!(console||console.warn)||window.__karma__){return isValidInput}_Object$keys(CONTROL_TEXT_OBJECT_MAP[controlTextObjType]).forEach(function(controlText){if(!controlTextObj[controlText]){console.warn("Please define "+controlText+" for i18n.");isValidInput=false}});return isValidInput}function testLanguageControlTextObj(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var language=_ref.language;var languages=_ref.languages;if(!language||typeof language!=="string"||_languageCodes.languageCodes.indexOf(language.split("-")[0])===-1){console.warn("language key in languageControlTextObj has error");return false}if(!languages||(typeof languages==="undefined"?"undefined":_typeof2(languages))!=="object"||_Object$keys(languages).indexOf(language)===-1){console.warn("languages key in languageControlTextObj has error");return false}var languagesKey=_Object$keys(languages);languagesKey.forEach(function(key){var errorMessageControlTextObj=languages[key];if(!testControlTextObj(errorMessageControlTextObj,"errorMessage")){return false}return true});return true}function getDefaultLanguageControlTextObj(){var videoLocale="en-US";return{language:videoLocale,languages:_defineProperty({},videoLocale,getDefaultControlTextObj("errorMessage"))}}function createA11yControlTextElement(a11yControlText){var spanElem=document.createElement("span");spanElem.className="a11y-text";spanElem.textContent=a11yControlText;return spanElem}var PlayerStateManager=function(){function PlayerStateManager(){_classCallCheck(this,PlayerStateManager);this.fullscreenOn=false;this.focusActive=false;this.disableA11y=false}_createClass(PlayerStateManager,[{key:"isFullscreenOn",get:function get(){return this.fullscreenOn},set:function set(isFullscreenOn){this.fullscreenOn=isFullscreenOn}},{key:"isFocusActive",get:function get(){return this.focusActive},set:function set(isFocusActive){this.focusActive=isFocusActive}},{key:"isDisableA11y",get:function get(){return this.disableA11y},set:function set(isDisableA11y){this.disableA11y=isDisableA11y}}]);return PlayerStateManager}();exports.PlayerStateManager=PlayerStateManager},function(module,exports,__webpack_require__){var _Object$defineProperty=__webpack_require__(56)["default"];exports["default"]=function(obj,key,value){if(key in obj){_Object$defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj};exports.__esModule=true},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(124),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(125);module.exports=__webpack_require__(11).Object.keys},function(module,exports,__webpack_require__){var toObject=__webpack_require__(28);__webpack_require__(47)("keys",function($keys){return function keys(it){return $keys(toObject(it))}})},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var languageCodes=["aa","ab","af","ak","sq","am","ar","an","hy","as","av","ae","ay","az","ba","bm","eu","be","bn","bh","bi","bs","br","bg","my","ca","ch","ce","zh","cu","cv","kw","co","cr","cs","da","dv","nl","dz","en","eo","et","ee","fo","fj","fi","fr","fy","ff","ka","de","gd","ga","gl","gv","el","gn","gu","ht","ha","he","hz","hi","ho","hr","hu","ig","is","io","ii","iu","ie","ia","id","ik","it","jv","ja","kl","kn","ks","kr","kk","km","ki","rw","ky","kv","kg","ko","kj","ku","lo","la","lv","li","ln","lt","lb","lu","lg","mk","mh","ml","mi","mr","ms","mg","mt","mn","na","nv","nr","nd","ng","ne","nn","nb","no","ny","oc","oj","or","om","os","pa","fa","pi","pl","pt","ps","qu","rm","ro","rn","ru","sg","sa","si","sk","sl","se","sm","sn","sd","so","st","es","sc","sr","ss","su","sw","sv","ty","ta","tt","te","tg","tl","th","bo","ti","to","tn","ts","tk","tr","tw","ug","uk","ur","uz","ve","vi","vo","cy","wa","wo","xh","yi","yo","za","zu"];exports.languageCodes=languageCodes},function(module,exports,__webpack_require__){var _taggedTemplateLiteral=__webpack_require__(128)["default"];var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _Object$keys=__webpack_require__(123)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(['<div class="','"/>'],['<div class="','"/>']);var _hammerjs=__webpack_require__(134);var _hammerjs2=_interopRequireDefault(_hammerjs);var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _lodashDefer=__webpack_require__(135);var _lodashDefer2=_interopRequireDefault(_lodashDefer);var _lodashNoop=__webpack_require__(138);var _lodashNoop2=_interopRequireDefault(_lodashNoop);var _screenfull=__webpack_require__(139);var _screenfull2=_interopRequireDefault(_screenfull);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _helpersTransition=__webpack_require__(141);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var _helpersSlidesSlide=__webpack_require__(151);var _helpersSlidesSlide2=_interopRequireDefault(_helpersSlidesSlide);var CarouselComponent=function(_UIComponent){_inherits(CarouselComponent,_UIComponent);function CarouselComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var window=arguments.length<=2||arguments[2]===undefined?element.ownerDocument.defaultView:arguments[2];return function(){_classCallCheck(this,CarouselComponent);_get(Object.getPrototypeOf(CarouselComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{aspectRatio:null,numPages:null,slideMarginPx:32,startPosition:0,heightOffset:0,swipeSpeed:.8,swipeSpeedEdge:.2,trackContainerHeightOffset:0,initialSlideConfigs:{},classes:{animate:"carousel-animate",initialized:"carousel-initialized",lazyElement:"carousel-lazy-element",slide:"carousel-slide",slideActive:"carousel-slide-active",track:"carousel-track",trackContainer:"carousel-track-container",visiblyHidden:"ssplayer-carousel--visibly-hidden"},selectors:{loader:".ssplayer-loader.ssplayer-carousel-loader-template"},attrs:{index:"data-ssplayer-slide-index"},loadOffsets:{other:[-2,-1,1,2,3,4],first:[-1,1]}});this.window=window;this._validateOptions(this.options);this.zoomScale=1;this.slides=[];this.position=this.options.startPosition;this.numPages=this.options.numPages;this.slideRatio=this.options.aspectRatio;this.startPosition=this.options.startPosition;this.heightOffset=this.options.heightOffset;this.setup()}.apply(this,arguments)}_createClass(CarouselComponent,[{key:"setup",value:function setup(){this.$track=this.adapter.find(this.adaptedElement,"ul");this.adapter.wrap(this.$track,_linkedinJsecure2["default"].mk(_templateObject,this.options.classes.trackContainer));this.$trackContainer=this.adapter.find(this.adaptedElement,"."+this.options.classes.trackContainer);this.adapter.addClass(this.$track,this.options.classes.track);this.adapter.setAttr(this.$trackContainer,"aria-live","polite");this.$track.append(this.createSlideElems(this.numPages));this.$slides=this.adapter.children(this.$track,this.slideSelector)}},{key:"beforeInit",value:function beforeInit(){this.hammer=new _hammerjs2["default"](this.element,{recognizers:[[_hammerjs2["default"].Pan,{direction:_hammerjs2["default"].DIRECTION_HORIZONTAL}]]});var slides=this.adapter.restore(this.$slides);var baseEvents=[[this.element.ownerDocument.defaultView,"resize",this.onWindowResize]];var navigationEvents=[[this.hammer,"panstart panright panleft",this.onPanMove],[this.hammer,"panend",this.onPanEnd]].concat(_toConsumableArray(slides.map(function(el){return[el,"dragstart",function(event){return event.preventDefault()}]})));var mergedEvents=this.numPages>1?baseEvents.concat(navigationEvents):baseEvents;this.addEvents.apply(this,_toConsumableArray(mergedEvents));this.applySlideConfigs(this.options.initialSlideConfigs);this.setDimensions();this.changePosition(this.startPosition,false);this.adapter.addClass(this.adaptedElement,this.options.classes.initialized)}},{key:"createSlideElems",value:function createSlideElems(numElems){var slideClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.slide);var indexAttribute=_linkedinJsecure2["default"].htmlEncode(this.options.attrs.index);var loaderElementTemplate=this.element.querySelector(this.options.selectors.loader);var slideElems=[];for(var i=0;i<numElems;i+=1){var newSlide=new _helpersSlidesSlide2["default"](i,{className:slideClass,indexAttrName:indexAttribute,loaderElementTemplate:loaderElementTemplate});this.slides.push(newSlide);slideElems.push(newSlide.containerElement)}return slideElems}},{key:"applySlideConfigs",value:function applySlideConfigs(configs){var _this=this;_Object$keys(configs).forEach(function(index){_this.applySlideConfigForType(index,configs[index].type,configs[index].config)})}},{key:"applySlideConfigForType",value:function applySlideConfigForType(index,type,config){switch(type){case"image":this.applyImageSlideConfig({index:index,config:config});break;default:throw new Error("Cannot generate slide node for type: "+type)}}},{key:"applyTranscriptToSlide",value:function applyTranscriptToSlide(index,transcript){this.slides[index].imageElement.setAttribute("alt",transcript)}},{key:"applyImageSlideConfig",value:function applyImageSlideConfig(_ref){var index=_ref.index;var config=_ref.config;var _ref$clearSlide=_ref.clearSlide;var clearSlide=_ref$clearSlide===undefined?true:_ref$clearSlide;this._validateImageSlideConfig(index,config);var slideForIndex=this.slides[index];slideForIndex.update(config.src,{attrsToClear:_Object$keys(this.options.attrs),isPortrait:this.isPortrait,force:clearSlide});if(index===this.position){slideForIndex.loadImage()}}},{key:"setDimensions",value:function setDimensions(){this.slideWidth=this.element.parentElement.getBoundingClientRect().width;this.slideHeight=this.slideWidth/this.slideRatio;if(_screenfull2["default"].element===this.element.parentElement||this.options.constrainHeight){var heightOffset=_screenfull2["default"].element===this.element.parentElement?0:this.heightOffset;var winHeight=this.adapter.getHeight(this.adapter.adapt(this.window))-heightOffset;if(this.slideHeight>winHeight&&this.adapter.getHeight(this.adaptedElement)>0){this.slideHeight=winHeight;this.slideWidth=this.slideHeight*this.slideRatio}}this.slideWidth=Math.ceil(this.slideWidth*this.zoomScale);this.slideHeight=Math.floor(this.slideHeight*this.zoomScale);this.adapter.setWidth(this.$slides,this.slideWidth);this.adapter.setHeight(this.$slides,this.slideHeight);this.adapter.setWidth(this.$track,this.slideCount*(this.slideWidth+this.options.slideMarginPx));var actualSlideHeight=this.$slides.get(0).getBoundingClientRect().height;this.adapter.setHeight(this.$trackContainer,actualSlideHeight+this.options.trackContainerHeightOffset);this.adapter.setWidth(this.$trackContainer,this.slideWidth)}},{key:"toggleAnimation",value:function toggleAnimation(enable){this.adapter.toggleClass(this.$track,this.options.classes.animate,enable)}},{key:"toggleAccessibilityVisibility",value:function toggleAccessibilityVisibility(shouldHide){var shouldHideVisibly=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1];this.adaptedElement.attr("aria-hidden",shouldHide);if(typeof shouldHideVisibly!=="undefined"){this.adaptedElement.toggleClass(this.options.classes.visiblyHidden,shouldHideVisibly)}}},{key:"onWindowResize",value:function onWindowResize(){var _this2=this;setTimeout(function(){_this2.setDimensions();_this2.changePosition(_this2.position,false);_this2.emit("resize")},1)}},{key:"onPanMove",value:function onPanMove(_ref2){var deltaX=_ref2.deltaX;var center=_ref2.center;var first=this.position===0&&deltaX>0;var last=this.position===this.slideCount-1&&deltaX<0;var _options=this.options;var swipeSpeed=_options.swipeSpeed;var swipeSpeedEdge=_options.swipeSpeedEdge;var delta=deltaX*(first||last?swipeSpeedEdge:swipeSpeed);if(center.x!==0||center.y!==0){this.move(this.position*(this.slideWidth+this.options.slideMarginPx)-delta)}}},{key:"onPanEnd",value:function onPanEnd(event){if(Math.abs(event.deltaX)>=this.slideWidth/6){if(event.deltaX>0){this.previous()}else{this.next()}}else{this.changePosition(this.position,true)}}},{key:"setZoom",value:function setZoom(scale){var isZoomed=scale!==1;this.zoomScale=scale;this.adapter.toggleClass(this.$trackContainer,"carousel-track-container--single-page-mode",isZoomed);this.adaptedElement.toggleClass("ssplayer-carousel--single-page-mode",isZoomed);this.onWindowResize()}},{key:"next",value:function next(){this.changePosition(this.position+1,true)}},{key:"previous",value:function previous(){this.changePosition(this.position-1,true)}},{key:"changePosition",value:function changePosition(position,animate){var _this3=this;var callback=arguments.length<=2||arguments[2]===undefined?_lodashNoop2["default"]:arguments[2];var newPos=Math.max(0,Math.min(position||0,this.slideCount-1));var oldPos=this.position;var slide=this.slides[newPos];var offset=newPos*(this.slideWidth+this.options.slideMarginPx);animate=animate&&Math.abs(oldPos-newPos)===1;this.adapter.removeClass(this.$slides,this.options.classes.slideActive);this.adapter.setAttr(this.$slides,"tabindex",-1);this.adapter.setAttr(this.$slides,"aria-hidden",true);slide.setActive(this.options.classes.slideActive);
slide.loadImage();this._fireChangeEvent("positionChange",slide.containerElement,oldPos,newPos);this.position=newPos;this.move(offset,animate,function(){_this3._fireChangeEvent("afterPositionChange",slide.containerElement,oldPos,newPos);var startPosition=newPos===_this3.startPosition?"first":"other";var offsets=_this3.options.loadOffsets[startPosition];offsets.forEach(function(offsetBy){if(_this3.slides[newPos+offsetBy]){_this3.slides[newPos+offsetBy].loadImage()}});callback()})}},{key:"move",value:function move(offset,animate){var _this4=this;var callback=arguments.length<=2||arguments[2]===undefined?_lodashNoop2["default"]:arguments[2];this.toggleAnimation(animate);offset*=-1;this.adapter.setCss(this.$track,"transform","translateX("+offset+"px)");if(animate&&_helpersTransition.transitionEndEvent){this.adapter.one(this.$track,_helpersTransition.transitionEndEvent,function(){_this4.toggleAnimation(false);callback()})}else{(0,_lodashDefer2["default"])(callback)}}},{key:"getSlideElement",value:function getSlideElement(index){return this.slides[index].containerElement}},{key:"_fireChangeEvent",value:function _fireChangeEvent(name,slideElement,oldPosition,newPosition){if(this.initialized&&oldPosition!==newPosition||newPosition===this.slideCount-1||newPosition===0){this.emit(name,{slideElement:slideElement,oldPosition:oldPosition,newPosition:newPosition,position:newPosition,length:this.slideCount,slideCount:this.slideCount})}}},{key:"_validateOptions",value:function _validateOptions(options){if(!options.aspectRatio){throw new Error("Carousel: Must be initialized with aspectRatio!")}if(!options.numPages){throw new Error("Carousel: Must be initialized with numPages!")}}},{key:"_validateImageSlideConfig",value:function _validateImageSlideConfig(index,config){if(index<0||index>this.numPages-1){throw new RangeError("Carousel: Attempting to apply a config to out of range index: "+index)}if(typeof config.src!=="string"){throw new TypeError("No src string in slide config at index: "+index)}}},{key:"isPortrait",get:function get(){return this.slideRatio<1}},{key:"slideCount",get:function get(){return(this.$slides||[]).length}},{key:"isOnFirstPage",get:function get(){return this.position===this.startPosition}}]);return CarouselComponent}(_ui2["default"]);exports["default"]=CarouselComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _Object$freeze=__webpack_require__(129)["default"];var _Object$defineProperties=__webpack_require__(132)["default"];exports["default"]=function(strings,raw){return _Object$freeze(_Object$defineProperties(strings,{raw:{value:_Object$freeze(raw)}}))};exports.__esModule=true},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(130),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(131);module.exports=__webpack_require__(11).Object.freeze},function(module,exports,__webpack_require__){var isObject=__webpack_require__(31);__webpack_require__(47)("freeze",function($freeze){return function freeze(it){return $freeze&&isObject(it)?$freeze(it):it}})},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(133),__esModule:true}},function(module,exports,__webpack_require__){var $=__webpack_require__(16);module.exports=function defineProperties(T,D){return $.setDescs(T,D)}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(window,document,exportName,undefined){var VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"];var TEST_ELEMENT=document.createElement("div");var TYPE_FUNCTION="function";var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true}return false}function each(obj,iterator,context){var i;if(!obj){return}if(obj.forEach){obj.forEach(iterator,context)}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}}}function deprecate(method,name,message){var deprecationMessage="DEPRECATED METHOD: "+name+"\n"+message+" AT \n";return function(){var e=new Error("get-stack-trace");var stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var log=window.console&&(window.console.warn||window.console.log);if(log){log.call(window.console,deprecationMessage,stack)}return method.apply(this,arguments)}}var assign;if(typeof Object.assign!=="function"){assign=function assign(target){if(target===undefined||target===null){throw new TypeError("Cannot convert undefined or null to object")}var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey]}}}}return output}}else{assign=Object.assign}var extend=deprecate(function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||merge&&dest[keys[i]]===undefined){dest[keys[i]]=src[keys[i]]}i++}return dest},"extend","Use `assign`.");var merge=deprecate(function merge(dest,src){return extend(dest,src,true)},"merge","Use `assign`.");function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){assign(childP,properties)}}function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments)}}function boolOrFn(val,args){if((typeof val==="undefined"?"undefined":_typeof2(val))==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args)}return val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false)})}function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false)})}function hasParent(node,parent){while(node){if(node==parent){return true}node=node.parentNode}return false}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find)}else{var i=0;while(i<src.length){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find){return i}i++}return-1}}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i])}values[i]=val;i++}if(sort){if(!key){results=results.sort()}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key]})}}return results}function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=prefix?prefix+camelProp:property;if(prop in obj){return prop}i++}return undefined}var _uniqueId=1;function uniqueId(){return _uniqueId++}function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window}var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH="ontouchstart"in window;var SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH="touch";var INPUT_TYPE_PEN="pen";var INPUT_TYPE_MOUSE="mouse";var INPUT_TYPE_KINECT="kinect";var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=["x","y"];var PROPS_CLIENT_XY=["clientX","clientY"];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev)}};this.init()}Input.prototype={handler:function handler(){},init:function init(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function destroy(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput}else if(!SUPPORT_TOUCH){Type=MouseInput}else{Type=TouchMouseInput}return new Type(manager,inputHandler)}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen===0;var isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen===0;input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={}}input.eventType=eventType;computeInputData(manager,input);manager.emit("hammer.input",input);manager.recognize(input);manager.session.prevInput=input}function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input)}if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input)}else if(pointersLength===1){session.firstMultiple=false}var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x;input.overallVelocityY=overallVelocity.y;input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y;input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;input.maxPointers=!session.prevInput?input.pointers.length:input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers;computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target}input.target=target}function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y}}input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y)}function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX;var deltaY=input.deltaY-last.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=abs(v.x)>abs(v.y)?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction}input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction}function simpleCloneInputData(input){var pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++}return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)}}var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++}return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){if(x===y){return DIRECTION_NONE}if(abs(x)>=abs(y)){return x<0?DIRECTION_LEFT:DIRECTION_RIGHT}return y<0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){if(!props){props=PROPS_XY}var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){if(!props){props=PROPS_XY}var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI}function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY)}function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS="mousedown";var MOUSE_WINDOW_EVENTS="mousemove mouseup";function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.pressed=false;Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true}if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END}if(!this.pressed){return}if(eventType&INPUT_END){this.pressed=false}this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev})}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS="pointerdown";var POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";if(window.MSPointerEvent&&!window.PointerEvent){POINTER_ELEMENT_EVENTS="MSPointerDown";POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"}function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace("ms","");var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=pointerType==INPUT_TYPE_TOUCH;var storeIndex=inArray(store,ev.pointerId,"pointerId");if(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true}if(storeIndex<0){return}store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1)}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS="touchstart";var SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel";function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments)}inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START){this.started=true}if(!this.started){return}var touches=normalizeSingleTouches.call(this,ev,type);if(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false}this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}});function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),"identifier",true)}return[all,changed]}var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments)}inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return}this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches]}var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target)});if(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++}}i=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i])}if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier]}i++}if(!changedTargetTouches.length){return}return[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",true),changedTargetTouches]}var DEDUP_TIMEOUT=2500;var DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);this.primaryTouch=null;this.lastTouches=[]}inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=inputData.pointerType==INPUT_TYPE_TOUCH,isMouse=inputData.pointerType==INPUT_TYPE_MOUSE;if(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents){return}if(isTouch){recordTouches.call(this,inputEvent,inputData)}else if(isMouse&&isSyntheticEvent.call(this,inputData)){return}this.callback(manager,inputEvent,inputData)},destroy:function destroy(){this.touch.destroy();this.mouse.destroy()}});function recordTouches(eventType,eventData){if(eventType&INPUT_START){this.primaryTouch=eventData.changedPointers[0].identifier;setLastTouch.call(this,eventData)}else if(eventType&(INPUT_END|INPUT_CANCEL)){setLastTouch.call(this,eventData)}}function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;var removeLastTouch=function removeLastTouch(){var i=lts.indexOf(lastTouch);if(i>-1){lts.splice(i,1)}};setTimeout(removeLastTouch,DEDUP_TIMEOUT)}}function isSyntheticEvent(eventData){var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i];var dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE){return true}}return false}var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction");var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE="compute";var TOUCH_ACTION_AUTO="auto";var TOUCH_ACTION_MANIPULATION="manipulation";var TOUCH_ACTION_NONE="none";var TOUCH_ACTION_PAN_X="pan-x";var TOUCH_ACTION_PAN_Y="pan-y";var TOUCH_ACTION_MAP=getTouchActionProps();function TouchAction(manager,value){this.manager=manager;this.set(value)}TouchAction.prototype={set:function set(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute()}if(NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value}this.actions=value.toLowerCase().trim()},update:function update(){this.set(this.manager.options.touchAction)},compute:function compute(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction())}});return cleanTouchActions(actions.join(" "))},preventDefaults:function preventDefaults(input){var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return}var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=input.pointers.length===1;var isTapMovement=input.distance<2;var isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime){return}}if(hasPanX&&hasPanY){return}if(hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL){return this.preventSrc(srcEvent)}},preventSrc:function preventSrc(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault()}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE}var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_NONE}if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y}if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION}return TOUCH_ACTION_AUTO}function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION){return false}var touchMap={};var cssSupports=window.CSS&&window.CSS.supports;["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(val){touchMap[val]=cssSupports?window.CSS.supports("touch-action",val):true});return touchMap}var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.options=assign({},this.defaults,options||{});this.id=uniqueId();this.manager=null;this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[]}Recognizer.prototype={defaults:{},set:function set(options){assign(this.options,options);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function recognizeWith(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this)){return this}var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this)}return this},dropRecognizeWith:function dropRecognizeWith(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)){return this}otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this},requireFailure:function requireFailure(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this)){return this}var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this)}return this},dropRequireFailure:function dropRequireFailure(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this)){return this}otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1)}return this},hasRequireFailures:function hasRequireFailures(){return this.requireFail.length>0},canRecognizeWith:function canRecognizeWith(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function emit(input){var self=this;var state=this.state;function emit(event){self.manager.emit(event,input)}if(state<STATE_ENDED){emit(self.options.event+stateStr(state))}emit(self.options.event);if(input.additionalEvent){emit(input.additionalEvent)}if(state>=STATE_ENDED){emit(self.options.event+stateStr(state))}},tryEmit:function tryEmit(input){if(this.canEmit()){return this.emit(input)}this.state=STATE_FAILED},canEmit:function canEmit(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false}i++}return true},recognize:function recognize(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return}if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE}this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone)}},process:function process(inputData){},getTouchAction:function getTouchAction(){},reset:function reset(){}};function stateStr(state){if(state&STATE_CANCELLED){return"cancel"}else if(state&STATE_ENDED){return"end"}else if(state&STATE_CHANGED){return"move"}else if(state&STATE_BEGAN){return"start"}return""}function directionStr(direction){if(direction==DIRECTION_DOWN){return"down"}else if(direction==DIRECTION_UP){return"up"}else if(direction==DIRECTION_LEFT){return"left"}else if(direction==DIRECTION_RIGHT){return"right"}return""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer)}return otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function attrTest(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers},process:function process(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED}else if(!(state&STATE_BEGAN)){return STATE_BEGAN}return state|STATE_CHANGED}return STATE_FAILED}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null}inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function getTouchAction(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y)}if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X)}return actions},directionTest:function directionTest(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=x===0?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX)}else{direction=y===0?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY)}}input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function attrTest(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function emit(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){input.additionalEvent=this.options.event+direction}this._super.emit.call(this,input)}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function getTouchAction(){return[TOUCH_ACTION_NONE]},attrTest:function attrTest(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function emit(input){if(input.scale!==1){var inOut=input.scale<1?"in":"out";input.additionalEvent=this.options.event+inOut}this._super.emit.call(this,input)}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null}inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function getTouchAction(){return[TOUCH_ACTION_AUTO]},process:function process(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime){this.reset()}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit()},options.time,this)}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED}return STATE_FAILED},reset:function reset(){clearTimeout(this._timer)},emit:function emit(input){if(this.state!==STATE_RECOGNIZED){return}if(input&&input.eventType&INPUT_END){this.manager.emit(this.options.event+"up",input)}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input)}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function getTouchAction(){return[TOUCH_ACTION_NONE]},attrTest:function attrTest(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function getTouchAction(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function attrTest(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.overallVelocity}else if(direction&DIRECTION_HORIZONTAL){velocity=input.overallVelocityX}else if(direction&DIRECTION_VERTICAL){velocity=input.overallVelocityY}return this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function emit(input){var direction=directionStr(input.offsetDirection);if(direction){this.manager.emit(this.options.event+direction,input)}this.manager.emit(this.options.event,input)}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;
this.pCenter=false;this._timer=null;this._input=null;this.count=0}inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function getTouchAction(){return[TOUCH_ACTION_MANIPULATION]},process:function process(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if(input.eventType&INPUT_START&&this.count===0){return this.failTimeout()}if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout()}var validInterval=this.pTime?input.timeStamp-this.pTime<options.interval:true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1}else{this.count+=1}this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit()},options.interval,this);return STATE_BEGAN}}}return STATE_FAILED},failTimeout:function failTimeout(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED},this.options.interval,this);return STATE_FAILED},reset:function reset(){clearTimeout(this._timer)},emit:function emit(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options)}Hammer.VERSION="2.0.7";Hammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,enable:true,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){this.options=assign({},Hammer.defaults,options||{});this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(this.options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3])},this)}Manager.prototype={set:function set(options){assign(this.options,options);if(options.touchAction){this.touchAction.update()}if(options.inputTarget){this.input.destroy();this.input.target=options.inputTarget;this.input.init()}return this},stop:function stop(force){this.session.stopped=force?FORCED_STOP:STOP},recognize:function recognize(inputData){var session=this.session;if(session.stopped){return}this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED){curRecognizer=session.curRecognizer=null}var i=0;while(i<recognizers.length){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData)}else{recognizer.reset()}if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer}i++}},get:function get(recognizer){if(recognizer instanceof Recognizer){return recognizer}var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i]}}return null},add:function add(recognizer){if(invokeArrayArg(recognizer,"add",this)){return this}var existing=this.get(recognizer.options.event);if(existing){this.remove(existing)}this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer},remove:function remove(recognizer){if(invokeArrayArg(recognizer,"remove",this)){return this}recognizer=this.get(recognizer);if(recognizer){var recognizers=this.recognizers;var index=inArray(recognizers,recognizer);if(index!==-1){recognizers.splice(index,1);this.touchAction.update()}}return this},on:function on(events,handler){if(events===undefined){return}if(handler===undefined){return}var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler)});return this},off:function off(events,handler){if(events===undefined){return}var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event]}else{handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1)}});return this},emit:function emit(event,data){if(this.options.domEvents){triggerDomEvent(event,data)}var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return}data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault()};var i=0;while(i<handlers.length){handlers[i](data);i++}},destroy:function destroy(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function toggleCssProps(manager,add){var element=manager.element;if(!element.style){return}var prop;each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name);if(add){manager.oldCssProps[prop]=element.style[prop];element.style[prop]=value}else{element.style[prop]=manager.oldCssProps[prop]||""}});if(!add){manager.oldCssProps={}}}function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent)}assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});var freeGlobal=typeof window!=="undefined"?window:typeof self!=="undefined"?self:{};freeGlobal.Hammer=Hammer;{!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})(window,document,"Hammer")},function(module,exports,__webpack_require__){var baseDelay=__webpack_require__(136),restParam=__webpack_require__(137);var defer=restParam(function(func,args){return baseDelay(func,1,args)});module.exports=defer},function(module,exports){var FUNC_ERROR_TEXT="Expected a function";function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}module.exports=baseDelay},function(module,exports){var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}module.exports=restParam},function(module,exports){function noop(){}module.exports=noop},function(module,exports){(function(){var document=typeof window!=="undefined"&&typeof window.document!=="undefined"?window.document:{};var isCommonjs=typeof module!=="undefined"&&module.exports;var keyboardAllowed=typeof Element!=="undefined"&&"ALLOW_KEYBOARD_INPUT"in Element;var fn=function(){var val;var fnMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var i=0;var l=fnMap.length;var ret={};for(;i<l;i++){val=fnMap[i];if(val&&val[1]in document){for(i=0;i<val.length;i++){ret[fnMap[0][i]]=val[i]}return ret}}return false}();var eventNameMap={change:fn.fullscreenchange,error:fn.fullscreenerror};var screenfull={request:function request(elem){var request=fn.requestFullscreen;elem=elem||document.documentElement;if(/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)){elem[request]()}else{elem[request](keyboardAllowed?Element.ALLOW_KEYBOARD_INPUT:{})}},exit:function exit(){document[fn.exitFullscreen]()},toggle:function toggle(elem){if(this.isFullscreen){this.exit()}else{this.request(elem)}},onchange:function onchange(callback){this.on("change",callback)},onerror:function onerror(callback){this.on("error",callback)},on:function on(event,callback){var eventName=eventNameMap[event];if(eventName){document.addEventListener(eventName,callback,false)}},off:function off(event,callback){var eventName=eventNameMap[event];if(eventName){document.removeEventListener(eventName,callback,false)}},raw:fn};if(!fn){if(isCommonjs){module.exports=false}else{window.screenfull=false}return}Object.defineProperties(screenfull,{isFullscreen:{get:function get(){return Boolean(document[fn.fullscreenElement])}},element:{enumerable:true,get:function get(){return document[fn.fullscreenElement]}},enabled:{enumerable:true,get:function get(){return Boolean(document[fn.fullscreenEnabled])}}});if(isCommonjs){module.exports=screenfull}else{window.screenfull=screenfull}})()},function(module,exports,__webpack_require__){(function(global,factory){module.exports=factory()})(this,function(){var VERY_COMMON_ATTRS="aria-[a-z0-9_\\-]+|class|data-[a-z0-9_\\-]+|dir|id"+"|role|tabindex";var COMMON_ATTRS="alt|checked|colgroup|cols|colspan|disabled|height|hidden|maxlength"+"|method|multiple|name|placeholder|readonly|rel|required|rows|rowspan|spellcheck|target|title|width";var OTHER_ATTRS="border|caption|color|controls|coords|hreflang|label|lang|loop"+"|marginheight|marginwidth|preload|reversed|type|usemap|clear|headers|ismap"+"|start|datetime|accept|max|min|size|step|style|cellspacing|cellpadding";var TEXT_CONTENT_PROP=hasTextContent()?"textContent":"innerText";var FORMATTING_TAGS=["b","del","em","i","s","strong","sub","sup"];var ALLOWED_TAGS=FORMATTING_TAGS.concat(["a","abbr","address","area","article","aside","audio","bdi","bdo","big","blockquote","br","button","center","cite","code","datalist","dd","details","dfn","div","dl","dt","fieldset","figcaption","figure","font","footer","h1","h2","h3","h4","h5","h6","header","hgroup","hr","img","ins","kbd","label","legend","li","map","mark","marquee","nav","nobr","ol","p","pre","q","rp","rt","ruby","samp","section","small","source","span","strike","table","tbody","td","tfoot","th","thead","time","tr","u","ul","var","video","wbr"]);var ALLOWED_ATTRS=[VERY_COMMON_ATTRS,COMMON_ATTRS,OTHER_ATTRS].join("|");var ALLOWED_URL_ATTRS="href|src";var ALLOWED_URL_PREFIXES="data:image/(?:gif|jpg|jpeg|png);base64,";var constants__ALLOWED_URL_SCHEMES="https?|ftp|mailto";function ValueString(){}function hasTextContent(){if(typeof document==="undefined"){return true}return"textContent"in document.createElement("div")}function log(message,level){level=level||"log";if(window&&window.jet&&level.toLowerCase()==="error"){try{throw new Error(message)}catch(e){try{window.jet.error(e)}catch(recatch){}}}if(typeof console!=="undefined"&&typeof console[level]==="function"){console[level](message)}}var htmlEncode=function(){var rHtmlChars=/[&<>"'\u0000\\=]/g,htmlCharsToEntities;htmlCharsToEntities={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","\0":"�","\\":"&#92;","=":"&#61;"};return function(str){if(str===null||typeof str==="undefined"){return null}return str.toString().replace(rHtmlChars,function(match){return htmlCharsToEntities[match]})}}();var htmlUnencode=function(){var helperDiv,rEntities=/&(?:([a-z0-9]+)|#x([\da-f]{1,6})|#(\d{1,8}));/gi,decodeNumericEntity;if(typeof document==="undefined"){return function(){throw new Error("document is undefined (i.e. you are probably in Node.js)")}}helperDiv=document.createElement("div");var decodedEntities={nbsp:" ",lt:"<",gt:">",amp:"&",quot:'"'};function decodeNamedEntity(entity){var decoded;if(decodedEntities.hasOwnProperty(entity)){return decodedEntities[entity]}helperDiv.innerHTML="&"+entity+";";decoded=helperDiv[TEXT_CONTENT_PROP];decodedEntities[entity]=decoded;return decoded}if(typeof String.fromCodePoint==="function"){decodeNumericEntity=function decodeNumericEntity(num){return String.fromCodePoint(num)}}else{decodeNumericEntity=function decodeNumericEntity(num){return num<=65535?String.fromCharCode(num):"�"}}return function htmlUnencode(encodedText){if(encodedText===null||typeof encodedText==="undefined"){return null}return(encodedText+"").replace(rEntities,function(match,named,hex,dec){if(named){return decodeNamedEntity(named)}else if(hex||dec){return decodeNumericEntity(parseInt(hex||dec,hex?16:10)||65533)}return"�"})}}();function reEncode(string){return htmlEncode(htmlUnencode(string))}function text(string){log("jSecure.text() is deprecated. Please use jSecure.htmlEncode().","warn");return htmlEncode(string)}var isArray=Array.isArray||function(arg){return Object.prototype.toString.call(arg)==="[object Array]"};function containsHTML(string){return/[<&]/.test(string)}function extend(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}return target}function flattenShallow(array){return array.reduce(function(newArray,el){return newArray.concat(el)},[])}var forEach=function(){if(Array.prototype.forEach){return function(array,fn){Array.prototype.forEach.call(array,fn)}}return function(array,fn){for(var i=0,length=array.length;i<length;i++){fn(array[i],i)}}}();var OPTIONAL_WHITESPACE="[ \t\r\n]*";var SOME_WHITESPACE="[ \t\r\n]+";function generateWhitelist(options){options=isArray(options)?options:[options];var tags,attrs,checkUrlAttrs,captureGroupCount=0,r="<(?!/?";r+="(?:";forEach(options,function(o,idx){tags=o.tags||ALLOWED_TAGS;attrs=o.attrs||ALLOWED_ATTRS;checkUrlAttrs=o.checkUrlAttrs||false;if(idx!==0){r+="|"}r+="(?:"+tags.join("|")+")";r+="(?:";r+=OPTIONAL_WHITESPACE;r+="|"+SOME_WHITESPACE;r+="(?:(?:";r+="(?:"+attrs+")"+"(?:=([\"'])[^'\"<>]*\\"+ ++captureGroupCount+")?";if(checkUrlAttrs){r+="|(?:"+ALLOWED_URL_ATTRS+")"+"=([\"'])(?:(?:"+constants__ALLOWED_URL_SCHEMES+")(?::|&#(?:58|x3a);)|(?:"+ALLOWED_URL_PREFIXES+")|[/.#?]|&#(?:35|4[67]|63|x(?:2[3ef]|3f));)[^'\"<>]*\\"+ ++captureGroupCount}r+=")"+OPTIONAL_WHITESPACE+")+";r+=")"});r+=")";r+="/?>)";return new RegExp(r,"i")}function createHTMLWhitelist(tags){tags=tags||ALLOWED_TAGS;return generateWhitelist({tags:tags,checkUrlAttrs:true})}function createCustomElementWhitelist(){var liIconCustomElement={tag:"li-icon",attrs:"active|a11y-text|animate|color|size|type"};return generateWhitelist([{tags:ALLOWED_TAGS,checkUrlAttrs:true},{tags:[liIconCustomElement.tag],attrs:[VERY_COMMON_ATTRS,liIconCustomElement.attrs].join("|"),checkUrlAttrs:false}])}function isSafeHTML(string,options){var isSafe=false,rHtmlWhitelist;options=options||{};var customTagWhitelist=options.allowTags,checkCustomElement=options.hasCustomElementMarkup!==false;if(customTagWhitelist){rHtmlWhitelist=createHTMLWhitelist(customTagWhitelist);return!rHtmlWhitelist.test(string)}else if(checkCustomElement){return!isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT.test(string)}else{return!isSafeHTML.R_UNSAFE_HTML.test(string)}return isSafe}isSafeHTML.R_UNSAFE_HTML=createHTMLWhitelist();isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT=createCustomElementWhitelist();function stripTags(string){return string.replace(/<[^>]*>|[<>'"&\\]/g,"")}function processString(string,replacements,options){if(string===null||typeof string==="undefined"){return null}string=string.toString();var replacedString=replacements?replacePlaceholders(string,replacements):string,origString=string;if(containsHTML(replacedString)&&!isSafeHTML(replacedString,options)){replacedString=stripTags(replacedString);log("Content contains non-whitelisted tags or attributes:\n"+"Content: "+origString,"error")}return replacedString}function replacePlaceholders(string,replacements){var processedReplacements={};return string.replace(/\{([^}]+)\}/g,function(match,placeholder){var replacement=match,isString,isNumber;if(processedReplacements.hasOwnProperty(placeholder)){return processedReplacements[placeholder]}if(replacements.hasOwnProperty(placeholder)){replacement=replacements[placeholder];isString=typeof replacement==="string";isNumber=typeof replacement==="number";if(!isString&&!(replacement instanceof ValueString)&&!isNumber){throw new Error("Only strings, numbers, and jSecure types are allowed as placeholder replacements.")}replacement=isString?htmlEncode(replacement):replacement.toString()}processedReplacements[placeholder]=replacement;return replacement})}function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first}var wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;var rtagName=/<([\w:]+)/;function buildFragment(htmls,context){var tag,wrap,fragment=context.createDocumentFragment(),wrapped,tmp,nodes=[],html,i,j,l;for(i=0,l=htmls.length;i<l;i++){html=htmls[i];if(html||html===0){if(typeof html==="string"){tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(html)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;wrapped=wrap[1]+html+wrap[2];setElementContent(tmp,wrapped);j=wrap[0];while(j--){if(tmp.lastChild&&tmp.lastChild.nodeType===Node.ELEMENT_NODE){tmp=tmp.lastChild}}merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}else{merge(nodes,html.nodeType?[html]:html)}}}fragment.textContent="";i=0;html=nodes[i];while(html){fragment.appendChild(html);i++;html=nodes[i]}return fragment}function parseHTML(template,context){context=context||document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument(""):document;var parsed;if(typeof template==="string"){parsed=buildFragment([template],context)}else if(isArray(template)){parsed=buildFragment(template,context)}else{return template}return merge([],parsed.childNodes)}var processTemplate=processString;var sanitizeHTML=processString;function setElementContent(el,template,replacements){var processedTemplate=processString(template,replacements);if(containsHTML(processedTemplate)){el.innerHTML=processedTemplate}else{el[TEXT_CONTENT_PROP]=processedTemplate}return processedTemplate}function parseSelector(selector){var rQuickExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;if(typeof selector==="string"&&rQuickExpr.test(selector)){return[]}return selector}function unsafe(text){return text}function UnsafeString(string,options){if(!(this instanceof UnsafeString)){return new UnsafeString(string,options)}options=options||{};options.allowTags=options.allowTags?flattenShallow(options.allowTags):null;this._string=string;this._options=options}UnsafeString.prototype=extend(new ValueString,{toString:function toString(){var string=this._string,stringVal=this._stringVal,origString=string;if(stringVal!==undefined){return stringVal}if(!isSafeHTML(string,this._options)){origString=string;string=stripTags(string);log("UnsafeString contains non-whitelisted tags or attributes.\n"+"String: "+origString,"error")}this._stringVal=string;return string}});function mk(quasis){for(var _len=arguments.length,params=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){params[_key-1]=arguments[_key]}var html="",param=undefined,l=params.length;if(quasis){quasis.forEach(function(string,i){html+=string;if(i<l){param=params[i];if(param instanceof UnsafeString){html+=param}else{html+=htmlEncode(param)}}})}return sanitizeHTML(html)}var _url__ALLOWED_URL_SCHEMES="https?|ftp|mailto|tel|sms|blob|voyager|android-app|linkedin|chrome-extension";var ALLOWED_DATA_URI_SCHEMES="data:(?:(?:image/(?:gif|jpe?g|png))|(?:application/x-font-woff)|(?:font/(?:opentype|ttf)))[;,]";var RELATIVE_HASH_OR_QUERY_ONLY="[/.#?]";var rALL_SPACES=/ /g;var rBAD_CHARS=/[\s\u0000<>"]|%00/;var rBACKSLASH=/\\/;var rDOT_DOT=/([.]|%2e){2}/i;var rAllowedStartOfUrl=new RegExp("^(?:"+_url__ALLOWED_URL_SCHEMES+"|"+ALLOWED_DATA_URI_SCHEMES+"|"+RELATIVE_HASH_OR_QUERY_ONLY+")");function sanitizeUrl(url){var testUrl=undefined;var defaultUrl="invalid://";if(typeof url!=="string"){log("jSecure Warning: url must be a string","error");return defaultUrl}testUrl=url.trim();if(testUrl.indexOf(" ")>-1){log("jSecure Warning: url should not contain spaces: "+url,"warn");testUrl=testUrl.replace(rALL_SPACES,"+")}if(!rAllowedStartOfUrl.test(testUrl)){log("jSecure Error: URL should be absolute with allowed schemas, relative, a hash fragment or query string. "+url,"error");return defaultUrl}if(rBAD_CHARS.test(testUrl)){log("jSecure Error: not valid url character found in url: "+url,"error");return defaultUrl}var path=testUrl.split("?")[0];if(rBACKSLASH.test(path)||rDOT_DOT.test(path)||rDOT_DOT.test(decodeURI(path))){log("jSecure Error: malicious data found in url path: "+path,"error");return defaultUrl}return url}var _redirector={redirect:function redirect(sanitizedUrl){if(window){window.location.href=sanitizedUrl}}};function _url__redirect(url){var sanitizedUrl=sanitizeUrl(url);if(sanitizedUrl===url){_redirector.redirect(sanitizedUrl)}}var index={ALLOWED_TAGS:ALLOWED_TAGS,FORMATTING_TAGS:FORMATTING_TAGS,htmlEncode:htmlEncode,htmlUnencode:htmlUnencode,log:log,mk:mk,parseHTML:parseHTML,parseSelector:parseSelector,processTemplate:processTemplate,reEncode:reEncode,_redirector:_redirector,redirect:_url__redirect,sanitizeHTML:sanitizeHTML,sanitizeUrl:sanitizeUrl,setElementContent:setElementContent,text:text,unsafe:unsafe,UnsafeString:UnsafeString};return index})},function(module,exports,__webpack_require__){var _slicedToArray=__webpack_require__(64)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashIsundefined=__webpack_require__(142);var _lodashIsundefined2=_interopRequireDefault(_lodashIsundefined);var _lodashFind=__webpack_require__(143);var _lodashFind2=_interopRequireDefault(_lodashFind);var _lodashPairs=__webpack_require__(104);var _lodashPairs2=_interopRequireDefault(_lodashPairs);function getTransitionEndEvent(){var el=document.createElement("temp");var transitions={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"};return(0,_lodashFind2["default"])((0,_lodashPairs2["default"])(transitions),function(_ref){var _ref2=_slicedToArray(_ref,1);var name=_ref2[0];return!(0,_lodashIsundefined2["default"])(el.style[name])})[1]}var transitionEndEvent=getTransitionEndEvent();exports.transitionEndEvent=transitionEndEvent},function(module,exports){function isUndefined(value){return value===undefined}module.exports=isUndefined},function(module,exports,__webpack_require__){var baseCallback=__webpack_require__(144),baseEach=__webpack_require__(148),baseFind=__webpack_require__(149),baseFindIndex=__webpack_require__(150),isArray=__webpack_require__(108);function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=baseCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}var find=createFind(baseEach);module.exports=find},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(145),bindCallback=__webpack_require__(147),isArray=__webpack_require__(108),pairs=__webpack_require__(104);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reEscapeChar=/\\(\\)?/g;function baseToString(value){return value==null?"":value+""}function baseCallback(func,thisArg,argCount){var type=typeof func==="undefined"?"undefined":_typeof2(func);if(type=="function"){return thisArg===undefined?func:bindCallback(func,thisArg,argCount)}if(func==null){return identity}if(type=="object"){return baseMatches(func)}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseGet(object,path,pathKey){if(object==null){return}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey]}var index=0,length=path.length;while(object!=null&&index<length){object=object[path[index++]]}return index&&index==length?object:undefined}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=toObject(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,true):result)){return false}}}return true}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object==null){return false}return object[key]===value&&(value!==undefined||key in toObject(object))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";path=toPath(path);return function(object){if(object==null){return false}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}key=last(path);object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,true)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";path=toPath(path);return function(object){return baseGet(object,path,pathKey)}}function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function getMatchData(object){var result=pairs(object),length=result.length;while(length--){result[length][2]=isStrictComparable(result[length][1])}return result}function isKey(value,object){var type=typeof value==="undefined"?"undefined":_typeof2(value);if(type=="string"&&reIsPlainProp.test(value)||type=="number"){return true}if(isArray(value)){return false}var result=!reIsDeepProp.test(value);return result||object!=null&&value in toObject(object)}function isStrictComparable(value){return value===value&&!isObject(value)}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value)){return value}var result=[];baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function identity(value){return value}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}module.exports=baseCallback},function(module,exports,__webpack_require__){var isArray=__webpack_require__(108),isTypedArray=__webpack_require__(146),keys=__webpack_require__(105);var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",stringTag="[object String]";function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return true}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag)}if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB);
}}if(!isSameTag){return false}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false}while(++index<arrLength){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result){continue}return false}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)})){return false}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))){return false}}return true}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return false}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key))){return false}}var skipCtor=isLoose;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result)){return false}skipCtor||(skipCtor=key=="constructor")}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){return false}}return true}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}module.exports=baseIsEqual},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var objectProto=Object.prototype;var objectToString=objectProto.toString;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}module.exports=isTypedArray},function(module,exports){function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function identity(value){return value}module.exports=bindCallback},function(module,exports,__webpack_require__){var keys=__webpack_require__(105);var MAX_SAFE_INTEGER=9007199254740991;var baseEach=createBaseEach(baseForOwn);var baseFor=createBaseFor();function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee)}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}var getLength=baseProperty("length");function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function toObject(value){return isObject(value)?value:Object(value)}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}module.exports=baseEach},function(module,exports){function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}});return result}module.exports=baseFind},function(module,exports){function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}module.exports=baseFindIndex},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _createSlide=__webpack_require__(152);var _createSlide2=_interopRequireDefault(_createSlide);var _resetSlide=__webpack_require__(153);var _resetSlide2=_interopRequireDefault(_resetSlide);var LOAD_ERROR_CLASS="carousel-element-load-error";var LOAD_SUCCESS_CLASS="carousel-element-load-success";var LOAD_STARTED_CLASS="carousel-element-loaded";var SLIDE_ERROR_CLASS="carousel-slide-error";var IS_PORTRAIT_CLASS="carousel-slide-is-portrait";var LAZY_ELEMENT_CLASS="carousel-lazy-element";var LOADER_ACTIVE_CLASS="ssplayer-active";var Slide=function(){function Slide(index,_ref){var className=_ref.className;var indexAttrName=_ref.indexAttrName;var loaderElementTemplate=_ref.loaderElementTemplate;_classCallCheck(this,Slide);this.index=index;this.className=className;this.indexAttrName=indexAttrName;this.loaderElementTemplate=loaderElementTemplate;this.containerElement=(0,_createSlide2["default"])({index:index,slideClass:className,indexAttribute:indexAttrName})}_createClass(Slide,[{key:"setActive",value:function setActive(activeClass){this.containerElement.classList.add(activeClass);this.containerElement.removeAttribute("tabindex");this.containerElement.removeAttribute("aria-hidden")}},{key:"update",value:function update(imageSource,_ref2){var attrsToClear=_ref2.attrsToClear;var isPortrait=_ref2.isPortrait;var force=_ref2.force;if(!this.initialized||force){this._create(imageSource,{attrsToClear:attrsToClear,isPortrait:isPortrait});this.initialized=true}else{var sanitizedImageSrc=_linkedinJsecure2["default"].sanitizeUrl(imageSource);this.imageElement.classList.remove(LOAD_STARTED_CLASS,LOAD_SUCCESS_CLASS,LOAD_ERROR_CLASS);this.imageElement.dataset.src=sanitizedImageSrc}}},{key:"loadImage",value:function loadImage(){var _this=this;var src=this.imageElement.dataset.src;var shadowImage=new Image;shadowImage.onerror=function(){_this.containerElement.classList.add(SLIDE_ERROR_CLASS);_this.imageElement.classList.add(LOAD_STARTED_CLASS,LOAD_ERROR_CLASS)};shadowImage.onload=function(){if(src!==_this.imageElement.dataset.src){return}_this.imageElement.classList.add(LOAD_STARTED_CLASS,LOAD_SUCCESS_CLASS);_this.imageElement.src=shadowImage.src;_this._stopLoader()};if(!this.imageElement.src){this._startLoader()}shadowImage.src=src}},{key:"_create",value:function _create(imageSource,_ref3){var _imageElement$classList;var attrsToClear=_ref3.attrsToClear;var isPortrait=_ref3.isPortrait;var sanitizedImageSrc=_linkedinJsecure2["default"].sanitizeUrl(imageSource);this.containerElement=(0,_resetSlide2["default"])({slide:this.containerElement,slideClass:this.className,indexAttribute:this.indexAttrName,index:this.index,clearAttrs:attrsToClear});this.imageElement=document.createElement("img");var imageClasses=isPortrait?[LAZY_ELEMENT_CLASS,IS_PORTRAIT_CLASS]:[LAZY_ELEMENT_CLASS];(_imageElement$classList=this.imageElement.classList).add.apply(_imageElement$classList,imageClasses);this.imageElement.dataset.src=sanitizedImageSrc;this.imageElement.alt=this.index+1;this.containerElement.appendChild(this.imageElement)}},{key:"_startLoader",value:function _startLoader(){this.loaderElementTemplate.classList.add(LOADER_ACTIVE_CLASS)}},{key:"_stopLoader",value:function _stopLoader(){this.loaderElementTemplate.classList.remove(LOADER_ACTIVE_CLASS)}}]);return Slide}();exports["default"]=Slide;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=createSlide;function createSlide(_ref){var element=_ref.element;var slideClass=_ref.slideClass;var indexAttribute=_ref.indexAttribute;var index=_ref.index;var slide=element||document.createElement("li");if(typeof slideClass==="string"){slide.setAttribute("class",slideClass)}if(typeof indexAttribute==="string"&&typeof index==="number"){slide.setAttribute(indexAttribute,index)}return slide}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=resetSlide;var _createSlide=__webpack_require__(152);var _createSlide2=_interopRequireDefault(_createSlide);function resetSlide(_ref){var slide=_ref.slide;var slideClass=_ref.slideClass;var indexAttribute=_ref.indexAttribute;var index=_ref.index;var clearAttrs=_ref.clearAttrs;slide.textContent="";clearAttrs.forEach(function(attribute){slide.removeAttribute(attribute)});return(0,_createSlide2["default"])({element:slide,slideClass:slideClass,indexAttribute:indexAttribute,index:index})}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _helpersMouseEvents=__webpack_require__(155);var _position=__webpack_require__(156);var _position2=_interopRequireDefault(_position);var DiscreteProgressComponent=function(_PositionComponent){_inherits(DiscreteProgressComponent,_PositionComponent);function DiscreteProgressComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var document=arguments.length<=2||arguments[2]===undefined?element.ownerDocument:arguments[2];return function(){_classCallCheck(this,DiscreteProgressComponent);_get(Object.getPrototypeOf(DiscreteProgressComponent.prototype),"constructor",this).call(this,element,options);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{classes:{progress:"ssplayer-progress-bar__progress",progressBarScrubber:"ssplayer-progress-bar__scrubber",progressContainer:"ssplayer-progress-bar__container",progressValue:"ssplayer-progress-bar__progress-value"}});this.length-=1;this.$progress=this.adapter.find(this.adaptedElement,"."+this.options.classes.progress);this.$progressValue=this.adapter.find(this.adaptedElement,"."+this.options.classes.progressValue);this.$progressContainer=this.adapter.find(this.adaptedElement,"."+this.options.classes.progressContainer);this.$scrubber=this.adapter.find(this.adaptedElement,"."+this.options.classes.progressBarScrubber);this.document=document;this.adaptedElement.attr({"aria-valuemin":1,"aria-valuemax":this.length+1});this._setAriaForPosition(this.position);if(this.options.isSinglePage){this.hide()}}.apply(this,arguments)}_createClass(DiscreteProgressComponent,[{key:"beforeInit",value:function beforeInit(){_get(Object.getPrototypeOf(DiscreteProgressComponent.prototype),"beforeInit",this).call(this);this.addEvents([this.element,"mouseenter",this.onMouseEnter],[this.element,"mouseleave",this.onMouseLeave],[this.element,"mousedown",this.onMouseDown],[this.$progressContainer,"click",this.onClick],[this.$progressContainer,"mousemove",this.onMouseMove])}},{key:"calculatePosition",value:function calculatePosition(event){var _getCoordinates=(0,_helpersMouseEvents.getCoordinates)(event,this.element);var x=_getCoordinates.x;var width=_getCoordinates.width;return(0,_helpersMouseEvents.calculateNormalizedValue)(x,width,0,this.length)}},{key:"toggleAnimation",value:function toggleAnimation(value){this.adapter.toggleClass(this.adaptedElement,"meter-animated",value)}},{key:"changePosition",value:function changePosition(position,animate){this.toggleAnimation(animate);this.position=position;var lengthInPx=this.$progress.width();var unitInPx=lengthInPx/this.length;var translation=Math.floor(unitInPx*this.position);this.$scrubber.css({transform:"translateX("+translation+"px)"});this.$progressValue.css({width:this.position/this.length*100+"%"});this._setAriaForPosition(this.position);this.emit("positionChange",this.position)}},{key:"onClick",value:function onClick(event){this.emit("positionClick",this.calculatePosition(event))}},{key:"onMouseDown",value:function onMouseDown(){this._unregisterOneOffListener();this._oneOffOnDocumentMouseDrag=this.onDocumentMouseDrag.bind(this);this.document.addEventListener("mousemove",this._oneOffOnDocumentMouseDrag);this._oneOffOnDocumentMouseUp=this.onDocumentMouseUp.bind(this);this.document.addEventListener("mouseup",this._oneOffOnDocumentMouseUp)}},{key:"onMouseEnter",value:function onMouseEnter(){this.progressOver=true;this.emit("mouseEnter")}},{key:"onMouseLeave",value:function onMouseLeave(){this.progressOver=false;this.emit("mouseLeave")}},{key:"onMouseMove",value:function onMouseMove(event){var _getCoordinates2=(0,_helpersMouseEvents.getCoordinates)(event,this.element);var x=_getCoordinates2.x;this.emit("positionHover",{x:x,position:this.calculatePosition(event)})}},{key:"onDocumentMouseDrag",value:function onDocumentMouseDrag(event){var _getCoordinates3=(0,_helpersMouseEvents.getCoordinates)(event,this.$progressContainer[0]);var x=_getCoordinates3.x;var widthOfProgressContainer=_getCoordinates3.width;var position=(0,_helpersMouseEvents.calculateNormalizedValue)(x,widthOfProgressContainer,0,this.length);this.emit("positionHover",{x:x,position:position});this.emit("showThumbnailPreview");this.emit("positionDrag",position)}},{key:"onDocumentMouseUp",value:function onDocumentMouseUp(){if(!this.progressOver)this.emit("hideThumbnailPreview");this._unregisterOneOffListener()}},{key:"_unregisterOneOffListener",value:function _unregisterOneOffListener(){this.document.removeEventListener("mousemove",this._oneOffOnDocumentMouseDrag);this.document.removeEventListener("mouseup",this._oneOffOnDocumentMouseUp)}},{key:"_setAriaForPosition",value:function _setAriaForPosition(position){var displayPosition=position+1;this.adaptedElement.attr({"aria-valuenow":displayPosition,"aria-valuetext":displayPosition})}},{key:"progressBarWidthInPx",get:function get(){return this.$progress.width()}}]);return DiscreteProgressComponent}(_position2["default"]);exports["default"]=DiscreteProgressComponent;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getCoordinates=getCoordinates;exports.calculateValue=calculateValue;exports.calculateNormalizedValue=calculateNormalizedValue;exports.calculateHorizontalValue=calculateHorizontalValue;exports.calculateVerticalValue=calculateVerticalValue;function getCoordinates(event){var target=arguments.length<=1||arguments[1]===undefined?event.target:arguments[1];return function(){var _target$getBoundingClientRect=target.getBoundingClientRect();var left=_target$getBoundingClientRect.left;var top=_target$getBoundingClientRect.top;var width=_target$getBoundingClientRect.width;var height=_target$getBoundingClientRect.height;return{x:event.clientX-Math.round(left),y:event.clientY-Math.round(top),width:width,height:height}}()}function calculateValue(inputValue,inputSize){var min=arguments.length<=2||arguments[2]===undefined?0:arguments[2];var max=arguments.length<=3||arguments[3]===undefined?1:arguments[3];if(inputSize===0){return min}return Math.max(min,Math.min(min+(max-min)*inputValue/inputSize,max))}function calculateNormalizedValue(inputValue,inputSize){var min=arguments.length<=2||arguments[2]===undefined?0:arguments[2];var max=arguments.length<=3||arguments[3]===undefined?1:arguments[3];if(inputValue===0){return min}var unit=1/(max-min+1);var idx=Math.floor(Math.min(Math.max(min,Math.floor(inputValue/inputSize/unit)+min),max));return idx}function calculateHorizontalValue(event){var target=arguments.length<=1||arguments[1]===undefined?event.target:arguments[1];var min=arguments.length<=2||arguments[2]===undefined?0:arguments[2];var max=arguments.length<=3||arguments[3]===undefined?1:arguments[3];return function(){var _getCoordinates=getCoordinates(event,target);var x=_getCoordinates.x;var width=_getCoordinates.width;return calculateValue(x,width,min,max)}()}function calculateVerticalValue(event){var target=arguments.length<=1||arguments[1]===undefined?event.target:arguments[1];var min=arguments.length<=2||arguments[2]===undefined?0:arguments[2];var max=arguments.length<=3||arguments[3]===undefined?1:arguments[3];return function(){var _getCoordinates2=getCoordinates(event,target);var y=_getCoordinates2.y;var height=_getCoordinates2.height;return calculateValue(y,height,min,max)}()}},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _accessibleComponent=__webpack_require__(157);var _accessibleComponent2=_interopRequireDefault(_accessibleComponent);var PositionComponent=function(_AccessibleComponent){_inherits(PositionComponent,_AccessibleComponent);function PositionComponent(element,options,a11yControlMap){if(options===undefined)options={};_classCallCheck(this,PositionComponent);_get(Object.getPrototypeOf(PositionComponent.prototype),"constructor",this).call(this,element,options,a11yControlMap);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{position:0,length:0});this.position=this.options.position;this.length=this.options.length}_createClass(PositionComponent,[{key:"next",value:function next(){this.position=Math.min(this.length-1,this.position+1)}},{key:"previous",value:function previous(){this.position=Math.max(0,this.position-1)}}]);return PositionComponent}(_accessibleComponent2["default"]);exports["default"]=PositionComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _Object$keys=__webpack_require__(123)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashIncludes=__webpack_require__(158);var _lodashIncludes2=_interopRequireDefault(_lodashIncludes);var _lodashIsempty=__webpack_require__(159);var _lodashIsempty2=_interopRequireDefault(_lodashIsempty);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var _helpersConsoleWarn=__webpack_require__(160);var _helpersA11yHelper=__webpack_require__(121);function validateA11yOptions(options){_Object$keys(options).map(function(key){return options[key]}).forEach(function(control){if(typeof control!=="string"){throw new TypeError("Control label '"+control+"' was type "+(typeof control==="undefined"?"undefined":_typeof2(control))+", expected string.")}})}function validateControlMap(controlMap,controls){var controlMapKeys=_Object$keys(controlMap);_Object$keys(controls).forEach(function(control){if(!(0,_lodashIncludes2["default"])(controlMapKeys,control)){(0,_helpersConsoleWarn.warn)("Control '"+control+"' does not have a corresponding entry in the given control map. This will lead to a no-op when a11y attributes are applied! The control map is:",controlMap)}})}var AccessibleComponent=function(_UIComponent){_inherits(AccessibleComponent,_UIComponent);function AccessibleComponent(element,_ref,controlMap){var a11y=_ref.a11y;_classCallCheck(this,AccessibleComponent);_get(Object.getPrototypeOf(AccessibleComponent.prototype),"constructor",this).call(this,element);if((0,_lodashIsempty2["default"])(a11y)||(0,_lodashIsempty2["default"])(controlMap)){if((0,_lodashIsempty2["default"])(a11y)){(0,_helpersConsoleWarn.warn)(this.constructor.name+" is an AccessibleComponent but is missing a11y options.")}if((0,_lodashIsempty2["default"])(controlMap)){(0,_helpersConsoleWarn.warn)(this.constructor.name+" is an AccessibleComponent but is missing a control map.")}return}validateA11yOptions(a11y);validateControlMap(controlMap,a11y);this._applyAccessibilityControls(controlMap,a11y)}_createClass(AccessibleComponent,[{key:"_applyAccessibilityControls",value:function _applyAccessibilityControls(controlMap,controls){var _this=this;var controlMapKeys=_Object$keys(controlMap);_Object$keys(controls).filter(function(controlName){return(0,_lodashIncludes2["default"])(controlMapKeys,controlName)}).forEach(function(controlName){_this._applyA11yOnElement(controlMap[controlName],controls[controlName])})}},{key:"_applyA11yOnElement",value:function _applyA11yOnElement(selector,a11yControlText){var $el=this.adaptedElement.find(selector);if($el.length===0||!a11yControlText){return}var a11YControlTextElement=(0,_helpersA11yHelper.createA11yControlTextElement)(a11yControlText);$el.append(a11YControlTextElement)}}]);return AccessibleComponent}(_ui2["default"]);exports["default"]=AccessibleComponent;module.exports=exports["default"]},function(module,exports){var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=0/0;var argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeParseInt=parseInt;function arrayMap(array,iteratee){var index=-1,length=array?array.length:0,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return baseFindIndex(array,baseIsNaN,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsNaN(value){return value!==value}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function overArg(func,transform){return function(arg){return func(transform(arg))}}var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isIndex(key,length)))){result.push(key)}}return result}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0)}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function isSymbol(value){return(typeof value==="undefined"?"undefined":_typeof2(value))=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function values(object){return object?baseValues(object,keys(object)):[]}module.exports=includes},function(module,exports,__webpack_require__){(function(global,module){var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]";var dataViewTag="[object DataView]";var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var freeGlobal=(typeof global==="undefined"?"undefined":_typeof2(global))=="object"&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":_typeof2(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=(typeof exports==="undefined"?"undefined":_typeof2(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":_typeof2(module))=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?root.Buffer:undefined,propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap");var nonEnumShadows=!propertyIsEnumerable.call({valueOf:1},"valueOf");var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);function baseGetTag(value){
return objectToString.call(value)}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function getTag(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse;function isEmpty(value){if(isArrayLike(value)&&(isArray(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer(value)||isArguments(value))){return!value.length}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size}if(nonEnumShadows||isPrototype(value)){return!nativeKeys(value).length}for(var key in value){if(hasOwnProperty.call(value,key)){return false}}return true}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}function stubFalse(){return false}module.exports=isEmpty}).call(exports,function(){return this}(),__webpack_require__(60)(module))},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.warn=warn;function warn(){var consoleExists=console&&console.warn;var isInKarma=window&&window.__karma__;if(consoleExists&&!isInKarma){console.warn.apply(console,arguments)}}},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtilsDistCjsIndex=__webpack_require__(76);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var PreviewThumbnailComponent=function(_UIComponent){_inherits(PreviewThumbnailComponent,_UIComponent);function PreviewThumbnailComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PreviewThumbnailComponent);_get(Object.getPrototypeOf(PreviewThumbnailComponent.prototype),"constructor",this).call(this,element,options);_linkedinSlideshareClientUtilsDistCjsIndex.events.mixin(this);if(options.isSinglePage){this.hide()}}_createClass(PreviewThumbnailComponent,[{key:"changeThumbnailImage",value:function changeThumbnailImage(src){var thumbnailImage=this.adapter.find(this.adaptedElement,".thumbnail-image");this.adapter.setAttr(thumbnailImage,"src",src)}},{key:"changeThumbnailPagination",value:function changeThumbnailPagination(pagination){var thumbnailPagination=this.adapter.find(this.adaptedElement,".thumbnail-pagination");this.adapter.setText(thumbnailPagination,pagination)}},{key:"changeThumbnailPosition",value:function changeThumbnailPosition(x,progressBarWidthInPx){var leftSideOffsetInPx=2;var leftActionsWidthInPx=document.querySelector(".left-actions").getBoundingClientRect().width;var rightActionsWidthInPx=document.querySelector(".right-actions").getBoundingClientRect().width||leftActionsWidthInPx;var thumbnailWidthInPx=this.adaptedElement.children("img")[0].getBoundingClientRect().width;var xPosInPx=leftActionsWidthInPx+x-thumbnailWidthInPx/2;var translation=Math.max(leftSideOffsetInPx,Math.min(xPosInPx,leftActionsWidthInPx+progressBarWidthInPx+rightActionsWidthInPx-thumbnailWidthInPx));this.adaptedElement.css({transform:"translateX("+translation+"px)"})}},{key:"toggleThumbnail",value:function toggleThumbnail(isShown){this.adapter.toggleClass(this.adaptedElement,"ssplayer-component-hide",!isShown)}}]);return PreviewThumbnailComponent}(_ui2["default"]);exports["default"]=PreviewThumbnailComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _helpersDom=__webpack_require__(163);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var EndcardComponent=function(_EventListener){_inherits(EndcardComponent,_EventListener);function EndcardComponent(element){_classCallCheck(this,EndcardComponent);_get(Object.getPrototypeOf(EndcardComponent.prototype),"constructor",this).call(this);_linkedinSlideshareClientUtils.events.mixin(this);this.element=element}_createClass(EndcardComponent,[{key:"beforeInit",value:function beforeInit(){var _this=this;this.addEvents([this.element,"click",(0,_helpersDom.delegated)(".ssplayer-endcard-replay",function(){return _this.emit("play")})],[this.element,"click",(0,_helpersDom.delegated)(".ssplayer-endcard-lynda",function(){return _this.emit("lynda")})],[this.element,"click",(0,_helpersDom.delegated)(".ssplayer-endcard-share",function(){return _this.emit("share")})],[this.element,"click",(0,_helpersDom.delegated)(".ssplayer-endcard-view-on-ss",function(){return _this.emit("visit")})])}}]);return EndcardComponent}(_coreEventListener2["default"]);exports["default"]=EndcardComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});exports.findDelegateEventTarget=findDelegateEventTarget;exports.delegated=delegated;var _matchesSelector=__webpack_require__(164);var _matchesSelector2=_interopRequireDefault(_matchesSelector);function findDelegateEventTarget(event,selector){for(var element=event.target;element&&element!==event.currentTarget.parentElement;element=element.parentElement){if((0,_matchesSelector2["default"])(element,selector)){return element}}return null}function delegated(selector,callback){return function delegatedFn(event){var delegateTarget=findDelegateEventTarget(event,selector);var fn=undefined;if(delegateTarget){fn=callback.call(this,event,delegateTarget)}return fn}}},function(module,exports){var proto=Element.prototype;var vendor=proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(vendor)return vendor.call(el,selector);var nodes=el.parentNode.querySelectorAll(selector);for(var i=0;i<nodes.length;i++){if(nodes[i]==el)return true}return false}},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _activatable=__webpack_require__(40);var _activatable2=_interopRequireDefault(_activatable);var FocusableComponent=function(_ActivatableComponent){_inherits(FocusableComponent,_ActivatableComponent);function FocusableComponent(element){var playerStateManager=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];_classCallCheck(this,FocusableComponent);_get(Object.getPrototypeOf(FocusableComponent.prototype),"constructor",this).call(this,element,options);_linkedinSlideshareClientUtils.events.mixin(this);this.playerStateManager=playerStateManager}_createClass(FocusableComponent,[{key:"beforeInit",value:function beforeInit(){if(!this.playerStateManager.isDisableA11y){this.addEvents([this.element,"focusin",this._onFocus],[this.element,"focusout",this._onBlur])}}},{key:"_onFocus",value:function _onFocus(){this.active=true}},{key:"_onBlur",value:function _onBlur(){this.active=false}}]);return FocusableComponent}(_activatable2["default"]);exports["default"]=FocusableComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _helpersMouseEvents=__webpack_require__(155);var _slider=__webpack_require__(167);var _slider2=_interopRequireDefault(_slider);var HorizontalSliderComponent=function(_SliderComponent){_inherits(HorizontalSliderComponent,_SliderComponent);function HorizontalSliderComponent(){_classCallCheck(this,HorizontalSliderComponent);_get(Object.getPrototypeOf(HorizontalSliderComponent.prototype),"constructor",this).apply(this,arguments)}_createClass(HorizontalSliderComponent,[{key:"calculateValue",value:function calculateValue(event){return(0,_helpersMouseEvents.calculateHorizontalValue)(event,this.progressElement,0,this.max)}}]);return HorizontalSliderComponent}(_slider2["default"]);exports["default"]=HorizontalSliderComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _helpersA11yHelper=__webpack_require__(121);var _helpersMouseEvents=__webpack_require__(155);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var UPDATE_SLIDER_VALUE_TIME_INTERVAL=1e3;var SliderComponent=function(_UIComponent){_inherits(SliderComponent,_UIComponent);function SliderComponent(element,playerStateManager,options,sliderType){if(playerStateManager===undefined)playerStateManager={};if(options===undefined)options={};_classCallCheck(this,SliderComponent);_get(Object.getPrototypeOf(SliderComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{initialMax:1,handleSelector:".ssplayer-handle",classes:{active:"ssplayer-menu-active"}});this.playerStateManager=playerStateManager;this.document=element.ownerDocument;this.sliderType=sliderType;this.lastTimeCallUpdateSliderAriaValue=0;this.handle=this.element.querySelector(this.options.handleSelector);this.isDragging=false;this.max=this.options.initialMax;if(!this.playerStateManager.isDisableA11y){this.adaptedElement.attr("tabindex",0);this.adaptedElement.attr("role","slider");this.adaptedElement.attr({"aria-valuemin":0})}this.keyPressHandler=this.handleKeyPress.bind(this);if(options.a11yControlText){var a11yControlTextElement=(0,_helpersA11yHelper.createA11yControlTextElement)(options.a11yControlText);this.adaptedElement.append(a11yControlTextElement)}}_createClass(SliderComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"click",this.onClick],[this.element,"mousedown",this.onMouseDown],[this.document,"mousemove",this.onDocumentMouseMove],[this.document,"mouseup",this.onDocumentMouseUp]);if(!this.playerStateManager.isDisableA11y){this.addEvents([this.element,"focus",this.onFocus],[this.element,"blur",this.onBlur])}}},{key:"onClick",value:function onClick(event){this.value=this.calculateValue(event);this.emit("valueChanged")}},{key:"onMouseDown",value:function onMouseDown(){this.dragging=true}},{key:"onDocumentMouseMove",value:function onDocumentMouseMove(event){if(this.dragging){this.value=this.calculateValue(event)}}},{key:"onDocumentMouseUp",value:function onDocumentMouseUp(event){if(this.dragging){this.value=this.calculateValue(event);this.dragging=false}}},{key:"onFocus",value:function onFocus(){this.adaptedElement.parent().addClass(this.options.classes.active);this.adaptedElement.on("keydown",this.keyPressHandler)}},{key:"onBlur",value:function onBlur(){this.adaptedElement.parent().removeClass(this.options.classes.active);this.adaptedElement.off("keydown",this.keyPressHandler)}},{key:"handleKeyPress",value:function handleKeyPress(event){var maxValue=this.max;var step=maxValue/10;if(event.keyCode===_helpersA11yHelper.KEY_CODE.ARROW_LEFT||event.keyCode===_helpersA11yHelper.KEY_CODE.ARROW_DOWN){event.preventDefault();this.stepBack(maxValue,step)}else if(event.keyCode===_helpersA11yHelper.KEY_CODE.ARROW_UP||event.keyCode===_helpersA11yHelper.KEY_CODE.ARROW_RIGHT){event.preventDefault();this.stepForward(maxValue,step)}}},{key:"stepForward",value:function stepForward(maxValue,step){this.value=Math.min(maxValue,this.value+step);this.emit("valueChanged")}},{key:"stepBack",value:function stepBack(maxValue,step){this.value=Math.max(0,this.value-step);this.emit("valueChanged")}},{key:"updateSliderAriaValue",value:function updateSliderAriaValue(sliderValue){this.adaptedElement.attr({"aria-valuenow":sliderValue});if(this.sliderType===_helpersA11yHelper.SLIDER_TYPE.PLAYBACK){var curValue=Number(sliderValue).toFixed(0);var maxValue=Number(this.max).toFixed(0);this.adaptedElement.attr({"aria-valuetext":this.convertTime(curValue)+" out of "+this.convertTime(maxValue)})}else if(this.sliderType===_helpersA11yHelper.SLIDER_TYPE.VOLUME){var curValue=sliderValue>=0&&sliderValue<=1?(Number(sliderValue)*100).toFixed(0)+"%":sliderValue;this.adaptedElement.attr({"aria-valuetext":curValue+" "+this.options.volumeSliderAriaValueTextA11yControlText})}}},{key:"convertTime",value:function convertTime(value){var base=new Date;base.setHours(0);base.setMinutes(0);base.setSeconds(0);var date=new Date(base.getTime()+value*1e3);var hours=date.getHours();var minutes=date.getMinutes();var seconds=date.getSeconds();return[hours,minutes,seconds].join(":")}},{key:"progressElement",get:function get(){return this.adapter.restore(this.adapter.find(this.adaptedElement,"progress"),0)}},{key:"handleLeftRange",get:function get(){var _progressElement=this.progressElement;var offsetLeft=_progressElement.offsetLeft;var clientWidth=_progressElement.clientWidth;return{start:offsetLeft,end:offsetLeft+clientWidth}}},{key:"value",get:function get(){return this.progressElement.value},set:function set(value){var _this=this;this.progressElement.value=value;if(!this.playerStateManager.isDisableA11y){clearTimeout(this.callLater);if(Date.now()-this.lastTimeCallUpdateSliderAriaValue>UPDATE_SLIDER_VALUE_TIME_INTERVAL){this.updateSliderAriaValue(value);this.lastTimeCallUpdateSliderAriaValue=Date.now()}else{this.callLater=setTimeout(function(){_this.updateSliderAriaValue(value);_this.lastTimeCallUpdateSliderAriaValue=Date.now()},UPDATE_SLIDER_VALUE_TIME_INTERVAL)}}if(this.handle){var percents=(0,_helpersMouseEvents.calculateValue)(this.value,this.max,0,100);this.handle.style.left=percents+"%"}if(this.dragging){this.emit("valueChanged")}}},{key:"max",get:function get(){return this.progressElement.max},set:function set(value){this.progressElement.max=value;this.adaptedElement.attr({"aria-valuemax":value})}},{key:"dragging",get:function get(){return this.isDragging},set:function set(isDragging){if(isDragging!==this.isDragging){this.isDragging=isDragging;this.adapter.toggleClass(this.adaptedElement.parent(),this.options.classes.active,isDragging);this.emit(isDragging?"draggingStart":"draggingEnd")}}}]);return SliderComponent}(_ui2["default"]);exports["default"]=SliderComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var KEYS={189:"minus",187:"plus",39:"rightArrow",37:"leftArrow",9:"tab"};var KeyboardComponent=function(_EventListener){_inherits(KeyboardComponent,_EventListener);function KeyboardComponent(){var doc=arguments.length<=0||arguments[0]===undefined?window.document:arguments[0];var options=arguments.length<=1||arguments[1]===undefined?{shouldPreventScroll:true}:arguments[1];_classCallCheck(this,KeyboardComponent);_get(Object.getPrototypeOf(KeyboardComponent.prototype),"constructor",this).apply(this,arguments);_linkedinSlideshareClientUtils.events.mixin(this);this.document=doc;this.shouldPreventScroll=options.shouldPreventScroll}_createClass(KeyboardComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.document,"keydown",this.onDocumentKeydown])}},{key:"onDocumentKeydown",value:function onDocumentKeydown(ev){var key=KEYS[ev.which];if(key){this.emit(key,ev)}if(this.shouldPreventScroll&&(key==="rightArrow"||key==="leftArrow")){ev.preventDefault()}}}]);return KeyboardComponent}(_coreEventListener2["default"]);exports["default"]=KeyboardComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _activatable=__webpack_require__(40);var _activatable2=_interopRequireDefault(_activatable);var LoaderComponent=function(_ActivatableComponent){_inherits(LoaderComponent,_ActivatableComponent);function LoaderComponent(){_classCallCheck(this,LoaderComponent);_get(Object.getPrototypeOf(LoaderComponent.prototype),"constructor",this).apply(this,arguments)}_createClass(LoaderComponent,[{key:"show",value:function show(){_get(Object.getPrototypeOf(LoaderComponent.prototype),"show",this).call(this);this.active=true}},{key:"hide",value:function hide(){_get(Object.getPrototypeOf(LoaderComponent.prototype),"hide",this).call(this);this.active=false}}]);return LoaderComponent}(_activatable2["default"]);exports["default"]=LoaderComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _helpersA11yHelper=__webpack_require__(121);var _helpersDom=__webpack_require__(163);var _activatable=__webpack_require__(40);var _activatable2=_interopRequireDefault(_activatable);var ModalComponent=function(_ActivatableComponent){_inherits(ModalComponent,_ActivatableComponent);function ModalComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var playerStateManager=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var _ref=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];var closeModalButtonA11yControlText=_ref.closeModalButtonA11yControlText;var fullscreenOffButtonA11yControlText=_ref.fullscreenOffButtonA11yControlText;_classCallCheck(this,ModalComponent);_get(Object.getPrototypeOf(ModalComponent.prototype),"constructor",this).call(this,element,(0,_lodashDefaultsdeep2["default"])({},options,{frontClass:"ssplayer-modal-front",backClass:"ssplayer-modal-back",levelAttribute:"data-ssplayer-modal-level",closeButtonSelector:"[data-ssplayer-modal-close]",exitFullscreenButtonSelector:"[data-ssplayer-modal-fullscreen-off]"}));_linkedinSlideshareClientUtils.events.mixin(this);this.playerStateManager=playerStateManager;this.hide();this.document=element.ownerDocument;this.focusableElements=this.adaptedElement.find("button");this.curFocusableElementIndex=0;this.closeButtonElement=this.adapter.find(this.adaptedElement,this.options.closeButtonSelector);if(this.closeButtonElement.length!==0&&closeModalButtonA11yControlText){var a11YControlTextElement=(0,_helpersA11yHelper.createA11yControlTextElement)(closeModalButtonA11yControlText);this.adapter.adapt(this.closeButtonElement).append(a11YControlTextElement)}var fullscreenOffButtonElement=this.adapter.find(this.adaptedElement,this.options.exitFullscreenButtonSelector);if(fullscreenOffButtonElement.length!==0&&fullscreenOffButtonA11yControlText){var a11yControlTextElement=(0,_helpersA11yHelper.createA11yControlTextElement)(fullscreenOffButtonA11yControlText);this.adapter.adapt(fullscreenOffButtonElement).append(a11yControlTextElement)}}_createClass(ModalComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"click",(0,_helpersDom.delegated)(this.options.closeButtonSelector,this.onCloseButtonClick)],[this.element,"click",(0,_helpersDom.delegated)(this.options.exitFullscreenButtonSelector,this.onExitFullscreenButtonClick)]);if(!this.playerStateManager.isDisableA11y){this.addEvents([this.element,"keydown",this.keyPressHandler.bind(this)])}}},{key:"open",value:function open(){this.active=true;this.show();this.emit("opened");if(this.playerStateManager.isFocusActive){this.focusedElementBeforeModal=this.document.activeElement;this.focusableElements[this.curFocusableElementIndex].focus()}}},{key:"close",value:function close(){this.active=false;this.hide();this.emit("closed");this.curFocusableElementIndex=0;if(this.playerStateManager.isFocusActive&&this.focusedElementBeforeModal){this.focusedElementBeforeModal.focus()}}},{key:"onCloseButtonClick",value:function onCloseButtonClick(){this.close()}},{key:"onExitFullscreenButtonClick",value:function onExitFullscreenButtonClick(){this.emit("exitFullscreen")}},{key:"keyPressHandler",value:function keyPressHandler(event){if(event.keyCode===_helpersA11yHelper.KEY_CODE.TAB&&this.playerStateManager.isFullscreenOn){event.preventDefault();if(event.shiftKey){if(this.curFocusableElementIndex===0){this.curFocusableElementIndex=this.focusableElements.length-1}else{this.curFocusableElementIndex-=1}}else if(this.curFocusableElementIndex===this.focusableElements.length-1){this.curFocusableElementIndex=0}else{this.curFocusableElementIndex+=1}this.focusableElements[this.curFocusableElementIndex].focus()}else if(event.keyCode===_helpersA11yHelper.KEY_CODE.ESCAPE&&this.closeButtonElement.length!==0){this.close()}}},{key:"level",set:function set(level){this.adapter.setAttr(this.adaptedElement,this.options.levelAttribute,level);this.adapter.toggleClass(this.adaptedElement,this.options.backClass,level!==0);this.adapter.toggleClass(this.adaptedElement,this.options.frontClass,level===0);if(level!==0){this.hide()}else{this.show()}}}]);return ModalComponent}(_activatable2["default"]);exports["default"]=ModalComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _position=__webpack_require__(156);var _position2=_interopRequireDefault(_position);var _helpersToNumber=__webpack_require__(172);var _helpersToNumber2=_interopRequireDefault(_helpersToNumber);var PaginationComponent=function(_PositionComponent){_inherits(PaginationComponent,_PositionComponent);function PaginationComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PaginationComponent);var a11yControlMap={paginationValue:"[data-pagination-value]",paginationLength:"[data-pagination-length]"};_get(Object.getPrototypeOf(PaginationComponent.prototype),"constructor",this).call(this,element,options,a11yControlMap)}_createClass(PaginationComponent,[{key:"changePosition",value:function changePosition(position){this.position=position;this.emit("positionChange",this.position)}},{key:"_applyA11yOnElement",value:function _applyA11yOnElement(selector,a11yControlText){var $el=this.adaptedElement.find(selector);if($el.length===0||!a11yControlText){return}$el.attr("aria-label",a11yControlText)}},{key:"lengthElement",get:function get(){return this.adaptedElement.find("[data-pagination-length]")}},{key:"valueElement",get:function get(){return this.adaptedElement.find("[data-pagination-value]")}},{key:"length",get:function get(){return(0,_helpersToNumber2["default"])(this.adapter.getHtml(this.lengthElement))},set:function set(length){this.adapter.setText(this.lengthElement,length)}},{key:"position",get:function get(){return(0,_helpersToNumber2["default"])(this.adapter.getHtml(this.valueElement))-1},set:function set(position){this.adapter.setText(this.valueElement,position+1)}}]);return PaginationComponent}(_position2["default"]);exports["default"]=PaginationComponent;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=toNumber;function toNumber(value){var defaultValue=arguments.length<=1||arguments[1]===undefined?1:arguments[1];if(typeof defaultValue!=="number"){throw new TypeError("toNumber provided with non-number defaultValue")}var returnValue=parseInt(value,10);return isNaN(returnValue)?defaultValue:returnValue}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _lodashThrottle=__webpack_require__(174);var _lodashThrottle2=_interopRequireDefault(_lodashThrottle);var _screenfull=__webpack_require__(139);var _screenfull2=_interopRequireDefault(_screenfull);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var MOUSE_MOVE_THROTTLE_MS=150;var PresentationPlayerComponent=function(_UIComponent){_inherits(PresentationPlayerComponent,_UIComponent);function PresentationPlayerComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var document=arguments.length<=2||arguments[2]===undefined?element.ownerDocument:arguments[2];return function(){_classCallCheck(this,PresentationPlayerComponent);_get(Object.getPrototypeOf(PresentationPlayerComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{classes:{initialized:"player-initialized",fullscreen:"ssplayer-fullscreen",idle:"ssplayer-idle",rtl:"ssplayer-rtl",isZoomed:"ssplayer-is-zoomed",initialLoad:"ssplayer-initial-load"}});this.document=document;this.isMouseover=false}.apply(this,arguments)}_createClass(PresentationPlayerComponent,[{key:"beforeInit",value:function beforeInit(){var eventsToAdd=[];if(_screenfull2["default"].enabled){eventsToAdd.push([_screenfull2["default"],"change",this.onFullscreen])}eventsToAdd.push([this.element,"mouseenter",this.onMouseEnter],[this.element,"mousemove",(0,_lodashThrottle2["default"])(this.onMouseMove,MOUSE_MOVE_THROTTLE_MS)],[this.element,"mouseleave",this.onMouseLeave]);this.addEvents.apply(this,eventsToAdd);this.adapter.addClass(this.adaptedElement,this.options.classes.initialized)}},{key:"onMouseEnter",value:function onMouseEnter(){this.isMouseover=true;this.emit("mouseEnter")}},{key:"onMouseMove",value:function onMouseMove(){this.emit("mouseMove")}},{key:"onMouseLeave",value:function onMouseLeave(){this.isMouseover=false;this.emit("mouseLeave")}},{key:"setRtl",value:function setRtl(isRtl){this.adaptedElement.toggleClass(this.options.classes.rtl,isRtl)}},{key:"setIsZoomed",value:function setIsZoomed(isZoomed){if(!isZoomed){this.adaptedElement.scrollLeft(0);this.adaptedElement.scrollTop(0)}this.adaptedElement.toggleClass(this.options.classes.isZoomed,isZoomed)}},{key:"removeInitialLoadState",value:function removeInitialLoadState(){this.adapter.removeClass(this.adaptedElement,this.options.classes.initialLoad)}},{key:"enterFullscreen",value:function enterFullscreen(){if(!_screenfull2["default"].element){_screenfull2["default"].request(this.element)}}},{key:"exitFullscreen",value:function exitFullscreen(){if(_screenfull2["default"].element){_screenfull2["default"].exit()}}},{key:"onFullscreen",value:function onFullscreen(){this.adapter.toggleClass(this.adaptedElement,this.options.classes.fullscreen,_screenfull2["default"].isFullscreen);this.emit("fullscreen",_screenfull2["default"].isFullscreen)}},{key:"idle",set:function set(isIdle){this.adapter.toggleClass(this.adaptedElement,this.options.classes.idle,isIdle)}}]);return PresentationPlayerComponent}(_ui2["default"]);exports["default"]=PresentationPlayerComponent;module.exports=exports["default"]},function(module,exports){(function(global){var FUNC_ERROR_TEXT="Expected a function";var NAN=0/0;var symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;var freeGlobal=(typeof global==="undefined"?"undefined":_typeof2(global))=="object"&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":_typeof2(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var objectProto=Object.prototype;var objectToString=objectProto.toString;var nativeMax=Math.max,nativeMin=Math.min;
var now=function now(){return root.Date.now()};function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}function isSymbol(value){return(typeof value==="undefined"?"undefined":_typeof2(value))=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=throttle}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _accessibleComponent=__webpack_require__(157);var _accessibleComponent2=_interopRequireDefault(_accessibleComponent);var PresentationSidepanelComponent=function(_AccessibleComponent){_inherits(PresentationSidepanelComponent,_AccessibleComponent);function PresentationSidepanelComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PresentationSidepanelComponent);var a11yControlMap={navButton:".nav-button"};_get(Object.getPrototypeOf(PresentationSidepanelComponent.prototype),"constructor",this).call(this,element,options,a11yControlMap);_linkedinSlideshareClientUtils.events.mixin(this);if(options.isSinglePage){this.hide()}}_createClass(PresentationSidepanelComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element.querySelector(".nav-button"),"click",this.onClick],[this.element,"mouseover",this.onMouseOver],[this.element,"mouseout",this.onMouseOut])}},{key:"onClick",value:function onClick(){this.emit("click")}},{key:"onMouseOver",value:function onMouseOver(){this.isMouseOver=true}},{key:"onMouseOut",value:function onMouseOut(){this.isMouseOver=false}},{key:"toggleEnabled",value:function toggleEnabled(enabled){if(enabled){this.show()}else{this.hide()}}}]);return PresentationSidepanelComponent}(_accessibleComponent2["default"]);exports["default"]=PresentationSidepanelComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinVideoRumjsExportsCjsRum_video_module=__webpack_require__(177);var _linkedinVideoRumjsExportsCjsRum_video_module2=_interopRequireDefault(_linkedinVideoRumjsExportsCjsRum_video_module);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var RumTrackingComponent=function(_EventListener){_inherits(RumTrackingComponent,_EventListener);function RumTrackingComponent(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var appId=_ref.appId;var sessionTrackingId=_ref.sessionTrackingId;var videoUrn=_ref.videoUrn;var pageKey=_ref.pageKey;var mediaHeaderObj=_ref.mediaHeaderObj;var rumVideoConfig=_ref.rumVideoConfig;var tracker=arguments.length<=1||arguments[1]===undefined?new _linkedinVideoRumjsExportsCjsRum_video_module2["default"](rumVideoConfig):arguments[1];return function(){_classCallCheck(this,RumTrackingComponent);_get(Object.getPrototypeOf(RumTrackingComponent.prototype),"constructor",this).call(this);this.tracker=tracker;this.tracker.setApplicationName(appId);this.tracker.setVideoTrackingId(sessionTrackingId);this.tracker.setVideoUrn(videoUrn);if(pageKey){this.tracker.setPageKey(pageKey)}else if(console&&console.warn){console.warn("Missing pageKey for RumTrackingComponent.")}if(mediaHeaderObj){this.tracker.setMediaHeader(mediaHeaderObj)}else if(console&&console.warn){console.warn("Missing mediaHeaderObj with cdnProvider and accountAccessType for RumTrackingComponent.")}this.bufferId=0}.apply(this,arguments)}_createClass(RumTrackingComponent,[{key:"videoInitializationStart",value:function videoInitializationStart(){this.tracker.videoInitializationStart()}},{key:"videoInitializationEnd",value:function videoInitializationEnd(){this.tracker.videoInitializationEnd()}},{key:"bufferingStart",value:function bufferingStart(){this.bufferId+=1;this.tracker.bufferingStart(this.bufferId)}},{key:"bufferingEnd",value:function bufferingEnd(){this.tracker.bufferingEnd(this.bufferId)}},{key:"videoPlaybackError",value:function videoPlaybackError(errorType,errorMsg,exceptionFields){this.tracker.mediaPlaybackError(errorType,errorMsg,exceptionFields)}}]);return RumTrackingComponent}(_coreEventListener2["default"]);exports["default"]=RumTrackingComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _linkedinWebTrackingTransport=__webpack_require__(178);var _linkedinWebTrackingTransport2=_interopRequireDefault(_linkedinWebTrackingTransport);function RumVideoTracking(configJson){var videoTrackingId,applicationName,pageKey,videoUrn,initializationStartTs,initializationEndTs,bufferingRanges,webTracking,validPlaybackErrorTypes={CUSTOM:true,NETWORK:true,DECODING:true,SOURCE_FILE:true,ENCRYPTION:true,AUDIO:true,RENDERING:true},exceptionFieldToDefaults={message:"",lineNumber:-1,columnNumber:-1,sourceFile:"",stackTrace:"",programLanguage:"JAVASCRIPT",type:""},mediaHeader,trackingEnabled,bitrateChangedFields=["newBitrate","viewingDisplaySize","encodedDisplaySize","audioCodec","videoCodec","newSegmentDuration","targetSegmentDuration","frameRate"];function init(configJson){var trackingUrl;bufferingRanges={};configJson=configJson||{};trackingEnabled=configJson.trackingEnabled===false?false:true;if(trackingEnabled){if(_typeof2(configJson["web-tracking-obj"])==="object"){webTracking=configJson["web-tracking-obj"]}else{webTracking=_linkedinWebTrackingTransport2["default"];if((typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){trackingUrl=configJson["tracking-url"]||"https://www.linkedin.com/li/track";webTracking.setTrackingUrl(trackingUrl)}}}}function sendVideoInitializationBeacon(isStart){var eventBody={header:{time:isStart?initializationStartTs:initializationEndTs},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId},initializationStartTime:initializationStartTs},eventInfo={eventName:isStart?"MediaInitializationStartEvent":"MediaInitializationEndEvent",appId:applicationName};if(!isStart){eventBody.duration=initializationEndTs-initializationStartTs}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function sendBufferingEventBeacon(bufferingId,isStart){var bufferingRange=bufferingRanges[bufferingId],eventBody={header:{time:isStart?bufferingRange.start:bufferingRange.end},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId},bufferingType:bufferingRange.type,initializationStartTime:initializationStartTs,bufferingStartTime:bufferingRange.start},eventInfo={eventName:isStart?"MediaBufferingStartEvent":"MediaBufferingEndEvent",appId:applicationName};if(!isStart){eventBody.duration=bufferingRange.end-bufferingRange.start;deleteBufferingRangeById(bufferingId)}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function sendMediaPlaybackErrorEventBeacon(errorType,errorMsg,errorException,ts){var eventBody={header:{time:ts},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId},errorType:errorType},eventInfo={eventName:"MediaPlaybackErrorEvent",appId:applicationName};if(typeof errorMsg==="string"){eventBody.errorMessage=errorMsg}if((typeof errorException==="undefined"?"undefined":_typeof2(errorException))==="object"){eventBody.errorException=errorException}else{eventBody.errorException=null}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function sendMediaBitrateChangedEventBeacon(extraFields,ts){var eventBody={header:{time:ts},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId}},eventInfo={eventName:"MediaBitrateChangedEvent",appId:applicationName};if((typeof extraFields==="undefined"?"undefined":_typeof2(extraFields))==="object"){eventBody=extend(eventBody,extraFields)}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function deleteBufferingRangeById(bufferingId){delete bufferingRanges[bufferingId]}function throwErrorIfInitializationEventInvalid(isStart){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if(!isStart){if(typeof initializationStartTs!=="number"){throw new Error("videoInitializationStart not called")}}}function throwErrorIfBufferingEventInvalid(bufferingId,isStart){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if(typeof initializationStartTs!=="number"){throw new Error("videoInitializationStart not called")}else if(typeof bufferingId!=="number"){throw new TypeError("bufferingId not a number")}if(isStart){if(_typeof2(bufferingRanges[bufferingId])==="object"){throw new Error("duplicate bufferingId")}}else{if(_typeof2(bufferingRanges[bufferingId])!=="object"||typeof bufferingRanges[bufferingId].start!=="number"||typeof bufferingRanges[bufferingId].end!=="undefined"||bufferingRanges[bufferingId].type!==null){throw new Error("incorrect bufferingId or wrong buffering type")}}}function throwErrorIfPlaybackErrorEventIsInvalid(errorType,errorMessage,errorException){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if(typeof errorType!=="string"||!(errorType in validPlaybackErrorTypes)){throw new Error("invalid error type. Expected one of: "+Object.keys(validPlaybackErrorTypes))}if(typeof errorMessage!=="string"&&typeof errorMessage!=="undefined"){throw new TypeError("error message is not a string or undefined")}if((typeof errorException==="undefined"?"undefined":_typeof2(errorException))==="object"){Object.keys(errorException).forEach(function(key){if(!(key in exceptionFieldToDefaults)){throw new Error("invalid field in the exception object")}})}else if(typeof errorException!=="undefined"){throw new TypeError("error exception is not an object or undefined")}}function throwErrorIfBitrateChangedEventInvalid(extraFields){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if((typeof extraFields==="undefined"?"undefined":_typeof2(extraFields))==="object"){bitrateChangedFields.forEach(function(key){if(!(key in extraFields)){throw new Error("key: "+key+" not in fields")}})}else if(typeof extraFields==="undefined"){throw new TypeError("extraFields is not an object or undefined")}}init(configJson);function getPerformanceTime(){return window.performance&&window.performance.timing&&typeof window.performance.now==="function"?Math.round(window.performance.now())+window.performance.timing.navigationStart:(new Date).getTime()}function getExceptionObjectFromFieldsAndDefaults(exceptionFields){return extend(exceptionFieldToDefaults,exceptionFields)}function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key]}}return a}this.setVideoTrackingId=function(id){videoTrackingId=id};this.setApplicationName=function(appName){applicationName=appName;if(typeof pageKey!=="string"){pageKey=appName}};this.setPageKey=function(videoPageKey){pageKey=videoPageKey};this.setVideoUrn=function(urn){videoUrn=urn};this.setMediaHeader=function(mediaHeaderObj){mediaHeader=mediaHeaderObj};this.videoInitializationStart=function(){var isStart=true;initializationStartTs=getPerformanceTime();throwErrorIfInitializationEventInvalid(isStart);return sendVideoInitializationBeacon(isStart)};this.videoInitializationEnd=function(){var ts=getPerformanceTime(),isStart=false;throwErrorIfInitializationEventInvalid(isStart);initializationEndTs=ts;return sendVideoInitializationBeacon(isStart)};this.bufferingStart=function(bufferingId){var ts=getPerformanceTime(),isStart=true;throwErrorIfBufferingEventInvalid(bufferingId,isStart);bufferingRanges[bufferingId]={};bufferingRanges[bufferingId].start=ts;bufferingRanges[bufferingId].type=null;return sendBufferingEventBeacon(bufferingId,isStart)};this.bufferingEnd=function(bufferingId){var ts=getPerformanceTime(),isStart=false;throwErrorIfBufferingEventInvalid(bufferingId,isStart);bufferingRanges[bufferingId].end=ts;return sendBufferingEventBeacon(bufferingId,isStart)};this.mediaPlaybackError=function(errorType,errorMsg,exceptionFields){var ts=getPerformanceTime(),exceptionObj;throwErrorIfPlaybackErrorEventIsInvalid(errorType,errorMsg,exceptionFields);if((typeof exceptionFields==="undefined"?"undefined":_typeof2(exceptionFields))==="object"){exceptionObj=getExceptionObjectFromFieldsAndDefaults(exceptionFields)}return sendMediaPlaybackErrorEventBeacon(errorType,errorMsg,exceptionObj,ts)};this.bitrateChangedEvent=function(bitrateChangedFields){var ts=getPerformanceTime();throwErrorIfBitrateChangedEventInvalid(bitrateChangedFields);return sendMediaBitrateChangedEventBeacon(bitrateChangedFields,ts)}}exports["default"]=RumVideoTracking;module.exports=exports["default"]},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){{!(__WEBPACK_AMD_DEFINE_ARRAY__=[exports,module],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})(this,function(exports,module){var isBrowser=typeof window!=="undefined"&&window&&window.appEnvironment!=="node";var useRequestIdleCallback=isBrowser&&!!window.requestIdleCallback;var idleThreshold=8;var webTrackingTransport={AJAX_METHOD:"POST",DEFAULT_PAGE_TYPE:"ajax",globalTrackingUrl:null,globalTrackingAppId:"no.app.id",queue:[],paused:false,maxQueueSize:1,queueTimeout:1e3,timeoutId:null,csrfToken:"",testId:"",testSegId:"",setProperty:function setProperty(key,value){if(value){this[key]=value}},setTrackingUrl:function setTrackingUrl(trackingUrl){this.setProperty("globalTrackingUrl",trackingUrl)},setAppId:function setAppId(appId){this.setProperty("globalTrackingAppId",appId)},setCsrfToken:function setCsrfToken(token){this.setProperty("csrfToken",token)},setTestId:function setTestId(testId){this.setProperty("testId",testId)},setTestSegId:function setTestSegId(testSegId){this.setProperty("testSegId",testSegId)},getCookieString:function getCookieString(){return document.cookie},getCsrfToken:function getCsrfToken(){var token="JSESSIONID=";var ca=this.getCookieString().split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1)}if(c.indexOf(token)!==-1){var value=c.substring(token.length,c.length);if(value[0]==='"'&&value[value.length-1]==='"'){value=value.substring(1,value.length-1)}return value}}return""},createXmlHttpObject:function createXmlHttpObject(){return isBrowser&&!!window.XMLHttpRequest?new XMLHttpRequest:null},ajax:function ajax(postData,success,failure,trackingEndpointUrl){var req;trackingEndpointUrl=trackingEndpointUrl||this.globalTrackingUrl;if(!trackingEndpointUrl){if(failure){failure("Tracking url is not defined")}return}req=this.createXmlHttpObject();if(!req){return}req.open(this.AJAX_METHOD,trackingEndpointUrl,true);req.withCredentials=true;req.setRequestHeader("Content-type","application/json");if(!this.csrfToken){req.setRequestHeader("Csrf-Token",this.getCsrfToken())}else{req.setRequestHeader("Csrf-Token",this.csrfToken)}if(this.testId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_ID",this.testId)}if(this.testSegId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_SEGMENT_ID",this.testSegId)}req.onreadystatechange=function(){if(req.readyState!==4){return}if(req.status!==200&&req.status!==304){if(failure){failure(req)}return}if("function"===typeof success){success(req)}};if(req.readyState===4){return}req.send(postData)},pause:function pause(){this.paused=true},unpause:function unpause(){this.paused=false;if(this.queue.length>=this.maxQueueSize){this.flush()}},flush:function flush(){if(this.queue.length>0){var self=this;this.ajax(JSON.stringify(this.queue),null,self.logError);this.queue=[]}if(useRequestIdleCallback){cancelIdleCallback(this.timeoutId)}else{clearTimeout(this.timeoutId)}this.timeoutId=null;this.paused=false},idleFlush:function idleFlush(timeout){var _this=this;var startTime=Date.now();return requestIdleCallback(function(deadline){if(deadline.timeRemaining()>idleThreshold||deadline.didTimeout){_this.flush()}else{_this.timeoutId=_this.idleFlush(timeout-(Date.now()-startTime))}},{timeout:timeout})},addToQueue:function addToQueue(payload){this.queue.push(payload);if(this.queue.length>=this.maxQueueSize&&!this.paused){return this.flush()}if(!this.timeoutId){var self=this;if(useRequestIdleCallback&&!this.paused){this.timeoutId=this.idleFlush(this.queueTimeout)}else{this.timeoutId=setTimeout(function(){self.flush()},this.queueTimeout)}}},validateEvent:function validateEvent(eventInfoOrName,eventBody,callback){this.ajax(JSON.stringify([{eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)}]),function(requestObject){return callback(null,requestObject)},function(requestObject){return callback(requestObject)},this.globalTrackingUrl+"/validate")},sendEvent:function sendEvent(eventInfoOrName,eventBody){this.addToQueue({eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)})},getTimestamp:function getTimestamp(){return Math.round((new Date).getTime()/1e3)},populateEventInfo:function populateEventInfo(eventInfo){if(typeof eventInfo==="string"){eventInfo={eventName:eventInfo}}if(!eventInfo||(typeof eventInfo==="undefined"?"undefined":_typeof2(eventInfo))!=="object"){this.logError("Event info must be object");return{}}if(!eventInfo.appId){eventInfo.appId=this.globalTrackingAppId}return eventInfo},populateEventHeaders:function populateEventHeaders(eventBody){if(!eventBody||(typeof eventBody==="undefined"?"undefined":_typeof2(eventBody))!=="object"){this.logError("Event body must be object");return{}}return eventBody},logError:function logError(message){var console=window.console;if(console&&console.error){console.error(message)}},init:function init(){this.setTrackingUrl();this.setAppId();this.onBeforeUnload=this.onBeforeUnload.bind(this);if(isBrowser){window.addEventListener("beforeunload",this.onBeforeUnload)}},destroy:function destroy(){if(isBrowser){window.removeEventListener("beforeunload",this.onBeforeUnload)}},onBeforeUnload:function onBeforeUnload(){this.flush()}};webTrackingTransport.init();module.exports=webTrackingTransport})},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var SelectableComponent=function(_EventListener){_inherits(SelectableComponent,_EventListener);function SelectableComponent(element){_classCallCheck(this,SelectableComponent);_get(Object.getPrototypeOf(SelectableComponent.prototype),"constructor",this).call(this);_linkedinSlideshareClientUtils.events.mixin(this);this.element=element}_createClass(SelectableComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"click",this.onClick])}},{key:"onClick",value:function onClick(){this.select()}},{key:"select",value:function select(){var selection=window.getSelection();selection.removeAllRanges();var range=document.createRange();range.selectNodeContents(this.element);selection.addRange(range);this.emit("selected")}}]);return SelectableComponent}(_coreEventListener2["default"]);exports["default"]=SelectableComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _lodashPairs=__webpack_require__(104);var _lodashPairs2=_interopRequireDefault(_lodashPairs);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _helpersA11yHelper=__webpack_require__(121);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var _helpersVideojsAdapterEvents=__webpack_require__(181);var _helpersVideojsAdapterEvents2=_interopRequireDefault(_helpersVideojsAdapterEvents);var _helpersControlNames=__webpack_require__(182);function getCenteredXOffset(width){return(window.document.documentElement.clientWidth-width)/2}function getCenteredYOffset(height){return(window.document.documentElement.clientHeight-height)/2}var ShareButtonComponent=function(_UIComponent){_inherits(ShareButtonComponent,_UIComponent);function ShareButtonComponent(element,videoAdapter){var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var window=arguments.length<=3||arguments[3]===undefined?element.ownerDocument.defaultView:arguments[3];var playerStateManager=arguments.length<=4||arguments[4]===undefined?{}:arguments[4];return function(){_classCallCheck(this,ShareButtonComponent);_get(Object.getPrototypeOf(ShareButtonComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{urlAttribute:"data-ssplayer-share-url",networkAttribute:"data-ssplayer-share-network",windowSettings:{menubar:"no",toolbar:"no",resizable:"yes",scrollbars:"yes",height:600,width:600}});this.element=element;this.window=window;this.network=options.network||this.adapter.getAttr(this.element,this.options.networkAttribute);this.url=options.url||this.adapter.getAttr(this.element,this.options.urlAttribute);this.videoAdapter=videoAdapter;this.playerStateManager=playerStateManager;if(!this.playerStateManager.isDisableA11y&&this.network){var a11YControlTextElement=(0,_helpersA11yHelper.createA11yControlTextElement)(this.network);this.adaptedElement.append(a11YControlTextElement)}}.apply(this,arguments)}_createClass(ShareButtonComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"click",this.onClick])}},{key:"onClick",value:function onClick(){this.openSharingWindow()}},{key:"getWindowSettings",value:function getWindowSettings(){var offsetLeft=getCenteredXOffset(this.options.windowSettings.width);var offsetTop=getCenteredYOffset(this.options.windowSettings.height);return(0,_lodashPairs2["default"])(this.options.windowSettings).map(function(_ref){var _ref2=_slicedToArray(_ref,2);var key=_ref2[0];var setting=_ref2[1];return key+"="+setting}).concat(["left="+offsetLeft,"top="+offsetTop]).join(",")}},{key:"openSharingWindow",value:function openSharingWindow(){this.window.open(this.url,"",this.getWindowSettings());var data={network:this.network,url:this.url};this.emit("shared",data);this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].SHARE_EXTERNAL,{network:this.network,controlName:_helpersControlNames.CONTROL_PREFIX+"_share_"+this.network})}}]);return ShareButtonComponent}(_ui2["default"]);exports["default"]=ShareButtonComponent;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var EVENTS_MAP={PAUSE:"pause",PLAY:"play",SEEKED:"seeked",TIME_UPDATE:"timeupdate",ENDED:"ended",ERROR:"error",VOLUME_CHANGE:"volumechange",MUTE:"mute",UNMUTE:"unmute",ENTER_FULLSCREEN:"enterfullscreen",EXIT_FULLSCREEN:"exitfullscreen",INIT:"init",BUFFER_START:"bufferstart",BUFFER_END:"bufferend",BITRATE_CHANGED:"bitrateChanged",SHARE_MODAL_OPEN:"sharemodalopen",SHARE_MODAL_CLOSE:"sharemodalclose",SHARE_EXTERNAL:"shareexternal"};exports["default"]=EVENTS_MAP;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var CONTROL_PREFIX="video";var CONTROL_NAME={TOOLBAR:{FULLSCREEN:CONTROL_PREFIX+"_toolbar_fullscreen",SHARE:CONTROL_PREFIX+"_toolbar_share",REPLAY:CONTROL_PREFIX+"_toolbar_replay",PLAY:CONTROL_PREFIX+"_toolbar_play",PAUSE:CONTROL_PREFIX+"_toolbar_pause",MUTE_TOGGLE:CONTROL_PREFIX+"_toolbar_mute_unmute",PLAYBACK_RATE:CONTROL_PREFIX+"_toolbar_playback_rate"},HERO:{PLAY:CONTROL_PREFIX+"_hero_play"},ELEMENT:{PLAY:CONTROL_PREFIX+"_element_play"},ENDCARD:{FULLSCREEN:CONTROL_PREFIX+"_endcard_fullscreen",REPLAY:CONTROL_PREFIX+"_endcard_replay",PLAY:CONTROL_PREFIX+"_endcard_play",SHARE:CONTROL_PREFIX+"_endcard_share"}};exports.CONTROL_NAME=CONTROL_NAME;exports.CONTROL_PREFIX=CONTROL_PREFIX},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _helpersFormatTime=__webpack_require__(184);var _helpersFormatTime2=_interopRequireDefault(_helpersFormatTime);var _activatable=__webpack_require__(40);var _activatable2=_interopRequireDefault(_activatable);var defaultCurrentTime=0;var defaultDuration=undefined;var TimeDisplayComponent=function(_ActivatableComponent){_inherits(TimeDisplayComponent,_ActivatableComponent);function TimeDisplayComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,TimeDisplayComponent);_get(Object.getPrototypeOf(TimeDisplayComponent.prototype),"constructor",this).call(this,element,(0,_lodashDefaultsdeep2["default"])({},options,{durationSelector:".ssplayer-time-display-duration",currentTimeSelector:".ssplayer-time-display-current-time"}));this.duration=defaultDuration;this.currentTime=defaultCurrentTime}_createClass(TimeDisplayComponent,[{key:"durationElement",get:function get(){return this.adapter.adapt(this.adapter.children(this.adaptedElement,this.options.durationSelector))}},{key:"currentTimeElement",get:function get(){return this.adapter.adapt(this.adapter.find(this.adaptedElement,this.options.currentTimeSelector))}},{key:"duration",get:function get(){return this.durationValue},set:function set(value){this.durationValue=value;this.adapter.setText(this.durationElement,(0,_helpersFormatTime2["default"])(value));this.active=value!==defaultDuration;
}},{key:"currentTime",get:function get(){return this.currentTimeValue},set:function set(value){this.currentTimeValue=value;this.adapter.setText(this.currentTimeElement,(0,_helpersFormatTime2["default"])(value,this.duration||value))}}]);return TimeDisplayComponent}(_activatable2["default"]);exports["default"]=TimeDisplayComponent;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=formatTime;function formatTime(seconds){var guide=arguments.length<=1||arguments[1]===undefined?seconds:arguments[1];return function(){seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60);var m=Math.floor(seconds/60%60);var h=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);if(seconds===undefined||seconds===null||isNaN(seconds)||seconds===Infinity){h="-";m="-";s="-"}h=h>0||gh>0?h+":":"";m=((h||gm>=10)&&m<10?"0"+m:m)+":";s=s<10?"0"+s:s;return h+m+s}()}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _screenfull=__webpack_require__(139);var _screenfull2=_interopRequireDefault(_screenfull);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _control=__webpack_require__(186);var _control2=_interopRequireDefault(_control);var _helpersA11yHelper=__webpack_require__(121);var _helpersDom=__webpack_require__(163);var _helpersConsoleWarn=__webpack_require__(160);var ToolbarComponent=function(_ControlComponent){_inherits(ToolbarComponent,_ControlComponent);function ToolbarComponent(element,options,document,playerStateManager,videojsPlayer,a11yControlTextObj,a11yCustomControlTextPairs){if(options===undefined)options={};if(document===undefined)document=element.ownerDocument;if(playerStateManager===undefined)playerStateManager={};return function(){_classCallCheck(this,ToolbarComponent);_get(Object.getPrototypeOf(ToolbarComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{hideOnFullscreen:true,tocEnabled:false,playButtonSelector:".ssplayer-play-button",pauseButtonSelector:".ssplayer-pause-button",fullScreenOnButtonSelector:".ssplayer-fullscreen-on-button",fullScreenOffButtonSelector:".ssplayer-fullscreen-off-button",progressSliderSelector:".ssplayer-progress.ssplayer-progress-slider",firstFocusableElementSelector:".ssplayer-progress.ssplayer-progress-slider",lastFocusableElementSelector:".ssplayer-fullscreen-off-button",zoomInButtonSelector:".ssplayer-zoom-in-button",zoomOutButtonSelector:".ssplayer-zoom-out-button",zoomSelectSelector:".ssplayer-zoom-options-select",hcmDescriptionLabel:"High Contrast Mode",hcmOnStateLabel:"On",hcmOffStateLabel:"Off",hcmDescriptionLabelSelector:".ssplayer-hcm-description-label",hcmStateLabelSelector:".ssplayer-hcm-state-label",hcmToggleSelector:".ssplayer-hcm-toggle",withToc:"ssplayer-toolbar-with-toc"});this.document=document;this.playerStateManager=playerStateManager;this.videojsPlayer=videojsPlayer;this.playButton=this.adaptedElement.find(this.options.playButtonSelector)[0];this.pauseButton=this.adaptedElement.find(this.options.pauseButtonSelector)[0];this.fullScreenOnButton=this.adaptedElement.find(this.options.fullScreenOnButtonSelector)[0];this.fullScreenOffButton=this.adaptedElement.find(this.options.fullScreenOffButtonSelector)[0];this.progressSlider=this.adaptedElement.find(this.options.progressSliderSelector)[0];this.firstFocusableElement=this.adaptedElement.find(this.options.firstFocusableElementSelector)[0];this.lastFocusableElement=this.adaptedElement.find(this.options.lastFocusableElementSelector)[0];this.keyPressHandler=this.handleKeyPress.bind(this);this.zoomInButtonElement=this.adaptedElement.find(this.options.zoomInButtonSelector)[0];this.zoomOutButtonElement=this.adaptedElement.find(this.options.zoomOutButtonSelector)[0];this.zoomSelectElement=this.adaptedElement.find(this.options.zoomSelectSelector)[0];this.isMouseOver=false;this.addA11yControlText(a11yControlTextObj,a11yCustomControlTextPairs);this.zoomScale=1;this.hcmDescriptionLabelElement=this.adaptedElement.find(this.options.hcmDescriptionLabelSelector)[0];this.hcmStateLabelElement=this.adaptedElement.find(this.options.hcmStateLabelSelector)[0];this.hcmToggleElement=this.adaptedElement.find(this.options.hcmToggleSelector)[0];if(this.hcmDescriptionLabelElement&&this.hcmStateLabelElement&&this.hcmToggleElement){this.hcmDescriptionLabelElement.innerText=this.options.hcmDescriptionLabel;this.hcmMode=false}if(this.options.tocEnabled){var withTocClass=_linkedinJsecure2["default"].htmlEncode(this.options.withToc);this.adaptedElement.addClass(withTocClass)}if(this.options.checkFullscreenAPI&&!_screenfull2["default"].enabled){(0,_helpersConsoleWarn.warn)("Full screen API not detected-- hiding full screen button!");this.adaptedElement.find(this.options.fullScreenOnButtonSelector).hide()}}.apply(this,arguments)}_createClass(ToolbarComponent,[{key:"beforeInit",value:function beforeInit(){_get(Object.getPrototypeOf(ToolbarComponent.prototype),"beforeInit",this).call(this);var toolbarEvents=[[this.element,"click",(0,_helpersDom.delegated)("[data-ssplayer-event]",this.onClick)],[this.zoomSelectElement,"change",this.onZoomSelectChange],[this.zoomInButtonElement,"click",this.onZoomIn],[this.zoomOutButtonElement,"click",this.onZoomOut],[this.hcmToggleElement,"change",this.onHcmModeChange]].filter(function(_ref){var _ref2=_slicedToArray(_ref,1);var target=_ref2[0];return target});this.addEvents.apply(this,_toConsumableArray(toolbarEvents));if(this.options.hideOnFullscreen&&_screenfull2["default"].raw&&_screenfull2["default"].raw.fullscreenchange){this.addEvents([this.document,_screenfull2["default"].raw.fullscreenchange,this.onFullscreenChange,this.document,"mousemove",this.onDocumentMouseMove])}}},{key:"onClick",value:function onClick(event,delegateTarget){var target=this.adapter.adapt(delegateTarget);var eventName=this.adapter.getAttr(target,"data-ssplayer-event");var eventData=this.adapter.getAttr(target,"data-ssplayer-event-data");this.emit(eventName,{originalEvent:event,delegateTarget:delegateTarget,data:eventData&&JSON.parse(eventData)})}},{key:"toggleTocToolbarStyle",value:function toggleTocToolbarStyle(){var withTocClass=_linkedinJsecure2["default"].htmlEncode(this.options.withToc);this.adaptedElement.toggleClass(withTocClass)}},{key:"onZoomSelectChange",value:function onZoomSelectChange(e){this._updateZoom(e.target.value)}},{key:"onZoomIn",value:function onZoomIn(){var newZoomScaleIdx=Math.min(this.zoomSelectElement.selectedIndex+1,this.zoomSelectElement.options.length-1);var newZoomScaleValue=this.zoomSelectElement.options[newZoomScaleIdx].value;this._updateZoom(newZoomScaleValue)}},{key:"onZoomOut",value:function onZoomOut(){var newZoomScaleIdx=Math.max(this.zoomSelectElement.selectedIndex-1,0);var newZoomScaleValue=this.zoomSelectElement.options[newZoomScaleIdx].value;this._updateZoom(newZoomScaleValue)}},{key:"_updateZoomButtonStates",value:function _updateZoomButtonStates(){if(!this.zoomOutButtonElement||!this.zoomInButtonElement||!this.zoomSelectElement){return}this.zoomOutButtonElement.disabled=this.zoomSelectElement.selectedIndex===0;this.zoomInButtonElement.disabled=this.zoomSelectElement.selectedIndex===this.zoomSelectElement.options.length-1}},{key:"_updateZoom",value:function _updateZoom(zoomScale){zoomScale=parseFloat(zoomScale,10);if(isNaN(zoomScale)){zoomScale=1}this.zoomSelectElement.value=zoomScale;this.zoomScale=zoomScale;this.emit("zoom",zoomScale);this._updateZoomButtonStates()}},{key:"onHcmModeChange",value:function onHcmModeChange(e){var isHighContrastModeOn=e.target.checked;this.hcmMode=isHighContrastModeOn;this.emit("hcmToggle",this.hcmMode)}},{key:"handleKeyPress",value:function handleKeyPress(event){if(event.keyCode===_helpersA11yHelper.KEY_CODE.TAB&&this.playerStateManager.isFullscreenOn){if(this.options.dynamicKeyTrap){this.firstFocusableElement=this.videojsPlayer.paused()?this.playButton:this.pauseButton}if(event.shiftKey){if(this.document.activeElement===this.firstFocusableElement){event.preventDefault();this.lastFocusableElement.focus()}}else if(this.document.activeElement===this.lastFocusableElement){event.preventDefault();this.firstFocusableElement.focus()}}}},{key:"resetZoom",value:function resetZoom(){this._updateZoom(1)}},{key:"toggleVisible",value:function toggleVisible(show){this.adapter.toggleClass(this.adaptedElement.parent(".ssplayer-video-player"),"ssplayer-idle",!show)}},{key:"toggleAccessibilityVisibility",value:function toggleAccessibilityVisibility(shouldHide){this.adaptedElement.attr("aria-hidden",shouldHide)}},{key:"onFullscreenChange",value:function onFullscreenChange(){if(_screenfull2["default"].element){this.restartHideTimeout();if(!this.playerStateManager.isDisableA11y){this.adaptedElement.on("keydown",this.keyPressHandler)}}else{this.clearHideTimeout();if(!this.playerStateManager.isDisableA11y){this.adaptedElement.off("keydown",this.keyPressHandler)}}}},{key:"onDocumentMouseMove",value:function onDocumentMouseMove(){this.restartHideTimeout()}},{key:"restartHideTimeout",value:function restartHideTimeout(){var _this=this;clearTimeout(this.idleId);this.toggleVisible(true);this.idleId=setTimeout(function(){_this.toggleVisible(false);delete _this.idleId},3e3)}},{key:"clearHideTimeout",value:function clearHideTimeout(){clearTimeout(this.idleId);this.toggleVisible(true);delete this.idleId}},{key:"addA11yControlText",value:function addA11yControlText(){var _this2=this;var a11yControlTextObj=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var a11yCustomControlTextPairs=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];var defaulta11yCustomControlTextPairs=[{cssSelector:".ssplayer-play-button",key:"playButtonA11yControlText"},{cssSelector:".ssplayer-pause-button",key:"pauseButtonA11yControlText"},{cssSelector:".ssplayer-share-button",key:"shareButtonA11yControlText"},{cssSelector:".ssplayer-zoom-in-button",key:"zoomInButtonA11yControlText"},{cssSelector:".ssplayer-zoom-out-button",key:"zoomOutButtonA11yControlText"},{cssSelector:".ssplayer-zoom-options-select-label",key:"zoomSelectA11yControlText"},{cssSelector:".ssplayer-volume-switch",key:"volumeOnButtonA11yControlText"},{cssSelector:".ssplayer-fullscreen-on-button",key:"fullscreenOnButtonA11yControlText"},{cssSelector:".ssplayer-fullscreen-off-button",key:"fullscreenOffButtonA11yControlText"},{cssSelector:".ssplayer-linkedin-logo-link",key:"linkedinLogoLinkA11yControlText"}];a11yCustomControlTextPairs=a11yCustomControlTextPairs.concat(defaulta11yCustomControlTextPairs);a11yCustomControlTextPairs.forEach(function(_ref3){var cssSelector=_ref3.cssSelector;var key=_ref3.key;var a11yControlText=a11yControlTextObj[key];if(a11yControlText){_this2.createA11yControlTextEl(cssSelector,a11yControlText)}})}},{key:"createA11yControlTextEl",value:function createA11yControlTextEl(selector){var a11yControlText=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var $el=this.adaptedElement.find(selector);if($el.length===0||!a11yControlText){return}var a11YControlTextElement=(0,_helpersA11yHelper.createA11yControlTextElement)(a11yControlText);$el.append(a11YControlTextElement)}},{key:"hcmMode",get:function get(){return this.hcm},set:function set(isHcmOn){this.hcm=isHcmOn;this.hcmStateLabelElement.innerText=this.hcm===true?this.options.hcmOnStateLabel:this.options.hcmOffStateLabel}}]);return ToolbarComponent}(_control2["default"]);exports["default"]=ToolbarComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var ControlComponent=function(_UIComponent){_inherits(ControlComponent,_UIComponent);function ControlComponent(element){_classCallCheck(this,ControlComponent);_get(Object.getPrototypeOf(ControlComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.isMouseOver=false}_createClass(ControlComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"mouseover",this.onMouseOver],[this.element,"mouseout",this.onMouseOut])}},{key:"onMouseOver",value:function onMouseOver(){this.isMouseOver=true;this.emit("mouseOver")}},{key:"onMouseOut",value:function onMouseOut(){this.isMouseOver=false;this.emit("mouseOut")}}]);return ControlComponent}(_ui2["default"]);exports["default"]=ControlComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _helpersMouseEvents=__webpack_require__(155);var _slider=__webpack_require__(167);var _slider2=_interopRequireDefault(_slider);var VerticalSliderComponent=function(_SliderComponent){_inherits(VerticalSliderComponent,_SliderComponent);function VerticalSliderComponent(){_classCallCheck(this,VerticalSliderComponent);_get(Object.getPrototypeOf(VerticalSliderComponent.prototype),"constructor",this).apply(this,arguments)}_createClass(VerticalSliderComponent,[{key:"calculateValue",value:function calculateValue(event){return this.max-(0,_helpersMouseEvents.calculateVerticalValue)(event,this.progressElement,0,this.max)}}]);return VerticalSliderComponent}(_slider2["default"]);exports["default"]=VerticalSliderComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _helpersDom=__webpack_require__(163);var _fullscreenTarget=__webpack_require__(189);var _fullscreenTarget2=_interopRequireDefault(_fullscreenTarget);var VideoPlayerComponent=function(_FullscreenTargetComponent){_inherits(VideoPlayerComponent,_FullscreenTargetComponent);function VideoPlayerComponent(element,options,playerStateManager){if(options===undefined)options={};_classCallCheck(this,VideoPlayerComponent);_get(Object.getPrototypeOf(VideoPlayerComponent.prototype),"constructor",this).call(this,element,(0,_lodashDefaultsdeep2["default"])({},options,{classes:{playing:"ssplayer-playing",paused:"ssplayer-paused",idle:"ssplayer-idle",ended:"ssplayer-ended"}}),undefined,playerStateManager);_linkedinSlideshareClientUtils.events.mixin(this);if(options.a11yControlText){this.adaptedElement.attr({"aria-label":options.a11yControlText})}}_createClass(VideoPlayerComponent,[{key:"beforeInit",value:function beforeInit(){_get(Object.getPrototypeOf(VideoPlayerComponent.prototype),"beforeInit",this).call(this);this.addEvents([this.element,"click",(0,_helpersDom.delegated)("video",this.onVideoClick)],[this.element,"click",this.onClick])}},{key:"onVideoClick",value:function onVideoClick(){this.emit("click")}},{key:"onClick",value:function onClick(){this.emit("userInteracted")}},{key:"idle",set:function set(isHidle){this.adapter.toggleClass(this.adaptedElement,this.options.classes.idle,isHidle)}},{key:"ended",set:function set(isEnded){this.adapter.toggleClass(this.adaptedElement,this.options.classes.ended,isEnded)}},{key:"paused",set:function set(isPaused){this.adapter.toggleClass(this.adaptedElement,this.options.classes.paused,isPaused);this.adapter.toggleClass(this.adaptedElement,this.options.classes.playing,!isPaused)}}]);return VideoPlayerComponent}(_fullscreenTarget2["default"]);exports["default"]=VideoPlayerComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _screenfull=__webpack_require__(139);var _screenfull2=_interopRequireDefault(_screenfull);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var FullscreenTargetComponent=function(_UIComponent){_inherits(FullscreenTargetComponent,_UIComponent);function FullscreenTargetComponent(element,options,document,playerStateManager){if(options===undefined)options={};if(document===undefined)document=element.ownerDocument;return function(){_classCallCheck(this,FullscreenTargetComponent);_get(Object.getPrototypeOf(FullscreenTargetComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{classes:{fullscreenDisabled:"ssplayer-fullscreen-disabled",fullscreen:"ssplayer-fullscreen"}});this.document=document;this.playerStateManager=playerStateManager;this.adapter.toggleClass(this.adaptedElement,this.options.classes.fullscreenDisabled,!_screenfull2["default"].enabled)}.apply(this,arguments)}_createClass(FullscreenTargetComponent,[{key:"beforeInit",value:function beforeInit(){if(_screenfull2["default"].raw&&_screenfull2["default"].raw.fullscreenchange){this.addEvents([this.document,_screenfull2["default"].raw.fullscreenchange,this.onDocumentFullscreenchange])}}},{key:"onDocumentFullscreenchange",value:function onDocumentFullscreenchange(){this.adapter.toggleClass(this.adaptedElement,this.options.classes.fullscreen,this.fullscreen);this.playerStateManager.isFullscreenOn=_screenfull2["default"].isFullscreen;this.emit("changeFullscreen",this.fullscreen)}},{key:"fullscreenEnabled",get:function get(){return _screenfull2["default"].enabled}},{key:"fullscreen",get:function get(){return _screenfull2["default"].element===this.element},set:function set(isFullscreen){if(isFullscreen){_screenfull2["default"].request(this.element)}else{_screenfull2["default"].exit(this.element)}}}]);return FullscreenTargetComponent}(_ui2["default"]);exports["default"]=FullscreenTargetComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinSlideshareClientUtils=__webpack_require__(76);var _activatable=__webpack_require__(40);var _activatable2=_interopRequireDefault(_activatable);var VolumeSwitchComponent=function(_ActivatableComponent){_inherits(VolumeSwitchComponent,_ActivatableComponent);function VolumeSwitchComponent(){_classCallCheck(this,VolumeSwitchComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_get(Object.getPrototypeOf(VolumeSwitchComponent.prototype),"constructor",this).apply(this,args);_linkedinSlideshareClientUtils.events.mixin(this)}_createClass(VolumeSwitchComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"click",this.onClick])}},{key:"onClick",value:function onClick(){this.emit(this.volumeValue===0?"unmute":"mute")}},{key:"iconVolumeRanges",get:function get(){return[["ssplayer-volume-muted",-Infinity,0],["ssplayer-volume-min",0,.33],["ssplayer-volume-med",.33,.66],["ssplayer-volume-max",.66,Infinity]]}},{key:"volume",set:function set(value){var _this=this;this.volumeValue=value;this.iconVolumeRanges.forEach(function(_ref){var _ref2=_slicedToArray(_ref,3);var className=_ref2[0];var min=_ref2[1];var max=_ref2[2];var iconElement=_this.adapter.find(_this.adaptedElement,"."+className);var classes=[className];if(value>min&&value<=max){classes.push(_this.options.activeClass)}_this.adapter.setAttr(iconElement,"class",classes.join(" "))})}}]);return VolumeSwitchComponent}(_activatable2["default"]);exports["default"]=VolumeSwitchComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersVideojsAdapterEvents=__webpack_require__(181);var _helpersVideojsAdapterEvents2=_interopRequireDefault(_helpersVideojsAdapterEvents);var _helpersControlNames=__webpack_require__(182);var ENDCARD=_helpersControlNames.CONTROL_NAME.ENDCARD;var EndcardBehavior=function(_EventListener){_inherits(EndcardBehavior,_EventListener);function EndcardBehavior(videojsPlayer,videoAdapter,controlTracker,endcard,endcardModal,shareModal){_classCallCheck(this,EndcardBehavior);_get(Object.getPrototypeOf(EndcardBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.videoAdapter=videoAdapter;this.controlTracker=controlTracker;this.endcard=endcard;this.endcardModal=endcardModal;this.shareModal=shareModal}_createClass(EndcardBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"ended",this.onVideojsEnded],[this.videojsPlayer,"play",this.onVideojsPlay],[this.endcard,"share",this.onEndcardShare],[this.endcard,"play",this.onEndcardPlay],[this.endcardModal,"exitFullscreen",this.onEndcardModalExitFullscreen])}},{key:"onVideojsEnded",value:function onVideojsEnded(){this.endcardModal.open()}},{key:"onVideojsPlay",value:function onVideojsPlay(){this.endcardModal.close()}},{key:"onEndcardShare",value:function onEndcardShare(){this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].SHARE_MODAL_OPEN,ENDCARD.SHARE);this.shareModal.open()}},{key:"onEndcardPlay",value:function onEndcardPlay(){this.endcardModal.close();this.controlTracker.controlName=this.videojsPlayer.ended()?ENDCARD.REPLAY:ENDCARD.PLAY;this.videojsPlayer.play()}},{key:"onEndcardModalExitFullscreen",value:function onEndcardModalExitFullscreen(){this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].EXIT_FULLSCREEN,ENDCARD.FULLSCREEN);this.videojsPlayer.exitFullscreen()}}]);return EndcardBehavior}(_coreEventListener2["default"]);exports["default"]=EndcardBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersVideojsAdapterEvents=__webpack_require__(181);var _helpersVideojsAdapterEvents2=_interopRequireDefault(_helpersVideojsAdapterEvents);var _helpersControlNames=__webpack_require__(182);var CONTROL_NAME_FULLSCREEN=_helpersControlNames.CONTROL_NAME.TOOLBAR.FULLSCREEN;var ROOT_FULLSCREEN_CLASS="ssplayer-fullscreen";var WAIT_TIME_FOR_ANIMATION=1e3;var FullscreenBehavior=function(_EventListener){_inherits(FullscreenBehavior,_EventListener);function FullscreenBehavior(fullscreenTarget,videoAdapter,toolbar){var playerStateManager=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];_classCallCheck(this,FullscreenBehavior);_get(Object.getPrototypeOf(FullscreenBehavior.prototype),"constructor",this).call(this);this.fullscreenTarget=fullscreenTarget;this.videoAdapter=videoAdapter;this.toolbar=toolbar;this.playerStateManager=playerStateManager}_createClass(FullscreenBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.toolbar,"enterFullscreen",this.onToolbarEnterFullscreen],[this.toolbar,"exitFullscreen",this.onToolbarExitFullscreen],[this.fullscreenTarget,"changeFullscreen",this.onChangeFullscreen])}},{key:"onToolbarEnterFullscreen",value:function onToolbarEnterFullscreen(){var _this=this;this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].ENTER_FULLSCREEN,CONTROL_NAME_FULLSCREEN);this.fullscreenTarget.fullscreen=true;if(!this.playerStateManager.isDisableA11y&&this.playerStateManager.isFocusActive){setTimeout(function(){return _this.toolbar.fullScreenOffButton.focus()},WAIT_TIME_FOR_ANIMATION)}}},{key:"onToolbarExitFullscreen",value:function onToolbarExitFullscreen(){var _this2=this;this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].EXIT_FULLSCREEN,CONTROL_NAME_FULLSCREEN);this.fullscreenTarget.fullscreen=false;if(!this.playerStateManager.isDisableA11y&&this.playerStateManager.isFocusActive){setTimeout(function(){return _this2.toolbar.fullScreenOnButton.focus()},WAIT_TIME_FOR_ANIMATION)}}},{key:"onChangeFullscreen",value:function onChangeFullscreen(isFullscreen){if(isFullscreen){document.documentElement.classList.add(ROOT_FULLSCREEN_CLASS)}else{document.documentElement.classList.remove(ROOT_FULLSCREEN_CLASS)}}}]);return FullscreenBehavior}(_coreEventListener2["default"]);exports["default"]=FullscreenBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var ModalManagerBehavior=function(_EventListener){_inherits(ModalManagerBehavior,_EventListener);function ModalManagerBehavior(toolbar){_classCallCheck(this,ModalManagerBehavior);_get(Object.getPrototypeOf(ModalManagerBehavior.prototype),"constructor",this).call(this);for(var _len=arguments.length,modals=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){modals[_key-1]=arguments[_key]}this.modals=modals.reverse();this.toolbar=toolbar;this.openedModal=0}_createClass(ModalManagerBehavior,[{key:"beforeInit",value:function beforeInit(){var _this=this;this.modals.forEach(function(modal){_this.addEvents([modal,"opened",_this.onModalOpened],[modal,"closed",_this.onModalClosed])});this.updateActiveModalsLevels()}},{key:"updateActiveModalsLevels",value:function updateActiveModalsLevels(){this.modals.filter(function(modal){return modal.active}).forEach(function(modal,level){modal.level=level})}},{key:"onModalOpened",value:function onModalOpened(){this.updateActiveModalsLevels();this.openedModal+=1;if(this.openedModal===1){this.toolbar.hide()}}},{key:"onModalClosed",value:function onModalClosed(){this.updateActiveModalsLevels();this.openedModal-=1;if(this.openedModal===0){this.toolbar.show()}}}]);return ModalManagerBehavior}(_coreEventListener2["default"]);exports["default"]=ModalManagerBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var PresentationBehavior=function(_EventListener){_inherits(PresentationBehavior,_EventListener);function PresentationBehavior(components,options){_classCallCheck(this,PresentationBehavior);_get(Object.getPrototypeOf(PresentationBehavior.prototype),"constructor",this).call(this);this.components=components;this.options=(0,_lodashDefaultsdeep2["default"])(options,{isRtl:false,callbacks:{}});this.isAccessibilityModeEnabled=false}_createClass(PresentationBehavior,[{key:"beforeInit",value:function beforeInit(){var _components=this.components;var carousel=_components.carousel;var keyboard=_components.keyboard;var sidepanelRight=_components.sidepanelRight;var sidepanelLeft=_components.sidepanelLeft;var progress=_components.progress;var toolbar=_components.toolbar;var topbar=_components.topbar;var bottombar=_components.bottombar;var presentation=_components.presentation;var events=[[carousel,"positionChange",this.onCarouselPosition],[carousel,"loadingStart",this.onCarouselLoadingStart],[carousel,"loadingEnd",this.onCarouselLoadingEnd],[keyboard,"rightArrow",this.onRightKey],[keyboard,"leftArrow",this.onLeftKey],[keyboard,"plus",this.onPlusKey],[keyboard,"minus",this.onMinusKey],[sidepanelRight,"click",this.onRightNav],[sidepanelLeft,"click",this.onLeftNav],[progress,"positionClick",this.onPositionChange],[progress,"positionDrag",this.onProgressDrag],[progress,"positionHover",this.onProgressHover],[progress,"mouseEnter",this.onProgressEnter],[progress,"mouseLeave",this.onProgressLeave],[progress,"showThumbnailPreview",this.onShowThumbnailPreview],[progress,"hideThumbnailPreview",this.onHideThumbnailPreview],[toolbar,"enterFullscreen",this.onEnterFullscreen],[toolbar,"zoom",this.onZoom],[topbar,"cancel",this.onExitFullscreen],[topbar,"download",this.onDownload],[topbar,"accessibility",this.onAccessibility],[presentation,"fullscreen",this.onFullscreen]].filter(function(_ref){var _ref2=_slicedToArray(_ref,1);var target=_ref2[0];return target});this.addEvents.apply(this,_toConsumableArray(events));(0,_lodashInvoke2["default"])(this.components.presentation,"setRtl",this.options.isRtl);(0,_lodashInvoke2["default"])(this.components,"progress.changePosition",carousel.position,false);this._updateSidepanelVisibility(carousel.position,carousel.slideCount);if(bottombar){(0,_lodashInvoke2["default"])(this.components.bottombar,"show");(0,_lodashInvoke2["default"])(this.components.toolbar,"hide");(0,_lodashInvoke2["default"])(this.components.sidepanelRight,"hide");
(0,_lodashInvoke2["default"])(this.components.sidepanelLeft,"hide")}}},{key:"onZoom",value:function onZoom(){var scale=arguments.length<=0||arguments[0]===undefined?1:arguments[0];var isZoomed=scale!==1;(0,_lodashInvoke2["default"])(this.components,"presentation.setIsZoomed",isZoomed);(0,_lodashInvoke2["default"])(this.components,"sidepanelLeft.setIsZoomed",isZoomed);(0,_lodashInvoke2["default"])(this.components,"sidepanelRight.setIsZoomed",isZoomed);(0,_lodashInvoke2["default"])(this.components,"carousel.setZoom",scale)}},{key:"onDownload",value:function onDownload(){(0,_lodashInvoke2["default"])(this.options.callbacks,"onClickDownload");(0,_lodashInvoke2["default"])(this.components,"virusScan.execute",function(){},true,true)}},{key:"onAccessibility",value:function onAccessibility(){var _this=this;var toggleAccessibilityModeFn=function toggleAccessibilityModeFn(){_this.isAccessibilityModeEnabled=!_this.isAccessibilityModeEnabled;_this._toggleAccessibilityControls(_this.isAccessibilityModeEnabled)};(0,_lodashInvoke2["default"])(this.options.callbacks,"onClickAccessibilityMode");if(!this.isAccessibilityModeEnabled){(0,_lodashInvoke2["default"])(this.components,"virusScan.execute",toggleAccessibilityModeFn,false)}else{toggleAccessibilityModeFn()}}},{key:"onCarouselPosition",value:function onCarouselPosition(data){(0,_lodashInvoke2["default"])(this.options.callbacks,"onChangePosition",data);(0,_lodashInvoke2["default"])(this.components,"pagination.changePosition",data.position);(0,_lodashInvoke2["default"])(this.components,"progress.changePosition",data.position,true);this._updateSidepanelVisibility(data.position,data.length)}},{key:"onCarouselLoadingStart",value:function onCarouselLoadingStart(){(0,_lodashInvoke2["default"])(this.components,"loader.show")}},{key:"onCarouselLoadingEnd",value:function onCarouselLoadingEnd(){(0,_lodashInvoke2["default"])(this.components,"loader.hide")}},{key:"onLeftNav",value:function onLeftNav(){var _this2=this;this._executeCallbackOnPositionChange(function(){return(0,_lodashInvoke2["default"])(_this2.options.callbacks,"onClickLeftNav")},function(){return _this2.onSlidePrevious()})}},{key:"onRightNav",value:function onRightNav(){var _this3=this;this._executeCallbackOnPositionChange(function(){return(0,_lodashInvoke2["default"])(_this3.options.callbacks,"onClickRightNav")},function(){return _this3.onSlideNext()})}},{key:"onLeftKey",value:function onLeftKey(){var _this4=this;this._executeCallbackOnPositionChange(function(){return(0,_lodashInvoke2["default"])(_this4.options.callbacks,"onLeftKeyPress")},function(){return _this4.onSlidePrevious()})}},{key:"onRightKey",value:function onRightKey(){var _this5=this;this._executeCallbackOnPositionChange(function(){return(0,_lodashInvoke2["default"])(_this5.options.callbacks,"onRightKeyPress")},function(){return _this5.onSlideNext()})}},{key:"onPlusKey",value:function onPlusKey(){if(this.isFullscreen){(0,_lodashInvoke2["default"])(this.components,"toolbar.onZoomIn")}}},{key:"onMinusKey",value:function onMinusKey(){if(this.isFullscreen){(0,_lodashInvoke2["default"])(this.components,"toolbar.onZoomOut")}}},{key:"onSlideNext",value:function onSlideNext(){(0,_lodashInvoke2["default"])(this.components,"carousel.next")}},{key:"onSlidePrevious",value:function onSlidePrevious(){(0,_lodashInvoke2["default"])(this.components,"carousel.previous")}},{key:"onPositionChange",value:function onPositionChange(position){var _this6=this;this._executeCallbackOnPositionChange(function(){return(0,_lodashInvoke2["default"])(_this6.options.callbacks,"onProgressMove",position)},function(){return(0,_lodashInvoke2["default"])(_this6.components,"carousel.changePosition",position,false)})}},{key:"onProgressDrag",value:function onProgressDrag(position){(0,_lodashInvoke2["default"])(this.components,"progress.changePosition",position,false);this.onPositionChange(position)}},{key:"onFullscreen",value:function onFullscreen(isFullscreen){this.isFullscreen=isFullscreen;(0,_lodashInvoke2["default"])(this.options.callbacks,"onFullscreen",isFullscreen);if(isFullscreen){(0,_lodashInvoke2["default"])(this.components,"topbar.setFocus")}else{this.isAccessibilityModeEnabled=false;this._toggleAccessibilityControls(this.isAccessibilityModeEnabled);(0,_lodashInvoke2["default"])(this.components,"toolbar.resetZoom")}(0,_lodashInvoke2["default"])(this.components,"carousel.onWindowResize");(0,_lodashInvoke2["default"])(this.components,"progress.changePosition",this.components.carousel.position,false)}},{key:"onEnterFullscreen",value:function onEnterFullscreen(){(0,_lodashInvoke2["default"])(this.options.callbacks,"onClickEnterFullscreen");(0,_lodashInvoke2["default"])(this.components,"presentation.enterFullscreen")}},{key:"onExitFullscreen",value:function onExitFullscreen(){(0,_lodashInvoke2["default"])(this.options.callbacks,"onClickExitFullscreen");(0,_lodashInvoke2["default"])(this.components,"presentation.exitFullscreen")}},{key:"onProgressHover",value:function onProgressHover(positionInfo){var progressBarWidthInPx=this.components.progress.progressBarWidthInPx;(0,_lodashInvoke2["default"])(this.components,"previewThumbnail.changeThumbnailPosition",positionInfo.x,progressBarWidthInPx);(0,_lodashInvoke2["default"])(this.components,"previewThumbnail.changeThumbnailPagination",positionInfo.position+1)}},{key:"onProgressEnter",value:function onProgressEnter(){this.onShowThumbnailPreview()}},{key:"onProgressLeave",value:function onProgressLeave(){this.onHideThumbnailPreview()}},{key:"onShowThumbnailPreview",value:function onShowThumbnailPreview(){(0,_lodashInvoke2["default"])(this.components,"previewThumbnail.toggleThumbnail",true)}},{key:"onHideThumbnailPreview",value:function onHideThumbnailPreview(){(0,_lodashInvoke2["default"])(this.components,"previewThumbnail.toggleThumbnail",false)}},{key:"_toggleAccessibilityControls",value:function _toggleAccessibilityControls(isAccessibilityModeEnabled){(0,_lodashInvoke2["default"])(this.components,"topbar.setAccessibilityButtonState",isAccessibilityModeEnabled);(0,_lodashInvoke2["default"])(this.components,"accessibilityModeFrame.toggle",isAccessibilityModeEnabled);(0,_lodashInvoke2["default"])(this.components,"sidepanelLeft.toggleEnabled",!isAccessibilityModeEnabled);(0,_lodashInvoke2["default"])(this.components,"sidepanelRight.toggleEnabled",!isAccessibilityModeEnabled);(0,_lodashInvoke2["default"])(this.components,"carousel.toggleAccessibilityVisibility",isAccessibilityModeEnabled,isAccessibilityModeEnabled);(0,_lodashInvoke2["default"])(this.components,"toolbar.toggleAccessibilityVisibility",isAccessibilityModeEnabled)}},{key:"_updateSidepanelVisibility",value:function _updateSidepanelVisibility(currentPosition,numberPages){(0,_lodashInvoke2["default"])(this.components,"sidepanelRight.toggleEnabled",currentPosition<numberPages-1);(0,_lodashInvoke2["default"])(this.components,"sidepanelLeft.toggleEnabled",currentPosition>0)}},{key:"_executeCallbackOnPositionChange",value:function _executeCallbackOnPositionChange(callbackFunc,funcThatMayCausePositionChange){var positionBefore=this.components.carousel.position;funcThatMayCausePositionChange();if(this.components.carousel.position!==positionBefore){callbackFunc()}}}]);return PresentationBehavior}(_coreEventListener2["default"]);exports["default"]=PresentationBehavior;module.exports=exports["default"]},function(module,exports){(function(global){var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1/0;var funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]";var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var freeGlobal=(typeof global==="undefined"?"undefined":_typeof2(global))=="object"&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":_typeof2(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var _Symbol5=root.Symbol,splice=arrayProto.splice;var nativeMax=Math.max;var Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");var symbolProto=_Symbol5?_Symbol5.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function baseInvoke(object,path,args){if(!isKey(path,object)){path=castPath(path);object=parent(object,path);path=last(path)}var func=object==null?object:object[toKey(path)];return func==null?undefined:apply(func,object,args)}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseRest(func,start){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=array;return apply(func,this,otherArgs)}}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseToString(value){if(typeof value=="string"){return value}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function castPath(value){return isArray(value)?value:stringToPath(value)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function isKey(value,object){if(isArray(value)){return false}var type=typeof value==="undefined"?"undefined":_typeof2(value);if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function parent(object,path){return path.length==1?object:baseGet(object,baseSlice(path,0,-1))}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}function isSymbol(value){return(typeof value==="undefined"?"undefined":_typeof2(value))=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){return value==null?"":baseToString(value)}var invoke=baseRest(baseInvoke);module.exports=invoke}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var ShareLinkBehavior=function(_EventListener){_inherits(ShareLinkBehavior,_EventListener);function ShareLinkBehavior(shareModal,shareLink){_classCallCheck(this,ShareLinkBehavior);_get(Object.getPrototypeOf(ShareLinkBehavior.prototype),"constructor",this).call(this);this.shareModal=shareModal;this.shareLink=shareLink}_createClass(ShareLinkBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.shareModal,"opened",this.onShareModalOpen])}},{key:"onShareModalOpen",value:function onShareModalOpen(){this.shareLink.select()}}]);return ShareLinkBehavior}(_coreEventListener2["default"]);exports["default"]=ShareLinkBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersVideojsAdapterEvents=__webpack_require__(181);var _helpersVideojsAdapterEvents2=_interopRequireDefault(_helpersVideojsAdapterEvents);var _helpersControlNames=__webpack_require__(182);var ShareModalBehavior=function(_EventListener){_inherits(ShareModalBehavior,_EventListener);function ShareModalBehavior(videojsPlayer,videoAdapter,controlTracker,toolbar,shareModal){_classCallCheck(this,ShareModalBehavior);_get(Object.getPrototypeOf(ShareModalBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.videoAdapter=videoAdapter;this.controlTracker=controlTracker;this.toolbar=toolbar;this.shareModal=shareModal}_createClass(ShareModalBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.toolbar,"share",this.onToolbarShare],[this.shareModal,"closed",this.onShareModalClose])}},{key:"onToolbarShare",value:function onToolbarShare(){var controlName=_helpersControlNames.CONTROL_NAME.TOOLBAR.SHARE;if(this.videojsPlayer.paused()){this.alreadyPaused=true}else{this.controlTracker.controlName=controlName;this.videojsPlayer.pause()}this.shareModal.open();this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].SHARE_MODAL_OPEN,controlName)}},{key:"onShareModalClose",value:function onShareModalClose(){this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].SHARE_MODAL_CLOSE);if(!this.videojsPlayer.ended()&&this.videojsPlayer.paused()){if(this.alreadyPaused){this.alreadyPaused=false}else{this.videojsPlayer.play()}}}}]);return ShareModalBehavior}(_coreEventListener2["default"]);exports["default"]=ShareModalBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var VideojsBufferBehavior=function(_EventListener){_inherits(VideojsBufferBehavior,_EventListener);function VideojsBufferBehavior(videojsPlayer,buffer){_classCallCheck(this,VideojsBufferBehavior);_get(Object.getPrototypeOf(VideojsBufferBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.buffer=buffer}_createClass(VideojsBufferBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"progress",this.onVideojsProgress]);this.updateProgress()}},{key:"updateProgress",value:function updateProgress(){this.buffer.buffered=this.videojsPlayer.bufferedPercent()}},{key:"onVideojsProgress",value:function onVideojsProgress(){this.updateProgress()}}]);return VideojsBufferBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsBufferBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersVideojsErrors=__webpack_require__(200);var _helpersVideojsErrors2=_interopRequireDefault(_helpersVideojsErrors);var states={stopped:"stopped",waiting:"waiting",playing:"playing"};var TIMEUPDATE_THRESHOLD=500;var VideojsMetricsBehavior=function(_EventListener){_inherits(VideojsMetricsBehavior,_EventListener);function VideojsMetricsBehavior(videojsInstance,tracker){_classCallCheck(this,VideojsMetricsBehavior);_get(Object.getPrototypeOf(VideojsMetricsBehavior.prototype),"constructor",this).call(this);this.tracker=tracker;this.videojs=videojsInstance;this.isPreloadNone=this.videojs.preload()==="none";this.state=states.stopped;this.seeking=false;this.initializationStarted=false;this.initializationEnded=false;this.isBuffering=false}_createClass(VideojsMetricsBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojs,"loadeddata",this.onLoadeddata],[this.videojs,"loadstart",this.onLoadstart],[this.videojs,"pause",this.onPause],[this.videojs,"play",this.onPlay],[this.videojs,"seeked",this.onSeeked],[this.videojs,"seeking",this.onSeeking],[this.videojs,"timeupdate",this.onTimeupdate],[this.videojs,"waiting",this.onWaiting],[this.videojs,"error",this.onError])}},{key:"setInitializationStarted",value:function setInitializationStarted(){if(!this.initializationStarted){this.tracker.videoInitializationStart();this.initializationStarted=true}}},{key:"setInitializationEnded",value:function setInitializationEnded(){if(!this.initializationEnded){this.setInitializationStarted();this.tracker.videoInitializationEnd();this.initializationEnded=true}}},{key:"bufferingStart",value:function bufferingStart(){if(!this.seeking){this.isBuffering=true;this.tracker.bufferingStart()}}},{key:"bufferingEnd",value:function bufferingEnd(){if(!this.seeking&&this.isBuffering){this.isBuffering=false;this.tracker.bufferingEnd()}}},{key:"onSeeking",value:function onSeeking(){this.seeking=true}},{key:"onSeeked",value:function onSeeked(){this.seeking=false}},{key:"onWaiting",value:function onWaiting(){if(this.state===states.playing){this.state=states.waiting;this.bufferingStart();this.bufferingStartTime=Date.now()}}},{key:"onTimeupdate",value:function onTimeupdate(){var isTimeupdateFiredDuringBuffering=Date.now()-this.bufferingStartTime<TIMEUPDATE_THRESHOLD;if(!isTimeupdateFiredDuringBuffering&&this.state===states.waiting){this.state=states.playing;this.bufferingEnd()}}},{key:"onPause",value:function onPause(){this.state=states.stopped}},{key:"onPlay",value:function onPlay(){if(this.isPreloadNone){this.setInitializationStarted()}this.state=states.playing}},{key:"onLoadstart",value:function onLoadstart(){if(!this.isPreloadNone){this.setInitializationStarted()}}},{key:"onLoadeddata",value:function onLoadeddata(){this.setInitializationEnded()}},{key:"onError",value:function onError(){if(this.tracker.videoPlaybackError){var videoError=this.videojs.error();this.tracker.videoPlaybackError(_helpersVideojsErrors2["default"][videoError.code],videoError.message)}}}]);return VideojsMetricsBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsMetricsBehavior;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var errorTypes={0:"CUSTOM",1:"ABORTED",2:"NETWORK",3:"DECODING",4:"SOURCE_FILE",5:"ENCRYPTION"};exports["default"]=errorTypes;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _helpersA11yHelper=__webpack_require__(121);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersControlNames=__webpack_require__(182);var TOOLBAR=_helpersControlNames.CONTROL_NAME.TOOLBAR;var VideojsPlaybackBehavior=function(_EventListener){_inherits(VideojsPlaybackBehavior,_EventListener);function VideojsPlaybackBehavior(videojsPlayer,videoPlayer,controlTracker,toolbar,bigPlayButton,document,playerStateManager,_ref){if(playerStateManager===undefined)playerStateManager={};var playButtonA11yControlText=_ref.playButtonA11yControlText;var replayButtonA11yControlText=_ref.replayButtonA11yControlText;_classCallCheck(this,VideojsPlaybackBehavior);_get(Object.getPrototypeOf(VideojsPlaybackBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.videoPlayer=videoPlayer;this.controlTracker=controlTracker;this.toolbar=toolbar;this.bigPlayButton=bigPlayButton;this.document=document;this.playerStateManager=playerStateManager;this.playButtonA11yControlText=playButtonA11yControlText;this.replayButtonA11yControlText=replayButtonA11yControlText}_createClass(VideojsPlaybackBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"play",this.onVideojsPlay],[this.videojsPlayer,"ended",this.onVideojsEnded],[this.videojsPlayer,"pause",this.onVideojsPause],[this.videojsPlayer,"seeked",this.onVideojsSeeked],[this.toolbar,"play",this.onToolbarPlay],[this.toolbar,"pause",this.onToolbarPause],[this.videoPlayer,"click",this.onVideoPlayerClick]);if(!this.playerStateManager.isDisableA11y){this.addEvents([this.document,"keydown",this.onKeyPress])}if(this.bigPlayButton){this.addEvents([this.bigPlayButton,"click",this.onBigPlayButtonClick]);this.bigPlayButton.active=true}this.updateVideoPlayer();if(this.bigPlayButton){this.toolbar.hide()}}},{key:"updateVideoPlayer",value:function updateVideoPlayer(){this.videoPlayer.paused=this.videojsPlayer.paused();this.videoPlayer.ended=this.videojsPlayer.ended();if(!this.playerStateManager.isDisableA11y&&this.playerStateManager.isFocusActive){if(this.document.activeElement!==this.toolbar.playButton&&this.document.activeElement!==this.toolbar.pauseButton){return}var buttonToFocus=this.videojsPlayer.paused()?this.toolbar.playButton:this.toolbar.pauseButton;buttonToFocus.focus()}}},{key:"onVideojsPlay",value:function onVideojsPlay(){if(this.bigPlayButton&&this.bigPlayButton.active){this.bigPlayButton.active=false;this.bigPlayButton.hide();this.toolbar.show();this.toolbar.restartHideTimeout();if(!this.playerStateManager.isDisableA11y&&this.toolbar.firstFocusableElement){this.toolbar.firstFocusableElement.focus()}}_linkedinJsecure2["default"].setElementContent(this.toolbar.playButton.querySelector(".a11y-text"),this.playButtonA11yControlText);this.updateVideoPlayer()}},{key:"onVideojsEnded",value:function onVideojsEnded(){_linkedinJsecure2["default"].setElementContent(this.toolbar.playButton.querySelector(".a11y-text"),this.replayButtonA11yControlText);this.updateVideoPlayer()}},{key:"onVideojsPause",value:function onVideojsPause(){this.updateVideoPlayer()}},{key:"onVideojsSeeked",value:function onVideojsSeeked(){this.updateVideoPlayer()}},{key:"onToolbarPlay",value:function onToolbarPlay(){this.controlTracker.controlName=this.videojsPlayer.ended()?TOOLBAR.REPLAY:TOOLBAR.PLAY;this.videojsPlayer.play()}},{key:"onToolbarPause",value:function onToolbarPause(){this.controlTracker.controlName=TOOLBAR.PAUSE;this.videojsPlayer.pause()}},{key:"onBigPlayButtonClick",value:function onBigPlayButtonClick(){this.controlTracker.controlName=_helpersControlNames.CONTROL_NAME.HERO.PLAY;this.videojsPlayer.play()}},{key:"onVideoPlayerClick",value:function onVideoPlayerClick(){if(this.videojsPlayer.paused()){this.controlTracker.controlName=_helpersControlNames.CONTROL_NAME.ELEMENT.PLAY;this.videojsPlayer.play()}else{this.controlTracker.controlName=_helpersControlNames.CONTROL_NAME.ELEMENT.PAUSE;this.videojsPlayer.pause()}this.playerStateManager.isFocusActive=false}},{key:"onKeyPress",value:function onKeyPress(event){if(!this.bigPlayButton||!this.bigPlayButton.active){this.toolbar.restartHideTimeout()}if(event.keyCode===_helpersA11yHelper.KEY_CODE.TAB){this.playerStateManager.isFocusActive=true}}}]);return VideojsPlaybackBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsPlaybackBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var ONE_SECOND=1;var VideojsTimeBehavior=function(_EventListener){_inherits(VideojsTimeBehavior,_EventListener);function VideojsTimeBehavior(videojsPlayer,timeDisplay,slider){_classCallCheck(this,VideojsTimeBehavior);_get(Object.getPrototypeOf(VideojsTimeBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.timeDisplay=timeDisplay;this.slider=slider;this.previousTime=0}_createClass(VideojsTimeBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"durationchange",this.onVideojsDurationChange],[this.videojsPlayer,"timeupdate",this.onVideojsTimeupdate]);if(this.slider){this.addEvents([this.slider,"valueChanged",this.onProgressValueChanged])}this.updateDuration();this.updateCurrentTime()}},{key:"updateDuration",value:function updateDuration(){var duration=this.videojsPlayer.duration()||0;if(this.timeDisplay){this.timeDisplay.duration=duration}if(this.slider){this.slider.max=duration}}},{key:"updateCurrentTime",value:function updateCurrentTime(){var currentTime=this.videojsPlayer.currentTime();var curSecond=Math.floor(currentTime);var preSecond=Math.floor(this.previousTime);if((this.previousTime===0||Math.abs(curSecond-preSecond)>=ONE_SECOND)&&this.timeDisplay){this.previousTime=curSecond;this.timeDisplay.currentTime=currentTime}if(this.slider&&!this.slider.dragging){this.slider.value=currentTime}}},{key:"onVideojsDurationChange",value:function onVideojsDurationChange(){this.updateDuration()}},{key:"onVideojsTimeupdate",
value:function onVideojsTimeupdate(){this.updateCurrentTime()}},{key:"onProgressValueChanged",value:function onProgressValueChanged(){this.videojsPlayer.currentTime(this.slider.value)}}]);return VideojsTimeBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsTimeBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _Object$defineProperty=__webpack_require__(56)["default"];var _Object$getOwnPropertyDescriptor=__webpack_require__(42)["default"];var _Object$keys=__webpack_require__(123)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinVideoTrackingAdaptors=__webpack_require__(204);var _linkedinVideoTrackingAdaptors2=_interopRequireDefault(_linkedinVideoTrackingAdaptors);var _lodashDebounce=__webpack_require__(206);var _lodashDebounce2=_interopRequireDefault(_lodashDebounce);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var FEATURE={ON:"ON",OFF:"OFF",NOT_SUPPORTED:"NOT_SUPPORTED",NOT_MEASURED:"NOT_MEASURED"};exports.FEATURE=FEATURE;var DEBOUNCE_MS=300;exports.DEBOUNCE_MS=DEBOUNCE_MS;var BEACON_INTERVALS=[0,3e3,7e3,2e4,3e4];var MEDIA_TRACKING_FIELDS_MAP={objectUrn:"mediaUrn",trackingId:"sessionTrackingId"};var VideojsTrackingBehavior=function(_EventListener){_inherits(VideojsTrackingBehavior,_EventListener);function VideojsTrackingBehavior(videojsInstance,videoPlayer,options){_classCallCheck(this,VideojsTrackingBehavior);_get(Object.getPrototypeOf(VideojsTrackingBehavior.prototype),"constructor",this).call(this);var appId=options.appId;var header=options.header;var requestHeader=options.requestHeader;var mobileHeader=options.mobileHeader;var _options$pollingInterval=options.pollingInterval;var pollingInterval=_options$pollingInterval===undefined?3e3:_options$pollingInterval;var topicNamePrefix=options.topicNamePrefix;var trackingUrl=options.trackingUrl;var _options$usePlayerBeaconEvent=options.usePlayerBeaconEvent;var usePlayerBeaconEvent=_options$usePlayerBeaconEvent===undefined?false:_options$usePlayerBeaconEvent;var _options$useHeartbeatEventV2=options.useHeartbeatEventV2;var useHeartbeatEventV2=_options$useHeartbeatEventV2===undefined?false:_options$useHeartbeatEventV2;if(!Object.prototype.hasOwnProperty.call(options,"ccVisible")){options.ccVisible=FEATURE.NOT_MEASURED}this.videojsInstance=videojsInstance;this.videoPlayer=videoPlayer;this.videoTrackingAdapter=new _linkedinVideoTrackingAdaptors2["default"](appId,requestHeader,mobileHeader,topicNamePrefix,{header:header,trackingUrl:trackingUrl});this.timeElapsed=0;this.isStarted=false;this.pollingInterval=pollingInterval;this.usePlayerBeaconEvent=usePlayerBeaconEvent;this.useHeartbeatEventV2=useHeartbeatEventV2;this.videoTrackingAdapter.state=options;this.videoTrackingAdapter.mediaTrackingObject=_linkedinVideoTrackingAdaptors.MEDIA_TRACKING_OBJECT_FIELDS.reduce(function(obj,targetField){var sourceField=MEDIA_TRACKING_FIELDS_MAP[targetField]||targetField;if(Object.prototype.hasOwnProperty.call(options,sourceField)){_Object$defineProperty(obj,targetField,_Object$getOwnPropertyDescriptor(options,sourceField))}return obj},{})}_createClass(VideojsTrackingBehavior,[{key:"beforeInit",value:function beforeInit(){this.debounced={seeked:(0,_lodashDebounce2["default"])(this.onVideojsSeeked,DEBOUNCE_MS),volumechange:(0,_lodashDebounce2["default"])(this.onVideojsVolumechange,DEBOUNCE_MS)};this.addEvents([this.videojsInstance,"playing",this.onVideojsPlaying],[this.videojsInstance,"play",this.onVideojsPlayPause],[this.videojsInstance,"pause",this.onVideojsPlayPause],[this.videojsInstance,"waiting",this.onVideojsWaiting],[this.videojsInstance,"timeupdate",this.onVideojsTimeupdate],[this.videojsInstance,"volumechange",this.debounced.volumechange],[this.videojsInstance,"seeking",this.onVideojsSeeking],[this.videojsInstance,"seeked",this.debounced.seeked],[this.videojsInstance,"ended",this.onVideojsEnded],[this.videojsInstance,"loadedmetadata",this.onVideojsLoadedmetadata],[this.videojsInstance,"ratechange",this.onVideojsRateChange],[this.videoPlayer,"changeFullscreen",this.onFullscreenChange],[this.videoPlayer,"userInteracted",this.onUserInteracted],[window,"beforeunload",this.onBeforeUnload]);this.videojsInstance.ready(this.initState.bind(this))}},{key:"beforeDispose",value:function beforeDispose(){var _this=this;if(this.debounced){_Object$keys(this.debounced).forEach(function(eventName){return _this.debounced[eventName].cancel()})}if(this.usePlayerBeaconEvent){this.stopBeaconPolling()}else{this.stopPositionPolling()}this.videoTrackingAdapter=null}},{key:"initState",value:function initState(){var volume=this.videojsInstance.volume();this.timeElapsed=this.videojsInstance.currentTime();this.videoTrackingAdapter.state={isPlaying:!this.videojsInstance.paused(),timeElapsed:this.timeElapsed,length:this.videojsInstance.duration(),volume:volume,fullScreen:this.fullscreenState(),speed:this.videojsInstance.playbackRate()};this.previousVolume=volume}},{key:"onVideojsLoadedmetadata",value:function onVideojsLoadedmetadata(){this.videoTrackingAdapter.state={length:this.videojsInstance.duration()}}},{key:"startPositionPolling",value:function startPositionPolling(){this.stopPositionPolling();this.poller=setInterval(this.firePositionChangedEvent.bind(this),this.pollingInterval)}},{key:"stopPositionPolling",value:function stopPositionPolling(){if(this.poller){clearInterval(this.poller);this.poller=null}}},{key:"startBeaconPolling",value:function startBeaconPolling(){this.isPolling=true;this._cancelBeaconInterval();this._runBeaconInterval(BEACON_INTERVALS[0])}},{key:"restartBeaconPolling",value:function restartBeaconPolling(){if(this.isPolling){this.startBeaconPolling()}}},{key:"stopBeaconPolling",value:function stopBeaconPolling(){if(this.isPolling){this.isPolling=false;this._cancelBeaconInterval();this._fireBeaconEvent();this._timeLastBeaconCalled=null}}},{key:"_runBeaconInterval",value:function _runBeaconInterval(interval){var nextInterval=BEACON_INTERVALS[BEACON_INTERVALS.indexOf(interval)+1]||BEACON_INTERVALS[BEACON_INTERVALS.length-1];var timeElapsed=this.videoTrackingAdapter.state.timeElapsed;if(timeElapsed===this._beaconTimeElapsed&&interval>0){this._cancelBeaconInterval();return}this._beaconTimeElapsed=timeElapsed;this._fireBeaconEvent();this._beaconPoll=setTimeout(this._runBeaconInterval.bind(this,nextInterval),nextInterval)}},{key:"_cancelBeaconInterval",value:function _cancelBeaconInterval(){if(this._beaconPoll){clearTimeout(this._beaconPoll);this._beaconPoll=null}}},{key:"_fireBeaconEvent",value:function _fireBeaconEvent(){var now=Date.now();var timeSinceLastBeacon=now-(this._timeLastBeaconCalled||now);this._timeLastBeaconCalled=now;this.videoTrackingAdapter.trackPlayerEvent(_linkedinVideoTrackingAdaptors.PLAYER_BEACON_EVENT,!!this.videojsInstance.autoplay(),timeSinceLastBeacon)}},{key:"onVideojsPlayPause",value:function onVideojsPlayPause(){var isPaused=this.videojsInstance.paused();if(!(isPaused||this.isStarted)){this.isStarted=true}this.videoTrackingAdapter.state={isPlaying:!isPaused};if(isPaused){if(this.usePlayerBeaconEvent){this.stopBeaconPolling()}else{this.stopPositionPolling()}}else if(!this.usePlayerBeaconEvent&&!this.useHeartbeatEventV2){this.startPositionPolling()}this.videoTrackingAdapter.trackPlayerEvent(_linkedinVideoTrackingAdaptors.PLAYER_PLAY_PAUSE_EVENT,_linkedinVideoTrackingAdaptors.PLAYER_STATE_CHANGED_REASONS.USER_TRIGGERED)}},{key:"onVideojsPlaying",value:function onVideojsPlaying(){this.videoTrackingAdapter.state={isPlaying:true};if(this.usePlayerBeaconEvent){this.startBeaconPolling()}else if(this.useHeartbeatEventV2){this.startPositionPolling()}}},{key:"onVideojsWaiting",value:function onVideojsWaiting(){this.videoTrackingAdapter.state={isPlaying:false};if(this.usePlayerBeaconEvent){this.stopBeaconPolling()}else if(this.useHeartbeatEventV2){this.stopPositionPolling()}}},{key:"onVideojsTimeupdate",value:function onVideojsTimeupdate(){var currentTime=this.videojsInstance.currentTime();var isPaused=this.videojsInstance.paused();if(!this.isStarted&&!isPaused){this.isStarted=true;if(!this.usePlayerBeaconEvent&&!this.useHeartbeatEventV2){this.startPositionPolling()}}this.timeElapsed=currentTime;this.videoTrackingAdapter.state={timeElapsed:this.timeElapsed}}},{key:"onVideojsVolumechange",value:function onVideojsVolumechange(){var volume=this.videojsInstance.volume();this.videoTrackingAdapter.state={volume:volume};this.videoTrackingAdapter.trackPlayerEvent(_linkedinVideoTrackingAdaptors.PLAYER_VOLUME_CHANGED_EVENT,this.previousVolume);if(this.usePlayerBeaconEvent){this.restartBeaconPolling()}this.previousVolume=volume}},{key:"onFullscreenChange",value:function onFullscreenChange(){var fullScreen=this.fullscreenState();this.videoTrackingAdapter.state={fullScreen:fullScreen};if(this.usePlayerBeaconEvent){this.restartBeaconPolling()}}},{key:"onVideojsRateChange",value:function onVideojsRateChange(){var speed=this.videojsInstance.playbackRate();this.videoTrackingAdapter.state={speed:speed};if(this.usePlayerBeaconEvent){this.restartBeaconPolling()}}},{key:"onVideojsSeeking",value:function onVideojsSeeking(){if(!this.seeking){this.seeking=true;this.previousElapsedTime=this.timeElapsed;if(this.usePlayerBeaconEvent){this.stopBeaconPolling()}}}},{key:"onVideojsSeeked",value:function onVideojsSeeked(){this.videoTrackingAdapter.state={timeElapsed:this.videojsInstance.currentTime()};this.videoTrackingAdapter.trackPlayerEvent(_linkedinVideoTrackingAdaptors.PLAYER_SEEK_EVENT,this.previousElapsedTime);this.seeking=false}},{key:"onVideojsEnded",value:function onVideojsEnded(){this.isStarted=false;this.videoTrackingAdapter.state={isPlaying:false};if(!this.usePlayerBeaconEvent){this.stopPositionPolling();this.firePositionChangedEvent()}}},{key:"onUserInteracted",value:function onUserInteracted(){this.videojsInstance.autoplay(false)}},{key:"onBeforeUnload",value:function onBeforeUnload(){if(this.usePlayerBeaconEvent){this.stopBeaconPolling()}}},{key:"firePositionChangedEvent",value:function firePositionChangedEvent(){this.videoTrackingAdapter.trackPlayerEvent(_linkedinVideoTrackingAdaptors.PLAYER_POSITION_CHANGED_EVENT)}},{key:"fullscreenState",value:function fullscreenState(){if(!this.videoPlayer.fullscreenEnabled){return FEATURE.NOT_SUPPORTED}return this.videoPlayer.fullscreen?FEATURE.ON:FEATURE.OFF}}]);return VideojsTrackingBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsTrackingBehavior},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _linkedinWebTrackingTransport=__webpack_require__(205);var _linkedinWebTrackingTransport2=_interopRequireDefault(_linkedinWebTrackingTransport);var PLAYER_PLAY_PAUSE_EVENT="PlayerPlayPauseEvent",PLAYER_POSITION_CHANGED_EVENT="PlayerPositionChangedEvent",PLAYER_BEACON_EVENT="PlayerBeaconEvent",PLAYER_SEEK_EVENT="PlayerSeekEvent",PLAYER_VOLUME_CHANGED_EVENT="PlayerVolumeChangedEvent",PLAYER_QUALITY_EVENT="PlayerQualityEvent",PLAYER_FULLSCREEN_EVENT="PlayerFullscreenEvent",STATE_FIELDS=["mediaUrn","length","mediaViewTrackingId","volume","timeElapsed","isPlaying","ccVisible","downloaded","fullScreen","speed","casting","bitrate","isAudioOnly"],MEDIA_TRACKING_OBJECT_FIELDS=["objectUrn","trackingId"],PLAYER_STATE_CHANGED_REASONS={ENTERED_VIEWPORT:"ENTERED_VIEWPORT",EXITED_VIEWPORT:"EXITED_VIEWPORT",USER_TRIGGERED:"USER_TRIGGERED",VIDEO_PRIORITY_CHANGED:"VIDEO_PRIORITY_CHANGED"};exports.PLAYER_PLAY_PAUSE_EVENT=PLAYER_PLAY_PAUSE_EVENT;exports.PLAYER_POSITION_CHANGED_EVENT=PLAYER_POSITION_CHANGED_EVENT;exports.PLAYER_BEACON_EVENT=PLAYER_BEACON_EVENT;exports.PLAYER_SEEK_EVENT=PLAYER_SEEK_EVENT;exports.PLAYER_VOLUME_CHANGED_EVENT=PLAYER_VOLUME_CHANGED_EVENT;exports.PLAYER_QUALITY_EVENT=PLAYER_QUALITY_EVENT;exports.PLAYER_FULLSCREEN_EVENT=PLAYER_FULLSCREEN_EVENT;exports.STATE_FIELDS=STATE_FIELDS;exports.MEDIA_TRACKING_OBJECT_FIELDS=MEDIA_TRACKING_OBJECT_FIELDS;exports.PLAYER_STATE_CHANGED_REASONS=PLAYER_STATE_CHANGED_REASONS;var METHOD_PREFIX="construct";function _getMethodName(eventName){return METHOD_PREFIX+eventName}var VideoTrackingAdaptor=function(){function VideoTrackingAdaptor(appId,requestHeader,mobileHeader,topicNamePrefix){var options=arguments.length<=4||arguments[4]===undefined?{}:arguments[4];_classCallCheck(this,VideoTrackingAdaptor);_linkedinWebTrackingTransport2["default"].setAppId(appId);_linkedinWebTrackingTransport2["default"].setProperty("maxQueueSize",3);if(options.trackingUrl){_linkedinWebTrackingTransport2["default"].setTrackingUrl(options.trackingUrl)}this._state={};this._mediaTrackingObject={};this.header=options.header;this.requestHeader=requestHeader;this.mobileHeader=mobileHeader;this._topicNamePrefix=topicNamePrefix}_createClass(VideoTrackingAdaptor,[{key:_getMethodName(PLAYER_POSITION_CHANGED_EVENT),value:function value(){return{header:this.header,requestHeader:this.requestHeader,mobileHeader:this.mobileHeader,state:this.state,mediaTrackingObject:this.hasMediaTrackingId?this.mediaTrackingObject:null}}},{key:_getMethodName(PLAYER_BEACON_EVENT),value:function value(isAutoplaying,timeSinceLastBeacon){var eventBody=this[_getMethodName(PLAYER_POSITION_CHANGED_EVENT)]();eventBody.isAutoplaying=isAutoplaying;eventBody.timeSinceLastBeacon=timeSinceLastBeacon;return eventBody}},{key:_getMethodName(PLAYER_PLAY_PAUSE_EVENT),value:function value(reason){var eventBody=this[_getMethodName(PLAYER_POSITION_CHANGED_EVENT)]();if(!PLAYER_STATE_CHANGED_REASONS[reason]){throw new Error("The reason for a player change event must be a valid PlayPauseChangedReason enum value.")}eventBody.reason=reason;return eventBody}},{key:_getMethodName(PLAYER_SEEK_EVENT),value:function value(previousTimeElapsed){var eventBody=this[_getMethodName(PLAYER_POSITION_CHANGED_EVENT)]();eventBody.previousTimeElapsed=previousTimeElapsed;return eventBody}},{key:_getMethodName(PLAYER_VOLUME_CHANGED_EVENT),value:function value(previousVolume){var eventBody=this[_getMethodName(PLAYER_POSITION_CHANGED_EVENT)]();eventBody.previousVolume=previousVolume;return eventBody}},{key:"_constructSchema",value:function _constructSchema(eventName,eventBody){var schema={eventInfo:{eventName:eventName,appId:this.appId},eventBody:eventBody};if(typeof this._topicNamePrefix==="string"){schema.eventInfo.topicName=this._topicNamePrefix+eventName}return schema}},{key:"trackPlayerEvent",value:function trackPlayerEvent(eventName){for(var _len=arguments.length,eventValues=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){eventValues[_key-1]=arguments[_key]}var schema=this._constructSchema(eventName,this[_getMethodName(eventName)].apply(this,eventValues));_linkedinWebTrackingTransport2["default"].sendEvent(schema.eventInfo,schema.eventBody)}},{key:"state",set:function set(stateToSet){var _this=this;if(stateToSet==null||(typeof stateToSet==="undefined"?"undefined":_typeof2(stateToSet))!=="object"){return}STATE_FIELDS.forEach(function(fieldName){if(stateToSet.hasOwnProperty(fieldName)){Object.defineProperty(_this._state,fieldName,Object.getOwnPropertyDescriptor(stateToSet,fieldName))}})},get:function get(){var _this2=this;return STATE_FIELDS.reduce(function(state,fieldName){if(_this2._state.hasOwnProperty(fieldName)){state[fieldName]=_this2._state[fieldName]}return state},{})}},{key:"mediaTrackingObject",set:function set(data){var _this3=this;if(data==null||(typeof data==="undefined"?"undefined":_typeof2(data))!=="object"){return}MEDIA_TRACKING_OBJECT_FIELDS.forEach(function(fieldName){if(data.hasOwnProperty(fieldName)){Object.defineProperty(_this3._mediaTrackingObject,fieldName,Object.getOwnPropertyDescriptor(data,fieldName))}})},get:function get(){var _this4=this;return MEDIA_TRACKING_OBJECT_FIELDS.reduce(function(trackingObject,fieldName){if(_this4._mediaTrackingObject.hasOwnProperty(fieldName)){trackingObject[fieldName]=_this4._mediaTrackingObject[fieldName]}return trackingObject},{})}},{key:"hasMediaTrackingId",get:function get(){return this._mediaTrackingObject&&this._mediaTrackingObject.trackingId}}]);return VideoTrackingAdaptor}();exports["default"]=VideoTrackingAdaptor},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){{!(__WEBPACK_AMD_DEFINE_ARRAY__=[exports,module],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})(this,function(exports,module){var isBrowser=typeof window!=="undefined"&&window&&window.appEnvironment!=="node";var useRequestIdleCallback=isBrowser&&!!window.requestIdleCallback;var idleThreshold=8;var webTrackingTransport={AJAX_METHOD:"POST",DEFAULT_PAGE_TYPE:"ajax",globalTrackingUrl:null,globalTrackingAppId:"no.app.id",queue:[],paused:false,maxQueueSize:1,queueTimeout:1e3,timeoutId:null,csrfToken:"",testId:"",testSegId:"",setProperty:function setProperty(key,value){if(value){this[key]=value}},setTrackingUrl:function setTrackingUrl(trackingUrl){this.setProperty("globalTrackingUrl",trackingUrl)},setAppId:function setAppId(appId){this.setProperty("globalTrackingAppId",appId)},setCsrfToken:function setCsrfToken(token){this.setProperty("csrfToken",token)},setTestId:function setTestId(testId){this.setProperty("testId",testId)},setTestSegId:function setTestSegId(testSegId){this.setProperty("testSegId",testSegId)},getCookieString:function getCookieString(){return document.cookie},getCsrfToken:function getCsrfToken(){var token="JSESSIONID=";var ca=this.getCookieString().split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1)}if(c.indexOf(token)!==-1){var value=c.substring(token.length,c.length);if(value[0]==='"'&&value[value.length-1]==='"'){value=value.substring(1,value.length-1)}return value}}return""},createXmlHttpObject:function createXmlHttpObject(){return isBrowser&&!!window.XMLHttpRequest?new XMLHttpRequest:null},ajax:function ajax(postData,success,failure,trackingEndpointUrl){var req;trackingEndpointUrl=trackingEndpointUrl||this.globalTrackingUrl;if(!trackingEndpointUrl){if(failure){failure("Tracking url is not defined")}return}req=this.createXmlHttpObject();if(!req){return}req.open(this.AJAX_METHOD,trackingEndpointUrl,true);req.withCredentials=true;req.setRequestHeader("Content-type","application/json");if(!this.csrfToken){req.setRequestHeader("Csrf-Token",this.getCsrfToken())}else{req.setRequestHeader("Csrf-Token",this.csrfToken)}if(this.testId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_ID",this.testId)}if(this.testSegId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_SEGMENT_ID",this.testSegId)}req.onreadystatechange=function(){if(req.readyState!==4){return}if(req.status!==200&&req.status!==304){if(failure){failure('Response is not "OK" or "Not Modified" for tracking request')}return}if("function"===typeof success){success(req)}};if(req.readyState===4){return}req.send(postData)},pause:function pause(){this.paused=true},unpause:function unpause(){this.paused=false;if(this.queue.length>=this.maxQueueSize){this.flush()}},flush:function flush(){if(this.queue.length>0){var self=this;this.ajax(JSON.stringify(this.queue),null,self.logError);this.queue=[]}if(useRequestIdleCallback){cancelIdleCallback(this.timeoutId)}else{clearTimeout(this.timeoutId)}this.timeoutId=null;this.paused=false},idleFlush:function idleFlush(timeout){var _this=this;var startTime=Date.now();return requestIdleCallback(function(deadline){if(deadline.timeRemaining()>idleThreshold||deadline.didTimeout){_this.flush()}else{_this.timeoutId=_this.idleFlush(timeout-(Date.now()-startTime))}},{timeout:timeout})},addToQueue:function addToQueue(payload){this.queue.push(payload);if(this.queue.length>=this.maxQueueSize&&!this.paused){return this.flush()}if(!this.timeoutId){var self=this;if(useRequestIdleCallback&&!this.paused){this.timeoutId=this.idleFlush(this.queueTimeout)}else{this.timeoutId=setTimeout(function(){self.flush()},this.queueTimeout)}}},validateEvent:function validateEvent(eventInfoOrName,eventBody,callback){this.ajax(JSON.stringify([{eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)}]),function(requestObject){return callback(null,requestObject)},function(requestObject){return callback(requestObject)},this.globalTrackingUrl+"/validate")},sendEvent:function sendEvent(eventInfoOrName,eventBody){this.addToQueue({eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)})},getTimestamp:function getTimestamp(){return Math.round((new Date).getTime()/1e3)},populateEventInfo:function populateEventInfo(eventInfo){if(typeof eventInfo==="string"){eventInfo={eventName:eventInfo}}if(!eventInfo||(typeof eventInfo==="undefined"?"undefined":_typeof2(eventInfo))!=="object"){this.logError("Event info must be object");return{}}if(!eventInfo.appId){eventInfo.appId=this.globalTrackingAppId}return eventInfo},populateEventHeaders:function populateEventHeaders(eventBody){if(!eventBody||(typeof eventBody==="undefined"?"undefined":_typeof2(eventBody))!=="object"){this.logError("Event body must be object");return{}}return eventBody},logError:function logError(message){var console=window.console;if(console&&console.error){console.error(message)}},init:function init(){this.setTrackingUrl();this.setAppId();this.onBeforeUnload=this.onBeforeUnload.bind(this);if(isBrowser){window.addEventListener("beforeunload",this.onBeforeUnload)}},destroy:function destroy(){this.flush();if(isBrowser){window.removeEventListener("beforeunload",this.onBeforeUnload)}},onBeforeUnload:function onBeforeUnload(){this.flush()}};module.exports=webTrackingTransport})},function(module,exports,__webpack_require__){var getNative=__webpack_require__(106);var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max,nativeNow=getNative(Date,"now");var now=nativeNow||function(){return(new Date).getTime()};function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=!!options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?!!options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined}function complete(isCalled,id){if(id){clearTimeout(id)}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId)}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined}return result}debounced.cancel=cancel;return debounced}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}module.exports=debounce},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var VideojsUserActivityBehavior=function(_EventListener){_inherits(VideojsUserActivityBehavior,_EventListener);function VideojsUserActivityBehavior(videojsPlayer,videoPlayer,toolbar){var sliders=arguments.length<=3||arguments[3]===undefined?[]:arguments[3];_classCallCheck(this,VideojsUserActivityBehavior);_get(Object.getPrototypeOf(VideojsUserActivityBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.videoPlayer=videoPlayer;this.toolbar=toolbar;this.sliders=sliders}_createClass(VideojsUserActivityBehavior,[{key:"beforeInit",value:function beforeInit(){var _this=this;this.addEvents([this.videojsPlayer,"useractive",this.onUserActivity],[this.videojsPlayer,"userinactive",this.onUserActivity]);if(this.toolbar){this.addEvents([this.toolbar,"mouseOver",this.onUserActivity],[this.toolbar,"mouseOut",this.onUserActivity])}this.sliders.forEach(function(slider){if(slider){_this.addEvents([slider,"draggingStart",_this.onUserActivity],[slider,"draggingEnd",_this.onUserActivity],[slider,"mouseOver",_this.onUserActivity],[slider,"mouseOut",_this.onUserActivity])}})}},{key:"onUserActivity",value:function onUserActivity(){this.videoPlayer.idle=!(this.videojsPlayer.userActive()||this.toolbar&&this.toolbar.isMouseOver||this.sliders.some(function(slider){return slider&&slider.dragging}))}}]);return VideojsUserActivityBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsUserActivityBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersControlNames=__webpack_require__(182);var unmuteVolumeWhenZero=.5;var CONTROL_NAME_MUTE_TOGGLE=_helpersControlNames.CONTROL_NAME.TOOLBAR.MUTE_TOGGLE;var VideojsVolumeBehavior=function(_EventListener){_inherits(VideojsVolumeBehavior,_EventListener);function VideojsVolumeBehavior(videojsPlayer,controlTracker,volumeSwitch,volumeSlider,volumeOnButtonA11yControlText,volumeOffButtonA11yControlText){_classCallCheck(this,VideojsVolumeBehavior);_get(Object.getPrototypeOf(VideojsVolumeBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.controlTracker=controlTracker;this.volumeSwitch=volumeSwitch;this.volumeSlider=volumeSlider;this.volumeOnButtonA11yControlText=volumeOnButtonA11yControlText;this.volumeOffButtonA11yControlText=volumeOffButtonA11yControlText;if(this.volumeSwitch){this.a11yTextSpan=volumeSwitch.element.querySelector(".a11y-text")}}_createClass(VideojsVolumeBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"volumechange",this.onVideojsVolumeChange]);if(this.volumeSwitch){this.addEvents([this.volumeSwitch,"mute",this.onVolumeSwitchMute],[this.volumeSwitch,"unmute",this.onVolumeSwitchUnmute])}if(this.volumeSlider){this.addEvents([this.volumeSlider,"valueChanged",this.onSliderValueChanged])}this.updateSwitchAndSlider()}},{key:"updateSwitchAndSlider",value:function updateSwitchAndSlider(){var volume=undefined;if(this.videojsPlayer.muted()){volume=0;this._setA11yControlText(this.volumeOffButtonA11yControlText)}else{volume=this.videojsPlayer.volume();this._setA11yControlText(this.volumeOnButtonA11yControlText)}if(this.volumeSwitch){this.volumeSwitch.volume=volume}if(this.volumeSlider){this.volumeSlider.value=volume}}},{key:"onVideojsVolumeChange",value:function onVideojsVolumeChange(){this.updateSwitchAndSlider()}},{key:"onVolumeSwitchMute",value:function onVolumeSwitchMute(){this.controlTracker.controlName=CONTROL_NAME_MUTE_TOGGLE;this.videojsPlayer.muted(true)}},{key:"onVolumeSwitchUnmute",value:function onVolumeSwitchUnmute(){this.controlTracker.controlName=CONTROL_NAME_MUTE_TOGGLE;this.videojsPlayer.muted(false);if(this.videojsPlayer.volume()===0){this.videojsPlayer.volume(unmuteVolumeWhenZero)}}},{key:"onSliderValueChanged",value:function onSliderValueChanged(){var value=this.volumeSlider.value;this.videojsPlayer.muted(value===0);this.videojsPlayer.volume(value)}},{key:"_setA11yControlText",value:function _setA11yControlText(a11yControlText){if(this.a11yTextSpan){_linkedinJsecure2["default"].setElementContent(this.a11yTextSpan,a11yControlText)}}}]);return VideojsVolumeBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsVolumeBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var VideojsWaitingBehavior=function(_EventListener){_inherits(VideojsWaitingBehavior,_EventListener);function VideojsWaitingBehavior(videojsPlayer,loader){_classCallCheck(this,VideojsWaitingBehavior);_get(Object.getPrototypeOf(VideojsWaitingBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.loader=loader;this.currentTime=0}_createClass(VideojsWaitingBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"waiting",this.onVideojsWaiting],[this.videojsPlayer,"timeupdate",this.onVideojsTimeupdate]);this.loader.hide()}},{key:"onVideojsWaiting",value:function onVideojsWaiting(){this.loader.show();this.currentTime=this.videojsPlayer.currentTime()}},{key:"onVideojsTimeupdate",value:function onVideojsTimeupdate(){if(this.videojsPlayer.currentTime()!==this.currentTime){this.loader.hide();this.currentTime=this.videojsPlayer.currentTime()}}}]);return VideojsWaitingBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsWaitingBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];
var _classCallCheck=__webpack_require__(58)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _bind=__webpack_require__(112)["default"];var _Object$getOwnPropertyNames=__webpack_require__(211)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashAssign=__webpack_require__(215);var _lodashAssign2=_interopRequireDefault(_lodashAssign);var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _lodashIsfunction=__webpack_require__(114);var _lodashIsfunction2=_interopRequireDefault(_lodashIsfunction);var _lodashIsobject=__webpack_require__(115);var _lodashIsobject2=_interopRequireDefault(_lodashIsobject);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);__webpack_require__(330);var _helpersVideojsAdapter=__webpack_require__(406);var _helpersVideojsAdapter2=_interopRequireDefault(_helpersVideojsAdapter);var _helpersControlTracker=__webpack_require__(408);var _helpersControlTracker2=_interopRequireDefault(_helpersControlTracker);var _helpersA11yHelper=__webpack_require__(121);var _componentsBuffer=__webpack_require__(119);var _componentsBuffer2=_interopRequireDefault(_componentsBuffer);var _componentsButton=__webpack_require__(120);var _componentsButton2=_interopRequireDefault(_componentsButton);var _componentsEndcard=__webpack_require__(162);var _componentsEndcard2=_interopRequireDefault(_componentsEndcard);var _componentsHorizontalSlider=__webpack_require__(166);var _componentsHorizontalSlider2=_interopRequireDefault(_componentsHorizontalSlider);var _componentsLoader=__webpack_require__(169);var _componentsLoader2=_interopRequireDefault(_componentsLoader);var _componentsModal=__webpack_require__(170);var _componentsModal2=_interopRequireDefault(_componentsModal);var _componentsPlaybackRateLabel=__webpack_require__(409);var _componentsPlaybackRateLabel2=_interopRequireDefault(_componentsPlaybackRateLabel);var _componentsPlaybackRateMenu=__webpack_require__(410);var _componentsPlaybackRateMenu2=_interopRequireDefault(_componentsPlaybackRateMenu);var _componentsPlaybackRateOption=__webpack_require__(411);var _componentsPlaybackRateOption2=_interopRequireDefault(_componentsPlaybackRateOption);var _componentsRumTracking=__webpack_require__(176);var _componentsRumTracking2=_interopRequireDefault(_componentsRumTracking);var _componentsRumPlayerjs=__webpack_require__(412);var _componentsRumPlayerjs2=_interopRequireDefault(_componentsRumPlayerjs);var _componentsSelectable=__webpack_require__(179);var _componentsSelectable2=_interopRequireDefault(_componentsSelectable);var _componentsShareButton=__webpack_require__(180);var _componentsShareButton2=_interopRequireDefault(_componentsShareButton);var _componentsTimeDisplay=__webpack_require__(183);var _componentsTimeDisplay2=_interopRequireDefault(_componentsTimeDisplay);var _componentsToolbar=__webpack_require__(185);var _componentsToolbar2=_interopRequireDefault(_componentsToolbar);var _componentsVerticalSlider=__webpack_require__(187);var _componentsVerticalSlider2=_interopRequireDefault(_componentsVerticalSlider);var _componentsVideoPlayer=__webpack_require__(188);var _componentsVideoPlayer2=_interopRequireDefault(_componentsVideoPlayer);var _componentsVolumeSwitch=__webpack_require__(190);var _componentsVolumeSwitch2=_interopRequireDefault(_componentsVolumeSwitch);var _behaviorsEndcard=__webpack_require__(191);var _behaviorsEndcard2=_interopRequireDefault(_behaviorsEndcard);var _behaviorsFullscreen=__webpack_require__(192);var _behaviorsFullscreen2=_interopRequireDefault(_behaviorsFullscreen);var _behaviorsModalManager=__webpack_require__(193);var _behaviorsModalManager2=_interopRequireDefault(_behaviorsModalManager);var _behaviorsShareLink=__webpack_require__(196);var _behaviorsShareLink2=_interopRequireDefault(_behaviorsShareLink);var _behaviorsShareModal=__webpack_require__(197);var _behaviorsShareModal2=_interopRequireDefault(_behaviorsShareModal);var _behaviorsVideojsBuffer=__webpack_require__(198);var _behaviorsVideojsBuffer2=_interopRequireDefault(_behaviorsVideojsBuffer);var _behaviorsVideojsMetrics=__webpack_require__(199);var _behaviorsVideojsMetrics2=_interopRequireDefault(_behaviorsVideojsMetrics);var _behaviorsVideojsPlayback=__webpack_require__(201);var _behaviorsVideojsPlayback2=_interopRequireDefault(_behaviorsVideojsPlayback);var _behaviorsVideojsTime=__webpack_require__(202);var _behaviorsVideojsTime2=_interopRequireDefault(_behaviorsVideojsTime);var _behaviorsVideojsTracking=__webpack_require__(203);var _behaviorsVideojsTracking2=_interopRequireDefault(_behaviorsVideojsTracking);var _behaviorsVideojsUserActivity=__webpack_require__(207);var _behaviorsVideojsUserActivity2=_interopRequireDefault(_behaviorsVideojsUserActivity);var _behaviorsVideojsVolume=__webpack_require__(208);var _behaviorsVideojsVolume2=_interopRequireDefault(_behaviorsVideojsVolume);var _behaviorsVideojsPlaybackRate=__webpack_require__(414);var _behaviorsVideojsPlaybackRate2=_interopRequireDefault(_behaviorsVideojsPlaybackRate);var _behaviorsVideojsWaiting=__webpack_require__(209);var _behaviorsVideojsWaiting2=_interopRequireDefault(_behaviorsVideojsWaiting);var defaultVideojsOptions={controlBar:false,bigPlayButton:false,loadingSpinner:false,autoplay:false,techOrder:["html5"],html5:{hls:{withCredentials:false}}};exports.defaultVideojsOptions=defaultVideojsOptions;var VideoPlayer=function(){function VideoPlayer(videoPlayerElement,options){_classCallCheck(this,VideoPlayer);if(!videoPlayerElement){throw new TypeError("Missing video player element")}if(!options||!options.videojsElement){throw new TypeError("Missing videojs element")}this.videoPlayerElement=videoPlayerElement;this.playerStateManager=new _helpersA11yHelper.PlayerStateManager;this.options=(0,_lodashDefaultsdeep2["default"])({},options,{videojsOptions:defaultVideojsOptions,shareButtons:[],playerName:"LinkedIn Video Player"});this.controlTextOptions(this.options)}_createClass(VideoPlayer,[{key:"setup",value:function setup(){var options=this.options;var videoPlayer=this.createVideoPlayerComponent(this.videoPlayerElement,options.a11yControlTextObj,this.playerStateManager);var videojsPlayer=this.createVideojsPlayer(options.videojsElement,options.videojsOptions);var controlTracker=new _helpersControlTracker2["default"];var playerjsVideojsAdapter=this.createPlayerjs(videojsPlayer,controlTracker,options.playerjs);var sliderOptions={a11yControlText:options.a11yControlTextObj.progressSliderA11yControlText};(0,_lodashAssign2["default"])(this,{videoPlayer:videoPlayer,videojsPlayer:videojsPlayer,playerjsVideojsAdapter:playerjsVideojsAdapter,controlTracker:controlTracker});(0,_lodashAssign2["default"])(this,this.createBigPlayButton(options.bigPlayButtonElement,options.a11yControlTextObj));(0,_lodashAssign2["default"])(this,this.createLoader(videojsPlayer,options.loaderElement));(0,_lodashAssign2["default"])(this,this.createToolbar(videojsPlayer,videoPlayer,playerjsVideojsAdapter,controlTracker,options.toolbarElement,this.bigPlayButton,this.playerStateManager,options,options.a11yControlTextObj,options.a11yCustomControlTextPairs));(0,_lodashAssign2["default"])(this,this.createBuffer(videojsPlayer,options.bufferElement));(0,_lodashAssign2["default"])(this,this.createTime(videojsPlayer,options.timeDisplayElement,options.progressElement,this.playerStateManager,sliderOptions));(0,_lodashAssign2["default"])(this,this.createVolume(videojsPlayer,controlTracker,options.volumeSwitchElement,options.volumeSliderElement,options.volumeSliderVertical,this.playerStateManager,options.a11yControlTextObj));(0,_lodashAssign2["default"])(this,this.createPlaybackRate(videojsPlayer,controlTracker,options.playbackRateLabel,options.playbackRateMenu,options.playbackRateOptions,this.playerStateManager,options.playbackRate));(0,_lodashAssign2["default"])(this,this.createUserActivity(videojsPlayer,videoPlayer,this.toolbar,this.progress,this.volumeSlider));(0,_lodashAssign2["default"])(this,this.createShareModal.apply(this,[videojsPlayer,playerjsVideojsAdapter,controlTracker,this.toolbar,options.shareModalElement,options.shareLinkElement,this.playerStateManager,options.a11yControlTextObj].concat(_toConsumableArray(options.shareButtons))));(0,_lodashAssign2["default"])(this,this.createEndcard(videojsPlayer,playerjsVideojsAdapter,controlTracker,this.shareModal,options.endcardModalElement,options.endcardElement,this.playerStateManager,options.a11yControlTextObj));(0,_lodashAssign2["default"])(this,this.createModalManager(this.toolbar,this.endcardModal,this.shareModal));(0,_lodashAssign2["default"])(this,this.createTracking(videojsPlayer,videoPlayer,options.trackingSettings));(0,_lodashAssign2["default"])(this,this.createMetrics(videojsPlayer,options.rumOptions,options.metricsTracker));(0,_lodashAssign2["default"])(this,this.createPlayerJsMetrics(videojsPlayer,playerjsVideojsAdapter));if(options.playerjs){this.playerJsReady()}}},{key:"controlTextOptions",value:function controlTextOptions(options){options.a11yControlTextObj=options.a11yControlTextObj||{};if(options.disableA11y){this.playerStateManager.isDisableA11y=true}else{options.a11yControlTextObj=(0,_helpersA11yHelper.testControlTextObj)(options.a11yControlTextObj,"a11y")?options.a11yControlTextObj:(0,_helpersA11yHelper.getDefaultControlTextObj)("a11y")}if(options.languageControlTextObj&&(0,_helpersA11yHelper.testLanguageControlTextObj)(options.languageControlTextObj)){options.videojsOptions=(0,_lodashDefaultsdeep2["default"])(options.videojsOptions,options.languageControlTextObj)}else{options.videojsOptions=(0,_lodashDefaultsdeep2["default"])(options.videojsOptions,(0,_helpersA11yHelper.getDefaultLanguageControlTextObj)())}}},{key:"createVideoPlayerComponent",value:function createVideoPlayerComponent(videoPlayerElement,_x,playerStateManager){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var a11yControlText=_ref.videoPlayerContainerA11yAriaLabel;return _componentsVideoPlayer2["default"].create(videoPlayerElement,{a11yControlText:a11yControlText},playerStateManager)}},{key:"createVideojsPlayer",value:function createVideojsPlayer(videoElement){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(this.options.disableVideoContextMenu){videoElement.addEventListener("contextmenu",function(event){event.preventDefault()},false)}return(0,_videoJs2["default"])(videoElement,options)}},{key:"createPlayerjs",value:function createPlayerjs(videojsPlayer,controlTracker){return new _helpersVideojsAdapter2["default"](videojsPlayer,controlTracker)}},{key:"createBigPlayButton",value:function createBigPlayButton(buttonElement){var _ref2=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var a11yControlText=_ref2.bigPlayButtonA11yControlText;if(buttonElement){var bigPlayButton=_componentsButton2["default"].create(buttonElement,{a11yControlText:a11yControlText});return{bigPlayButton:bigPlayButton}}}},{key:"createLoader",value:function createLoader(videojsPlayer,loaderElement){if(loaderElement){var loader=_componentsLoader2["default"].create(loaderElement);var videojsWaitingBehavior=_behaviorsVideojsWaiting2["default"].create(videojsPlayer,loader);return{loader:loader,videojsWaitingBehavior:videojsWaitingBehavior}}}},{key:"createToolbar",value:function createToolbar(videojsPlayer,videoPlayer,videoAdapter,controlTracker,toolbarElement,bigPlayButton,playerStateManager,options,a11yControlTextObj,a11yCustomControlTextPairs){if(a11yControlTextObj===undefined)a11yControlTextObj={};if(toolbarElement){var toolbar=_componentsToolbar2["default"].create(toolbarElement,options,undefined,playerStateManager,videojsPlayer,a11yControlTextObj,a11yCustomControlTextPairs);var videojsPlaybackBehavior=_behaviorsVideojsPlayback2["default"].create(videojsPlayer,videoPlayer,controlTracker,toolbar,bigPlayButton,toolbarElement.ownerDocument,playerStateManager,a11yControlTextObj);var fullscreenBehavior=_behaviorsFullscreen2["default"].create(videoPlayer,videoAdapter,toolbar,playerStateManager);return{toolbar:toolbar,videojsPlaybackBehavior:videojsPlaybackBehavior,fullscreenBehavior:fullscreenBehavior}}}},{key:"createBuffer",value:function createBuffer(videojsPlayer,bufferElement){if(bufferElement){var buffer=_componentsBuffer2["default"].create(bufferElement);var videojsBufferBehavior=_behaviorsVideojsBuffer2["default"].create(videojsPlayer,buffer);return{buffer:buffer,videojsBufferBehavior:videojsBufferBehavior}}}},{key:"createTime",value:function createTime(videojsPlayer,timeDisplayElement,progressElement,playerStateManager){var sliderOptions=arguments.length<=4||arguments[4]===undefined?{}:arguments[4];var timeDisplay=undefined;if(timeDisplayElement){timeDisplay=_componentsTimeDisplay2["default"].create(timeDisplayElement)}var progress=undefined;if(progressElement){progress=_componentsHorizontalSlider2["default"].create(progressElement,playerStateManager,sliderOptions,_helpersA11yHelper.SLIDER_TYPE.PLAYBACK)}var videojsTimeBehavior=_behaviorsVideojsTime2["default"].create(videojsPlayer,timeDisplay,progress);return{progress:progress,timeDisplay:timeDisplay,videojsTimeBehavior:videojsTimeBehavior}}},{key:"createVolume",value:function createVolume(videojsPlayer,controlTracker,volumeSwitchElement,volumeSliderElement,volumeSliderVertical,playerStateManager){if(volumeSliderVertical===undefined)volumeSliderVertical=true;var _ref3=arguments.length<=6||arguments[6]===undefined?{}:arguments[6];var a11yControlText=_ref3.volumeSliderA11yControlText;var volumeOnButtonA11yControlText=_ref3.volumeOnButtonA11yControlText;var volumeOffButtonA11yControlText=_ref3.volumeOffButtonA11yControlText;var volumeSliderAriaValueTextA11yControlText=_ref3.volumeSliderAriaValueTextA11yControlText;var volumeSwitch=undefined;if(volumeSwitchElement){volumeSwitch=_componentsVolumeSwitch2["default"].create(volumeSwitchElement)}var volumeSlider=undefined;if(volumeSliderElement){var SliderComponent=volumeSliderVertical?_componentsVerticalSlider2["default"]:_componentsHorizontalSlider2["default"];volumeSlider=SliderComponent.create(volumeSliderElement,playerStateManager,{a11yControlText:a11yControlText,volumeSliderAriaValueTextA11yControlText:volumeSliderAriaValueTextA11yControlText},_helpersA11yHelper.SLIDER_TYPE.VOLUME)}var videojsVolumeBehavior=_behaviorsVideojsVolume2["default"].create(videojsPlayer,controlTracker,volumeSwitch,volumeSlider,volumeOnButtonA11yControlText,volumeOffButtonA11yControlText);return{volumeSwitch:volumeSwitch,volumeSlider:volumeSlider,videojsVolumeBehavior:videojsVolumeBehavior}}},{key:"createPlaybackRate",value:function createPlaybackRate(videojsPlayer,controlTracker,playbackRateLabelElement,playbackRateMenuElement,playbackRateOptionElements,playerStateManager){var _ref4=arguments.length<=6||arguments[6]===undefined?{}:arguments[6];var labelOptions=_ref4.label;var menuOptions=_ref4.menu;var optionOptions=_ref4.option;if(playbackRateLabelElement&&playbackRateMenuElement&&playbackRateOptionElements){var playbackRateLabel=_componentsPlaybackRateLabel2["default"].create(playbackRateLabelElement,labelOptions);var playbackRateMenu=_componentsPlaybackRateMenu2["default"].create(playbackRateMenuElement,playerStateManager,menuOptions);var playbackRateOptions=playbackRateOptionElements.map(function(rateOption){return _componentsPlaybackRateOption2["default"].create(rateOption,optionOptions)});var videojsPlaybackRateBehavior=_behaviorsVideojsPlaybackRate2["default"].create(videojsPlayer,controlTracker,playbackRateLabel,playbackRateMenu,playbackRateOptions,playerStateManager);return{playbackRateLabel:playbackRateLabel,playbackRateMenu:playbackRateMenu,playbackRateOptions:playbackRateOptions,videojsPlaybackRateBehavior:videojsPlaybackRateBehavior}}}},{key:"createUserActivity",value:function createUserActivity(videojsPlayer,videoPlayer,toolbar){for(var _len=arguments.length,sliders=Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){sliders[_key-3]=arguments[_key]}sliders=sliders.filter(function(o){return!!o});var userActivityBehavior=_behaviorsVideojsUserActivity2["default"].create(videojsPlayer,videoPlayer,toolbar,sliders);return{userActivityBehavior:userActivityBehavior}}},{key:"createShareModal",value:function createShareModal(videojsPlayer,videoAdapter,controlTracker,toolbar,shareModalElement,shareLinkElement,playerStateManager,a11yControlTextObj){if(shareModalElement){var shareModal=_componentsModal2["default"].create(shareModalElement,undefined,playerStateManager,a11yControlTextObj);var shareModalBehavior=_behaviorsShareModal2["default"].create(videojsPlayer,videoAdapter,controlTracker,toolbar,shareModal);for(var _len2=arguments.length,shareButtonDescriptors=Array(_len2>8?_len2-8:0),_key2=8;_key2<_len2;_key2++){shareButtonDescriptors[_key2-8]=arguments[_key2]}var shareButtons=shareButtonDescriptors.map(function(_ref5){var _ref52=_slicedToArray(_ref5,3);var element=_ref52[0];var network=_ref52[1];var url=_ref52[2];return _componentsShareButton2["default"].create(element,videoAdapter,{network:network,url:url},undefined,playerStateManager)});var shareLink=undefined;var shareLinkBehavior=undefined;if(shareLinkElement){shareLink=_componentsSelectable2["default"].create(shareLinkElement);shareLinkBehavior=_behaviorsShareLink2["default"].create(shareModal,shareLink)}return{shareModal:shareModal,shareModalBehavior:shareModalBehavior,shareButtons:shareButtons,shareLink:shareLink,shareLinkBehavior:shareLinkBehavior}}}},{key:"createEndcard",value:function createEndcard(videojsPlayer,videoAdapter,controlTracker,shareModal,endcardModalElement,endcardElement,playerStateManager,a11yControlTextObj){if(endcardModalElement&&endcardElement){var endcard=_componentsEndcard2["default"].create(endcardElement);var endcardModal=_componentsModal2["default"].create(endcardModalElement,undefined,playerStateManager,a11yControlTextObj);var endcardBehavior=_behaviorsEndcard2["default"].create(videojsPlayer,videoAdapter,controlTracker,endcard,endcardModal,shareModal);return{endcard:endcard,endcardModal:endcardModal,endcardBehavior:endcardBehavior}}}},{key:"createModalManager",value:function createModalManager(toolbar){for(var _len3=arguments.length,modals=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){modals[_key3-1]=arguments[_key3]}modals=modals.filter(function(o){return!!o});if(modals.length>0){var modalManagerBehavior=_behaviorsModalManager2["default"].create.apply(_behaviorsModalManager2["default"],[toolbar].concat(_toConsumableArray(modals)));return{modalManagerBehavior:modalManagerBehavior}}}},{key:"createTracking",value:function createTracking(videojsPlayer,videoPlayer,trackingSettings){if(trackingSettings){var videojsTrackingBehavior=_behaviorsVideojsTracking2["default"].create(videojsPlayer,videoPlayer,trackingSettings);return{videojsTrackingBehavior:videojsTrackingBehavior}}}},{key:"createMetrics",value:function createMetrics(videojsPlayer,rumOptions,tracker){if(tracker||rumOptions){if(rumOptions){rumOptions.videoUrn=rumOptions.videoUrn||videojsPlayer.src()}var metricsTracker=tracker||_componentsRumTracking2["default"].create(rumOptions);var videojsMetricsBehavior=_behaviorsVideojsMetrics2["default"].create(videojsPlayer,metricsTracker);return{metricsTracker:metricsTracker,videojsMetricsBehavior:videojsMetricsBehavior}}}},{key:"createPlayerJsMetrics",value:function createPlayerJsMetrics(videojsPlayer,videoAdapter,tracker){var playerJsMetricsTracker=tracker||_componentsRumPlayerjs2["default"].create(videoAdapter);var playerJsMetricsBehavior=_behaviorsVideojsMetrics2["default"].create(videojsPlayer,playerJsMetricsTracker);return{playerJsMetricsTracker:playerJsMetricsTracker,playerJsMetricsBehavior:playerJsMetricsBehavior}}},{key:"dispose",value:function dispose(){var _this=this;var immutableProperties=["videoPlayerElement","options"];var lastDisposedProperties=["videojsPlayer","videoPlayer"];_Object$getOwnPropertyNames(this).forEach(function(propertyName){if(immutableProperties.indexOf(propertyName)===-1&&lastDisposedProperties.indexOf(propertyName)===-1){_this.disposeOne(propertyName)}});lastDisposedProperties.forEach(this.disposeOne,this)}},{key:"disposeOne",value:function disposeOne(propertyName){if((0,_lodashIsobject2["default"])(this[propertyName])&&(0,_lodashIsfunction2["default"])(this[propertyName].dispose)){this[propertyName].dispose()}delete this[propertyName]}},{key:"registerPlayerJsEvent",value:function registerPlayerJsEvent(eventName){this.playerjsVideojsAdapter.registerEvent(eventName)}},{key:"emitPlayerJsEvent",value:function emitPlayerJsEvent(eventName,data){this.playerjsVideojsAdapter.emit(eventName,data)}},{key:"playerJsReady",value:function playerJsReady(){var _this2=this;this.videojsPlayer.ready(function(){return _this2.playerjsVideojsAdapter.ready()})}}],[{key:"create",value:function create(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}var player=new(_bind.apply(this,[null].concat(args)));player.setup();return player}}]);return VideoPlayer}();exports["default"]=VideoPlayer},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(212),__esModule:true}},function(module,exports,__webpack_require__){var $=__webpack_require__(16);__webpack_require__(213);module.exports=function getOwnPropertyNames(it){return $.getNames(it)}},function(module,exports,__webpack_require__){__webpack_require__(47)("getOwnPropertyNames",function(){return __webpack_require__(214).get})},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(45),getNames=__webpack_require__(16).getNames,toString={}.toString;var windowNames=(typeof window==="undefined"?"undefined":_typeof2(window))=="object"&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function getWindowNames(it){try{return getNames(it)}catch(e){return windowNames.slice()}};module.exports.get=function getOwnPropertyNames(it){if(windowNames&&toString.call(it)=="[object Window]")return getWindowNames(it);return getNames(toIObject(it))}},function(module,exports,__webpack_require__){var baseAssign=__webpack_require__(216),createAssigner=__webpack_require__(218),keys=__webpack_require__(105);function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});module.exports=assign},function(module,exports,__webpack_require__){var baseCopy=__webpack_require__(217),keys=__webpack_require__(105);function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object)}module.exports=baseAssign},function(module,exports){function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}module.exports=baseCopy},function(module,exports,__webpack_require__){var bindCallback=__webpack_require__(147),isIterateeCall=__webpack_require__(219),restParam=__webpack_require__(137);function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:undefined;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}module.exports=createAssigner},function(module,exports){var reIsUint=/^\d+$/;var MAX_SAFE_INTEGER=9007199254740991;function baseProperty(key){return function(object){return object==null?undefined:object[key]}}var getLength=baseProperty("length");function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index==="undefined"?"undefined":_typeof2(index);if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}module.exports=isIterateeCall},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;exports.__esModule=true;var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _setup=__webpack_require__(230);var setup=_interopRequireWildcard(_setup);var _stylesheet=__webpack_require__(232);var stylesheet=_interopRequireWildcard(_stylesheet);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _eventTarget=__webpack_require__(237);var _eventTarget2=_interopRequireDefault(_eventTarget);var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);var _player=__webpack_require__(238);var _player2=_interopRequireDefault(_player);var _plugins=__webpack_require__(326);var _plugins2=_interopRequireDefault(_plugins);var _mergeOptions2=__webpack_require__(236);var _mergeOptions3=_interopRequireDefault(_mergeOptions2);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _textTrack=__webpack_require__(248);var _textTrack2=_interopRequireDefault(_textTrack);var _audioTrack=__webpack_require__(327);var _audioTrack2=_interopRequireDefault(_audioTrack);var _videoTrack=__webpack_require__(328);var _videoTrack2=_interopRequireDefault(_videoTrack);var _timeRanges=__webpack_require__(239);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _url=__webpack_require__(252);var Url=_interopRequireWildcard(_url);var _obj=__webpack_require__(228);var _computedStyle=__webpack_require__(291);var _computedStyle2=_interopRequireDefault(_computedStyle);var _extend=__webpack_require__(329);var _extend2=_interopRequireDefault(_extend);var _xhr=__webpack_require__(253);var _xhr2=_interopRequireDefault(_xhr);var _tech=__webpack_require__(246);var _tech2=_interopRequireDefault(_tech);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}if(typeof HTMLVideoElement==="undefined"&&Dom.isReal()){_document2["default"].createElement("video");_document2["default"].createElement("audio");_document2["default"].createElement("track")}function videojs(id,options,ready){var tag=void 0;if(typeof id==="string"){if(id.indexOf("#")===0){id=id.slice(1)}if(videojs.getPlayers()[id]){if(options){_log2["default"].warn('Player "'+id+'" is already initialised. Options will not be applied.')}if(ready){videojs.getPlayers()[id].ready(ready)}return videojs.getPlayers()[id]}tag=Dom.getEl(id)}else{tag=id}if(!tag||!tag.nodeName){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(tag.player||_player2["default"].players[tag.playerId]){return tag.player||_player2["default"].players[tag.playerId]}options=options||{};videojs.hooks("beforesetup").forEach(function(hookFunction){var opts=hookFunction(tag,(0,_mergeOptions3["default"])(options));if(!(0,_obj.isObject)(opts)||Array.isArray(opts)){_log2["default"].error("please return an object in beforesetup hooks");return}options=(0,_mergeOptions3["default"])(options,opts)});var PlayerComponent=_component2["default"].getComponent("Player");var player=new PlayerComponent(tag,options,ready);videojs.hooks("setup").forEach(function(hookFunction){return hookFunction(player)});return player}videojs.hooks_={};videojs.hooks=function(type,fn){videojs.hooks_[type]=videojs.hooks_[type]||[];if(fn){videojs.hooks_[type]=videojs.hooks_[type].concat(fn)}return videojs.hooks_[type]};videojs.hook=function(type,fn){videojs.hooks(type,fn)};videojs.removeHook=function(type,fn){var index=videojs.hooks(type).indexOf(fn);if(index<=-1){return false}videojs.hooks_[type]=videojs.hooks_[type].slice();videojs.hooks_[type].splice(index,1);return true};if(_window2["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true&&Dom.isReal()){var style=Dom.$(".vjs-styles-defaults");if(!style){style=stylesheet.createStyleElement("vjs-styles-defaults");var head=Dom.$("head");if(head){head.insertBefore(style,head.firstChild)}stylesheet.setTextContent(style,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}setup.autoSetupTimeout(1,videojs);videojs.VERSION="5.20.4";videojs.options=_player2["default"].prototype.options_;videojs.getPlayers=function(){return _player2["default"].players};videojs.players=_player2["default"].players;videojs.getComponent=_component2["default"].getComponent;videojs.registerComponent=function(name,comp){if(_tech2["default"].isTech(comp)){_log2["default"].warn("The "+name+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}_component2["default"].registerComponent.call(_component2["default"],name,comp)};videojs.getTech=_tech2["default"].getTech;videojs.registerTech=_tech2["default"].registerTech;videojs.browser=browser;videojs.TOUCH_ENABLED=browser.TOUCH_ENABLED;videojs.extend=_extend2["default"];videojs.mergeOptions=_mergeOptions3["default"];videojs.bind=Fn.bind;videojs.plugin=_plugins2["default"];videojs.addLanguage=function(code,data){var _mergeOptions;code=(""+code).toLowerCase();videojs.options.languages=(0,_mergeOptions3["default"])(videojs.options.languages,(_mergeOptions={},_mergeOptions[code]=data,_mergeOptions));return videojs.options.languages[code]};videojs.log=_log2["default"];videojs.createTimeRange=videojs.createTimeRanges=_timeRanges.createTimeRanges;videojs.formatTime=_formatTime2["default"];videojs.parseUrl=Url.parseUrl;videojs.isCrossOrigin=Url.isCrossOrigin;videojs.EventTarget=_eventTarget2["default"];videojs.on=Events.on;videojs.one=Events.one;videojs.off=Events.off;videojs.trigger=Events.trigger;videojs.xhr=_xhr2["default"];videojs.TextTrack=_textTrack2["default"];videojs.AudioTrack=_audioTrack2["default"];videojs.VideoTrack=_videoTrack2["default"];videojs.isEl=Dom.isEl;videojs.isTextNode=Dom.isTextNode;videojs.createEl=Dom.createEl;videojs.hasClass=Dom.hasElClass;videojs.addClass=Dom.addElClass;videojs.removeClass=Dom.removeElClass;videojs.toggleClass=Dom.toggleElClass;videojs.setAttributes=Dom.setElAttributes;videojs.getAttributes=Dom.getElAttributes;videojs.emptyEl=Dom.emptyEl;videojs.appendContent=Dom.appendContent;videojs.insertContent=Dom.insertContent;videojs.computedStyle=_computedStyle2["default"];
{!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return videojs}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}exports["default"]=videojs},function(module,exports){(function(global){if(typeof window!=="undefined"){module.exports=window}else if(typeof global!=="undefined"){module.exports=global}else if(typeof self!=="undefined"){module.exports=self}else{module.exports={}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){var topLevel=typeof global!=="undefined"?global:typeof window!=="undefined"?window:{};var minDoc=__webpack_require__(223);if(typeof document!=="undefined"){module.exports=document}else{var doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];if(!doccy){doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc}module.exports=doccy}}).call(exports,function(){return this}())},function(module,exports){},function(module,exports,__webpack_require__){exports.__esModule=true;exports.BACKGROUND_SIZE_SUPPORTED=exports.TOUCH_ENABLED=exports.IS_ANY_SAFARI=exports.IS_SAFARI=exports.IE_VERSION=exports.IS_IE8=exports.CHROME_VERSION=exports.IS_CHROME=exports.IS_EDGE=exports.IS_FIREFOX=exports.IS_NATIVE_ANDROID=exports.IS_OLD_ANDROID=exports.ANDROID_VERSION=exports.IS_ANDROID=exports.IOS_VERSION=exports.IS_IOS=exports.IS_IPOD=exports.IS_IPHONE=exports.IS_IPAD=undefined;var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var USER_AGENT=_window2["default"].navigator&&_window2["default"].navigator.userAgent||"";var webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT);var appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null;var IS_IPAD=exports.IS_IPAD=/iPad/i.test(USER_AGENT);var IS_IPHONE=exports.IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;var IS_IPOD=exports.IS_IPOD=/iPod/i.test(USER_AGENT);var IS_IOS=exports.IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;var IOS_VERSION=exports.IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1]}return null}();var IS_ANDROID=exports.IS_ANDROID=/Android/i.test(USER_AGENT);var ANDROID_VERSION=exports.ANDROID_VERSION=function(){var match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!match){return null}var major=match[1]&&parseFloat(match[1]);var minor=match[2]&&parseFloat(match[2]);if(major&&minor){return parseFloat(match[1]+"."+match[2])}else if(major){return major}return null}();var IS_OLD_ANDROID=exports.IS_OLD_ANDROID=IS_ANDROID&&/webkit/i.test(USER_AGENT)&&ANDROID_VERSION<2.3;var IS_NATIVE_ANDROID=exports.IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;var IS_FIREFOX=exports.IS_FIREFOX=/Firefox/i.test(USER_AGENT);var IS_EDGE=exports.IS_EDGE=/Edge/i.test(USER_AGENT);var IS_CHROME=exports.IS_CHROME=!IS_EDGE&&/Chrome/i.test(USER_AGENT);var CHROME_VERSION=exports.CHROME_VERSION=function(){var match=USER_AGENT.match(/Chrome\/(\d+)/);if(match&&match[1]){return parseFloat(match[1])}return null}();var IS_IE8=exports.IS_IE8=/MSIE\s8\.0/.test(USER_AGENT);var IE_VERSION=exports.IE_VERSION=function(){var result=/MSIE\s(\d+)\.\d/.exec(USER_AGENT);var version=result&&parseFloat(result[1]);if(!version&&/Trident\/7.0/i.test(USER_AGENT)&&/rv:11.0/.test(USER_AGENT)){version=11}return version}();var IS_SAFARI=exports.IS_SAFARI=/Safari/i.test(USER_AGENT)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE;var IS_ANY_SAFARI=exports.IS_ANY_SAFARI=IS_SAFARI||IS_IOS;var TOUCH_ENABLED=exports.TOUCH_ENABLED=Dom.isReal()&&("ontouchstart"in _window2["default"]||_window2["default"].DocumentTouch&&_window2["default"].document instanceof _window2["default"].DocumentTouch);var BACKGROUND_SIZE_SUPPORTED=exports.BACKGROUND_SIZE_SUPPORTED=Dom.isReal()&&"backgroundSize"in _window2["default"].document.createElement("video").style},function(module,exports,__webpack_require__){exports.__esModule=true;exports.$$=exports.$=undefined;var _templateObject=_taggedTemplateLiteralLoose(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);exports.isReal=isReal;exports.isEl=isEl;exports.getEl=getEl;exports.createEl=createEl;exports.textContent=textContent;exports.insertElFirst=insertElFirst;exports.getElData=getElData;exports.hasElData=hasElData;exports.removeElData=removeElData;exports.hasElClass=hasElClass;exports.addElClass=addElClass;exports.removeElClass=removeElClass;exports.toggleElClass=toggleElClass;exports.setElAttributes=setElAttributes;exports.getElAttributes=getElAttributes;exports.getAttribute=getAttribute;exports.setAttribute=setAttribute;exports.removeAttribute=removeAttribute;exports.blockTextSelection=blockTextSelection;exports.unblockTextSelection=unblockTextSelection;exports.findElPosition=findElPosition;exports.getPointerPosition=getPointerPosition;exports.isTextNode=isTextNode;exports.emptyEl=emptyEl;exports.normalizeContent=normalizeContent;exports.appendContent=appendContent;exports.insertContent=insertContent;var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _guid=__webpack_require__(226);var Guid=_interopRequireWildcard(_guid);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _tsml=__webpack_require__(229);var _tsml2=_interopRequireDefault(_tsml);var _obj=__webpack_require__(228);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _taggedTemplateLiteralLoose(strings,raw){strings.raw=raw;return strings}function isNonBlankString(str){return typeof str==="string"&&/\S/.test(str)}function throwIfWhitespace(str){if(/\s/.test(str)){throw new Error("class has illegal whitespace characters")}}function classRegExp(className){return new RegExp("(^|\\s)"+className+"($|\\s)")}function isReal(){return _document2["default"]===_window2["default"].document&&typeof _document2["default"].createElement!=="undefined"}function isEl(value){return(0,_obj.isObject)(value)&&value.nodeType===1}function createQuerier(method){return function(selector,context){if(!isNonBlankString(selector)){return _document2["default"][method](null)}if(isNonBlankString(context)){context=_document2["default"].querySelector(context)}var ctx=isEl(context)?context:_document2["default"];return ctx[method]&&ctx[method](selector)}}function getEl(id){if(id.indexOf("#")===0){id=id.slice(1)}return _document2["default"].getElementById(id)}function createEl(){var tagName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div";var properties=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var content=arguments[3];var el=_document2["default"].createElement(tagName);Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];if(propName.indexOf("aria-")!==-1||propName==="role"||propName==="type"){_log2["default"].warn((0,_tsml2["default"])(_templateObject,propName,val));el.setAttribute(propName,val)}else if(propName==="textContent"){textContent(el,val)}else{el[propName]=val}});Object.getOwnPropertyNames(attributes).forEach(function(attrName){el.setAttribute(attrName,attributes[attrName])});if(content){appendContent(el,content)}return el}function textContent(el,text){if(typeof el.textContent==="undefined"){el.innerText=text}else{el.textContent=text}return el}function insertElFirst(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild)}else{parent.appendChild(child)}}var elData={};var elIdAttr="vdata"+(new Date).getTime();function getElData(el){var id=el[elIdAttr];if(!id){id=el[elIdAttr]=Guid.newGUID()}if(!elData[id]){elData[id]={}}return elData[id]}function hasElData(el){var id=el[elIdAttr];if(!id){return false}return!!Object.getOwnPropertyNames(elData[id]).length}function removeElData(el){var id=el[elIdAttr];if(!id){return}delete elData[id];try{delete el[elIdAttr]}catch(e){if(el.removeAttribute){el.removeAttribute(elIdAttr)}else{el[elIdAttr]=null}}}function hasElClass(element,classToCheck){throwIfWhitespace(classToCheck);if(element.classList){return element.classList.contains(classToCheck)}return classRegExp(classToCheck).test(element.className)}function addElClass(element,classToAdd){if(element.classList){element.classList.add(classToAdd)}else if(!hasElClass(element,classToAdd)){element.className=(element.className+" "+classToAdd).trim()}return element}function removeElClass(element,classToRemove){if(element.classList){element.classList.remove(classToRemove)}else{throwIfWhitespace(classToRemove);element.className=element.className.split(/\s+/).filter(function(c){return c!==classToRemove}).join(" ")}return element}function toggleElClass(element,classToToggle,predicate){var has=hasElClass(element,classToToggle);if(typeof predicate==="function"){predicate=predicate(element,classToToggle)}if(typeof predicate!=="boolean"){predicate=!has}if(predicate===has){return}if(predicate){addElClass(element,classToToggle)}else{removeElClass(element,classToToggle)}return element}function setElAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];if(attrValue===null||typeof attrValue==="undefined"||attrValue===false){el.removeAttribute(attrName)}else{el.setAttribute(attrName,attrValue===true?"":attrValue)}})}function getElAttributes(tag){var obj={};var knownBooleans=","+"autoplay,controls,playsinline,loop,muted,default,defaultMuted"+",";if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;var attrVal=attrs[i].value;if(typeof tag[attrName]==="boolean"||knownBooleans.indexOf(","+attrName+",")!==-1){attrVal=attrVal!==null?true:false}obj[attrName]=attrVal}}return obj}function getAttribute(el,attribute){return el.getAttribute(attribute)}function setAttribute(el,attribute,value){el.setAttribute(attribute,value)}function removeAttribute(el,attribute){el.removeAttribute(attribute)}function blockTextSelection(){_document2["default"].body.focus();_document2["default"].onselectstart=function(){return false}}function unblockTextSelection(){_document2["default"].onselectstart=function(){return true}}function findElPosition(el){var box=void 0;if(el.getBoundingClientRect&&el.parentNode){box=el.getBoundingClientRect()}if(!box){return{left:0,top:0}}var docEl=_document2["default"].documentElement;var body=_document2["default"].body;var clientLeft=docEl.clientLeft||body.clientLeft||0;var scrollLeft=_window2["default"].pageXOffset||body.scrollLeft;var left=box.left+scrollLeft-clientLeft;var clientTop=docEl.clientTop||body.clientTop||0;var scrollTop=_window2["default"].pageYOffset||body.scrollTop;var top=box.top+scrollTop-clientTop;return{left:Math.round(left),top:Math.round(top)}}function getPointerPosition(el,event){var position={};var box=findElPosition(el);var boxW=el.offsetWidth;var boxH=el.offsetHeight;var boxY=box.top;var boxX=box.left;var pageY=event.pageY;var pageX=event.pageX;if(event.changedTouches){pageX=event.changedTouches[0].pageX;pageY=event.changedTouches[0].pageY}position.y=Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH));position.x=Math.max(0,Math.min(1,(pageX-boxX)/boxW));return position}function isTextNode(value){return(0,_obj.isObject)(value)&&value.nodeType===3}function emptyEl(el){while(el.firstChild){el.removeChild(el.firstChild)}return el}function normalizeContent(content){if(typeof content==="function"){content=content()}return(Array.isArray(content)?content:[content]).map(function(value){if(typeof value==="function"){value=value()}if(isEl(value)||isTextNode(value)){return value}if(typeof value==="string"&&/\S/.test(value)){return _document2["default"].createTextNode(value)}}).filter(function(value){return value})}function appendContent(el,content){normalizeContent(content).forEach(function(node){return el.appendChild(node)});return el}function insertContent(el,content){return appendContent(emptyEl(el),content)}var $=exports.$=createQuerier("querySelector");var $$=exports.$$=createQuerier("querySelectorAll")},function(module,exports){exports.__esModule=true;exports.newGUID=newGUID;var _guid=1;function newGUID(){return _guid++}},function(module,exports,__webpack_require__){exports.__esModule=true;exports.logByType=undefined;var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _browser=__webpack_require__(224);var _obj=__webpack_require__(228);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var log=void 0;var logByType=exports.logByType=function logByType(type,args){var stringify=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!!_browser.IE_VERSION&&_browser.IE_VERSION<11;if(type!=="log"){args.unshift(type.toUpperCase()+":")}log.history.push(args);args.unshift("VIDEOJS:");var fn=_window2["default"].console&&_window2["default"].console[type];if(!fn){return}if(stringify){args=args.map(function(a){if((0,_obj.isObject)(a)||Array.isArray(a)){try{return JSON.stringify(a)}catch(x){return String(a)}}return String(a)}).join(" ")}if(!fn.apply){fn(args)}else{fn[Array.isArray(args)?"apply":"call"](_window2["default"].console,args)}};log=function log(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}logByType("log",args)};log.history=[];log.error=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return logByType("error",args)};log.warn=function(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}return logByType("warn",args)};exports["default"]=log},function(module,exports){exports.__esModule=true;var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj)};exports.each=each;exports.reduce=reduce;exports.assign=assign;exports.isObject=isObject;exports.isPlain=isPlain;var toString=Object.prototype.toString;var keys=function keys(object){return isObject(object)?Object.keys(object):[]};function each(object,fn){keys(object).forEach(function(key){return fn(object[key],key)})}function reduce(object,fn){var initial=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return keys(object).reduce(function(accum,key){return fn(accum,object[key],key)},initial)}function assign(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}if(Object.assign){return Object.assign.apply(Object,[target].concat(sources))}sources.forEach(function(source){if(!source){return}each(source,function(value,key){target[key]=value})});return target}function isObject(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof(value))==="object"}function isPlain(value){return isObject(value)&&toString.call(value)==="[object Object]"&&value.constructor===Object}},function(module,exports){function clean(s){return s.replace(/\n\r?\s*/g,"")}module.exports=function tsml(sa){var s="",i=0;for(;i<arguments.length;i++){s+=clean(sa[i])+(arguments[i+1]||"")}return s}},function(module,exports,__webpack_require__){exports.__esModule=true;exports.hasLoaded=exports.autoSetupTimeout=exports.autoSetup=undefined;var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _windowLoaded=false;var videojs=void 0;var autoSetup=function autoSetup(){if(!Dom.isReal()){return}var vids=_document2["default"].getElementsByTagName("video");var audios=_document2["default"].getElementsByTagName("audio");var mediaEls=[];if(vids&&vids.length>0){for(var i=0,e=vids.length;i<e;i++){mediaEls.push(vids[i])}}if(audios&&audios.length>0){for(var _i=0,_e=audios.length;_i<_e;_i++){mediaEls.push(audios[_i])}}if(mediaEls&&mediaEls.length>0){for(var _i2=0,_e2=mediaEls.length;_i2<_e2;_i2++){var mediaEl=mediaEls[_i2];if(mediaEl&&mediaEl.getAttribute){if(mediaEl.player===undefined){var options=mediaEl.getAttribute("data-setup");if(options!==null){videojs(mediaEl)}}}else{autoSetupTimeout(1);break}}}else if(!_windowLoaded){autoSetupTimeout(1)}};function autoSetupTimeout(wait,vjs){if(vjs){videojs=vjs}_window2["default"].setTimeout(autoSetup,wait)}if(Dom.isReal()&&_document2["default"].readyState==="complete"){_windowLoaded=true}else{Events.one(_window2["default"],"load",function(){_windowLoaded=true})}var hasLoaded=function hasLoaded(){return _windowLoaded};exports.autoSetup=autoSetup;exports.autoSetupTimeout=autoSetupTimeout;exports.hasLoaded=hasLoaded},function(module,exports,__webpack_require__){exports.__esModule=true;exports.fixEvent=fixEvent;exports.on=on;exports.off=off;exports.trigger=trigger;exports.one=one;var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _guid=__webpack_require__(226);var Guid=_interopRequireWildcard(_guid);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _cleanUpEvents(elem,type){var data=Dom.getElData(elem);if(data.handlers[type].length===0){delete data.handlers[type];if(elem.removeEventListener){elem.removeEventListener(type,data.dispatcher,false)}else if(elem.detachEvent){elem.detachEvent("on"+type,data.dispatcher)}}if(Object.getOwnPropertyNames(data.handlers).length<=0){delete data.handlers;delete data.dispatcher;delete data.disabled}if(Object.getOwnPropertyNames(data).length===0){Dom.removeElData(elem)}}function _handleMultipleEvents(fn,elem,types,callback){types.forEach(function(type){fn(elem,type,callback)})}function fixEvent(event){function returnTrue(){return true}function returnFalse(){return false}if(!event||!event.isPropagationStopped){var old=event||_window2["default"].event;event={};for(var key in old){if(key!=="layerX"&&key!=="layerY"&&key!=="keyLocation"&&key!=="webkitMovementX"&&key!=="webkitMovementY"){if(!(key==="returnValue"&&old.preventDefault)){event[key]=old[key]}}}if(!event.target){event.target=event.srcElement||_document2["default"]}if(!event.relatedTarget){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement}event.preventDefault=function(){if(old.preventDefault){old.preventDefault()}event.returnValue=false;old.returnValue=false;event.defaultPrevented=true};event.defaultPrevented=false;event.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation()}event.cancelBubble=true;old.cancelBubble=true;event.isPropagationStopped=returnTrue};event.isPropagationStopped=returnFalse;event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation()}event.isImmediatePropagationStopped=returnTrue;event.stopPropagation()};event.isImmediatePropagationStopped=returnFalse;if(event.clientX!==null&&event.clientX!==undefined){var doc=_document2["default"].documentElement;var body=_document2["default"].body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}event.which=event.charCode||event.keyCode;if(event.button!==null&&event.button!==undefined){event.button=event.button&1?0:event.button&4?1:event.button&2?2:0}}return event}var _supportsPassive=false;(function(){try{var opts=Object.defineProperty({},"passive",{get:function get(){_supportsPassive=true}});_window2["default"].addEventListener("test",null,opts)}catch(e){}})();var passiveEvents=["touchstart","touchmove"];function on(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(on,elem,type,fn)}var data=Dom.getElData(elem);if(!data.handlers){data.handlers={}}if(!data.handlers[type]){data.handlers[type]=[]}if(!fn.guid){fn.guid=Guid.newGUID()}data.handlers[type].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event,hash){if(data.disabled){return}event=fixEvent(event);var handlers=data.handlers[event.type];if(handlers){var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++){if(event.isImmediatePropagationStopped()){break}else{try{handlersCopy[m].call(elem,event,hash)}catch(e){_log2["default"].error(e)}}}}}}if(data.handlers[type].length===1){if(elem.addEventListener){var options=false;if(_supportsPassive&&passiveEvents.indexOf(type)>-1){options={passive:true}}elem.addEventListener(type,data.dispatcher,options)}else if(elem.attachEvent){elem.attachEvent("on"+type,data.dispatcher)}}}function off(elem,type,fn){if(!Dom.hasElData(elem)){return}var data=Dom.getElData(elem);if(!data.handlers){return}if(Array.isArray(type)){return _handleMultipleEvents(off,elem,type,fn)}var removeType=function removeType(t){data.handlers[t]=[];_cleanUpEvents(elem,t)};if(!type){for(var t in data.handlers){removeType(t)}return}var handlers=data.handlers[type];if(!handlers){return}if(!fn){removeType(type);return}if(fn.guid){for(var n=0;n<handlers.length;n++){if(handlers[n].guid===fn.guid){handlers.splice(n--,1)}}}_cleanUpEvents(elem,type)}function trigger(elem,event,hash){var elemData=Dom.hasElData(elem)?Dom.getElData(elem):{};var parent=elem.parentNode||elem.ownerDocument;if(typeof event==="string"){event={type:event,target:elem}}event=fixEvent(event);if(elemData.dispatcher){elemData.dispatcher.call(elem,event,hash)}if(parent&&!event.isPropagationStopped()&&event.bubbles===true){trigger.call(null,parent,event,hash)}else if(!parent&&!event.defaultPrevented){var targetData=Dom.getElData(event.target);if(event.target[event.type]){targetData.disabled=true;if(typeof event.target[event.type]==="function"){event.target[event.type]()}targetData.disabled=false}}return!event.defaultPrevented}function one(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(one,elem,type,fn)}var func=function func(){off(elem,type,func);fn.apply(this,arguments)};func.guid=fn.guid=fn.guid||Guid.newGUID();on(elem,type,func)}},function(module,exports,__webpack_require__){exports.__esModule=true;exports.setTextContent=exports.createStyleElement=undefined;var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var createStyleElement=exports.createStyleElement=function createStyleElement(className){var style=_document2["default"].createElement("style");style.className=className;return style};var setTextContent=exports.setTextContent=function setTextContent(el,content){if(el.styleSheet){el.styleSheet.cssText=content}else{el.textContent=content}}},function(module,exports,__webpack_require__){exports.__esModule=true;var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _guid=__webpack_require__(226);var Guid=_interopRequireWildcard(_guid);var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _toTitleCase=__webpack_require__(235);var _toTitleCase2=_interopRequireDefault(_toTitleCase);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Component=function(){function Component(player,options,ready){_classCallCheck(this,Component);if(!player&&this.play){this.player_=player=this}else{this.player_=player}this.options_=(0,_mergeOptions2["default"])({},this.options_);options=this.options_=(0,_mergeOptions2["default"])(this.options_,options);this.id_=options.id||options.el&&options.el.id;if(!this.id_){var id=player&&player.id&&player.id()||"no_player";this.id_=id+"_component_"+Guid.newGUID()}this.name_=options.name||null;if(options.el){this.el_=options.el}else if(options.createEl!==false){this.el_=this.createEl()}this.children_=[];this.childIndex_={};this.childNameIndex_={};if(options.initChildren!==false){this.initChildren()}this.ready(ready);if(options.reportTouchActivity!==false){this.enableTouchActivity()}}Component.prototype.dispose=function dispose(){this.trigger({type:"dispose",bubbles:false});if(this.children_){for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i].dispose){this.children_[i].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.off();if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}Dom.removeElData(this.el_);this.el_=null};Component.prototype.player=function player(){return this.player_};Component.prototype.options=function options(obj){_log2["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0");if(!obj){return this.options_}this.options_=(0,_mergeOptions2["default"])(this.options_,obj);return this.options_};Component.prototype.el=function el(){return this.el_};Component.prototype.createEl=function createEl(tagName,properties,attributes){return Dom.createEl(tagName,properties,attributes)};Component.prototype.localize=function localize(string){var code=this.player_.language&&this.player_.language();var languages=this.player_.languages&&this.player_.languages();if(!code||!languages){return string}var language=languages[code];if(language&&language[string]){return language[string]}var primaryCode=code.split("-")[0];var primaryLang=languages[primaryCode];if(primaryLang&&primaryLang[string]){return primaryLang[string]}return string};Component.prototype.contentEl=function contentEl(){return this.contentEl_||this.el_};Component.prototype.id=function id(){return this.id_};Component.prototype.name=function name(){return this.name_};Component.prototype.children=function children(){return this.children_};Component.prototype.getChildById=function getChildById(id){return this.childIndex_[id]};Component.prototype.getChild=function getChild(name){if(!name){return}name=(0,_toTitleCase2["default"])(name);return this.childNameIndex_[name]};Component.prototype.addChild=function addChild(child){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.children_.length;var component=void 0;var componentName=void 0;if(typeof child==="string"){componentName=(0,_toTitleCase2["default"])(child);if(!options){options={}}if(options===true){_log2["default"].warn("Initializing a child component with `true` is deprecated."+"Children should be defined in an array when possible, "+"but if necessary use an object instead of `true`.");options={}}var componentClassName=options.componentClass||componentName;options.name=componentName;var ComponentClass=Component.getComponent(componentClassName);if(!ComponentClass){throw new Error("Component "+componentClassName+" does not exist")}if(typeof ComponentClass!=="function"){return null}component=new ComponentClass(this.player_||this,options)}else{component=child}this.children_.splice(index,0,component);if(typeof component.id==="function"){this.childIndex_[component.id()]=component}componentName=componentName||component.name&&(0,_toTitleCase2["default"])(component.name());if(componentName){this.childNameIndex_[componentName]=component}if(typeof component.el==="function"&&component.el()){var childNodes=this.contentEl().children;var refNode=childNodes[index]||null;this.contentEl().insertBefore(component.el(),refNode)}return component};Component.prototype.removeChild=function removeChild(component){if(typeof component==="string"){component=this.getChild(component)}if(!component||!this.children_){return}var childFound=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break}}if(!childFound){return}this.childIndex_[component.id()]=null;this.childNameIndex_[component.name()]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el())}};Component.prototype.initChildren=function initChildren(){var _this=this;var children=this.options_.children;if(children){var parentOptions=this.options_;var handleAdd=function handleAdd(child){var name=child.name;var opts=child.opts;if(parentOptions[name]!==undefined){opts=parentOptions[name]}if(opts===false){return}if(opts===true){opts={}}opts.playerOptions=_this.options_.playerOptions;var newChild=_this.addChild(name,opts);if(newChild){_this[name]=newChild}};var workingChildren=void 0;var Tech=Component.getComponent("Tech");if(Array.isArray(children)){workingChildren=children}else{workingChildren=Object.keys(children)}workingChildren.concat(Object.keys(this.options_).filter(function(child){return!workingChildren.some(function(wchild){if(typeof wchild==="string"){return child===wchild}return child===wchild.name})})).map(function(child){var name=void 0;var opts=void 0;if(typeof child==="string"){name=child;opts=children[name]||_this.options_[name]||{}}else{name=child.name;opts=child}return{name:name,opts:opts}}).filter(function(child){var c=Component.getComponent(child.opts.componentClass||(0,_toTitleCase2["default"])(child.name));return c&&!Tech.isTech(c)}).forEach(handleAdd)}};Component.prototype.buildCSSClass=function buildCSSClass(){return""};Component.prototype.on=function on(first,second,third){var _this2=this;if(typeof first==="string"||Array.isArray(first)){Events.on(this.el_,first,Fn.bind(this,second));
}else{var target=first;var type=second;var fn=Fn.bind(this,third);var removeOnDispose=function removeOnDispose(){return _this2.off(target,type,fn)};removeOnDispose.guid=fn.guid;this.on("dispose",removeOnDispose);var cleanRemover=function cleanRemover(){return _this2.off("dispose",removeOnDispose)};cleanRemover.guid=fn.guid;if(first.nodeName){Events.on(target,type,fn);Events.on(target,"dispose",cleanRemover)}else if(typeof first.on==="function"){target.on(type,fn);target.on("dispose",cleanRemover)}}return this};Component.prototype.off=function off(first,second,third){if(!first||typeof first==="string"||Array.isArray(first)){Events.off(this.el_,first,second)}else{var target=first;var type=second;var fn=Fn.bind(this,third);this.off("dispose",fn);if(first.nodeName){Events.off(target,type,fn);Events.off(target,"dispose",fn)}else{target.off(type,fn);target.off("dispose",fn)}}return this};Component.prototype.one=function one(first,second,third){var _this3=this,_arguments=arguments;if(typeof first==="string"||Array.isArray(first)){Events.one(this.el_,first,Fn.bind(this,second))}else{var target=first;var type=second;var fn=Fn.bind(this,third);var newFunc=function newFunc(){_this3.off(target,type,newFunc);fn.apply(null,_arguments)};newFunc.guid=fn.guid;this.on(target,type,newFunc)}return this};Component.prototype.trigger=function trigger(event,hash){Events.trigger(this.el_,event,hash);return this};Component.prototype.ready=function ready(fn){var sync=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(fn){if(this.isReady_){if(sync){fn.call(this)}else{this.setTimeout(fn,1)}}else{this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(fn)}}return this};Component.prototype.triggerReady=function triggerReady(){this.isReady_=true;this.setTimeout(function(){var readyQueue=this.readyQueue_;this.readyQueue_=[];if(readyQueue&&readyQueue.length>0){readyQueue.forEach(function(fn){fn.call(this)},this)}this.trigger("ready")},1)};Component.prototype.$=function $(selector,context){return Dom.$(selector,context||this.contentEl())};Component.prototype.$$=function $$(selector,context){return Dom.$$(selector,context||this.contentEl())};Component.prototype.hasClass=function hasClass(classToCheck){return Dom.hasElClass(this.el_,classToCheck)};Component.prototype.addClass=function addClass(classToAdd){Dom.addElClass(this.el_,classToAdd);return this};Component.prototype.removeClass=function removeClass(classToRemove){Dom.removeElClass(this.el_,classToRemove);return this};Component.prototype.toggleClass=function toggleClass(classToToggle,predicate){Dom.toggleElClass(this.el_,classToToggle,predicate);return this};Component.prototype.show=function show(){this.removeClass("vjs-hidden");return this};Component.prototype.hide=function hide(){this.addClass("vjs-hidden");return this};Component.prototype.lockShowing=function lockShowing(){this.addClass("vjs-lock-showing");return this};Component.prototype.unlockShowing=function unlockShowing(){this.removeClass("vjs-lock-showing");return this};Component.prototype.getAttribute=function getAttribute(attribute){return Dom.getAttribute(this.el_,attribute)};Component.prototype.setAttribute=function setAttribute(attribute,value){Dom.setAttribute(this.el_,attribute,value);return this};Component.prototype.removeAttribute=function removeAttribute(attribute){Dom.removeAttribute(this.el_,attribute);return this};Component.prototype.width=function width(num,skipListeners){return this.dimension("width",num,skipListeners)};Component.prototype.height=function height(num,skipListeners){return this.dimension("height",num,skipListeners)};Component.prototype.dimensions=function dimensions(width,height){return this.width(width,true).height(height)};Component.prototype.dimension=function dimension(widthOrHeight,num,skipListeners){if(num!==undefined){if(num===null||num!==num){num=0}if((""+num).indexOf("%")!==-1||(""+num).indexOf("px")!==-1){this.el_.style[widthOrHeight]=num}else if(num==="auto"){this.el_.style[widthOrHeight]=""}else{this.el_.style[widthOrHeight]=num+"px"}if(!skipListeners){this.trigger("resize")}return this}if(!this.el_){return 0}var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf("px");if(pxIndex!==-1){return parseInt(val.slice(0,pxIndex),10)}return parseInt(this.el_["offset"+(0,_toTitleCase2["default"])(widthOrHeight)],10)};Component.prototype.currentDimension=function currentDimension(widthOrHeight){var computedWidthOrHeight=0;if(widthOrHeight!=="width"&&widthOrHeight!=="height"){throw new Error("currentDimension only accepts width or height value")}if(typeof _window2["default"].getComputedStyle==="function"){var computedStyle=_window2["default"].getComputedStyle(this.el_);computedWidthOrHeight=computedStyle.getPropertyValue(widthOrHeight)||computedStyle[widthOrHeight]}computedWidthOrHeight=parseFloat(computedWidthOrHeight);if(computedWidthOrHeight===0){var rule="offset"+(0,_toTitleCase2["default"])(widthOrHeight);computedWidthOrHeight=this.el_[rule]}return computedWidthOrHeight};Component.prototype.currentDimensions=function currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};Component.prototype.currentWidth=function currentWidth(){return this.currentDimension("width")};Component.prototype.currentHeight=function currentHeight(){return this.currentDimension("height")};Component.prototype.focus=function focus(){this.el_.focus()};Component.prototype.blur=function blur(){this.el_.blur()};Component.prototype.emitTapEvents=function emitTapEvents(){var touchStart=0;var firstTouch=null;var tapMovementThreshold=10;var touchTimeThreshold=200;var couldBeTap=void 0;this.on("touchstart",function(event){if(event.touches.length===1){firstTouch={pageX:event.touches[0].pageX,pageY:event.touches[0].pageY};touchStart=(new Date).getTime();couldBeTap=true}});this.on("touchmove",function(event){if(event.touches.length>1){couldBeTap=false}else if(firstTouch){var xdiff=event.touches[0].pageX-firstTouch.pageX;var ydiff=event.touches[0].pageY-firstTouch.pageY;var touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold){couldBeTap=false}}});var noTap=function noTap(){couldBeTap=false};this.on("touchleave",noTap);this.on("touchcancel",noTap);this.on("touchend",function(event){firstTouch=null;if(couldBeTap===true){var touchTime=(new Date).getTime()-touchStart;if(touchTime<touchTimeThreshold){event.preventDefault();this.trigger("tap")}}})};Component.prototype.enableTouchActivity=function enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity){return}var report=Fn.bind(this.player(),this.player().reportUserActivity);var touchHolding=void 0;this.on("touchstart",function(){report();this.clearInterval(touchHolding);touchHolding=this.setInterval(report,250)});var touchEnd=function touchEnd(event){report();this.clearInterval(touchHolding)};this.on("touchmove",report);this.on("touchend",touchEnd);this.on("touchcancel",touchEnd)};Component.prototype.setTimeout=function setTimeout(fn,timeout){fn=Fn.bind(this,fn);var timeoutId=_window2["default"].setTimeout(fn,timeout);var disposeFn=function disposeFn(){this.clearTimeout(timeoutId)};disposeFn.guid="vjs-timeout-"+timeoutId;this.on("dispose",disposeFn);return timeoutId};Component.prototype.clearTimeout=function clearTimeout(timeoutId){_window2["default"].clearTimeout(timeoutId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-timeout-"+timeoutId;this.off("dispose",disposeFn);return timeoutId};Component.prototype.setInterval=function setInterval(fn,interval){fn=Fn.bind(this,fn);var intervalId=_window2["default"].setInterval(fn,interval);var disposeFn=function disposeFn(){this.clearInterval(intervalId)};disposeFn.guid="vjs-interval-"+intervalId;this.on("dispose",disposeFn);return intervalId};Component.prototype.clearInterval=function clearInterval(intervalId){_window2["default"].clearInterval(intervalId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-interval-"+intervalId;this.off("dispose",disposeFn);return intervalId};Component.registerComponent=function registerComponent(name,comp){if(!name){return}name=(0,_toTitleCase2["default"])(name);if(!Component.components_){Component.components_={}}if(name==="Player"&&Component.components_[name]){var Player=Component.components_[name];if(Player.players&&Object.keys(Player.players).length>0&&Object.keys(Player.players).map(function(playerName){return Player.players[playerName]}).every(Boolean)){throw new Error("Can not register Player component after player has been created")}}Component.components_[name]=comp;return comp};Component.getComponent=function getComponent(name){if(!name){return}name=(0,_toTitleCase2["default"])(name);if(Component.components_&&Component.components_[name]){return Component.components_[name]}if(_window2["default"]&&_window2["default"].videojs&&_window2["default"].videojs[name]){_log2["default"].warn("The "+name+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)");return _window2["default"].videojs[name]}};Component.extend=function extend(props){props=props||{};_log2["default"].warn("Component.extend({}) has been deprecated, "+" use videojs.extend(Component, {}) instead");var init=props.init||props.init||this.prototype.init||this.prototype.init||function(){};var subObj=function subObj(){init.apply(this,arguments)};subObj.prototype=Object.create(this.prototype);subObj.prototype.constructor=subObj;subObj.extend=Component.extend;for(var name in props){if(props.hasOwnProperty(name)){subObj.prototype[name]=props[name]}}return subObj};return Component}();Component.registerComponent("Component",Component);exports["default"]=Component},function(module,exports,__webpack_require__){exports.__esModule=true;exports.throttle=exports.bind=undefined;var _guid=__webpack_require__(226);var bind=exports.bind=function bind(context,fn,uid){if(!fn.guid){fn.guid=(0,_guid.newGUID)()}var bound=function bound(){return fn.apply(context,arguments)};bound.guid=uid?uid+"_"+fn.guid:fn.guid;return bound};var throttle=exports.throttle=function throttle(fn,wait){var last=Date.now();var throttled=function throttled(){var now=Date.now();if(now-last>=wait){fn.apply(undefined,arguments);last=now}};return throttled}},function(module,exports){exports.__esModule=true;function toTitleCase(string){if(typeof string!=="string"){return string}return string.charAt(0).toUpperCase()+string.slice(1)}exports["default"]=toTitleCase},function(module,exports,__webpack_require__){exports.__esModule=true;exports["default"]=mergeOptions;var _obj=__webpack_require__(228);function mergeOptions(){var result={};for(var _len=arguments.length,sources=Array(_len),_key=0;_key<_len;_key++){sources[_key]=arguments[_key]}sources.forEach(function(source){if(!source){return}(0,_obj.each)(source,function(value,key){if(!(0,_obj.isPlain)(value)){result[key]=value;return}if(!(0,_obj.isPlain)(result[key])){result[key]={}}result[key]=mergeOptions(result[key],value)})});return result}},function(module,exports,__webpack_require__){exports.__esModule=true;var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var EventTarget=function EventTarget(){};EventTarget.prototype.allowedEvents_={};EventTarget.prototype.on=function(type,fn){var ael=this.addEventListener;this.addEventListener=function(){};Events.on(this,type,fn);this.addEventListener=ael};EventTarget.prototype.addEventListener=EventTarget.prototype.on;EventTarget.prototype.off=function(type,fn){Events.off(this,type,fn)};EventTarget.prototype.removeEventListener=EventTarget.prototype.off;EventTarget.prototype.one=function(type,fn){var ael=this.addEventListener;this.addEventListener=function(){};Events.one(this,type,fn);this.addEventListener=ael};EventTarget.prototype.trigger=function(event){var type=event.type||event;if(typeof event==="string"){event={type:type}}event=Events.fixEvent(event);if(this.allowedEvents_[type]&&this["on"+type]){this["on"+type](event)}Events.trigger(this,event)};EventTarget.prototype.dispatchEvent=EventTarget.prototype.trigger;exports["default"]=EventTarget},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _guid=__webpack_require__(226);var Guid=_interopRequireWildcard(_guid);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _toTitleCase=__webpack_require__(235);var _toTitleCase2=_interopRequireDefault(_toTitleCase);var _timeRanges=__webpack_require__(239);var _buffer=__webpack_require__(240);var _stylesheet=__webpack_require__(232);var stylesheet=_interopRequireWildcard(_stylesheet);var _fullscreenApi=__webpack_require__(241);var _fullscreenApi2=_interopRequireDefault(_fullscreenApi);var _mediaError=__webpack_require__(242);var _mediaError2=_interopRequireDefault(_mediaError);var _tuple=__webpack_require__(243);var _tuple2=_interopRequireDefault(_tuple);var _obj=__webpack_require__(228);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);var _textTrackListConverter=__webpack_require__(244);var _textTrackListConverter2=_interopRequireDefault(_textTrackListConverter);var _modalDialog=__webpack_require__(245);var _modalDialog2=_interopRequireDefault(_modalDialog);var _tech=__webpack_require__(246);var _tech2=_interopRequireDefault(_tech);var _audioTrackList=__webpack_require__(265);var _audioTrackList2=_interopRequireDefault(_audioTrackList);var _videoTrackList=__webpack_require__(264);var _videoTrackList2=_interopRequireDefault(_videoTrackList);__webpack_require__(270);__webpack_require__(271);__webpack_require__(273);__webpack_require__(275);__webpack_require__(276);__webpack_require__(277);__webpack_require__(279);__webpack_require__(280);__webpack_require__(323);__webpack_require__(324);__webpack_require__(325);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"];var Player=function(_Component){_inherits(Player,_Component);function Player(tag,options,ready){_classCallCheck(this,Player);tag.id=tag.id||"vjs_video_"+Guid.newGUID();options=(0,_obj.assign)(Player.getTagSettings(tag),options);options.initChildren=false;options.createEl=false;options.reportTouchActivity=false;if(!options.language){if(typeof tag.closest==="function"){var closest=tag.closest("[lang]");if(closest){options.language=closest.getAttribute("lang")}}else{var element=tag;while(element&&element.nodeType===1){if(Dom.getElAttributes(element).hasOwnProperty("lang")){options.language=element.getAttribute("lang");break}element=element.parentNode}}}var _this=_possibleConstructorReturn(this,_Component.call(this,null,options,ready));if(!_this.options_||!_this.options_.techOrder||!_this.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?")}_this.tag=tag;_this.tagAttributes=tag&&Dom.getElAttributes(tag);_this.language(_this.options_.language);if(options.languages){var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name){languagesToLower[name.toLowerCase()]=options.languages[name]});_this.languages_=languagesToLower}else{_this.languages_=Player.prototype.options_.languages}_this.cache_={};_this.poster_=options.poster||"";_this.controls_=!!options.controls;tag.controls=false;_this.scrubbing_=false;_this.el_=_this.createEl();var playerOptionsCopy=(0,_mergeOptions2["default"])(_this.options_);if(options.plugins){var plugins=options.plugins;Object.getOwnPropertyNames(plugins).forEach(function(name){if(typeof this[name]==="function"){this[name](plugins[name])}else{_log2["default"].error("Unable to find plugin:",name)}},_this)}_this.options_.playerOptions=playerOptionsCopy;_this.initChildren();_this.isAudio(tag.nodeName.toLowerCase()==="audio");if(_this.controls()){_this.addClass("vjs-controls-enabled")}else{_this.addClass("vjs-controls-disabled")}_this.el_.setAttribute("role","region");if(_this.isAudio()){_this.el_.setAttribute("aria-label","audio player")}else{_this.el_.setAttribute("aria-label","video player")}if(_this.isAudio()){_this.addClass("vjs-audio")}if(_this.flexNotSupported_()){_this.addClass("vjs-no-flex")}if(!browser.IS_IOS){_this.addClass("vjs-workinghover")}Player.players[_this.id_]=_this;var majorVersion="5.20.4".split(".")[0];_this.addClass("vjs-v"+majorVersion);_this.userActive(true);_this.reportUserActivity();_this.listenForUserActivity_();_this.on("fullscreenchange",_this.handleFullscreenChange_);_this.on("stageclick",_this.handleStageClick_);return _this}Player.prototype.dispose=function dispose(){this.trigger("dispose");this.off("dispose");if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_)}Player.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose()}_Component.prototype.dispose.call(this)};Player.prototype.createEl=function createEl(){var tag=this.tag;var el=void 0;var playerElIngest=this.playerElIngest_=tag.parentNode&&tag.parentNode.hasAttribute&&tag.parentNode.hasAttribute("data-vjs-player");if(playerElIngest){el=this.el_=tag.parentNode}else{el=this.el_=_Component.prototype.createEl.call(this,"div")}tag.setAttribute("tabindex","-1");tag.removeAttribute("width");tag.removeAttribute("height");var attrs=Dom.getElAttributes(tag);Object.getOwnPropertyNames(attrs).forEach(function(attr){if(attr==="class"){el.className+=" "+attrs[attr]}else{el.setAttribute(attr,attrs[attr])}});tag.playerId=tag.id;tag.id+="_html5_api";tag.className="vjs-tech";tag.player=el.player=this;this.addClass("vjs-paused");if(_window2["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=stylesheet.createStyleElement("vjs-styles-dimensions");var defaultsStyleEl=Dom.$(".vjs-styles-defaults");var head=Dom.$("head");head.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head.firstChild)}this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);var links=tag.getElementsByTagName("a");for(var i=0;i<links.length;i++){var linkEl=links.item(i);Dom.addElClass(linkEl,"vjs-hidden");linkEl.setAttribute("hidden","hidden")}tag.initNetworkState_=tag.networkState;if(tag.parentNode&&!playerElIngest){tag.parentNode.insertBefore(el,tag)}Dom.insertElFirst(tag,el);this.children_.unshift(tag);this.el_=el;return el};Player.prototype.width=function width(value){return this.dimension("width",value)};Player.prototype.height=function height(value){return this.dimension("height",value)};Player.prototype.dimension=function dimension(_dimension,value){var privDimension=_dimension+"_";if(value===undefined){return this[privDimension]||0}if(value===""){this[privDimension]=undefined}else{var parsedVal=parseFloat(value);if(isNaN(parsedVal)){_log2["default"].error('Improper value "'+value+'" supplied for for '+_dimension);return this}this[privDimension]=parsedVal}this.updateStyleEl_();return this};Player.prototype.fluid=function fluid(bool){if(bool===undefined){return!!this.fluid_}this.fluid_=!!bool;if(bool){this.addClass("vjs-fluid")}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};Player.prototype.aspectRatio=function aspectRatio(ratio){if(ratio===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(ratio)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=ratio;this.fluid(true);this.updateStyleEl_()};Player.prototype.updateStyleEl_=function updateStyleEl_(){if(_window2["default"].VIDEOJS_NO_DYNAMIC_STYLE===true){var _width=typeof this.width_==="number"?this.width_:this.options_.width;var _height=typeof this.height_==="number"?this.height_:this.options_.height;var techEl=this.tech_&&this.tech_.el();if(techEl){if(_width>=0){techEl.width=_width}if(_height>=0){techEl.height=_height}}return}var width=void 0;var height=void 0;var aspectRatio=void 0;var idClass=void 0;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){aspectRatio=this.aspectRatio_}else if(this.videoWidth()>0){aspectRatio=this.videoWidth()+":"+this.videoHeight()}else{aspectRatio="16:9"}var ratioParts=aspectRatio.split(":");var ratioMultiplier=ratioParts[1]/ratioParts[0];if(this.width_!==undefined){width=this.width_}else if(this.height_!==undefined){width=this.height_/ratioMultiplier}else{width=this.videoWidth()||300}if(this.height_!==undefined){height=this.height_}else{height=width*ratioMultiplier}if(/^[^a-zA-Z]/.test(this.id())){idClass="dimensions-"+this.id()}else{idClass=this.id()+"-dimensions"}this.addClass(idClass);stylesheet.setTextContent(this.styleEl_,"\n      ."+idClass+" {\n        width: "+width+"px;\n        height: "+height+"px;\n      }\n\n      ."+idClass+".vjs-fluid {\n        padding-top: "+ratioMultiplier*100+"%;\n      }\n    ")};Player.prototype.loadTech_=function loadTech_(techName,source){var _this2=this;if(this.tech_){this.unloadTech_()}if(techName!=="Html5"&&this.tag){_tech2["default"].getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=techName;this.isReady_=false;var techOptions=(0,_obj.assign)({source:source,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+techName+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"]},this.options_[techName.toLowerCase()]);if(this.tag){techOptions.tag=this.tag}if(source){this.currentType_=source.type;if(source.src===this.cache_.src&&this.cache_.currentTime>0){techOptions.startTime=this.cache_.currentTime}this.cache_.sources=null;this.cache_.source=source;this.cache_.src=source.src}var TechComponent=_tech2["default"].getTech(techName);if(!TechComponent){TechComponent=_component2["default"].getComponent(techName)}this.tech_=new TechComponent(techOptions);this.tech_.ready(Fn.bind(this,this.handleTechReady_),true);_textTrackListConverter2["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_);TECH_EVENTS_RETRIGGER.forEach(function(event){_this2.on(_this2.tech_,event,_this2["handleTech"+(0,_toTitleCase2["default"])(event)+"_"])});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"canplay",this.handleTechCanPlay_);this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_);this.on(this.tech_,"playing",this.handleTechPlaying_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"seeked",this.handleTechSeeked_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(techName!=="Html5"||!this.tag)){Dom.insertElFirst(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};Player.prototype.unloadTech_=function unloadTech_(){this.videoTracks_=this.videoTracks();this.textTracks_=this.textTracks();this.audioTracks_=this.audioTracks();this.textTracksJson_=_textTrackListConverter2["default"].textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false};Player.prototype.tech=function tech(safety){if(safety&&safety.IWillNotUseThisInPlugins){return this.tech_}var errorText="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";_window2["default"].alert(errorText);throw new Error(errorText)};Player.prototype.addTechControlsListeners_=function addTechControlsListeners_(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};Player.prototype.removeTechControlsListeners_=function removeTechControlsListeners_(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_)};Player.prototype.handleTechReady_=function handleTechReady_(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_();if((this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){(0,_log2["default"])("deleting tag.poster throws in some browsers",e)}this.play()}};Player.prototype.handleTechLoadStart_=function handleTechLoadStart_(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}};Player.prototype.hasStarted=function hasStarted(_hasStarted){if(_hasStarted!==undefined){if(this.hasStarted_!==_hasStarted){this.hasStarted_=_hasStarted;if(_hasStarted){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}}return this}return!!this.hasStarted_};Player.prototype.handleTechPlay_=function handleTechPlay_(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};Player.prototype.handleTechWaiting_=function handleTechWaiting_(){var _this3=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",function(){return _this3.removeClass("vjs-waiting")})};Player.prototype.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass("vjs-waiting");this.trigger("canplay")};Player.prototype.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};Player.prototype.handleTechPlaying_=function handleTechPlaying_(){this.removeClass("vjs-waiting");this.trigger("playing")};Player.prototype.handleTechSeeking_=function handleTechSeeking_(){this.addClass("vjs-seeking");this.trigger("seeking")};Player.prototype.handleTechSeeked_=function handleTechSeeked_(){this.removeClass("vjs-seeking");this.trigger("seeked")};Player.prototype.handleTechFirstPlay_=function handleTechFirstPlay_(){if(this.options_.starttime){_log2["default"].warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};Player.prototype.handleTechPause_=function handleTechPause_(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};Player.prototype.handleTechEnded_=function handleTechEnded_(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else if(!this.paused()){this.pause()}this.trigger("ended")};Player.prototype.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_("duration"))};Player.prototype.handleTechClick_=function handleTechClick_(event){if(event.button!==0){return}if(this.controls()){if(this.paused()){this.play()}else{this.pause()}}};Player.prototype.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive())};Player.prototype.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive()};Player.prototype.handleTechTouchMove_=function handleTechTouchMove_(){if(this.userWasActive){this.reportUserActivity()}};Player.prototype.handleTechTouchEnd_=function handleTechTouchEnd_(event){event.preventDefault()};Player.prototype.handleFullscreenChange_=function handleFullscreenChange_(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};Player.prototype.handleStageClick_=function handleStageClick_(){this.reportUserActivity()};Player.prototype.handleTechFullscreenChange_=function handleTechFullscreenChange_(event,data){if(data){this.isFullscreen(data.isFullscreen)}this.trigger("fullscreenchange")};Player.prototype.handleTechError_=function handleTechError_(){var error=this.tech_.error();this.error(error)};Player.prototype.handleTechTextData_=function handleTechTextData_(){var data=null;if(arguments.length>1){data=arguments[1]}this.trigger("textdata",data)};Player.prototype.getCache=function getCache(){return this.cache_};Player.prototype.techCall_=function techCall_(method,arg){if(this.tech_&&!this.tech_.isReady_){this.tech_.ready(function(){this[method](arg)},true)}else{try{if(this.tech_){this.tech_[method](arg)}}catch(e){(0,_log2["default"])(e);throw e}}};Player.prototype.techGet_=function techGet_(method){if(this.tech_&&this.tech_.isReady_){try{return this.tech_[method]()}catch(e){if(this.tech_[method]===undefined){(0,_log2["default"])("Video.js: "+method+" method not defined for "+this.techName_+" playback technology.",e);
}else if(e.name==="TypeError"){(0,_log2["default"])("Video.js: "+method+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false}else{(0,_log2["default"])(e)}throw e}}return};Player.prototype.play=function play(){if(this.src()||this.currentSrc()){this.techCall_("play")}else{this.tech_.one("loadstart",function(){this.play()})}return this};Player.prototype.pause=function pause(){this.techCall_("pause");return this};Player.prototype.paused=function paused(){return this.techGet_("paused")===false?false:true};Player.prototype.scrubbing=function scrubbing(isScrubbing){if(isScrubbing!==undefined){this.scrubbing_=!!isScrubbing;if(isScrubbing){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}return this}return this.scrubbing_};Player.prototype.currentTime=function currentTime(seconds){if(seconds!==undefined){this.techCall_("setCurrentTime",seconds);return this}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};Player.prototype.duration=function duration(seconds){if(seconds===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}seconds=parseFloat(seconds);if(seconds<0){seconds=Infinity}if(seconds!==this.cache_.duration){this.cache_.duration=seconds;if(seconds===Infinity){this.addClass("vjs-live")}else{this.removeClass("vjs-live")}this.trigger("durationchange")}return this};Player.prototype.remainingTime=function remainingTime(){return this.duration()-this.currentTime()};Player.prototype.buffered=function buffered(){var buffered=this.techGet_("buffered");if(!buffered||!buffered.length){buffered=(0,_timeRanges.createTimeRange)(0,0)}return buffered};Player.prototype.bufferedPercent=function bufferedPercent(){return(0,_buffer.bufferedPercent)(this.buffered(),this.duration())};Player.prototype.bufferedEnd=function bufferedEnd(){var buffered=this.buffered();var duration=this.duration();var end=buffered.end(buffered.length-1);if(end>duration){end=duration}return end};Player.prototype.volume=function volume(percentAsDecimal){var vol=void 0;if(percentAsDecimal!==undefined){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall_("setVolume",vol);return this}vol=parseFloat(this.techGet_("volume"));return isNaN(vol)?1:vol};Player.prototype.muted=function muted(_muted){if(_muted!==undefined){this.techCall_("setMuted",_muted);return this}return this.techGet_("muted")||false};Player.prototype.supportsFullScreen=function supportsFullScreen(){return this.techGet_("supportsFullScreen")||false};Player.prototype.isFullscreen=function isFullscreen(isFS){if(isFS!==undefined){this.isFullscreen_=!!isFS;return this}return!!this.isFullscreen_};Player.prototype.requestFullscreen=function requestFullscreen(){var fsApi=_fullscreenApi2["default"];this.isFullscreen(true);if(fsApi.requestFullscreen){Events.on(_document2["default"],fsApi.fullscreenchange,Fn.bind(this,function documentFullscreenChange(e){this.isFullscreen(_document2["default"][fsApi.fullscreenElement]);if(this.isFullscreen()===false){Events.off(_document2["default"],fsApi.fullscreenchange,documentFullscreenChange)}this.trigger("fullscreenchange")}));this.el_[fsApi.requestFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow();this.trigger("fullscreenchange")}return this};Player.prototype.exitFullscreen=function exitFullscreen(){var fsApi=_fullscreenApi2["default"];this.isFullscreen(false);if(fsApi.requestFullscreen){_document2["default"][fsApi.exitFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow();this.trigger("fullscreenchange")}return this};Player.prototype.enterFullWindow=function enterFullWindow(){this.isFullWindow=true;this.docOrigOverflow=_document2["default"].documentElement.style.overflow;Events.on(_document2["default"],"keydown",Fn.bind(this,this.fullWindowOnEscKey));_document2["default"].documentElement.style.overflow="hidden";Dom.addElClass(_document2["default"].body,"vjs-full-window");this.trigger("enterFullWindow")};Player.prototype.fullWindowOnEscKey=function fullWindowOnEscKey(event){if(event.keyCode===27){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};Player.prototype.exitFullWindow=function exitFullWindow(){this.isFullWindow=false;Events.off(_document2["default"],"keydown",this.fullWindowOnEscKey);_document2["default"].documentElement.style.overflow=this.docOrigOverflow;Dom.removeElClass(_document2["default"].body,"vjs-full-window");this.trigger("exitFullWindow")};Player.prototype.canPlayType=function canPlayType(type){var can=void 0;for(var i=0,j=this.options_.techOrder;i<j.length;i++){var techName=(0,_toTitleCase2["default"])(j[i]);var tech=_tech2["default"].getTech(techName);if(!tech){tech=_component2["default"].getComponent(techName)}if(!tech){_log2["default"].error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');continue}if(tech.isSupported()){can=tech.canPlayType(type);if(can){return can}}}return""};Player.prototype.selectSource=function selectSource(sources){var _this4=this;var techs=this.options_.techOrder.map(_toTitleCase2["default"]).map(function(techName){return[techName,_tech2["default"].getTech(techName)||_component2["default"].getComponent(techName)]}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];if(tech){return tech.isSupported()}_log2["default"].error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');return false});var findFirstPassingTechSourcePair=function findFirstPassingTechSourcePair(outerArray,innerArray,tester){var found=void 0;outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){found=tester(outerChoice,innerChoice);if(found){return true}})});return found};var foundSourceAndTech=void 0;var flip=function flip(fn){return function(a,b){return fn(b,a)}};var finder=function finder(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source,_this4.options_[techName.toLowerCase()])){return{source:source,tech:techName}}};if(this.options_.sourceOrder){foundSourceAndTech=findFirstPassingTechSourcePair(sources,techs,flip(finder))}else{foundSourceAndTech=findFirstPassingTechSourcePair(techs,sources,finder)}return foundSourceAndTech||false};Player.prototype.src=function src(source){if(source===undefined){return this.techGet_("src")}var currentTech=_tech2["default"].getTech(this.techName_);if(!currentTech){currentTech=_component2["default"].getComponent(this.techName_)}if(Array.isArray(source)){this.sourceList_(source)}else if(typeof source==="string"){this.src({src:source})}else if(source instanceof Object){if(source.type&&!currentTech.canPlaySource(source,this.options_[this.techName_.toLowerCase()])){this.sourceList_([source])}else{this.cache_.sources=null;this.cache_.source=source;this.cache_.src=source.src;this.currentType_=source.type||"";this.ready(function(){if(currentTech.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",source)}else{this.techCall_("src",source.src)}if(this.options_.preload==="auto"){this.load()}if(this.options_.autoplay){this.play()}},true)}}return this};Player.prototype.sourceList_=function sourceList_(sources){var sourceTech=this.selectSource(sources);if(sourceTech){if(sourceTech.tech===this.techName_){this.src(sourceTech.source)}else{this.loadTech_(sourceTech.tech,sourceTech.source)}this.cache_.sources=sources}else{this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);this.triggerReady()}};Player.prototype.load=function load(){this.techCall_("load");return this};Player.prototype.reset=function reset(){this.loadTech_((0,_toTitleCase2["default"])(this.options_.techOrder[0]),null);this.techCall_("reset");return this};Player.prototype.currentSources=function currentSources(){var source=this.currentSource();var sources=[];if(Object.keys(source).length!==0){sources.push(source)}return this.cache_.sources||sources};Player.prototype.currentSource=function currentSource(){var source={};var src=this.currentSrc();if(src){source.src=src}return this.cache_.source||source};Player.prototype.currentSrc=function currentSrc(){return this.techGet_("currentSrc")||this.cache_.src||""};Player.prototype.currentType=function currentType(){return this.currentType_||""};Player.prototype.preload=function preload(value){if(value!==undefined){this.techCall_("setPreload",value);this.options_.preload=value;return this}return this.techGet_("preload")};Player.prototype.autoplay=function autoplay(value){if(value!==undefined){this.techCall_("setAutoplay",value);this.options_.autoplay=value;return this}return this.techGet_("autoplay",value)};Player.prototype.playsinline=function playsinline(value){if(value!==undefined){this.techCall_("setPlaysinline",value);this.options_.playsinline=value;return this}return this.techGet_("playsinline")};Player.prototype.loop=function loop(value){if(value!==undefined){this.techCall_("setLoop",value);this.options_.loop=value;return this}return this.techGet_("loop")};Player.prototype.poster=function poster(src){if(src===undefined){return this.poster_}if(!src){src=""}this.poster_=src;this.techCall_("setPoster",src);this.trigger("posterchange");return this};Player.prototype.handleTechPosterChange_=function handleTechPosterChange_(){if(!this.poster_&&this.tech_&&this.tech_.poster){this.poster_=this.tech_.poster()||"";this.trigger("posterchange")}};Player.prototype.controls=function controls(bool){if(bool!==undefined){bool=!!bool;if(this.controls_!==bool){this.controls_=bool;if(this.usingNativeControls()){this.techCall_("setControls",bool)}if(bool){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}}return this}return!!this.controls_};Player.prototype.usingNativeControls=function usingNativeControls(bool){if(bool!==undefined){bool=!!bool;if(this.usingNativeControls_!==bool){this.usingNativeControls_=bool;if(bool){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}}return this}return!!this.usingNativeControls_};Player.prototype.error=function error(err){if(err===undefined){return this.error_||null}if(err===null){this.error_=err;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return this}this.error_=new _mediaError2["default"](err);this.addClass("vjs-error");_log2["default"].error("(CODE:"+this.error_.code+" "+_mediaError2["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return this};Player.prototype.reportUserActivity=function reportUserActivity(event){this.userActivity_=true};Player.prototype.userActive=function userActive(bool){if(bool!==undefined){bool=!!bool;if(bool!==this.userActive_){this.userActive_=bool;if(bool){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive")}else{this.userActivity_=false;if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()})}this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}}return this}return this.userActive_};Player.prototype.listenForUserActivity_=function listenForUserActivity_(){var mouseInProgress=void 0;var lastMoveX=void 0;var lastMoveY=void 0;var handleActivity=Fn.bind(this,this.reportUserActivity);var handleMouseMove=function handleMouseMove(e){if(e.screenX!==lastMoveX||e.screenY!==lastMoveY){lastMoveX=e.screenX;lastMoveY=e.screenY;handleActivity()}};var handleMouseDown=function handleMouseDown(){handleActivity();this.clearInterval(mouseInProgress);mouseInProgress=this.setInterval(handleActivity,250)};var handleMouseUp=function handleMouseUp(event){handleActivity();this.clearInterval(mouseInProgress)};this.on("mousedown",handleMouseDown);this.on("mousemove",handleMouseMove);this.on("mouseup",handleMouseUp);this.on("keydown",handleActivity);this.on("keyup",handleActivity);var inactivityTimeout=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=false;this.userActive(true);this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;if(timeout>0){inactivityTimeout=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false)}},timeout)}}},250)};Player.prototype.playbackRate=function playbackRate(rate){if(rate!==undefined){this.techCall_("setPlaybackRate",rate);return this}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("playbackRate")}return 1};Player.prototype.isAudio=function isAudio(bool){if(bool!==undefined){this.isAudio_=!!bool;return this}return!!this.isAudio_};Player.prototype.videoTracks=function videoTracks(){if(!this.tech_){this.videoTracks_=this.videoTracks_||new _videoTrackList2["default"];return this.videoTracks_}return this.tech_.videoTracks()};Player.prototype.audioTracks=function audioTracks(){if(!this.tech_){this.audioTracks_=this.audioTracks_||new _audioTrackList2["default"];return this.audioTracks_}return this.tech_.audioTracks()};Player.prototype.textTracks=function textTracks(){if(this.tech_){return this.tech_.textTracks()}};Player.prototype.remoteTextTracks=function remoteTextTracks(){if(this.tech_){return this.tech_.remoteTextTracks()}};Player.prototype.remoteTextTrackEls=function remoteTextTrackEls(){if(this.tech_){return this.tech_.remoteTextTrackEls()}};Player.prototype.addTextTrack=function addTextTrack(kind,label,language){if(this.tech_){return this.tech_.addTextTrack(kind,label,language)}};Player.prototype.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){if(this.tech_){return this.tech_.addRemoteTextTrack(options,manualCleanup)}};Player.prototype.removeRemoteTextTrack=function removeRemoteTextTrack(){var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref3$track=_ref3.track,track=_ref3$track===undefined?arguments[0]:_ref3$track;if(this.tech_){return this.tech_.removeRemoteTextTrack(track)}};Player.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")};Player.prototype.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};Player.prototype.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};Player.prototype.language=function language(code){if(code===undefined){return this.language_}this.language_=String(code).toLowerCase();return this};Player.prototype.languages=function languages(){return(0,_mergeOptions2["default"])(Player.prototype.options_.languages,this.languages_)};Player.prototype.toJSON=function toJSON(){var options=(0,_mergeOptions2["default"])(this.options_);var tracks=options.tracks;options.tracks=[];for(var i=0;i<tracks.length;i++){var track=tracks[i];track=(0,_mergeOptions2["default"])(track);track.player=undefined;options.tracks[i]=track}return options};Player.prototype.createModal=function createModal(content,options){var _this5=this;options=options||{};options.content=content||"";var modal=new _modalDialog2["default"](this,options);this.addChild(modal);modal.on("dispose",function(){_this5.removeChild(modal)});return modal.open()};Player.getTagSettings=function getTagSettings(tag){var baseOptions={sources:[],tracks:[]};var tagOptions=Dom.getElAttributes(tag);var dataSetup=tagOptions["data-setup"];if(Dom.hasElClass(tag,"vjs-fluid")){tagOptions.fluid=true}if(dataSetup!==null){var _safeParseTuple=(0,_tuple2["default"])(dataSetup||"{}"),err=_safeParseTuple[0],data=_safeParseTuple[1];if(err){_log2["default"].error(err)}(0,_obj.assign)(tagOptions,data)}(0,_obj.assign)(baseOptions,tagOptions);if(tag.hasChildNodes()){var children=tag.childNodes;for(var i=0,j=children.length;i<j;i++){var child=children[i];var childName=child.nodeName.toLowerCase();if(childName==="source"){baseOptions.sources.push(Dom.getElAttributes(child))}else if(childName==="track"){baseOptions.tracks.push(Dom.getElAttributes(child))}}}return baseOptions};Player.prototype.flexNotSupported_=function flexNotSupported_(){var elem=_document2["default"].createElement("i");return!("flexBasis"in elem.style||"webkitFlexBasis"in elem.style||"mozFlexBasis"in elem.style||"msFlexBasis"in elem.style||"msFlexOrder"in elem.style)};return Player}(_component2["default"]);Player.players={};var navigator=_window2["default"].navigator;Player.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach(function(fn){Player.prototype[fn]=function(){return this.techGet_(fn)}});TECH_EVENTS_RETRIGGER.forEach(function(event){Player.prototype["handleTech"+(0,_toTitleCase2["default"])(event)+"_"]=function(){return this.trigger(event)}});_component2["default"].registerComponent("Player",Player);exports["default"]=Player},function(module,exports,__webpack_require__){exports.__esModule=true;exports.createTimeRange=undefined;exports.createTimeRanges=createTimeRanges;var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function rangeCheck(fnName,index,maxIndex){if(index<0||index>maxIndex){throw new Error("Failed to execute '"+fnName+"' on 'TimeRanges': The index provided ("+index+") is greater than or equal to the maximum bound ("+maxIndex+").")}}function getRange(fnName,valueIndex,ranges,rangeIndex){if(rangeIndex===undefined){_log2["default"].warn("DEPRECATED: Function '"+fnName+"' on 'TimeRanges' called without an index argument.");rangeIndex=0}rangeCheck(fnName,rangeIndex,ranges.length-1);return ranges[rangeIndex][valueIndex]}function createTimeRangesObj(ranges){if(ranges===undefined||ranges.length===0){return{length:0,start:function start(){throw new Error("This TimeRanges object is empty")},end:function end(){throw new Error("This TimeRanges object is empty")}}}return{length:ranges.length,start:getRange.bind(null,"start",0,ranges),end:getRange.bind(null,"end",1,ranges)}}function createTimeRanges(start,end){if(Array.isArray(start)){return createTimeRangesObj(start)}else if(start===undefined||end===undefined){return createTimeRangesObj()}return createTimeRangesObj([[start,end]])}exports.createTimeRange=createTimeRanges},function(module,exports,__webpack_require__){exports.__esModule=true;exports.bufferedPercent=bufferedPercent;var _timeRanges=__webpack_require__(239);function bufferedPercent(buffered,duration){var bufferedDuration=0;var start=void 0;var end=void 0;if(!duration){return 0}if(!buffered||!buffered.length){buffered=(0,_timeRanges.createTimeRange)(0,0)}for(var i=0;i<buffered.length;i++){start=buffered.start(i);end=buffered.end(i);if(end>duration){end=duration}bufferedDuration+=end-start}return bufferedDuration/duration}},function(module,exports,__webpack_require__){exports.__esModule=true;var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var FullscreenApi={};var apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var specApi=apiMap[0];var browserApi=void 0;for(var i=0;i<apiMap.length;i++){if(apiMap[i][1]in _document2["default"]){browserApi=apiMap[i];break}}if(browserApi){for(var _i=0;_i<browserApi.length;_i++){FullscreenApi[specApi[_i]]=browserApi[_i]}}exports["default"]=FullscreenApi},function(module,exports,__webpack_require__){exports.__esModule=true;var _obj=__webpack_require__(228);function MediaError(value){if(value instanceof MediaError){return value}if(typeof value==="number"){this.code=value}else if(typeof value==="string"){this.message=value}else if((0,_obj.isObject)(value)){if(typeof value.code==="number"){this.code=value.code}(0,_obj.assign)(this,value)}if(!this.message){this.message=MediaError.defaultMessages[this.code]||""}}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var errNum=0;errNum<MediaError.errorTypes.length;errNum++){MediaError[MediaError.errorTypes[errNum]]=errNum;MediaError.prototype[MediaError.errorTypes[errNum]]=errNum}exports["default"]=MediaError},function(module,exports){module.exports=SafeParseTuple;function SafeParseTuple(obj,reviver){var json;var error=null;try{json=JSON.parse(obj,reviver)}catch(err){error=err}return[error,json]}},function(module,exports){exports.__esModule=true;var trackToJson_=function trackToJson_(track){var ret=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(acc,prop,i){if(track[prop]){acc[prop]=track[prop]}return acc},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id}})});return ret};var textTracksToJson=function textTracksToJson(tech){var trackEls=tech.$$("track");var trackObjs=Array.prototype.map.call(trackEls,function(t){return t.track});var tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);if(trackEl.src){json.src=trackEl.src}return json});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1}).map(trackToJson_))};var jsonToTextTracks=function jsonToTextTracks(json,tech){json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;if(!track.src&&track.cues){track.cues.forEach(function(cue){return addedTrack.addCue(cue)})}});return tech.textTracks()};exports["default"]={textTracksToJson:textTracksToJson,jsonToTextTracks:jsonToTextTracks,trackToJson_:trackToJson_}},function(module,exports,__webpack_require__){exports.__esModule=true;var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MODAL_CLASS_NAME="vjs-modal-dialog";var ESC=27;var ModalDialog=function(_Component){_inherits(ModalDialog,_Component);function ModalDialog(player,options){_classCallCheck(this,ModalDialog);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.opened_=_this.hasBeenOpened_=_this.hasBeenFilled_=false;_this.closeable(!_this.options_.uncloseable);_this.content(_this.options_.content);_this.contentEl_=Dom.createEl("div",{className:MODAL_CLASS_NAME+"-content"},{role:"document"});_this.descEl_=Dom.createEl("p",{className:MODAL_CLASS_NAME+"-description vjs-offscreen",id:_this.el().getAttribute("aria-describedby")});Dom.textContent(_this.descEl_,_this.description());_this.el_.appendChild(_this.descEl_);_this.el_.appendChild(_this.contentEl_);return _this}ModalDialog.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};ModalDialog.prototype.buildCSSClass=function buildCSSClass(){return MODAL_CLASS_NAME+" vjs-hidden "+_Component.prototype.buildCSSClass.call(this)};ModalDialog.prototype.handleKeyPress=function handleKeyPress(e){if(e.which===ESC&&this.closeable()){this.close()}};ModalDialog.prototype.label=function label(){return this.options_.label||this.localize("Modal Window")};ModalDialog.prototype.description=function description(){var desc=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){desc+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return desc};ModalDialog.prototype.open=function open(){if(!this.opened_){var player=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!player.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){player.pause()}if(this.closeable()){this.on(this.el_.ownerDocument,"keydown",Fn.bind(this,this.handleKeyPress))}player.controls(false);this.show();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}return this};ModalDialog.prototype.opened=function opened(value){if(typeof value==="boolean"){this[value?"open":"close"]()}return this.opened_};ModalDialog.prototype.close=function close(){if(this.opened_){var player=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){player.play()}if(this.closeable()){this.off(this.el_.ownerDocument,"keydown",Fn.bind(this,this.handleKeyPress))}player.controls(true);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");if(this.options_.temporary){this.dispose()}}return this};ModalDialog.prototype.closeable=function closeable(value){if(typeof value==="boolean"){var closeable=this.closeable_=!!value;var close=this.getChild("closeButton");if(closeable&&!close){var temp=this.contentEl_;this.contentEl_=this.el_;close=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=temp;this.on(close,"close",this.close)}if(!closeable&&close){this.off(close,"close",this.close);this.removeChild(close);close.dispose()}}return this.closeable_};ModalDialog.prototype.fill=function fill(){return this.fillWith(this.content())};ModalDialog.prototype.fillWith=function fillWith(content){var contentEl=this.contentEl();var parentEl=contentEl.parentNode;var nextSiblingEl=contentEl.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;parentEl.removeChild(contentEl);this.empty();Dom.insertContent(contentEl,content);this.trigger("modalfill");if(nextSiblingEl){parentEl.insertBefore(contentEl,nextSiblingEl)}else{parentEl.appendChild(contentEl)}return this};ModalDialog.prototype.empty=function empty(){this.trigger("beforemodalempty");Dom.emptyEl(this.contentEl());this.trigger("modalempty");return this};ModalDialog.prototype.content=function content(value){if(typeof value!=="undefined"){this.content_=value}return this.content_};return ModalDialog}(_component2["default"]);ModalDialog.prototype.options_={pauseOnOpen:true,temporary:true};_component2["default"].registerComponent("ModalDialog",ModalDialog);exports["default"]=ModalDialog},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _htmlTrackElement=__webpack_require__(247);var _htmlTrackElement2=_interopRequireDefault(_htmlTrackElement);var _htmlTrackElementList=__webpack_require__(261);var _htmlTrackElementList2=_interopRequireDefault(_htmlTrackElementList);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);var _textTrack=__webpack_require__(248);var _textTrack2=_interopRequireDefault(_textTrack);var _textTrackList=__webpack_require__(262);var _textTrackList2=_interopRequireDefault(_textTrackList);var _videoTrackList=__webpack_require__(264);var _videoTrackList2=_interopRequireDefault(_videoTrackList);var _audioTrackList=__webpack_require__(265);var _audioTrackList2=_interopRequireDefault(_audioTrackList);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _timeRanges=__webpack_require__(239);var _buffer=__webpack_require__(240);var _mediaError=__webpack_require__(242);var _mediaError2=_interopRequireDefault(_mediaError);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _obj=__webpack_require__(228);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,
configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function createTrackHelper(self,kind,label,language){var options=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var tracks=self.textTracks();options.kind=kind;if(label){options.label=label}if(language){options.language=language}options.tech=self;var track=new _textTrack2["default"](options);tracks.addTrack_(track);return track}var Tech=function(_Component){_inherits(Tech,_Component);function Tech(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var ready=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};_classCallCheck(this,Tech);options.reportTouchActivity=false;var _this=_possibleConstructorReturn(this,_Component.call(this,null,options,ready));_this.hasStarted_=false;_this.on("playing",function(){this.hasStarted_=true});_this.on("loadstart",function(){this.hasStarted_=false});_this.textTracks_=options.textTracks;_this.videoTracks_=options.videoTracks;_this.audioTracks_=options.audioTracks;if(!_this.featuresProgressEvents){_this.manualProgressOn()}if(!_this.featuresTimeupdateEvents){_this.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach(function(track){if(options["native"+track+"Tracks"]===false){_this["featuresNative"+track+"Tracks"]=false}});if(options.nativeCaptions===false){_this.featuresNativeTextTracks=false}if(!_this.featuresNativeTextTracks){_this.emulateTextTracks()}_this.autoRemoteTextTracks_=new _textTrackList2["default"];_this.initTextTrackListeners();_this.initTrackListeners();if(!options.nativeControlsForTouch){_this.emitTapEvents()}if(_this.constructor){_this.name_=_this.constructor.name||"Unknown Tech"}return _this}Tech.prototype.manualProgressOn=function manualProgressOn(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};Tech.prototype.manualProgressOff=function manualProgressOff(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};Tech.prototype.trackProgress=function trackProgress(event){this.stopTrackingProgress();this.progressInterval=this.setInterval(Fn.bind(this,function(){var numBufferedPercent=this.bufferedPercent();if(this.bufferedPercent_!==numBufferedPercent){this.trigger("progress")}this.bufferedPercent_=numBufferedPercent;if(numBufferedPercent===1){this.stopTrackingProgress()}}),500)};Tech.prototype.onDurationChange=function onDurationChange(event){this.duration_=this.duration()};Tech.prototype.buffered=function buffered(){return(0,_timeRanges.createTimeRange)(0,0)};Tech.prototype.bufferedPercent=function bufferedPercent(){return(0,_buffer.bufferedPercent)(this.buffered(),this.duration_)};Tech.prototype.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval)};Tech.prototype.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};Tech.prototype.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};Tech.prototype.trackCurrentTime=function trackCurrentTime(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})},250)};Tech.prototype.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};Tech.prototype.dispose=function dispose(){this.clearTracks(["audio","video","text"]);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}_Component.prototype.dispose.call(this)};Tech.prototype.clearTracks=function clearTracks(types){var _this2=this;types=[].concat(types);types.forEach(function(type){var list=_this2[type+"Tracks"]()||[];var i=list.length;while(i--){var track=list[i];if(type==="text"){_this2.removeRemoteTextTrack(track)}list.removeTrack_(track)}})};Tech.prototype.cleanupAutoTextTracks=function cleanupAutoTextTracks(){var list=this.autoRemoteTextTracks_||[];var i=list.length;while(i--){var track=list[i];this.removeRemoteTextTrack(track)}};Tech.prototype.reset=function reset(){};Tech.prototype.error=function error(err){if(err!==undefined){this.error_=new _mediaError2["default"](err);this.trigger("error")}return this.error_};Tech.prototype.played=function played(){if(this.hasStarted_){return(0,_timeRanges.createTimeRange)(0,0)}return(0,_timeRanges.createTimeRange)()};Tech.prototype.setCurrentTime=function setCurrentTime(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};Tech.prototype.initTextTrackListeners=function initTextTrackListeners(){var textTrackListChanges=Fn.bind(this,function(){this.trigger("texttrackchange")});var tracks=this.textTracks();if(!tracks){return}tracks.addEventListener("removetrack",textTrackListChanges);tracks.addEventListener("addtrack",textTrackListChanges);this.on("dispose",Fn.bind(this,function(){tracks.removeEventListener("removetrack",textTrackListChanges);tracks.removeEventListener("addtrack",textTrackListChanges)}))};Tech.prototype.initTrackListeners=function initTrackListeners(){var _this3=this;var trackTypes=["video","audio"];trackTypes.forEach(function(type){var trackListChanges=function trackListChanges(){_this3.trigger(type+"trackchange")};var tracks=_this3[type+"Tracks"]();tracks.addEventListener("removetrack",trackListChanges);tracks.addEventListener("addtrack",trackListChanges);_this3.on("dispose",function(){tracks.removeEventListener("removetrack",trackListChanges);tracks.removeEventListener("addtrack",trackListChanges)})})};Tech.prototype.addWebVttScript_=function addWebVttScript_(){var _this4=this;if(_window2["default"].WebVTT){return}if(_document2["default"].body.contains(this.el())){var vtt=__webpack_require__(266);if(!this.options_["vtt.js"]&&(0,_obj.isPlain)(vtt)&&Object.keys(vtt).length>0){this.trigger("vttjsloaded");return}var script=_document2["default"].createElement("script");script.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js";script.onload=function(){_this4.trigger("vttjsloaded")};script.onerror=function(){_this4.trigger("vttjserror")};this.on("dispose",function(){script.onload=null;script.onerror=null});_window2["default"].WebVTT=true;this.el().parentNode.appendChild(script)}else{this.ready(this.addWebVttScript_)}};Tech.prototype.emulateTextTracks=function emulateTextTracks(){var _this5=this;var tracks=this.textTracks();if(!tracks){return}var remoteTracks=this.remoteTextTracks();var handleAddTrack=function handleAddTrack(e){return tracks.addTrack_(e.track)};var handleRemoveTrack=function handleRemoveTrack(e){return tracks.removeTrack_(e.track)};remoteTracks.on("addtrack",handleAddTrack);remoteTracks.on("removetrack",handleRemoveTrack);this.addWebVttScript_();var updateDisplay=function updateDisplay(){return _this5.trigger("texttrackchange")};var textTracksChanges=function textTracksChanges(){updateDisplay();for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener("cuechange",updateDisplay);if(track.mode==="showing"){track.addEventListener("cuechange",updateDisplay)}}};textTracksChanges();tracks.addEventListener("change",textTracksChanges);tracks.addEventListener("addtrack",textTracksChanges);tracks.addEventListener("removetrack",textTracksChanges);this.on("dispose",function(){remoteTracks.off("addtrack",handleAddTrack);remoteTracks.off("removetrack",handleRemoveTrack);tracks.removeEventListener("change",textTracksChanges);tracks.removeEventListener("addtrack",textTracksChanges);tracks.removeEventListener("removetrack",textTracksChanges);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener("cuechange",updateDisplay)}})};Tech.prototype.videoTracks=function videoTracks(){this.videoTracks_=this.videoTracks_||new _videoTrackList2["default"];return this.videoTracks_};Tech.prototype.audioTracks=function audioTracks(){this.audioTracks_=this.audioTracks_||new _audioTrackList2["default"];return this.audioTracks_};Tech.prototype.textTracks=function textTracks(){this.textTracks_=this.textTracks_||new _textTrackList2["default"];return this.textTracks_};Tech.prototype.remoteTextTracks=function remoteTextTracks(){this.remoteTextTracks_=this.remoteTextTracks_||new _textTrackList2["default"];return this.remoteTextTracks_};Tech.prototype.remoteTextTrackEls=function remoteTextTrackEls(){this.remoteTextTrackEls_=this.remoteTextTrackEls_||new _htmlTrackElementList2["default"];return this.remoteTextTrackEls_};Tech.prototype.addTextTrack=function addTextTrack(kind,label,language){if(!kind){throw new Error("TextTrack kind is required but was not provided")}return createTrackHelper(this,kind,label,language)};Tech.prototype.createRemoteTextTrack=function createRemoteTextTrack(options){var track=(0,_mergeOptions2["default"])(options,{tech:this});return new _htmlTrackElement2["default"](track)};Tech.prototype.addRemoteTextTrack=function addRemoteTextTrack(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var manualCleanup=arguments[1];var htmlTrackElement=this.createRemoteTextTrack(options);if(manualCleanup!==true&&manualCleanup!==false){_log2["default"].warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');manualCleanup=true}this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);this.remoteTextTracks().addTrack_(htmlTrackElement.track);if(manualCleanup!==true){this.autoRemoteTextTracks_.addTrack_(htmlTrackElement.track)}return htmlTrackElement};Tech.prototype.removeRemoteTextTrack=function removeRemoteTextTrack(track){var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);this.remoteTextTrackEls().removeTrackElement_(trackElement);this.remoteTextTracks().removeTrack_(track);this.autoRemoteTextTracks_.removeTrack_(track)};Tech.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{}};Tech.prototype.setPoster=function setPoster(){};Tech.prototype.playsinline=function playsinline(){};Tech.prototype.setPlaysinline=function setPlaysinline(){};Tech.prototype.canPlayType=function canPlayType(){return""};Tech.isTech=function isTech(component){return component.prototype instanceof Tech||component instanceof Tech||component===Tech};Tech.registerTech=function registerTech(name,tech){if(!Tech.techs_){Tech.techs_={}}if(!Tech.isTech(tech)){throw new Error("Tech "+name+" must be a Tech")}Tech.techs_[name]=tech;return tech};Tech.getTech=function getTech(name){if(Tech.techs_&&Tech.techs_[name]){return Tech.techs_[name]}if(_window2["default"]&&_window2["default"].videojs&&_window2["default"].videojs[name]){_log2["default"].warn("The "+name+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return _window2["default"].videojs[name]}};return Tech}(_component2["default"]);Tech.prototype.featuresVolumeControl=true;Tech.prototype.featuresFullscreenResize=false;Tech.prototype.featuresPlaybackRate=false;Tech.prototype.featuresProgressEvents=false;Tech.prototype.featuresTimeupdateEvents=false;Tech.prototype.featuresNativeTextTracks=false;Tech.withSourceHandlers=function(_Tech){_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;if(!handlers){handlers=_Tech.sourceHandlers=[]}if(index===undefined){index=handlers.length}handlers.splice(index,0,handler)};_Tech.canPlayType=function(type){var handlers=_Tech.sourceHandlers||[];var can=void 0;for(var i=0;i<handlers.length;i++){can=handlers[i].canPlayType(type);if(can){return can}}return""};_Tech.selectSourceHandler=function(source,options){var handlers=_Tech.sourceHandlers||[];var can=void 0;for(var i=0;i<handlers.length;i++){can=handlers[i].canHandleSource(source,options);if(can){return handlers[i]}}return null};_Tech.canPlaySource=function(srcObj,options){var sh=_Tech.selectSourceHandler(srcObj,options);if(sh){return sh.canHandleSource(srcObj,options)}return""};var deferrable=["seekable","duration"];deferrable.forEach(function(fnName){var originalFn=this[fnName];if(typeof originalFn!=="function"){return}this[fnName]=function(){if(this.sourceHandler_&&this.sourceHandler_[fnName]){return this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments)}return originalFn.apply(this,arguments)}},_Tech.prototype);_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source,this.options_);if(!sh){if(_Tech.nativeSourceHandler){sh=_Tech.nativeSourceHandler}else{_log2["default"].error("No source hander found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(sh!==_Tech.nativeSourceHandler){this.currentSource_=source;this.off(this.el_,"loadstart",_Tech.prototype.firstLoadStartListener_);this.off(this.el_,"loadstart",_Tech.prototype.successiveLoadStartListener_);this.one(this.el_,"loadstart",_Tech.prototype.firstLoadStartListener_)}this.sourceHandler_=sh.handleSource(source,this,this.options_);this.on("dispose",this.disposeSourceHandler);return this};_Tech.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",_Tech.prototype.successiveLoadStartListener_)};_Tech.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler();this.one(this.el_,"loadstart",_Tech.prototype.successiveLoadStartListener_)};_Tech.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){this.off(this.el_,"loadstart",_Tech.prototype.firstLoadStartListener_);this.off(this.el_,"loadstart",_Tech.prototype.successiveLoadStartListener_);if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};_component2["default"].registerComponent("Tech",Tech);_component2["default"].registerComponent("MediaTechController",Tech);Tech.registerTech("Tech",Tech);exports["default"]=Tech},function(module,exports,__webpack_require__){exports.__esModule=true;var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _eventTarget=__webpack_require__(237);var _eventTarget2=_interopRequireDefault(_eventTarget);var _textTrack=__webpack_require__(248);var _textTrack2=_interopRequireDefault(_textTrack);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NONE=0;var LOADING=1;var LOADED=2;var ERROR=3;var HTMLTrackElement=function(_EventTarget){_inherits(HTMLTrackElement,_EventTarget);function HTMLTrackElement(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,HTMLTrackElement);var _this=_possibleConstructorReturn(this,_EventTarget.call(this));var readyState=void 0;var trackElement=_this;if(browser.IS_IE8){trackElement=_document2["default"].createElement("custom");for(var prop in HTMLTrackElement.prototype){if(prop!=="constructor"){trackElement[prop]=HTMLTrackElement.prototype[prop]}}}var track=new _textTrack2["default"](options);trackElement.kind=track.kind;trackElement.src=track.src;trackElement.srclang=track.language;trackElement.label=track.label;trackElement["default"]=track["default"];Object.defineProperty(trackElement,"readyState",{get:function get(){return readyState}});Object.defineProperty(trackElement,"track",{get:function get(){return track}});readyState=NONE;track.addEventListener("loadeddata",function(){readyState=LOADED;trackElement.trigger({type:"load",target:trackElement})});if(browser.IS_IE8){var _ret;return _ret=trackElement,_possibleConstructorReturn(_this,_ret)}return _this}return HTMLTrackElement}(_eventTarget2["default"]);HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=NONE;HTMLTrackElement.LOADING=LOADING;HTMLTrackElement.LOADED=LOADED;HTMLTrackElement.ERROR=ERROR;exports["default"]=HTMLTrackElement},function(module,exports,__webpack_require__){exports.__esModule=true;var _textTrackCueList=__webpack_require__(249);var _textTrackCueList2=_interopRequireDefault(_textTrackCueList);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _trackEnums=__webpack_require__(250);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _track=__webpack_require__(251);var _track2=_interopRequireDefault(_track);var _url=__webpack_require__(252);var _xhr=__webpack_require__(253);var _xhr2=_interopRequireDefault(_xhr);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var parseCues=function parseCues(srcContent,track){var parser=new _window2["default"].WebVTT.Parser(_window2["default"],_window2["default"].vttjs,_window2["default"].WebVTT.StringDecoder());var errors=[];parser.oncue=function(cue){track.addCue(cue)};parser.onparsingerror=function(error){errors.push(error)};parser.onflush=function(){track.trigger({type:"loadeddata",target:track})};parser.parse(srcContent);if(errors.length>0){if(_window2["default"].console&&_window2["default"].console.groupCollapsed){_window2["default"].console.groupCollapsed("Text Track parsing errors for "+track.src)}errors.forEach(function(error){return _log2["default"].error(error)});if(_window2["default"].console&&_window2["default"].console.groupEnd){_window2["default"].console.groupEnd()}}parser.flush()};var loadTrack=function loadTrack(src,track){var opts={uri:src};var crossOrigin=(0,_url.isCrossOrigin)(src);if(crossOrigin){opts.cors=crossOrigin}(0,_xhr2["default"])(opts,Fn.bind(this,function(err,response,responseBody){if(err){return _log2["default"].error(err,response)}track.loaded_=true;if(typeof _window2["default"].WebVTT!=="function"){if(track.tech_){var loadHandler=function loadHandler(){return parseCues(responseBody,track)};track.tech_.on("vttjsloaded",loadHandler);track.tech_.on("vttjserror",function(){_log2["default"].error("vttjs failed to load, stopping trying to process "+track.src);track.tech_.off("vttjsloaded",loadHandler)})}}else{parseCues(responseBody,track)}}))};var TextTrack=function(_Track){_inherits(TextTrack,_Track);function TextTrack(){var _this,_ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,TextTrack);if(!options.tech){throw new Error("A tech was not provided.")}var settings=(0,_mergeOptions2["default"])(options,{kind:_trackEnums.TextTrackKind[options.kind]||"subtitles",language:options.language||options.srclang||""});var mode=_trackEnums.TextTrackMode[settings.mode]||"disabled";var default_=settings["default"];if(settings.kind==="metadata"||settings.kind==="chapters"){mode="hidden"}var tt=(_this=_possibleConstructorReturn(this,_Track.call(this,settings)),_this);tt.tech_=settings.tech;if(browser.IS_IE8){for(var prop in TextTrack.prototype){if(prop!=="constructor"){tt[prop]=TextTrack.prototype[prop]}}}tt.cues_=[];tt.activeCues_=[];var cues=new _textTrackCueList2["default"](tt.cues_);var activeCues=new _textTrackCueList2["default"](tt.activeCues_);var changed=false;var timeupdateHandler=Fn.bind(tt,function(){this.activeCues;if(changed){this.trigger("cuechange");changed=false}});if(mode!=="disabled"){tt.tech_.ready(function(){tt.tech_.on("timeupdate",timeupdateHandler)},true)}Object.defineProperty(tt,"default",{get:function get(){return default_},set:function set(){}});Object.defineProperty(tt,"mode",{get:function get(){return mode},set:function set(newMode){var _this2=this;if(!_trackEnums.TextTrackMode[newMode]){return}mode=newMode;if(mode==="showing"){this.tech_.ready(function(){_this2.tech_.on("timeupdate",timeupdateHandler)},true)}this.trigger("modechange")}});Object.defineProperty(tt,"cues",{get:function get(){if(!this.loaded_){return null}return cues},set:function set(){}});Object.defineProperty(tt,"activeCues",{get:function get(){if(!this.loaded_){return null}if(this.cues.length===0){return activeCues}var ct=this.tech_.currentTime();var active=[];for(var i=0,l=this.cues.length;i<l;i++){var cue=this.cues[i];if(cue.startTime<=ct&&cue.endTime>=ct){active.push(cue)}else if(cue.startTime===cue.endTime&&cue.startTime<=ct&&cue.startTime+.5>=ct){active.push(cue)}}changed=false;if(active.length!==this.activeCues_.length){changed=true}else{for(var _i=0;_i<active.length;_i++){if(this.activeCues_.indexOf(active[_i])===-1){changed=true}}}this.activeCues_=active;activeCues.setCues_(this.activeCues_);return activeCues},set:function set(){}});if(settings.src){tt.src=settings.src;loadTrack(settings.src,tt)}else{tt.loaded_=true}return _ret=tt,_possibleConstructorReturn(_this,_ret)}TextTrack.prototype.addCue=function addCue(originalCue){var cue=originalCue;if(_window2["default"].vttjs&&!(originalCue instanceof _window2["default"].vttjs.VTTCue)){cue=new _window2["default"].vttjs.VTTCue(originalCue.startTime,originalCue.endTime,originalCue.text);for(var prop in originalCue){if(!(prop in cue)){cue[prop]=originalCue[prop]}}cue.id=originalCue.id;cue.originalCue_=originalCue}var tracks=this.tech_.textTracks();if(tracks){for(var i=0;i<tracks.length;i++){if(tracks[i]!==this){tracks[i].removeCue(cue)}}}this.cues_.push(cue);this.cues.setCues_(this.cues_)};TextTrack.prototype.removeCue=function removeCue(_removeCue){var i=this.cues_.length;while(i--){var cue=this.cues_[i];if(cue===_removeCue||cue.originalCue_&&cue.originalCue_===_removeCue){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break}}};return TextTrack}(_track2["default"]);TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};exports["default"]=TextTrack},function(module,exports,__webpack_require__){exports.__esModule=true;var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var TextTrackCueList=function(){function TextTrackCueList(cues){_classCallCheck(this,TextTrackCueList);var list=this;if(browser.IS_IE8){list=_document2["default"].createElement("custom");for(var prop in TextTrackCueList.prototype){if(prop!=="constructor"){list[prop]=TextTrackCueList.prototype[prop]}}}TextTrackCueList.prototype.setCues_.call(list,cues);Object.defineProperty(list,"length",{get:function get(){return this.length_}});if(browser.IS_IE8){return list}}TextTrackCueList.prototype.setCues_=function setCues_(cues){var oldLength=this.length||0;var i=0;var l=cues.length;this.cues_=cues;this.length_=cues.length;var defineProp=function defineProp(index){if(!(""+index in this)){Object.defineProperty(this,""+index,{get:function get(){return this.cues_[index]}})}};if(oldLength<l){i=oldLength;for(;i<l;i++){defineProp.call(this,i)}}};TextTrackCueList.prototype.getCueById=function getCueById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var cue=this[i];if(cue.id===id){result=cue;break}}return result};return TextTrackCueList}();exports["default"]=TextTrackCueList},function(module,exports){exports.__esModule=true;var VideoTrackKind=exports.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var AudioTrackKind=exports.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var TextTrackKind=exports.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var TextTrackMode=exports.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},function(module,exports,__webpack_require__){exports.__esModule=true;var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _guid=__webpack_require__(226);var Guid=_interopRequireWildcard(_guid);var _eventTarget=__webpack_require__(237);var _eventTarget2=_interopRequireDefault(_eventTarget);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Track=function(_EventTarget){_inherits(Track,_EventTarget);function Track(){var _ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Track);var _this=_possibleConstructorReturn(this,_EventTarget.call(this));var track=_this;if(browser.IS_IE8){track=_document2["default"].createElement("custom");for(var prop in Track.prototype){if(prop!=="constructor"){track[prop]=Track.prototype[prop]}}}var trackProps={id:options.id||"vjs_track_"+Guid.newGUID(),kind:options.kind||"",label:options.label||"",language:options.language||""};var _loop=function _loop(key){Object.defineProperty(track,key,{get:function get(){return trackProps[key]},set:function set(){}})};for(var key in trackProps){_loop(key)}return _ret=track,_possibleConstructorReturn(_this,_ret)}return Track}(_eventTarget2["default"]);exports["default"]=Track},function(module,exports,__webpack_require__){exports.__esModule=true;exports.isCrossOrigin=exports.getFileExtension=exports.getAbsoluteURL=exports.parseUrl=undefined;var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var parseUrl=exports.parseUrl=function parseUrl(url){var props=["protocol","hostname","port","pathname","search","hash","host"];var a=_document2["default"].createElement("a");a.href=url;var addToBody=a.host===""&&a.protocol!=="file:";var div=void 0;if(addToBody){div=_document2["default"].createElement("div");div.innerHTML='<a href="'+url+'"></a>';a=div.firstChild;div.setAttribute("style","display:none; position:absolute;");_document2["default"].body.appendChild(div)}var details={};for(var i=0;i<props.length;i++){details[props[i]]=a[props[i]]}if(details.protocol==="http:"){details.host=details.host.replace(/:80$/,"")}if(details.protocol==="https:"){details.host=details.host.replace(/:443$/,"")}if(addToBody){_document2["default"].body.removeChild(div)}return details};var getAbsoluteURL=exports.getAbsoluteURL=function getAbsoluteURL(url){if(!url.match(/^https?:\/\//)){var div=_document2["default"].createElement("div");div.innerHTML='<a href="'+url+'">x</a>';url=div.firstChild.href}return url};var getFileExtension=exports.getFileExtension=function getFileExtension(path){if(typeof path==="string"){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var pathParts=splitPathRe.exec(path);if(pathParts){return pathParts.pop().toLowerCase()}}return""};var isCrossOrigin=exports.isCrossOrigin=function isCrossOrigin(url){var winLoc=_window2["default"].location;var urlInfo=parseUrl(url);var srcProtocol=urlInfo.protocol===":"?winLoc.protocol:urlInfo.protocol;var crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin}},function(module,exports,__webpack_require__){var window=__webpack_require__(254);var isFunction=__webpack_require__(255);var parseHeaders=__webpack_require__(256);var xtend=__webpack_require__(260);module.exports=createXHR;createXHR.XMLHttpRequest=window.XMLHttpRequest||noop;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window.XDomainRequest;forEachArray(["get","put","post","patch","head","delete"],function(method){createXHR[method==="delete"?"del":method]=function(uri,options,callback){options=initParams(uri,options,callback);options.method=method.toUpperCase();return _createXHR(options);
}});function forEachArray(array,iterator){for(var i=0;i<array.length;i++){iterator(array[i])}}function isEmpty(obj){for(var i in obj){if(obj.hasOwnProperty(i))return false}return true}function initParams(uri,options,callback){var params=uri;if(isFunction(options)){callback=options;if(typeof uri==="string"){params={uri:uri}}}else{params=xtend(options,{uri:uri})}params.callback=callback;return params}function createXHR(uri,options,callback){options=initParams(uri,options,callback);return _createXHR(options)}function _createXHR(options){if(typeof options.callback==="undefined"){throw new Error("callback argument missing")}var called=false;var callback=function cbOnce(err,response,body){if(!called){called=true;options.callback(err,response,body)}};function readystatechange(){if(xhr.readyState===4){loadFunc()}}function getBody(){var body=undefined;if(xhr.response){body=xhr.response}else{body=xhr.responseText||getXml(xhr)}if(isJson){try{body=JSON.parse(body)}catch(e){}}return body}var failureResponse={body:undefined,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr};function errorFunc(evt){clearTimeout(timeoutTimer);if(!(evt instanceof Error)){evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"))}evt.statusCode=0;return callback(evt,failureResponse)}function loadFunc(){if(aborted)return;var status;clearTimeout(timeoutTimer);if(options.useXDR&&xhr.status===undefined){status=200}else{status=xhr.status===1223?204:xhr.status}var response=failureResponse;var err=null;if(status!==0){response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr};if(xhr.getAllResponseHeaders){response.headers=parseHeaders(xhr.getAllResponseHeaders())}}else{err=new Error("Internal XMLHttpRequest Error")}return callback(err,response,response.body)}var xhr=options.xhr||null;if(!xhr){if(options.cors||options.useXDR){xhr=new createXHR.XDomainRequest}else{xhr=new createXHR.XMLHttpRequest}}var key;var aborted;var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data||null;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var timeoutTimer;if("json"in options){isJson=true;headers["accept"]||headers["Accept"]||(headers["Accept"]="application/json");if(method!=="GET"&&method!=="HEAD"){headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json");body=JSON.stringify(options.json)}}xhr.onreadystatechange=readystatechange;xhr.onload=loadFunc;xhr.onerror=errorFunc;xhr.onprogress=function(){};xhr.ontimeout=errorFunc;xhr.open(method,uri,!sync,options.username,options.password);if(!sync){xhr.withCredentials=!!options.withCredentials}if(!sync&&options.timeout>0){timeoutTimer=setTimeout(function(){aborted=true;xhr.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";errorFunc(e)},options.timeout)}if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key])}}}else if(options.headers&&!isEmpty(options.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in options){xhr.responseType=options.responseType}if("beforeSend"in options&&typeof options.beforeSend==="function"){options.beforeSend(xhr)}xhr.send(body);return xhr}function getXml(xhr){if(xhr.responseType==="document"){return xhr.responseXML}var firefoxBugTakenEffect=xhr.status===204&&xhr.responseXML&&xhr.responseXML.documentElement.nodeName==="parsererror";if(xhr.responseType===""&&!firefoxBugTakenEffect){return xhr.responseXML}return null}function noop(){}},function(module,exports){(function(global){var win;if(typeof window!=="undefined"){win=window}else if(typeof global!=="undefined"){win=global}else if(typeof self!=="undefined"){win=self}else{win={}}module.exports=win}).call(exports,function(){return this}())},function(module,exports){module.exports=isFunction;var toString=Object.prototype.toString;function isFunction(fn){var string=toString.call(fn);return string==="[object Function]"||typeof fn==="function"&&string!=="[object RegExp]"||typeof window!=="undefined"&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}},function(module,exports,__webpack_require__){var trim=__webpack_require__(257),forEach=__webpack_require__(258),isArray=function isArray(arg){return Object.prototype.toString.call(arg)==="[object Array]"};module.exports=function(headers){if(!headers)return{};var result={};forEach(trim(headers).split("\n"),function(row){var index=row.indexOf(":"),key=trim(row.slice(0,index)).toLowerCase(),value=trim(row.slice(index+1));if(typeof result[key]==="undefined"){result[key]=value}else if(isArray(result[key])){result[key].push(value)}else{result[key]=[result[key],value]}});return result}},function(module,exports){exports=module.exports=trim;function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports.left=function(str){return str.replace(/^\s*/,"")};exports.right=function(str){return str.replace(/\s*$/,"")}},function(module,exports,__webpack_require__){var isCallable=__webpack_require__(259);var toStr=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var forEachArray=function forEachArray(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++){if(hasOwnProperty.call(array,i)){if(receiver==null){iterator(array[i],i,array)}else{iterator.call(receiver,array[i],i,array)}}}};var forEachString=function forEachString(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++){if(receiver==null){iterator(string.charAt(i),i,string)}else{iterator.call(receiver,string.charAt(i),i,string)}}};var forEachObject=function forEachObject(object,iterator,receiver){for(var k in object){if(hasOwnProperty.call(object,k)){if(receiver==null){iterator(object[k],k,object)}else{iterator.call(receiver,object[k],k,object)}}}};var forEach=function forEach(list,iterator,thisArg){if(!isCallable(iterator)){throw new TypeError("iterator must be a function")}var receiver;if(arguments.length>=3){receiver=thisArg}if(toStr.call(list)==="[object Array]"){forEachArray(list,iterator,receiver)}else if(typeof list==="string"){forEachString(list,iterator,receiver)}else{forEachObject(list,iterator,receiver)}};module.exports=forEach},function(module,exports){var fnToStr=Function.prototype.toString;var constructorRegex=/^\s*class\b/;var isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return false}};var tryFunctionObject=function tryFunctionToStr(value){try{if(isES6ClassFn(value)){return false}fnToStr.call(value);return true}catch(e){return false}};var toStr=Object.prototype.toString;var fnClass="[object Function]";var genClass="[object GeneratorFunction]";var hasToStringTag=typeof Symbol==="function"&&_typeof2(Symbol.toStringTag)==="symbol";module.exports=function isCallable(value){if(!value){return false}if(typeof value!=="function"&&(typeof value==="undefined"?"undefined":_typeof2(value))!=="object"){return false}if(typeof value==="function"&&!value.prototype){return true}if(hasToStringTag){return tryFunctionObject(value)}if(isES6ClassFn(value)){return false}var strClass=toStr.call(value);return strClass===fnClass||strClass===genClass}},function(module,exports){module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target}},function(module,exports,__webpack_require__){exports.__esModule=true;var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var HtmlTrackElementList=function(){function HtmlTrackElementList(){var trackElements=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,HtmlTrackElementList);var list=this;if(browser.IS_IE8){list=_document2["default"].createElement("custom");for(var prop in HtmlTrackElementList.prototype){if(prop!=="constructor"){list[prop]=HtmlTrackElementList.prototype[prop]}}}list.trackElements_=[];Object.defineProperty(list,"length",{get:function get(){return this.trackElements_.length}});for(var i=0,length=trackElements.length;i<length;i++){list.addTrackElement_(trackElements[i])}if(browser.IS_IE8){return list}}HtmlTrackElementList.prototype.addTrackElement_=function addTrackElement_(trackElement){var index=this.trackElements_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get(){return this.trackElements_[index]}})}if(this.trackElements_.indexOf(trackElement)===-1){this.trackElements_.push(trackElement)}};HtmlTrackElementList.prototype.getTrackElementByTrack_=function getTrackElementByTrack_(track){var trackElement_=void 0;for(var i=0,length=this.trackElements_.length;i<length;i++){if(track===this.trackElements_[i].track){trackElement_=this.trackElements_[i];break}}return trackElement_};HtmlTrackElementList.prototype.removeTrackElement_=function removeTrackElement_(trackElement){for(var i=0,length=this.trackElements_.length;i<length;i++){if(trackElement===this.trackElements_[i]){this.trackElements_.splice(i,1);break}}};return HtmlTrackElementList}();exports["default"]=HtmlTrackElementList},function(module,exports,__webpack_require__){exports.__esModule=true;var _trackList=__webpack_require__(263);var _trackList2=_interopRequireDefault(_trackList);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TextTrackList=function(_TrackList){_inherits(TextTrackList,_TrackList);function TextTrackList(){var _this,_ret;var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,TextTrackList);var list=void 0;if(browser.IS_IE8){list=_document2["default"].createElement("custom");for(var prop in _trackList2["default"].prototype){if(prop!=="constructor"){list[prop]=_trackList2["default"].prototype[prop]}}for(var _prop in TextTrackList.prototype){if(_prop!=="constructor"){list[_prop]=TextTrackList.prototype[_prop]}}}list=(_this=_possibleConstructorReturn(this,_TrackList.call(this,tracks,list)),_this);return _ret=list,_possibleConstructorReturn(_this,_ret)}TextTrackList.prototype.addTrack_=function addTrack_(track){_TrackList.prototype.addTrack_.call(this,track);track.addEventListener("modechange",Fn.bind(this,function(){this.trigger("change")}))};return TextTrackList}(_trackList2["default"]);exports["default"]=TextTrackList},function(module,exports,__webpack_require__){exports.__esModule=true;var _eventTarget=__webpack_require__(237);var _eventTarget2=_interopRequireDefault(_eventTarget);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TrackList=function(_EventTarget){_inherits(TrackList,_EventTarget);function TrackList(){var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var _ret;var list=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,TrackList);var _this=_possibleConstructorReturn(this,_EventTarget.call(this));if(!list){list=_this;if(browser.IS_IE8){list=_document2["default"].createElement("custom");for(var prop in TrackList.prototype){if(prop!=="constructor"){list[prop]=TrackList.prototype[prop]}}}}list.tracks_=[];Object.defineProperty(list,"length",{get:function get(){return this.tracks_.length}});for(var i=0;i<tracks.length;i++){list.addTrack_(tracks[i])}return _ret=list,_possibleConstructorReturn(_this,_ret)}TrackList.prototype.addTrack_=function addTrack_(track){var index=this.tracks_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get(){return this.tracks_[index]}})}if(this.tracks_.indexOf(track)===-1){this.tracks_.push(track);this.trigger({track:track,type:"addtrack"})}};TrackList.prototype.removeTrack_=function removeTrack_(rtrack){var track=void 0;for(var i=0,l=this.length;i<l;i++){if(this[i]===rtrack){track=this[i];if(track.off){track.off()}this.tracks_.splice(i,1);break}}if(!track){return}this.trigger({track:track,type:"removetrack"})};TrackList.prototype.getTrackById=function getTrackById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var track=this[i];if(track.id===id){result=track;break}}return result};return TrackList}(_eventTarget2["default"]);TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var event in TrackList.prototype.allowedEvents_){TrackList.prototype["on"+event]=null}exports["default"]=TrackList},function(module,exports,__webpack_require__){exports.__esModule=true;var _trackList=__webpack_require__(263);var _trackList2=_interopRequireDefault(_trackList);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var disableOthers=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(track.id===list[i].id){continue}list[i].selected=false}};var VideoTrackList=function(_TrackList){_inherits(VideoTrackList,_TrackList);function VideoTrackList(){var _this,_ret;var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,VideoTrackList);var list=void 0;for(var i=tracks.length-1;i>=0;i--){if(tracks[i].selected){disableOthers(tracks,tracks[i]);break}}if(browser.IS_IE8){list=_document2["default"].createElement("custom");for(var prop in _trackList2["default"].prototype){if(prop!=="constructor"){list[prop]=_trackList2["default"].prototype[prop]}}for(var _prop in VideoTrackList.prototype){if(_prop!=="constructor"){list[_prop]=VideoTrackList.prototype[_prop]}}}list=(_this=_possibleConstructorReturn(this,_TrackList.call(this,tracks,list)),_this);list.changing_=false;Object.defineProperty(list,"selectedIndex",{get:function get(){for(var _i=0;_i<this.length;_i++){if(this[_i].selected){return _i}}return-1},set:function set(){}});return _ret=list,_possibleConstructorReturn(_this,_ret)}VideoTrackList.prototype.addTrack_=function addTrack_(track){var _this2=this;if(track.selected){disableOthers(this,track)}_TrackList.prototype.addTrack_.call(this,track);if(!track.addEventListener){return}track.addEventListener("selectedchange",function(){if(_this2.changing_){return}_this2.changing_=true;disableOthers(_this2,track);_this2.changing_=false;_this2.trigger("change")})};VideoTrackList.prototype.addTrack=function addTrack(track){this.addTrack_(track)};VideoTrackList.prototype.removeTrack=function removeTrack(track){_TrackList.prototype.removeTrack_.call(this,track)};return VideoTrackList}(_trackList2["default"]);exports["default"]=VideoTrackList},function(module,exports,__webpack_require__){exports.__esModule=true;var _trackList=__webpack_require__(263);var _trackList2=_interopRequireDefault(_trackList);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var disableOthers=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(track.id===list[i].id){continue}list[i].enabled=false}};var AudioTrackList=function(_TrackList){_inherits(AudioTrackList,_TrackList);function AudioTrackList(){var _this,_ret;var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,AudioTrackList);var list=void 0;for(var i=tracks.length-1;i>=0;i--){if(tracks[i].enabled){disableOthers(tracks,tracks[i]);break}}if(browser.IS_IE8){list=_document2["default"].createElement("custom");for(var prop in _trackList2["default"].prototype){if(prop!=="constructor"){list[prop]=_trackList2["default"].prototype[prop]}}for(var _prop in AudioTrackList.prototype){if(_prop!=="constructor"){list[_prop]=AudioTrackList.prototype[_prop]}}}list=(_this=_possibleConstructorReturn(this,_TrackList.call(this,tracks,list)),_this);list.changing_=false;return _ret=list,_possibleConstructorReturn(_this,_ret)}AudioTrackList.prototype.addTrack_=function addTrack_(track){var _this2=this;if(track.enabled){disableOthers(this,track)}_TrackList.prototype.addTrack_.call(this,track);if(!track.addEventListener){return}track.addEventListener("enabledchange",function(){if(_this2.changing_){return}_this2.changing_=true;disableOthers(_this2,track);_this2.changing_=false;_this2.trigger("change")})};AudioTrackList.prototype.addTrack=function addTrack(track){this.addTrack_(track)};AudioTrackList.prototype.removeTrack=function removeTrack(track){_TrackList.prototype.removeTrack_.call(this,track)};return AudioTrackList}(_trackList2["default"]);exports["default"]=AudioTrackList},function(module,exports,__webpack_require__){var window=__webpack_require__(254);var vttjs=module.exports={WebVTT:__webpack_require__(267),VTTCue:__webpack_require__(268),VTTRegion:__webpack_require__(269)};window.vttjs=vttjs;window.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue;var regionShim=vttjs.VTTRegion;var nativeVTTCue=window.VTTCue;var nativeVTTRegion=window.VTTRegion;vttjs.shim=function(){window.VTTCue=cueShim;window.VTTRegion=regionShim};vttjs.restore=function(){window.VTTCue=nativeVTTCue;window.VTTRegion=nativeVTTRegion};if(!window.VTTCue){vttjs.shim()}},function(module,exports){var _objCreate=Object.create||function(){function F(){}return function(o){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.")}F.prototype=o;return new F}}();function ParsingError(errorData,message){this.name="ParsingError";this.code=errorData.code;this.message=message||errorData.message}ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(input){function computeSeconds(h,m,s,f){return(h|0)*3600+(m|0)*60+(s|0)+(f|0)/1e3}var m=input.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!m){return null}if(m[3]){return computeSeconds(m[1],m[2],m[3].replace(":",""),m[4])}else if(m[1]>59){return computeSeconds(m[1],m[2],0,m[4])}else{return computeSeconds(0,m[1],m[2],m[4])}}function Settings(){this.values=_objCreate(null)}Settings.prototype={set:function set(k,v){if(!this.get(k)&&v!==""){this.values[k]=v}},get:function get(k,dflt,defaultKey){if(defaultKey){return this.has(k)?this.values[k]:dflt[defaultKey]}return this.has(k)?this.values[k]:dflt},has:function has(k){return k in this.values},alt:function alt(k,v,a){for(var n=0;n<a.length;++n){if(v===a[n]){this.set(k,v);break}}},integer:function integer(k,v){if(/^-?\d+$/.test(v)){this.set(k,parseInt(v,10))}},percent:function percent(k,v){var m;if(m=v.match(/^([\d]{1,3})(\.[\d]*)?%$/)){v=parseFloat(v);if(v>=0&&v<=100){this.set(k,v);return true}}return false}};function parseOptions(input,callback,keyValueDelim,groupDelim){var groups=groupDelim?input.split(groupDelim):[input];for(var i in groups){if(typeof groups[i]!=="string"){continue}var kv=groups[i].split(keyValueDelim);if(kv.length!==2){continue}var k=kv[0];var v=kv[1];callback(k,v)}}function parseCue(input,cue,regionList){var oInput=input;function consumeTimeStamp(){var ts=parseTimeStamp(input);if(ts===null){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+oInput)}input=input.replace(/^[^\sa-zA-Z-]+/,"");return ts}function consumeCueSettings(input,cue){var settings=new Settings;parseOptions(input,function(k,v){switch(k){case"region":for(var i=regionList.length-1;i>=0;i--){if(regionList[i].id===v){settings.set(k,regionList[i].region);break}}break;case"vertical":settings.alt(k,v,["rl","lr"]);break;case"line":var vals=v.split(","),vals0=vals[0];settings.integer(k,vals0);settings.percent(k,vals0)?settings.set("snapToLines",false):null;settings.alt(k,vals0,["auto"]);if(vals.length===2){settings.alt("lineAlign",vals[1],["start","middle","end"])}break;case"position":vals=v.split(",");settings.percent(k,vals[0]);if(vals.length===2){settings.alt("positionAlign",vals[1],["start","middle","end"])}break;case"size":settings.percent(k,v);break;case"align":settings.alt(k,v,["start","middle","end","left","right"]);break}},/:/,/\s/);cue.region=settings.get("region",null);cue.vertical=settings.get("vertical","");cue.line=settings.get("line","auto");cue.lineAlign=settings.get("lineAlign","start");cue.snapToLines=settings.get("snapToLines",true);cue.size=settings.get("size",100);cue.align=settings.get("align","middle");cue.position=settings.get("position",{start:0,left:0,middle:50,end:100,right:100},cue.align);cue.positionAlign=settings.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},cue.align)}function skipWhitespace(){input=input.replace(/^\s+/,"")}skipWhitespace();cue.startTime=consumeTimeStamp();skipWhitespace();if(input.substr(0,3)!=="-->"){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+oInput)}input=input.substr(3);skipWhitespace();cue.endTime=consumeTimeStamp();skipWhitespace();consumeCueSettings(input,cue)}var ESCAPE={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "};var TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var TAG_ANNOTATION={v:"title",lang:"lang"};var NEEDS_PARENT={rt:"ruby"};function parseContent(window,input){function nextToken(){if(!input){return null}function consume(result){input=input.substr(result.length);return result}var m=input.match(/^([^<]*)(<[^>]+>?)?/);return consume(m[1]?m[1]:m[2])}function unescape1(e){return ESCAPE[e]}function unescape(s){while(m=s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)){s=s.replace(m[0],unescape1)}return s}function shouldAdd(current,element){return!NEEDS_PARENT[element.localName]||NEEDS_PARENT[element.localName]===current.localName}function createElement(type,annotation){var tagName=TAG_NAME[type];if(!tagName){return null}var element=window.document.createElement(tagName);element.localName=tagName;var name=TAG_ANNOTATION[type];if(name&&annotation){element[name]=annotation.trim()}return element}var rootDiv=window.document.createElement("div"),current=rootDiv,t,tagStack=[];while((t=nextToken())!==null){if(t[0]==="<"){if(t[1]==="/"){if(tagStack.length&&tagStack[tagStack.length-1]===t.substr(2).replace(">","")){tagStack.pop();current=current.parentNode}continue}var ts=parseTimeStamp(t.substr(1,t.length-2));var node;if(ts){node=window.document.createProcessingInstruction("timestamp",ts);current.appendChild(node);continue}var m=t.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m){continue}node=createElement(m[1],m[3]);if(!node){continue}if(!shouldAdd(current,node)){continue}if(m[2]){node.className=m[2].substr(1).replace("."," ")}tagStack.push(m[1]);current.appendChild(node);current=node;continue}current.appendChild(window.document.createTextNode(unescape(t)))}return rootDiv}var strongRTLRanges=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(charCode){for(var i=0;i<strongRTLRanges.length;i++){var currentRange=strongRTLRanges[i];if(charCode>=currentRange[0]&&charCode<=currentRange[1]){return true}}return false}function determineBidi(cueDiv){var nodeStack=[],text="",charCode;if(!cueDiv||!cueDiv.childNodes){return"ltr"}function pushNodes(nodeStack,node){for(var i=node.childNodes.length-1;i>=0;i--){nodeStack.push(node.childNodes[i])}}function nextTextNode(nodeStack){if(!nodeStack||!nodeStack.length){return null}var node=nodeStack.pop(),text=node.textContent||node.innerText;if(text){var m=text.match(/^.*(\n|\r)/);if(m){nodeStack.length=0;return m[0]}return text}if(node.tagName==="ruby"){return nextTextNode(nodeStack)}if(node.childNodes){pushNodes(nodeStack,node);return nextTextNode(nodeStack)}}pushNodes(nodeStack,cueDiv);while(text=nextTextNode(nodeStack)){for(var i=0;i<text.length;i++){charCode=text.charCodeAt(i);if(isStrongRTLChar(charCode)){return"rtl"}}}return"ltr"}function computeLinePos(cue){if(typeof cue.line==="number"&&(cue.snapToLines||cue.line>=0&&cue.line<=100)){return cue.line}if(!cue.track||!cue.track.textTrackList||!cue.track.textTrackList.mediaElement){return-1}var track=cue.track,trackList=track.textTrackList,count=0;for(var i=0;i<trackList.length&&trackList[i]!==track;i++){if(trackList[i].mode==="showing"){count++}}return++count*-1}function StyleBox(){}StyleBox.prototype.applyStyles=function(styles,div){div=div||this.div;for(var prop in styles){if(styles.hasOwnProperty(prop)){div.style[prop]=styles[prop]}}};StyleBox.prototype.formatStyle=function(val,unit){return val===0?0:val+unit};function CueStyleBox(window,cue,styleOptions){var isIE8=/MSIE\s8\.0/.test(navigator.userAgent);var color="rgba(255, 255, 255, 1)";var backgroundColor="rgba(0, 0, 0, 0.8)";if(isIE8){color="rgb(255, 255, 255)";backgroundColor="rgb(0, 0, 0)"}StyleBox.call(this);this.cue=cue;this.cueDiv=parseContent(window,cue.text);var styles={color:color,backgroundColor:backgroundColor,position:"relative",
left:0,right:0,top:0,bottom:0,display:"inline"};if(!isIE8){styles.writingMode=cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl";styles.unicodeBidi="plaintext"}this.applyStyles(styles,this.cueDiv);this.div=window.document.createElement("div");styles={textAlign:cue.align==="middle"?"center":cue.align,font:styleOptions.font,whiteSpace:"pre-line",position:"absolute"};if(!isIE8){styles.direction=determineBidi(this.cueDiv);styles.writingMode=cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"}this.applyStyles(styles);this.div.appendChild(this.cueDiv);var textPos=0;switch(cue.positionAlign){case"start":textPos=cue.position;break;case"middle":textPos=cue.position-cue.size/2;break;case"end":textPos=cue.position-cue.size;break}if(cue.vertical===""){this.applyStyles({left:this.formatStyle(textPos,"%"),width:this.formatStyle(cue.size,"%")})}else{this.applyStyles({top:this.formatStyle(textPos,"%"),height:this.formatStyle(cue.size,"%")})}this.move=function(box){this.applyStyles({top:this.formatStyle(box.top,"px"),bottom:this.formatStyle(box.bottom,"px"),left:this.formatStyle(box.left,"px"),right:this.formatStyle(box.right,"px"),height:this.formatStyle(box.height,"px"),width:this.formatStyle(box.width,"px")})}}CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(obj){var isIE8=/MSIE\s8\.0/.test(navigator.userAgent);var lh,height,width,top;if(obj.div){height=obj.div.offsetHeight;width=obj.div.offsetWidth;top=obj.div.offsetTop;var rects=(rects=obj.div.childNodes)&&(rects=rects[0])&&rects.getClientRects&&rects.getClientRects();obj=obj.div.getBoundingClientRect();lh=rects?Math.max(rects[0]&&rects[0].height||0,obj.height/rects.length):0}this.left=obj.left;this.right=obj.right;this.top=obj.top||top;this.height=obj.height||height;this.bottom=obj.bottom||top+(obj.height||height);this.width=obj.width||width;this.lineHeight=lh!==undefined?lh:obj.lineHeight;if(isIE8&&!this.lineHeight){this.lineHeight=13}}BoxPosition.prototype.move=function(axis,toMove){toMove=toMove!==undefined?toMove:this.lineHeight;switch(axis){case"+x":this.left+=toMove;this.right+=toMove;break;case"-x":this.left-=toMove;this.right-=toMove;break;case"+y":this.top+=toMove;this.bottom+=toMove;break;case"-y":this.top-=toMove;this.bottom-=toMove;break}};BoxPosition.prototype.overlaps=function(b2){return this.left<b2.right&&this.right>b2.left&&this.top<b2.bottom&&this.bottom>b2.top};BoxPosition.prototype.overlapsAny=function(boxes){for(var i=0;i<boxes.length;i++){if(this.overlaps(boxes[i])){return true}}return false};BoxPosition.prototype.within=function(container){return this.top>=container.top&&this.bottom<=container.bottom&&this.left>=container.left&&this.right<=container.right};BoxPosition.prototype.overlapsOppositeAxis=function(container,axis){switch(axis){case"+x":return this.left<container.left;case"-x":return this.right>container.right;case"+y":return this.top<container.top;case"-y":return this.bottom>container.bottom}};BoxPosition.prototype.intersectPercentage=function(b2){var x=Math.max(0,Math.min(this.right,b2.right)-Math.max(this.left,b2.left)),y=Math.max(0,Math.min(this.bottom,b2.bottom)-Math.max(this.top,b2.top)),intersectArea=x*y;return intersectArea/(this.height*this.width)};BoxPosition.prototype.toCSSCompatValues=function(reference){return{top:this.top-reference.top,bottom:reference.bottom-this.bottom,left:this.left-reference.left,right:reference.right-this.right,height:this.height,width:this.width}};BoxPosition.getSimpleBoxPosition=function(obj){var height=obj.div?obj.div.offsetHeight:obj.tagName?obj.offsetHeight:0;var width=obj.div?obj.div.offsetWidth:obj.tagName?obj.offsetWidth:0;var top=obj.div?obj.div.offsetTop:obj.tagName?obj.offsetTop:0;obj=obj.div?obj.div.getBoundingClientRect():obj.tagName?obj.getBoundingClientRect():obj;var ret={left:obj.left,right:obj.right,top:obj.top||top,height:obj.height||height,bottom:obj.bottom||top+(obj.height||height),width:obj.width||width};return ret};function moveBoxToLinePosition(window,styleBox,containerBox,boxPositions){function findBestPosition(b,axis){var bestPosition,specifiedPosition=new BoxPosition(b),percentage=1;for(var i=0;i<axis.length;i++){while(b.overlapsOppositeAxis(containerBox,axis[i])||b.within(containerBox)&&b.overlapsAny(boxPositions)){b.move(axis[i])}if(b.within(containerBox)){return b}var p=b.intersectPercentage(containerBox);if(percentage>p){bestPosition=new BoxPosition(b);percentage=p}b=new BoxPosition(specifiedPosition)}return bestPosition||specifiedPosition}var boxPosition=new BoxPosition(styleBox),cue=styleBox.cue,linePos=computeLinePos(cue),axis=[];if(cue.snapToLines){var size;switch(cue.vertical){case"":axis=["+y","-y"];size="height";break;case"rl":axis=["+x","-x"];size="width";break;case"lr":axis=["-x","+x"];size="width";break}var step=boxPosition.lineHeight,position=step*Math.round(linePos),maxPosition=containerBox[size]+step,initialAxis=axis[0];if(Math.abs(position)>maxPosition){position=position<0?-1:1;position*=Math.ceil(maxPosition/step)*step}if(linePos<0){position+=cue.vertical===""?containerBox.height:containerBox.width;axis=axis.reverse()}boxPosition.move(initialAxis,position)}else{var calculatedPercentage=boxPosition.lineHeight/containerBox.height*100;switch(cue.lineAlign){case"middle":linePos-=calculatedPercentage/2;break;case"end":linePos-=calculatedPercentage;break}switch(cue.vertical){case"":styleBox.applyStyles({top:styleBox.formatStyle(linePos,"%")});break;case"rl":styleBox.applyStyles({left:styleBox.formatStyle(linePos,"%")});break;case"lr":styleBox.applyStyles({right:styleBox.formatStyle(linePos,"%")});break}axis=["+y","-x","+x","-y"];boxPosition=new BoxPosition(styleBox)}var bestPosition=findBestPosition(boxPosition,axis);styleBox.move(bestPosition.toCSSCompatValues(containerBox))}function WebVTT(){}WebVTT.StringDecoder=function(){return{decode:function decode(data){if(!data){return""}if(typeof data!=="string"){throw new Error("Error - expected string data.")}return decodeURIComponent(encodeURIComponent(data))}}};WebVTT.convertCueToDOMTree=function(window,cuetext){if(!window||!cuetext){return null}return parseContent(window,cuetext)};var FONT_SIZE_PERCENT=.05;var FONT_STYLE="sans-serif";var CUE_BACKGROUND_PADDING="1.5%";WebVTT.processCues=function(window,cues,overlay){if(!window||!cues||!overlay){return null}while(overlay.firstChild){overlay.removeChild(overlay.firstChild)}var paddedOverlay=window.document.createElement("div");paddedOverlay.style.position="absolute";paddedOverlay.style.left="0";paddedOverlay.style.right="0";paddedOverlay.style.top="0";paddedOverlay.style.bottom="0";paddedOverlay.style.margin=CUE_BACKGROUND_PADDING;overlay.appendChild(paddedOverlay);function shouldCompute(cues){for(var i=0;i<cues.length;i++){if(cues[i].hasBeenReset||!cues[i].displayState){return true}}return false}if(!shouldCompute(cues)){for(var i=0;i<cues.length;i++){paddedOverlay.appendChild(cues[i].displayState)}return}var boxPositions=[],containerBox=BoxPosition.getSimpleBoxPosition(paddedOverlay),fontSize=Math.round(containerBox.height*FONT_SIZE_PERCENT*100)/100;var styleOptions={font:fontSize+"px "+FONT_STYLE};(function(){var styleBox,cue;for(var i=0;i<cues.length;i++){cue=cues[i];styleBox=new CueStyleBox(window,cue,styleOptions);paddedOverlay.appendChild(styleBox.div);moveBoxToLinePosition(window,styleBox,containerBox,boxPositions);cue.displayState=styleBox.div;boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox))}})()};WebVTT.Parser=function(window,vttjs,decoder){if(!decoder){decoder=vttjs;vttjs={}}if(!vttjs){vttjs={}}this.window=window;this.vttjs=vttjs;this.state="INITIAL";this.buffer="";this.decoder=decoder||new TextDecoder("utf8");this.regionList=[]};WebVTT.Parser.prototype={reportOrThrowError:function reportOrThrowError(e){if(e instanceof ParsingError){this.onparsingerror&&this.onparsingerror(e)}else{throw e}},parse:function parse(data){var self=this;if(data){self.buffer+=self.decoder.decode(data,{stream:true})}function collectNextLine(){var buffer=self.buffer;var pos=0;while(pos<buffer.length&&buffer[pos]!=="\r"&&buffer[pos]!=="\n"){++pos}var line=buffer.substr(0,pos);if(buffer[pos]==="\r"){++pos}if(buffer[pos]==="\n"){++pos}self.buffer=buffer.substr(pos);return line}function parseRegion(input){var settings=new Settings;parseOptions(input,function(k,v){switch(k){case"id":settings.set(k,v);break;case"width":settings.percent(k,v);break;case"lines":settings.integer(k,v);break;case"regionanchor":case"viewportanchor":var xy=v.split(",");if(xy.length!==2){break}var anchor=new Settings;anchor.percent("x",xy[0]);anchor.percent("y",xy[1]);if(!anchor.has("x")||!anchor.has("y")){break}settings.set(k+"X",anchor.get("x"));settings.set(k+"Y",anchor.get("y"));break;case"scroll":settings.alt(k,v,["up"]);break}},/=/,/\s/);if(settings.has("id")){var region=new(self.vttjs.VTTRegion||self.window.VTTRegion);region.width=settings.get("width",100);region.lines=settings.get("lines",3);region.regionAnchorX=settings.get("regionanchorX",0);region.regionAnchorY=settings.get("regionanchorY",100);region.viewportAnchorX=settings.get("viewportanchorX",0);region.viewportAnchorY=settings.get("viewportanchorY",100);region.scroll=settings.get("scroll","");self.onregion&&self.onregion(region);self.regionList.push({id:settings.get("id"),region:region})}}function parseTimestampMap(input){var settings=new Settings;parseOptions(input,function(k,v){switch(k){case"MPEGT":settings.integer(k+"S",v);break;case"LOCA":settings.set(k+"L",parseTimeStamp(v));break}},/[^\d]:/,/,/);self.ontimestampmap&&self.ontimestampmap({MPEGTS:settings.get("MPEGTS"),LOCAL:settings.get("LOCAL")})}function parseHeader(input){if(input.match(/X-TIMESTAMP-MAP/)){parseOptions(input,function(k,v){switch(k){case"X-TIMESTAMP-MAP":parseTimestampMap(v);break}},/=/)}else{parseOptions(input,function(k,v){switch(k){case"Region":parseRegion(v);break}},/:/)}}try{var line;if(self.state==="INITIAL"){if(!/\r\n|\n/.test(self.buffer)){return this}line=collectNextLine();var m=line.match(/^WEBVTT([ \t].*)?$/);if(!m||!m[0]){throw new ParsingError(ParsingError.Errors.BadSignature)}self.state="HEADER"}var alreadyCollectedLine=false;while(self.buffer){if(!/\r\n|\n/.test(self.buffer)){return this}if(!alreadyCollectedLine){line=collectNextLine()}else{alreadyCollectedLine=false}switch(self.state){case"HEADER":if(/:/.test(line)){parseHeader(line)}else if(!line){self.state="ID"}continue;case"NOTE":if(!line){self.state="ID"}continue;case"ID":if(/^NOTE($|[ \t])/.test(line)){self.state="NOTE";break}if(!line){continue}self.cue=new(self.vttjs.VTTCue||self.window.VTTCue)(0,0,"");self.state="CUE";if(line.indexOf("-->")===-1){self.cue.id=line;continue}case"CUE":try{parseCue(line,self.cue,self.regionList)}catch(e){self.reportOrThrowError(e);self.cue=null;self.state="BADCUE";continue}self.state="CUETEXT";continue;case"CUETEXT":var hasSubstring=line.indexOf("-->")!==-1;if(!line||hasSubstring&&(alreadyCollectedLine=true)){self.oncue&&self.oncue(self.cue);self.cue=null;self.state="ID";continue}if(self.cue.text){self.cue.text+="\n"}self.cue.text+=line;continue;case"BADCUE":if(!line){self.state="ID"}continue}}}catch(e){self.reportOrThrowError(e);if(self.state==="CUETEXT"&&self.cue&&self.oncue){self.oncue(self.cue)}self.cue=null;self.state=self.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function flush(){var self=this;try{self.buffer+=self.decoder.decode();if(self.cue||self.state==="HEADER"){self.buffer+="\n\n";self.parse()}if(self.state==="INITIAL"){throw new ParsingError(ParsingError.Errors.BadSignature)}}catch(e){self.reportOrThrowError(e)}self.onflush&&self.onflush();return this}};module.exports=WebVTT},function(module,exports){var autoKeyword="auto";var directionSetting={"":true,lr:true,rl:true};var alignSetting={start:true,middle:true,end:true,left:true,right:true};function findDirectionSetting(value){if(typeof value!=="string"){return false}var dir=directionSetting[value.toLowerCase()];return dir?value.toLowerCase():false}function findAlignSetting(value){if(typeof value!=="string"){return false}var align=alignSetting[value.toLowerCase()];return align?value.toLowerCase():false}function extend(obj){var i=1;for(;i<arguments.length;i++){var cobj=arguments[i];for(var p in cobj){obj[p]=cobj[p]}}return obj}function VTTCue(startTime,endTime,text){var cue=this;var isIE8=/MSIE\s8\.0/.test(navigator.userAgent);var baseObj={};if(isIE8){cue=document.createElement("custom")}else{baseObj.enumerable=true}cue.hasBeenReset=false;var _id="";var _pauseOnExit=false;var _startTime=startTime;var _endTime=endTime;var _text=text;var _region=null;var _vertical="";var _snapToLines=true;var _line="auto";var _lineAlign="start";var _position=50;var _positionAlign="middle";var _size=50;var _align="middle";Object.defineProperty(cue,"id",extend({},baseObj,{get:function get(){return _id},set:function set(value){_id=""+value}}));Object.defineProperty(cue,"pauseOnExit",extend({},baseObj,{get:function get(){return _pauseOnExit},set:function set(value){_pauseOnExit=!!value}}));Object.defineProperty(cue,"startTime",extend({},baseObj,{get:function get(){return _startTime},set:function set(value){if(typeof value!=="number"){throw new TypeError("Start time must be set to a number.")}_startTime=value;this.hasBeenReset=true}}));Object.defineProperty(cue,"endTime",extend({},baseObj,{get:function get(){return _endTime},set:function set(value){if(typeof value!=="number"){throw new TypeError("End time must be set to a number.")}_endTime=value;this.hasBeenReset=true}}));Object.defineProperty(cue,"text",extend({},baseObj,{get:function get(){return _text},set:function set(value){_text=""+value;this.hasBeenReset=true}}));Object.defineProperty(cue,"region",extend({},baseObj,{get:function get(){return _region},set:function set(value){_region=value;this.hasBeenReset=true}}));Object.defineProperty(cue,"vertical",extend({},baseObj,{get:function get(){return _vertical},set:function set(value){var setting=findDirectionSetting(value);if(setting===false){throw new SyntaxError("An invalid or illegal string was specified.")}_vertical=setting;this.hasBeenReset=true}}));Object.defineProperty(cue,"snapToLines",extend({},baseObj,{get:function get(){return _snapToLines},set:function set(value){_snapToLines=!!value;this.hasBeenReset=true}}));Object.defineProperty(cue,"line",extend({},baseObj,{get:function get(){return _line},set:function set(value){if(typeof value!=="number"&&value!==autoKeyword){throw new SyntaxError("An invalid number or illegal string was specified.")}_line=value;this.hasBeenReset=true}}));Object.defineProperty(cue,"lineAlign",extend({},baseObj,{get:function get(){return _lineAlign},set:function set(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.")}_lineAlign=setting;this.hasBeenReset=true}}));Object.defineProperty(cue,"position",extend({},baseObj,{get:function get(){return _position},set:function set(value){if(value<0||value>100){throw new Error("Position must be between 0 and 100.")}_position=value;this.hasBeenReset=true}}));Object.defineProperty(cue,"positionAlign",extend({},baseObj,{get:function get(){return _positionAlign},set:function set(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.")}_positionAlign=setting;this.hasBeenReset=true}}));Object.defineProperty(cue,"size",extend({},baseObj,{get:function get(){return _size},set:function set(value){if(value<0||value>100){throw new Error("Size must be between 0 and 100.")}_size=value;this.hasBeenReset=true}}));Object.defineProperty(cue,"align",extend({},baseObj,{get:function get(){return _align},set:function set(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.")}_align=setting;this.hasBeenReset=true}}));cue.displayState=undefined;if(isIE8){return cue}}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};module.exports=VTTCue},function(module,exports){var scrollSetting={"":true,up:true};function findScrollSetting(value){if(typeof value!=="string"){return false}var scroll=scrollSetting[value.toLowerCase()];return scroll?value.toLowerCase():false}function isValidPercentValue(value){return typeof value==="number"&&value>=0&&value<=100}function VTTRegion(){var _width=100;var _lines=3;var _regionAnchorX=0;var _regionAnchorY=100;var _viewportAnchorX=0;var _viewportAnchorY=100;var _scroll="";Object.defineProperties(this,{width:{enumerable:true,get:function get(){return _width},set:function set(value){if(!isValidPercentValue(value)){throw new Error("Width must be between 0 and 100.")}_width=value}},lines:{enumerable:true,get:function get(){return _lines},set:function set(value){if(typeof value!=="number"){throw new TypeError("Lines must be set to a number.")}_lines=value}},regionAnchorY:{enumerable:true,get:function get(){return _regionAnchorY},set:function set(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorX must be between 0 and 100.")}_regionAnchorY=value}},regionAnchorX:{enumerable:true,get:function get(){return _regionAnchorX},set:function set(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorY must be between 0 and 100.")}_regionAnchorX=value}},viewportAnchorY:{enumerable:true,get:function get(){return _viewportAnchorY},set:function set(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorY must be between 0 and 100.")}_viewportAnchorY=value}},viewportAnchorX:{enumerable:true,get:function get(){return _viewportAnchorX},set:function set(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorX must be between 0 and 100.")}_viewportAnchorX=value}},scroll:{enumerable:true,get:function get(){return _scroll},set:function set(value){var setting=findScrollSetting(value);if(setting===false){throw new SyntaxError("An invalid or illegal string was specified.")}_scroll=setting}}})}module.exports=VTTRegion},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _tech=__webpack_require__(246);var _tech2=_interopRequireDefault(_tech);var _toTitleCase=__webpack_require__(235);var _toTitleCase2=_interopRequireDefault(_toTitleCase);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MediaLoader=function(_Component){_inherits(MediaLoader,_Component);function MediaLoader(player,options,ready){_classCallCheck(this,MediaLoader);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options,ready));if(!options.playerOptions.sources||options.playerOptions.sources.length===0){for(var i=0,j=options.playerOptions.techOrder;i<j.length;i++){var techName=(0,_toTitleCase2["default"])(j[i]);var tech=_tech2["default"].getTech(techName);if(!techName){tech=_component2["default"].getComponent(techName)}if(tech&&tech.isSupported()){player.loadTech_(techName);break}}}else{player.src(options.playerOptions.sources)}return _this}return MediaLoader}(_component2["default"]);_component2["default"].registerComponent("MediaLoader",MediaLoader);exports["default"]=MediaLoader},function(module,exports,__webpack_require__){exports.__esModule=true;var _tech=__webpack_require__(246);var _tech2=_interopRequireDefault(_tech);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _url=__webpack_require__(252);var Url=_interopRequireWildcard(_url);var _timeRanges=__webpack_require__(239);var _flashRtmp=__webpack_require__(272);var _flashRtmp2=_interopRequireDefault(_flashRtmp);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _obj=__webpack_require__(228);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var navigator=_window2["default"].navigator;var Flash=function(_Tech){_inherits(Flash,_Tech);function Flash(options,ready){_classCallCheck(this,Flash);var _this=_possibleConstructorReturn(this,_Tech.call(this,options,ready));if(options.source){_this.ready(function(){this.setSource(options.source)},true)}if(options.startTime){_this.ready(function(){this.load();this.play();this.currentTime(options.startTime)},true)}_window2["default"].videojs=_window2["default"].videojs||{};_window2["default"].videojs.Flash=_window2["default"].videojs.Flash||{};_window2["default"].videojs.Flash.onReady=Flash.onReady;_window2["default"].videojs.Flash.onEvent=Flash.onEvent;_window2["default"].videojs.Flash.onError=Flash.onError;_this.on("seeked",function(){this.lastSeekTarget_=undefined});return _this}Flash.prototype.createEl=function createEl(){var options=this.options_;if(!options.swf){var ver="5.4.1";options.swf="//vjs.zencdn.net/swf/"+ver+"/video-js.swf"}var objId=options.techId;var flashVars=(0,_obj.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:options.autoplay,preload:options.preload,loop:options.loop,muted:options.muted},options.flashVars);var params=(0,_obj.assign)({wmode:"opaque",bgcolor:"#000000"},options.params);var attributes=(0,_obj.assign)({id:objId,name:objId,"class":"vjs-tech"},options.attributes);this.el_=Flash.embed(options.swf,flashVars,params,attributes);this.el_.tech=this;return this.el_};Flash.prototype.play=function play(){if(this.ended()){this.setCurrentTime(0)}this.el_.vjs_play()};Flash.prototype.pause=function pause(){this.el_.vjs_pause()};Flash.prototype.src=function src(_src){if(_src===undefined){return this.currentSrc()}return this.setSrc(_src)};Flash.prototype.setSrc=function setSrc(src){var _this2=this;src=Url.getAbsoluteURL(src);this.el_.vjs_src(src);if(this.autoplay()){this.setTimeout(function(){return _this2.play()},0)}};Flash.prototype.seeking=function seeking(){return this.lastSeekTarget_!==undefined};Flash.prototype.setCurrentTime=function setCurrentTime(time){var seekable=this.seekable();if(seekable.length){time=time>seekable.start(0)?time:seekable.start(0);time=time<seekable.end(seekable.length-1)?time:seekable.end(seekable.length-1);this.lastSeekTarget_=time;this.trigger("seeking");this.el_.vjs_setProperty("currentTime",time);_Tech.prototype.setCurrentTime.call(this)}};Flash.prototype.currentTime=function currentTime(){if(this.seeking()){return this.lastSeekTarget_||0}return this.el_.vjs_getProperty("currentTime")};Flash.prototype.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src}return this.el_.vjs_getProperty("currentSrc")};Flash.prototype.duration=function duration(){if(this.readyState()===0){return NaN}var duration=this.el_.vjs_getProperty("duration");return duration>=0?duration:Infinity};Flash.prototype.load=function load(){this.el_.vjs_load()};Flash.prototype.poster=function poster(){this.el_.vjs_getProperty("poster")};Flash.prototype.setPoster=function setPoster(){};Flash.prototype.seekable=function seekable(){var duration=this.duration();if(duration===0){return(0,_timeRanges.createTimeRange)()}return(0,_timeRanges.createTimeRange)(0,duration)};Flash.prototype.buffered=function buffered(){var ranges=this.el_.vjs_getProperty("buffered");if(ranges.length===0){return(0,_timeRanges.createTimeRange)()}return(0,_timeRanges.createTimeRange)(ranges[0][0],ranges[0][1])};Flash.prototype.supportsFullScreen=function supportsFullScreen(){return false};Flash.prototype.enterFullScreen=function enterFullScreen(){return false};Flash.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){var videoPlaybackQuality=this.el_.vjs_getProperty("getVideoPlaybackQuality");if(_window2["default"].performance&&typeof _window2["default"].performance.now==="function"){videoPlaybackQuality.creationTime=_window2["default"].performance.now()}else if(_window2["default"].performance&&_window2["default"].performance.timing&&typeof _window2["default"].performance.timing.navigationStart==="number"){videoPlaybackQuality.creationTime=_window2["default"].Date.now()-_window2["default"].performance.timing.navigationStart}return videoPlaybackQuality};return Flash}(_tech2["default"]);var _api=Flash.prototype;var _readWrite="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(",");var _readOnly="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(",");function _createSetter(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);_api["set"+attrUpper]=function(val){return this.el_.vjs_setProperty(attr,val)}}function _createGetter(attr){_api[attr]=function(){return this.el_.vjs_getProperty(attr)}}for(var i=0;i<_readWrite.length;i++){_createGetter(_readWrite[i]);_createSetter(_readWrite[i])}for(var _i=0;_i<_readOnly.length;_i++){_createGetter(_readOnly[_i])}Flash.isSupported=function(){return Flash.version()[0]>=10};_tech2["default"].withSourceHandlers(Flash);Flash.nativeSourceHandler={};Flash.nativeSourceHandler.canPlayType=function(type){if(type in Flash.formats){return"maybe"}return""};Flash.nativeSourceHandler.canHandleSource=function(source,options){var type=void 0;function guessMimeType(src){var ext=Url.getFileExtension(src);if(ext){return"video/"+ext}return""}if(!source.type){type=guessMimeType(source.src)}else{type=source.type.replace(/;.*/,"").toLowerCase()}return Flash.nativeSourceHandler.canPlayType(type)};Flash.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src)};Flash.nativeSourceHandler.dispose=function(){};Flash.registerSourceHandler(Flash.nativeSourceHandler);Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};Flash.onReady=function(currSwf){var el=Dom.getEl(currSwf);var tech=el&&el.tech;if(tech&&tech.el()){Flash.checkReady(tech)}};Flash.checkReady=function(tech){if(!tech.el()){return}if(tech.el().vjs_getProperty){tech.triggerReady()}else{this.setTimeout(function(){Flash.checkReady(tech)},50)}};Flash.onEvent=function(swfID,eventName){var tech=Dom.getEl(swfID).tech;var args=Array.prototype.slice.call(arguments,2);tech.setTimeout(function(){tech.trigger(eventName,args)},1)};Flash.onError=function(swfID,err){var tech=Dom.getEl(swfID).tech;if(err==="srcnotfound"){return tech.error(4)}tech.error("FLASH: "+err)};Flash.version=function(){var version="0,0,0";try{version=new _window2["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){version=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(err){}}return version.split(",")};Flash.embed=function(swf,flashVars,params,attributes){var code=Flash.getEmbedCode(swf,flashVars,params,attributes);var obj=Dom.createEl("div",{innerHTML:code}).childNodes[0];return obj};Flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type="application/x-shockwave-flash" ';var flashVarsString="";var paramsString="";var attrsString="";if(flashVars){Object.getOwnPropertyNames(flashVars).forEach(function(key){flashVarsString+=key+"="+flashVars[key]+"&amp;"})}params=(0,_obj.assign)({movie:swf,flashvars:flashVarsString,allowScriptAccess:"always",allowNetworking:"all"},params);Object.getOwnPropertyNames(params).forEach(function(key){paramsString+='<param name="'+key+'" value="'+params[key]+'" />'});attributes=(0,_obj.assign)({data:swf,width:"100%",height:"100%"},attributes);Object.getOwnPropertyNames(attributes).forEach(function(key){attrsString+=key+'="'+attributes[key]+'" '});return""+objTag+attrsString+">"+paramsString+"</object>"};(0,_flashRtmp2["default"])(Flash);_component2["default"].registerComponent("Flash",Flash);_tech2["default"].registerTech("Flash",Flash);exports["default"]=Flash},function(module,exports){exports.__esModule=true;function FlashRtmpDecorator(Flash){Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};Flash.streamFromParts=function(connection,stream){return connection+"&"+stream};Flash.streamToParts=function(src){var parts={connection:"",stream:""};if(!src){return parts}var connEnd=src.search(/&(?!\w+=)/);var streamBegin=void 0;if(connEnd!==-1){streamBegin=connEnd+1}else{connEnd=streamBegin=src.lastIndexOf("/")+1;if(connEnd===0){connEnd=streamBegin=src.length}}parts.connection=src.substring(0,connEnd);parts.stream=src.substring(streamBegin,src.length);return parts};Flash.isStreamingType=function(srcType){return srcType in Flash.streamingFormats};Flash.RTMP_RE=/^rtmp[set]?:\/\//i;Flash.isStreamingSrc=function(src){return Flash.RTMP_RE.test(src)};Flash.rtmpSourceHandler={};Flash.rtmpSourceHandler.canPlayType=function(type){if(Flash.isStreamingType(type)){return"maybe"}return""};Flash.rtmpSourceHandler.canHandleSource=function(source,options){var can=Flash.rtmpSourceHandler.canPlayType(source.type);if(can){return can}if(Flash.isStreamingSrc(source.src)){return"maybe"}return""};Flash.rtmpSourceHandler.handleSource=function(source,tech,options){var srcParts=Flash.streamToParts(source.src);tech.setRtmpConnection(srcParts.connection);tech.setRtmpStream(srcParts.stream)};Flash.registerSourceHandler(Flash.rtmpSourceHandler);return Flash}exports["default"]=FlashRtmpDecorator},function(module,exports,__webpack_require__){exports.__esModule=true;var _clickableComponent=__webpack_require__(274);var _clickableComponent2=_interopRequireDefault(_clickableComponent);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _browser=__webpack_require__(224);
var browser=_interopRequireWildcard(_browser);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PosterImage=function(_ClickableComponent){_inherits(PosterImage,_ClickableComponent);function PosterImage(player,options){_classCallCheck(this,PosterImage);var _this=_possibleConstructorReturn(this,_ClickableComponent.call(this,player,options));_this.update();player.on("posterchange",Fn.bind(_this,_this.update));return _this}PosterImage.prototype.dispose=function dispose(){this.player().off("posterchange",this.update);_ClickableComponent.prototype.dispose.call(this)};PosterImage.prototype.createEl=function createEl(){var el=Dom.createEl("div",{className:"vjs-poster",tabIndex:-1});if(!browser.BACKGROUND_SIZE_SUPPORTED){this.fallbackImg_=Dom.createEl("img");el.appendChild(this.fallbackImg_)}return el};PosterImage.prototype.update=function update(event){var url=this.player().poster();this.setSrc(url);if(url){this.show()}else{this.hide()}};PosterImage.prototype.setSrc=function setSrc(url){if(this.fallbackImg_){this.fallbackImg_.src=url}else{var backgroundImage="";if(url){backgroundImage='url("'+url+'")'}this.el_.style.backgroundImage=backgroundImage}};PosterImage.prototype.handleClick=function handleClick(event){if(!this.player_.controls()){return}if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};return PosterImage}(_clickableComponent2["default"]);_component2["default"].registerComponent("PosterImage",PosterImage);exports["default"]=PosterImage},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _obj=__webpack_require__(228);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ClickableComponent=function(_Component){_inherits(ClickableComponent,_Component);function ClickableComponent(player,options){_classCallCheck(this,ClickableComponent);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.emitTapEvents();_this.enable();return _this}ClickableComponent.prototype.createEl=function createEl(){var tag=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div";var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};props=(0,_obj.assign)({className:this.buildCSSClass(),tabIndex:0},props);if(tag==="button"){_log2["default"].error("Creating a ClickableComponent with an HTML element of "+tag+" is not supported; use a Button instead.")}attributes=(0,_obj.assign)({role:"button","aria-live":"polite"},attributes);this.tabIndex_=props.tabIndex;var el=_Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el};ClickableComponent.prototype.createControlTextEl=function createControlTextEl(el){this.controlTextEl_=Dom.createEl("span",{className:"vjs-control-text"});if(el){el.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,el);return this.controlTextEl_};ClickableComponent.prototype.controlText=function controlText(text){var el=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.el();if(!text){return this.controlText_||"Need Text"}var localizedText=this.localize(text);this.controlText_=text;this.controlTextEl_.innerHTML=localizedText;if(!this.nonIconControl){el.setAttribute("title",localizedText)}return this};ClickableComponent.prototype.buildCSSClass=function buildCSSClass(){return"vjs-control vjs-button "+_Component.prototype.buildCSSClass.call(this)};ClickableComponent.prototype.enable=function enable(){this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.on(["tap","click"],this.handleClick);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);return this};ClickableComponent.prototype.disable=function disable(){this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);return this};ClickableComponent.prototype.handleClick=function handleClick(event){};ClickableComponent.prototype.handleFocus=function handleFocus(event){Events.on(_document2["default"],"keydown",Fn.bind(this,this.handleKeyPress))};ClickableComponent.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===32||event.which===13){event.preventDefault();this.handleClick(event)}else if(_Component.prototype.handleKeyPress){_Component.prototype.handleKeyPress.call(this,event)}};ClickableComponent.prototype.handleBlur=function handleBlur(event){Events.off(_document2["default"],"keydown",Fn.bind(this,this.handleKeyPress))};return ClickableComponent}(_component2["default"]);_component2["default"].registerComponent("ClickableComponent",ClickableComponent);exports["default"]=ClickableComponent},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var darkGray="#222";var lightGray="#ccc";var fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(color,opacity){return"rgba("+parseInt(color[1]+color[1],16)+","+parseInt(color[2]+color[2],16)+","+parseInt(color[3]+color[3],16)+","+opacity+")"}function tryUpdateStyle(el,style,rule){try{el.style[style]=rule}catch(e){return}}var TextTrackDisplay=function(_Component){_inherits(TextTrackDisplay,_Component);function TextTrackDisplay(player,options,ready){_classCallCheck(this,TextTrackDisplay);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options,ready));player.on("loadstart",Fn.bind(_this,_this.toggleDisplay));player.on("texttrackchange",Fn.bind(_this,_this.updateDisplay));player.ready(Fn.bind(_this,function(){if(player.tech_&&player.tech_.featuresNativeTextTracks){this.hide();return}player.on("fullscreenchange",Fn.bind(this,this.updateDisplay));var tracks=this.options_.playerOptions.tracks||[];for(var i=0;i<tracks.length;i++){this.player_.addRemoteTextTrack(tracks[i],true)}var modes={captions:1,subtitles:1};var trackList=this.player_.textTracks();var firstDesc=void 0;var firstCaptions=void 0;if(trackList){for(var _i=0;_i<trackList.length;_i++){var track=trackList[_i];if(track["default"]){if(track.kind==="descriptions"&&!firstDesc){firstDesc=track}else if(track.kind in modes&&!firstCaptions){firstCaptions=track}}}if(firstCaptions){firstCaptions.mode="showing"}else if(firstDesc){firstDesc.mode="showing"}}}));return _this}TextTrackDisplay.prototype.toggleDisplay=function toggleDisplay(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};TextTrackDisplay.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};TextTrackDisplay.prototype.clearDisplay=function clearDisplay(){if(typeof _window2["default"].WebVTT==="function"){_window2["default"].WebVTT.processCues(_window2["default"],[],this.el_)}};TextTrackDisplay.prototype.updateDisplay=function updateDisplay(){var tracks=this.player_.textTracks();this.clearDisplay();if(!tracks){return}var descriptionsTrack=null;var captionsSubtitlesTrack=null;var i=tracks.length;while(i--){var track=tracks[i];if(track.mode==="showing"){if(track.kind==="descriptions"){descriptionsTrack=track}else{captionsSubtitlesTrack=track}}}if(captionsSubtitlesTrack){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(captionsSubtitlesTrack)}else if(descriptionsTrack){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(descriptionsTrack)}};TextTrackDisplay.prototype.updateForTrack=function updateForTrack(track){if(typeof _window2["default"].WebVTT!=="function"||!track.activeCues){return}var overrides=this.player_.textTrackSettings.getValues();var cues=[];for(var _i2=0;_i2<track.activeCues.length;_i2++){cues.push(track.activeCues[_i2])}_window2["default"].WebVTT.processCues(_window2["default"],cues,this.el_);var i=cues.length;while(i--){var cue=cues[i];if(!cue){continue}var cueDiv=cue.displayState;if(overrides.color){cueDiv.firstChild.style.color=overrides.color}if(overrides.textOpacity){tryUpdateStyle(cueDiv.firstChild,"color",constructColor(overrides.color||"#fff",overrides.textOpacity))}if(overrides.backgroundColor){cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor}if(overrides.backgroundOpacity){tryUpdateStyle(cueDiv.firstChild,"backgroundColor",constructColor(overrides.backgroundColor||"#000",overrides.backgroundOpacity))}if(overrides.windowColor){if(overrides.windowOpacity){tryUpdateStyle(cueDiv,"backgroundColor",constructColor(overrides.windowColor,overrides.windowOpacity))}else{cueDiv.style.backgroundColor=overrides.windowColor}}if(overrides.edgeStyle){if(overrides.edgeStyle==="dropshadow"){cueDiv.firstChild.style.textShadow="2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray}else if(overrides.edgeStyle==="raised"){cueDiv.firstChild.style.textShadow="1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray}else if(overrides.edgeStyle==="depressed"){cueDiv.firstChild.style.textShadow="1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray}else if(overrides.edgeStyle==="uniform"){cueDiv.firstChild.style.textShadow="0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray}}if(overrides.fontPercent&&overrides.fontPercent!==1){var fontSize=_window2["default"].parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+"px";cueDiv.style.height="auto";cueDiv.style.top="auto";cueDiv.style.bottom="2px"}if(overrides.fontFamily&&overrides.fontFamily!=="default"){if(overrides.fontFamily==="small-caps"){cueDiv.firstChild.style.fontVariant="small-caps"}else{cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily]}}}};return TextTrackDisplay}(_component2["default"]);_component2["default"].registerComponent("TextTrackDisplay",TextTrackDisplay);exports["default"]=TextTrackDisplay},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var LoadingSpinner=function(_Component){_inherits(LoadingSpinner,_Component);function LoadingSpinner(){_classCallCheck(this,LoadingSpinner);return _possibleConstructorReturn(this,_Component.apply(this,arguments))}LoadingSpinner.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})};return LoadingSpinner}(_component2["default"]);_component2["default"].registerComponent("LoadingSpinner",LoadingSpinner);exports["default"]=LoadingSpinner},function(module,exports,__webpack_require__){exports.__esModule=true;var _button=__webpack_require__(278);var _button2=_interopRequireDefault(_button);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var BigPlayButton=function(_Button){_inherits(BigPlayButton,_Button);function BigPlayButton(player,options){_classCallCheck(this,BigPlayButton);var _this=_possibleConstructorReturn(this,_Button.call(this,player,options));_this.mouseused_=false;_this.on("mousedown",_this.handleMouseDown);return _this}BigPlayButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-big-play-button"};BigPlayButton.prototype.handleClick=function handleClick(event){var playPromise=this.player_.play();if(this.mouseused_&&event.clientX&&event.clientY){return}var cb=this.player_.getChild("controlBar");var playToggle=cb&&cb.getChild("playToggle");if(!playToggle){this.player_.focus();return}var playFocus=function playFocus(){return playToggle.focus()};if(playPromise&&playPromise.then){var ignoreRejectedPlayPromise=function ignoreRejectedPlayPromise(){};playPromise.then(playFocus,ignoreRejectedPlayPromise)}else{this.setTimeout(playFocus,1)}};BigPlayButton.prototype.handleKeyPress=function handleKeyPress(event){this.mouseused_=false;_Button.prototype.handleKeyPress.call(this,event)};BigPlayButton.prototype.handleMouseDown=function handleMouseDown(event){this.mouseused_=true};return BigPlayButton}(_button2["default"]);BigPlayButton.prototype.controlText_="Play Video";_component2["default"].registerComponent("BigPlayButton",BigPlayButton);exports["default"]=BigPlayButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _clickableComponent=__webpack_require__(274);var _clickableComponent2=_interopRequireDefault(_clickableComponent);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _obj=__webpack_require__(228);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Button=function(_ClickableComponent){_inherits(Button,_ClickableComponent);function Button(){_classCallCheck(this,Button);return _possibleConstructorReturn(this,_ClickableComponent.apply(this,arguments))}Button.prototype.createEl=function createEl(){var tag=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"button";var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};props=(0,_obj.assign)({className:this.buildCSSClass()},props);if(tag!=="button"){_log2["default"].warn("Creating a Button with an HTML element of "+tag+" is deprecated; use ClickableComponent instead.");props=(0,_obj.assign)({tabIndex:0},props);attributes=(0,_obj.assign)({role:"button"},attributes)}attributes=(0,_obj.assign)({type:"button","aria-live":"polite"},attributes);var el=_component2["default"].prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el};Button.prototype.addChild=function addChild(child){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var className=this.constructor.name;_log2["default"].warn("Adding an actionable (user controllable) child to a Button ("+className+") is not supported; use a ClickableComponent instead.");return _component2["default"].prototype.addChild.call(this,child,options)};Button.prototype.enable=function enable(){_ClickableComponent.prototype.enable.call(this);this.el_.removeAttribute("disabled")};Button.prototype.disable=function disable(){_ClickableComponent.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};Button.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===32||event.which===13){return}_ClickableComponent.prototype.handleKeyPress.call(this,event)};return Button}(_clickableComponent2["default"]);_component2["default"].registerComponent("Button",Button);exports["default"]=Button},function(module,exports,__webpack_require__){exports.__esModule=true;var _button=__webpack_require__(278);var _button2=_interopRequireDefault(_button);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CloseButton=function(_Button){_inherits(CloseButton,_Button);function CloseButton(player,options){_classCallCheck(this,CloseButton);var _this=_possibleConstructorReturn(this,_Button.call(this,player,options));_this.controlText(options&&options.controlText||_this.localize("Close"));return _this}CloseButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-close-button "+_Button.prototype.buildCSSClass.call(this)};CloseButton.prototype.handleClick=function handleClick(event){this.trigger({type:"close",bubbles:false})};return CloseButton}(_button2["default"]);_component2["default"].registerComponent("CloseButton",CloseButton);exports["default"]=CloseButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);__webpack_require__(281);__webpack_require__(282);__webpack_require__(284);__webpack_require__(285);__webpack_require__(286);__webpack_require__(287);__webpack_require__(288);__webpack_require__(296);__webpack_require__(297);__webpack_require__(300);__webpack_require__(303);__webpack_require__(304);__webpack_require__(313);__webpack_require__(314);__webpack_require__(315);__webpack_require__(317);__webpack_require__(319);__webpack_require__(321);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ControlBar=function(_Component){_inherits(ControlBar,_Component);function ControlBar(){_classCallCheck(this,ControlBar);return _possibleConstructorReturn(this,_Component.apply(this,arguments))}ControlBar.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})};return ControlBar}(_component2["default"]);ControlBar.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]};_component2["default"].registerComponent("ControlBar",ControlBar);exports["default"]=ControlBar},function(module,exports,__webpack_require__){exports.__esModule=true;var _button=__webpack_require__(278);var _button2=_interopRequireDefault(_button);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PlayToggle=function(_Button){_inherits(PlayToggle,_Button);function PlayToggle(player,options){_classCallCheck(this,PlayToggle);var _this=_possibleConstructorReturn(this,_Button.call(this,player,options));_this.on(player,"play",_this.handlePlay);_this.on(player,"pause",_this.handlePause);return _this}PlayToggle.prototype.buildCSSClass=function buildCSSClass(){return"vjs-play-control "+_Button.prototype.buildCSSClass.call(this)};PlayToggle.prototype.handleClick=function handleClick(event){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};PlayToggle.prototype.handlePlay=function handlePlay(event){this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};PlayToggle.prototype.handlePause=function handlePause(event){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};return PlayToggle}(_button2["default"]);PlayToggle.prototype.controlText_="Play";_component2["default"].registerComponent("PlayToggle",PlayToggle);exports["default"]=PlayToggle},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CurrentTimeDisplay=function(_Component){_inherits(CurrentTimeDisplay,_Component);function CurrentTimeDisplay(player,options){_classCallCheck(this,CurrentTimeDisplay);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.on(player,"timeupdate",_this.updateContent);return _this}CurrentTimeDisplay.prototype.createEl=function createEl(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});this.contentEl_=Dom.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>'+"0:00"},{"aria-live":"off"});el.appendChild(this.contentEl_);return el};CurrentTimeDisplay.prototype.updateContent=function updateContent(event){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();var localizedText=this.localize("Current Time");var formattedTime=(0,_formatTime2["default"])(time,this.player_.duration());if(formattedTime!==this.formattedTime_){this.formattedTime_=formattedTime;this.contentEl_.innerHTML='<span class="vjs-control-text">'+localizedText+"</span> "+formattedTime}};return CurrentTimeDisplay}(_component2["default"]);_component2["default"].registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);exports["default"]=CurrentTimeDisplay},function(module,exports){exports.__esModule=true;function formatTime(seconds){var guide=arguments.length>1&&arguments[1]!==undefined?arguments[1]:seconds;
seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60);var m=Math.floor(seconds/60%60);var h=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);if(isNaN(seconds)||seconds===Infinity){h=m=s="-"}h=h>0||gh>0?h+":":"";m=((h||gm>=10)&&m<10?"0"+m:m)+":";s=s<10?"0"+s:s;return h+m+s}exports["default"]=formatTime},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DurationDisplay=function(_Component){_inherits(DurationDisplay,_Component);function DurationDisplay(player,options){_classCallCheck(this,DurationDisplay);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.on(player,"durationchange",_this.updateContent);_this.on(player,"timeupdate",_this.updateContent);_this.on(player,"loadedmetadata",_this.updateContent);return _this}DurationDisplay.prototype.createEl=function createEl(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});this.contentEl_=Dom.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"});el.appendChild(this.contentEl_);return el};DurationDisplay.prototype.updateContent=function updateContent(event){var duration=this.player_.duration();if(duration&&this.duration_!==duration){this.duration_=duration;var localizedText=this.localize("Duration Time");var formattedTime=(0,_formatTime2["default"])(duration);this.contentEl_.innerHTML='<span class="vjs-control-text">'+localizedText+"</span> "+formattedTime}};return DurationDisplay}(_component2["default"]);_component2["default"].registerComponent("DurationDisplay",DurationDisplay);exports["default"]=DurationDisplay},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TimeDivider=function(_Component){_inherits(TimeDivider,_Component);function TimeDivider(){_classCallCheck(this,TimeDivider);return _possibleConstructorReturn(this,_Component.apply(this,arguments))}TimeDivider.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};return TimeDivider}(_component2["default"]);_component2["default"].registerComponent("TimeDivider",TimeDivider);exports["default"]=TimeDivider},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var RemainingTimeDisplay=function(_Component){_inherits(RemainingTimeDisplay,_Component);function RemainingTimeDisplay(player,options){_classCallCheck(this,RemainingTimeDisplay);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.on(player,"timeupdate",_this.updateContent);_this.on(player,"durationchange",_this.updateContent);return _this}RemainingTimeDisplay.prototype.createEl=function createEl(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});this.contentEl_=Dom.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"});el.appendChild(this.contentEl_);return el};RemainingTimeDisplay.prototype.updateContent=function updateContent(event){if(this.player_.duration()){var localizedText=this.localize("Remaining Time");var formattedTime=(0,_formatTime2["default"])(this.player_.remainingTime());if(formattedTime!==this.formattedTime_){this.formattedTime_=formattedTime;this.contentEl_.innerHTML='<span class="vjs-control-text">'+localizedText+"</span> -"+formattedTime}}};return RemainingTimeDisplay}(_component2["default"]);_component2["default"].registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);exports["default"]=RemainingTimeDisplay},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var LiveDisplay=function(_Component){_inherits(LiveDisplay,_Component);function LiveDisplay(player,options){_classCallCheck(this,LiveDisplay);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.updateShowing();_this.on(_this.player(),"durationchange",_this.updateShowing);return _this}LiveDisplay.prototype.createEl=function createEl(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=Dom.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"});el.appendChild(this.contentEl_);return el};LiveDisplay.prototype.updateShowing=function updateShowing(event){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return LiveDisplay}(_component2["default"]);_component2["default"].registerComponent("LiveDisplay",LiveDisplay);exports["default"]=LiveDisplay},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);__webpack_require__(289);__webpack_require__(295);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ProgressControl=function(_Component){_inherits(ProgressControl,_Component);function ProgressControl(){_classCallCheck(this,ProgressControl);return _possibleConstructorReturn(this,_Component.apply(this,arguments))}ProgressControl.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};return ProgressControl}(_component2["default"]);ProgressControl.prototype.options_={children:["seekBar"]};_component2["default"].registerComponent("ProgressControl",ProgressControl);exports["default"]=ProgressControl},function(module,exports,__webpack_require__){exports.__esModule=true;var _slider=__webpack_require__(290);var _slider2=_interopRequireDefault(_slider);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);var _computedStyle=__webpack_require__(291);var _computedStyle2=_interopRequireDefault(_computedStyle);__webpack_require__(292);__webpack_require__(293);__webpack_require__(294);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SeekBar=function(_Slider){_inherits(SeekBar,_Slider);function SeekBar(player,options){_classCallCheck(this,SeekBar);var _this=_possibleConstructorReturn(this,_Slider.call(this,player,options));_this.on(player,"timeupdate",_this.updateProgress);_this.on(player,"ended",_this.updateProgress);player.ready(Fn.bind(_this,_this.updateProgress));if(options.playerOptions&&options.playerOptions.controlBar&&options.playerOptions.controlBar.progressControl&&options.playerOptions.controlBar.progressControl.keepTooltipsInside){_this.keepTooltipsInside=options.playerOptions.controlBar.progressControl.keepTooltipsInside}if(_this.keepTooltipsInside){_this.tooltipProgressBar=_this.addChild("TooltipProgressBar")}return _this}SeekBar.prototype.createEl=function createEl(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})};SeekBar.prototype.updateProgress=function updateProgress(event){this.updateAriaAttributes(this.el_);if(this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_);this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var playerWidth=parseFloat((0,_computedStyle2["default"])(this.player().el(),"width"));var tooltipWidth=parseFloat((0,_computedStyle2["default"])(this.tooltipProgressBar.tooltip,"width"));var tooltipStyle=this.tooltipProgressBar.el().style;tooltipStyle.maxWidth=Math.floor(playerWidth-tooltipWidth/2)+"px";tooltipStyle.minWidth=Math.ceil(tooltipWidth/2)+"px";tooltipStyle.right="-"+tooltipWidth/2+"px"}};SeekBar.prototype.updateAriaAttributes=function updateAriaAttributes(el){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();el.setAttribute("aria-valuenow",(this.getPercent()*100).toFixed(2));el.setAttribute("aria-valuetext",(0,_formatTime2["default"])(time,this.player_.duration()))};SeekBar.prototype.getPercent=function getPercent(){var percent=this.player_.currentTime()/this.player_.duration();return percent>=1?1:percent};SeekBar.prototype.handleMouseDown=function handleMouseDown(event){this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();_Slider.prototype.handleMouseDown.call(this,event)};SeekBar.prototype.handleMouseMove=function handleMouseMove(event){var newTime=this.calculateDistance(event)*this.player_.duration();if(newTime===this.player_.duration()){newTime=newTime-.1}this.player_.currentTime(newTime)};SeekBar.prototype.handleMouseUp=function handleMouseUp(event){_Slider.prototype.handleMouseUp.call(this,event);this.player_.scrubbing(false);if(this.videoWasPlaying){this.player_.play()}};SeekBar.prototype.stepForward=function stepForward(){this.player_.currentTime(this.player_.currentTime()+5)};SeekBar.prototype.stepBack=function stepBack(){this.player_.currentTime(this.player_.currentTime()-5)};return SeekBar}(_slider2["default"]);SeekBar.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"};SeekBar.prototype.playerEvent="timeupdate";_component2["default"].registerComponent("SeekBar",SeekBar);exports["default"]=SeekBar},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _obj=__webpack_require__(228);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Slider=function(_Component){_inherits(Slider,_Component);function Slider(player,options){_classCallCheck(this,Slider);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.bar=_this.getChild(_this.options_.barName);_this.vertical(!!_this.options_.vertical);_this.on("mousedown",_this.handleMouseDown);_this.on("touchstart",_this.handleMouseDown);_this.on("focus",_this.handleFocus);_this.on("blur",_this.handleBlur);_this.on("click",_this.handleClick);_this.on(player,"controlsvisible",_this.update);_this.on(player,_this.playerEvent,_this.update);return _this}Slider.prototype.createEl=function createEl(type){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};props.className=props.className+" vjs-slider";props=(0,_obj.assign)({tabIndex:0},props);attributes=(0,_obj.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},attributes);return _Component.prototype.createEl.call(this,type,props,attributes)};Slider.prototype.handleMouseDown=function handleMouseDown(event){var doc=this.bar.el_.ownerDocument;event.preventDefault();Dom.blockTextSelection();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(doc,"mousemove",this.handleMouseMove);this.on(doc,"mouseup",this.handleMouseUp);this.on(doc,"touchmove",this.handleMouseMove);this.on(doc,"touchend",this.handleMouseUp);this.handleMouseMove(event)};Slider.prototype.handleMouseMove=function handleMouseMove(event){};Slider.prototype.handleMouseUp=function handleMouseUp(){var doc=this.bar.el_.ownerDocument;Dom.unblockTextSelection();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(doc,"mousemove",this.handleMouseMove);this.off(doc,"mouseup",this.handleMouseUp);this.off(doc,"touchmove",this.handleMouseMove);this.off(doc,"touchend",this.handleMouseUp);this.update()};Slider.prototype.update=function update(){if(!this.el_){return}var progress=this.getPercent();var bar=this.bar;if(!bar){return}if(typeof progress!=="number"||progress!==progress||progress<0||progress===Infinity){progress=0}var percentage=(progress*100).toFixed(2)+"%";if(this.vertical()){bar.el().style.height=percentage}else{bar.el().style.width=percentage}};Slider.prototype.calculateDistance=function calculateDistance(event){var position=Dom.getPointerPosition(this.el_,event);if(this.vertical()){return position.y}return position.x};Slider.prototype.handleFocus=function handleFocus(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};Slider.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===37||event.which===40){event.preventDefault();this.stepBack()}else if(event.which===38||event.which===39){event.preventDefault();this.stepForward()}};Slider.prototype.handleBlur=function handleBlur(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};Slider.prototype.handleClick=function handleClick(event){event.stopImmediatePropagation();event.preventDefault()};Slider.prototype.vertical=function vertical(bool){if(bool===undefined){return this.vertical_||false}this.vertical_=!!bool;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}return this};return Slider}(_component2["default"]);_component2["default"].registerComponent("Slider",Slider);exports["default"]=Slider},function(module,exports,__webpack_require__){exports.__esModule=true;exports["default"]=computedStyle;var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function computedStyle(el,prop){if(!el||!prop){return""}if(typeof _window2["default"].getComputedStyle==="function"){var cs=_window2["default"].getComputedStyle(el);return cs?cs[prop]:""}return el.currentStyle[prop]||""}},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var LoadProgressBar=function(_Component){_inherits(LoadProgressBar,_Component);function LoadProgressBar(player,options){_classCallCheck(this,LoadProgressBar);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.partEls_=[];_this.on(player,"progress",_this.update);return _this}LoadProgressBar.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})};LoadProgressBar.prototype.update=function update(event){var buffered=this.player_.buffered();var duration=this.player_.duration();var bufferedEnd=this.player_.bufferedEnd();var children=this.partEls_;var percentify=function percentify(time,end){var percent=time/end||0;return(percent>=1?1:percent)*100+"%"};this.el_.style.width=percentify(bufferedEnd,duration);for(var i=0;i<buffered.length;i++){var start=buffered.start(i);var end=buffered.end(i);var part=children[i];if(!part){part=this.el_.appendChild(Dom.createEl());children[i]=part}part.style.left=percentify(start,bufferedEnd);part.style.width=percentify(end-start,bufferedEnd)}for(var _i=children.length;_i>buffered.length;_i--){this.el_.removeChild(children[_i-1])}children.length=buffered.length};return LoadProgressBar}(_component2["default"]);_component2["default"].registerComponent("LoadProgressBar",LoadProgressBar);exports["default"]=LoadProgressBar},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PlayProgressBar=function(_Component){_inherits(PlayProgressBar,_Component);function PlayProgressBar(player,options){_classCallCheck(this,PlayProgressBar);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.updateDataAttr();_this.on(player,"timeupdate",_this.updateDataAttr);player.ready(Fn.bind(_this,_this.updateDataAttr));if(options.playerOptions&&options.playerOptions.controlBar&&options.playerOptions.controlBar.progressControl&&options.playerOptions.controlBar.progressControl.keepTooltipsInside){_this.keepTooltipsInside=options.playerOptions.controlBar.progressControl.keepTooltipsInside}if(_this.keepTooltipsInside){_this.addClass("vjs-keep-tooltips-inside")}return _this}PlayProgressBar.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})};PlayProgressBar.prototype.updateDataAttr=function updateDataAttr(event){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,_formatTime2["default"])(time,this.player_.duration()))};return PlayProgressBar}(_component2["default"]);_component2["default"].registerComponent("PlayProgressBar",PlayProgressBar);exports["default"]=PlayProgressBar},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TooltipProgressBar=function(_Component){_inherits(TooltipProgressBar,_Component);function TooltipProgressBar(player,options){_classCallCheck(this,TooltipProgressBar);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.updateDataAttr();_this.on(player,"timeupdate",_this.updateDataAttr);player.ready(Fn.bind(_this,_this.updateDataAttr));return _this}TooltipProgressBar.prototype.createEl=function createEl(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});this.tooltip=el.querySelector(".vjs-time-tooltip");return el};TooltipProgressBar.prototype.updateDataAttr=function updateDataAttr(event){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();var formattedTime=(0,_formatTime2["default"])(time,this.player_.duration());this.el_.setAttribute("data-current-time",formattedTime);this.tooltip.innerHTML=formattedTime};return TooltipProgressBar}(_component2["default"]);_component2["default"].registerComponent("TooltipProgressBar",TooltipProgressBar);exports["default"]=TooltipProgressBar},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _formatTime=__webpack_require__(283);var _formatTime2=_interopRequireDefault(_formatTime);var _computedStyle=__webpack_require__(291);var _computedStyle2=_interopRequireDefault(_computedStyle);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){
if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MouseTimeDisplay=function(_Component){_inherits(MouseTimeDisplay,_Component);function MouseTimeDisplay(player,options){_classCallCheck(this,MouseTimeDisplay);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));if(options.playerOptions&&options.playerOptions.controlBar&&options.playerOptions.controlBar.progressControl&&options.playerOptions.controlBar.progressControl.keepTooltipsInside){_this.keepTooltipsInside=options.playerOptions.controlBar.progressControl.keepTooltipsInside}if(_this.keepTooltipsInside){_this.tooltip=Dom.createEl("div",{className:"vjs-time-tooltip"});_this.el().appendChild(_this.tooltip);_this.addClass("vjs-keep-tooltips-inside")}_this.update(0,0);player.on("ready",function(){_this.on(player.controlBar.progressControl.el(),"mousemove",Fn.throttle(Fn.bind(_this,_this.handleMouseMove),25))});return _this}MouseTimeDisplay.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};MouseTimeDisplay.prototype.handleMouseMove=function handleMouseMove(event){var duration=this.player_.duration();var newTime=this.calculateDistance(event)*duration;var position=event.pageX-Dom.findElPosition(this.el().parentNode).left;this.update(newTime,position)};MouseTimeDisplay.prototype.update=function update(newTime,position){var time=(0,_formatTime2["default"])(newTime,this.player_.duration());this.el().style.left=position+"px";this.el().setAttribute("data-current-time",time);if(this.keepTooltipsInside){var clampedPosition=this.clampPosition_(position);var difference=position-clampedPosition+1;var tooltipWidth=parseFloat((0,_computedStyle2["default"])(this.tooltip,"width"));var tooltipWidthHalf=tooltipWidth/2;this.tooltip.innerHTML=time;this.tooltip.style.right="-"+(tooltipWidthHalf-difference)+"px"}};MouseTimeDisplay.prototype.calculateDistance=function calculateDistance(event){return Dom.getPointerPosition(this.el().parentNode,event).x};MouseTimeDisplay.prototype.clampPosition_=function clampPosition_(position){if(!this.keepTooltipsInside){return position}var playerWidth=parseFloat((0,_computedStyle2["default"])(this.player().el(),"width"));var tooltipWidth=parseFloat((0,_computedStyle2["default"])(this.tooltip,"width"));var tooltipWidthHalf=tooltipWidth/2;var actualPosition=position;if(position<tooltipWidthHalf){actualPosition=Math.ceil(tooltipWidthHalf)}else if(position>playerWidth-tooltipWidthHalf){actualPosition=Math.floor(playerWidth-tooltipWidthHalf)}return actualPosition};return MouseTimeDisplay}(_component2["default"]);_component2["default"].registerComponent("MouseTimeDisplay",MouseTimeDisplay);exports["default"]=MouseTimeDisplay},function(module,exports,__webpack_require__){exports.__esModule=true;var _button=__webpack_require__(278);var _button2=_interopRequireDefault(_button);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FullscreenToggle=function(_Button){_inherits(FullscreenToggle,_Button);function FullscreenToggle(player,options){_classCallCheck(this,FullscreenToggle);var _this=_possibleConstructorReturn(this,_Button.call(this,player,options));_this.on(player,"fullscreenchange",_this.handleFullscreenChange);return _this}FullscreenToggle.prototype.buildCSSClass=function buildCSSClass(){return"vjs-fullscreen-control "+_Button.prototype.buildCSSClass.call(this)};FullscreenToggle.prototype.handleFullscreenChange=function handleFullscreenChange(event){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};FullscreenToggle.prototype.handleClick=function handleClick(event){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return FullscreenToggle}(_button2["default"]);FullscreenToggle.prototype.controlText_="Fullscreen";_component2["default"].registerComponent("FullscreenToggle",FullscreenToggle);exports["default"]=FullscreenToggle},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);__webpack_require__(298);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VolumeControl=function(_Component){_inherits(VolumeControl,_Component);function VolumeControl(player,options){_classCallCheck(this,VolumeControl);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));if(player.tech_&&player.tech_.featuresVolumeControl===false){_this.addClass("vjs-hidden")}_this.on(player,"loadstart",function(){if(player.tech_.featuresVolumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}});return _this}VolumeControl.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})};return VolumeControl}(_component2["default"]);VolumeControl.prototype.options_={children:["volumeBar"]};_component2["default"].registerComponent("VolumeControl",VolumeControl);exports["default"]=VolumeControl},function(module,exports,__webpack_require__){exports.__esModule=true;var _slider=__webpack_require__(290);var _slider2=_interopRequireDefault(_slider);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);__webpack_require__(299);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VolumeBar=function(_Slider){_inherits(VolumeBar,_Slider);function VolumeBar(player,options){_classCallCheck(this,VolumeBar);var _this=_possibleConstructorReturn(this,_Slider.call(this,player,options));_this.on(player,"volumechange",_this.updateARIAAttributes);player.ready(Fn.bind(_this,_this.updateARIAAttributes));return _this}VolumeBar.prototype.createEl=function createEl(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})};VolumeBar.prototype.handleMouseMove=function handleMouseMove(event){this.checkMuted();this.player_.volume(this.calculateDistance(event))};VolumeBar.prototype.checkMuted=function checkMuted(){if(this.player_.muted()){this.player_.muted(false)}};VolumeBar.prototype.getPercent=function getPercent(){if(this.player_.muted()){return 0}return this.player_.volume()};VolumeBar.prototype.stepForward=function stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};VolumeBar.prototype.stepBack=function stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};VolumeBar.prototype.updateARIAAttributes=function updateARIAAttributes(event){var volume=(this.player_.volume()*100).toFixed(2);this.el_.setAttribute("aria-valuenow",volume);this.el_.setAttribute("aria-valuetext",volume+"%")};return VolumeBar}(_slider2["default"]);VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};VolumeBar.prototype.playerEvent="volumechange";_component2["default"].registerComponent("VolumeBar",VolumeBar);exports["default"]=VolumeBar},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VolumeLevel=function(_Component){_inherits(VolumeLevel,_Component);function VolumeLevel(){_classCallCheck(this,VolumeLevel);return _possibleConstructorReturn(this,_Component.apply(this,arguments))}VolumeLevel.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return VolumeLevel}(_component2["default"]);_component2["default"].registerComponent("VolumeLevel",VolumeLevel);exports["default"]=VolumeLevel},function(module,exports,__webpack_require__){exports.__esModule=true;var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _popup=__webpack_require__(301);var _popup2=_interopRequireDefault(_popup);var _popupButton=__webpack_require__(302);var _popupButton2=_interopRequireDefault(_popupButton);var _muteToggle=__webpack_require__(303);var _muteToggle2=_interopRequireDefault(_muteToggle);var _volumeBar=__webpack_require__(298);var _volumeBar2=_interopRequireDefault(_volumeBar);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VolumeMenuButton=function(_PopupButton){_inherits(VolumeMenuButton,_PopupButton);function VolumeMenuButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,VolumeMenuButton);if(options.inline===undefined){options.inline=true}if(options.vertical===undefined){if(options.inline){options.vertical=false}else{options.vertical=true}}options.volumeBar=options.volumeBar||{};options.volumeBar.vertical=!!options.vertical;var _this=_possibleConstructorReturn(this,_PopupButton.call(this,player,options));_this.on(player,"volumechange",_this.volumeUpdate);_this.on(player,"loadstart",_this.volumeUpdate);function updateVisibility(){if(player.tech_&&player.tech_.featuresVolumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}}updateVisibility.call(_this);_this.on(player,"loadstart",updateVisibility);_this.on(_this.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")});_this.on(_this.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")});_this.on(_this.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")});_this.on(_this.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")});return _this}VolumeMenuButton.prototype.buildCSSClass=function buildCSSClass(){var orientationClass="";if(this.options_.vertical){orientationClass="vjs-volume-menu-button-vertical"}else{orientationClass="vjs-volume-menu-button-horizontal"}return"vjs-volume-menu-button "+_PopupButton.prototype.buildCSSClass.call(this)+" "+orientationClass};VolumeMenuButton.prototype.createPopup=function createPopup(){var popup=new _popup2["default"](this.player_,{contentElType:"div"});var vb=new _volumeBar2["default"](this.player_,this.options_.volumeBar);popup.addChild(vb);this.menuContent=popup;this.volumeBar=vb;this.attachVolumeBarEvents();return popup};VolumeMenuButton.prototype.handleClick=function handleClick(event){_muteToggle2["default"].prototype.handleClick.call(this);_PopupButton.prototype.handleClick.call(this)};VolumeMenuButton.prototype.attachVolumeBarEvents=function attachVolumeBarEvents(){this.menuContent.on(["mousedown","touchdown"],Fn.bind(this,this.handleMouseDown))};VolumeMenuButton.prototype.handleMouseDown=function handleMouseDown(event){this.on(["mousemove","touchmove"],Fn.bind(this.volumeBar,this.volumeBar.handleMouseMove));this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)};VolumeMenuButton.prototype.handleMouseUp=function handleMouseUp(event){this.off(["mousemove","touchmove"],Fn.bind(this.volumeBar,this.volumeBar.handleMouseMove))};return VolumeMenuButton}(_popupButton2["default"]);VolumeMenuButton.prototype.volumeUpdate=_muteToggle2["default"].prototype.update;VolumeMenuButton.prototype.controlText_="Mute";_component2["default"].registerComponent("VolumeMenuButton",VolumeMenuButton);exports["default"]=VolumeMenuButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Popup=function(_Component){_inherits(Popup,_Component);function Popup(){_classCallCheck(this,Popup);return _possibleConstructorReturn(this,_Component.apply(this,arguments))}Popup.prototype.addItem=function addItem(component){this.addChild(component);component.on("click",Fn.bind(this,function(){this.unlockShowing()}))};Popup.prototype.createEl=function createEl(){var contentElType=this.options_.contentElType||"ul";this.contentEl_=Dom.createEl(contentElType,{className:"vjs-menu-content"});var el=_Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});el.appendChild(this.contentEl_);Events.on(el,"click",function(event){event.preventDefault();event.stopImmediatePropagation()});return el};return Popup}(_component2["default"]);_component2["default"].registerComponent("Popup",Popup);exports["default"]=Popup},function(module,exports,__webpack_require__){exports.__esModule=true;var _clickableComponent=__webpack_require__(274);var _clickableComponent2=_interopRequireDefault(_clickableComponent);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PopupButton=function(_ClickableComponent){_inherits(PopupButton,_ClickableComponent);function PopupButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,PopupButton);var _this=_possibleConstructorReturn(this,_ClickableComponent.call(this,player,options));_this.update();return _this}PopupButton.prototype.update=function update(){var popup=this.createPopup();if(this.popup){this.removeChild(this.popup)}this.popup=popup;this.addChild(popup);if(this.items&&this.items.length===0){this.hide()}else if(this.items&&this.items.length>1){this.show()}};PopupButton.prototype.createPopup=function createPopup(){};PopupButton.prototype.createEl=function createEl(){return _ClickableComponent.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};PopupButton.prototype.buildCSSClass=function buildCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline"}else{menuButtonClass+="-popup"}return"vjs-menu-button "+menuButtonClass+" "+_ClickableComponent.prototype.buildCSSClass.call(this)};return PopupButton}(_clickableComponent2["default"]);_component2["default"].registerComponent("PopupButton",PopupButton);exports["default"]=PopupButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _button=__webpack_require__(278);var _button2=_interopRequireDefault(_button);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MuteToggle=function(_Button){_inherits(MuteToggle,_Button);function MuteToggle(player,options){_classCallCheck(this,MuteToggle);var _this=_possibleConstructorReturn(this,_Button.call(this,player,options));_this.on(player,"volumechange",_this.update);if(player.tech_&&player.tech_.featuresVolumeControl===false){_this.addClass("vjs-hidden")}_this.on(player,"loadstart",function(){this.update();if(player.tech_.featuresVolumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}});return _this}MuteToggle.prototype.buildCSSClass=function buildCSSClass(){return"vjs-mute-control "+_Button.prototype.buildCSSClass.call(this)};MuteToggle.prototype.handleClick=function handleClick(event){this.player_.muted(this.player_.muted()?false:true)};MuteToggle.prototype.update=function update(event){var vol=this.player_.volume();var level=3;if(this.player_.muted()){level=0}else if(vol<.33){level=1}else if(vol<.67){level=2}var toMute=this.player_.muted()?"Unmute":"Mute";if(this.controlText()!==toMute){this.controlText(toMute)}for(var i=0;i<4;i++){Dom.removeElClass(this.el_,"vjs-vol-"+i)}Dom.addElClass(this.el_,"vjs-vol-"+level)};return MuteToggle}(_button2["default"]);MuteToggle.prototype.controlText_="Mute";_component2["default"].registerComponent("MuteToggle",MuteToggle);exports["default"]=MuteToggle},function(module,exports,__webpack_require__){exports.__esModule=true;var _textTrackButton=__webpack_require__(305);var _textTrackButton2=_interopRequireDefault(_textTrackButton);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _chaptersTrackMenuItem=__webpack_require__(312);var _chaptersTrackMenuItem2=_interopRequireDefault(_chaptersTrackMenuItem);var _toTitleCase=__webpack_require__(235);var _toTitleCase2=_interopRequireDefault(_toTitleCase);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ChaptersButton=function(_TextTrackButton){_inherits(ChaptersButton,_TextTrackButton);function ChaptersButton(player,options,ready){_classCallCheck(this,ChaptersButton);var _this=_possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));_this.el_.setAttribute("aria-label","Chapters Menu");return _this}ChaptersButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};ChaptersButton.prototype.update=function update(event){if(!this.track_||event&&(event.type==="addtrack"||event.type==="removetrack")){this.setTrack(this.findChaptersTrack())}_TextTrackButton.prototype.update.call(this)};ChaptersButton.prototype.setTrack=function setTrack(track){if(this.track_===track){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(remoteTextTrackEl){remoteTextTrackEl.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=track;if(this.track_){this.track_.mode="hidden";var _remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(_remoteTextTrackEl){_remoteTextTrackEl.addEventListener("load",this.updateHandler_)}}};ChaptersButton.prototype.findChaptersTrack=function findChaptersTrack(){var tracks=this.player_.textTracks()||[];for(var i=tracks.length-1;i>=0;i--){var track=tracks[i];if(track.kind===this.kind_){return track}}};ChaptersButton.prototype.getMenuCaption=function getMenuCaption(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize((0,_toTitleCase2["default"])(this.kind_))};ChaptersButton.prototype.createMenu=function createMenu(){this.options_.title=this.getMenuCaption();return _TextTrackButton.prototype.createMenu.call(this)};ChaptersButton.prototype.createItems=function createItems(){var items=[];if(!this.track_){return items}var cues=this.track_.cues;if(!cues){return items}for(var i=0,l=cues.length;i<l;i++){var cue=cues[i];var mi=new _chaptersTrackMenuItem2["default"](this.player_,{track:this.track_,cue:cue});items.push(mi)}return items};return ChaptersButton}(_textTrackButton2["default"]);ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";_component2["default"].registerComponent("ChaptersButton",ChaptersButton);exports["default"]=ChaptersButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _trackButton=__webpack_require__(306);var _trackButton2=_interopRequireDefault(_trackButton);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _textTrackMenuItem=__webpack_require__(309);var _textTrackMenuItem2=_interopRequireDefault(_textTrackMenuItem);var _offTextTrackMenuItem=__webpack_require__(311);var _offTextTrackMenuItem2=_interopRequireDefault(_offTextTrackMenuItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TextTrackButton=function(_TrackButton){_inherits(TextTrackButton,_TrackButton);function TextTrackButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,TextTrackButton);options.tracks=player.textTracks();return _possibleConstructorReturn(this,_TrackButton.call(this,player,options))}TextTrackButton.prototype.createItems=function createItems(){var items=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];items.push(new _offTextTrackMenuItem2["default"](this.player_,{kind:this.kind_}));this.hideThreshold_+=1;var tracks=this.player_.textTracks();if(!tracks){return items}for(var i=0;i<tracks.length;i++){var track=tracks[i];if(track.kind===this.kind_){items.push(new _textTrackMenuItem2["default"](this.player_,{track:track,selectable:true}))}}return items};return TextTrackButton}(_trackButton2["default"]);_component2["default"].registerComponent("TextTrackButton",TextTrackButton);exports["default"]=TextTrackButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _menuButton=__webpack_require__(307);var _menuButton2=_interopRequireDefault(_menuButton);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj;
}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TrackButton=function(_MenuButton){_inherits(TrackButton,_MenuButton);function TrackButton(player,options){_classCallCheck(this,TrackButton);var tracks=options.tracks;var _this=_possibleConstructorReturn(this,_MenuButton.call(this,player,options));if(_this.items.length<=1){_this.hide()}if(!tracks){return _possibleConstructorReturn(_this)}var updateHandler=Fn.bind(_this,_this.update);tracks.addEventListener("removetrack",updateHandler);tracks.addEventListener("addtrack",updateHandler);_this.player_.on("dispose",function(){tracks.removeEventListener("removetrack",updateHandler);tracks.removeEventListener("addtrack",updateHandler)});return _this}return TrackButton}(_menuButton2["default"]);_component2["default"].registerComponent("TrackButton",TrackButton);exports["default"]=TrackButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _clickableComponent=__webpack_require__(274);var _clickableComponent2=_interopRequireDefault(_clickableComponent);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _menu=__webpack_require__(308);var _menu2=_interopRequireDefault(_menu);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _toTitleCase=__webpack_require__(235);var _toTitleCase2=_interopRequireDefault(_toTitleCase);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MenuButton=function(_ClickableComponent){_inherits(MenuButton,_ClickableComponent);function MenuButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,MenuButton);var _this=_possibleConstructorReturn(this,_ClickableComponent.call(this,player,options));_this.update();_this.enabled_=true;_this.el_.setAttribute("aria-haspopup","true");_this.el_.setAttribute("role","menuitem");_this.on("keydown",_this.handleSubmenuKeyPress);return _this}MenuButton.prototype.update=function update(){var menu=this.createMenu();if(this.menu){this.removeChild(this.menu)}this.menu=menu;this.addChild(menu);this.buttonPressed_=false;this.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};MenuButton.prototype.createMenu=function createMenu(){var menu=new _menu2["default"](this.player_);this.hideThreshold_=0;if(this.options_.title){var title=Dom.createEl("li",{className:"vjs-menu-title",innerHTML:(0,_toTitleCase2["default"])(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;menu.children_.unshift(title);Dom.insertElFirst(title,menu.contentEl())}this.items=this.createItems();if(this.items){for(var i=0;i<this.items.length;i++){menu.addItem(this.items[i])}}return menu};MenuButton.prototype.createItems=function createItems(){};MenuButton.prototype.createEl=function createEl(){return _ClickableComponent.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};MenuButton.prototype.buildCSSClass=function buildCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline"}else{menuButtonClass+="-popup"}return"vjs-menu-button "+menuButtonClass+" "+_ClickableComponent.prototype.buildCSSClass.call(this)};MenuButton.prototype.handleClick=function handleClick(event){this.one(this.menu.contentEl(),"mouseleave",Fn.bind(this,function(e){this.unpressButton();this.el_.blur()}));if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};MenuButton.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===27||event.which===9){if(this.buttonPressed_){this.unpressButton()}if(event.which!==9){event.preventDefault()}}else if(event.which===38||event.which===40){if(!this.buttonPressed_){this.pressButton();event.preventDefault()}}else{_ClickableComponent.prototype.handleKeyPress.call(this,event)}};MenuButton.prototype.handleSubmenuKeyPress=function handleSubmenuKeyPress(event){if(event.which===27||event.which===9){if(this.buttonPressed_){this.unpressButton()}if(event.which!==9){event.preventDefault()}}};MenuButton.prototype.pressButton=function pressButton(){if(this.enabled_){this.buttonPressed_=true;this.menu.lockShowing();this.el_.setAttribute("aria-expanded","true");this.menu.focus()}};MenuButton.prototype.unpressButton=function unpressButton(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-expanded","false");this.el_.focus()}};MenuButton.prototype.disable=function disable(){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-expanded","false");this.enabled_=false;return _ClickableComponent.prototype.disable.call(this)};MenuButton.prototype.enable=function enable(){this.enabled_=true;return _ClickableComponent.prototype.enable.call(this)};return MenuButton}(_clickableComponent2["default"]);_component2["default"].registerComponent("MenuButton",MenuButton);exports["default"]=MenuButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _events=__webpack_require__(231);var Events=_interopRequireWildcard(_events);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Menu=function(_Component){_inherits(Menu,_Component);function Menu(player,options){_classCallCheck(this,Menu);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.focusedChild_=-1;_this.on("keydown",_this.handleKeyPress);return _this}Menu.prototype.addItem=function addItem(component){this.addChild(component);component.on("click",Fn.bind(this,function(event){this.unlockShowing()}))};Menu.prototype.createEl=function createEl(){var contentElType=this.options_.contentElType||"ul";this.contentEl_=Dom.createEl(contentElType,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var el=_Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});el.setAttribute("role","presentation");el.appendChild(this.contentEl_);Events.on(el,"click",function(event){event.preventDefault();event.stopImmediatePropagation()});return el};Menu.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===37||event.which===40){event.preventDefault();this.stepForward()}else if(event.which===38||event.which===39){event.preventDefault();this.stepBack()}};Menu.prototype.stepForward=function stepForward(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_+1}this.focus(stepChild)};Menu.prototype.stepBack=function stepBack(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_-1}this.focus(stepChild)};Menu.prototype.focus=function focus(){var item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var children=this.children().slice();var haveTitle=children.length&&children[0].className&&/vjs-menu-title/.test(children[0].className);if(haveTitle){children.shift()}if(children.length>0){if(item<0){item=0}else if(item>=children.length){item=children.length-1}this.focusedChild_=item;children[item].el_.focus()}};return Menu}(_component2["default"]);_component2["default"].registerComponent("Menu",Menu);exports["default"]=Menu},function(module,exports,__webpack_require__){exports.__esModule=true;var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj)};var _menuItem=__webpack_require__(310);var _menuItem2=_interopRequireDefault(_menuItem);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TextTrackMenuItem=function(_MenuItem){_inherits(TextTrackMenuItem,_MenuItem);function TextTrackMenuItem(player,options){_classCallCheck(this,TextTrackMenuItem);var track=options.track;var tracks=player.textTracks();options.label=track.label||track.language||"Unknown";options.selected=track["default"]||track.mode==="showing";var _this=_possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.track=track;if(tracks){var changeHandler=Fn.bind(_this,_this.handleTracksChange);player.on(["loadstart","texttrackchange"],changeHandler);tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler)})}if(tracks&&tracks.onchange===undefined){var event=void 0;_this.on(["tap","click"],function(){if(_typeof(_window2["default"].Event)!=="object"){try{event=new _window2["default"].Event("change")}catch(err){}}if(!event){event=_document2["default"].createEvent("Event");event.initEvent("change",true,true)}tracks.dispatchEvent(event)})}return _this}TextTrackMenuItem.prototype.handleClick=function handleClick(event){var kind=this.track.kind;var tracks=this.player_.textTracks();_MenuItem.prototype.handleClick.call(this,event);if(!tracks){return}for(var i=0;i<tracks.length;i++){var track=tracks[i];if(track.kind!==kind){continue}if(track===this.track){if(track.mode!=="showing"){track.mode="showing"}}else if(track.mode!=="disabled"){track.mode="disabled"}}};TextTrackMenuItem.prototype.handleTracksChange=function handleTracksChange(event){this.selected(this.track.mode==="showing")};return TextTrackMenuItem}(_menuItem2["default"]);_component2["default"].registerComponent("TextTrackMenuItem",TextTrackMenuItem);exports["default"]=TextTrackMenuItem},function(module,exports,__webpack_require__){exports.__esModule=true;var _clickableComponent=__webpack_require__(274);var _clickableComponent2=_interopRequireDefault(_clickableComponent);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _obj=__webpack_require__(228);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MenuItem=function(_ClickableComponent){_inherits(MenuItem,_ClickableComponent);function MenuItem(player,options){_classCallCheck(this,MenuItem);var _this=_possibleConstructorReturn(this,_ClickableComponent.call(this,player,options));_this.selectable=options.selectable;_this.selected(options.selected);if(_this.selectable){_this.el_.setAttribute("role","menuitemcheckbox")}else{_this.el_.setAttribute("role","menuitem")}return _this}MenuItem.prototype.createEl=function createEl(type,props,attrs){this.nonIconControl=true;return _ClickableComponent.prototype.createEl.call(this,"li",(0,_obj.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},props),attrs)};MenuItem.prototype.handleClick=function handleClick(event){this.selected(true)};MenuItem.prototype.selected=function selected(_selected){if(this.selectable){if(_selected){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected")}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText(" ")}}};return MenuItem}(_clickableComponent2["default"]);_component2["default"].registerComponent("MenuItem",MenuItem);exports["default"]=MenuItem},function(module,exports,__webpack_require__){exports.__esModule=true;var _textTrackMenuItem=__webpack_require__(309);var _textTrackMenuItem2=_interopRequireDefault(_textTrackMenuItem);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var OffTextTrackMenuItem=function(_TextTrackMenuItem){_inherits(OffTextTrackMenuItem,_TextTrackMenuItem);function OffTextTrackMenuItem(player,options){_classCallCheck(this,OffTextTrackMenuItem);options.track={player:player,kind:options.kind,label:options.kind+" off","default":false,mode:"disabled"};options.selectable=true;var _this=_possibleConstructorReturn(this,_TextTrackMenuItem.call(this,player,options));_this.selected(true);return _this}OffTextTrackMenuItem.prototype.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var selected=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind===this.track.kind&&track.mode==="showing"){selected=false;break}}this.selected(selected)};return OffTextTrackMenuItem}(_textTrackMenuItem2["default"]);_component2["default"].registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);exports["default"]=OffTextTrackMenuItem},function(module,exports,__webpack_require__){exports.__esModule=true;var _menuItem=__webpack_require__(310);var _menuItem2=_interopRequireDefault(_menuItem);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ChaptersTrackMenuItem=function(_MenuItem){_inherits(ChaptersTrackMenuItem,_MenuItem);function ChaptersTrackMenuItem(player,options){_classCallCheck(this,ChaptersTrackMenuItem);var track=options.track;var cue=options.cue;var currentTime=player.currentTime();options.selectable=true;options.label=cue.text;options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime;var _this=_possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.track=track;_this.cue=cue;track.addEventListener("cuechange",Fn.bind(_this,_this.update));return _this}ChaptersTrackMenuItem.prototype.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};ChaptersTrackMenuItem.prototype.update=function update(event){var cue=this.cue;var currentTime=this.player_.currentTime();this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime)};return ChaptersTrackMenuItem}(_menuItem2["default"]);_component2["default"].registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);exports["default"]=ChaptersTrackMenuItem},function(module,exports,__webpack_require__){exports.__esModule=true;var _textTrackButton=__webpack_require__(305);var _textTrackButton2=_interopRequireDefault(_textTrackButton);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DescriptionsButton=function(_TextTrackButton){_inherits(DescriptionsButton,_TextTrackButton);function DescriptionsButton(player,options,ready){_classCallCheck(this,DescriptionsButton);var _this=_possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));_this.el_.setAttribute("aria-label","Descriptions Menu");var tracks=player.textTracks();if(tracks){var changeHandler=Fn.bind(_this,_this.handleTracksChange);tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler)})}return _this}DescriptionsButton.prototype.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var disabled=false;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind!==this.kind_&&track.mode==="showing"){disabled=true;break}}if(disabled){this.disable()}else{this.enable()}};DescriptionsButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};return DescriptionsButton}(_textTrackButton2["default"]);DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";_component2["default"].registerComponent("DescriptionsButton",DescriptionsButton);exports["default"]=DescriptionsButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _textTrackButton=__webpack_require__(305);var _textTrackButton2=_interopRequireDefault(_textTrackButton);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SubtitlesButton=function(_TextTrackButton){_inherits(SubtitlesButton,_TextTrackButton);function SubtitlesButton(player,options,ready){_classCallCheck(this,SubtitlesButton);var _this=_possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));_this.el_.setAttribute("aria-label","Subtitles Menu");return _this}SubtitlesButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};return SubtitlesButton}(_textTrackButton2["default"]);SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";_component2["default"].registerComponent("SubtitlesButton",SubtitlesButton);exports["default"]=SubtitlesButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _textTrackButton=__webpack_require__(305);var _textTrackButton2=_interopRequireDefault(_textTrackButton);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _captionSettingsMenuItem=__webpack_require__(316);var _captionSettingsMenuItem2=_interopRequireDefault(_captionSettingsMenuItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CaptionsButton=function(_TextTrackButton){_inherits(CaptionsButton,_TextTrackButton);function CaptionsButton(player,options,ready){_classCallCheck(this,CaptionsButton);var _this=_possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));_this.el_.setAttribute("aria-label","Captions Menu");return _this}CaptionsButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};CaptionsButton.prototype.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)){items.push(new _captionSettingsMenuItem2["default"](this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return _TextTrackButton.prototype.createItems.call(this,items)};return CaptionsButton}(_textTrackButton2["default"]);CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";_component2["default"].registerComponent("CaptionsButton",CaptionsButton);exports["default"]=CaptionsButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _textTrackMenuItem=__webpack_require__(309);var _textTrackMenuItem2=_interopRequireDefault(_textTrackMenuItem);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CaptionSettingsMenuItem=function(_TextTrackMenuItem){_inherits(CaptionSettingsMenuItem,_TextTrackMenuItem);function CaptionSettingsMenuItem(player,options){_classCallCheck(this,CaptionSettingsMenuItem);options.track={player:player,kind:options.kind,label:options.kind+" settings",selectable:false,"default":false,mode:"disabled"};options.selectable=false;var _this=_possibleConstructorReturn(this,_TextTrackMenuItem.call(this,player,options));_this.addClass("vjs-texttrack-settings");_this.controlText(", opens "+options.kind+" settings dialog");return _this}CaptionSettingsMenuItem.prototype.handleClick=function handleClick(event){this.player().getChild("textTrackSettings").show();this.player().getChild("textTrackSettings").el_.focus()};return CaptionSettingsMenuItem}(_textTrackMenuItem2["default"]);_component2["default"].registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);exports["default"]=CaptionSettingsMenuItem},function(module,exports,__webpack_require__){exports.__esModule=true;var _trackButton=__webpack_require__(306);var _trackButton2=_interopRequireDefault(_trackButton);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _audioTrackMenuItem=__webpack_require__(318);var _audioTrackMenuItem2=_interopRequireDefault(_audioTrackMenuItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){
if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var AudioTrackButton=function(_TrackButton){_inherits(AudioTrackButton,_TrackButton);function AudioTrackButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,AudioTrackButton);options.tracks=player.audioTracks&&player.audioTracks();var _this=_possibleConstructorReturn(this,_TrackButton.call(this,player,options));_this.el_.setAttribute("aria-label","Audio Menu");return _this}AudioTrackButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildCSSClass.call(this)};AudioTrackButton.prototype.createItems=function createItems(){var items=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.hideThreshold_=1;var tracks=this.player_.audioTracks&&this.player_.audioTracks();if(!tracks){return items}for(var i=0;i<tracks.length;i++){var track=tracks[i];items.push(new _audioTrackMenuItem2["default"](this.player_,{track:track,selectable:true}))}return items};return AudioTrackButton}(_trackButton2["default"]);AudioTrackButton.prototype.controlText_="Audio Track";_component2["default"].registerComponent("AudioTrackButton",AudioTrackButton);exports["default"]=AudioTrackButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _menuItem=__webpack_require__(310);var _menuItem2=_interopRequireDefault(_menuItem);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var AudioTrackMenuItem=function(_MenuItem){_inherits(AudioTrackMenuItem,_MenuItem);function AudioTrackMenuItem(player,options){_classCallCheck(this,AudioTrackMenuItem);var track=options.track;var tracks=player.audioTracks();options.label=track.label||track.language||"Unknown";options.selected=track.enabled;var _this=_possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.track=track;if(tracks){var changeHandler=Fn.bind(_this,_this.handleTracksChange);tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler)})}return _this}AudioTrackMenuItem.prototype.handleClick=function handleClick(event){var tracks=this.player_.audioTracks();_MenuItem.prototype.handleClick.call(this,event);if(!tracks){return}for(var i=0;i<tracks.length;i++){var track=tracks[i];track.enabled=track===this.track}};AudioTrackMenuItem.prototype.handleTracksChange=function handleTracksChange(event){this.selected(this.track.enabled)};return AudioTrackMenuItem}(_menuItem2["default"]);_component2["default"].registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);exports["default"]=AudioTrackMenuItem},function(module,exports,__webpack_require__){exports.__esModule=true;var _menuButton=__webpack_require__(307);var _menuButton2=_interopRequireDefault(_menuButton);var _menu=__webpack_require__(308);var _menu2=_interopRequireDefault(_menu);var _playbackRateMenuItem=__webpack_require__(320);var _playbackRateMenuItem2=_interopRequireDefault(_playbackRateMenuItem);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PlaybackRateMenuButton=function(_MenuButton){_inherits(PlaybackRateMenuButton,_MenuButton);function PlaybackRateMenuButton(player,options){_classCallCheck(this,PlaybackRateMenuButton);var _this=_possibleConstructorReturn(this,_MenuButton.call(this,player,options));_this.updateVisibility();_this.updateLabel();_this.on(player,"loadstart",_this.updateVisibility);_this.on(player,"ratechange",_this.updateLabel);return _this}PlaybackRateMenuButton.prototype.createEl=function createEl(){var el=_MenuButton.prototype.createEl.call(this);this.labelEl_=Dom.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1});el.appendChild(this.labelEl_);return el};PlaybackRateMenuButton.prototype.buildCSSClass=function buildCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildCSSClass.call(this)};PlaybackRateMenuButton.prototype.createMenu=function createMenu(){var menu=new _menu2["default"](this.player());var rates=this.playbackRates();if(rates){for(var i=rates.length-1;i>=0;i--){menu.addChild(new _playbackRateMenuItem2["default"](this.player(),{rate:rates[i]+"x"}))}}return menu};PlaybackRateMenuButton.prototype.updateARIAAttributes=function updateARIAAttributes(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};PlaybackRateMenuButton.prototype.handleClick=function handleClick(event){var currentRate=this.player().playbackRate();var rates=this.playbackRates();var newRate=rates[0];for(var i=0;i<rates.length;i++){if(rates[i]>currentRate){newRate=rates[i];break}}this.player().playbackRate(newRate)};PlaybackRateMenuButton.prototype.playbackRates=function playbackRates(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};PlaybackRateMenuButton.prototype.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};PlaybackRateMenuButton.prototype.updateVisibility=function updateVisibility(event){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};PlaybackRateMenuButton.prototype.updateLabel=function updateLabel(event){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return PlaybackRateMenuButton}(_menuButton2["default"]);PlaybackRateMenuButton.prototype.controlText_="Playback Rate";_component2["default"].registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);exports["default"]=PlaybackRateMenuButton},function(module,exports,__webpack_require__){exports.__esModule=true;var _menuItem=__webpack_require__(310);var _menuItem2=_interopRequireDefault(_menuItem);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PlaybackRateMenuItem=function(_MenuItem){_inherits(PlaybackRateMenuItem,_MenuItem);function PlaybackRateMenuItem(player,options){_classCallCheck(this,PlaybackRateMenuItem);var label=options.rate;var rate=parseFloat(label,10);options.label=label;options.selected=rate===1;options.selectable=true;var _this=_possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.label=label;_this.rate=rate;_this.on(player,"ratechange",_this.update);return _this}PlaybackRateMenuItem.prototype.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};PlaybackRateMenuItem.prototype.update=function update(event){this.selected(this.player().playbackRate()===this.rate)};return PlaybackRateMenuItem}(_menuItem2["default"]);PlaybackRateMenuItem.prototype.contentElType="button";_component2["default"].registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);exports["default"]=PlaybackRateMenuItem},function(module,exports,__webpack_require__){exports.__esModule=true;var _spacer=__webpack_require__(322);var _spacer2=_interopRequireDefault(_spacer);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CustomControlSpacer=function(_Spacer){_inherits(CustomControlSpacer,_Spacer);function CustomControlSpacer(){_classCallCheck(this,CustomControlSpacer);return _possibleConstructorReturn(this,_Spacer.apply(this,arguments))}CustomControlSpacer.prototype.buildCSSClass=function buildCSSClass(){return"vjs-custom-control-spacer "+_Spacer.prototype.buildCSSClass.call(this)};CustomControlSpacer.prototype.createEl=function createEl(){var el=_Spacer.prototype.createEl.call(this,{className:this.buildCSSClass()});el.innerHTML="&nbsp;";return el};return CustomControlSpacer}(_spacer2["default"]);_component2["default"].registerComponent("CustomControlSpacer",CustomControlSpacer);exports["default"]=CustomControlSpacer},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Spacer=function(_Component){_inherits(Spacer,_Component);function Spacer(){_classCallCheck(this,Spacer);return _possibleConstructorReturn(this,_Component.apply(this,arguments))}Spacer.prototype.buildCSSClass=function buildCSSClass(){return"vjs-spacer "+_Component.prototype.buildCSSClass.call(this)};Spacer.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return Spacer}(_component2["default"]);_component2["default"].registerComponent("Spacer",Spacer);exports["default"]=Spacer},function(module,exports,__webpack_require__){exports.__esModule=true;var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _modalDialog=__webpack_require__(245);var _modalDialog2=_interopRequireDefault(_modalDialog);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ErrorDisplay=function(_ModalDialog){_inherits(ErrorDisplay,_ModalDialog);function ErrorDisplay(player,options){_classCallCheck(this,ErrorDisplay);var _this=_possibleConstructorReturn(this,_ModalDialog.call(this,player,options));_this.on(player,"error",_this.open);return _this}ErrorDisplay.prototype.buildCSSClass=function buildCSSClass(){return"vjs-error-display "+_ModalDialog.prototype.buildCSSClass.call(this)};ErrorDisplay.prototype.content=function content(){var error=this.player().error();return error?this.localize(error.message):""};return ErrorDisplay}(_modalDialog2["default"]);ErrorDisplay.prototype.options_=(0,_mergeOptions2["default"])(_modalDialog2["default"].prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});_component2["default"].registerComponent("ErrorDisplay",ErrorDisplay);exports["default"]=ErrorDisplay},function(module,exports,__webpack_require__){exports.__esModule=true;var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _obj=__webpack_require__(228);var Obj=_interopRequireWildcard(_obj);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var LOCAL_STORAGE_KEY="vjs-text-track-settings";var COLOR_BLACK=["#000","Black"];var COLOR_BLUE=["#00F","Blue"];var COLOR_CYAN=["#0FF","Cyan"];var COLOR_GREEN=["#0F0","Green"];var COLOR_MAGENTA=["#F0F","Magenta"];var COLOR_RED=["#F00","Red"];var COLOR_WHITE=["#FFF","White"];var COLOR_YELLOW=["#FF0","Yellow"];var OPACITY_OPAQUE=["1","Opaque"];var OPACITY_SEMI=["0.5","Semi-Transparent"];var OPACITY_TRANS=["0","Transparent"];var selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function parser(v){return v==="1.00"?null:Number(v)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(value,parser){if(parser){value=parser(value)}if(value&&value!=="none"){return value}}function getSelectedOptionValue(el,parser){var value=el.options[el.options.selectedIndex].value;return parseOptionValue(value,parser)}function setSelectedOption(el,value,parser){if(!value){return}for(var i=0;i<el.options.length;i++){if(parseOptionValue(el.options[i].value,parser)===value){el.selectedIndex=i;break}}}var TextTrackSettings=function(_Component){_inherits(TextTrackSettings,_Component);function TextTrackSettings(player,options){_classCallCheck(this,TextTrackSettings);var _this=_possibleConstructorReturn(this,_Component.call(this,player,options));_this.setDefaults();_this.hide();_this.updateDisplay=Fn.bind(_this,_this.updateDisplay);if(options.persistTextTrackSettings===undefined){_this.options_.persistTextTrackSettings=_this.options_.playerOptions.persistTextTrackSettings}_this.on(_this.$(".vjs-done-button"),"click",function(){_this.saveSettings();_this.hide()});_this.on(_this.$(".vjs-default-button"),"click",function(){_this.setDefaults();_this.updateDisplay()});Obj.each(selectConfigs,function(config){_this.on(_this.$(config.selector),"change",_this.updateDisplay)});if(_this.options_.persistTextTrackSettings){_this.restoreSettings()}return _this}TextTrackSettings.prototype.createElSelect_=function createElSelect_(key){var _this2=this;var config=selectConfigs[key];var id=config.id.replace("%s",this.id_);return[(0,_dom.createEl)("label",{className:"vjs-label",textContent:config.label},{"for":id}),(0,_dom.createEl)("select",{id:id},undefined,config.options.map(function(o){return(0,_dom.createEl)("option",{textContent:_this2.localize(o[1]),value:o[0]})}))]};TextTrackSettings.prototype.createElFgColor_=function createElFgColor_(){var legend=(0,_dom.createEl)("legend",{textContent:this.localize("Text")});var select=this.createElSelect_("color");var opacity=(0,_dom.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},undefined,this.createElSelect_("textOpacity"));return(0,_dom.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},undefined,[legend].concat(select,opacity))};TextTrackSettings.prototype.createElBgColor_=function createElBgColor_(){var legend=(0,_dom.createEl)("legend",{textContent:this.localize("Background")});var select=this.createElSelect_("backgroundColor");var opacity=(0,_dom.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},undefined,this.createElSelect_("backgroundOpacity"));return(0,_dom.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},undefined,[legend].concat(select,opacity))};TextTrackSettings.prototype.createElWinColor_=function createElWinColor_(){var legend=(0,_dom.createEl)("legend",{textContent:this.localize("Window")});var select=this.createElSelect_("windowColor");var opacity=(0,_dom.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},undefined,this.createElSelect_("windowOpacity"));return(0,_dom.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},undefined,[legend].concat(select,opacity))};TextTrackSettings.prototype.createElColors_=function createElColors_(){return(0,_dom.createEl)("div",{className:"vjs-tracksettings-colors"},undefined,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])};TextTrackSettings.prototype.createElFont_=function createElFont_(){var fontPercent=(0,_dom.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},undefined,this.createElSelect_("fontPercent"));var edgeStyle=(0,_dom.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},undefined,this.createElSelect_("edgeStyle"));var fontFamily=(0,_dom.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},undefined,this.createElSelect_("fontFamily"));return(0,_dom.createEl)("div",{className:"vjs-tracksettings-font"},undefined,[fontPercent,edgeStyle,fontFamily])};TextTrackSettings.prototype.createElControls_=function createElControls_(){var defaultsButton=(0,_dom.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")});var doneButton=(0,_dom.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,_dom.createEl)("div",{className:"vjs-tracksettings-controls"},undefined,[defaultsButton,doneButton])};TextTrackSettings.prototype.createEl=function createEl(){var settings=(0,_dom.createEl)("div",{className:"vjs-tracksettings"},undefined,[this.createElColors_(),this.createElFont_(),this.createElControls_()]);var heading=(0,_dom.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"});var description=(0,_dom.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."});var doc=(0,_dom.createEl)("div",undefined,{role:"document"},[heading,description,settings]);return(0,_dom.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":heading.id,"aria-describedby":description.id},doc)};TextTrackSettings.prototype.getValues=function getValues(){var _this3=this;return Obj.reduce(selectConfigs,function(accum,config,key){var value=getSelectedOptionValue(_this3.$(config.selector),config.parser);if(value!==undefined){accum[key]=value}return accum},{})};TextTrackSettings.prototype.setValues=function setValues(values){var _this4=this;Obj.each(selectConfigs,function(config,key){setSelectedOption(_this4.$(config.selector),values[key],config.parser)})};TextTrackSettings.prototype.setDefaults=function setDefaults(){var _this5=this;Obj.each(selectConfigs,function(config){var index=config.hasOwnProperty("default")?config["default"]:0;_this5.$(config.selector).selectedIndex=index})};TextTrackSettings.prototype.restoreSettings=function restoreSettings(){var values=void 0;try{values=JSON.parse(_window2["default"].localStorage.getItem(LOCAL_STORAGE_KEY))}catch(err){_log2["default"].warn(err)}if(values){this.setValues(values)}};TextTrackSettings.prototype.saveSettings=function saveSettings(){if(!this.options_.persistTextTrackSettings){return}var values=this.getValues();try{if(Object.keys(values).length){_window2["default"].localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(values))}else{_window2["default"].localStorage.removeItem(LOCAL_STORAGE_KEY)}}catch(err){_log2["default"].warn(err)}};TextTrackSettings.prototype.updateDisplay=function updateDisplay(){var ttDisplay=this.player_.getChild("textTrackDisplay");if(ttDisplay){ttDisplay.updateDisplay()}};return TextTrackSettings}(_component2["default"]);_component2["default"].registerComponent("TextTrackSettings",TextTrackSettings);exports["default"]=TextTrackSettings},function(module,exports,__webpack_require__){exports.__esModule=true;var _templateObject=_taggedTemplateLiteralLoose(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);var _tech=__webpack_require__(246);var _tech2=_interopRequireDefault(_tech);var _component=__webpack_require__(233);var _component2=_interopRequireDefault(_component);var _dom=__webpack_require__(225);var Dom=_interopRequireWildcard(_dom);var _url=__webpack_require__(252);var Url=_interopRequireWildcard(_url);var _fn=__webpack_require__(234);var Fn=_interopRequireWildcard(_fn);var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _tsml=__webpack_require__(229);var _tsml2=_interopRequireDefault(_tsml);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);var _document=__webpack_require__(222);var _document2=_interopRequireDefault(_document);var _window=__webpack_require__(221);var _window2=_interopRequireDefault(_window);var _obj=__webpack_require__(228);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);var _toTitleCase=__webpack_require__(235);var _toTitleCase2=_interopRequireDefault(_toTitleCase);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _taggedTemplateLiteralLoose(strings,raw){strings.raw=raw;return strings}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Html5=function(_Tech){_inherits(Html5,_Tech);function Html5(options,ready){_classCallCheck(this,Html5);var _this=_possibleConstructorReturn(this,_Tech.call(this,options,ready));var source=options.source;var crossoriginTracks=false;if(source&&(_this.el_.currentSrc!==source.src||options.tag&&options.tag.initNetworkState_===3)){_this.setSource(source)}else{_this.handleLateInit_(_this.el_)}if(_this.el_.hasChildNodes()){var nodes=_this.el_.childNodes;var nodesLength=nodes.length;var removeNodes=[];while(nodesLength--){var node=nodes[nodesLength];var nodeName=node.nodeName.toLowerCase();if(nodeName==="track"){if(!_this.featuresNativeTextTracks){removeNodes.push(node)}else{_this.remoteTextTrackEls().addTrackElement_(node);_this.remoteTextTracks().addTrack_(node.track);if(!crossoriginTracks&&!_this.el_.hasAttribute("crossorigin")&&Url.isCrossOrigin(node.src)){crossoriginTracks=true}}}}for(var i=0;i<removeNodes.length;i++){_this.el_.removeChild(removeNodes[i])}}var trackTypes=["audio","video"];trackTypes.forEach(function(type){var elTracks=_this.el()[type+"Tracks"];var techTracks=_this[type+"Tracks"]();var capitalType=(0,_toTitleCase2["default"])(type);if(!_this["featuresNative"+capitalType+"Tracks"]||!elTracks||!elTracks.addEventListener){return}_this["handle"+capitalType+"TrackChange_"]=function(e){techTracks.trigger({type:"change",target:techTracks,currentTarget:techTracks,srcElement:techTracks})};_this["handle"+capitalType+"TrackAdd_"]=function(e){return techTracks.addTrack(e.track);
};_this["handle"+capitalType+"TrackRemove_"]=function(e){return techTracks.removeTrack(e.track)};elTracks.addEventListener("change",_this["handle"+capitalType+"TrackChange_"]);elTracks.addEventListener("addtrack",_this["handle"+capitalType+"TrackAdd_"]);elTracks.addEventListener("removetrack",_this["handle"+capitalType+"TrackRemove_"]);_this["removeOld"+capitalType+"Tracks_"]=function(e){return _this.removeOldTracks_(techTracks,elTracks)};_this.on("loadstart",_this["removeOld"+capitalType+"Tracks_"])});if(_this.featuresNativeTextTracks){if(crossoriginTracks){_log2["default"].warn((0,_tsml2["default"])(_templateObject))}_this.handleTextTrackChange_=Fn.bind(_this,_this.handleTextTrackChange);_this.handleTextTrackAdd_=Fn.bind(_this,_this.handleTextTrackAdd);_this.handleTextTrackRemove_=Fn.bind(_this,_this.handleTextTrackRemove);_this.proxyNativeTextTracks_()}_this.restoreMetadataTracksInIOSNativePlayer_();if((browser.TOUCH_ENABLED||browser.IS_IPHONE||browser.IS_NATIVE_ANDROID)&&options.nativeControlsForTouch===true){_this.setControls(true)}_this.proxyWebkitFullscreen_();_this.triggerReady();return _this}Html5.prototype.dispose=function dispose(){var _this2=this;["audio","video","text"].forEach(function(type){var capitalType=(0,_toTitleCase2["default"])(type);var tl=_this2.el_[type+"Tracks"];if(tl&&tl.removeEventListener){tl.removeEventListener("change",_this2["handle"+capitalType+"TrackChange_"]);tl.removeEventListener("addtrack",_this2["handle"+capitalType+"TrackAdd_"]);tl.removeEventListener("removetrack",_this2["handle"+capitalType+"TrackRemove_"])}if(tl){_this2.off("loadstart",_this2["removeOld"+capitalType+"Tracks_"])}});Html5.disposeMediaElement(this.el_);_Tech.prototype.dispose.call(this)};Html5.prototype.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var textTracks=this.textTracks();var metadataTracksPreFullscreenState=void 0;var takeMetadataTrackSnapshot=function takeMetadataTrackSnapshot(){metadataTracksPreFullscreenState=[];for(var i=0;i<textTracks.length;i++){var track=textTracks[i];if(track.kind==="metadata"){metadataTracksPreFullscreenState.push({track:track,storedMode:track.mode})}}};takeMetadataTrackSnapshot();textTracks.addEventListener("change",takeMetadataTrackSnapshot);var restoreTrackMode=function restoreTrackMode(){for(var i=0;i<metadataTracksPreFullscreenState.length;i++){var storedTrack=metadataTracksPreFullscreenState[i];if(storedTrack.track.mode==="disabled"&&storedTrack.track.mode!==storedTrack.storedMode){storedTrack.track.mode=storedTrack.storedMode}}textTracks.removeEventListener("change",restoreTrackMode)};this.on("webkitbeginfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode);textTracks.addEventListener("change",restoreTrackMode)});this.on("webkitendfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.addEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode)})};Html5.prototype.createEl=function createEl(){var el=this.options_.tag;if(!el||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(el){var clone=el.cloneNode(true);if(el.parentNode){el.parentNode.insertBefore(clone,el)}Html5.disposeMediaElement(el);el=clone}else{el=_document2["default"].createElement("video");var tagAttributes=this.options_.tag&&Dom.getElAttributes(this.options_.tag);var attributes=(0,_mergeOptions2["default"])({},tagAttributes);if(!browser.TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete attributes.controls}Dom.setElAttributes(el,(0,_obj.assign)(attributes,{id:this.options_.techId,"class":"vjs-tech"}))}el.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){Dom.setAttribute(el,"preload",this.options_.preload)}var settingsAttrs=["loop","muted","playsinline","autoplay"];for(var i=settingsAttrs.length-1;i>=0;i--){var attr=settingsAttrs[i];var value=this.options_[attr];if(typeof value!=="undefined"){if(value){Dom.setAttribute(el,attr,attr)}else{Dom.removeAttribute(el,attr)}el[attr]=value}}return el};Html5.prototype.handleLateInit_=function handleLateInit_(el){if(el.networkState===0||el.networkState===3){return}if(el.readyState===0){var loadstartFired=false;var setLoadstartFired=function setLoadstartFired(){loadstartFired=true};this.on("loadstart",setLoadstartFired);var triggerLoadstart=function triggerLoadstart(){if(!loadstartFired){this.trigger("loadstart")}};this.on("loadedmetadata",triggerLoadstart);this.ready(function(){this.off("loadstart",setLoadstartFired);this.off("loadedmetadata",triggerLoadstart);if(!loadstartFired){this.trigger("loadstart")}});return}var eventsToTrigger=["loadstart"];eventsToTrigger.push("loadedmetadata");if(el.readyState>=2){eventsToTrigger.push("loadeddata")}if(el.readyState>=3){eventsToTrigger.push("canplay")}if(el.readyState>=4){eventsToTrigger.push("canplaythrough")}this.ready(function(){eventsToTrigger.forEach(function(type){this.trigger(type)},this)})};Html5.prototype.proxyNativeTextTracks_=function proxyNativeTextTracks_(){var tt=this.el().textTracks;if(tt){for(var i=0;i<tt.length;i++){this.textTracks().addTrack_(tt[i])}if(tt.addEventListener){tt.addEventListener("change",this.handleTextTrackChange_);tt.addEventListener("addtrack",this.handleTextTrackAdd_);tt.addEventListener("removetrack",this.handleTextTrackRemove_)}this.on("loadstart",this.removeOldTextTracks_)}};Html5.prototype.handleTextTrackChange=function handleTextTrackChange(e){var tt=this.textTracks();this.textTracks().trigger({type:"change",target:tt,currentTarget:tt,srcElement:tt})};Html5.prototype.handleTextTrackAdd=function handleTextTrackAdd(e){this.textTracks().addTrack_(e.track)};Html5.prototype.handleTextTrackRemove=function handleTextTrackRemove(e){this.textTracks().removeTrack_(e.track)};Html5.prototype.removeOldTracks_=function removeOldTracks_(techTracks,elTracks){var removeTracks=[];if(!elTracks){return}for(var i=0;i<techTracks.length;i++){var techTrack=techTracks[i];var found=false;for(var j=0;j<elTracks.length;j++){if(elTracks[j]===techTrack){found=true;break}}if(!found){removeTracks.push(techTrack)}}for(var _i=0;_i<removeTracks.length;_i++){var track=removeTracks[_i];techTracks.removeTrack_(track)}};Html5.prototype.removeOldTextTracks_=function removeOldTextTracks_(e){var techTracks=this.textTracks();var elTracks=this.el().textTracks;this.removeOldTracks_(techTracks,elTracks)};Html5.prototype.play=function play(){var playPromise=this.el_.play();if(playPromise!==undefined&&typeof playPromise.then==="function"){playPromise.then(null,function(e){})}};Html5.prototype.setCurrentTime=function setCurrentTime(seconds){try{this.el_.currentTime=seconds}catch(e){(0,_log2["default"])(e,"Video is not ready. (Video.js)")}};Html5.prototype.duration=function duration(){var _this3=this;if(this.el_.duration===Infinity&&browser.IS_ANDROID&&browser.IS_CHROME){if(this.el_.currentTime===0){var checkProgress=function checkProgress(){if(_this3.el_.currentTime>0){if(_this3.el_.duration===Infinity){_this3.trigger("durationchange")}_this3.off("timeupdate",checkProgress)}};this.on("timeupdate",checkProgress);return NaN}}return this.el_.duration||NaN};Html5.prototype.width=function width(){return this.el_.offsetWidth};Html5.prototype.height=function height(){return this.el_.offsetHeight};Html5.prototype.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var _this4=this;if(!("webkitDisplayingFullscreen"in this.el_)){return}var endFn=function endFn(){this.trigger("fullscreenchange",{isFullscreen:false})};var beginFn=function beginFn(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",endFn);this.trigger("fullscreenchange",{isFullscreen:true})}};this.on("webkitbeginfullscreen",beginFn);this.on("dispose",function(){_this4.off("webkitbeginfullscreen",beginFn);_this4.off("webkitendfullscreen",endFn)})};Html5.prototype.supportsFullScreen=function supportsFullScreen(){if(typeof this.el_.webkitEnterFullScreen==="function"){var userAgent=_window2["default"].navigator&&_window2["default"].navigator.userAgent||"";if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent)){return true}}return false};Html5.prototype.enterFullScreen=function enterFullScreen(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){this.el_.play();this.setTimeout(function(){video.pause();video.webkitEnterFullScreen()},0)}else{video.webkitEnterFullScreen()}};Html5.prototype.exitFullScreen=function exitFullScreen(){this.el_.webkitExitFullScreen()};Html5.prototype.src=function src(_src){if(_src===undefined){return this.el_.src}this.setSrc(_src)};Html5.prototype.reset=function reset(){Html5.resetMediaElement(this.el_)};Html5.prototype.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};Html5.prototype.setControls=function setControls(val){this.el_.controls=!!val};Html5.prototype.addTextTrack=function addTextTrack(kind,label,language){if(!this.featuresNativeTextTracks){return _Tech.prototype.addTextTrack.call(this,kind,label,language)}return this.el_.addTextTrack(kind,label,language)};Html5.prototype.createRemoteTextTrack=function createRemoteTextTrack(options){if(!this.featuresNativeTextTracks){return _Tech.prototype.createRemoteTextTrack.call(this,options)}var htmlTrackElement=_document2["default"].createElement("track");if(options.kind){htmlTrackElement.kind=options.kind}if(options.label){htmlTrackElement.label=options.label}if(options.language||options.srclang){htmlTrackElement.srclang=options.language||options.srclang}if(options["default"]){htmlTrackElement["default"]=options["default"]}if(options.id){htmlTrackElement.id=options.id}if(options.src){htmlTrackElement.src=options.src}return htmlTrackElement};Html5.prototype.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var htmlTrackElement=_Tech.prototype.addRemoteTextTrack.call(this,options,manualCleanup);if(this.featuresNativeTextTracks){this.el().appendChild(htmlTrackElement)}return htmlTrackElement};Html5.prototype.removeRemoteTextTrack=function removeRemoteTextTrack(track){_Tech.prototype.removeRemoteTextTrack.call(this,track);if(this.featuresNativeTextTracks){var tracks=this.$$("track");var i=tracks.length;while(i--){if(track===tracks[i]||track===tracks[i].track){this.el().removeChild(tracks[i])}}}};Html5.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var videoPlaybackQuality={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){videoPlaybackQuality.droppedVideoFrames=this.el().webkitDroppedFrameCount;videoPlaybackQuality.totalVideoFrames=this.el().webkitDecodedFrameCount}if(_window2["default"].performance&&typeof _window2["default"].performance.now==="function"){videoPlaybackQuality.creationTime=_window2["default"].performance.now()}else if(_window2["default"].performance&&_window2["default"].performance.timing&&typeof _window2["default"].performance.timing.navigationStart==="number"){videoPlaybackQuality.creationTime=_window2["default"].Date.now()-_window2["default"].performance.timing.navigationStart}return videoPlaybackQuality};return Html5}(_tech2["default"]);if(Dom.isReal()){Html5.TEST_VID=_document2["default"].createElement("video");var track=_document2["default"].createElement("track");track.kind="captions";track.srclang="en";track.label="English";Html5.TEST_VID.appendChild(track)}Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch(e){return false}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType)};Html5.canControlVolume=function(){try{var volume=Html5.TEST_VID.volume;Html5.TEST_VID.volume=volume/2+.1;return volume!==Html5.TEST_VID.volume}catch(e){return false}};Html5.canControlPlaybackRate=function(){if(browser.IS_ANDROID&&browser.IS_CHROME&&browser.CHROME_VERSION<58){return false}try{var playbackRate=Html5.TEST_VID.playbackRate;Html5.TEST_VID.playbackRate=playbackRate/2+.1;return playbackRate!==Html5.TEST_VID.playbackRate}catch(e){return false}};Html5.supportsNativeTextTracks=function(){return browser.IS_ANY_SAFARI};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks)};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks)};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"];Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.featuresPlaybackRate=Html5.canControlPlaybackRate();Html5.prototype.movingMediaElementInDOM=!browser.IS_IOS;Html5.prototype.featuresFullscreenResize=true;Html5.prototype.featuresProgressEvents=true;Html5.prototype.featuresTimeupdateEvents=true;Html5.prototype.featuresNativeTextTracks=Html5.supportsNativeTextTracks();Html5.prototype.featuresNativeVideoTracks=Html5.supportsNativeVideoTracks();Html5.prototype.featuresNativeAudioTracks=Html5.supportsNativeAudioTracks();var canPlayType=Html5.TEST_VID&&Html5.TEST_VID.constructor.prototype.canPlayType;var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;var mp4RE=/^video\/mp4/i;Html5.patchCanPlayType=function(){if(browser.ANDROID_VERSION>=4&&!browser.IS_FIREFOX){Html5.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mpegurlRE.test(type)){return"maybe"}return canPlayType.call(this,type)}}else if(browser.IS_OLD_ANDROID){Html5.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mp4RE.test(type)){return"maybe"}return canPlayType.call(this,type)}}};Html5.unpatchCanPlayType=function(){var r=Html5.TEST_VID.constructor.prototype.canPlayType;Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType;return r};Html5.patchCanPlayType();Html5.disposeMediaElement=function(el){if(!el){return}if(el.parentNode){el.parentNode.removeChild(el)}while(el.hasChildNodes()){el.removeChild(el.firstChild)}el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load()}catch(e){}})()}};Html5.resetMediaElement=function(el){if(!el){return}var sources=el.querySelectorAll("source");var i=sources.length;while(i--){el.removeChild(sources[i])}el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load()}catch(e){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]||this.el_.hasAttribute(prop)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(prop){Html5.prototype["set"+(0,_toTitleCase2["default"])(prop)]=function(v){this.el_[prop]=v;if(v){this.el_.setAttribute(prop,prop)}else{this.el_.removeAttribute(prop)}}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]}});["volume","src","poster","preload","playbackRate"].forEach(function(prop){Html5.prototype["set"+(0,_toTitleCase2["default"])(prop)]=function(v){this.el_[prop]=v}});["pause","load"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]()}});_tech2["default"].withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(type){try{return Html5.TEST_VID.canPlayType(type)}catch(e){return""}};Html5.nativeSourceHandler.canHandleSource=function(source,options){if(source.type){return Html5.nativeSourceHandler.canPlayType(source.type)}else if(source.src){var ext=Url.getFileExtension(source.src);return Html5.nativeSourceHandler.canPlayType("video/"+ext)}return""};Html5.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src)};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);_component2["default"].registerComponent("Html5",Html5);_tech2["default"].registerTech("Html5",Html5);exports["default"]=Html5},function(module,exports,__webpack_require__){exports.__esModule=true;var _player=__webpack_require__(238);var _player2=_interopRequireDefault(_player);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var plugin=function plugin(name,init){_player2["default"].prototype[name]=init};exports["default"]=plugin},function(module,exports,__webpack_require__){exports.__esModule=true;var _trackEnums=__webpack_require__(250);var _track=__webpack_require__(251);var _track2=_interopRequireDefault(_track);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var AudioTrack=function(_Track){_inherits(AudioTrack,_Track);function AudioTrack(){var _this,_ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,AudioTrack);var settings=(0,_mergeOptions2["default"])(options,{kind:_trackEnums.AudioTrackKind[options.kind]||""});var track=(_this=_possibleConstructorReturn(this,_Track.call(this,settings)),_this);var enabled=false;if(browser.IS_IE8){for(var prop in AudioTrack.prototype){if(prop!=="constructor"){track[prop]=AudioTrack.prototype[prop]}}}Object.defineProperty(track,"enabled",{get:function get(){return enabled},set:function set(newEnabled){if(typeof newEnabled!=="boolean"||newEnabled===enabled){return}enabled=newEnabled;this.trigger("enabledchange")}});if(settings.enabled){track.enabled=settings.enabled}track.loaded_=true;return _ret=track,_possibleConstructorReturn(_this,_ret)}return AudioTrack}(_track2["default"]);exports["default"]=AudioTrack},function(module,exports,__webpack_require__){exports.__esModule=true;var _trackEnums=__webpack_require__(250);var _track=__webpack_require__(251);var _track2=_interopRequireDefault(_track);var _mergeOptions=__webpack_require__(236);var _mergeOptions2=_interopRequireDefault(_mergeOptions);var _browser=__webpack_require__(224);var browser=_interopRequireWildcard(_browser);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VideoTrack=function(_Track){_inherits(VideoTrack,_Track);function VideoTrack(){var _this,_ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,VideoTrack);var settings=(0,_mergeOptions2["default"])(options,{kind:_trackEnums.VideoTrackKind[options.kind]||""});var track=(_this=_possibleConstructorReturn(this,_Track.call(this,settings)),_this);var selected=false;if(browser.IS_IE8){for(var prop in VideoTrack.prototype){if(prop!=="constructor"){track[prop]=VideoTrack.prototype[prop]}}}Object.defineProperty(track,"selected",{get:function get(){return selected},set:function set(newSelected){if(typeof newSelected!=="boolean"||newSelected===selected){return}selected=newSelected;this.trigger("selectedchange")}});if(settings.selected){track.selected=settings.selected}return _ret=track,_possibleConstructorReturn(_this,_ret)}return VideoTrack}(_track2["default"]);exports["default"]=VideoTrack},function(module,exports,__webpack_require__){exports.__esModule=true;var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj)};var _log=__webpack_require__(227);var _log2=_interopRequireDefault(_log);var _obj=__webpack_require__(228);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _inherits=function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass){subClass.super_=superClass}};var extendFn=function extendFn(superClass){var subClassMethods=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var subClass=function subClass(){superClass.apply(this,arguments)};var methods={};if((0,_obj.isObject)(subClassMethods)){if(typeof subClassMethods.init==="function"){_log2["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead.");subClassMethods.constructor=subClassMethods.init}if(subClassMethods.constructor!==Object.prototype.constructor){subClass=subClassMethods.constructor}methods=subClassMethods}else if(typeof subClassMethods==="function"){subClass=subClassMethods}_inherits(subClass,superClass);for(var name in methods){if(methods.hasOwnProperty(name)){subClass.prototype[name]=methods[name]}}return subClass};exports["default"]=extendFn},function(module,exports,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x4,_x5,_x6){var _again=true;_function:while(_again){var object=_x4,property=_x5,receiver=_x6;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x4=parent;_x5=property;_x6=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _globalDocument=__webpack_require__(331);var _globalDocument2=_interopRequireDefault(_globalDocument);var _playlistLoader=__webpack_require__(333);var _playlistLoader2=_interopRequireDefault(_playlistLoader);var _playlist=__webpack_require__(341);var _playlist2=_interopRequireDefault(_playlist);var _xhr=__webpack_require__(342);var _xhr2=_interopRequireDefault(_xhr);var _aesDecrypter=__webpack_require__(343);var _binUtils=__webpack_require__(351);var _binUtils2=_interopRequireDefault(_binUtils);var _videojsContribMediaSources=__webpack_require__(352);var _m3u8Parser=__webpack_require__(336);var _m3u8Parser2=_interopRequireDefault(_m3u8Parser);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _masterPlaylistController=__webpack_require__(386);var _config=__webpack_require__(389);var _config2=_interopRequireDefault(_config);var _renditionMixin=__webpack_require__(403);var _renditionMixin2=_interopRequireDefault(_renditionMixin);var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _playbackWatcher=__webpack_require__(404);var _playbackWatcher2=_interopRequireDefault(_playbackWatcher);var _reloadSourceOnError=__webpack_require__(405);var _reloadSourceOnError2=_interopRequireDefault(_reloadSourceOnError);var _playlistSelectorsJs=__webpack_require__(392);var Hls={PlaylistLoader:_playlistLoader2["default"],Playlist:_playlist2["default"],Decrypter:_aesDecrypter.Decrypter,AsyncStream:_aesDecrypter.AsyncStream,decrypt:_aesDecrypter.decrypt,utils:_binUtils2["default"],STANDARD_PLAYLIST_SELECTOR:_playlistSelectorsJs.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:_playlistSelectorsJs.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:_playlistSelectorsJs.comparePlaylistBandwidth,comparePlaylistResolution:_playlistSelectorsJs.comparePlaylistResolution,xhr:(0,_xhr2["default"])()};var INITIAL_BANDWIDTH=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(prop){Object.defineProperty(Hls,prop,{get:function get(){_videoJs2["default"].log.warn("using Hls."+prop+" is UNSAFE be sure you know what you are doing");return _config2["default"][prop]},set:function set(value){_videoJs2["default"].log.warn("using Hls."+prop+" is UNSAFE be sure you know what you are doing");if(typeof value!=="number"||value<0){_videoJs2["default"].log.warn("value of Hls."+prop+" must be greater than or equal to 0");return}_config2["default"][prop]=value}})});var handleHlsMediaChange=function handleHlsMediaChange(qualityLevels,playlistLoader){var newPlaylist=playlistLoader.media();var selectedIndex=-1;for(var i=0;i<qualityLevels.length;i++){if(qualityLevels[i].id===newPlaylist.uri){selectedIndex=i;break}}qualityLevels.selectedIndex_=selectedIndex;qualityLevels.trigger({selectedIndex:selectedIndex,type:"change"})};var handleHlsLoadedMetadata=function handleHlsLoadedMetadata(qualityLevels,hls){hls.representations().forEach(function(rep){qualityLevels.addQualityLevel(rep)});handleHlsMediaChange(qualityLevels,hls.playlists)};Hls.canPlaySource=function(){return _videoJs2["default"].log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};Hls.supportsNativeHls=function(){var video=_globalDocument2["default"].createElement("video");if(!_videoJs2["default"].getTech("Html5").isSupported()){return false}var canPlay=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return canPlay.some(function(canItPlay){return/maybe|probably/i.test(video.canPlayType(canItPlay))})}();Hls.isSupported=function(){return _videoJs2["default"].log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var Component=_videoJs2["default"].getComponent("Component");var HlsHandler=function(_Component){_inherits(HlsHandler,_Component);function HlsHandler(source,tech,options){var _this=this;_classCallCheck(this,HlsHandler);_get(Object.getPrototypeOf(HlsHandler.prototype),"constructor",this).call(this,tech,options.hls);if(tech.options_&&tech.options_.playerId){var _player=(0,_videoJs2["default"])(tech.options_.playerId);if(!_player.hasOwnProperty("hls")){Object.defineProperty(_player,"hls",{get:function get(){_videoJs2["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead.");tech.trigger({type:"usage",name:"hls-player-access"});return _this}})}}this.tech_=tech;this.source_=source;this.stats={};this.ignoreNextSeekingEvent_=false;this.setOptions_();if(this.options_.overrideNative&&(tech.featuresNativeVideoTracks||tech.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}this.on(_globalDocument2["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(event){var fullscreenElement=_globalDocument2["default"].fullscreenElement||_globalDocument2["default"].webkitFullscreenElement||_globalDocument2["default"].mozFullScreenElement||_globalDocument2["default"].msFullscreenElement;if(fullscreenElement&&fullscreenElement.contains(_this.tech_.el())){_this.masterPlaylistController_.fastQualityChange_()}});this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return}this.setCurrentTime(this.tech_.currentTime())});this.on(this.tech_,"error",function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}});this.on(this.tech_,"play",this.play)}_createClass(HlsHandler,[{key:"setOptions_",value:function setOptions_(){var _this2=this;this.options_.withCredentials=this.options_.withCredentials||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=INITIAL_BANDWIDTH}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===INITIAL_BANDWIDTH;["withCredentials","bandwidth"].forEach(function(option){if(typeof _this2.source_[option]!=="undefined"){_this2.options_[option]=_this2.source_[option]}});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function src(_src){var _this3=this;if(!_src){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=Hls;this.masterPlaylistController_=new _masterPlaylistController.MasterPlaylistController(this.options_);
this.playbackWatcher_=new _playbackWatcher2["default"](_videoJs2["default"].mergeOptions(this.options_,{seekable:function seekable(){return _this3.seekable()}}));this.masterPlaylistController_.on("error",function(){var player=_videoJs2["default"].players[_this3.tech_.options_.playerId];player.error(_this3.masterPlaylistController_.error)});this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Hls.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=Hls.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function get(){return this.masterPlaylistController_.selectPlaylist},set:function set(selectPlaylist){this.masterPlaylistController_.selectPlaylist=selectPlaylist.bind(this)}},throughput:{get:function get(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function set(throughput){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=throughput;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function get(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function set(bandwidth){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=bandwidth;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function get(){var invBandwidth=1/(this.bandwidth||1);var invThroughput=undefined;if(this.throughput>0){invThroughput=1/this.throughput}else{invThroughput=0}var systemBitrate=Math.floor(1/(invBandwidth+invThroughput));return systemBitrate},set:function set(){_videoJs2["default"].log.error('The "systemBandwidth" property is read-only')}}});Object.defineProperties(this.stats,{bandwidth:{get:function get(){return _this3.bandwidth||0},enumerable:true},mediaRequests:{get:function get(){return _this3.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function get(){return _this3.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function get(){return _this3.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function get(){return _this3.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function get(){return _this3.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function get(){return _this3.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function get(){return _this3.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,_renditionMixin2["default"])(_this3)});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")});this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=true});this.tech_.ready(function(){return _this3.setupQualityLevels_()});if(!this.tech_.el()){return}this.tech_.src(_videoJs2["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function setupQualityLevels_(){var _this4=this;var player=_videoJs2["default"].players[this.tech_.options_.playerId];if(player&&player.qualityLevels){this.qualityLevels_=player.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){handleHlsLoadedMetadata(_this4.qualityLevels_,_this4)});this.playlists.on("mediachange",function(){handleHlsMediaChange(_this4.qualityLevels_,_this4.playlists)})}}},{key:"play",value:function play(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function setCurrentTime(currentTime){this.masterPlaylistController_.setCurrentTime(currentTime)}},{key:"duration",value:function duration(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function seekable(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function dispose(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}_get(Object.getPrototypeOf(HlsHandler.prototype),"dispose",this).call(this)}}]);return HlsHandler}(Component);var HlsSourceHandler=function HlsSourceHandler(mode){return{canHandleSource:function canHandleSource(srcObj){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var localOptions=_videoJs2["default"].mergeOptions(_videoJs2["default"].options,options);if(localOptions.hls&&localOptions.hls.mode&&localOptions.hls.mode!==mode){return false}return HlsSourceHandler.canPlayType(srcObj.type,localOptions)},handleSource:function handleSource(source,tech){var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var localOptions=_videoJs2["default"].mergeOptions(_videoJs2["default"].options,options,{hls:{mode:mode}});if(mode==="flash"){tech.setTimeout(function(){tech.trigger("loadstart")},1)}tech.hls=new HlsHandler(source,tech,localOptions);tech.hls.xhr=(0,_xhr2["default"])();tech.hls.src(source.src);return tech.hls},canPlayType:function canPlayType(type){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var localOptions=_videoJs2["default"].mergeOptions(_videoJs2["default"].options,options);if(HlsSourceHandler.canPlayType(type,localOptions)){return"maybe"}return""}}};HlsSourceHandler.canPlayType=function(type,options){if(_videoJs2["default"].browser.IE_VERSION&&_videoJs2["default"].browser.IE_VERSION<=10){return false}var mpegurlRE=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(!options.hls.overrideNative&&Hls.supportsNativeHls){return false}return mpegurlRE.test(type)};if(typeof _videoJs2["default"].MediaSource==="undefined"||typeof _videoJs2["default"].URL==="undefined"){_videoJs2["default"].MediaSource=_videojsContribMediaSources.MediaSource;_videoJs2["default"].URL=_videojsContribMediaSources.URL}var flashTech=_videoJs2["default"].getTech("Flash");if(_videojsContribMediaSources.MediaSource.supportsNativeMediaSources()){_videoJs2["default"].getTech("Html5").registerSourceHandler(HlsSourceHandler("html5"),0)}if(_globalWindow2["default"].Uint8Array&&flashTech){flashTech.registerSourceHandler(HlsSourceHandler("flash"))}_videoJs2["default"].HlsHandler=HlsHandler;_videoJs2["default"].HlsSourceHandler=HlsSourceHandler;_videoJs2["default"].Hls=Hls;if(!_videoJs2["default"].use){_videoJs2["default"].registerComponent("Hls",Hls)}_videoJs2["default"].m3u8=_m3u8Parser2["default"];_videoJs2["default"].options.hls=_videoJs2["default"].options.hls||{};if(_videoJs2["default"].registerPlugin){_videoJs2["default"].registerPlugin("reloadSourceOnError",_reloadSourceOnError2["default"])}else{_videoJs2["default"].plugin("reloadSourceOnError",_reloadSourceOnError2["default"])}module.exports={Hls:Hls,HlsHandler:HlsHandler,HlsSourceHandler:HlsSourceHandler}},function(module,exports,__webpack_require__){(function(global){var topLevel=typeof global!=="undefined"?global:typeof window!=="undefined"?window:{};var minDoc=__webpack_require__(332);var doccy;if(typeof document!=="undefined"){doccy=document}else{doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];if(!doccy){doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc}}module.exports=doccy}).call(exports,function(){return this}())},function(module,exports){},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _resolveUrl=__webpack_require__(334);var _resolveUrl2=_interopRequireDefault(_resolveUrl);var _videoJs=__webpack_require__(220);var _m3u8Parser=__webpack_require__(336);var _m3u8Parser2=_interopRequireDefault(_m3u8Parser);var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var updateSegments=function updateSegments(original,update,offset){var result=update.slice();offset=offset||0;var length=Math.min(original.length,update.length+offset);for(var i=offset;i<length;i++){result[i-offset]=(0,_videoJs.mergeOptions)(original[i],result[i-offset])}return result};exports.updateSegments=updateSegments;var resolveSegmentUris=function resolveSegmentUris(segment,baseUri){if(!segment.resolvedUri){segment.resolvedUri=(0,_resolveUrl2["default"])(baseUri,segment.uri)}if(segment.key&&!segment.key.resolvedUri){segment.key.resolvedUri=(0,_resolveUrl2["default"])(baseUri,segment.key.uri)}if(segment.map&&!segment.map.resolvedUri){segment.map.resolvedUri=(0,_resolveUrl2["default"])(baseUri,segment.map.uri)}};exports.resolveSegmentUris=resolveSegmentUris;var updateMaster=function updateMaster(master,media){var result=(0,_videoJs.mergeOptions)(master,{});var playlist=result.playlists.filter(function(p){return p.uri===media.uri})[0];if(!playlist){return null}if(playlist.segments&&media.segments&&playlist.segments.length===media.segments.length&&playlist.mediaSequence===media.mediaSequence){return null}var mergedPlaylist=(0,_videoJs.mergeOptions)(playlist,media);if(playlist.segments){mergedPlaylist.segments=updateSegments(playlist.segments,media.segments,media.mediaSequence-playlist.mediaSequence)}mergedPlaylist.segments.forEach(function(segment){resolveSegmentUris(segment,mergedPlaylist.resolvedUri)});for(var i=0;i<result.playlists.length;i++){if(result.playlists[i].uri===media.uri){result.playlists[i]=mergedPlaylist}}result.playlists[media.uri]=mergedPlaylist;return result};exports.updateMaster=updateMaster;var setupMediaPlaylists=function setupMediaPlaylists(master){var i=master.playlists.length;while(i--){var playlist=master.playlists[i];master.playlists[playlist.uri]=playlist;playlist.resolvedUri=(0,_resolveUrl2["default"])(master.uri,playlist.uri);if(!playlist.attributes){playlist.attributes={};_videoJs.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};exports.setupMediaPlaylists=setupMediaPlaylists;var resolveMediaGroupUris=function resolveMediaGroupUris(master){["AUDIO","SUBTITLES"].forEach(function(mediaType){for(var groupKey in master.mediaGroups[mediaType]){for(var labelKey in master.mediaGroups[mediaType][groupKey]){var mediaProperties=master.mediaGroups[mediaType][groupKey][labelKey];if(mediaProperties.uri){mediaProperties.resolvedUri=(0,_resolveUrl2["default"])(master.uri,mediaProperties.uri)}}}})};exports.resolveMediaGroupUris=resolveMediaGroupUris;var refreshDelay=function refreshDelay(media,update){var lastSegment=media.segments[media.segments.length-1];var delay=undefined;if(update&&lastSegment&&lastSegment.duration){delay=lastSegment.duration*1e3}else{delay=(media.targetDuration||10)*500}return delay};exports.refreshDelay=refreshDelay;var PlaylistLoader=function(_EventTarget){_inherits(PlaylistLoader,_EventTarget);function PlaylistLoader(srcUrl,hls,withCredentials){var _this=this;_classCallCheck(this,PlaylistLoader);_get(Object.getPrototypeOf(PlaylistLoader.prototype),"constructor",this).call(this);this.srcUrl=srcUrl;this.hls_=hls;this.withCredentials=withCredentials;if(!this.srcUrl){throw new Error("A non-empty playlist URL is required")}this.state="HAVE_NOTHING";this.on("mediaupdatetimeout",function(){if(_this.state!=="HAVE_METADATA"){return}_this.state="HAVE_CURRENT_METADATA";_this.request=_this.hls_.xhr({uri:(0,_resolveUrl2["default"])(_this.master.uri,_this.media().uri),withCredentials:_this.withCredentials},function(error,req){if(!_this.request){return}if(error){return _this.playlistRequestError(_this.request,_this.media().uri,"HAVE_METADATA")}_this.haveMetadata(_this.request,_this.media().uri)})})}_createClass(PlaylistLoader,[{key:"playlistRequestError",value:function playlistRequestError(xhr,url,startingState){this.request=null;if(startingState){this.state=startingState}this.error={playlist:this.master.playlists[url],status:xhr.status,message:"HLS playlist request error at URL: "+url,responseText:xhr.responseText,code:xhr.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function haveMetadata(xhr,url){var _this2=this;this.request=null;this.state="HAVE_METADATA";var parser=new _m3u8Parser2["default"].Parser;parser.push(xhr.responseText);parser.end();parser.manifest.uri=url;parser.manifest.attributes=parser.manifest.attributes||{};var update=updateMaster(this.master,parser.manifest);this.targetDuration=parser.manifest.targetDuration;if(update){this.master=update;this.media_=this.master.playlists[parser.manifest.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){_globalWindow2["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=_globalWindow2["default"].setTimeout(function(){_this2.trigger("mediaupdatetimeout")},refreshDelay(this.media(),!!update))}this.trigger("loadedplaylist")}},{key:"dispose",value:function dispose(){this.stopRequest();_globalWindow2["default"].clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort()}}},{key:"media",value:function media(playlist){var _this3=this;if(!playlist){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var startingState=this.state;if(typeof playlist==="string"){if(!this.master.playlists[playlist]){throw new Error("Unknown playlist URI: "+playlist)}playlist=this.master.playlists[playlist]}var mediaChange=!this.media_||playlist.uri!==this.media_.uri;if(this.master.playlists[playlist.uri].endList){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=playlist;if(mediaChange){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!mediaChange){return}this.state="SWITCHING_MEDIA";if(this.request){if((0,_resolveUrl2["default"])(this.master.uri,playlist.uri)===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.hls_.xhr({uri:(0,_resolveUrl2["default"])(this.master.uri,playlist.uri),withCredentials:this.withCredentials},function(error,req){if(!_this3.request){return}if(error){return _this3.playlistRequestError(_this3.request,playlist.uri,startingState)}_this3.haveMetadata(req,playlist.uri);if(startingState==="HAVE_MASTER"){_this3.trigger("loadedmetadata")}else{_this3.trigger("mediachange")}})}},{key:"pause",value:function pause(){this.stopRequest();_globalWindow2["default"].clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}}},{key:"load",value:function load(isFinalRendition){var _this4=this;_globalWindow2["default"].clearTimeout(this.mediaUpdateTimeout);var media=this.media();if(isFinalRendition){var delay=media?media.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=_globalWindow2["default"].setTimeout(function(){return _this4.load()},delay);return}if(!this.started){this.start();return}if(media&&!media.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"start",value:function start(){var _this5=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(error,req){if(!_this5.request){return}_this5.request=null;if(error){_this5.error={status:req.status,message:"HLS playlist request error at URL: "+_this5.srcUrl,responseText:req.responseText,code:2};if(_this5.state==="HAVE_NOTHING"){_this5.started=false}return _this5.trigger("error")}var parser=new _m3u8Parser2["default"].Parser;parser.push(req.responseText);parser.end();_this5.state="HAVE_MASTER";parser.manifest.uri=_this5.srcUrl;if(parser.manifest.playlists){_this5.master=parser.manifest;setupMediaPlaylists(_this5.master);resolveMediaGroupUris(_this5.master);_this5.trigger("loadedplaylist");if(!_this5.request){_this5.media(parser.manifest.playlists[0])}return}_this5.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:_globalWindow2["default"].location.href,playlists:[{uri:_this5.srcUrl}]};_this5.master.playlists[_this5.srcUrl]=_this5.master.playlists[0];_this5.master.playlists[0].resolvedUri=_this5.srcUrl;_this5.master.playlists[0].attributes=_this5.master.playlists[0].attributes||{};_this5.haveMetadata(req,_this5.srcUrl);return _this5.trigger("loadedmetadata")})}}]);return PlaylistLoader}(_videoJs.EventTarget);exports["default"]=PlaylistLoader},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _urlToolkit=__webpack_require__(335);var _urlToolkit2=_interopRequireDefault(_urlToolkit);var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var resolveUrl=function resolveUrl(baseURL,relativeURL){if(/^[a-z]+:/i.test(relativeURL)){return relativeURL}if(!/\/\//i.test(baseURL)){baseURL=_urlToolkit2["default"].buildAbsoluteURL(_globalWindow2["default"].location.href,baseURL)}return _urlToolkit2["default"].buildAbsoluteURL(baseURL,relativeURL)};exports["default"]=resolveUrl;module.exports=exports["default"]},function(module,exports,__webpack_require__){(function(root){var URL_REGEX=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var FIRST_SEGMENT_REGEX=/^([^\/?#]*)(.*)$/;var SLASH_DOT_REGEX=/(?:\/|^)\.(?=\/)/g;var SLASH_DOT_DOT_REGEX=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var URLToolkit={buildAbsoluteURL:function buildAbsoluteURL(baseURL,relativeURL,opts){opts=opts||{};baseURL=baseURL.trim();relativeURL=relativeURL.trim();if(!relativeURL){if(!opts.alwaysNormalize){return baseURL}var basePartsForNormalise=URLToolkit.parseURL(baseURL);if(!basePartsForNormalise){throw new Error("Error trying to parse base URL.")}basePartsForNormalise.path=URLToolkit.normalizePath(basePartsForNormalise.path);return URLToolkit.buildURLFromParts(basePartsForNormalise)}var relativeParts=URLToolkit.parseURL(relativeURL);if(!relativeParts){throw new Error("Error trying to parse relative URL.")}if(relativeParts.scheme){if(!opts.alwaysNormalize){return relativeURL}relativeParts.path=URLToolkit.normalizePath(relativeParts.path);return URLToolkit.buildURLFromParts(relativeParts)}var baseParts=URLToolkit.parseURL(baseURL);if(!baseParts){throw new Error("Error trying to parse base URL.")}if(!baseParts.netLoc&&baseParts.path&&baseParts.path[0]!=="/"){var pathParts=FIRST_SEGMENT_REGEX.exec(baseParts.path);baseParts.netLoc=pathParts[1];baseParts.path=pathParts[2]}if(baseParts.netLoc&&!baseParts.path){baseParts.path="/"}var builtParts={scheme:baseParts.scheme,netLoc:relativeParts.netLoc,path:null,params:relativeParts.params,query:relativeParts.query,fragment:relativeParts.fragment};if(!relativeParts.netLoc){builtParts.netLoc=baseParts.netLoc;if(relativeParts.path[0]!=="/"){if(!relativeParts.path){builtParts.path=baseParts.path;if(!relativeParts.params){builtParts.params=baseParts.params;if(!relativeParts.query){builtParts.query=baseParts.query}}}else{var baseURLPath=baseParts.path;var newPath=baseURLPath.substring(0,baseURLPath.lastIndexOf("/")+1)+relativeParts.path;builtParts.path=URLToolkit.normalizePath(newPath)}}}if(builtParts.path===null){builtParts.path=opts.alwaysNormalize?URLToolkit.normalizePath(relativeParts.path):relativeParts.path}return URLToolkit.buildURLFromParts(builtParts)},parseURL:function parseURL(url){var parts=URL_REGEX.exec(url);if(!parts){return null}return{scheme:parts[1]||"",netLoc:parts[2]||"",path:parts[3]||"",params:parts[4]||"",query:parts[5]||"",fragment:parts[6]||""}},normalizePath:function normalizePath(path){path=path.split("").reverse().join("").replace(SLASH_DOT_REGEX,"");while(path.length!==(path=path.replace(SLASH_DOT_DOT_REGEX,"")).length){}return path.split("").reverse().join("")},buildURLFromParts:function buildURLFromParts(parts){return parts.scheme+parts.netLoc+parts.path+parts.params+parts.query+parts.fragment}};module.exports=URLToolkit})(this)},function(module,exports,__webpack_require__){var _lineStream=__webpack_require__(337);var _lineStream2=_interopRequireDefault(_lineStream);var _parseStream=__webpack_require__(339);var _parseStream2=_interopRequireDefault(_parseStream);var _parser=__webpack_require__(340);var _parser2=_interopRequireDefault(_parser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}module.exports={LineStream:_lineStream2["default"],ParseStream:_parseStream2["default"],Parser:_parser2["default"]}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _stream=__webpack_require__(338);var _stream2=_interopRequireDefault(_stream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var LineStream=function(_Stream){_inherits(LineStream,_Stream);function LineStream(){_classCallCheck(this,LineStream);var _this=_possibleConstructorReturn(this,(LineStream.__proto__||Object.getPrototypeOf(LineStream)).call(this));_this.buffer="";return _this}_createClass(LineStream,[{key:"push",value:function push(data){var nextNewline=void 0;this.buffer+=data;nextNewline=this.buffer.indexOf("\n");for(;nextNewline>-1;nextNewline=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,nextNewline));this.buffer=this.buffer.substring(nextNewline+1)}}}]);return LineStream}(_stream2["default"]);exports["default"]=LineStream},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Stream=function(){function Stream(){_classCallCheck(this,Stream);this.listeners={}}_createClass(Stream,[{key:"on",value:function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[]}this.listeners[type].push(listener)}},{key:"off",value:function off(type,listener){if(!this.listeners[type]){return false}var index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1}},{key:"trigger",value:function trigger(type){var callbacks=this.listeners[type];var i=void 0;var length=void 0;var args=void 0;if(!callbacks){return}if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{args=Array.prototype.slice.call(arguments,1);length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args)}}}},{key:"dispose",value:function dispose(){this.listeners={}}},{key:"pipe",value:function pipe(destination){this.on("data",function(data){destination.push(data)})}}]);return Stream}();exports["default"]=Stream},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _stream=__webpack_require__(338);var _stream2=_interopRequireDefault(_stream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var attributeSeparator=function attributeSeparator(){var key="[^=]*";var value='"[^"]*"|[^,]*';var keyvalue="(?:"+key+")=(?:"+value+")";return new RegExp("(?:^|,)("+keyvalue+")")};var parseAttributes=function parseAttributes(attributes){var attrs=attributes.split(attributeSeparator());var result={};var i=attrs.length;var attr=void 0;while(i--){if(attrs[i]===""){continue}attr=/([^=]*)=(.*)/.exec(attrs[i]).slice(1);attr[0]=attr[0].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^['"](.*)['"]$/g,"$1");result[attr[0]]=attr[1]}return result};var ParseStream=function(_Stream){_inherits(ParseStream,_Stream);function ParseStream(){_classCallCheck(this,ParseStream);return _possibleConstructorReturn(this,(ParseStream.__proto__||Object.getPrototypeOf(ParseStream)).call(this))}_createClass(ParseStream,[{key:"push",value:function push(line){var match=void 0;var event=void 0;line=line.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(line.length===0){return}if(line[0]!=="#"){this.trigger("data",{type:"uri",uri:line});return}if(line.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:line.slice(1)});return}line=line.replace("\r","");match=/^#EXTM3U/.exec(line);if(match){this.trigger("data",{type:"tag",tagType:"m3u"});return}match=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(line);if(match){event={type:"tag",tagType:"inf"};if(match[1]){event.duration=parseFloat(match[1])}if(match[2]){event.title=match[2]}this.trigger("data",event);return}match=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(line);if(match){event={type:"tag",tagType:"targetduration"};if(match[1]){event.duration=parseInt(match[1],10)}this.trigger("data",event);return}match=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(line);if(match){event={type:"tag",tagType:"totalduration"};if(match[1]){event.duration=parseInt(match[1],10)}this.trigger("data",event);return}match=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(line);if(match){event={type:"tag",tagType:"version"};if(match[1]){event.version=parseInt(match[1],10)}this.trigger("data",event);return}match=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(line);if(match){event={type:"tag",tagType:"media-sequence"};if(match[1]){event.number=parseInt(match[1],10)}this.trigger("data",event);return}match=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(line);if(match){event={type:"tag",tagType:"discontinuity-sequence"};if(match[1]){event.number=parseInt(match[1],10)}this.trigger("data",event);return}match=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(line);if(match){event={type:"tag",tagType:"playlist-type"};if(match[1]){event.playlistType=match[1]}this.trigger("data",event);return}match=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(line);if(match){event={type:"tag",tagType:"byterange"};if(match[1]){event.length=parseInt(match[1],10)}if(match[2]){event.offset=parseInt(match[2],10)}this.trigger("data",event);return}match=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(line);
if(match){event={type:"tag",tagType:"allow-cache"};if(match[1]){event.allowed=!/NO/.test(match[1])}this.trigger("data",event);return}match=/^#EXT-X-MAP:?(.*)$/.exec(line);if(match){event={type:"tag",tagType:"map"};if(match[1]){var attributes=parseAttributes(match[1]);if(attributes.URI){event.uri=attributes.URI}if(attributes.BYTERANGE){var _attributes$BYTERANGE=attributes.BYTERANGE.split("@"),_attributes$BYTERANGE2=_slicedToArray(_attributes$BYTERANGE,2),length=_attributes$BYTERANGE2[0],offset=_attributes$BYTERANGE2[1];event.byterange={};if(length){event.byterange.length=parseInt(length,10)}if(offset){event.byterange.offset=parseInt(offset,10)}}}this.trigger("data",event);return}match=/^#EXT-X-STREAM-INF:?(.*)$/.exec(line);if(match){event={type:"tag",tagType:"stream-inf"};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.RESOLUTION){var split=event.attributes.RESOLUTION.split("x");var resolution={};if(split[0]){resolution.width=parseInt(split[0],10)}if(split[1]){resolution.height=parseInt(split[1],10)}event.attributes.RESOLUTION=resolution}if(event.attributes.BANDWIDTH){event.attributes.BANDWIDTH=parseInt(event.attributes.BANDWIDTH,10)}if(event.attributes["PROGRAM-ID"]){event.attributes["PROGRAM-ID"]=parseInt(event.attributes["PROGRAM-ID"],10)}}this.trigger("data",event);return}match=/^#EXT-X-MEDIA:?(.*)$/.exec(line);if(match){event={type:"tag",tagType:"media"};if(match[1]){event.attributes=parseAttributes(match[1])}this.trigger("data",event);return}match=/^#EXT-X-ENDLIST/.exec(line);if(match){this.trigger("data",{type:"tag",tagType:"endlist"});return}match=/^#EXT-X-DISCONTINUITY/.exec(line);if(match){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}match=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(line);if(match){event={type:"tag",tagType:"program-date-time"};if(match[1]){event.dateTimeString=match[1];event.dateTimeObject=new Date(match[1])}this.trigger("data",event);return}match=/^#EXT-X-KEY:?(.*)$/.exec(line);if(match){event={type:"tag",tagType:"key"};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.IV){if(event.attributes.IV.substring(0,2).toLowerCase()==="0x"){event.attributes.IV=event.attributes.IV.substring(2)}event.attributes.IV=event.attributes.IV.match(/.{8}/g);event.attributes.IV[0]=parseInt(event.attributes.IV[0],16);event.attributes.IV[1]=parseInt(event.attributes.IV[1],16);event.attributes.IV[2]=parseInt(event.attributes.IV[2],16);event.attributes.IV[3]=parseInt(event.attributes.IV[3],16);event.attributes.IV=new Uint32Array(event.attributes.IV)}}this.trigger("data",event);return}match=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(line);if(match){event={type:"tag",tagType:"cue-out-cont"};if(match[1]){event.data=match[1]}else{event.data=""}this.trigger("data",event);return}match=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(line);if(match){event={type:"tag",tagType:"cue-out"};if(match[1]){event.data=match[1]}else{event.data=""}this.trigger("data",event);return}match=/^#EXT-X-CUE-IN:?(.*)?$/.exec(line);if(match){event={type:"tag",tagType:"cue-in"};if(match[1]){event.data=match[1]}else{event.data=""}this.trigger("data",event);return}this.trigger("data",{type:"tag",data:line.slice(4)})}}]);return ParseStream}(_stream2["default"]);exports["default"]=ParseStream},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _stream=__webpack_require__(338);var _stream2=_interopRequireDefault(_stream);var _lineStream=__webpack_require__(337);var _lineStream2=_interopRequireDefault(_lineStream);var _parseStream=__webpack_require__(339);var _parseStream2=_interopRequireDefault(_parseStream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Parser=function(_Stream){_inherits(Parser,_Stream);function Parser(){_classCallCheck(this,Parser);var _this=_possibleConstructorReturn(this,(Parser.__proto__||Object.getPrototypeOf(Parser)).call(this));_this.lineStream=new _lineStream2["default"];_this.parseStream=new _parseStream2["default"];_this.lineStream.pipe(_this.parseStream);var self=_this;var uris=[];var currentUri={};var currentMap=void 0;var _key=void 0;var noop=function noop(){};var defaultMediaGroups={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var currentTimeline=0;_this.manifest={allowCache:true,discontinuityStarts:[],segments:[]};_this.parseStream.on("data",function(entry){var mediaGroup=void 0;var rendition=void 0;({tag:function tag(){(({"allow-cache":function allowCache(){this.manifest.allowCache=entry.allowed;if(!("allowed"in entry)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function byterange(){var byterange={};if("length"in entry){currentUri.byterange=byterange;byterange.length=entry.length;if(!("offset"in entry)){this.trigger("info",{message:"defaulting offset to zero"});entry.offset=0}}if("offset"in entry){currentUri.byterange=byterange;byterange.offset=entry.offset}},endlist:function endlist(){this.manifest.endList=true},inf:function inf(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(entry.duration>0){currentUri.duration=entry.duration}if(entry.duration===0){currentUri.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=uris},key:function key(){if(!entry.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(entry.attributes.METHOD==="NONE"){_key=null;return}if(!entry.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(!entry.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}_key={method:entry.attributes.METHOD||"AES-128",uri:entry.attributes.URI};if(typeof entry.attributes.IV!=="undefined"){_key.iv=entry.attributes.IV}},"media-sequence":function mediaSequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+entry.number});return}this.manifest.mediaSequence=entry.number},"discontinuity-sequence":function discontinuitySequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+entry.number});return}this.manifest.discontinuitySequence=entry.number;currentTimeline=entry.number},"playlist-type":function playlistType(){if(!/VOD|EVENT/.test(entry.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+entry.playlist});return}this.manifest.playlistType=entry.playlistType},map:function map(){currentMap={};if(entry.uri){currentMap.uri=entry.uri}if(entry.byterange){currentMap.byterange=entry.byterange}},"stream-inf":function streamInf(){this.manifest.playlists=uris;this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!entry.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!currentUri.attributes){currentUri.attributes={}}_extends(currentUri.attributes,entry.attributes)},media:function media(){this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!(entry.attributes&&entry.attributes.TYPE&&entry.attributes["GROUP-ID"]&&entry.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var mediaGroupType=this.manifest.mediaGroups[entry.attributes.TYPE];mediaGroupType[entry.attributes["GROUP-ID"]]=mediaGroupType[entry.attributes["GROUP-ID"]]||{};mediaGroup=mediaGroupType[entry.attributes["GROUP-ID"]];rendition={"default":/yes/i.test(entry.attributes.DEFAULT)};if(rendition["default"]){rendition.autoselect=true}else{rendition.autoselect=/yes/i.test(entry.attributes.AUTOSELECT)}if(entry.attributes.LANGUAGE){rendition.language=entry.attributes.LANGUAGE}if(entry.attributes.URI){rendition.uri=entry.attributes.URI}if(entry.attributes["INSTREAM-ID"]){rendition.instreamId=entry.attributes["INSTREAM-ID"]}if(entry.attributes.CHARACTERISTICS){rendition.characteristics=entry.attributes.CHARACTERISTICS}if(entry.attributes.FORCED){rendition.forced=/yes/i.test(entry.attributes.FORCED)}mediaGroup[entry.attributes.NAME]=rendition},discontinuity:function discontinuity(){currentTimeline+=1;currentUri.discontinuity=true;this.manifest.discontinuityStarts.push(uris.length)},"program-date-time":function programDateTime(){this.manifest.dateTimeString=entry.dateTimeString;this.manifest.dateTimeObject=entry.dateTimeObject},targetduration:function targetduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+entry.duration});return}this.manifest.targetDuration=entry.duration},totalduration:function totalduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+entry.duration});return}this.manifest.totalDuration=entry.duration},"cue-out":function cueOut(){currentUri.cueOut=entry.data},"cue-out-cont":function cueOutCont(){currentUri.cueOutCont=entry.data},"cue-in":function cueIn(){currentUri.cueIn=entry.data}})[entry.tagType]||noop).call(self)},uri:function uri(){currentUri.uri=entry.uri;uris.push(currentUri);if(this.manifest.targetDuration&&!("duration"in currentUri)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});currentUri.duration=this.manifest.targetDuration}if(_key){currentUri.key=_key}currentUri.timeline=currentTimeline;if(currentMap){currentUri.map=currentMap}currentUri={}},comment:function comment(){}})[entry.type].call(self)});return _this}_createClass(Parser,[{key:"push",value:function push(chunk){this.lineStream.push(chunk)}},{key:"end",value:function end(){this.lineStream.push("\n")}}]);return Parser}(_stream2["default"]);exports["default"]=Parser},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _videoJs=__webpack_require__(220);var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var backwardDuration=function backwardDuration(playlist,endSequence){var result=0;var i=endSequence-playlist.mediaSequence;var segment=playlist.segments[i];if(segment){if(typeof segment.start!=="undefined"){return{result:segment.start,precise:true}}if(typeof segment.end!=="undefined"){return{result:segment.end-segment.duration,precise:true}}}while(i--){segment=playlist.segments[i];if(typeof segment.end!=="undefined"){return{result:result+segment.end,precise:true}}result+=segment.duration;if(typeof segment.start!=="undefined"){return{result:result+segment.start,precise:true}}}return{result:result,precise:false}};var forwardDuration=function forwardDuration(playlist,endSequence){var result=0;var segment=undefined;var i=endSequence-playlist.mediaSequence;for(;i<playlist.segments.length;i++){segment=playlist.segments[i];if(typeof segment.start!=="undefined"){return{result:segment.start-result,precise:true}}result+=segment.duration;if(typeof segment.end!=="undefined"){return{result:segment.end-result,precise:true}}}return{result:-1,precise:false}};var intervalDuration=function intervalDuration(playlist,endSequence,expired){var backward=undefined;var forward=undefined;if(typeof endSequence==="undefined"){endSequence=playlist.mediaSequence+playlist.segments.length}if(endSequence<playlist.mediaSequence){return 0}backward=backwardDuration(playlist,endSequence);if(backward.precise){return backward.result}forward=forwardDuration(playlist,endSequence);if(forward.precise){return forward.result}return backward.result+expired};var duration=function duration(playlist,endSequence,expired){if(!playlist){return 0}if(typeof expired!=="number"){expired=0}if(typeof endSequence==="undefined"){if(playlist.totalDuration){return playlist.totalDuration}if(!playlist.endList){return _globalWindow2["default"].Infinity}}return intervalDuration(playlist,endSequence,expired)};exports.duration=duration;var sumDurations=function sumDurations(playlist,startIndex,endIndex){var durations=0;if(startIndex>endIndex){var _ref=[endIndex,startIndex];startIndex=_ref[0];endIndex=_ref[1]}if(startIndex<0){for(var i=startIndex;i<Math.min(0,endIndex);i++){durations+=playlist.targetDuration}startIndex=0}for(var i=startIndex;i<endIndex;i++){durations+=playlist.segments[i].duration}return durations};exports.sumDurations=sumDurations;var safeLiveIndex=function safeLiveIndex(playlist){if(!playlist.segments.length){return 0}var i=playlist.segments.length-1;var distanceFromEnd=playlist.segments[i].duration||playlist.targetDuration;var safeDistance=distanceFromEnd+playlist.targetDuration*2;while(i--){distanceFromEnd+=playlist.segments[i].duration;if(distanceFromEnd>=safeDistance){break}}return Math.max(0,i)};exports.safeLiveIndex=safeLiveIndex;var playlistEnd=function playlistEnd(playlist,expired,useSafeLiveEnd){if(!playlist||!playlist.segments){return null}if(playlist.endList){return duration(playlist)}if(expired===null){return null}expired=expired||0;var endSequence=useSafeLiveEnd?safeLiveIndex(playlist):playlist.segments.length;return intervalDuration(playlist,playlist.mediaSequence+endSequence,expired)};exports.playlistEnd=playlistEnd;var seekable=function seekable(playlist,expired){var useSafeLiveEnd=true;var seekableStart=expired||0;var seekableEnd=playlistEnd(playlist,expired,useSafeLiveEnd);if(seekableEnd===null){return(0,_videoJs.createTimeRange)()}return(0,_videoJs.createTimeRange)(seekableStart,seekableEnd)};exports.seekable=seekable;var isWholeNumber=function isWholeNumber(num){return num-Math.floor(num)===0};var roundSignificantDigit=function roundSignificantDigit(increment,num){if(isWholeNumber(num)){return num+increment*.1}var numDecimalDigits=num.toString().split(".")[1].length;for(var i=1;i<=numDecimalDigits;i++){var scale=Math.pow(10,i);var temp=num*scale;if(isWholeNumber(temp)||i===numDecimalDigits){return(temp+increment)/scale}}};var ceilLeastSignificantDigit=roundSignificantDigit.bind(null,1);var floorLeastSignificantDigit=roundSignificantDigit.bind(null,-1);var getMediaInfoForTime=function getMediaInfoForTime(playlist,currentTime,startIndex,startTime){var i=undefined;var segment=undefined;var numSegments=playlist.segments.length;var time=currentTime-startTime;if(time<0){if(startIndex>0){for(i=startIndex-1;i>=0;i--){segment=playlist.segments[i];time+=floorLeastSignificantDigit(segment.duration);if(time>0){return{mediaIndex:i,startTime:startTime-sumDurations(playlist,startIndex,i)}}}}return{mediaIndex:0,startTime:currentTime}}if(startIndex<0){for(i=startIndex;i<0;i++){time-=playlist.targetDuration;if(time<0){return{mediaIndex:0,startTime:currentTime}}}startIndex=0}for(i=startIndex;i<numSegments;i++){segment=playlist.segments[i];time-=ceilLeastSignificantDigit(segment.duration);if(time<0){return{mediaIndex:i,startTime:startTime+sumDurations(playlist,startIndex,i)}}}return{mediaIndex:numSegments-1,startTime:currentTime}};exports.getMediaInfoForTime=getMediaInfoForTime;var isBlacklisted=function isBlacklisted(playlist){return playlist.excludeUntil&&playlist.excludeUntil>Date.now()};exports.isBlacklisted=isBlacklisted;var isIncompatible=function isIncompatible(playlist){return playlist.excludeUntil&&playlist.excludeUntil===Infinity};exports.isIncompatible=isIncompatible;var isEnabled=function isEnabled(playlist){var blacklisted=isBlacklisted(playlist);return!playlist.disabled&&!blacklisted};exports.isEnabled=isEnabled;var isDisabled=function isDisabled(playlist){return playlist.disabled};exports.isDisabled=isDisabled;var isAes=function isAes(media){for(var i=0;i<media.segments.length;i++){if(media.segments[i].key){return true}}return false};exports.isAes=isAes;var isFmp4=function isFmp4(media){for(var i=0;i<media.segments.length;i++){if(media.segments[i].map){return true}}return false};exports.isFmp4=isFmp4;var hasAttribute=function hasAttribute(attr,playlist){return playlist.attributes&&playlist.attributes[attr]};exports.hasAttribute=hasAttribute;var estimateSegmentRequestTime=function estimateSegmentRequestTime(segmentDuration,bandwidth,playlist){var bytesReceived=arguments.length<=3||arguments[3]===undefined?0:arguments[3];if(!hasAttribute("BANDWIDTH",playlist)){return NaN}var size=segmentDuration*playlist.attributes.BANDWIDTH;return(size-bytesReceived*8)/bandwidth};exports.estimateSegmentRequestTime=estimateSegmentRequestTime;var isLowestEnabledRendition=function isLowestEnabledRendition(master,media){if(master.playlists.length===1){return true}var currentBandwidth=media.attributes.BANDWIDTH||Number.MAX_VALUE;return master.playlists.filter(function(playlist){if(!isEnabled(playlist)){return false}return(playlist.attributes.BANDWIDTH||0)<currentBandwidth}).length===0};exports.isLowestEnabledRendition=isLowestEnabledRendition;exports["default"]={duration:duration,seekable:seekable,safeLiveIndex:safeLiveIndex,getMediaInfoForTime:getMediaInfoForTime,isEnabled:isEnabled,isDisabled:isDisabled,isBlacklisted:isBlacklisted,isIncompatible:isIncompatible,playlistEnd:playlistEnd,isAes:isAes,isFmp4:isFmp4,hasAttribute:hasAttribute,estimateSegmentRequestTime:estimateSegmentRequestTime,isLowestEnabledRendition:isLowestEnabledRendition}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var xhrFactory=function xhrFactory(){var xhr=function XhrFunction(options,callback){options=(0,_videoJs.mergeOptions)({timeout:45e3},options);var beforeRequest=XhrFunction.beforeRequest||_videoJs2["default"].Hls.xhr.beforeRequest;if(beforeRequest&&typeof beforeRequest==="function"){var newOptions=beforeRequest(options);if(newOptions){options=newOptions}}var request=(0,_videoJs.xhr)(options,function(error,response){var reqResponse=request.response;if(!error&&reqResponse){request.responseTime=Date.now();request.roundTripTime=request.responseTime-request.requestTime;request.bytesReceived=reqResponse.byteLength||reqResponse.length;if(!request.bandwidth){request.bandwidth=Math.floor(request.bytesReceived/request.roundTripTime*8*1e3)}}if(error&&error.code==="ETIMEDOUT"){request.timedout=true}if(!error&&!request.aborted&&response.statusCode!==200&&response.statusCode!==206&&response.statusCode!==0){error=new Error("XHR Failed with a response of: "+(request&&(reqResponse||request.responseText)))}callback(error,request)});var originalAbort=request.abort;request.abort=function(){request.aborted=true;return originalAbort.apply(request,arguments)};request.uri=options.uri;request.requestTime=Date.now();return request};return xhr};exports["default"]=xhrFactory;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _decrypter=__webpack_require__(344);var _asyncStream=__webpack_require__(346);var _asyncStream2=_interopRequireDefault(_asyncStream);exports["default"]={decrypt:_decrypter.decrypt,Decrypter:_decrypter.Decrypter,AsyncStream:_asyncStream2["default"]};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _aes=__webpack_require__(345);var _aes2=_interopRequireDefault(_aes);var _asyncStream=__webpack_require__(346);var _asyncStream2=_interopRequireDefault(_asyncStream);var _pkcs7=__webpack_require__(348);var ntoh=function ntoh(word){return word<<24|(word&65280)<<8|(word&16711680)>>8|word>>>24};var decrypt=function decrypt(encrypted,key,initVector){var encrypted32=new Int32Array(encrypted.buffer,encrypted.byteOffset,encrypted.byteLength>>2);var decipher=new _aes2["default"](Array.prototype.slice.call(key));var decrypted=new Uint8Array(encrypted.byteLength);var decrypted32=new Int32Array(decrypted.buffer);var init0=undefined;var init1=undefined;var init2=undefined;var init3=undefined;var encrypted0=undefined;var encrypted1=undefined;var encrypted2=undefined;var encrypted3=undefined;var wordIx=undefined;init0=initVector[0];init1=initVector[1];init2=initVector[2];init3=initVector[3];for(wordIx=0;wordIx<encrypted32.length;wordIx+=4){encrypted0=ntoh(encrypted32[wordIx]);encrypted1=ntoh(encrypted32[wordIx+1]);encrypted2=ntoh(encrypted32[wordIx+2]);encrypted3=ntoh(encrypted32[wordIx+3]);decipher.decrypt(encrypted0,encrypted1,encrypted2,encrypted3,decrypted32,wordIx);decrypted32[wordIx]=ntoh(decrypted32[wordIx]^init0);decrypted32[wordIx+1]=ntoh(decrypted32[wordIx+1]^init1);decrypted32[wordIx+2]=ntoh(decrypted32[wordIx+2]^init2);decrypted32[wordIx+3]=ntoh(decrypted32[wordIx+3]^init3);init0=encrypted0;init1=encrypted1;init2=encrypted2;init3=encrypted3}return decrypted};exports.decrypt=decrypt;var Decrypter=function(){function Decrypter(encrypted,key,initVector,done){_classCallCheck(this,Decrypter);var step=Decrypter.STEP;var encrypted32=new Int32Array(encrypted.buffer);var decrypted=new Uint8Array(encrypted.byteLength);var i=0;this.asyncStream_=new _asyncStream2["default"];this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));for(i=step;i<encrypted32.length;i+=step){initVector=new Uint32Array([ntoh(encrypted32[i-4]),ntoh(encrypted32[i-3]),ntoh(encrypted32[i-2]),ntoh(encrypted32[i-1])]);this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted))}this.asyncStream_.push(function(){done(null,(0,_pkcs7.unpad)(decrypted))})}_createClass(Decrypter,[{key:"decryptChunk_",value:function decryptChunk_(encrypted,key,initVector,decrypted){return function(){var bytes=decrypt(encrypted,key,initVector);decrypted.set(bytes,encrypted.byteOffset)}}}],[{key:"STEP",get:function get(){return 32e3}}]);return Decrypter}();exports.Decrypter=Decrypter;exports["default"]={Decrypter:Decrypter,decrypt:decrypt}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var precompute=function precompute(){var tables=[[[],[],[],[],[]],[[],[],[],[],[]]];var encTable=tables[0];var decTable=tables[1];var sbox=encTable[4];var sboxInv=decTable[4];var i=undefined;var x=undefined;var xInv=undefined;var d=[];var th=[];var x2=undefined;var x4=undefined;var x8=undefined;var s=undefined;var tEnc=undefined;var tDec=undefined;for(i=0;i<256;i++){th[(d[i]=i<<1^(i>>7)*283)^i]=i}for(x=xInv=0;!sbox[x];x^=x2||1,xInv=th[xInv]||1){s=xInv^xInv<<1^xInv<<2^xInv<<3^xInv<<4;s=s>>8^s&255^99;sbox[x]=s;sboxInv[s]=x;x8=d[x4=d[x2=d[x]]];tDec=x8*16843009^x4*65537^x2*257^x*16843008;tEnc=d[s]*257^s*16843008;for(i=0;i<4;i++){encTable[i][x]=tEnc=tEnc<<24^tEnc>>>8;decTable[i][s]=tDec=tDec<<24^tDec>>>8}}for(i=0;i<5;i++){encTable[i]=encTable[i].slice(0);decTable[i]=decTable[i].slice(0)}return tables};var aesTables=null;var AES=function(){function AES(key){_classCallCheck(this,AES);if(!aesTables){aesTables=precompute()}this._tables=[[aesTables[0][0].slice(),aesTables[0][1].slice(),aesTables[0][2].slice(),aesTables[0][3].slice(),aesTables[0][4].slice()],[aesTables[1][0].slice(),aesTables[1][1].slice(),aesTables[1][2].slice(),aesTables[1][3].slice(),aesTables[1][4].slice()]];var i=undefined;var j=undefined;var tmp=undefined;var encKey=undefined;var decKey=undefined;var sbox=this._tables[0][4];var decTable=this._tables[1];var keyLen=key.length;var rcon=1;if(keyLen!==4&&keyLen!==6&&keyLen!==8){throw new Error("Invalid aes key size")}encKey=key.slice(0);decKey=[];this._key=[encKey,decKey];for(i=keyLen;i<4*keyLen+28;i++){tmp=encKey[i-1];if(i%keyLen===0||keyLen===8&&i%keyLen===4){tmp=sbox[tmp>>>24]<<24^sbox[tmp>>16&255]<<16^sbox[tmp>>8&255]<<8^sbox[tmp&255];if(i%keyLen===0){tmp=tmp<<8^tmp>>>24^rcon<<24;rcon=rcon<<1^(rcon>>7)*283}}encKey[i]=encKey[i-keyLen]^tmp}for(j=0;i;j++,i--){tmp=encKey[j&3?i:i-4];if(i<=4||j<4){decKey[j]=tmp}else{decKey[j]=decTable[0][sbox[tmp>>>24]]^decTable[1][sbox[tmp>>16&255]]^decTable[2][sbox[tmp>>8&255]]^decTable[3][sbox[tmp&255]]}}}_createClass(AES,[{key:"decrypt",value:function decrypt(encrypted0,encrypted1,encrypted2,encrypted3,out,offset){var key=this._key[1];var a=encrypted0^key[0];var b=encrypted3^key[1];var c=encrypted2^key[2];var d=encrypted1^key[3];var a2=undefined;var b2=undefined;var c2=undefined;var nInnerRounds=key.length/4-2;var i=undefined;var kIndex=4;var table=this._tables[1];var table0=table[0];var table1=table[1];var table2=table[2];var table3=table[3];var sbox=table[4];for(i=0;i<nInnerRounds;i++){a2=table0[a>>>24]^table1[b>>16&255]^table2[c>>8&255]^table3[d&255]^key[kIndex];b2=table0[b>>>24]^table1[c>>16&255]^table2[d>>8&255]^table3[a&255]^key[kIndex+1];c2=table0[c>>>24]^table1[d>>16&255]^table2[a>>8&255]^table3[b&255]^key[kIndex+2];d=table0[d>>>24]^table1[a>>16&255]^table2[b>>8&255]^table3[c&255]^key[kIndex+3];kIndex+=4;a=a2;b=b2;c=c2}for(i=0;i<4;i++){out[(3&-i)+offset]=sbox[a>>>24]<<24^sbox[b>>16&255]<<16^sbox[c>>8&255]<<8^sbox[d&255]^key[kIndex++];a2=a;a=b;b=c;c=d;d=a2}}}]);return AES}();exports["default"]=AES;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _stream=__webpack_require__(347);var _stream2=_interopRequireDefault(_stream);var AsyncStream=function(_Stream){_inherits(AsyncStream,_Stream);function AsyncStream(){_classCallCheck(this,AsyncStream);_get(Object.getPrototypeOf(AsyncStream.prototype),"constructor",this).call(this,_stream2["default"]);this.jobs=[];this.delay=1;this.timeout_=null}_createClass(AsyncStream,[{key:"processJob_",value:function processJob_(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}}},{key:"push",value:function push(job){this.jobs.push(job);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}}}]);return AsyncStream}(_stream2["default"]);exports["default"]=AsyncStream;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Stream=function(){function Stream(){_classCallCheck(this,Stream);this.listeners={}}_createClass(Stream,[{key:"on",value:function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[]}this.listeners[type].push(listener)}},{key:"off",value:function off(type,listener){
var index=undefined;if(!this.listeners[type]){return false}index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1}},{key:"trigger",value:function trigger(type){var callbacks=undefined;var i=undefined;var length=undefined;var args=undefined;callbacks=this.listeners[type];if(!callbacks){return}if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{args=Array.prototype.slice.call(arguments,1);length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args)}}}},{key:"dispose",value:function dispose(){this.listeners={}}},{key:"pipe",value:function pipe(destination){this.on("data",function(data){destination.push(data)})}}]);return Stream}();exports["default"]=Stream;module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.pad=__webpack_require__(349);exports.unpad=__webpack_require__(350)},function(module,exports){var PADDING;module.exports=function pad(plaintext){var padding=PADDING[plaintext.byteLength%16||0],result=new Uint8Array(plaintext.byteLength+padding.length);result.set(plaintext);result.set(padding,plaintext.byteLength);return result};PADDING=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},function(module,exports){module.exports=function unpad(padded){return padded.subarray(0,padded.byteLength-padded[padded.byteLength-1])}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var textRange=function textRange(range,i){return range.start(i)+"-"+range.end(i)};var formatHexString=function formatHexString(e,i){var value=e.toString(16);return"00".substring(0,2-value.length)+value+(i%2?" ":"")};var formatAsciiString=function formatAsciiString(e){if(e>=32&&e<126){return String.fromCharCode(e)}return"."};var createTransferableMessage=function createTransferableMessage(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(ArrayBuffer.isView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength}}else{transferable[key]=value}});return transferable};var initSegmentId=function initSegmentId(initSegment){var byterange=initSegment.byterange||{length:Infinity,offset:0};return[byterange.length,byterange.offset,initSegment.resolvedUri].join(",")};var utils={hexDump:function hexDump(data){var bytes=Array.prototype.slice.call(data);var step=16;var result="";var hex=undefined;var ascii=undefined;for(var j=0;j<bytes.length/step;j++){hex=bytes.slice(j*step,j*step+step).map(formatHexString).join("");ascii=bytes.slice(j*step,j*step+step).map(formatAsciiString).join("");result+=hex+" "+ascii+"\n"}return result},tagDump:function tagDump(tag){return utils.hexDump(tag.bytes)},textRanges:function textRanges(ranges){var result="";var i=undefined;for(i=0;i<ranges.length;i++){result+=textRange(ranges,i)+" "}return result},createTransferableMessage:createTransferableMessage,initSegmentId:initSegmentId};exports["default"]=utils;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _flashMediaSource=__webpack_require__(353);var _flashMediaSource2=_interopRequireDefault(_flashMediaSource);var _htmlMediaSource=__webpack_require__(377);var _htmlMediaSource2=_interopRequireDefault(_htmlMediaSource);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var urlCount=0;var defaults={mode:"auto"};_videoJs2["default"].mediaSources={};var open=function open(msObjectURL,swfId){var mediaSource=_videoJs2["default"].mediaSources[msObjectURL];if(mediaSource){mediaSource.trigger({type:"sourceopen",swfId:swfId})}else{throw new Error("Media Source not found (Video.js)")}};var supportsNativeMediaSources=function supportsNativeMediaSources(){return!!_globalWindow2["default"].MediaSource&&!!_globalWindow2["default"].MediaSource.isTypeSupported&&_globalWindow2["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var MediaSource=function MediaSource(options){var settings=_videoJs2["default"].mergeOptions(defaults,options);this.MediaSource={open:open,supportsNativeMediaSources:supportsNativeMediaSources};if(settings.mode==="html5"||settings.mode==="auto"&&supportsNativeMediaSources()){return new _htmlMediaSource2["default"]}else if(_videoJs2["default"].getTech("Flash")){return new _flashMediaSource2["default"]}throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")};exports.MediaSource=MediaSource;MediaSource.open=open;MediaSource.supportsNativeMediaSources=supportsNativeMediaSources;var URL={createObjectURL:function createObjectURL(object){var objectUrlPrefix="blob:vjs-media-source/";var url=undefined;if(object instanceof _htmlMediaSource2["default"]){url=_globalWindow2["default"].URL.createObjectURL(object.nativeMediaSource_);object.url_=url;return url}if(!(object instanceof _flashMediaSource2["default"])){url=_globalWindow2["default"].URL.createObjectURL(object);object.url_=url;return url}url=objectUrlPrefix+urlCount;urlCount++;_videoJs2["default"].mediaSources[url]=object;return url}};exports.URL=URL;_videoJs2["default"].MediaSource=MediaSource;_videoJs2["default"].URL=URL},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _globalDocument=__webpack_require__(331);var _globalDocument2=_interopRequireDefault(_globalDocument);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _flashSourceBuffer=__webpack_require__(354);var _flashSourceBuffer2=_interopRequireDefault(_flashSourceBuffer);var _flashConstants=__webpack_require__(375);var _flashConstants2=_interopRequireDefault(_flashConstants);var _codecUtils=__webpack_require__(376);var FlashMediaSource=function(_videojs$EventTarget){_inherits(FlashMediaSource,_videojs$EventTarget);function FlashMediaSource(){var _this=this;_classCallCheck(this,FlashMediaSource);_get(Object.getPrototypeOf(FlashMediaSource.prototype),"constructor",this).call(this);this.sourceBuffers=[];this.readyState="closed";this.on(["sourceopen","webkitsourceopen"],function(event){_this.swfObj=_globalDocument2["default"].getElementById(event.swfId);_this.player_=(0,_videoJs2["default"])(_this.swfObj.parentNode);_this.tech_=_this.swfObj.tech;_this.readyState="open";_this.tech_.on("seeking",function(){var i=_this.sourceBuffers.length;while(i--){_this.sourceBuffers[i].abort()}});if(_this.swfObj){_this.swfObj.vjs_load()}})}_createClass(FlashMediaSource,[{key:"addSeekableRange_",value:function addSeekableRange_(){}},{key:"addSourceBuffer",value:function addSourceBuffer(type){var parsedType=(0,_codecUtils.parseContentType)(type);var sourceBuffer=undefined;if(parsedType.type==="video/mp2t"||parsedType.type==="audio/mp2t"){sourceBuffer=new _flashSourceBuffer2["default"](this)}else{throw new Error("NotSupportedError (Video.js)")}this.sourceBuffers.push(sourceBuffer);return sourceBuffer}},{key:"endOfStream",value:function endOfStream(error){if(error==="network"){this.tech_.error(2)}else if(error==="decode"){this.tech_.error(3)}if(this.readyState!=="ended"){this.readyState="ended";this.swfObj.vjs_endOfStream()}}}]);return FlashMediaSource}(_videoJs2["default"].EventTarget);exports["default"]=FlashMediaSource;try{Object.defineProperty(FlashMediaSource.prototype,"duration",{get:function get(){if(!this.swfObj){return NaN}return this.swfObj.vjs_getProperty("duration")},set:function set(value){var i=undefined;var oldDuration=this.swfObj.vjs_getProperty("duration");this.swfObj.vjs_setProperty("duration",value);if(value<oldDuration){for(i=0;i<this.sourceBuffers.length;i++){this.sourceBuffers[i].remove(value,oldDuration)}}return value}})}catch(e){FlashMediaSource.prototype.duration=NaN}for(var property in _flashConstants2["default"]){FlashMediaSource[property]=_flashConstants2["default"][property]}module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _muxJsLibFlv=__webpack_require__(355);var _muxJsLibFlv2=_interopRequireDefault(_muxJsLibFlv);var _removeCuesFromTrack=__webpack_require__(370);var _removeCuesFromTrack2=_interopRequireDefault(_removeCuesFromTrack);var _createTextTracksIfNecessary=__webpack_require__(371);var _createTextTracksIfNecessary2=_interopRequireDefault(_createTextTracksIfNecessary);var _addTextTrackData=__webpack_require__(372);var _flashTransmuxerWorker=__webpack_require__(373);var _flashTransmuxerWorker2=_interopRequireDefault(_flashTransmuxerWorker);var _webwackify=__webpack_require__(374);var _webwackify2=_interopRequireDefault(_webwackify);var _flashConstants=__webpack_require__(375);var _flashConstants2=_interopRequireDefault(_flashConstants);var resolveFlashTransmuxWorker=function resolveFlashTransmuxWorker(){var result=undefined;try{result=373}catch(e){}return result};var scheduleTick=function scheduleTick(func){_globalWindow2["default"].setTimeout(func,_flashConstants2["default"].TIME_BETWEEN_CHUNKS)};var generateRandomString=function generateRandomString(){return Math.random().toString(36).slice(2,8)};var toDecimalPlaces=function toDecimalPlaces(num,places){if(typeof places!=="number"||places<0){places=0}var scale=Math.pow(10,places);return Math.round(num*scale)/scale};var FlashSourceBuffer=function(_videojs$EventTarget){_inherits(FlashSourceBuffer,_videojs$EventTarget);function FlashSourceBuffer(mediaSource){var _this=this;_classCallCheck(this,FlashSourceBuffer);_get(Object.getPrototypeOf(FlashSourceBuffer.prototype),"constructor",this).call(this);var encodedHeader=undefined;this.chunkSize_=_flashConstants2["default"].BYTES_PER_CHUNK;this.buffer_=[];this.bufferSize_=0;this.basePtsOffset_=NaN;this.mediaSource_=mediaSource;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.updating=false;this.timestampOffset_=0;encodedHeader=_globalWindow2["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(_muxJsLibFlv2["default"].getFlvHeader())));var safePlayerId=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+safePlayerId+generateRandomString();this.flashEncodedDataName_="vjs_flashEncodedData_"+safePlayerId+generateRandomString();_globalWindow2["default"][this.flashEncodedHeaderName_]=function(){delete _globalWindow2["default"][_this.flashEncodedHeaderName_];return encodedHeader};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);this.transmuxer_=(0,_webwackify2["default"])(_flashTransmuxerWorker2["default"],resolveFlashTransmuxWorker());this.transmuxer_.postMessage({action:"init",options:{}});this.transmuxer_.onmessage=function(event){if(event.data.action==="data"){_this.receiveBuffer_(event.data.segment)}};this.one("updateend",function(){_this.mediaSource_.tech_.trigger("loadedmetadata")});Object.defineProperty(this,"timestampOffset",{get:function get(){return this.timestampOffset_},set:function set(val){if(typeof val==="number"&&val>=0){this.timestampOffset_=val;this.mediaSource_.swfObj.vjs_discontinuity();this.basePtsOffset_=NaN;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.transmuxer_.postMessage({action:"reset"})}}});Object.defineProperty(this,"buffered",{get:function get(){if(!this.mediaSource_||!this.mediaSource_.swfObj||!("vjs_getProperty"in this.mediaSource_.swfObj)){return _videoJs2["default"].createTimeRange()}var buffered=this.mediaSource_.swfObj.vjs_getProperty("buffered");if(buffered&&buffered.length){buffered[0][0]=toDecimalPlaces(buffered[0][0],3);buffered[0][1]=toDecimalPlaces(buffered[0][1],3)}return _videoJs2["default"].createTimeRanges(buffered)}});this.mediaSource_.player_.on("seeked",function(){(0,_removeCuesFromTrack2["default"])(0,Infinity,_this.metadataTrack_);if(_this.inbandTextTracks_){for(var track in _this.inbandTextTracks_){(0,_removeCuesFromTrack2["default"])(0,Infinity,_this.inbandTextTracks_[track])}}});var onHlsReset=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",onHlsReset);this.mediaSource_.player_.tech_.hls.on("dispose",function(){_this.transmuxer_.terminate();_this.mediaSource_.player_.tech_.off("hls-reset",onHlsReset)})}_createClass(FlashSourceBuffer,[{key:"appendBuffer",value:function appendBuffer(bytes){var error=undefined;if(this.updating){error=new Error("SourceBuffer.append() cannot be called "+"while an update is in progress");error.name="InvalidStateError";error.code=11;throw error}this.updating=true;this.mediaSource_.readyState="open";this.trigger({type:"update"});this.transmuxer_.postMessage({action:"push",data:bytes.buffer,byteOffset:bytes.byteOffset,byteLength:bytes.byteLength},[bytes.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function abort(){this.buffer_=[];this.bufferSize_=0;this.mediaSource_.swfObj.vjs_abort();if(this.updating){this.updating=false;this.trigger({type:"updateend"})}}},{key:"remove",value:function remove(start,end){(0,_removeCuesFromTrack2["default"])(start,end,this.metadataTrack_);if(this.inbandTextTracks_){for(var track in this.inbandTextTracks_){(0,_removeCuesFromTrack2["default"])(start,end,this.inbandTextTracks_[track])}}this.trigger({type:"update"});this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function receiveBuffer_(segment){var _this2=this;(0,_createTextTracksIfNecessary2["default"])(this,this.mediaSource_,segment);(0,_addTextTrackData.addTextTrackData)(this,segment.captions,segment.metadata);scheduleTick(function(){var flvBytes=_this2.convertTagsToData_(segment);if(_this2.buffer_.length===0){scheduleTick(_this2.processBuffer_.bind(_this2))}if(flvBytes){_this2.buffer_.push(flvBytes);_this2.bufferSize_+=flvBytes.byteLength}})}},{key:"processBuffer_",value:function processBuffer_(){var _this3=this;var chunkSize=_flashConstants2["default"].BYTES_PER_CHUNK;if(!this.buffer_.length){if(this.updating!==false){this.updating=false;this.trigger({type:"updateend"})}return}var chunk=this.buffer_[0].subarray(0,chunkSize);if(chunk.byteLength<chunkSize||this.buffer_[0].byteLength===chunkSize){this.buffer_.shift()}else{this.buffer_[0]=this.buffer_[0].subarray(chunkSize)}this.bufferSize_-=chunk.byteLength;var binary=[];var length=chunk.byteLength;for(var i=0;i<length;i++){binary.push(String.fromCharCode(chunk[i]))}var b64str=_globalWindow2["default"].btoa(binary.join(""));_globalWindow2["default"][this.flashEncodedDataName_]=function(){scheduleTick(_this3.processBuffer_.bind(_this3));delete _globalWindow2["default"][_this3.flashEncodedDataName_];return b64str};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}},{key:"convertTagsToData_",value:function convertTagsToData_(segmentData){var segmentByteLength=0;var tech=this.mediaSource_.tech_;var videoTargetPts=0;var segment=undefined;var videoTags=segmentData.tags.videoTags;var audioTags=segmentData.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(videoTags.length||audioTags.length)){var firstVideoTag=videoTags[0]||{pts:Infinity};var firstAudioTag=audioTags[0]||{pts:Infinity};this.basePtsOffset_=Math.min(firstAudioTag.pts,firstVideoTag.pts)}if(tech.seeking()){this.videoBufferEnd_=NaN;this.audioBufferEnd_=NaN}if(isNaN(this.videoBufferEnd_)){if(tech.buffered().length){videoTargetPts=tech.buffered().end(0)-this.timestampOffset}if(tech.seeking()){videoTargetPts=Math.max(videoTargetPts,tech.currentTime()-this.timestampOffset)}videoTargetPts*=1e3;videoTargetPts+=this.basePtsOffset_}else{videoTargetPts=this.videoBufferEnd_+.1}var currentIndex=videoTags.length;if(currentIndex&&videoTags[currentIndex-1].pts>=videoTargetPts){while(--currentIndex){var currentTag=videoTags[currentIndex];if(currentTag.pts>videoTargetPts){continue}if(currentTag.keyFrame||currentTag.metaDataTag){break}}while(currentIndex){var nextTag=videoTags[currentIndex-1];if(!nextTag.metaDataTag){break}currentIndex--}}var filteredVideoTags=videoTags.slice(currentIndex);var audioTargetPts=undefined;if(isNaN(this.audioBufferEnd_)){audioTargetPts=videoTargetPts}else{audioTargetPts=this.audioBufferEnd_+.1}if(filteredVideoTags.length){audioTargetPts=Math.min(audioTargetPts,filteredVideoTags[0].pts)}currentIndex=0;while(currentIndex<audioTags.length){if(audioTags[currentIndex].pts>=audioTargetPts){break}currentIndex++}var filteredAudioTags=audioTags.slice(currentIndex);if(filteredAudioTags.length){this.audioBufferEnd_=filteredAudioTags[filteredAudioTags.length-1].pts}if(filteredVideoTags.length){this.videoBufferEnd_=filteredVideoTags[filteredVideoTags.length-1].pts}var tags=this.getOrderedTags_(filteredVideoTags,filteredAudioTags);if(tags.length===0){return}if(tags[0].pts<videoTargetPts&&tech.seeking()){var fudgeFactor=1/30;var currentTime=tech.currentTime();var diff=(videoTargetPts-tags[0].pts)/1e3;var adjustedTime=currentTime-diff;if(adjustedTime<fudgeFactor){adjustedTime=0}try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(adjustedTime)}catch(e){}}for(var i=0;i<tags.length;i++){segmentByteLength+=tags[i].bytes.byteLength}segment=new Uint8Array(segmentByteLength);for(var i=0,j=0;i<tags.length;i++){segment.set(tags[i].bytes,j);j+=tags[i].bytes.byteLength}return segment}},{key:"getOrderedTags_",value:function getOrderedTags_(videoTags,audioTags){var tag=undefined;var tags=[];while(videoTags.length||audioTags.length){if(!videoTags.length){tag=audioTags.shift()}else if(!audioTags.length){tag=videoTags.shift()}else if(audioTags[0].dts<videoTags[0].dts){tag=audioTags.shift()}else{tag=videoTags.shift()}tags.push(tag)}return tags}},{key:"onHlsReset_",value:function onHlsReset_(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]);return FlashSourceBuffer}(_videoJs2["default"].EventTarget);exports["default"]=FlashSourceBuffer;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={tag:__webpack_require__(356),Transmuxer:__webpack_require__(357),getFlvHeader:__webpack_require__(369)}},function(module,exports){var _FlvTag;_FlvTag=function FlvTag(type,extraData){var adHoc=0,bufferStartSize=16384,prepareWrite=function prepareWrite(flv,count){var bytes,minLength=flv.position+count;if(minLength<flv.bytes.byteLength){return}bytes=new Uint8Array(minLength*2);bytes.set(flv.bytes.subarray(0,flv.position),0);flv.bytes=bytes;flv.view=new DataView(flv.bytes.buffer)},widthBytes=_FlvTag.widthBytes||new Uint8Array("width".length),heightBytes=_FlvTag.heightBytes||new Uint8Array("height".length),videocodecidBytes=_FlvTag.videocodecidBytes||new Uint8Array("videocodecid".length),i;if(!_FlvTag.widthBytes){for(i=0;i<"width".length;i++){widthBytes[i]="width".charCodeAt(i)}for(i=0;i<"height".length;i++){heightBytes[i]="height".charCodeAt(i)}for(i=0;i<"videocodecid".length;i++){videocodecidBytes[i]="videocodecid".charCodeAt(i)}_FlvTag.widthBytes=widthBytes;_FlvTag.heightBytes=heightBytes;_FlvTag.videocodecidBytes=videocodecidBytes}this.keyFrame=false;switch(type){case _FlvTag.VIDEO_TAG:this.length=16;bufferStartSize*=6;break;case _FlvTag.AUDIO_TAG:this.length=13;this.keyFrame=true;break;case _FlvTag.METADATA_TAG:this.length=29;this.keyFrame=true;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(bufferStartSize);this.view=new DataView(this.bytes.buffer);this.bytes[0]=type;this.position=this.length;this.keyFrame=extraData;this.pts=0;this.dts=0;this.writeBytes=function(bytes,offset,length){var start=offset||0,end;length=length||bytes.byteLength;end=start+length;prepareWrite(this,length);this.bytes.set(bytes.subarray(start,end),this.position);this.position+=length;this.length=Math.max(this.length,this.position)};this.writeByte=function(byte){prepareWrite(this,1);this.bytes[this.position]=byte;this.position++;this.length=Math.max(this.length,this.position)};this.writeShort=function(short){prepareWrite(this,2);this.view.setUint16(this.position,short);this.position+=2;this.length=Math.max(this.length,this.position)};this.negIndex=function(pos){return this.bytes[this.length-pos]};this.nalUnitSize=function(){if(adHoc===0){return 0}return this.length-(adHoc+4)};this.startNalUnit=function(){if(adHoc>0){throw new Error("Attempted to create new NAL wihout closing the old one")}adHoc=this.length;this.length+=4;this.position=this.length};this.endNalUnit=function(nalContainer){var nalStart,nalLength;if(this.length===adHoc+4){this.length-=4}else if(adHoc>0){nalStart=adHoc+4;nalLength=this.length-nalStart;this.position=adHoc;this.view.setUint32(this.position,nalLength);this.position=this.length;if(nalContainer){nalContainer.push(this.bytes.subarray(nalStart,nalStart+nalLength))}}adHoc=0};this.writeMetaDataDouble=function(key,val){var i;prepareWrite(this,2+key.length+9);this.view.setUint16(this.position,key.length);this.position+=2;if(key==="width"){this.bytes.set(widthBytes,this.position);this.position+=5}else if(key==="height"){this.bytes.set(heightBytes,this.position);this.position+=6}else if(key==="videocodecid"){this.bytes.set(videocodecidBytes,this.position);this.position+=12}else{for(i=0;i<key.length;i++){this.bytes[this.position]=key.charCodeAt(i);this.position++}}this.position++;this.view.setFloat64(this.position,val);this.position+=8;this.length=Math.max(this.length,this.position);++adHoc};this.writeMetaDataBoolean=function(key,val){var i;prepareWrite(this,2);this.view.setUint16(this.position,key.length);this.position+=2;for(i=0;i<key.length;i++){prepareWrite(this,1);this.bytes[this.position]=key.charCodeAt(i);this.position++}prepareWrite(this,2);this.view.setUint8(this.position,1);this.position++;this.view.setUint8(this.position,val?1:0);this.position++;this.length=Math.max(this.length,this.position);++adHoc};this.finalize=function(){var dtsDelta,len;switch(this.bytes[0]){case _FlvTag.VIDEO_TAG:this.bytes[11]=(this.keyFrame||extraData?16:32)|7;this.bytes[12]=extraData?0:1;dtsDelta=this.pts-this.dts;this.bytes[13]=(dtsDelta&16711680)>>>16;this.bytes[14]=(dtsDelta&65280)>>>8;this.bytes[15]=(dtsDelta&255)>>>0;break;case _FlvTag.AUDIO_TAG:this.bytes[11]=175;this.bytes[12]=extraData?0:1;break;case _FlvTag.METADATA_TAG:this.position=11;this.view.setUint8(this.position,2);this.position++;this.view.setUint16(this.position,10);this.position+=2;this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position);this.position+=10;this.bytes[this.position]=8;this.position++;this.view.setUint32(this.position,adHoc);this.position=this.length;this.bytes.set([0,0,9],this.position);this.position+=3;this.length=this.position;break}len=this.length-11;this.bytes[1]=(len&16711680)>>>16;this.bytes[2]=(len&65280)>>>8;this.bytes[3]=(len&255)>>>0;this.bytes[4]=(this.dts&16711680)>>>16;this.bytes[5]=(this.dts&65280)>>>8;this.bytes[6]=(this.dts&255)>>>0;this.bytes[7]=(this.dts&4278190080)>>>24;this.bytes[8]=0;this.bytes[9]=0;this.bytes[10]=0;prepareWrite(this,4);this.view.setUint32(this.length,this.length);this.length+=4;this.position+=4;this.bytes=this.bytes.subarray(0,this.length);this.frameTime=_FlvTag.frameTime(this.bytes);return this}};_FlvTag.AUDIO_TAG=8;_FlvTag.VIDEO_TAG=9;_FlvTag.METADATA_TAG=18;_FlvTag.isAudioFrame=function(tag){return _FlvTag.AUDIO_TAG===tag[0]};_FlvTag.isVideoFrame=function(tag){return _FlvTag.VIDEO_TAG===tag[0]};_FlvTag.isMetaData=function(tag){return _FlvTag.METADATA_TAG===tag[0]};_FlvTag.isKeyFrame=function(tag){if(_FlvTag.isVideoFrame(tag)){return tag[11]===23}if(_FlvTag.isAudioFrame(tag)){return true}if(_FlvTag.isMetaData(tag)){return true}return false};_FlvTag.frameTime=function(tag){var pts=tag[4]<<16;pts|=tag[5]<<8;pts|=tag[6]<<0;pts|=tag[7]<<24;return pts};module.exports=_FlvTag},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358);var FlvTag=__webpack_require__(356);var m2ts=__webpack_require__(359);var AdtsStream=__webpack_require__(364);var H264Stream=__webpack_require__(365).H264Stream;var CoalesceStream=__webpack_require__(367);var TagList=__webpack_require__(368);var _Transmuxer2,_VideoSegmentStream2,_AudioSegmentStream2,collectTimelineInfo,metaDataTag,extraDataTag;collectTimelineInfo=function collectTimelineInfo(track,data){if(typeof data.pts==="number"){if(track.timelineStartInfo.pts===undefined){track.timelineStartInfo.pts=data.pts}else{track.timelineStartInfo.pts=Math.min(track.timelineStartInfo.pts,data.pts)}}if(typeof data.dts==="number"){if(track.timelineStartInfo.dts===undefined){track.timelineStartInfo.dts=data.dts}else{track.timelineStartInfo.dts=Math.min(track.timelineStartInfo.dts,data.dts)}}};metaDataTag=function metaDataTag(track,pts){var tag=new FlvTag(FlvTag.METADATA_TAG);tag.dts=pts;tag.pts=pts;tag.writeMetaDataDouble("videocodecid",7);tag.writeMetaDataDouble("width",track.width);tag.writeMetaDataDouble("height",track.height);return tag};extraDataTag=function extraDataTag(track,pts){var i,tag=new FlvTag(FlvTag.VIDEO_TAG,true);tag.dts=pts;tag.pts=pts;tag.writeByte(1);tag.writeByte(track.profileIdc);tag.writeByte(track.profileCompatibility);tag.writeByte(track.levelIdc);tag.writeByte(252|3);tag.writeByte(224|1);tag.writeShort(track.sps[0].length);tag.writeBytes(track.sps[0]);tag.writeByte(track.pps.length);for(i=0;i<track.pps.length;++i){tag.writeShort(track.pps[i].length);tag.writeBytes(track.pps[i])}return tag};_AudioSegmentStream2=function AudioSegmentStream(track){var adtsFrames=[],videoKeyFrames=[],oldExtraData;_AudioSegmentStream2.prototype.init.call(this);this.push=function(data){collectTimelineInfo(track,data);if(track){track.audioobjecttype=data.audioobjecttype;track.channelcount=data.channelcount;track.samplerate=data.samplerate;track.samplingfrequencyindex=data.samplingfrequencyindex;track.samplesize=data.samplesize;track.extraData=track.audioobjecttype<<11|track.samplingfrequencyindex<<7|track.channelcount<<3}data.pts=Math.round(data.pts/90);data.dts=Math.round(data.dts/90);adtsFrames.push(data)};this.flush=function(){var currentFrame,adtsFrame,lastMetaPts,tags=new TagList;if(adtsFrames.length===0){this.trigger("done","AudioSegmentStream");return}lastMetaPts=-Infinity;while(adtsFrames.length){currentFrame=adtsFrames.shift();if(videoKeyFrames.length&&currentFrame.pts>=videoKeyFrames[0]){lastMetaPts=videoKeyFrames.shift();this.writeMetaDataTags(tags,lastMetaPts)}if(track.extraData!==oldExtraData||currentFrame.pts-lastMetaPts>=1e3){this.writeMetaDataTags(tags,currentFrame.pts);oldExtraData=track.extraData;lastMetaPts=currentFrame.pts}adtsFrame=new FlvTag(FlvTag.AUDIO_TAG);adtsFrame.pts=currentFrame.pts;adtsFrame.dts=currentFrame.dts;adtsFrame.writeBytes(currentFrame.data);tags.push(adtsFrame.finalize())}videoKeyFrames.length=0;oldExtraData=null;this.trigger("data",{track:track,tags:tags.list});this.trigger("done","AudioSegmentStream")};this.writeMetaDataTags=function(tags,pts){var adtsFrame;adtsFrame=new FlvTag(FlvTag.METADATA_TAG);adtsFrame.pts=pts;adtsFrame.dts=pts;adtsFrame.writeMetaDataDouble("audiocodecid",10);adtsFrame.writeMetaDataBoolean("stereo",track.channelcount===2);adtsFrame.writeMetaDataDouble("audiosamplerate",track.samplerate);adtsFrame.writeMetaDataDouble("audiosamplesize",16);tags.push(adtsFrame.finalize());adtsFrame=new FlvTag(FlvTag.AUDIO_TAG,true);adtsFrame.pts=pts;adtsFrame.dts=pts;adtsFrame.view.setUint16(adtsFrame.position,track.extraData);adtsFrame.position+=2;adtsFrame.length=Math.max(adtsFrame.length,adtsFrame.position);tags.push(adtsFrame.finalize())};this.onVideoKeyFrame=function(pts){videoKeyFrames.push(pts)}};_AudioSegmentStream2.prototype=new Stream;_VideoSegmentStream2=function VideoSegmentStream(track){var nalUnits=[],config,h264Frame;_VideoSegmentStream2.prototype.init.call(this);this.finishFrame=function(tags,frame){if(!frame){return}if(config&&track&&track.newMetadata&&(frame.keyFrame||tags.length===0)){var metaTag=metaDataTag(config,frame.dts).finalize();var extraTag=extraDataTag(track,frame.dts).finalize();
metaTag.metaDataTag=extraTag.metaDataTag=true;tags.push(metaTag);tags.push(extraTag);track.newMetadata=false;this.trigger("keyframe",frame.dts)}frame.endNalUnit();tags.push(frame.finalize());h264Frame=null};this.push=function(data){collectTimelineInfo(track,data);data.pts=Math.round(data.pts/90);data.dts=Math.round(data.dts/90);nalUnits.push(data)};this.flush=function(){var currentNal,tags=new TagList;while(nalUnits.length){if(nalUnits[0].nalUnitType==="access_unit_delimiter_rbsp"){break}nalUnits.shift()}if(nalUnits.length===0){this.trigger("done","VideoSegmentStream");return}while(nalUnits.length){currentNal=nalUnits.shift();if(currentNal.nalUnitType==="seq_parameter_set_rbsp"){track.newMetadata=true;config=currentNal.config;track.width=config.width;track.height=config.height;track.sps=[currentNal.data];track.profileIdc=config.profileIdc;track.levelIdc=config.levelIdc;track.profileCompatibility=config.profileCompatibility;h264Frame.endNalUnit()}else if(currentNal.nalUnitType==="pic_parameter_set_rbsp"){track.newMetadata=true;track.pps=[currentNal.data];h264Frame.endNalUnit()}else if(currentNal.nalUnitType==="access_unit_delimiter_rbsp"){if(h264Frame){this.finishFrame(tags,h264Frame)}h264Frame=new FlvTag(FlvTag.VIDEO_TAG);h264Frame.pts=currentNal.pts;h264Frame.dts=currentNal.dts}else{if(currentNal.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){h264Frame.keyFrame=true}h264Frame.endNalUnit()}h264Frame.startNalUnit();h264Frame.writeBytes(currentNal.data)}if(h264Frame){this.finishFrame(tags,h264Frame)}this.trigger("data",{track:track,tags:tags.list});this.trigger("done","VideoSegmentStream")}};_VideoSegmentStream2.prototype=new Stream;_Transmuxer2=function Transmuxer(options){var self=this,packetStream,parseStream,elementaryStream,videoTimestampRolloverStream,audioTimestampRolloverStream,timedMetadataTimestampRolloverStream,adtsStream,h264Stream,videoSegmentStream,audioSegmentStream,captionStream,coalesceStream;_Transmuxer2.prototype.init.call(this);options=options||{};this.metadataStream=new m2ts.MetadataStream;options.metadataStream=this.metadataStream;packetStream=new m2ts.TransportPacketStream;parseStream=new m2ts.TransportParseStream;elementaryStream=new m2ts.ElementaryStream;videoTimestampRolloverStream=new m2ts.TimestampRolloverStream("video");audioTimestampRolloverStream=new m2ts.TimestampRolloverStream("audio");timedMetadataTimestampRolloverStream=new m2ts.TimestampRolloverStream("timed-metadata");adtsStream=new AdtsStream;h264Stream=new H264Stream;coalesceStream=new CoalesceStream(options);packetStream.pipe(parseStream).pipe(elementaryStream);elementaryStream.pipe(videoTimestampRolloverStream).pipe(h264Stream);elementaryStream.pipe(audioTimestampRolloverStream).pipe(adtsStream);elementaryStream.pipe(timedMetadataTimestampRolloverStream).pipe(this.metadataStream).pipe(coalesceStream);captionStream=new m2ts.CaptionStream;h264Stream.pipe(captionStream).pipe(coalesceStream);elementaryStream.on("data",function(data){var i,videoTrack,audioTrack;if(data.type==="metadata"){i=data.tracks.length;while(i--){if(data.tracks[i].type==="video"){videoTrack=data.tracks[i]}else if(data.tracks[i].type==="audio"){audioTrack=data.tracks[i]}}if(videoTrack&&!videoSegmentStream){coalesceStream.numberOfTracks++;videoSegmentStream=new _VideoSegmentStream2(videoTrack);h264Stream.pipe(videoSegmentStream).pipe(coalesceStream)}if(audioTrack&&!audioSegmentStream){coalesceStream.numberOfTracks++;audioSegmentStream=new _AudioSegmentStream2(audioTrack);adtsStream.pipe(audioSegmentStream).pipe(coalesceStream);if(videoSegmentStream){videoSegmentStream.on("keyframe",audioSegmentStream.onVideoKeyFrame)}}}});this.push=function(data){packetStream.push(data)};this.flush=function(){packetStream.flush()};this.resetCaptions=function(){captionStream.reset()};coalesceStream.on("data",function(event){self.trigger("data",event)});coalesceStream.on("done",function(){self.trigger("done")})};_Transmuxer2.prototype=new Stream;module.exports=_Transmuxer2},function(module,exports){var Stream=function Stream(){this.init=function(){var listeners={};this.on=function(type,listener){if(!listeners[type]){listeners[type]=[]}listeners[type]=listeners[type].concat(listener)};this.off=function(type,listener){var index;if(!listeners[type]){return false}index=listeners[type].indexOf(listener);listeners[type]=listeners[type].slice();listeners[type].splice(index,1);return index>-1};this.trigger=function(type){var callbacks,i,length,args;callbacks=listeners[type];if(!callbacks){return}if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{args=[];i=arguments.length;for(i=1;i<arguments.length;++i){args.push(arguments[i])}length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args)}}};this.dispose=function(){listeners={}}}};Stream.prototype.pipe=function(destination){this.on("data",function(data){destination.push(data)});this.on("done",function(flushSource){destination.flush(flushSource)});return destination};Stream.prototype.push=function(data){this.trigger("data",data)};Stream.prototype.flush=function(flushSource){this.trigger("done",flushSource)};module.exports=Stream},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358),CaptionStream=__webpack_require__(360),StreamTypes=__webpack_require__(361),TimestampRolloverStream=__webpack_require__(362).TimestampRolloverStream;var m2tsStreamTypes=__webpack_require__(361);var _TransportPacketStream2,_TransportParseStream2,_ElementaryStream2;var MP2T_PACKET_LENGTH=188,SYNC_BYTE=71;_TransportPacketStream2=function TransportPacketStream(){var buffer=new Uint8Array(MP2T_PACKET_LENGTH),bytesInBuffer=0;_TransportPacketStream2.prototype.init.call(this);this.push=function(bytes){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,everything;if(bytesInBuffer){everything=new Uint8Array(bytes.byteLength+bytesInBuffer);everything.set(buffer.subarray(0,bytesInBuffer));everything.set(bytes,bytesInBuffer);bytesInBuffer=0}else{everything=bytes}while(endIndex<everything.byteLength){if(everything[startIndex]===SYNC_BYTE&&everything[endIndex]===SYNC_BYTE){this.trigger("data",everything.subarray(startIndex,endIndex));startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue}startIndex++;endIndex++}if(startIndex<everything.byteLength){buffer.set(everything.subarray(startIndex),0);bytesInBuffer=everything.byteLength-startIndex}};this.flush=function(){if(bytesInBuffer===MP2T_PACKET_LENGTH&&buffer[0]===SYNC_BYTE){this.trigger("data",buffer);bytesInBuffer=0}this.trigger("done")}};_TransportPacketStream2.prototype=new Stream;_TransportParseStream2=function TransportParseStream(){var parsePsi,parsePat,parsePmt,self;_TransportParseStream2.prototype.init.call(this);self=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;parsePsi=function parsePsi(payload,psi){var offset=0;if(psi.payloadUnitStartIndicator){offset+=payload[offset]+1}if(psi.type==="pat"){parsePat(payload.subarray(offset),psi)}else{parsePmt(payload.subarray(offset),psi)}};parsePat=function parsePat(payload,pat){pat.section_number=payload[7];pat.last_section_number=payload[8];self.pmtPid=(payload[10]&31)<<8|payload[11];pat.pmtPid=self.pmtPid};parsePmt=function parsePmt(payload,pmt){var sectionLength,tableEnd,programInfoLength,offset;if(!(payload[5]&1)){return}self.programMapTable={video:null,audio:null,"timed-metadata":{}};sectionLength=(payload[1]&15)<<8|payload[2];tableEnd=3+sectionLength-4;programInfoLength=(payload[10]&15)<<8|payload[11];offset=12+programInfoLength;while(offset<tableEnd){var streamType=payload[offset];var pid=(payload[offset+1]&31)<<8|payload[offset+2];if(streamType===StreamTypes.H264_STREAM_TYPE&&self.programMapTable.video===null){self.programMapTable.video=pid}else if(streamType===StreamTypes.ADTS_STREAM_TYPE&&self.programMapTable.audio===null){self.programMapTable.audio=pid}else if(streamType===StreamTypes.METADATA_STREAM_TYPE){self.programMapTable["timed-metadata"][pid]=streamType}offset+=((payload[offset+3]&15)<<8|payload[offset+4])+5}pmt.programMapTable=self.programMapTable};this.push=function(packet){var result={},offset=4;result.payloadUnitStartIndicator=!!(packet[1]&64);result.pid=packet[1]&31;result.pid<<=8;result.pid|=packet[2];if((packet[3]&48)>>>4>1){offset+=packet[offset]+1}if(result.pid===0){result.type="pat";parsePsi(packet.subarray(offset),result);this.trigger("data",result)}else if(result.pid===this.pmtPid){result.type="pmt";parsePsi(packet.subarray(offset),result);this.trigger("data",result);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([packet,offset,result])}else{this.processPes_(packet,offset,result)}};this.processPes_=function(packet,offset,result){if(result.pid===this.programMapTable.video){result.streamType=StreamTypes.H264_STREAM_TYPE}else if(result.pid===this.programMapTable.audio){result.streamType=StreamTypes.ADTS_STREAM_TYPE}else{result.streamType=this.programMapTable["timed-metadata"][result.pid]}result.type="pes";result.data=packet.subarray(offset);this.trigger("data",result)}};_TransportParseStream2.prototype=new Stream;_TransportParseStream2.STREAM_TYPES={h264:27,adts:15};_ElementaryStream2=function ElementaryStream(){var self=this,video={data:[],size:0},audio={data:[],size:0},timedMetadata={data:[],size:0},parsePes=function parsePes(payload,pes){var ptsDtsFlags;pes.packetLength=6+(payload[4]<<8|payload[5]);pes.dataAlignmentIndicator=(payload[6]&4)!==0;ptsDtsFlags=payload[7];if(ptsDtsFlags&192){pes.pts=(payload[9]&14)<<27|(payload[10]&255)<<20|(payload[11]&254)<<12|(payload[12]&255)<<5|(payload[13]&254)>>>3;pes.pts*=4;pes.pts+=(payload[13]&6)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&64){pes.dts=(payload[14]&14)<<27|(payload[15]&255)<<20|(payload[16]&254)<<12|(payload[17]&255)<<5|(payload[18]&254)>>>3;pes.dts*=4;pes.dts+=(payload[18]&6)>>>1}}pes.data=payload.subarray(9+payload[8])},flushStream=function flushStream(stream,type,forceFlush){var packetData=new Uint8Array(stream.size),event={type:type},i=0,offset=0,packetFlushable=false,fragment;if(!stream.data.length||stream.size<9){return}event.trackId=stream.data[0].pid;for(i=0;i<stream.data.length;i++){fragment=stream.data[i];packetData.set(fragment.data,offset);offset+=fragment.data.byteLength}parsePes(packetData,event);packetFlushable=type==="video"||event.packetLength<=stream.size;if(forceFlush||packetFlushable){stream.size=0;stream.data.length=0}if(packetFlushable){self.trigger("data",event)}};_ElementaryStream2.prototype.init.call(this);this.push=function(data){({pat:function pat(){},pes:function pes(){var stream,streamType;switch(data.streamType){case StreamTypes.H264_STREAM_TYPE:case m2tsStreamTypes.H264_STREAM_TYPE:stream=video;streamType="video";break;case StreamTypes.ADTS_STREAM_TYPE:stream=audio;streamType="audio";break;case StreamTypes.METADATA_STREAM_TYPE:stream=timedMetadata;streamType="timed-metadata";break;default:return}if(data.payloadUnitStartIndicator){flushStream(stream,streamType,true)}stream.data.push(data);stream.size+=data.data.byteLength},pmt:function pmt(){var event={type:"metadata",tracks:[]},programMapTable=data.programMapTable;if(programMapTable.video!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.video,codec:"avc",type:"video"})}if(programMapTable.audio!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.audio,codec:"adts",type:"audio"})}self.trigger("data",event)}})[data.type]()};this.flush=function(){flushStream(video,"video");flushStream(audio,"audio");flushStream(timedMetadata,"timed-metadata");this.trigger("done")}};_ElementaryStream2.prototype=new Stream;var m2ts={PAT_PID:0,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH,TransportPacketStream:_TransportPacketStream2,TransportParseStream:_TransportParseStream2,ElementaryStream:_ElementaryStream2,TimestampRolloverStream:TimestampRolloverStream,CaptionStream:CaptionStream.CaptionStream,Cea608Stream:CaptionStream.Cea608Stream,MetadataStream:__webpack_require__(363)};for(var type in StreamTypes){if(StreamTypes.hasOwnProperty(type)){m2ts[type]=StreamTypes[type]}}module.exports=m2ts},function(module,exports,__webpack_require__){var USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128,Stream=__webpack_require__(358);var parseSei=function parseSei(bytes){var i=0,result={payloadType:-1,payloadSize:0},payloadType=0,payloadSize=0;while(i<bytes.byteLength){if(bytes[i]===RBSP_TRAILING_BITS){break}while(bytes[i]===255){payloadType+=255;i++}payloadType+=bytes[i++];while(bytes[i]===255){payloadSize+=255;i++}payloadSize+=bytes[i++];if(!result.payload&&payloadType===USER_DATA_REGISTERED_ITU_T_T35){result.payloadType=payloadType;result.payloadSize=payloadSize;result.payload=bytes.subarray(i,i+payloadSize);break}i+=payloadSize;payloadType=0;payloadSize=0}return result};var parseUserData=function parseUserData(sei){if(sei.payload[0]!==181){return null}if((sei.payload[1]<<8|sei.payload[2])!==49){return null}if(String.fromCharCode(sei.payload[3],sei.payload[4],sei.payload[5],sei.payload[6])!=="GA94"){return null}if(sei.payload[7]!==3){return null}return sei.payload.subarray(8,sei.payload.length-1)};var parseCaptionPackets=function parseCaptionPackets(pts,userData){var results=[],i,count,offset,data;if(!(userData[0]&64)){return results}count=userData[0]&31;for(i=0;i<count;i++){offset=i*3;data={type:userData[offset+2]&3,pts:pts};if(userData[offset+2]&4){data.ccData=userData[offset+3]<<8|userData[offset+4];results.push(data)}}return results};var CaptionStream=function CaptionStream(){CaptionStream.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Cea608Stream(0,0),new Cea608Stream(0,1),new Cea608Stream(1,0),new Cea608Stream(1,1)];this.reset();this.ccStreams_.forEach(function(cc){cc.on("data",this.trigger.bind(this,"data"));cc.on("done",this.trigger.bind(this,"done"))},this)};CaptionStream.prototype=new Stream;CaptionStream.prototype.push=function(event){var sei,userData;if(event.nalUnitType!=="sei_rbsp"){return}sei=parseSei(event.escapedRBSP);if(sei.payloadType!==USER_DATA_REGISTERED_ITU_T_T35){return}userData=parseUserData(sei);if(!userData){return}if(event.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(event.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.ignoreNextEqualDts_=false;return}this.captionPackets_=this.captionPackets_.concat(parseCaptionPackets(event.pts,userData));this.latestDts_=event.dts};CaptionStream.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(cc){cc.flush()},this);return}this.captionPackets_.forEach(function(elem,idx){elem.presortIndex=idx});this.captionPackets_.sort(function(a,b){if(a.pts===b.pts){return a.presortIndex-b.presortIndex}return a.pts-b.pts});this.captionPackets_.forEach(function(packet){if(packet.type<2){this.dispatchCea608Packet(packet)}},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(cc){cc.flush()},this);return};CaptionStream.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(ccStream){ccStream.reset()})};CaptionStream.prototype.dispatchCea608Packet=function(packet){if(this.setsChannel1Active(packet)){this.activeCea608Channel_[packet.type]=0}else if(this.setsChannel2Active(packet)){this.activeCea608Channel_[packet.type]=1}if(this.activeCea608Channel_[packet.type]===null){return}this.ccStreams_[(packet.type<<1)+this.activeCea608Channel_[packet.type]].push(packet)};CaptionStream.prototype.setsChannel1Active=function(packet){return(packet.ccData&30720)===4096};CaptionStream.prototype.setsChannel2Active=function(packet){return(packet.ccData&30720)===6144};var CHARACTER_TRANSLATION={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var getCharFromCode=function getCharFromCode(code){if(code===null){return""}code=CHARACTER_TRANSLATION[code]||code;return String.fromCharCode(code)};var BOTTOM_ROW=14;var ROWS=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var createDisplayBuffer=function createDisplayBuffer(){var result=[],i=BOTTOM_ROW+1;while(i--){result.push("")}return result};var Cea608Stream=function Cea608Stream(field,dataChannel){Cea608Stream.prototype.init.call(this);this.field_=field||0;this.dataChannel_=dataChannel||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(packet){var data,swap,char0,char1,text;data=packet.ccData&32639;if(data===this.lastControlCode_){this.lastControlCode_=null;return}if((data&61440)===4096){this.lastControlCode_=data}else if(data!==this.PADDING_){this.lastControlCode_=null}char0=data>>>8;char1=data&255;if(data===this.PADDING_){return}else if(data===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(data===this.END_OF_CAPTION_){this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);swap=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=swap;this.startPts_=packet.pts}else if(data===this.ROLL_UP_2_ROWS_){this.topRow_=BOTTOM_ROW-1;this.mode_="rollUp"}else if(data===this.ROLL_UP_3_ROWS_){this.topRow_=BOTTOM_ROW-2;this.mode_="rollUp"}else if(data===this.ROLL_UP_4_ROWS_){this.topRow_=BOTTOM_ROW-3;this.mode_="rollUp"}else if(data===this.CARRIAGE_RETURN_){this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);this.shiftRowsUp_();this.startPts_=packet.pts}else if(data===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[BOTTOM_ROW]=this.nonDisplayed_[BOTTOM_ROW].slice(0,-1)}else{this.displayed_[BOTTOM_ROW]=this.displayed_[BOTTOM_ROW].slice(0,-1)}}else if(data===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer()}else if(data===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=createDisplayBuffer()}else if(data===this.RESUME_DIRECT_CAPTIONING_){this.mode_="paintOn"}else if(this.isSpecialCharacter(char0,char1)){char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++}else if(this.isExtCharacter(char0,char1)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[BOTTOM_ROW]=this.displayed_[BOTTOM_ROW].slice(0,-1)}char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++}else if(this.isMidRowCode(char0,char1)){this.clearFormatting(packet.pts);this[this.mode_](packet.pts," ");this.column_++;if((char1&14)===14){this.addFormatting(packet.pts,["i"])}if((char1&1)===1){this.addFormatting(packet.pts,["u"])}}else if(this.isOffsetControlCode(char0,char1)){this.column_+=char1&3}else if(this.isPAC(char0,char1)){var row=ROWS.indexOf(data&7968);if(row!==this.row_){this.clearFormatting(packet.pts);this.row_=row}if(char1&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(packet.pts,["u"])}if((data&16)===16){this.column_=((data&14)>>1)*4}if(this.isColorPAC(char1)){if((char1&14)===14){this.addFormatting(packet.pts,["i"])}}}else if(this.isNormalChar(char0)){if(char1===0){char1=null}text=getCharFromCode(char0);text+=getCharFromCode(char1);this[this.mode_](packet.pts,text);this.column_+=text.length}}};Cea608Stream.prototype=new Stream;Cea608Stream.prototype.flushDisplayed=function(pts){var content=this.displayed_.map(function(row){return row.trim()}).join("\n").replace(/^\n+|\n+$/g,"");if(content.length){this.trigger("data",{startPts:this.startPts_,endPts:pts,text:content,stream:this.name_})}};Cea608Stream.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=createDisplayBuffer();this.nonDisplayed_=createDisplayBuffer();this.lastControlCode_=null;this.column_=0;this.row_=BOTTOM_ROW;this.formatting_=[]};Cea608Stream.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Cea608Stream.prototype.isSpecialCharacter=function(char0,char1){return char0===this.EXT_&&char1>=48&&char1<=63};Cea608Stream.prototype.isExtCharacter=function(char0,char1){return(char0===this.EXT_+1||char0===this.EXT_+2)&&char1>=32&&char1<=63};Cea608Stream.prototype.isMidRowCode=function(char0,char1){return char0===this.EXT_&&char1>=32&&char1<=47};Cea608Stream.prototype.isOffsetControlCode=function(char0,char1){return char0===this.OFFSET_&&char1>=33&&char1<=35};Cea608Stream.prototype.isPAC=function(char0,char1){return char0>=this.BASE_&&char0<this.BASE_+8&&char1>=64&&char1<=127};Cea608Stream.prototype.isColorPAC=function(char1){return char1>=64&&char1<=79||char1>=96&&char1<=127};Cea608Stream.prototype.isNormalChar=function(char){return char>=32&&char<=127};Cea608Stream.prototype.addFormatting=function(pts,format){this.formatting_=this.formatting_.concat(format);var text=format.reduce(function(text,format){return text+"<"+format+">"},"");this[this.mode_](pts,text)};Cea608Stream.prototype.clearFormatting=function(pts){if(!this.formatting_.length){return}var text=this.formatting_.reverse().reduce(function(text,format){return text+"</"+format+">"},"");this.formatting_=[];this[this.mode_](pts,text)};Cea608Stream.prototype.popOn=function(pts,text){var baseRow=this.nonDisplayed_[this.row_];baseRow+=text;this.nonDisplayed_[this.row_]=baseRow};Cea608Stream.prototype.rollUp=function(pts,text){var baseRow=this.displayed_[BOTTOM_ROW];baseRow+=text;this.displayed_[BOTTOM_ROW]=baseRow};Cea608Stream.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++){this.displayed_[i]=""}for(i=this.topRow_;i<BOTTOM_ROW;i++){this.displayed_[i]=this.displayed_[i+1]}this.displayed_[BOTTOM_ROW]=""};Cea608Stream.prototype.paintOn=function(){};module.exports={CaptionStream:CaptionStream,Cea608Stream:Cea608Stream}},function(module,exports){module.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358);var MAX_TS=8589934592;var RO_THRESH=4294967296;var handleRollover=function handleRollover(value,reference){var direction=1;if(value>reference){direction=-1}while(Math.abs(reference-value)>RO_THRESH){value+=direction*MAX_TS}return value};var TimestampRolloverStream=function TimestampRolloverStream(type){var lastDTS,referenceDTS;TimestampRolloverStream.prototype.init.call(this);this.type_=type;this.push=function(data){if(data.type!==this.type_){return}if(referenceDTS===undefined){referenceDTS=data.dts}data.dts=handleRollover(data.dts,referenceDTS);data.pts=handleRollover(data.pts,referenceDTS);lastDTS=data.dts;this.trigger("data",data)};this.flush=function(){referenceDTS=lastDTS;this.trigger("done")};this.discontinuity=function(){referenceDTS=void 0;lastDTS=void 0}};TimestampRolloverStream.prototype=new Stream;module.exports={TimestampRolloverStream:TimestampRolloverStream,handleRollover:handleRollover}},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358),StreamTypes=__webpack_require__(361),percentEncode=function percentEncode(bytes,start,end){var i,result="";for(i=start;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2)}return result},parseUtf8=function parseUtf8(bytes,start,end){return decodeURIComponent(percentEncode(bytes,start,end))},parseIso88591=function parseIso88591(bytes,start,end){return unescape(percentEncode(bytes,start,end))},parseSyncSafeInteger=function parseSyncSafeInteger(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3]},tagParsers={TXXX:function TXXX(tag){var i;if(tag.data[0]!==3){return}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.value=parseUtf8(tag.data,i+1,tag.data.length).replace(/\0*$/,"");break}}tag.data=tag.value},WXXX:function WXXX(tag){var i;if(tag.data[0]!==3){return}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.url=parseUtf8(tag.data,i+1,tag.data.length);break}}},PRIV:function PRIV(tag){var i;for(i=0;i<tag.data.length;i++){if(tag.data[i]===0){tag.owner=parseIso88591(tag.data,0,i);break}}tag.privateData=tag.data.subarray(i+1);tag.data=tag.privateData}},_MetadataStream2;_MetadataStream2=function MetadataStream(options){var settings={debug:!!(options&&options.debug),descriptor:options&&options.descriptor},tagSize=0,buffer=[],bufferSize=0,i;_MetadataStream2.prototype.init.call(this);this.dispatchType=StreamTypes.METADATA_STREAM_TYPE.toString(16);if(settings.descriptor){for(i=0;i<settings.descriptor.length;i++){this.dispatchType+=("00"+settings.descriptor[i].toString(16)).slice(-2)}}this.push=function(chunk){var tag,frameStart,frameSize,frame,i,frameHeader;if(chunk.type!=="timed-metadata"){return}if(chunk.dataAlignmentIndicator){bufferSize=0;buffer.length=0}if(buffer.length===0&&(chunk.data.length<10||chunk.data[0]!=="I".charCodeAt(0)||chunk.data[1]!=="D".charCodeAt(0)||chunk.data[2]!=="3".charCodeAt(0))){if(settings.debug){console.log("Skipping unrecognized metadata packet")}return}buffer.push(chunk);bufferSize+=chunk.data.byteLength;if(buffer.length===1){tagSize=parseSyncSafeInteger(chunk.data.subarray(6,10));tagSize+=10}if(bufferSize<tagSize){return}tag={data:new Uint8Array(tagSize),frames:[],pts:buffer[0].pts,dts:buffer[0].dts};for(i=0;i<tagSize;){tag.data.set(buffer[0].data.subarray(0,tagSize-i),i);i+=buffer[0].data.byteLength;bufferSize-=buffer[0].data.byteLength;buffer.shift()}frameStart=10;if(tag.data[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger(tag.data.subarray(10,14));tagSize-=parseSyncSafeInteger(tag.data.subarray(16,20))}do{frameSize=parseSyncSafeInteger(tag.data.subarray(frameStart+4,frameStart+8));if(frameSize<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}frameHeader=String.fromCharCode(tag.data[frameStart],tag.data[frameStart+1],tag.data[frameStart+2],tag.data[frameStart+3]);frame={id:frameHeader,data:tag.data.subarray(frameStart+10,frameStart+frameSize+10)};frame.key=frame.id;if(tagParsers[frame.id]){tagParsers[frame.id](frame);if(frame.owner==="com.apple.streaming.transportStreamTimestamp"){var d=frame.data,size=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&3;frame.timeStamp=size;if(tag.pts===undefined&&tag.dts===undefined){tag.pts=frame.timeStamp;tag.dts=frame.timeStamp}this.trigger("timestamp",frame)}}tag.frames.push(frame);frameStart+=10;frameStart+=frameSize}while(frameStart<tagSize);this.trigger("data",tag)}};_MetadataStream2.prototype=new Stream;module.exports=_MetadataStream2},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358);var _AdtsStream2;var ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_AdtsStream2=function AdtsStream(){var buffer;_AdtsStream2.prototype.init.call(this);this.push=function(packet){var i=0,frameNum=0,frameLength,protectionSkipBytes,frameEnd,oldBuffer,sampleCount,adtsFrameDuration;if(packet.type!=="audio"){return}if(buffer){oldBuffer=buffer;buffer=new Uint8Array(oldBuffer.byteLength+packet.data.byteLength);buffer.set(oldBuffer);buffer.set(packet.data,oldBuffer.byteLength)}else{buffer=packet.data}while(i+5<buffer.length){if(buffer[i]!==255||(buffer[i+1]&246)!==240){i++;continue}protectionSkipBytes=(~buffer[i+1]&1)*2;frameLength=(buffer[i+3]&3)<<11|buffer[i+4]<<3|(buffer[i+5]&224)>>5;sampleCount=((buffer[i+6]&3)+1)*1024;adtsFrameDuration=sampleCount*9e4/ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&60)>>>2];frameEnd=i+frameLength;if(buffer.byteLength<frameEnd){return}this.trigger("data",{pts:packet.pts+frameNum*adtsFrameDuration,dts:packet.dts+frameNum*adtsFrameDuration,sampleCount:sampleCount,audioobjecttype:(buffer[i+2]>>>6&3)+1,channelcount:(buffer[i+2]&1)<<2|(buffer[i+3]&192)>>>6,samplerate:ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&60)>>>2],samplingfrequencyindex:(buffer[i+2]&60)>>>2,samplesize:16,data:buffer.subarray(i+7+protectionSkipBytes,frameEnd)});if(buffer.byteLength===frameEnd){buffer=undefined;return}frameNum++;buffer=buffer.subarray(frameEnd)}};this.flush=function(){this.trigger("done")}};_AdtsStream2.prototype=new Stream;module.exports=_AdtsStream2},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358);var ExpGolomb=__webpack_require__(366);var _H264Stream2,_NalByteStream2;var PROFILES_WITH_OPTIONAL_SPS_DATA;_NalByteStream2=function NalByteStream(){var syncPoint=0,i,buffer;_NalByteStream2.prototype.init.call(this);this.push=function(data){var swapBuffer;if(!buffer){buffer=data.data}else{swapBuffer=new Uint8Array(buffer.byteLength+data.data.byteLength);swapBuffer.set(buffer);swapBuffer.set(data.data,buffer.byteLength);buffer=swapBuffer}for(;syncPoint<buffer.byteLength-3;syncPoint++){if(buffer[syncPoint+2]===1){i=syncPoint+5;break}}while(i<buffer.byteLength){switch(buffer[i]){case 0:if(buffer[i-1]!==0){i+=2;break}else if(buffer[i-2]!==0){i++;break}if(syncPoint+3!==i-2){this.trigger("data",buffer.subarray(syncPoint+3,i-2))}do{i++}while(buffer[i]!==1&&i<buffer.length);syncPoint=i-2;i+=3;break;case 1:if(buffer[i-1]!==0||buffer[i-2]!==0){i+=3;break}this.trigger("data",buffer.subarray(syncPoint+3,i-2));syncPoint=i-2;i+=3;break;default:i+=3;break}}buffer=buffer.subarray(syncPoint);i-=syncPoint;syncPoint=0};this.flush=function(){if(buffer&&buffer.byteLength>3){this.trigger("data",buffer.subarray(syncPoint+3))}buffer=null;syncPoint=0;this.trigger("done")}};_NalByteStream2.prototype=new Stream;PROFILES_WITH_OPTIONAL_SPS_DATA={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};_H264Stream2=function H264Stream(){var nalByteStream=new _NalByteStream2,self,trackId,currentPts,currentDts,discardEmulationPreventionBytes,readSequenceParameterSet,skipScalingList;_H264Stream2.prototype.init.call(this);self=this;this.push=function(packet){if(packet.type!=="video"){return}trackId=packet.trackId;currentPts=packet.pts;currentDts=packet.dts;nalByteStream.push(packet)};nalByteStream.on("data",function(data){var event={trackId:trackId,pts:currentPts,dts:currentDts,data:data};switch(data[0]&31){case 5:event.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:event.nalUnitType="sei_rbsp";event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));break;case 7:event.nalUnitType="seq_parameter_set_rbsp";event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));event.config=readSequenceParameterSet(event.escapedRBSP);break;case 8:event.nalUnitType="pic_parameter_set_rbsp";break;case 9:event.nalUnitType="access_unit_delimiter_rbsp";break;default:break}self.trigger("data",event)});nalByteStream.on("done",function(){self.trigger("done")});this.flush=function(){nalByteStream.flush()};skipScalingList=function skipScalingList(count,expGolombDecoder){var lastScale=8,nextScale=8,j,deltaScale;for(j=0;j<count;j++){
if(nextScale!==0){deltaScale=expGolombDecoder.readExpGolomb();nextScale=(lastScale+deltaScale+256)%256}lastScale=nextScale===0?lastScale:nextScale}};discardEmulationPreventionBytes=function discardEmulationPreventionBytes(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===3){emulationPreventionBytesPositions.push(i+2);i+=2}else{i++}}if(emulationPreventionBytesPositions.length===0){return data}newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift()}newData[i]=data[sourceIndex]}return newData};readSequenceParameterSet=function readSequenceParameterSet(data){var frameCropLeftOffset=0,frameCropRightOffset=0,frameCropTopOffset=0,frameCropBottomOffset=0,sarScale=1,expGolombDecoder,profileIdc,levelIdc,profileCompatibility,chromaFormatIdc,picOrderCntType,numRefFramesInPicOrderCntCycle,picWidthInMbsMinus1,picHeightInMapUnitsMinus1,frameMbsOnlyFlag,scalingListCount,sarRatio,aspectRatioIdc,i;expGolombDecoder=new ExpGolomb(data);profileIdc=expGolombDecoder.readUnsignedByte();profileCompatibility=expGolombDecoder.readUnsignedByte();levelIdc=expGolombDecoder.readUnsignedByte();expGolombDecoder.skipUnsignedExpGolomb();if(PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]){chromaFormatIdc=expGolombDecoder.readUnsignedExpGolomb();if(chromaFormatIdc===3){expGolombDecoder.skipBits(1)}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){scalingListCount=chromaFormatIdc!==3?8:12;for(i=0;i<scalingListCount;i++){if(expGolombDecoder.readBoolean()){if(i<6){skipScalingList(16,expGolombDecoder)}else{skipScalingList(64,expGolombDecoder)}}}}}expGolombDecoder.skipUnsignedExpGolomb();picOrderCntType=expGolombDecoder.readUnsignedExpGolomb();if(picOrderCntType===0){expGolombDecoder.readUnsignedExpGolomb()}else if(picOrderCntType===1){expGolombDecoder.skipBits(1);expGolombDecoder.skipExpGolomb();expGolombDecoder.skipExpGolomb();numRefFramesInPicOrderCntCycle=expGolombDecoder.readUnsignedExpGolomb();for(i=0;i<numRefFramesInPicOrderCntCycle;i++){expGolombDecoder.skipExpGolomb()}}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);picWidthInMbsMinus1=expGolombDecoder.readUnsignedExpGolomb();picHeightInMapUnitsMinus1=expGolombDecoder.readUnsignedExpGolomb();frameMbsOnlyFlag=expGolombDecoder.readBits(1);if(frameMbsOnlyFlag===0){expGolombDecoder.skipBits(1)}expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){frameCropLeftOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropRightOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropTopOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropBottomOffset=expGolombDecoder.readUnsignedExpGolomb()}if(expGolombDecoder.readBoolean()){if(expGolombDecoder.readBoolean()){aspectRatioIdc=expGolombDecoder.readUnsignedByte();switch(aspectRatioIdc){case 1:sarRatio=[1,1];break;case 2:sarRatio=[12,11];break;case 3:sarRatio=[10,11];break;case 4:sarRatio=[16,11];break;case 5:sarRatio=[40,33];break;case 6:sarRatio=[24,11];break;case 7:sarRatio=[20,11];break;case 8:sarRatio=[32,11];break;case 9:sarRatio=[80,33];break;case 10:sarRatio=[18,11];break;case 11:sarRatio=[15,11];break;case 12:sarRatio=[64,33];break;case 13:sarRatio=[160,99];break;case 14:sarRatio=[4,3];break;case 15:sarRatio=[3,2];break;case 16:sarRatio=[2,1];break;case 255:{sarRatio=[expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte(),expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte()];break}}if(sarRatio){sarScale=sarRatio[0]/sarRatio[1]}}}return{profileIdc:profileIdc,levelIdc:levelIdc,profileCompatibility:profileCompatibility,width:Math.ceil(((picWidthInMbsMinus1+1)*16-frameCropLeftOffset*2-frameCropRightOffset*2)*sarScale),height:(2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16-frameCropTopOffset*2-frameCropBottomOffset*2}}};_H264Stream2.prototype=new Stream;module.exports={H264Stream:_H264Stream2,NalByteStream:_NalByteStream2}},function(module,exports){var ExpGolomb;ExpGolomb=function ExpGolomb(workingData){var workingBytesAvailable=workingData.byteLength,workingWord=0,workingBitsAvailable=0;this.length=function(){return 8*workingBytesAvailable};this.bitsAvailable=function(){return 8*workingBytesAvailable+workingBitsAvailable};this.loadWord=function(){var position=workingData.byteLength-workingBytesAvailable,workingBytes=new Uint8Array(4),availableBytes=Math.min(4,workingBytesAvailable);if(availableBytes===0){throw new Error("no bytes available")}workingBytes.set(workingData.subarray(position,position+availableBytes));workingWord=new DataView(workingBytes.buffer).getUint32(0);workingBitsAvailable=availableBytes*8;workingBytesAvailable-=availableBytes};this.skipBits=function(count){var skipBytes;if(workingBitsAvailable>count){workingWord<<=count;workingBitsAvailable-=count}else{count-=workingBitsAvailable;skipBytes=Math.floor(count/8);count-=skipBytes*8;workingBytesAvailable-=skipBytes;this.loadWord();workingWord<<=count;workingBitsAvailable-=count}};this.readBits=function(size){var bits=Math.min(workingBitsAvailable,size),valu=workingWord>>>32-bits;workingBitsAvailable-=bits;if(workingBitsAvailable>0){workingWord<<=bits}else if(workingBytesAvailable>0){this.loadWord()}bits=size-bits;if(bits>0){return valu<<bits|this.readBits(bits)}return valu};this.skipLeadingZeros=function(){var leadingZeroCount;for(leadingZeroCount=0;leadingZeroCount<workingBitsAvailable;++leadingZeroCount){if((workingWord&2147483648>>>leadingZeroCount)!==0){workingWord<<=leadingZeroCount;workingBitsAvailable-=leadingZeroCount;return leadingZeroCount}}this.loadWord();return leadingZeroCount+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var clz=this.skipLeadingZeros();return this.readBits(clz+1)-1};this.readExpGolomb=function(){var valu=this.readUnsignedExpGolomb();if(1&valu){return 1+valu>>>1}return-1*(valu>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};module.exports=ExpGolomb},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358);var CoalesceStream=function CoalesceStream(options){this.numberOfTracks=0;this.metadataStream=options.metadataStream;this.videoTags=[];this.audioTags=[];this.videoTrack=null;this.audioTrack=null;this.pendingCaptions=[];this.pendingMetadata=[];this.pendingTracks=0;this.processedTracks=0;CoalesceStream.prototype.init.call(this);this.push=function(output){if(output.text){return this.pendingCaptions.push(output)}if(output.frames){return this.pendingMetadata.push(output)}if(output.track.type==="video"){this.videoTrack=output.track;this.videoTags=output.tags;this.pendingTracks++}if(output.track.type==="audio"){this.audioTrack=output.track;this.audioTags=output.tags;this.pendingTracks++}}};CoalesceStream.prototype=new Stream;CoalesceStream.prototype.flush=function(flushSource){var id3,caption,i,timelineStartPts,event={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if(flushSource!=="VideoSegmentStream"&&flushSource!=="AudioSegmentStream"){return}else if(this.pendingTracks===0){this.processedTracks++;if(this.processedTracks<this.numberOfTracks){return}}}this.processedTracks+=this.pendingTracks;this.pendingTracks=0;if(this.processedTracks<this.numberOfTracks){return}if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts}event.tags.videoTags=this.videoTags;event.tags.audioTags=this.audioTags;for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=caption.startPts-timelineStartPts;caption.startTime/=9e4;caption.endTime=caption.endPts-timelineStartPts;caption.endTime/=9e4;event.captionStreams[caption.stream]=true;event.captions.push(caption)}for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=id3.pts-timelineStartPts;id3.cueTime/=9e4;event.metadata.push(id3)}event.metadata.dispatchType=this.metadataStream.dispatchType;this.videoTrack=null;this.audioTrack=null;this.videoTags=[];this.audioTags=[];this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.pendingTracks=0;this.processedTracks=0;this.trigger("data",event);this.trigger("done")};module.exports=CoalesceStream},function(module,exports){var TagList=function TagList(){var self=this;this.list=[];this.push=function(tag){this.list.push({bytes:tag.bytes,dts:tag.dts,pts:tag.pts,keyFrame:tag.keyFrame,metaDataTag:tag.metaDataTag})};Object.defineProperty(this,"length",{get:function get(){return self.list.length}})};module.exports=TagList},function(module,exports,__webpack_require__){var FlvTag=__webpack_require__(356);var getFlvHeader=function getFlvHeader(duration,audio,video){var headBytes=new Uint8Array(3+1+1+4),head=new DataView(headBytes.buffer),metadata,result,metadataLength;duration=duration||0;audio=audio===undefined?true:audio;video=video===undefined?true:video;head.setUint8(0,70);head.setUint8(1,76);head.setUint8(2,86);head.setUint8(3,1);head.setUint8(4,(audio?4:0)|(video?1:0));head.setUint32(5,headBytes.byteLength);if(duration<=0){result=new Uint8Array(headBytes.byteLength+4);result.set(headBytes);result.set([0,0,0,0],headBytes.byteLength);return result}metadata=new FlvTag(FlvTag.METADATA_TAG);metadata.pts=metadata.dts=0;metadata.writeMetaDataDouble("duration",duration);metadataLength=metadata.finalize().length;result=new Uint8Array(headBytes.byteLength+metadataLength);result.set(headBytes);result.set(head.byteLength,metadataLength);return result};module.exports=getFlvHeader},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var removeCuesFromTrack=function removeCuesFromTrack(start,end,track){var i=undefined;var cue=undefined;if(!track){return}if(!track.cues){return}i=track.cues.length;while(i--){cue=track.cues[i];if(cue.startTime<=end&&cue.endTime>=start){track.removeCue(cue)}}};exports["default"]=removeCuesFromTrack;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var createTextTracksIfNecessary=function createTextTracksIfNecessary(sourceBuffer,mediaSource,segment){var player=mediaSource.player_;if(segment.captions&&segment.captions.length){if(!sourceBuffer.inbandTextTracks_){sourceBuffer.inbandTextTracks_={}}for(var trackId in segment.captionStreams){if(!sourceBuffer.inbandTextTracks_[trackId]){player.tech_.trigger({type:"usage",name:"hls-608"});var track=player.textTracks().getTrackById(trackId);if(track){sourceBuffer.inbandTextTracks_[trackId]=track}else{sourceBuffer.inbandTextTracks_[trackId]=player.addRemoteTextTrack({kind:"captions",id:trackId,label:trackId},false).track}}}}if(segment.metadata&&segment.metadata.length&&!sourceBuffer.metadataTrack_){sourceBuffer.metadataTrack_=player.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;sourceBuffer.metadataTrack_.inBandMetadataTrackDispatchType=segment.metadata.dispatchType}};exports["default"]=createTextTracksIfNecessary;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var deprecateOldCue=function deprecateOldCue(cue){Object.defineProperties(cue.frame,{id:{get:function get(){_videoJs2["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return cue.value.key}},value:{get:function get(){_videoJs2["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return cue.value.data}},privateData:{get:function get(){_videoJs2["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return cue.value.data}}})};var durationOfVideo=function durationOfVideo(duration){var dur=undefined;if(isNaN(duration)||Math.abs(duration)===Infinity){dur=Number.MAX_VALUE}else{dur=duration}return dur};var addTextTrackData=function addTextTrackData(sourceHandler,captionArray,metadataArray){var Cue=_globalWindow2["default"].WebKitDataCue||_globalWindow2["default"].VTTCue;if(captionArray){captionArray.forEach(function(caption){var track=caption.stream;this.inbandTextTracks_[track].addCue(new Cue(caption.startTime+this.timestampOffset,caption.endTime+this.timestampOffset,caption.text))},sourceHandler)}if(metadataArray){(function(){var videoDuration=durationOfVideo(sourceHandler.mediaSource_.duration);metadataArray.forEach(function(metadata){var time=metadata.cueTime+this.timestampOffset;metadata.frames.forEach(function(frame){var cue=new Cue(time,time,frame.value||frame.url||frame.data||"");cue.frame=frame;cue.value=frame;deprecateOldCue(cue);this.metadataTrack_.addCue(cue)},this)},sourceHandler);if(sourceHandler.metadataTrack_&&sourceHandler.metadataTrack_.cues&&sourceHandler.metadataTrack_.cues.length){(function(){var cues=sourceHandler.metadataTrack_.cues;var cuesArray=[];for(var i=0;i<cues.length;i++){if(cues[i]){cuesArray.push(cues[i])}}var cuesGroupedByStartTime=cuesArray.reduce(function(obj,cue){var timeSlot=obj[cue.startTime]||[];timeSlot.push(cue);obj[cue.startTime]=timeSlot;return obj},{});var sortedStartTimes=Object.keys(cuesGroupedByStartTime).sort(function(a,b){return Number(a)-Number(b)});sortedStartTimes.forEach(function(startTime,idx){var cueGroup=cuesGroupedByStartTime[startTime];var nextTime=Number(sortedStartTimes[idx+1])||videoDuration;cueGroup.forEach(function(cue){cue.endTime=nextTime})})})()}})()}};exports["default"]={addTextTrackData:addTextTrackData,durationOfVideo:durationOfVideo};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _muxJsLibFlv=__webpack_require__(355);var _muxJsLibFlv2=_interopRequireDefault(_muxJsLibFlv);var wireTransmuxerEvents=function wireTransmuxerEvents(transmuxer){transmuxer.on("data",function(segment){_globalWindow2["default"].postMessage({action:"data",segment:segment})});transmuxer.on("done",function(data){_globalWindow2["default"].postMessage({action:"done"})})};var MessageHandlers=function(){function MessageHandlers(options){_classCallCheck(this,MessageHandlers);this.options=options||{};this.init()}_createClass(MessageHandlers,[{key:"init",value:function init(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new _muxJsLibFlv2["default"].Transmuxer(this.options);wireTransmuxerEvents(this.transmuxer)}},{key:"push",value:function push(data){var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);this.transmuxer.push(segment)}},{key:"reset",value:function reset(){this.init()}},{key:"flush",value:function flush(){this.transmuxer.flush()}},{key:"resetCaptions",value:function resetCaptions(){this.transmuxer.resetCaptions()}}]);return MessageHandlers}();var FlashTransmuxerWorker=function FlashTransmuxerWorker(self){self.onmessage=function(event){if(event.data.action==="init"&&event.data.options){this.messageHandlers=new MessageHandlers(event.data.options);return}if(!this.messageHandlers){this.messageHandlers=new MessageHandlers}if(event.data&&event.data.action&&event.data.action!=="init"){if(this.messageHandlers[event.data.action]){this.messageHandlers[event.data.action](event.data)}}}};exports["default"]=function(self){return new FlashTransmuxerWorker(self)};module.exports=exports["default"]},function(module,exports,__webpack_require__){var bundleFn=arguments[3];var sources=arguments[4];var cache=arguments[5];var stringify=JSON.stringify;var webpack=false;var webpackBootstrapFn=function webpackBootstrapFn(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=entryModule)};if(typeof bundleFn==="undefined"){webpack=true;bundleFn=webpackBootstrapFn;sources=__webpack_require__.m}var bundleWithBrowserify=function bundleWithBrowserify(fn){var cacheKeys=Object.keys(cache);var fnModuleKey;for(var i=0;i<cacheKeys.length;i++){var cacheKey=cacheKeys[i];var cacheExports=cache[cacheKey].exports;if(cacheExports===fn||cacheExports&&cacheExports.default===fn){fnModuleKey=cacheKey;break}}if(!fnModuleKey){fnModuleKey=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var fnModuleCache={};for(var i=0;i<cacheKeys.length;i++){var cacheKey=cacheKeys[i];fnModuleCache[cacheKey]=cacheKey}sources[fnModuleKey]=["function(require,module,exports){"+fn+"(self); }",fnModuleCache]}var entryKey=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var entryCache={};entryCache[fnModuleKey]=fnModuleKey;sources[entryKey]=["function(require,module,exports){"+"var f = require("+stringify(fnModuleKey)+");"+"(f.default ? f.default : f)(self);"+"}",entryCache];return"("+bundleFn+")({"+Object.keys(sources).map(function(key){return stringify(key)+":["+sources[key][0]+","+stringify(sources[key][1])+"]"}).join(",")+"},{},["+stringify(entryKey)+"])"};var bundleWithWebpack=function bundleWithWebpack(fn,fnModuleId){var devMode=typeof fnModuleId==="string";var sourceStrings;if(devMode){sourceStrings={}}else{sourceStrings=[]}Object.keys(sources).forEach(function(sKey){if(!sources[sKey]){return}sourceStrings[sKey]=sources[sKey].toString()});var fnModuleExports=__webpack_require__(fnModuleId);if(!(fnModuleExports&&(fnModuleExports===fn||fnModuleExports.default===fn))){var fnSourceString=sourceStrings[fnModuleId];sourceStrings[fnModuleId]=fnSourceString.substring(0,fnSourceString.length-1)+"\n"+fn.name+"();\n}"}var modulesString;if(devMode){fnModuleId=stringify(fnModuleId);var mappedSourceStrings=Object.keys(sourceStrings).map(function(sKey){return stringify(sKey)+":"+sourceStrings[sKey]});modulesString="{"+mappedSourceStrings.join(",")+"}"}else{modulesString="["+sourceStrings.join(",")+"]"}return"var fn = ("+bundleFn.toString().replace("entryModule",fnModuleId)+")("+modulesString+");\n"+'(typeof fn === "function") && fn(self);'};module.exports=function webwackify(fn,fnModuleId){var src;if(webpack){src=bundleWithWebpack(fn,fnModuleId)}else{src=bundleWithBrowserify(fn)}var blob=new Blob([src],{type:"text/javascript"});var URL=window.URL||window.webkitURL||window.mozURL||window.msURL;var workerUrl=URL.createObjectURL(blob);var worker=new Worker(workerUrl);worker.objectURL=workerUrl;return worker}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var flashConstants={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:1024*32};exports["default"]=flashConstants;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var isAudioCodec=function isAudioCodec(codec){return/mp4a\.\d+.\d+/i.test(codec)};var isVideoCodec=function isVideoCodec(codec){return/avc1\.[\da-f]+/i.test(codec)};var parseContentType=function parseContentType(type){var object={type:"",parameters:{}};var parameters=type.trim().split(";");object.type=parameters.shift().trim();parameters.forEach(function(parameter){var pair=parameter.trim().split("=");if(pair.length>1){var _name=pair[0].replace(/"/g,"").trim();var value=pair[1].replace(/"/g,"").trim();object.parameters[_name]=value}});return object};var translateLegacyCodecs=function translateLegacyCodecs(codecs){return codecs.map(function(codec){return codec.replace(/avc1\.(\d+)\.(\d+)/i,function(orig,profile,avcLevel){var profileHex=("00"+Number(profile).toString(16)).slice(-2);var avcLevelHex=("00"+Number(avcLevel).toString(16)).slice(-2);return"avc1."+profileHex+"00"+avcLevelHex})})};exports["default"]={isAudioCodec:isAudioCodec,parseContentType:parseContentType,isVideoCodec:isVideoCodec,translateLegacyCodecs:translateLegacyCodecs};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _globalDocument=__webpack_require__(331);var _globalDocument2=_interopRequireDefault(_globalDocument);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _virtualSourceBuffer=__webpack_require__(378);var _virtualSourceBuffer2=_interopRequireDefault(_virtualSourceBuffer);var _addTextTrackData=__webpack_require__(372);var _codecUtils=__webpack_require__(376);var HtmlMediaSource=function(_videojs$EventTarget){_inherits(HtmlMediaSource,_videojs$EventTarget);function HtmlMediaSource(){var _this=this;_classCallCheck(this,HtmlMediaSource);_get(Object.getPrototypeOf(HtmlMediaSource.prototype),"constructor",this).call(this);var property=undefined;this.nativeMediaSource_=new _globalWindow2["default"].MediaSource;for(property in this.nativeMediaSource_){if(!(property in HtmlMediaSource.prototype)&&typeof this.nativeMediaSource_[property]==="function"){this[property]=this.nativeMediaSource_[property].bind(this.nativeMediaSource_)}}this.duration_=NaN;Object.defineProperty(this,"duration",{get:function get(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function set(duration){this.duration_=duration;if(duration!==Infinity){this.nativeMediaSource_.duration=duration;return}}});Object.defineProperty(this,"seekable",{get:function get(){if(this.duration_===Infinity){return _videoJs2["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(this,"readyState",{get:function get(){return this.nativeMediaSource_.readyState}});Object.defineProperty(this,"activeSourceBuffers",{get:function get(){return this.activeSourceBuffers_}});this.sourceBuffers=[];this.activeSourceBuffers_=[];this.updateActiveSourceBuffers_=function(){_this.activeSourceBuffers_.length=0;if(_this.sourceBuffers.length===1){var sourceBuffer=_this.sourceBuffers[0];sourceBuffer.appendAudioInitSegment_=true;sourceBuffer.audioDisabled_=!sourceBuffer.audioCodec_;_this.activeSourceBuffers_.push(sourceBuffer);return}var disableCombined=false;var disableAudioOnly=true;for(var i=0;i<_this.player_.audioTracks().length;i++){var track=_this.player_.audioTracks()[i];if(track.enabled&&track.kind!=="main"){disableCombined=true;disableAudioOnly=false;break}}_this.sourceBuffers.forEach(function(sourceBuffer){sourceBuffer.appendAudioInitSegment_=true;if(sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=disableCombined}else if(sourceBuffer.videoCodec_&&!sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=true;disableAudioOnly=false}else if(!sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=disableAudioOnly;if(disableAudioOnly){return}}_this.activeSourceBuffers_.push(sourceBuffer)})};this.onPlayerMediachange_=function(){_this.sourceBuffers.forEach(function(sourceBuffer){sourceBuffer.appendAudioInitSegment_=true})};this.onHlsReset_=function(){_this.sourceBuffers.forEach(function(sourceBuffer){if(sourceBuffer.transmuxer_){sourceBuffer.transmuxer_.postMessage({action:"resetCaptions"})}})};this.onHlsSegmentTimeMapping_=function(event){_this.sourceBuffers.forEach(function(buffer){return buffer.timeMapping_=event.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(eventName){this.nativeMediaSource_.addEventListener(eventName,this.trigger.bind(this))},this);this.on("sourceopen",function(event){var video=_globalDocument2["default"].querySelector('[src="'+_this.url_+'"]');if(!video){return}_this.player_=(0,_videoJs2["default"])(video.parentNode);_this.player_.tech_.on("hls-reset",_this.onHlsReset_);_this.player_.tech_.on("hls-segment-time-mapping",_this.onHlsSegmentTimeMapping_);if(_this.player_.audioTracks&&_this.player_.audioTracks()){_this.player_.audioTracks().on("change",_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on("addtrack",_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on("removetrack",_this.updateActiveSourceBuffers_)}_this.player_.on("mediachange",_this.onPlayerMediachange_)});this.on("sourceended",function(event){var duration=(0,_addTextTrackData.durationOfVideo)(_this.duration);for(var i=0;i<_this.sourceBuffers.length;i++){var sourcebuffer=_this.sourceBuffers[i];var cues=sourcebuffer.metadataTrack_&&sourcebuffer.metadataTrack_.cues;if(cues&&cues.length){cues[cues.length-1].endTime=duration}}});this.on("sourceclose",function(event){this.sourceBuffers.forEach(function(sourceBuffer){if(sourceBuffer.transmuxer_){sourceBuffer.transmuxer_.terminate()}});this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_);this.player_.tech_.off("hls-reset",this.onHlsReset_);this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)}})}_createClass(HtmlMediaSource,[{key:"addSeekableRange_",value:function addSeekableRange_(start,end){var error=undefined;if(this.duration!==Infinity){error=new Error("MediaSource.addSeekableRange() can only be invoked "+"when the duration is Infinity");error.name="InvalidStateError";error.code=11;throw error}if(end>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=end}}},{key:"addSourceBuffer",value:function addSourceBuffer(type){var buffer=undefined;var parsedType=(0,_codecUtils.parseContentType)(type);if(/^(video|audio)\/mp2t$/i.test(parsedType.type)){var codecs=[];if(parsedType.parameters&&parsedType.parameters.codecs){codecs=parsedType.parameters.codecs.split(",");codecs=(0,_codecUtils.translateLegacyCodecs)(codecs);codecs=codecs.filter(function(codec){return(0,_codecUtils.isAudioCodec)(codec)||(0,_codecUtils.isVideoCodec)(codec)})}if(codecs.length===0){codecs=["avc1.4d400d","mp4a.40.2"]}buffer=new _virtualSourceBuffer2["default"](this,codecs);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();buffer.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{buffer=this.nativeMediaSource_.addSourceBuffer(type)}this.sourceBuffers.push(buffer);return buffer}}]);return HtmlMediaSource}(_videoJs2["default"].EventTarget);exports["default"]=HtmlMediaSource;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)));
}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _createTextTracksIfNecessary=__webpack_require__(371);var _createTextTracksIfNecessary2=_interopRequireDefault(_createTextTracksIfNecessary);var _removeCuesFromTrack=__webpack_require__(370);var _removeCuesFromTrack2=_interopRequireDefault(_removeCuesFromTrack);var _addTextTrackData=__webpack_require__(372);var _webwackify=__webpack_require__(374);var _webwackify2=_interopRequireDefault(_webwackify);var _transmuxerWorker=__webpack_require__(379);var _transmuxerWorker2=_interopRequireDefault(_transmuxerWorker);var _codecUtils=__webpack_require__(376);var resolveTransmuxWorker=function resolveTransmuxWorker(){var result=undefined;try{result=379}catch(e){}return result};var makeWrappedSourceBuffer=function makeWrappedSourceBuffer(mediaSource,mimeType){var sourceBuffer=mediaSource.addSourceBuffer(mimeType);var wrapper=Object.create(null);wrapper.updating=false;wrapper.realBuffer_=sourceBuffer;var _loop=function _loop(key){if(typeof sourceBuffer[key]==="function"){wrapper[key]=function(){return sourceBuffer[key].apply(sourceBuffer,arguments)}}else if(typeof wrapper[key]==="undefined"){Object.defineProperty(wrapper,key,{get:function get(){return sourceBuffer[key]},set:function set(v){return sourceBuffer[key]=v}})}};for(var key in sourceBuffer){_loop(key)}return wrapper};var gopsSafeToAlignWith=function gopsSafeToAlignWith(buffer,player,mapping){if(!player||!buffer.length){return[]}var currentTimePts=Math.ceil((player.currentTime()-mapping+3)*9e4);var i=undefined;for(i=0;i<buffer.length;i++){if(buffer[i].pts>currentTimePts){break}}return buffer.slice(i)};exports.gopsSafeToAlignWith=gopsSafeToAlignWith;var updateGopBuffer=function updateGopBuffer(buffer,gops,replace){if(!gops.length){return buffer}if(replace){return gops.slice()}var start=gops[0].pts;var i=0;for(i;i<buffer.length;i++){if(buffer[i].pts>=start){break}}return buffer.slice(0,i).concat(gops)};exports.updateGopBuffer=updateGopBuffer;var removeGopBuffer=function removeGopBuffer(buffer,start,end,mapping){var startPts=Math.ceil((start-mapping)*9e4);var endPts=Math.ceil((end-mapping)*9e4);var updatedBuffer=buffer.slice();var i=buffer.length;while(i--){if(buffer[i].pts<=endPts){break}}if(i===-1){return updatedBuffer}var j=i+1;while(j--){if(buffer[j].pts<=startPts){break}}j=Math.max(j,0);updatedBuffer.splice(j,i-j+1);return updatedBuffer};exports.removeGopBuffer=removeGopBuffer;var VirtualSourceBuffer=function(_videojs$EventTarget){_inherits(VirtualSourceBuffer,_videojs$EventTarget);function VirtualSourceBuffer(mediaSource,codecs){var _this=this;_classCallCheck(this,VirtualSourceBuffer);_get(Object.getPrototypeOf(VirtualSourceBuffer.prototype),"constructor",this).call(this,_videoJs2["default"].EventTarget);this.timestampOffset_=0;this.pendingBuffers_=[];this.bufferUpdating_=false;this.mediaSource_=mediaSource;this.codecs_=codecs;this.audioCodec_=null;this.videoCodec_=null;this.audioDisabled_=false;this.appendAudioInitSegment_=true;this.gopBuffer_=[];this.timeMapping_=0;this.safeAppend_=_videoJs2["default"].browser.IE_VERSION>=11;var options={remux:false,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(codec){if((0,_codecUtils.isAudioCodec)(codec)){_this.audioCodec_=codec}else if((0,_codecUtils.isVideoCodec)(codec)){_this.videoCodec_=codec}});this.transmuxer_=(0,_webwackify2["default"])(_transmuxerWorker2["default"],resolveTransmuxWorker());this.transmuxer_.postMessage({action:"init",options:options});this.transmuxer_.onmessage=function(event){if(event.data.action==="data"){return _this.data_(event)}if(event.data.action==="done"){return _this.done_(event)}if(event.data.action==="gopInfo"){return _this.appendGopInfo_(event)}};Object.defineProperty(this,"timestampOffset",{get:function get(){return this.timestampOffset_},set:function set(val){if(typeof val==="number"&&val>=0){this.timestampOffset_=val;this.appendAudioInitSegment_=true;this.gopBuffer_.length=0;this.timeMapping_=0;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:val})}}});Object.defineProperty(this,"appendWindowStart",{get:function get(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function set(start){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=start}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=start}}});Object.defineProperty(this,"updating",{get:function get(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(this,"buffered",{get:function get(){var start=null;var end=null;var arity=0;var extents=[];var ranges=[];if(!this.videoBuffer_&&!this.audioBuffer_){return _videoJs2["default"].createTimeRange()}if(!this.videoBuffer_){return this.audioBuffer_.buffered}if(!this.audioBuffer_){return this.videoBuffer_.buffered}if(this.audioDisabled_){return this.videoBuffer_.buffered}if(this.videoBuffer_.buffered.length===0&&this.audioBuffer_.buffered.length===0){return _videoJs2["default"].createTimeRange()}var videoBuffered=this.videoBuffer_.buffered;var audioBuffered=this.audioBuffer_.buffered;var count=videoBuffered.length;while(count--){extents.push({time:videoBuffered.start(count),type:"start"});extents.push({time:videoBuffered.end(count),type:"end"})}count=audioBuffered.length;while(count--){extents.push({time:audioBuffered.start(count),type:"start"});extents.push({time:audioBuffered.end(count),type:"end"})}extents.sort(function(a,b){return a.time-b.time});for(count=0;count<extents.length;count++){if(extents[count].type==="start"){arity++;if(arity===2){start=extents[count].time}}else if(extents[count].type==="end"){arity--;if(arity===1){end=extents[count].time}}if(start!==null&&end!==null){ranges.push([start,end]);start=null;end=null}}return _videoJs2["default"].createTimeRanges(ranges)}})}_createClass(VirtualSourceBuffer,[{key:"data_",value:function data_(event){var segment=event.data.segment;segment.data=new Uint8Array(segment.data,event.data.byteOffset,event.data.byteLength);segment.initSegment=new Uint8Array(segment.initSegment.data,segment.initSegment.byteOffset,segment.initSegment.byteLength);(0,_createTextTracksIfNecessary2["default"])(this,this.mediaSource_,segment);this.pendingBuffers_.push(segment);return}},{key:"done_",value:function done_(event){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"createRealSourceBuffers_",value:function createRealSourceBuffers_(){var _this2=this;var types=["audio","video"];types.forEach(function(type){if(!_this2[type+"Codec_"]){return}if(_this2[type+"Buffer_"]){return}var buffer=null;if(_this2.mediaSource_[type+"Buffer_"]){buffer=_this2.mediaSource_[type+"Buffer_"];buffer.updating=false}else{var codecProperty=type+"Codec_";var mimeType=type+'/mp4;codecs="'+_this2[codecProperty]+'"';buffer=makeWrappedSourceBuffer(_this2.mediaSource_.nativeMediaSource_,mimeType);_this2.mediaSource_[type+"Buffer_"]=buffer}_this2[type+"Buffer_"]=buffer;["update","updatestart","updateend"].forEach(function(event){buffer.addEventListener(event,function(){if(type==="audio"&&_this2.audioDisabled_){return}if(event==="updateend"){_this2[type+"Buffer_"].updating=false}var shouldTrigger=types.every(function(t){if(t==="audio"&&_this2.audioDisabled_){return true}if(type!==t&&_this2[t+"Buffer_"]&&_this2[t+"Buffer_"].updating){return false}return true});if(shouldTrigger){return _this2.trigger(event)}})})})}},{key:"appendBuffer",value:function appendBuffer(segment){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var audioBuffered=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:audioBuffered.end(audioBuffered.length-1)})}if(this.videoBuffer_){this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:gopsSafeToAlignWith(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)})}this.transmuxer_.postMessage({action:"push",data:segment.buffer,byteOffset:segment.byteOffset,byteLength:segment.byteLength},[segment.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function appendGopInfo_(event){this.gopBuffer_=updateGopBuffer(this.gopBuffer_,event.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function remove(start,end){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(start,end);this.gopBuffer_=removeGopBuffer(this.gopBuffer_,start,end,this.timeMapping_)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(start,end)}(0,_removeCuesFromTrack2["default"])(start,end,this.metadataTrack_);if(this.inbandTextTracks_){for(var track in this.inbandTextTracks_){(0,_removeCuesFromTrack2["default"])(start,end,this.inbandTextTracks_[track])}}}},{key:"processPendingSegments_",value:function processPendingSegments_(){var sortedSegments={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};sortedSegments=this.pendingBuffers_.reduce(function(segmentObj,segment){var type=segment.type;var data=segment.data;var initSegment=segment.initSegment;segmentObj[type].segments.push(data);segmentObj[type].bytes+=data.byteLength;segmentObj[type].initSegment=initSegment;if(segment.captions){segmentObj.captions=segmentObj.captions.concat(segment.captions)}if(segment.info){segmentObj[type].info=segment.info}if(segment.metadata){segmentObj.metadata=segmentObj.metadata.concat(segment.metadata)}return segmentObj},sortedSegments);if(!this.videoBuffer_&&!this.audioBuffer_){if(sortedSegments.video.bytes===0){this.videoCodec_=null}if(sortedSegments.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(sortedSegments.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:sortedSegments.audio.info})}if(sortedSegments.video.info){this.mediaSource_.trigger({type:"videoinfo",info:sortedSegments.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){sortedSegments.audio.segments.unshift(sortedSegments.audio.initSegment);sortedSegments.audio.bytes+=sortedSegments.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}var triggerUpdateend=false;if(this.videoBuffer_&&sortedSegments.video.bytes){sortedSegments.video.segments.unshift(sortedSegments.video.initSegment);sortedSegments.video.bytes+=sortedSegments.video.initSegment.byteLength;this.concatAndAppendSegments_(sortedSegments.video,this.videoBuffer_);(0,_addTextTrackData.addTextTrackData)(this,sortedSegments.captions,sortedSegments.metadata)}else if(this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)){triggerUpdateend=true}if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(sortedSegments.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;if(triggerUpdateend){this.trigger("updateend")}this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function concatAndAppendSegments_(segmentObj,destinationBuffer){var offset=0;var tempBuffer=undefined;if(segmentObj.bytes){tempBuffer=new Uint8Array(segmentObj.bytes);segmentObj.segments.forEach(function(segment){tempBuffer.set(segment,offset);offset+=segment.byteLength});try{destinationBuffer.updating=true;destinationBuffer.appendBuffer(tempBuffer)}catch(error){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:error.message,originalError:error})}}}}},{key:"abort",value:function abort(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}}]);return VirtualSourceBuffer}(_videoJs2["default"].EventTarget);exports["default"]=VirtualSourceBuffer},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _muxJsLibMp4=__webpack_require__(380);var _muxJsLibMp42=_interopRequireDefault(_muxJsLibMp4);var wireTransmuxerEvents=function wireTransmuxerEvents(transmuxer){transmuxer.on("data",function(segment){var initArray=segment.initSegment;segment.initSegment={data:initArray.buffer,byteOffset:initArray.byteOffset,byteLength:initArray.byteLength};var typedArray=segment.data;segment.data=typedArray.buffer;_globalWindow2["default"].postMessage({action:"data",segment:segment,byteOffset:typedArray.byteOffset,byteLength:typedArray.byteLength},[segment.data])});if(transmuxer.captionStream){transmuxer.captionStream.on("data",function(caption){_globalWindow2["default"].postMessage({action:"caption",data:caption})})}transmuxer.on("done",function(data){_globalWindow2["default"].postMessage({action:"done"})});transmuxer.on("gopInfo",function(gopInfo){_globalWindow2["default"].postMessage({action:"gopInfo",gopInfo:gopInfo})})};var MessageHandlers=function(){function MessageHandlers(options){_classCallCheck(this,MessageHandlers);this.options=options||{};this.init()}_createClass(MessageHandlers,[{key:"init",value:function init(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new _muxJsLibMp42["default"].Transmuxer(this.options);wireTransmuxerEvents(this.transmuxer)}},{key:"push",value:function push(data){var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);this.transmuxer.push(segment)}},{key:"reset",value:function reset(){this.init()}},{key:"setTimestampOffset",value:function setTimestampOffset(data){var timestampOffset=data.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(timestampOffset*9e4))}},{key:"setAudioAppendStart",value:function setAudioAppendStart(data){this.transmuxer.setAudioAppendStart(Math.ceil(data.appendStart*9e4))}},{key:"flush",value:function flush(data){this.transmuxer.flush()}},{key:"resetCaptions",value:function resetCaptions(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function alignGopsWith(data){this.transmuxer.alignGopsWith(data.gopsToAlignWith.slice())}}]);return MessageHandlers}();var TransmuxerWorker=function TransmuxerWorker(self){self.onmessage=function(event){if(event.data.action==="init"&&event.data.options){this.messageHandlers=new MessageHandlers(event.data.options);return}if(!this.messageHandlers){this.messageHandlers=new MessageHandlers}if(event.data&&event.data.action&&event.data.action!=="init"){if(this.messageHandlers[event.data.action]){this.messageHandlers[event.data.action](event.data)}}}};exports["default"]=function(self){return new TransmuxerWorker(self)};module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={generator:__webpack_require__(381),Transmuxer:__webpack_require__(382).Transmuxer,AudioSegmentStream:__webpack_require__(382).AudioSegmentStream,VideoSegmentStream:__webpack_require__(382).VideoSegmentStream}},function(module,exports){var UINT32_MAX=Math.pow(2,32)-1;var box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,traf,trex,trun,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;(function(){var i;types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(i in types){if(types.hasOwnProperty(i)){types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]}}MAJOR_BRAND=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);AVC1_BRAND=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);MINOR_VERSION=new Uint8Array([0,0,0,1]);VIDEO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);AUDIO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR};DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);SMHD=new Uint8Array([0,0,0,0,0,0,0,0]);STCO=new Uint8Array([0,0,0,0,0,0,0,0]);STSC=STCO;STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);STTS=STCO;VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();box=function box(type){var payload=[],size=0,i,result,view;for(i=1;i<arguments.length;i++){payload.push(arguments[i])}i=payload.length;while(i--){size+=payload[i].byteLength}result=new Uint8Array(size+8);view=new DataView(result.buffer,result.byteOffset,result.byteLength);view.setUint32(0,result.byteLength);result.set(type,4);for(i=0,size=8;i<payload.length;i++){result.set(payload[i],size);size+=payload[i].byteLength}return result};dinf=function dinf(){return box(types.dinf,box(types.dref,DREF))};esds=function esds(track){return box(types.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,track.audioobjecttype<<3|track.samplingfrequencyindex>>>1,track.samplingfrequencyindex<<7|track.channelcount<<3,6,1,2]))};ftyp=function ftyp(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND)};hdlr=function hdlr(type){return box(types.hdlr,HDLR_TYPES[type])};mdat=function mdat(data){return box(types.mdat,data)};mdhd=function mdhd(track){var result=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,track.duration>>>24&255,track.duration>>>16&255,track.duration>>>8&255,track.duration&255,85,196,0,0]);if(track.samplerate){result[12]=track.samplerate>>>24&255;result[13]=track.samplerate>>>16&255;result[14]=track.samplerate>>>8&255;result[15]=track.samplerate&255}return box(types.mdhd,result)};mdia=function mdia(track){return box(types.mdia,mdhd(track),hdlr(track.type),minf(track))};mfhd=function mfhd(sequenceNumber){return box(types.mfhd,new Uint8Array([0,0,0,0,(sequenceNumber&4278190080)>>24,(sequenceNumber&16711680)>>16,(sequenceNumber&65280)>>8,sequenceNumber&255]))};minf=function minf(track){return box(types.minf,track.type==="video"?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(track))};moof=function moof(sequenceNumber,tracks){var trackFragments=[],i=tracks.length;while(i--){trackFragments[i]=traf(tracks[i])}return box.apply(null,[types.moof,mfhd(sequenceNumber)].concat(trackFragments))};moov=function moov(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trak(tracks[i])}return box.apply(null,[types.moov,mvhd(4294967295)].concat(boxes).concat(mvex(tracks)))};mvex=function mvex(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trex(tracks[i])}return box.apply(null,[types.mvex].concat(boxes))};mvhd=function mvhd(duration){var bytes=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(duration&4278190080)>>24,(duration&16711680)>>16,(duration&65280)>>8,duration&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return box(types.mvhd,bytes)};sdtp=function sdtp(track){var samples=track.samples||[],bytes=new Uint8Array(4+samples.length),flags,i;for(i=0;i<samples.length;i++){flags=samples[i].flags;bytes[i+4]=flags.dependsOn<<4|flags.isDependedOn<<2|flags.hasRedundancy}return box(types.sdtp,bytes)};stbl=function stbl(track){return box(types.stbl,stsd(track),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO))};(function(){var videoSample,audioSample;stsd=function stsd(track){return box(types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),track.type==="video"?videoSample(track):audioSample(track))};videoSample=function videoSample(track){var sps=track.sps||[],pps=track.pps||[],sequenceParameterSets=[],pictureParameterSets=[],i;for(i=0;i<sps.length;i++){sequenceParameterSets.push((sps[i].byteLength&65280)>>>8);sequenceParameterSets.push(sps[i].byteLength&255);sequenceParameterSets=sequenceParameterSets.concat(Array.prototype.slice.call(sps[i]))}for(i=0;i<pps.length;i++){pictureParameterSets.push((pps[i].byteLength&65280)>>>8);pictureParameterSets.push(pps[i].byteLength&255);pictureParameterSets=pictureParameterSets.concat(Array.prototype.slice.call(pps[i]))}return box(types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(track.width&65280)>>8,track.width&255,(track.height&65280)>>8,track.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),box(types.avcC,new Uint8Array([1,track.profileIdc,track.profileCompatibility,track.levelIdc,255].concat([sps.length]).concat(sequenceParameterSets).concat([pps.length]).concat(pictureParameterSets))),box(types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};audioSample=function audioSample(track){return box(types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(track.channelcount&65280)>>8,track.channelcount&255,(track.samplesize&65280)>>8,track.samplesize&255,0,0,0,0,(track.samplerate&65280)>>8,track.samplerate&255,0,0]),esds(track))}})();tkhd=function tkhd(track){var result=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,0,(track.duration&4278190080)>>24,(track.duration&16711680)>>16,(track.duration&65280)>>8,track.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(track.width&65280)>>8,track.width&255,0,0,(track.height&65280)>>8,track.height&255,0,0]);return box(types.tkhd,result)};traf=function traf(track){var trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable,dataOffset,upperWordBaseMediaDecodeTime,lowerWordBaseMediaDecodeTime;trackFragmentHeader=box(types.tfhd,new Uint8Array([0,0,0,58,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));upperWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime/(UINT32_MAX+1));lowerWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime%(UINT32_MAX+1));trackFragmentDecodeTime=box(types.tfdt,new Uint8Array([1,0,0,0,upperWordBaseMediaDecodeTime>>>24&255,upperWordBaseMediaDecodeTime>>>16&255,upperWordBaseMediaDecodeTime>>>8&255,upperWordBaseMediaDecodeTime&255,lowerWordBaseMediaDecodeTime>>>24&255,lowerWordBaseMediaDecodeTime>>>16&255,lowerWordBaseMediaDecodeTime>>>8&255,lowerWordBaseMediaDecodeTime&255]));dataOffset=32+20+8+16+8+8;if(track.type==="audio"){trackFragmentRun=trun(track,dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun)}sampleDependencyTable=sdtp(track);trackFragmentRun=trun(track,sampleDependencyTable.length+dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable)};trak=function trak(track){track.duration=track.duration||4294967295;return box(types.trak,tkhd(track),mdia(track))};trex=function trex(track){var result=new Uint8Array([0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(track.type!=="video"){result[result.length-1]=0}return box(types.trex,result)};(function(){var audioTrun,videoTrun,trunHeader;trunHeader=function trunHeader(samples,offset){var durationPresent=0,sizePresent=0,flagsPresent=0,compositionTimeOffset=0;if(samples.length){if(samples[0].duration!==undefined){durationPresent=1}if(samples[0].size!==undefined){sizePresent=2}if(samples[0].flags!==undefined){flagsPresent=4}if(samples[0].compositionTimeOffset!==undefined){compositionTimeOffset=8}}return[0,0,durationPresent|sizePresent|flagsPresent|compositionTimeOffset,1,(samples.length&4278190080)>>>24,(samples.length&16711680)>>>16,(samples.length&65280)>>>8,samples.length&255,(offset&4278190080)>>>24,(offset&16711680)>>>16,(offset&65280)>>>8,offset&255]};videoTrun=function videoTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+16*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&4278190080)>>>24,(sample.duration&16711680)>>>16,(sample.duration&65280)>>>8,sample.duration&255,(sample.size&4278190080)>>>24,(sample.size&16711680)>>>16,(sample.size&65280)>>>8,sample.size&255,sample.flags.isLeading<<2|sample.flags.dependsOn,sample.flags.isDependedOn<<6|sample.flags.hasRedundancy<<4|sample.flags.paddingValue<<1|sample.flags.isNonSyncSample,sample.flags.degradationPriority&240<<8,sample.flags.degradationPriority&15,(sample.compositionTimeOffset&4278190080)>>>24,(sample.compositionTimeOffset&16711680)>>>16,(sample.compositionTimeOffset&65280)>>>8,sample.compositionTimeOffset&255])}return box(types.trun,new Uint8Array(bytes))};audioTrun=function audioTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+8*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&4278190080)>>>24,(sample.duration&16711680)>>>16,(sample.duration&65280)>>>8,sample.duration&255,(sample.size&4278190080)>>>24,(sample.size&16711680)>>>16,(sample.size&65280)>>>8,sample.size&255])}return box(types.trun,new Uint8Array(bytes))};trun=function trun(track,offset){if(track.type==="audio"){return audioTrun(track,offset)}return videoTrun(track,offset)}})();module.exports={ftyp:ftyp,mdat:mdat,moof:moof,moov:moov,initSegment:function initSegment(tracks){var fileType=ftyp(),movie=moov(tracks),result;result=new Uint8Array(fileType.byteLength+movie.byteLength);result.set(fileType);result.set(movie,fileType.byteLength);return result}}},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358);var mp4=__webpack_require__(381);var m2ts=__webpack_require__(359);var AdtsStream=__webpack_require__(364);var H264Stream=__webpack_require__(365).H264Stream;var AacStream=__webpack_require__(383);var coneOfSilence=__webpack_require__(384);var clock=__webpack_require__(385);var AUDIO_PROPERTIES=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var VIDEO_PROPERTIES=["width","height","profileIdc","levelIdc","profileCompatibility"];var ONE_SECOND_IN_TS=9e4;var _VideoSegmentStream3,_AudioSegmentStream3,_Transmuxer3,_CoalesceStream2;var createDefaultSample,isLikelyAacData,collectDtsInfo,clearDtsInfo,calculateTrackBaseMediaDecodeTime,arrayEquals,sumFrameByteLengths;createDefaultSample=function createDefaultSample(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};isLikelyAacData=function isLikelyAacData(data){if(data[0]==="I".charCodeAt(0)&&data[1]==="D".charCodeAt(0)&&data[2]==="3".charCodeAt(0)){return true}return false};arrayEquals=function arrayEquals(a,b){var i;if(a.length!==b.length){return false}for(i=0;i<a.length;i++){if(a[i]!==b[i]){return false}}return true};sumFrameByteLengths=function sumFrameByteLengths(array){var i,currentObj,sum=0;for(i=0;i<array.length;i++){currentObj=array[i];sum+=currentObj.data.byteLength}return sum};_AudioSegmentStream3=function AudioSegmentStream(track){var adtsFrames=[],sequenceNumber=0,earliestAllowedDts=0,audioAppendStartTs=0,videoBaseMediaDecodeTime=Infinity;_AudioSegmentStream3.prototype.init.call(this);this.push=function(data){collectDtsInfo(track,data);if(track){AUDIO_PROPERTIES.forEach(function(prop){track[prop]=data[prop]})}adtsFrames.push(data)};this.setEarliestDts=function(earliestDts){earliestAllowedDts=earliestDts-track.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(baseMediaDecodeTime){videoBaseMediaDecodeTime=baseMediaDecodeTime};this.setAudioAppendStart=function(timestamp){audioAppendStartTs=timestamp};this.flush=function(){var frames,moof,mdat,boxes;if(adtsFrames.length===0){this.trigger("done","AudioSegmentStream");return}frames=this.trimAdtsFramesByEarliestDts_(adtsFrames);track.baseMediaDecodeTime=calculateTrackBaseMediaDecodeTime(track);this.prefixWithSilence_(track,frames);track.samples=this.generateSampleTable_(frames);mdat=mp4.mdat(this.concatenateFrameData_(frames));adtsFrames=[];moof=mp4.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);clearDtsInfo(track);this.trigger("data",{track:track,boxes:boxes});this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(track,frames){var baseMediaDecodeTimeTs,frameDuration=0,audioGapDuration=0,audioFillFrameCount=0,audioFillDuration=0,silentFrame,i;if(!frames.length){return}baseMediaDecodeTimeTs=clock.audioTsToVideoTs(track.baseMediaDecodeTime,track.samplerate);frameDuration=Math.ceil(ONE_SECOND_IN_TS/(track.samplerate/1024));if(audioAppendStartTs&&videoBaseMediaDecodeTime){audioGapDuration=baseMediaDecodeTimeTs-Math.max(audioAppendStartTs,videoBaseMediaDecodeTime);audioFillFrameCount=Math.floor(audioGapDuration/frameDuration);audioFillDuration=audioFillFrameCount*frameDuration}if(audioFillFrameCount<1||audioFillDuration>ONE_SECOND_IN_TS/2){return}silentFrame=coneOfSilence[track.samplerate];if(!silentFrame){silentFrame=frames[0].data}for(i=0;i<audioFillFrameCount;i++){frames.splice(i,0,{data:silentFrame})}track.baseMediaDecodeTime-=Math.floor(clock.videoTsToAudioTs(audioFillDuration,track.samplerate))};this.trimAdtsFramesByEarliestDts_=function(adtsFrames){if(track.minSegmentDts>=earliestAllowedDts){return adtsFrames}track.minSegmentDts=Infinity;return adtsFrames.filter(function(currentFrame){if(currentFrame.dts>=earliestAllowedDts){track.minSegmentDts=Math.min(track.minSegmentDts,currentFrame.dts);track.minSegmentPts=track.minSegmentDts;return true}return false})};this.generateSampleTable_=function(frames){var i,currentFrame,samples=[];for(i=0;i<frames.length;i++){currentFrame=frames[i];samples.push({size:currentFrame.data.byteLength,duration:1024})}return samples};this.concatenateFrameData_=function(frames){var i,currentFrame,dataOffset=0,data=new Uint8Array(sumFrameByteLengths(frames));for(i=0;i<frames.length;i++){currentFrame=frames[i];data.set(currentFrame.data,dataOffset);dataOffset+=currentFrame.data.byteLength}return data}};_AudioSegmentStream3.prototype=new Stream;_VideoSegmentStream3=function VideoSegmentStream(track,options){var sequenceNumber=0,nalUnits=[],gopsToAlignWith=[],config,pps;options=options||{};_VideoSegmentStream3.prototype.init.call(this);delete track.minPTS;this.gopCache_=[];this.push=function(nalUnit){collectDtsInfo(track,nalUnit);if(nalUnit.nalUnitType==="seq_parameter_set_rbsp"&&!config){config=nalUnit.config;track.sps=[nalUnit.data];VIDEO_PROPERTIES.forEach(function(prop){track[prop]=config[prop]},this)}if(nalUnit.nalUnitType==="pic_parameter_set_rbsp"&&!pps){pps=nalUnit.data;track.pps=[nalUnit.data]}nalUnits.push(nalUnit);
};this.flush=function(){var frames,gopForFusion,gops,moof,mdat,boxes;while(nalUnits.length){if(nalUnits[0].nalUnitType==="access_unit_delimiter_rbsp"){break}nalUnits.shift()}if(nalUnits.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}frames=this.groupNalsIntoFrames_(nalUnits);gops=this.groupFramesIntoGops_(frames);if(!gops[0][0].keyFrame){gopForFusion=this.getGopForFusion_(nalUnits[0],track);if(gopForFusion){gops.unshift(gopForFusion);gops.byteLength+=gopForFusion.byteLength;gops.nalCount+=gopForFusion.nalCount;gops.pts=gopForFusion.pts;gops.dts=gopForFusion.dts;gops.duration+=gopForFusion.duration}else{gops=this.extendFirstKeyFrame_(gops)}}if(gopsToAlignWith.length){var alignedGops;if(options.alignGopsAtEnd){alignedGops=this.alignGopsAtEnd_(gops)}else{alignedGops=this.alignGopsAtStart_(gops)}if(!alignedGops){this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}clearDtsInfo(track);gops=alignedGops}collectDtsInfo(track,gops);track.samples=this.generateSampleTable_(gops);mdat=mp4.mdat(this.concatenateNalData_(gops));track.baseMediaDecodeTime=calculateTrackBaseMediaDecodeTime(track);this.trigger("processedGopsInfo",gops.map(function(gop){return{pts:gop.pts,dts:gop.dts,byteLength:gop.byteLength}}));this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.trigger("baseMediaDecodeTime",track.baseMediaDecodeTime);this.trigger("timelineStartInfo",track.timelineStartInfo);moof=mp4.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);this.trigger("data",{track:track,boxes:boxes});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){clearDtsInfo(track);config=undefined;pps=undefined};this.getGopForFusion_=function(nalUnit){var halfSecond=45e3,allowableOverlap=1e4,nearestDistance=Infinity,dtsDistance,nearestGopObj,currentGop,currentGopObj,i;for(i=0;i<this.gopCache_.length;i++){currentGopObj=this.gopCache_[i];currentGop=currentGopObj.gop;if(!(track.pps&&arrayEquals(track.pps[0],currentGopObj.pps[0]))||!(track.sps&&arrayEquals(track.sps[0],currentGopObj.sps[0]))){continue}if(currentGop.dts<track.timelineStartInfo.dts){continue}dtsDistance=nalUnit.dts-currentGop.dts-currentGop.duration;if(dtsDistance>=-allowableOverlap&&dtsDistance<=halfSecond){if(!nearestGopObj||nearestDistance>dtsDistance){nearestGopObj=currentGopObj;nearestDistance=dtsDistance}}}if(nearestGopObj){return nearestGopObj.gop}return null};this.extendFirstKeyFrame_=function(gops){var currentGop;if(!gops[0][0].keyFrame&&gops.length>1){currentGop=gops.shift();gops.byteLength-=currentGop.byteLength;gops.nalCount-=currentGop.nalCount;gops[0][0].dts=currentGop.dts;gops[0][0].pts=currentGop.pts;gops[0][0].duration+=currentGop.duration}return gops};this.groupNalsIntoFrames_=function(nalUnits){var i,currentNal,currentFrame=[],frames=[];currentFrame.byteLength=0;for(i=0;i<nalUnits.length;i++){currentNal=nalUnits[i];if(currentNal.nalUnitType==="access_unit_delimiter_rbsp"){if(currentFrame.length){currentFrame.duration=currentNal.dts-currentFrame.dts;frames.push(currentFrame)}currentFrame=[currentNal];currentFrame.byteLength=currentNal.data.byteLength;currentFrame.pts=currentNal.pts;currentFrame.dts=currentNal.dts}else{if(currentNal.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){currentFrame.keyFrame=true}currentFrame.duration=currentNal.dts-currentFrame.dts;currentFrame.byteLength+=currentNal.data.byteLength;currentFrame.push(currentNal)}}if(frames.length&&(!currentFrame.duration||currentFrame.duration<=0)){currentFrame.duration=frames[frames.length-1].duration}frames.push(currentFrame);return frames};this.groupFramesIntoGops_=function(frames){var i,currentFrame,currentGop=[],gops=[];currentGop.byteLength=0;currentGop.nalCount=0;currentGop.duration=0;currentGop.pts=frames[0].pts;currentGop.dts=frames[0].dts;gops.byteLength=0;gops.nalCount=0;gops.duration=0;gops.pts=frames[0].pts;gops.dts=frames[0].dts;for(i=0;i<frames.length;i++){currentFrame=frames[i];if(currentFrame.keyFrame){if(currentGop.length){gops.push(currentGop);gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration}currentGop=[currentFrame];currentGop.nalCount=currentFrame.length;currentGop.byteLength=currentFrame.byteLength;currentGop.pts=currentFrame.pts;currentGop.dts=currentFrame.dts;currentGop.duration=currentFrame.duration}else{currentGop.duration+=currentFrame.duration;currentGop.nalCount+=currentFrame.length;currentGop.byteLength+=currentFrame.byteLength;currentGop.push(currentFrame)}}if(gops.length&&currentGop.duration<=0){currentGop.duration=gops[gops.length-1].duration}gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;gops.push(currentGop);return gops};this.generateSampleTable_=function(gops,baseDataOffset){var h,i,sample,currentGop,currentFrame,dataOffset=baseDataOffset||0,samples=[];for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];sample=createDefaultSample();sample.dataOffset=dataOffset;sample.compositionTimeOffset=currentFrame.pts-currentFrame.dts;sample.duration=currentFrame.duration;sample.size=4*currentFrame.length;sample.size+=currentFrame.byteLength;if(currentFrame.keyFrame){sample.flags.dependsOn=2}dataOffset+=sample.size;samples.push(sample)}}return samples};this.concatenateNalData_=function(gops){var h,i,j,currentGop,currentFrame,currentNal,dataOffset=0,nalsByteLength=gops.byteLength,numberOfNals=gops.nalCount,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];for(j=0;j<currentFrame.length;j++){currentNal=currentFrame[j];view.setUint32(dataOffset,currentNal.data.byteLength);dataOffset+=4;data.set(currentNal.data,dataOffset);dataOffset+=currentNal.data.byteLength}}}return data};this.alignGopsAtStart_=function(gops){var alignIndex,gopIndex,align,gop,byteLength,nalCount,duration,alignedGops;byteLength=gops.byteLength;nalCount=gops.nalCount;duration=gops.duration;alignIndex=gopIndex=0;while(alignIndex<gopsToAlignWith.length&&gopIndex<gops.length){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){break}if(gop.pts>align.pts){alignIndex++;continue}gopIndex++;byteLength-=gop.byteLength;nalCount-=gop.nalCount;duration-=gop.duration}if(gopIndex===0){return gops}if(gopIndex===gops.length){return null}alignedGops=gops.slice(gopIndex);alignedGops.byteLength=byteLength;alignedGops.duration=duration;alignedGops.nalCount=nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops};this.alignGopsAtEnd_=function(gops){var alignIndex,gopIndex,align,gop,alignEndIndex,matchFound;alignIndex=gopsToAlignWith.length-1;gopIndex=gops.length-1;alignEndIndex=null;matchFound=false;while(alignIndex>=0&&gopIndex>=0){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){matchFound=true;break}if(align.pts>gop.pts){alignIndex--;continue}if(alignIndex===gopsToAlignWith.length-1){alignEndIndex=gopIndex}gopIndex--}if(!matchFound&&alignEndIndex===null){return null}var trimIndex;if(matchFound){trimIndex=gopIndex}else{trimIndex=alignEndIndex}if(trimIndex===0){return gops}var alignedGops=gops.slice(trimIndex);var metadata=alignedGops.reduce(function(total,gop){total.byteLength+=gop.byteLength;total.duration+=gop.duration;total.nalCount+=gop.nalCount;return total},{byteLength:0,duration:0,nalCount:0});alignedGops.byteLength=metadata.byteLength;alignedGops.duration=metadata.duration;alignedGops.nalCount=metadata.nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops};this.alignGopsWith=function(newGopsToAlignWith){gopsToAlignWith=newGopsToAlignWith}};_VideoSegmentStream3.prototype=new Stream;collectDtsInfo=function collectDtsInfo(track,data){if(typeof data.pts==="number"){if(track.timelineStartInfo.pts===undefined){track.timelineStartInfo.pts=data.pts}if(track.minSegmentPts===undefined){track.minSegmentPts=data.pts}else{track.minSegmentPts=Math.min(track.minSegmentPts,data.pts)}if(track.maxSegmentPts===undefined){track.maxSegmentPts=data.pts}else{track.maxSegmentPts=Math.max(track.maxSegmentPts,data.pts)}}if(typeof data.dts==="number"){if(track.timelineStartInfo.dts===undefined){track.timelineStartInfo.dts=data.dts}if(track.minSegmentDts===undefined){track.minSegmentDts=data.dts}else{track.minSegmentDts=Math.min(track.minSegmentDts,data.dts)}if(track.maxSegmentDts===undefined){track.maxSegmentDts=data.dts}else{track.maxSegmentDts=Math.max(track.maxSegmentDts,data.dts)}}};clearDtsInfo=function clearDtsInfo(track){delete track.minSegmentDts;delete track.maxSegmentDts;delete track.minSegmentPts;delete track.maxSegmentPts};calculateTrackBaseMediaDecodeTime=function calculateTrackBaseMediaDecodeTime(track){var baseMediaDecodeTime,scale,timeSinceStartOfTimeline=track.minSegmentDts-track.timelineStartInfo.dts;baseMediaDecodeTime=track.timelineStartInfo.baseMediaDecodeTime;baseMediaDecodeTime+=timeSinceStartOfTimeline;baseMediaDecodeTime=Math.max(0,baseMediaDecodeTime);if(track.type==="audio"){scale=track.samplerate/ONE_SECOND_IN_TS;baseMediaDecodeTime*=scale;baseMediaDecodeTime=Math.floor(baseMediaDecodeTime)}return baseMediaDecodeTime};_CoalesceStream2=function CoalesceStream(options,metadataStream){this.numberOfTracks=0;this.metadataStream=metadataStream;if(typeof options.remux!=="undefined"){this.remuxTracks=!!options.remux}else{this.remuxTracks=true}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;_CoalesceStream2.prototype.init.call(this);this.push=function(output){if(output.text){return this.pendingCaptions.push(output)}if(output.frames){return this.pendingMetadata.push(output)}this.pendingTracks.push(output.track);this.pendingBoxes.push(output.boxes);this.pendingBytes+=output.boxes.byteLength;if(output.track.type==="video"){this.videoTrack=output.track}if(output.track.type==="audio"){this.audioTrack=output.track}}};_CoalesceStream2.prototype=new Stream;_CoalesceStream2.prototype.flush=function(flushSource){var offset=0,event={captions:[],captionStreams:{},metadata:[],info:{}},caption,id3,initSegment,timelineStartPts=0,i;if(this.pendingTracks.length<this.numberOfTracks){if(flushSource!=="VideoSegmentStream"&&flushSource!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts;VIDEO_PROPERTIES.forEach(function(prop){event.info[prop]=this.videoTrack[prop]},this)}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts;AUDIO_PROPERTIES.forEach(function(prop){event.info[prop]=this.audioTrack[prop]},this)}if(this.pendingTracks.length===1){event.type=this.pendingTracks[0].type}else{event.type="combined"}this.emittedTracks+=this.pendingTracks.length;initSegment=mp4.initSegment(this.pendingTracks);event.initSegment=new Uint8Array(initSegment.byteLength);event.initSegment.set(initSegment);event.data=new Uint8Array(this.pendingBytes);for(i=0;i<this.pendingBoxes.length;i++){event.data.set(this.pendingBoxes[i],offset);offset+=this.pendingBoxes[i].byteLength}for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=caption.startPts-timelineStartPts;caption.startTime/=9e4;caption.endTime=caption.endPts-timelineStartPts;caption.endTime/=9e4;event.captionStreams[caption.stream]=true;event.captions.push(caption)}for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=id3.pts-timelineStartPts;id3.cueTime/=9e4;event.metadata.push(id3)}event.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",event);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};_Transmuxer3=function Transmuxer(options){var self=this,hasFlushed=true,videoTrack,audioTrack;_Transmuxer3.prototype.init.call(this);options=options||{};this.baseMediaDecodeTime=options.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="aac";pipeline.metadataStream=new m2ts.MetadataStream;pipeline.aacStream=new AacStream;pipeline.audioTimestampRolloverStream=new m2ts.TimestampRolloverStream("audio");pipeline.timedMetadataTimestampRolloverStream=new m2ts.TimestampRolloverStream("timed-metadata");pipeline.adtsStream=new AdtsStream;pipeline.coalesceStream=new _CoalesceStream2(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.aacStream;pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.metadataStream.on("timestamp",function(frame){pipeline.aacStream.setTimestamp(frame.timeStamp)});pipeline.aacStream.on("data",function(data){if(data.type==="timed-metadata"&&!pipeline.audioSegmentStream){audioTrack=audioTrack||{timelineStartInfo:{baseMediaDecodeTime:self.baseMediaDecodeTime},codec:"adts",type:"audio"};pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream3(audioTrack);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream)}});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="ts";pipeline.metadataStream=new m2ts.MetadataStream;pipeline.packetStream=new m2ts.TransportPacketStream;pipeline.parseStream=new m2ts.TransportParseStream;pipeline.elementaryStream=new m2ts.ElementaryStream;pipeline.videoTimestampRolloverStream=new m2ts.TimestampRolloverStream("video");pipeline.audioTimestampRolloverStream=new m2ts.TimestampRolloverStream("audio");pipeline.timedMetadataTimestampRolloverStream=new m2ts.TimestampRolloverStream("timed-metadata");pipeline.adtsStream=new AdtsStream;pipeline.h264Stream=new H264Stream;pipeline.captionStream=new m2ts.CaptionStream;pipeline.coalesceStream=new _CoalesceStream2(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.packetStream;pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream);pipeline.elementaryStream.pipe(pipeline.videoTimestampRolloverStream).pipe(pipeline.h264Stream);pipeline.elementaryStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.elementaryStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);pipeline.elementaryStream.on("data",function(data){var i;if(data.type==="metadata"){i=data.tracks.length;while(i--){if(!videoTrack&&data.tracks[i].type==="video"){videoTrack=data.tracks[i];videoTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime}else if(!audioTrack&&data.tracks[i].type==="audio"){audioTrack=data.tracks[i];audioTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime}}if(videoTrack&&!pipeline.videoSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.videoSegmentStream=new _VideoSegmentStream3(videoTrack,options);pipeline.videoSegmentStream.on("timelineStartInfo",function(timelineStartInfo){if(audioTrack){audioTrack.timelineStartInfo=timelineStartInfo;pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts)}});pipeline.videoSegmentStream.on("processedGopsInfo",self.trigger.bind(self,"gopInfo"));pipeline.videoSegmentStream.on("baseMediaDecodeTime",function(baseMediaDecodeTime){if(audioTrack){pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime)}});pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream)}if(audioTrack&&!pipeline.audioSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream3(audioTrack);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream)}}});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(baseMediaDecodeTime){var pipeline=this.transmuxPipeline_;this.baseMediaDecodeTime=baseMediaDecodeTime;if(audioTrack){audioTrack.timelineStartInfo.dts=undefined;audioTrack.timelineStartInfo.pts=undefined;clearDtsInfo(audioTrack);audioTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime;if(pipeline.audioTimestampRolloverStream){pipeline.audioTimestampRolloverStream.discontinuity()}}if(videoTrack){if(pipeline.videoSegmentStream){pipeline.videoSegmentStream.gopCache_=[];pipeline.videoTimestampRolloverStream.discontinuity()}videoTrack.timelineStartInfo.dts=undefined;videoTrack.timelineStartInfo.pts=undefined;clearDtsInfo(videoTrack);pipeline.captionStream.reset();videoTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime}if(pipeline.timedMetadataTimestampRolloverStream){pipeline.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(timestamp){if(audioTrack){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp)}};this.alignGopsWith=function(gopsToAlignWith){if(videoTrack&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith)}};this.push=function(data){if(hasFlushed){var isAac=isLikelyAacData(data);if(isAac&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!isAac&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}hasFlushed=false}this.transmuxPipeline_.headOfPipeline.push(data)};this.flush=function(){hasFlushed=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};_Transmuxer3.prototype=new Stream;module.exports={Transmuxer:_Transmuxer3,VideoSegmentStream:_VideoSegmentStream3,AudioSegmentStream:_AudioSegmentStream3,AUDIO_PROPERTIES:AUDIO_PROPERTIES,VIDEO_PROPERTIES:VIDEO_PROPERTIES}},function(module,exports,__webpack_require__){var Stream=__webpack_require__(358);var _AacStream2;_AacStream2=function AacStream(){var everything=new Uint8Array,timeStamp=0;_AacStream2.prototype.init.call(this);this.setTimestamp=function(timestamp){timeStamp=timestamp};this.parseId3TagSize=function(header,byteIndex){var returnSize=header[byteIndex+6]<<21|header[byteIndex+7]<<14|header[byteIndex+8]<<7|header[byteIndex+9],flags=header[byteIndex+5],footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20}return returnSize+10};this.parseAdtsSize=function(header,byteIndex){var lowThree=(header[byteIndex+5]&224)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&3<<11;return highTwo|middle|lowThree};this.push=function(bytes){var frameSize=0,byteIndex=0,bytesLeft,chunk,packet,tempLength;if(everything.length){tempLength=everything.length;everything=new Uint8Array(bytes.byteLength+tempLength);everything.set(everything.subarray(0,tempLength));everything.set(bytes,tempLength)}else{everything=bytes}while(everything.length-byteIndex>=3){if(everything[byteIndex]==="I".charCodeAt(0)&&everything[byteIndex+1]==="D".charCodeAt(0)&&everything[byteIndex+2]==="3".charCodeAt(0)){if(everything.length-byteIndex<10){break}frameSize=this.parseId3TagSize(everything,byteIndex);if(frameSize>everything.length){break}chunk={type:"timed-metadata",data:everything.subarray(byteIndex,byteIndex+frameSize)};this.trigger("data",chunk);byteIndex+=frameSize;continue}else if(everything[byteIndex]&255===255&&(everything[byteIndex+1]&240)===240){if(everything.length-byteIndex<7){break}frameSize=this.parseAdtsSize(everything,byteIndex);if(frameSize>everything.length){break}packet={type:"audio",data:everything.subarray(byteIndex,byteIndex+frameSize),pts:timeStamp,dts:timeStamp};this.trigger("data",packet);byteIndex+=frameSize;continue}byteIndex++}bytesLeft=everything.length-byteIndex;if(bytesLeft>0){everything=everything.subarray(byteIndex)}else{everything=new Uint8Array}}};_AacStream2.prototype=new Stream;module.exports=_AacStream2},function(module,exports){var highPrefix=[33,16,5,32,164,27];var lowPrefix=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var zeroFill=function zeroFill(count){var a=[];while(count--){a.push(0)}return a};var makeTable=function makeTable(metaTable){return Object.keys(metaTable).reduce(function(obj,key){obj[key]=new Uint8Array(metaTable[key].reduce(function(arr,part){return arr.concat(part)},[]));return obj},{})};var coneOfSilence={96e3:[highPrefix,[227,64],zeroFill(154),[56]],88200:[highPrefix,[231],zeroFill(170),[56]],64e3:[highPrefix,[248,192],zeroFill(240),[56]],48e3:[highPrefix,[255,192],zeroFill(268),[55,148,128],zeroFill(54),[112]],44100:[highPrefix,[255,192],zeroFill(268),[55,163,128],zeroFill(84),[112]],32e3:[highPrefix,[255,192],zeroFill(268),[55,234],zeroFill(226),[112]],24e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,112],zeroFill(126),[224]],16e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,255],zeroFill(269),[223,108],zeroFill(195),[1,192]],12e3:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,253,128],zeroFill(259),[56]],11025:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,255,192],zeroFill(268),[55,175,128],zeroFill(108),[112]],8e3:[lowPrefix,zeroFill(268),[3,121,16],zeroFill(47),[7]]};module.exports=makeTable(coneOfSilence)},function(module,exports){var ONE_SECOND_IN_TS=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs;secondsToVideoTs=function secondsToVideoTs(seconds){return seconds*ONE_SECOND_IN_TS};secondsToAudioTs=function secondsToAudioTs(seconds,sampleRate){return seconds*sampleRate};videoTsToSeconds=function videoTsToSeconds(timestamp){return timestamp/ONE_SECOND_IN_TS};audioTsToSeconds=function audioTsToSeconds(timestamp,sampleRate){return timestamp/sampleRate};audioTsToVideoTs=function audioTsToVideoTs(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate))};videoTsToAudioTs=function videoTsToAudioTs(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate)};module.exports={secondsToVideoTs:secondsToVideoTs,secondsToAudioTs:secondsToAudioTs,videoTsToSeconds:videoTsToSeconds,audioTsToSeconds:audioTsToSeconds,audioTsToVideoTs:audioTsToVideoTs,videoTsToAudioTs:videoTsToAudioTs}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _playlistLoader=__webpack_require__(333);var _playlistLoader2=_interopRequireDefault(_playlistLoader);var _playlistJs=__webpack_require__(341);var _segmentLoader=__webpack_require__(387);var _segmentLoader2=_interopRequireDefault(_segmentLoader);var _vttSegmentLoader=__webpack_require__(394);var _vttSegmentLoader2=_interopRequireDefault(_vttSegmentLoader);var _ranges=__webpack_require__(391);var _ranges2=_interopRequireDefault(_ranges);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _adCueTags=__webpack_require__(395);var _adCueTags2=_interopRequireDefault(_adCueTags);var _syncController=__webpack_require__(396);var _syncController2=_interopRequireDefault(_syncController);var _videojsContribMediaSourcesEs5CodecUtils=__webpack_require__(376);var _webwackify=__webpack_require__(374);var _webwackify2=_interopRequireDefault(_webwackify);var _decrypterWorker=__webpack_require__(401);var _decrypterWorker2=_interopRequireDefault(_decrypterWorker);var _config=__webpack_require__(389);var _config2=_interopRequireDefault(_config);var _utilCodecsJs=__webpack_require__(393);var _mediaGroups=__webpack_require__(402);var ABORT_EARLY_BLACKLIST_SECONDS=60*2;var Hls=undefined;var defaultCodecs={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var sumLoaderStat=function sumLoaderStat(stat){return this.audioSegmentLoader_[stat]+this.mainSegmentLoader_[stat]};var resolveDecrypterWorker=function resolveDecrypterWorker(){var result=undefined;try{result=401}catch(e){}return result};var mapLegacyAvcCodecs_=function mapLegacyAvcCodecs_(codecString){return codecString.replace(/avc1\.(\d+)\.(\d+)/i,function(match){return(0,_videojsContribMediaSourcesEs5CodecUtils.translateLegacyCodecs)([match])[0]})};exports.mapLegacyAvcCodecs_=mapLegacyAvcCodecs_;var makeMimeTypeString=function makeMimeTypeString(type,container,codecs){return type+"/"+container+'; codecs="'+codecs.filter(function(c){return!!c}).join(", ")+'"'};var getContainerType=function getContainerType(media){if(media.segments&&media.segments.length&&media.segments[0].map){return"mp4"}return"mp2t"};var getCodecs=function getCodecs(media){var mediaAttributes=media.attributes||{};if(mediaAttributes.CODECS){return(0,_utilCodecsJs.parseCodecs)(mediaAttributes.CODECS)}return defaultCodecs};var mimeTypesForPlaylist_=function mimeTypesForPlaylist_(master,media){var containerType=getContainerType(media);var codecInfo=getCodecs(media);var mediaAttributes=media.attributes||{};var isMuxed=true;var isMaat=false;if(!media){return[]}if(master.mediaGroups.AUDIO&&mediaAttributes.AUDIO){var audioGroup=master.mediaGroups.AUDIO[mediaAttributes.AUDIO];if(audioGroup){isMaat=true;isMuxed=false;for(var groupId in audioGroup){if(!audioGroup[groupId].uri){isMuxed=true;break}}}}if(isMaat&&!codecInfo.audioProfile){_videoJs2["default"].log.warn("Multiple audio tracks present but no audio codec string is specified. "+"Attempting to use the default audio codec (mp4a.40.2)");codecInfo.audioProfile=defaultCodecs.audioProfile}var codecStrings={};if(codecInfo.videoCodec){codecStrings.video=""+codecInfo.videoCodec+codecInfo.videoObjectTypeIndicator}if(codecInfo.audioProfile){codecStrings.audio="mp4a.40."+codecInfo.audioProfile}var justAudio=makeMimeTypeString("audio",containerType,[codecStrings.audio]);var justVideo=makeMimeTypeString("video",containerType,[codecStrings.video]);var bothVideoAudio=makeMimeTypeString("video",containerType,[codecStrings.video,codecStrings.audio]);if(isMaat){if(!isMuxed&&codecStrings.video){return[justVideo,justAudio]}return[bothVideoAudio,justAudio]}if(!codecStrings.video){return[justAudio]}return[bothVideoAudio]};exports.mimeTypesForPlaylist_=mimeTypesForPlaylist_;var MasterPlaylistController=function(_videojs$EventTarget){_inherits(MasterPlaylistController,_videojs$EventTarget);function MasterPlaylistController(options){var _this=this;_classCallCheck(this,MasterPlaylistController);_get(Object.getPrototypeOf(MasterPlaylistController.prototype),"constructor",this).call(this);var url=options.url;var withCredentials=options.withCredentials;var mode=options.mode;var tech=options.tech;var bandwidth=options.bandwidth;var externHls=options.externHls;var useCueTags=options.useCueTags;var blacklistDuration=options.blacklistDuration;var enableLowInitialPlaylist=options.enableLowInitialPlaylist;if(!url){throw new Error("A non-empty playlist URL is required")}Hls=externHls;this.withCredentials=withCredentials;this.tech_=tech;this.hls_=tech.hls;this.mode_=mode;this.useCueTags_=useCueTags;this.blacklistDuration=blacklistDuration;this.enableLowInitialPlaylist=enableLowInitialPlaylist;if(this.useCueTags_){this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues");this.cueTagsTrack_.inBandMetadataTrackDispatchType=""}this.requestOptions_={withCredentials:this.withCredentials,timeout:null};this.mediaTypes_=(0,_mediaGroups.createMediaTypes)();this.mediaSource=new _videoJs2["default"].MediaSource({mode:mode});this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));this.seekable_=_videoJs2["default"].createTimeRanges();this.hasPlayed_=function(){return false};this.syncController_=new _syncController2["default"](options);this.segmentMetadataTrack_=tech.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;this.decrypter_=(0,_webwackify2["default"])(_decrypterWorker2["default"],resolveDecrypterWorker());var segmentLoaderSettings={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function seekable(){return _this.seekable()},seeking:function seeking(){return _this.tech_.seeking()},duration:function duration(){return _this.mediaSource.duration},hasPlayed:function hasPlayed(){return _this.hasPlayed_()},goalBufferLength:function goalBufferLength(){return _this.goalBufferLength()},bandwidth:bandwidth,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new _playlistLoader2["default"](url,this.hls_,this.withCredentials);this.setupMasterPlaylistLoaderListeners_();this.mainSegmentLoader_=new _segmentLoader2["default"](_videoJs2["default"].mergeOptions(segmentLoaderSettings,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),options);this.audioSegmentLoader_=new _segmentLoader2["default"](_videoJs2["default"].mergeOptions(segmentLoaderSettings,{loaderType:"audio"}),options);this.subtitleSegmentLoader_=new _vttSegmentLoader2["default"](_videoJs2["default"].mergeOptions(segmentLoaderSettings,{loaderType:"vtt"}),options);this.setupSegmentLoaderListeners_();loaderStats.forEach(function(stat){
_this[stat+"_"]=sumLoaderStat.bind(_this,stat)});this.masterPlaylistLoader_.load()}_createClass(MasterPlaylistController,[{key:"setupMasterPlaylistLoaderListeners_",value:function setupMasterPlaylistLoaderListeners_(){var _this2=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=_this2.masterPlaylistLoader_.targetDuration*1.5*1e3;if((0,_playlistJs.isLowestEnabledRendition)(_this2.masterPlaylistLoader_.master,_this2.masterPlaylistLoader_.media())){_this2.requestOptions_.timeout=0}else{_this2.requestOptions_.timeout=requestTimeout}if(media.endList&&_this2.tech_.preload()!=="none"){_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load()}(0,_mediaGroups.setupMediaGroups)({segmentLoaders:{AUDIO:_this2.audioSegmentLoader_,SUBTITLES:_this2.subtitleSegmentLoader_,main:_this2.mainSegmentLoader_},tech:_this2.tech_,requestOptions:_this2.requestOptions_,masterPlaylistLoader:_this2.masterPlaylistLoader_,mode:_this2.mode_,hls:_this2.hls_,master:_this2.master(),mediaTypes:_this2.mediaTypes_,blacklistCurrentPlaylist:_this2.blacklistCurrentPlaylist.bind(_this2)});_this2.triggerPresenceUsage_(_this2.master(),media);try{_this2.setupSourceBuffers_()}catch(e){_videoJs2["default"].log.warn("Failed to create SourceBuffers",e);return _this2.mediaSource.endOfStream("decode")}_this2.setupFirstPlay();_this2.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",function(){var updatedPlaylist=_this2.masterPlaylistLoader_.media();if(!updatedPlaylist){var selectedMedia=undefined;if(_this2.enableLowInitialPlaylist){selectedMedia=_this2.selectInitialPlaylist()}if(!selectedMedia){selectedMedia=_this2.selectPlaylist()}_this2.initialMedia_=selectedMedia;_this2.masterPlaylistLoader_.media(_this2.initialMedia_);return}if(_this2.useCueTags_){_this2.updateAdCues_(updatedPlaylist)}_this2.mainSegmentLoader_.playlist(updatedPlaylist,_this2.requestOptions_);_this2.updateDuration();if(!_this2.tech_.paused()){_this2.mainSegmentLoader_.load()}if(!updatedPlaylist.endList){(function(){var addSeekableRange=function addSeekableRange(){var seekable=_this2.seekable();if(seekable.length!==0){_this2.mediaSource.addSeekableRange_(seekable.start(0),seekable.end(0))}};if(_this2.duration()!==Infinity){(function(){var onDurationchange=function onDurationchange(){if(_this2.duration()===Infinity){addSeekableRange()}else{_this2.tech_.one("durationchange",onDurationchange)}};_this2.tech_.one("durationchange",onDurationchange)})()}else{addSeekableRange()}})()}});this.masterPlaylistLoader_.on("error",function(){_this2.blacklistCurrentPlaylist(_this2.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){_this2.mainSegmentLoader_.abort();_this2.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=_this2.masterPlaylistLoader_.targetDuration*1.5*1e3;if((0,_playlistJs.isLowestEnabledRendition)(_this2.masterPlaylistLoader_.master,_this2.masterPlaylistLoader_.media())){_this2.requestOptions_.timeout=0}else{_this2.requestOptions_.timeout=requestTimeout}_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load();_this2.tech_.trigger({type:"mediachange",bubbles:true})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var updatedPlaylist=_this2.masterPlaylistLoader_.media();var playlistOutdated=_this2.stuckAtPlaylistEnd_(updatedPlaylist);if(playlistOutdated){_this2.blacklistCurrentPlaylist({message:"Playlist no longer updating."});_this2.tech_.trigger("playliststuck")}});this.masterPlaylistLoader_.on("renditiondisabled",function(){_this2.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){_this2.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function triggerPresenceUsage_(master,media){var mediaGroups=master.mediaGroups||{};var defaultDemuxed=true;var audioGroupKeys=Object.keys(mediaGroups.AUDIO);for(var mediaGroup in mediaGroups.AUDIO){for(var label in mediaGroups.AUDIO[mediaGroup]){var properties=mediaGroups.AUDIO[mediaGroup][label];if(!properties.uri){defaultDemuxed=false}}}if(defaultDemuxed){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(mediaGroups.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(Hls.Playlist.isAes(media)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(Hls.Playlist.isFmp4(media)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(audioGroupKeys.length&&Object.keys(mediaGroups.AUDIO[audioGroupKeys[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}}},{key:"setupSegmentLoaderListeners_",value:function setupSegmentLoaderListeners_(){var _this3=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var nextPlaylist=_this3.selectPlaylist();var currentPlaylist=_this3.masterPlaylistLoader_.media();var buffered=_this3.tech_.buffered();var forwardBuffer=buffered.length?buffered.end(buffered.length-1)-_this3.tech_.currentTime():0;var bufferLowWaterLine=_this3.bufferLowWaterLine();if(!currentPlaylist.endList||_this3.duration()<_config2["default"].MAX_BUFFER_LOW_WATER_LINE||nextPlaylist.attributes.BANDWIDTH<currentPlaylist.attributes.BANDWIDTH||forwardBuffer>=bufferLowWaterLine){_this3.masterPlaylistLoader_.media(nextPlaylist)}_this3.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){_this3.trigger("progress")});this.mainSegmentLoader_.on("error",function(){_this3.blacklistCurrentPlaylist(_this3.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){_this3.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){_this3.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){_this3.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){_this3.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){_this3.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},ABORT_EARLY_BLACKLIST_SECONDS)});this.mainSegmentLoader_.on("reseteverything",function(){_this3.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(event){_this3.tech_.trigger({type:"hls-segment-time-mapping",mapping:event.mapping})});this.audioSegmentLoader_.on("ended",function(){_this3.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function load(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"fastQualityChange_",value:function fastQualityChange_(){var media=this.selectPlaylist();if(media!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(media);this.mainSegmentLoader_.resetLoader()}}},{key:"play",value:function play(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.tech_.setCurrentTime(0)}if(this.hasPlayed_()){this.load()}var seekable=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<seekable.start(0)){return this.tech_.setCurrentTime(seekable.end(seekable.length-1))}}}},{key:"setupFirstPlay",value:function setupFirstPlay(){var _this4=this;var media=this.masterPlaylistLoader_.media();if(!media||this.tech_.paused()||this.hasPlayed_()){return false}if(!media.endList){var _ret3=function(){var seekable=_this4.seekable();if(!seekable.length){return{v:false}}if(_videoJs2["default"].browser.IE_VERSION&&_this4.mode_==="html5"&&_this4.tech_.readyState()===0){_this4.tech_.one("loadedmetadata",function(){_this4.trigger("firstplay");_this4.tech_.setCurrentTime(seekable.end(0));_this4.hasPlayed_=function(){return true}});return{v:false}}_this4.trigger("firstplay");_this4.tech_.setCurrentTime(seekable.end(0))}();if((typeof _ret3==="undefined"?"undefined":_typeof2(_ret3))==="object")return _ret3.v}this.hasPlayed_=function(){return true};this.load();return true}},{key:"handleSourceOpen_",value:function handleSourceOpen_(){try{this.setupSourceBuffers_()}catch(e){_videoJs2["default"].log.warn("Failed to create Source Buffers",e);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var playPromise=this.tech_.play();if(typeof playPromise!=="undefined"&&typeof playPromise.then==="function"){playPromise.then(null,function(e){})}}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function onEndOfStream(){var isEndOfStream=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){isEndOfStream=isEndOfStream&&this.audioSegmentLoader_.ended_}if(isEndOfStream){this.mediaSource.endOfStream()}}},{key:"stuckAtPlaylistEnd_",value:function stuckAtPlaylistEnd_(playlist){var seekable=this.seekable();if(!seekable.length){return false}var expired=this.syncController_.getExpiredTime(playlist,this.mediaSource.duration);if(expired===null){return false}var absolutePlaylistEnd=Hls.Playlist.playlistEnd(playlist,expired);var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(!buffered.length){return absolutePlaylistEnd-currentTime<=_ranges2["default"].SAFE_TIME_DELTA}var bufferedEnd=buffered.end(buffered.length-1);return bufferedEnd-currentTime<=_ranges2["default"].SAFE_TIME_DELTA&&absolutePlaylistEnd-bufferedEnd<=_ranges2["default"].SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function blacklistCurrentPlaylist(error,blacklistDuration){if(error===undefined)error={};var currentPlaylist=undefined;var nextPlaylist=undefined;currentPlaylist=error.playlist||this.masterPlaylistLoader_.media();blacklistDuration=blacklistDuration||error.blacklistDuration||this.blacklistDuration;if(!currentPlaylist){this.error=error;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var isFinalRendition=this.masterPlaylistLoader_.master.playlists.filter(_playlistJs.isEnabled).length===1;if(isFinalRendition){_videoJs2["default"].log.warn("Problem encountered with the current "+"HLS playlist. Trying again since it is the final playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(isFinalRendition)}currentPlaylist.excludeUntil=Date.now()+blacklistDuration*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});nextPlaylist=this.selectPlaylist();_videoJs2["default"].log.warn("Problem encountered with the current HLS playlist."+(error.message?" "+error.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(nextPlaylist)}},{key:"pauseLoading",value:function pauseLoading(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function setCurrentTime(currentTime){var buffered=_ranges2["default"].findRange(this.tech_.buffered(),currentTime);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(buffered&&buffered.length&&this.mode_!=="flash"){return currentTime}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function duration(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return Hls.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function seekable(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function onSyncInfoUpdate_(){var mainSeekable=undefined;var audioSeekable=undefined;if(!this.masterPlaylistLoader_){return}var media=this.masterPlaylistLoader_.media();if(!media){return}var expired=this.syncController_.getExpiredTime(media,this.mediaSource.duration);if(expired===null){return}mainSeekable=Hls.Playlist.seekable(media,expired);if(mainSeekable.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){media=this.mediaTypes_.AUDIO.activePlaylistLoader.media();expired=this.syncController_.getExpiredTime(media,this.mediaSource.duration);if(expired===null){return}audioSeekable=Hls.Playlist.seekable(media,expired);if(audioSeekable.length===0){return}}if(!audioSeekable){this.seekable_=mainSeekable}else if(audioSeekable.start(0)>mainSeekable.end(0)||mainSeekable.start(0)>audioSeekable.end(0)){this.seekable_=mainSeekable}else{this.seekable_=_videoJs2["default"].createTimeRanges([[audioSeekable.start(0)>mainSeekable.start(0)?audioSeekable.start(0):mainSeekable.start(0),audioSeekable.end(0)<mainSeekable.end(0)?audioSeekable.end(0):mainSeekable.end(0)]])}this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function updateDuration(){var _this5=this;var oldDuration=this.mediaSource.duration;var newDuration=Hls.Playlist.duration(this.masterPlaylistLoader_.media());var buffered=this.tech_.buffered();var setDuration=function setDuration(){_this5.mediaSource.duration=newDuration;_this5.tech_.trigger("durationchange");_this5.mediaSource.removeEventListener("sourceopen",setDuration)};if(buffered.length>0){newDuration=Math.max(newDuration,buffered.end(buffered.length-1))}if(oldDuration!==newDuration){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",setDuration)}else{setDuration()}}}},{key:"dispose",value:function dispose(){var _this6=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(type){var groups=_this6.mediaTypes_[type].groups;for(var id in groups){groups[id].forEach(function(group){if(group.playlistLoader){group.playlistLoader.dispose()}})}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function master(){return this.masterPlaylistLoader_.master}},{key:"media",value:function media(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function setupSourceBuffers_(){var media=this.masterPlaylistLoader_.media();var mimeTypes=undefined;if(!media||this.mediaSource.readyState!=="open"){return}mimeTypes=mimeTypesForPlaylist_(this.masterPlaylistLoader_.master,media);if(mimeTypes.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+media.resolvedUri;return this.mediaSource.endOfStream("decode")}this.mainSegmentLoader_.mimeType(mimeTypes[0]);if(mimeTypes[1]){this.audioSegmentLoader_.mimeType(mimeTypes[1])}this.excludeIncompatibleVariants_(media)}},{key:"excludeIncompatibleVariants_",value:function excludeIncompatibleVariants_(media){var master=this.masterPlaylistLoader_.master;var codecCount=2;var videoCodec=null;var codecs=undefined;if(media.attributes.CODECS){codecs=(0,_utilCodecsJs.parseCodecs)(media.attributes.CODECS);videoCodec=codecs.videoCodec;codecCount=codecs.codecCount}master.playlists.forEach(function(variant){var variantCodecs={codecCount:2,videoCodec:null};if(variant.attributes.CODECS){var codecString=variant.attributes.CODECS;variantCodecs=(0,_utilCodecsJs.parseCodecs)(codecString);if(window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+mapLegacyAvcCodecs_(codecString)+'"')){variant.excludeUntil=Infinity}}if(variantCodecs.codecCount!==codecCount){variant.excludeUntil=Infinity}if(variantCodecs.videoCodec!==videoCodec){variant.excludeUntil=Infinity}})}},{key:"updateAdCues_",value:function updateAdCues_(media){var offset=0;var seekable=this.seekable();if(seekable.length){offset=seekable.start(0)}_adCueTags2["default"].updateAdCues(media,this.cueTagsTrack_,offset)}},{key:"goalBufferLength",value:function goalBufferLength(){var currentTime=this.tech_.currentTime();var initial=_config2["default"].GOAL_BUFFER_LENGTH;var rate=_config2["default"].GOAL_BUFFER_LENGTH_RATE;var max=Math.max(initial,_config2["default"].MAX_GOAL_BUFFER_LENGTH);return Math.min(initial+currentTime*rate,max)}},{key:"bufferLowWaterLine",value:function bufferLowWaterLine(){var currentTime=this.tech_.currentTime();var initial=_config2["default"].BUFFER_LOW_WATER_LINE;var rate=_config2["default"].BUFFER_LOW_WATER_LINE_RATE;var max=Math.max(initial,_config2["default"].MAX_BUFFER_LOW_WATER_LINE);return Math.min(initial+currentTime*rate,max)}}]);return MasterPlaylistController}(_videoJs2["default"].EventTarget);exports.MasterPlaylistController=MasterPlaylistController},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x4,_x5,_x6){var _again=true;_function:while(_again){var object=_x4,property=_x5,receiver=_x6;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x4=parent;_x5=property;_x6=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _playlist=__webpack_require__(341);var _playlist2=_interopRequireDefault(_playlist);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _sourceUpdater=__webpack_require__(388);var _sourceUpdater2=_interopRequireDefault(_sourceUpdater);var _config=__webpack_require__(389);var _config2=_interopRequireDefault(_config);var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs=__webpack_require__(370);var _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2=_interopRequireDefault(_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs);var _binUtils=__webpack_require__(351);var _mediaSegmentRequest=__webpack_require__(390);var _ranges=__webpack_require__(391);var _playlistSelectors=__webpack_require__(392);var CHECK_BUFFER_DELAY=500;var detectEndOfStream=function detectEndOfStream(playlist,mediaSource,segmentIndex){if(!playlist||!mediaSource){return false}var segments=playlist.segments;var appendedLastSegment=segmentIndex===segments.length;return playlist.endList&&mediaSource.readyState==="open"&&appendedLastSegment};var finite=function finite(num){return typeof num==="number"&&isFinite(num)};var illegalMediaSwitch=function illegalMediaSwitch(loaderType,startingMedia,newSegmentMedia){if(loaderType!=="main"||!startingMedia||!newSegmentMedia){return null}if(!newSegmentMedia.containsAudio&&!newSegmentMedia.containsVideo){return"Neither audio nor video found in segment."}if(startingMedia.containsVideo&&!newSegmentMedia.containsVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!startingMedia.containsVideo&&newSegmentMedia.containsVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};exports.illegalMediaSwitch=illegalMediaSwitch;var safeBackBufferTrimTime=function safeBackBufferTrimTime(seekable,currentTime,targetDuration){var removeToTime=undefined;if(seekable.length&&seekable.start(0)>0&&seekable.start(0)<currentTime){removeToTime=seekable.start(0)}else{removeToTime=currentTime-30}return Math.min(removeToTime,currentTime-targetDuration)};exports.safeBackBufferTrimTime=safeBackBufferTrimTime;var SegmentLoader=function(_videojs$EventTarget){_inherits(SegmentLoader,_videojs$EventTarget);function SegmentLoader(settings){var _this=this;var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,SegmentLoader);_get(Object.getPrototypeOf(SegmentLoader.prototype),"constructor",this).call(this);if(!settings){throw new TypeError("Initialization settings are required")}if(typeof settings.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!settings.mediaSource){throw new TypeError("No MediaSource specified")}this.state="INIT";this.bandwidth=settings.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.mediaIndex=null;this.hasPlayed_=settings.hasPlayed;this.currentTime_=settings.currentTime;this.seekable_=settings.seekable;this.seeking_=settings.seeking;this.duration_=settings.duration;this.mediaSource_=settings.mediaSource;this.hls_=settings.hls;this.loaderType_=settings.loaderType;this.startingMedia_=void 0;this.segmentMetadataTrack_=settings.segmentMetadataTrack;this.goalBufferLength_=settings.goalBufferLength;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.pendingSegment_=null;this.mimeType_=null;this.sourceUpdater_=null;this.xhrOptions_=null;this.activeInitSegmentId_=null;this.initSegments_={};this.decrypter_=settings.decrypter;this.syncController_=settings.syncController;this.syncPoint_={segmentIndex:0,time:0};this.syncController_.on("syncinfoupdate",function(){return _this.trigger("syncinfoupdate")});this.mediaSource_.addEventListener("sourceopen",function(){return _this.ended_=false});this.fetchAtBuffer_=false;if(options.debug){this.logger_=_videoJs2["default"].log.bind(_videoJs2["default"],"segment-loader",this.loaderType_,"->")}}_createClass(SegmentLoader,[{key:"resetStats_",value:function resetStats_(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function dispose(){this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_()}},{key:"abort",value:function abort(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function abort_(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function error(_error){if(typeof _error!=="undefined"){this.error_=_error}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function endOfStream(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function buffered_(){if(!this.sourceUpdater_){return _videoJs2["default"].createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function initSegment(map){var set=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(!map){return null}var id=(0,_binUtils.initSegmentId)(map);var storedMap=this.initSegments_[id];if(set&&!storedMap&&map.bytes){this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:map.bytes}}return storedMap||map}},{key:"couldBeginLoading_",value:function couldBeginLoading_(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function load(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function init_(){this.state="READY";this.sourceUpdater_=new _sourceUpdater2["default"](this.mediaSource_,this.mimeType_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function playlist(newPlaylist){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!newPlaylist){return}var oldPlaylist=this.playlist_;var segmentInfo=this.pendingSegment_;this.playlist_=newPlaylist;this.xhrOptions_=options;if(!this.hasPlayed_()){newPlaylist.syncInfo={mediaSequence:newPlaylist.mediaSequence,time:0}}this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!oldPlaylist||oldPlaylist.uri!==newPlaylist.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;this.logger_("mediaSequenceDiff",mediaSequenceDiff);if(this.mediaIndex!==null){this.mediaIndex-=mediaSequenceDiff}if(segmentInfo){segmentInfo.mediaIndex-=mediaSequenceDiff;if(segmentInfo.mediaIndex>=0){segmentInfo.segment=newPlaylist.segments[segmentInfo.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(oldPlaylist,newPlaylist)}},{key:"pause",value:function pause(){if(this.checkBufferTimeout_){_globalWindow2["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function paused(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function mimeType(_mimeType){if(this.mimeType_){return}this.mimeType_=_mimeType;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function resetEverything(){this.ended_=false;this.resetLoader();this.remove(0,this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function resetLoader(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function resyncLoader(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function remove(start,end){if(this.sourceUpdater_){this.sourceUpdater_.remove(start,end)}(0,_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2["default"])(start,end,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function monitorBuffer_(){if(this.checkBufferTimeout_){_globalWindow2["default"].clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=_globalWindow2["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function monitorBufferTick_(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){_globalWindow2["default"].clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=_globalWindow2["default"].setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY)}},{key:"fillBuffer_",value:function fillBuffer_(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var segmentInfo=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!segmentInfo){return}var isEndOfStream=detectEndOfStream(this.playlist_,this.mediaSource_,segmentInfo.mediaIndex);if(isEndOfStream){this.endOfStream();return}if(segmentInfo.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(segmentInfo.timeline!==this.currentTimeline_||segmentInfo.startOfSegment!==null&&segmentInfo.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();segmentInfo.timestampOffset=segmentInfo.startOfSegment}this.loadSegment_(segmentInfo)}},{key:"checkBuffer_",value:function checkBuffer_(buffered,playlist,mediaIndex,hasPlayed,currentTime,syncPoint){var lastBufferedEnd=0;var startOfSegment=undefined;if(buffered.length){lastBufferedEnd=buffered.end(buffered.length-1)}var bufferedTime=Math.max(0,lastBufferedEnd-currentTime);if(!playlist.segments.length){return null}if(bufferedTime>=this.goalBufferLength_()){return null}if(!hasPlayed&&bufferedTime>=1){return null}this.logger_("checkBuffer_","mediaIndex:",mediaIndex,"hasPlayed:",hasPlayed,"currentTime:",currentTime,"syncPoint:",syncPoint,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",bufferedTime);if(syncPoint===null){mediaIndex=this.getSyncSegmentCandidate_(playlist);this.logger_("getSync","mediaIndex:",mediaIndex);return this.generateSegmentInfo_(playlist,mediaIndex,null,true)}if(mediaIndex!==null){this.logger_("walkForward","mediaIndex:",mediaIndex+1);var segment=playlist.segments[mediaIndex];if(segment&&segment.end){startOfSegment=segment.end}else{startOfSegment=lastBufferedEnd}return this.generateSegmentInfo_(playlist,mediaIndex+1,startOfSegment,false)}if(this.fetchAtBuffer_){var mediaSourceInfo=_playlist2["default"].getMediaInfoForTime(playlist,lastBufferedEnd,syncPoint.segmentIndex,syncPoint.time);mediaIndex=mediaSourceInfo.mediaIndex;startOfSegment=mediaSourceInfo.startTime}else{var mediaSourceInfo=_playlist2["default"].getMediaInfoForTime(playlist,currentTime,syncPoint.segmentIndex,syncPoint.time);mediaIndex=mediaSourceInfo.mediaIndex;startOfSegment=mediaSourceInfo.startTime}this.logger_("getMediaIndexForTime","mediaIndex:",mediaIndex,"startOfSegment:",startOfSegment);return this.generateSegmentInfo_(playlist,mediaIndex,startOfSegment,false)}},{key:"getSyncSegmentCandidate_",value:function getSyncSegmentCandidate_(playlist){var _this2=this;if(this.currentTimeline_===-1){return 0}var segmentIndexArray=playlist.segments.map(function(s,i){return{timeline:s.timeline,segmentIndex:i}}).filter(function(s){return s.timeline===_this2.currentTimeline_});if(segmentIndexArray.length){return segmentIndexArray[Math.min(segmentIndexArray.length-1,1)].segmentIndex}return Math.max(playlist.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function generateSegmentInfo_(playlist,mediaIndex,startOfSegment,isSyncRequest){if(mediaIndex<0||mediaIndex>=playlist.segments.length){return null}var segment=playlist.segments[mediaIndex];return{requestId:"segment-loader-"+Math.random(),uri:segment.resolvedUri,mediaIndex:mediaIndex,isSyncRequest:isSyncRequest,startOfSegment:startOfSegment,playlist:playlist,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:segment.timeline,duration:segment.duration,segment:segment}}},{key:"abortRequestEarly_",value:function abortRequestEarly_(stats){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(stats.firstBytesReceivedAt||Date.now())<1e3){return false}var currentTime=this.currentTime_();var measuredBandwidth=stats.bandwidth;
var segmentDuration=this.pendingSegment_.duration;var requestTimeRemaining=_playlist2["default"].estimateSegmentRequestTime(segmentDuration,measuredBandwidth,this.playlist_,stats.bytesReceived);var timeUntilRebuffer=(0,_ranges.timeUntilRebuffer)(this.buffered_(),currentTime,this.hls_.tech_.playbackRate())-1;if(requestTimeRemaining<=timeUntilRebuffer){return false}var switchCandidate=(0,_playlistSelectors.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:currentTime,bandwidth:measuredBandwidth,duration:this.duration_(),segmentDuration:segmentDuration,timeUntilRebuffer:timeUntilRebuffer,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!switchCandidate){return}var rebufferingImpact=requestTimeRemaining-timeUntilRebuffer;var timeSavedBySwitching=rebufferingImpact-switchCandidate.rebufferingImpact;var minimumTimeSaving=.5;if(timeUntilRebuffer<=_ranges.TIME_FUDGE_FACTOR){minimumTimeSaving=1}if(!switchCandidate.playlist||switchCandidate.playlist.uri===this.playlist_.uri||timeSavedBySwitching<minimumTimeSaving){return false}this.bandwidth=switchCandidate.playlist.attributes.BANDWIDTH*_config2["default"].BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function handleProgress_(event,simpleSegment){if(!this.pendingSegment_||simpleSegment.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(simpleSegment.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function loadSegment_(segmentInfo){this.state="WAITING";this.pendingSegment_=segmentInfo;this.trimBackBuffer_(segmentInfo);segmentInfo.abortRequests=(0,_mediaSegmentRequest.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(segmentInfo),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function trimBackBuffer_(segmentInfo){var removeToTime=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(removeToTime>0){this.remove(0,removeToTime)}}},{key:"createSimplifiedSegmentObj_",value:function createSimplifiedSegmentObj_(segmentInfo){var segment=segmentInfo.segment;var simpleSegment={resolvedUri:segment.resolvedUri,byterange:segment.byterange,requestId:segmentInfo.requestId};if(segment.key){var iv=segment.key.iv||new Uint32Array([0,0,0,segmentInfo.mediaIndex+segmentInfo.playlist.mediaSequence]);simpleSegment.key={resolvedUri:segment.key.resolvedUri,iv:iv}}if(segment.map){simpleSegment.map=this.initSegment(segment.map)}return simpleSegment}},{key:"segmentRequestFinished_",value:function segmentRequestFinished_(error,simpleSegment){this.mediaRequests+=1;if(simpleSegment.stats){this.mediaBytesTransferred+=simpleSegment.stats.bytesReceived;this.mediaTransferDuration+=simpleSegment.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(simpleSegment.requestId!==this.pendingSegment_.requestId){return}if(error){this.pendingSegment_=null;this.state="READY";if(error.code===_mediaSegmentRequest.REQUEST_ERRORS.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(error.code===_mediaSegmentRequest.REQUEST_ERRORS.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(error);this.trigger("error");return}this.bandwidth=simpleSegment.stats.bandwidth;this.roundTrip=simpleSegment.stats.roundTripTime;if(simpleSegment.map){simpleSegment.map=this.initSegment(simpleSegment.map,true)}this.processSegmentResponse_(simpleSegment)}},{key:"processSegmentResponse_",value:function processSegmentResponse_(simpleSegment){var segmentInfo=this.pendingSegment_;segmentInfo.bytes=simpleSegment.bytes;if(simpleSegment.map){segmentInfo.segment.map.bytes=simpleSegment.map.bytes}segmentInfo.endOfAllRequests=simpleSegment.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function handleSegment_(){var _this3=this;if(!this.pendingSegment_){this.state="READY";return}var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;var timingInfo=this.syncController_.probeSegmentInfo(segmentInfo);if(typeof this.startingMedia_==="undefined"&&timingInfo&&(timingInfo.containsAudio||timingInfo.containsVideo)){this.startingMedia_={containsAudio:timingInfo.containsAudio,containsVideo:timingInfo.containsVideo}}var illegalMediaSwitchError=illegalMediaSwitch(this.loaderType_,this.startingMedia_,timingInfo);if(illegalMediaSwitchError){this.error({message:illegalMediaSwitchError,blacklistDuration:Infinity});this.trigger("error");return}if(segmentInfo.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(segmentInfo.timestampOffset!==null&&segmentInfo.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(segmentInfo.timestampOffset);this.trigger("timestampoffset")}var timelineMapping=this.syncController_.mappingForTimeline(segmentInfo.timeline);if(timelineMapping!==null){this.trigger({type:"segmenttimemapping",mapping:timelineMapping})}this.state="APPENDING";if(segment.map){(function(){var initId=(0,_binUtils.initSegmentId)(segment.map);if(!_this3.activeInitSegmentId_||_this3.activeInitSegmentId_!==initId){var initSegment=_this3.initSegment(segment.map);_this3.sourceUpdater_.appendBuffer(initSegment.bytes,function(){_this3.activeInitSegmentId_=initId})}})()}segmentInfo.byteLength=segmentInfo.bytes.byteLength;if(typeof segment.start==="number"&&typeof segment.end==="number"){this.mediaSecondsLoaded+=segment.end-segment.start}else{this.mediaSecondsLoaded+=segment.duration}this.sourceUpdater_.appendBuffer(segmentInfo.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function handleUpdateEnd_(){this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_);if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;var isWalkingForward=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(segmentInfo);this.addSegmentMetadataCue_(segmentInfo);this.state="READY";this.mediaIndex=segmentInfo.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=segmentInfo.timeline;this.trigger("syncinfoupdate");if(segment.end&&this.currentTime_()-segment.end>segmentInfo.playlist.targetDuration*3){this.resetEverything();return}if(isWalkingForward){this.trigger("bandwidthupdate")}this.trigger("progress");var isEndOfStream=detectEndOfStream(segmentInfo.playlist,this.mediaSource_,segmentInfo.mediaIndex+1);if(isEndOfStream){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function recordThroughput_(segmentInfo){var rate=this.throughput.rate;var segmentProcessingTime=Date.now()-segmentInfo.endOfAllRequests+1;var segmentProcessingThroughput=Math.floor(segmentInfo.byteLength/segmentProcessingTime*8*1e3);this.throughput.rate+=(segmentProcessingThroughput-rate)/++this.throughput.count}},{key:"logger_",value:function logger_(){}},{key:"addSegmentMetadataCue_",value:function addSegmentMetadataCue_(segmentInfo){if(!this.segmentMetadataTrack_){return}var segment=segmentInfo.segment;var start=segment.start;var end=segment.end;if(!finite(start)||!finite(end)){return}(0,_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2["default"])(start,end,this.segmentMetadataTrack_);var Cue=_globalWindow2["default"].WebKitDataCue||_globalWindow2["default"].VTTCue;var value={bandwidth:segmentInfo.playlist.attributes.BANDWIDTH,resolution:segmentInfo.playlist.attributes.RESOLUTION,codecs:segmentInfo.playlist.attributes.CODECS,byteLength:segmentInfo.byteLength,uri:segmentInfo.uri,timeline:segmentInfo.timeline,playlist:segmentInfo.playlist.uri,start:start,end:end};var data=JSON.stringify(value);var cue=new Cue(start,end,data);cue.value=value;this.segmentMetadataTrack_.addCue(cue)}}]);return SegmentLoader}(_videoJs2["default"].EventTarget);exports["default"]=SegmentLoader},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var noop=function noop(){};var SourceUpdater=function(){function SourceUpdater(mediaSource,mimeType){var _this=this;_classCallCheck(this,SourceUpdater);var createSourceBuffer=function createSourceBuffer(){_this.sourceBuffer_=mediaSource.addSourceBuffer(mimeType);_this.onUpdateendCallback_=function(){var pendingCallback=_this.pendingCallback_;_this.pendingCallback_=null;if(pendingCallback){pendingCallback()}_this.runCallback_()};_this.sourceBuffer_.addEventListener("updateend",_this.onUpdateendCallback_);_this.runCallback_()};this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=mediaSource;this.processedAppend_=false;if(mediaSource.readyState==="closed"){mediaSource.addEventListener("sourceopen",createSourceBuffer)}else{createSourceBuffer()}}_createClass(SourceUpdater,[{key:"abort",value:function abort(done){var _this2=this;if(this.processedAppend_){this.queueCallback_(function(){_this2.sourceBuffer_.abort()},done)}}},{key:"appendBuffer",value:function appendBuffer(bytes,done){var _this3=this;this.processedAppend_=true;this.queueCallback_(function(){_this3.sourceBuffer_.appendBuffer(bytes)},done)}},{key:"buffered",value:function buffered(){if(!this.sourceBuffer_){return _videoJs2["default"].createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function remove(start,end){var _this4=this;if(this.processedAppend_){this.queueCallback_(function(){_this4.sourceBuffer_.remove(start,end)},noop)}}},{key:"updating",value:function updating(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function timestampOffset(offset){var _this5=this;if(typeof offset!=="undefined"){this.queueCallback_(function(){_this5.sourceBuffer_.timestampOffset=offset});this.timestampOffset_=offset}return this.timestampOffset_}},{key:"queueCallback_",value:function queueCallback_(callback,done){this.callbacks_.push([callback.bind(this),done]);this.runCallback_()}},{key:"runCallback_",value:function runCallback_(){var callbacks=undefined;if(!this.updating()&&this.callbacks_.length){callbacks=this.callbacks_.shift();this.pendingCallback_=callbacks[1];callbacks[0]()}}},{key:"dispose",value:function dispose(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==="open"){this.sourceBuffer_.abort()}}}]);return SourceUpdater}();exports["default"]=SourceUpdater;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _binUtils=__webpack_require__(351);var REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102};exports.REQUEST_ERRORS=REQUEST_ERRORS;var byterangeStr=function byterangeStr(byterange){var byterangeStart=undefined;var byterangeEnd=undefined;byterangeEnd=byterange.offset+byterange.length-1;byterangeStart=byterange.offset;return"bytes="+byterangeStart+"-"+byterangeEnd};var segmentXhrHeaders=function segmentXhrHeaders(segment){var headers={};if(segment.byterange){headers.Range=byterangeStr(segment.byterange)}return headers};var abortAll=function abortAll(activeXhrs){activeXhrs.forEach(function(xhr){xhr.abort()})};var getRequestStats=function getRequestStats(request){return{bandwidth:request.bandwidth,bytesReceived:request.bytesReceived||0,roundTripTime:request.roundTripTime||0}};var getProgressStats=function getProgressStats(progressEvent){var request=progressEvent.target;var roundTripTime=Date.now()-request.requestTime;var stats={bandwidth:Infinity,bytesReceived:0,roundTripTime:roundTripTime||0};stats.bytesReceived=progressEvent.loaded;stats.bandwidth=Math.floor(stats.bytesReceived/stats.roundTripTime*8*1e3);return stats};var handleErrors=function handleErrors(error,request){if(request.timedout){return{status:request.status,message:"HLS request timed-out at URL: "+request.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:request}}if(request.aborted){return{status:request.status,message:"HLS request aborted at URL: "+request.uri,code:REQUEST_ERRORS.ABORTED,xhr:request}}if(error){return{status:request.status,message:"HLS request errored at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request}}return null};var handleKeyResponse=function handleKeyResponse(segment,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment)}if(response.byteLength!==16){return finishProcessingFn({status:request.status,message:"Invalid HLS key at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment)}var view=new DataView(response);segment.key.bytes=new Uint32Array([view.getUint32(0),view.getUint32(4),view.getUint32(8),view.getUint32(12)]);return finishProcessingFn(null,segment)}};var handleInitSegmentResponse=function handleInitSegmentResponse(segment,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment)}if(response.byteLength===0){return finishProcessingFn({status:request.status,message:"Empty HLS segment content at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment)}segment.map.bytes=new Uint8Array(request.response);return finishProcessingFn(null,segment)}};var handleSegmentResponse=function handleSegmentResponse(segment,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment)}if(response.byteLength===0){return finishProcessingFn({status:request.status,message:"Empty HLS segment content at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment)}segment.stats=getRequestStats(request);if(segment.key){segment.encryptedBytes=new Uint8Array(request.response)}else{segment.bytes=new Uint8Array(request.response)}return finishProcessingFn(null,segment)}};var decryptSegment=function decryptSegment(decrypter,segment,doneFn){var decryptionHandler=function decryptionHandler(event){if(event.data.source===segment.requestId){decrypter.removeEventListener("message",decryptionHandler);var decrypted=event.data.decrypted;segment.bytes=new Uint8Array(decrypted.bytes,decrypted.byteOffset,decrypted.byteLength);return doneFn(null,segment)}};decrypter.addEventListener("message",decryptionHandler);decrypter.postMessage((0,_binUtils.createTransferableMessage)({source:segment.requestId,encrypted:segment.encryptedBytes,key:segment.key.bytes,iv:segment.key.iv}),[segment.encryptedBytes.buffer,segment.key.bytes.buffer])};var getMostImportantError=function getMostImportantError(errors){return errors.reduce(function(prev,err){return err.code>prev.code?err:prev})};var waitForCompletion=function waitForCompletion(activeXhrs,decrypter,doneFn){var errors=[];var count=0;return function(error,segment){if(error){abortAll(activeXhrs);errors.push(error)}count+=1;if(count===activeXhrs.length){segment.endOfAllRequests=Date.now();if(errors.length>0){var worstError=getMostImportantError(errors);return doneFn(worstError,segment)}if(segment.encryptedBytes){return decryptSegment(decrypter,segment,doneFn)}return doneFn(null,segment)}}};var handleProgress=function handleProgress(segment,progressFn){return function(event){segment.stats=_videoJs2["default"].mergeOptions(segment.stats,getProgressStats(event));if(!segment.stats.firstBytesReceivedAt&&segment.stats.bytesReceived){segment.stats.firstBytesReceivedAt=Date.now()}return progressFn(event,segment)}};var mediaSegmentRequest=function mediaSegmentRequest(xhr,xhrOptions,decryptionWorker,segment,progressFn,doneFn){var activeXhrs=[];var finishProcessingFn=waitForCompletion(activeXhrs,decryptionWorker,doneFn);if(segment.key){var keyRequestOptions=_videoJs2["default"].mergeOptions(xhrOptions,{uri:segment.key.resolvedUri,responseType:"arraybuffer"});var keyRequestCallback=handleKeyResponse(segment,finishProcessingFn);var keyXhr=xhr(keyRequestOptions,keyRequestCallback);activeXhrs.push(keyXhr)}if(segment.map&&!segment.map.bytes){var initSegmentOptions=_videoJs2["default"].mergeOptions(xhrOptions,{uri:segment.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(segment.map)});var initSegmentRequestCallback=handleInitSegmentResponse(segment,finishProcessingFn);var initSegmentXhr=xhr(initSegmentOptions,initSegmentRequestCallback);activeXhrs.push(initSegmentXhr)}var segmentRequestOptions=_videoJs2["default"].mergeOptions(xhrOptions,{uri:segment.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(segment)});var segmentRequestCallback=handleSegmentResponse(segment,finishProcessingFn);var segmentXhr=xhr(segmentRequestOptions,segmentRequestCallback);segmentXhr.addEventListener("progress",handleProgress(segment,progressFn));activeXhrs.push(segmentXhr);return function(){return abortAll(activeXhrs)}};exports.mediaSegmentRequest=mediaSegmentRequest},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var TIME_FUDGE_FACTOR=1/30;var SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3;var clamp=function clamp(num,_ref){var _ref2=_slicedToArray(_ref,2);var start=_ref2[0];var end=_ref2[1];return Math.min(Math.max(start,num),end)};var filterRanges=function filterRanges(timeRanges,predicate){var results=[];var i=undefined;if(timeRanges&&timeRanges.length){for(i=0;i<timeRanges.length;i++){if(predicate(timeRanges.start(i),timeRanges.end(i))){results.push([timeRanges.start(i),timeRanges.end(i)])}}}return _videoJs2["default"].createTimeRanges(results)};var findRange=function findRange(buffered,time){return filterRanges(buffered,function(start,end){return start-TIME_FUDGE_FACTOR<=time&&end+TIME_FUDGE_FACTOR>=time})};var findNextRange=function findNextRange(timeRanges,time){return filterRanges(timeRanges,function(start){return start-TIME_FUDGE_FACTOR>=time})};var findGaps=function findGaps(buffered){if(buffered.length<2){return _videoJs2["default"].createTimeRanges()}var ranges=[];for(var i=1;i<buffered.length;i++){var start=buffered.end(i-1);var end=buffered.start(i);ranges.push([start,end])}return _videoJs2["default"].createTimeRanges(ranges)};var findSoleUncommonTimeRangesEnd=function findSoleUncommonTimeRangesEnd(original,update){var i=undefined;var start=undefined;var end=undefined;var result=[];var edges=[];var overlapsCurrentEnd=function overlapsCurrentEnd(span){return span[0]<=end&&span[1]>=end};if(original){for(i=0;i<original.length;i++){start=original.start(i);end=original.end(i);edges.push([start,end])}}if(update){for(i=0;i<update.length;i++){start=update.start(i);end=update.end(i);if(edges.some(overlapsCurrentEnd)){continue}result.push(end)}}if(result.length!==1){return null}return result[0]};var bufferIntersection=function bufferIntersection(bufferA,bufferB){var start=null;var end=null;var arity=0;var extents=[];var ranges=[];if(!bufferA||!bufferA.length||!bufferB||!bufferB.length){return _videoJs2["default"].createTimeRange()}var count=bufferA.length;while(count--){extents.push({time:bufferA.start(count),type:"start"});extents.push({time:bufferA.end(count),type:"end"})}count=bufferB.length;while(count--){extents.push({time:bufferB.start(count),type:"start"});extents.push({time:bufferB.end(count),type:"end"})}extents.sort(function(a,b){return a.time-b.time});for(count=0;count<extents.length;count++){if(extents[count].type==="start"){arity++;if(arity===2){start=extents[count].time}}else if(extents[count].type==="end"){arity--;if(arity===1){end=extents[count].time}}if(start!==null&&end!==null){ranges.push([start,end]);start=null;end=null}}return _videoJs2["default"].createTimeRanges(ranges)};var calculateBufferedPercent=function calculateBufferedPercent(adjustedRange,referenceRange,currentTime,buffered){var referenceDuration=referenceRange.end(0)-referenceRange.start(0);var adjustedDuration=adjustedRange.end(0)-adjustedRange.start(0);var bufferMissingFromAdjusted=referenceDuration-adjustedDuration;var adjustedIntersection=bufferIntersection(adjustedRange,buffered);var referenceIntersection=bufferIntersection(referenceRange,buffered);var adjustedOverlap=0;var referenceOverlap=0;var count=adjustedIntersection.length;while(count--){adjustedOverlap+=adjustedIntersection.end(count)-adjustedIntersection.start(count);if(adjustedIntersection.start(count)===currentTime){adjustedOverlap+=bufferMissingFromAdjusted}}count=referenceIntersection.length;while(count--){referenceOverlap+=referenceIntersection.end(count)-referenceIntersection.start(count)}return Math.max(adjustedOverlap,referenceOverlap)/referenceDuration*100};var getSegmentBufferedPercent=function getSegmentBufferedPercent(startOfSegment,segmentDuration,currentTime,buffered){var endOfSegment=startOfSegment+segmentDuration;var originalSegmentRange=_videoJs2["default"].createTimeRanges([[startOfSegment,endOfSegment]]);var adjustedSegmentRange=_videoJs2["default"].createTimeRanges([[clamp(startOfSegment,[currentTime,endOfSegment]),endOfSegment]]);if(adjustedSegmentRange.start(0)===adjustedSegmentRange.end(0)){return 0}var percent=calculateBufferedPercent(adjustedSegmentRange,originalSegmentRange,currentTime,buffered);if(isNaN(percent)||percent===Infinity||percent===-Infinity){return 0}return percent};var printableRange=function printableRange(range){var strArr=[];if(!range||!range.length){return""}for(var i=0;i<range.length;i++){strArr.push(range.start(i)+" => "+range.end(i))}return strArr.join(", ")};var timeUntilRebuffer=function timeUntilRebuffer(buffered,currentTime){var playbackRate=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var bufferedEnd=buffered.length?buffered.end(buffered.length-1):0;return(bufferedEnd-currentTime)/playbackRate};exports["default"]={findRange:findRange,findNextRange:findNextRange,findGaps:findGaps,findSoleUncommonTimeRangesEnd:findSoleUncommonTimeRangesEnd,getSegmentBufferedPercent:getSegmentBufferedPercent,TIME_FUDGE_FACTOR:TIME_FUDGE_FACTOR,SAFE_TIME_DELTA:SAFE_TIME_DELTA,printableRange:printableRange,timeUntilRebuffer:timeUntilRebuffer};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _config=__webpack_require__(389);var _config2=_interopRequireDefault(_config);var _playlist=__webpack_require__(341);var _playlist2=_interopRequireDefault(_playlist);var _utilCodecsJs=__webpack_require__(393);var safeGetComputedStyle=function safeGetComputedStyle(el,property){var result=undefined;if(!el){return""}result=window.getComputedStyle(el);if(!result){return""}return result[property]};var stableSort=function stableSort(array,sortFn){var newArray=array.slice();array.sort(function(left,right){var cmp=sortFn(left,right);if(cmp===0){return newArray.indexOf(left)-newArray.indexOf(right)}return cmp})};var comparePlaylistBandwidth=function comparePlaylistBandwidth(left,right){var leftBandwidth=undefined;var rightBandwidth=undefined;if(left.attributes.BANDWIDTH){leftBandwidth=left.attributes.BANDWIDTH}leftBandwidth=leftBandwidth||window.Number.MAX_VALUE;if(right.attributes.BANDWIDTH){rightBandwidth=right.attributes.BANDWIDTH}rightBandwidth=rightBandwidth||window.Number.MAX_VALUE;return leftBandwidth-rightBandwidth};exports.comparePlaylistBandwidth=comparePlaylistBandwidth;var comparePlaylistResolution=function comparePlaylistResolution(left,right){var leftWidth=undefined;var rightWidth=undefined;if(left.attributes.RESOLUTION&&left.attributes.RESOLUTION.width){leftWidth=left.attributes.RESOLUTION.width}leftWidth=leftWidth||window.Number.MAX_VALUE;if(right.attributes.RESOLUTION&&right.attributes.RESOLUTION.width){rightWidth=right.attributes.RESOLUTION.width}rightWidth=rightWidth||window.Number.MAX_VALUE;if(leftWidth===rightWidth&&left.attributes.BANDWIDTH&&right.attributes.BANDWIDTH){return left.attributes.BANDWIDTH-right.attributes.BANDWIDTH}return leftWidth-rightWidth};exports.comparePlaylistResolution=comparePlaylistResolution;var simpleSelector=function simpleSelector(master,playerBandwidth,playerWidth,playerHeight){var sortedPlaylistReps=master.playlists.map(function(playlist){var width=undefined;var height=undefined;var bandwidth=undefined;width=playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.width;height=playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.height;bandwidth=playlist.attributes.BANDWIDTH;bandwidth=bandwidth||window.Number.MAX_VALUE;return{bandwidth:bandwidth,width:width,height:height,playlist:playlist}});stableSort(sortedPlaylistReps,function(left,right){return left.bandwidth-right.bandwidth});sortedPlaylistReps=sortedPlaylistReps.filter(function(rep){return!_playlist2["default"].isIncompatible(rep.playlist)});var enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return _playlist2["default"].isEnabled(rep.playlist)});if(!enabledPlaylistReps.length){enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return!_playlist2["default"].isDisabled(rep.playlist)})}var bandwidthPlaylistReps=enabledPlaylistReps.filter(function(rep){return rep.bandwidth*_config2["default"].BANDWIDTH_VARIANCE<playerBandwidth});var highestRemainingBandwidthRep=bandwidthPlaylistReps[bandwidthPlaylistReps.length-1];var bandwidthBestRep=bandwidthPlaylistReps.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth})[0];var haveResolution=bandwidthPlaylistReps.filter(function(rep){return rep.width&&rep.height});stableSort(haveResolution,function(left,right){return left.width-right.width});var resolutionBestRepList=haveResolution.filter(function(rep){return rep.width===playerWidth&&rep.height===playerHeight});highestRemainingBandwidthRep=resolutionBestRepList[resolutionBestRepList.length-1];var resolutionBestRep=resolutionBestRepList.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth})[0];var resolutionPlusOneList=undefined;var resolutionPlusOneSmallest=undefined;var resolutionPlusOneRep=undefined;if(!resolutionBestRep){resolutionPlusOneList=haveResolution.filter(function(rep){return rep.width>playerWidth||rep.height>playerHeight});resolutionPlusOneSmallest=resolutionPlusOneList.filter(function(rep){return rep.width===resolutionPlusOneList[0].width&&rep.height===resolutionPlusOneList[0].height});highestRemainingBandwidthRep=resolutionPlusOneSmallest[resolutionPlusOneSmallest.length-1];resolutionPlusOneRep=resolutionPlusOneSmallest.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth})[0]}var chosenRep=resolutionPlusOneRep||resolutionBestRep||bandwidthBestRep||enabledPlaylistReps[0]||sortedPlaylistReps[0];return chosenRep?chosenRep.playlist:null};exports.simpleSelector=simpleSelector;var lastBandwidthSelector=function lastBandwidthSelector(){return simpleSelector(this.playlists.master,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10),parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10))};exports.lastBandwidthSelector=lastBandwidthSelector;var movingAverageBandwidthSelector=function movingAverageBandwidthSelector(decay){var average=-1;if(decay<0||decay>1){throw new Error("Moving average bandwidth decay must be between 0 and 1.")}return function(){if(average<0){average=this.systemBandwidth}average=decay*this.systemBandwidth+(1-decay)*average;return simpleSelector(this.playlists.master,average,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10),parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10))}};exports.movingAverageBandwidthSelector=movingAverageBandwidthSelector;var minRebufferMaxBandwidthSelector=function minRebufferMaxBandwidthSelector(settings){var master=settings.master;var currentTime=settings.currentTime;var bandwidth=settings.bandwidth;var duration=settings.duration;var segmentDuration=settings.segmentDuration;var timeUntilRebuffer=settings.timeUntilRebuffer;var currentTimeline=settings.currentTimeline;var syncController=settings.syncController;var compatiblePlaylists=master.playlists.filter(function(playlist){return!_playlist2["default"].isIncompatible(playlist)});var enabledPlaylists=compatiblePlaylists.filter(_playlist2["default"].isEnabled);if(!enabledPlaylists.length){enabledPlaylists=compatiblePlaylists.filter(function(playlist){return!_playlist2["default"].isDisabled(playlist)})}var bandwidthPlaylists=enabledPlaylists.filter(_playlist2["default"].hasAttribute.bind(null,"BANDWIDTH"));var rebufferingEstimates=bandwidthPlaylists.map(function(playlist){var syncPoint=syncController.getSyncPoint(playlist,duration,currentTimeline,currentTime);var numRequests=syncPoint?1:2;var requestTimeEstimate=_playlist2["default"].estimateSegmentRequestTime(segmentDuration,bandwidth,playlist);var rebufferingImpact=requestTimeEstimate*numRequests-timeUntilRebuffer;return{playlist:playlist,rebufferingImpact:rebufferingImpact}});var noRebufferingPlaylists=rebufferingEstimates.filter(function(estimate){return estimate.rebufferingImpact<=0});stableSort(noRebufferingPlaylists,function(a,b){return comparePlaylistBandwidth(b.playlist,a.playlist)});if(noRebufferingPlaylists.length){return noRebufferingPlaylists[0]}stableSort(rebufferingEstimates,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return rebufferingEstimates[0]||null};exports.minRebufferMaxBandwidthSelector=minRebufferMaxBandwidthSelector;var lowestBitrateCompatibleVariantSelector=function lowestBitrateCompatibleVariantSelector(){var playlists=this.playlists.master.playlists.filter(_playlist2["default"].isEnabled);stableSort(playlists,function(a,b){return comparePlaylistBandwidth(a,b)});var playlistsWithVideo=playlists.filter(function(playlist){return(0,_utilCodecsJs.parseCodecs)(playlist.attributes.CODECS).videoCodec});return playlistsWithVideo[0]||null};exports.lowestBitrateCompatibleVariantSelector=lowestBitrateCompatibleVariantSelector;
},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var parseCodecs=function parseCodecs(){var codecs=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var result={codecCount:0};var parsed=undefined;result.codecCount=codecs.split(",").length;result.codecCount=result.codecCount||2;parsed=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(codecs);if(parsed){result.videoCodec=parsed[2];result.videoObjectTypeIndicator=parsed[3]}result.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(codecs);result.audioProfile=result.audioProfile&&result.audioProfile[2];return result};exports.parseCodecs=parseCodecs},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x3,_x4,_x5){var _again=true;_function:while(_again){var object=_x3,property=_x4,receiver=_x5;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x3=parent;_x4=property;_x5=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _segmentLoader=__webpack_require__(387);var _segmentLoader2=_interopRequireDefault(_segmentLoader);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs=__webpack_require__(370);var _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2=_interopRequireDefault(_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs);var _binUtils=__webpack_require__(351);var VTT_LINE_TERMINATORS=new Uint8Array("\n\n".split("").map(function(char){return char.charCodeAt(0)}));var uintToString=function uintToString(uintArray){return String.fromCharCode.apply(null,uintArray)};var VTTSegmentLoader=function(_SegmentLoader){_inherits(VTTSegmentLoader,_SegmentLoader);function VTTSegmentLoader(settings){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,VTTSegmentLoader);_get(Object.getPrototypeOf(VTTSegmentLoader.prototype),"constructor",this).call(this,settings,options);this.mediaSource_=null;this.subtitlesTrack_=null}_createClass(VTTSegmentLoader,[{key:"buffered_",value:function buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return _videoJs2["default"].createTimeRanges()}var cues=this.subtitlesTrack_.cues;var start=cues[0].startTime;var end=cues[cues.length-1].startTime;return _videoJs2["default"].createTimeRanges([[start,end]])}},{key:"initSegment",value:function initSegment(map){var set=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(!map){return null}var id=(0,_binUtils.initSegmentId)(map);var storedMap=this.initSegments_[id];if(set&&!storedMap&&map.bytes){var combinedByteLength=VTT_LINE_TERMINATORS.byteLength+map.bytes.byteLength;var combinedSegment=new Uint8Array(combinedByteLength);combinedSegment.set(map.bytes);combinedSegment.set(VTT_LINE_TERMINATORS,map.bytes.byteLength);this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:combinedSegment}}return storedMap||map}},{key:"couldBeginLoading_",value:function couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function track(_track){if(typeof _track==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=_track;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function remove(start,end){(0,_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2["default"])(start,end,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function fillBuffer_(){var _this=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var segmentInfo=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);segmentInfo=this.skipEmptySegments_(segmentInfo);if(!segmentInfo){return}if(this.syncController_.timestampOffsetForTimeline(segmentInfo.timeline)===null){var checkTimestampOffset=function checkTimestampOffset(){_this.state="READY";if(!_this.paused()){_this.monitorBuffer_()}};this.syncController_.one("timestampoffset",checkTimestampOffset);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(segmentInfo)}},{key:"skipEmptySegments_",value:function skipEmptySegments_(segmentInfo){while(segmentInfo&&segmentInfo.segment.empty){segmentInfo=this.generateSegmentInfo_(segmentInfo.playlist,segmentInfo.mediaIndex+1,segmentInfo.startOfSegment+segmentInfo.duration,segmentInfo.isSyncRequest)}return segmentInfo}},{key:"handleSegment_",value:function handleSegment_(){var _this2=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;if(typeof _globalWindow2["default"].WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var _ret=function(){var loadHandler=function loadHandler(){_this2.handleSegment_()};_this2.state="WAITING_ON_VTTJS";_this2.subtitlesTrack_.tech_.one("vttjsloaded",loadHandler);_this2.subtitlesTrack_.tech_.one("vttjserror",function(){_this2.subtitlesTrack_.tech_.off("vttjsloaded",loadHandler);_this2.error({message:"Error loading vtt.js"});_this2.state="READY";_this2.pause();_this2.trigger("error")});return{v:undefined}}();if((typeof _ret==="undefined"?"undefined":_typeof2(_ret))==="object")return _ret.v}segment.requested=true;try{this.parseVTTCues_(segmentInfo)}catch(e){this.error({message:e.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(segmentInfo,this.syncController_.timelines[segmentInfo.timeline],this.playlist_);if(segmentInfo.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}segmentInfo.byteLength=segmentInfo.bytes.byteLength;this.mediaSecondsLoaded+=segment.duration;if(segmentInfo.cues.length){this.remove(segmentInfo.cues[0].endTime,segmentInfo.cues[segmentInfo.cues.length-1].endTime)}segmentInfo.cues.forEach(function(cue){_this2.subtitlesTrack_.addCue(cue)});this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function parseVTTCues_(segmentInfo){var decoder=undefined;var decodeBytesToString=false;if(typeof _globalWindow2["default"].TextDecoder==="function"){decoder=new _globalWindow2["default"].TextDecoder("utf8")}else{decoder=_globalWindow2["default"].WebVTT.StringDecoder();decodeBytesToString=true}var parser=new _globalWindow2["default"].WebVTT.Parser(_globalWindow2["default"],_globalWindow2["default"].vttjs,decoder);segmentInfo.cues=[];segmentInfo.timestampmap={MPEGTS:0,LOCAL:0};parser.oncue=segmentInfo.cues.push.bind(segmentInfo.cues);parser.ontimestampmap=function(map){return segmentInfo.timestampmap=map};parser.onparsingerror=function(error){_videoJs2["default"].log.warn("Error encountered when parsing cues: "+error.message)};if(segmentInfo.segment.map){var mapData=segmentInfo.segment.map.bytes;if(decodeBytesToString){mapData=uintToString(mapData)}parser.parse(mapData)}var segmentData=segmentInfo.bytes;if(decodeBytesToString){segmentData=uintToString(segmentData)}parser.parse(segmentData);parser.flush()}},{key:"updateTimeMapping_",value:function updateTimeMapping_(segmentInfo,mappingObj,playlist){var segment=segmentInfo.segment;if(!mappingObj){return}if(!segmentInfo.cues.length){segment.empty=true;return}var timestampmap=segmentInfo.timestampmap;var diff=timestampmap.MPEGTS/9e4-timestampmap.LOCAL+mappingObj.mapping;segmentInfo.cues.forEach(function(cue){cue.startTime+=diff;cue.endTime+=diff});if(!playlist.syncInfo){var firstStart=segmentInfo.cues[0].startTime;var lastStart=segmentInfo.cues[segmentInfo.cues.length-1].startTime;playlist.syncInfo={mediaSequence:playlist.mediaSequence+segmentInfo.mediaIndex,time:Math.min(firstStart,lastStart-segment.duration)}}}}]);return VTTSegmentLoader}(_segmentLoader2["default"]);exports["default"]=VTTSegmentLoader;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var findAdCue=function findAdCue(track,mediaTime){var cues=track.cues;for(var i=0;i<cues.length;i++){var cue=cues[i];if(mediaTime>=cue.adStartTime&&mediaTime<=cue.adEndTime){return cue}}return null};var updateAdCues=function updateAdCues(media,track){var offset=arguments.length<=2||arguments[2]===undefined?0:arguments[2];if(!media.segments){return}var mediaTime=offset;var cue=undefined;for(var i=0;i<media.segments.length;i++){var segment=media.segments[i];if(!cue){cue=findAdCue(track,mediaTime+segment.duration/2)}if(cue){if("cueIn"in segment){cue.endTime=mediaTime;cue.adEndTime=mediaTime;mediaTime+=segment.duration;cue=null;continue}if(mediaTime<cue.endTime){mediaTime+=segment.duration;continue}cue.endTime+=segment.duration}else{if("cueOut"in segment){cue=new _globalWindow2["default"].VTTCue(mediaTime,mediaTime+segment.duration,segment.cueOut);cue.adStartTime=mediaTime;cue.adEndTime=mediaTime+parseFloat(segment.cueOut);track.addCue(cue)}if("cueOutCont"in segment){var adOffset=undefined;var adTotal=undefined;var _segment$cueOutCont$split$map=segment.cueOutCont.split("/").map(parseFloat);var _segment$cueOutCont$split$map2=_slicedToArray(_segment$cueOutCont$split$map,2);adOffset=_segment$cueOutCont$split$map2[0];adTotal=_segment$cueOutCont$split$map2[1];cue=new _globalWindow2["default"].VTTCue(mediaTime,mediaTime+segment.duration,"");cue.adStartTime=mediaTime-adOffset;cue.adEndTime=cue.adStartTime+adTotal;track.addCue(cue)}}mediaTime+=segment.duration}};exports["default"]={updateAdCues:updateAdCues,findAdCue:findAdCue};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _muxJsLibMp4Probe=__webpack_require__(397);var _muxJsLibMp4Probe2=_interopRequireDefault(_muxJsLibMp4Probe);var _muxJsLibToolsTsInspectorJs=__webpack_require__(398);var _playlist=__webpack_require__(341);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var syncPointStrategies=[{name:"VOD",run:function run(syncController,playlist,duration,currentTimeline,currentTime){if(duration!==Infinity){var syncPoint={time:0,segmentIndex:0};return syncPoint}return null}},{name:"ProgramDateTime",run:function run(syncController,playlist,duration,currentTimeline,currentTime){if(syncController.datetimeToDisplayTime&&playlist.dateTimeObject){var playlistTime=playlist.dateTimeObject.getTime()/1e3;var playlistStart=playlistTime+syncController.datetimeToDisplayTime;var syncPoint={time:playlistStart,segmentIndex:0};return syncPoint}return null}},{name:"Segment",run:function run(syncController,playlist,duration,currentTimeline,currentTime){var segments=playlist.segments||[];var syncPoint=null;var lastDistance=null;currentTime=currentTime||0;for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment.timeline===currentTimeline&&typeof segment.start!=="undefined"){var distance=Math.abs(currentTime-segment.start);if(lastDistance!==null&&lastDistance<distance){break}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:segment.start,segmentIndex:i}}}}return syncPoint}},{name:"Discontinuity",run:function run(syncController,playlist,duration,currentTimeline,currentTime){var syncPoint=null;currentTime=currentTime||0;if(playlist.discontinuityStarts&&playlist.discontinuityStarts.length){var lastDistance=null;for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var discontinuitySync=syncController.discontinuities[discontinuity];if(discontinuitySync){var distance=Math.abs(currentTime-discontinuitySync.time);if(lastDistance!==null&&lastDistance<distance){break}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:discontinuitySync.time,segmentIndex:segmentIndex}}}}}return syncPoint}},{name:"Playlist",run:function run(syncController,playlist,duration,currentTimeline,currentTime){if(playlist.syncInfo){var syncPoint={time:playlist.syncInfo.time,segmentIndex:playlist.syncInfo.mediaSequence-playlist.mediaSequence};return syncPoint}return null}}];exports.syncPointStrategies=syncPointStrategies;var SyncController=function(_videojs$EventTarget){_inherits(SyncController,_videojs$EventTarget);function SyncController(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,SyncController);_get(Object.getPrototypeOf(SyncController.prototype),"constructor",this).call(this);this.inspectCache_=undefined;this.timelines=[];this.discontinuities=[];this.datetimeToDisplayTime=null;if(options.debug){this.logger_=_videoJs2["default"].log.bind(_videoJs2["default"],"sync-controller ->")}}_createClass(SyncController,[{key:"getSyncPoint",value:function getSyncPoint(playlist,duration,currentTimeline,currentTime){var syncPoints=this.runStrategies_(playlist,duration,currentTimeline,currentTime);if(!syncPoints.length){return null}return this.selectSyncPoint_(syncPoints,{key:"time",value:currentTime})}},{key:"getExpiredTime",value:function getExpiredTime(playlist,duration){if(!playlist||!playlist.segments){return null}var syncPoints=this.runStrategies_(playlist,duration,playlist.discontinuitySequence,0);if(!syncPoints.length){return null}var syncPoint=this.selectSyncPoint_(syncPoints,{key:"segmentIndex",value:0});if(syncPoint.segmentIndex>0){syncPoint.time*=-1}return Math.abs(syncPoint.time+(0,_playlist.sumDurations)(playlist,syncPoint.segmentIndex,0))}},{key:"runStrategies_",value:function runStrategies_(playlist,duration,currentTimeline,currentTime){var syncPoints=[];for(var i=0;i<syncPointStrategies.length;i++){var strategy=syncPointStrategies[i];var syncPoint=strategy.run(this,playlist,duration,currentTimeline,currentTime);if(syncPoint){syncPoint.strategy=strategy.name;syncPoints.push({strategy:strategy.name,syncPoint:syncPoint});this.logger_("syncPoint found via <"+strategy.name+">:",syncPoint)}}return syncPoints}},{key:"selectSyncPoint_",value:function selectSyncPoint_(syncPoints,target){var bestSyncPoint=syncPoints[0].syncPoint;var bestDistance=Math.abs(syncPoints[0].syncPoint[target.key]-target.value);var bestStrategy=syncPoints[0].strategy;for(var i=1;i<syncPoints.length;i++){var newDistance=Math.abs(syncPoints[i].syncPoint[target.key]-target.value);if(newDistance<bestDistance){bestDistance=newDistance;bestSyncPoint=syncPoints[i].syncPoint;bestStrategy=syncPoints[i].strategy}}this.logger_("syncPoint with strategy <"+bestStrategy+"> chosen: ",bestSyncPoint);return bestSyncPoint}},{key:"saveExpiredSegmentInfo",value:function saveExpiredSegmentInfo(oldPlaylist,newPlaylist){var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;for(var i=mediaSequenceDiff-1;i>=0;i--){var lastRemovedSegment=oldPlaylist.segments[i];if(lastRemovedSegment&&typeof lastRemovedSegment.start!=="undefined"){newPlaylist.syncInfo={mediaSequence:oldPlaylist.mediaSequence+i,time:lastRemovedSegment.start};this.logger_("playlist sync:",newPlaylist.syncInfo);this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function setDateTimeMapping(playlist){if(!this.datetimeToDisplayTime&&playlist.dateTimeObject){var playlistTimestamp=playlist.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-playlistTimestamp}}},{key:"reset",value:function reset(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function probeSegmentInfo(segmentInfo){var segment=segmentInfo.segment;var playlist=segmentInfo.playlist;var timingInfo=undefined;if(segment.map){timingInfo=this.probeMp4Segment_(segmentInfo)}else{timingInfo=this.probeTsSegment_(segmentInfo)}if(timingInfo){if(this.calculateSegmentTimeMapping_(segmentInfo,timingInfo)){this.saveDiscontinuitySyncInfo_(segmentInfo);if(!playlist.syncInfo){playlist.syncInfo={mediaSequence:playlist.mediaSequence+segmentInfo.mediaIndex,time:segment.start}}}}return timingInfo}},{key:"probeMp4Segment_",value:function probeMp4Segment_(segmentInfo){var segment=segmentInfo.segment;var timescales=_muxJsLibMp4Probe2["default"].timescale(segment.map.bytes);var startTime=_muxJsLibMp4Probe2["default"].startTime(timescales,segmentInfo.bytes);if(segmentInfo.timestampOffset!==null){segmentInfo.timestampOffset-=startTime}return{start:startTime,end:startTime+segment.duration}}},{key:"probeTsSegment_",value:function probeTsSegment_(segmentInfo){var timeInfo=(0,_muxJsLibToolsTsInspectorJs.inspect)(segmentInfo.bytes,this.inspectCache_);var segmentStartTime=undefined;var segmentEndTime=undefined;if(!timeInfo){return null}if(timeInfo.video&&timeInfo.video.length===2){this.inspectCache_=timeInfo.video[1].dts;segmentStartTime=timeInfo.video[0].dtsTime;segmentEndTime=timeInfo.video[1].dtsTime}else if(timeInfo.audio&&timeInfo.audio.length===2){this.inspectCache_=timeInfo.audio[1].dts;segmentStartTime=timeInfo.audio[0].dtsTime;segmentEndTime=timeInfo.audio[1].dtsTime}return{start:segmentStartTime,end:segmentEndTime,containsVideo:timeInfo.video&&timeInfo.video.length===2,containsAudio:timeInfo.audio&&timeInfo.audio.length===2}}},{key:"timestampOffsetForTimeline",value:function timestampOffsetForTimeline(timeline){if(typeof this.timelines[timeline]==="undefined"){return null}return this.timelines[timeline].time}},{key:"mappingForTimeline",value:function mappingForTimeline(timeline){if(typeof this.timelines[timeline]==="undefined"){return null}return this.timelines[timeline].mapping}},{key:"calculateSegmentTimeMapping_",value:function calculateSegmentTimeMapping_(segmentInfo,timingInfo){var segment=segmentInfo.segment;var mappingObj=this.timelines[segmentInfo.timeline];if(segmentInfo.timestampOffset!==null){this.logger_("tsO:",segmentInfo.timestampOffset);mappingObj={time:segmentInfo.startOfSegment,mapping:segmentInfo.startOfSegment-timingInfo.start};this.timelines[segmentInfo.timeline]=mappingObj;this.trigger("timestampoffset");segment.start=segmentInfo.startOfSegment;segment.end=timingInfo.end+mappingObj.mapping}else if(mappingObj){segment.start=timingInfo.start+mappingObj.mapping;segment.end=timingInfo.end+mappingObj.mapping}else{return false}return true}},{key:"saveDiscontinuitySyncInfo_",value:function saveDiscontinuitySyncInfo_(segmentInfo){var playlist=segmentInfo.playlist;var segment=segmentInfo.segment;if(segment.discontinuity){this.discontinuities[segment.timeline]={time:segment.start,accuracy:0}}else if(playlist.discontinuityStarts.length){for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var mediaIndexDiff=segmentIndex-segmentInfo.mediaIndex;var accuracy=Math.abs(mediaIndexDiff);if(!this.discontinuities[discontinuity]||this.discontinuities[discontinuity].accuracy>accuracy){var time=undefined;if(mediaIndexDiff<0){time=segment.start-(0,_playlist.sumDurations)(playlist,segmentInfo.mediaIndex,segmentIndex)}else{time=segment.end+(0,_playlist.sumDurations)(playlist,segmentInfo.mediaIndex+1,segmentIndex)}this.discontinuities[discontinuity]={time:time,accuracy:accuracy}}}}}},{key:"logger_",value:function logger_(){}}]);return SyncController}(_videoJs2["default"].EventTarget);exports["default"]=SyncController},function(module,exports){var _findBox2,parseType,timescale,startTime;_findBox2=function findBox(data,path){var results=[],i,size,type,end,subresults;if(!path.length){return null}for(i=0;i<data.byteLength;){size=data[i]<<24;size|=data[i+1]<<16;size|=data[i+2]<<8;size|=data[i+3];type=parseType(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;if(type===path[0]){if(path.length===1){results.push(data.subarray(i+8,end))}else{subresults=_findBox2(data.subarray(i+8,end),path.slice(1));if(subresults.length){results=results.concat(subresults)}}}i=end}return results};parseType=function parseType(buffer){var result="";result+=String.fromCharCode(buffer[0]);result+=String.fromCharCode(buffer[1]);result+=String.fromCharCode(buffer[2]);result+=String.fromCharCode(buffer[3]);return result};timescale=function timescale(init){var result={},traks=_findBox2(init,["moov","trak"]);return traks.reduce(function(result,trak){var tkhd,version,index,id,mdhd;tkhd=_findBox2(trak,["tkhd"])[0];if(!tkhd){return null}version=tkhd[0];index=version===0?12:20;id=tkhd[index]<<24|tkhd[index+1]<<16|tkhd[index+2]<<8|tkhd[index+3];mdhd=_findBox2(trak,["mdia","mdhd"])[0];if(!mdhd){return null}version=mdhd[0];index=version===0?12:20;result[id]=mdhd[index]<<24|mdhd[index+1]<<16|mdhd[index+2]<<8|mdhd[index+3];return result},result)};startTime=function startTime(timescale,fragment){var trafs,baseTimes,result;trafs=_findBox2(fragment,["moof","traf"]);baseTimes=[].concat.apply([],trafs.map(function(traf){return _findBox2(traf,["tfhd"]).map(function(tfhd){var id,scale,baseTime;id=tfhd[4]<<24|tfhd[5]<<16|tfhd[6]<<8|tfhd[7];scale=timescale[id]||9e4;baseTime=_findBox2(traf,["tfdt"]).map(function(tfdt){var version,result;version=tfdt[0];result=tfdt[4]<<24|tfdt[5]<<16|tfdt[6]<<8|tfdt[7];if(version===1){result*=Math.pow(2,32);result+=tfdt[8]<<24|tfdt[9]<<16|tfdt[10]<<8|tfdt[11]}return result})[0];baseTime=baseTime||Infinity;return baseTime/scale})}));result=Math.min.apply(null,baseTimes);return isFinite(result)?result:0};module.exports={parseType:parseType,timescale:timescale,startTime:startTime}},function(module,exports,__webpack_require__){var StreamTypes=__webpack_require__(361);var handleRollover=__webpack_require__(362).handleRollover;var probe={};probe.ts=__webpack_require__(399);probe.aac=__webpack_require__(400);var PES_TIMESCALE=9e4,MP2T_PACKET_LENGTH=188,SYNC_BYTE=71;var isLikelyAacData=function isLikelyAacData(data){if(data[0]==="I".charCodeAt(0)&&data[1]==="D".charCodeAt(0)&&data[2]==="3".charCodeAt(0)){return true}return false};var parsePsi_=function parsePsi_(bytes,pmt){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type;while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case"pat":if(!pmt.pid){pmt.pid=probe.ts.parsePat(packet)}break;case"pmt":if(!pmt.table){pmt.table=probe.ts.parsePmt(packet)}break;default:break}if(pmt.pid&&pmt.table){return}startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue}startIndex++;endIndex++}};var parseAudioPes_=function parseAudioPes_(bytes,pmt,result){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type,pesType,pusi,parsed;var endLoop=false;while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="audio"&&pusi){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="audio";result.audio.push(parsed);endLoop=true}}break;default:break}if(endLoop){break}startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue}startIndex++;endIndex++}endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="audio"&&pusi){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="audio";result.audio.push(parsed);endLoop=true}}break;default:break}if(endLoop){break}startIndex-=MP2T_PACKET_LENGTH;endIndex-=MP2T_PACKET_LENGTH;continue}startIndex--;endIndex--}};var parseVideoPes_=function parseVideoPes_(bytes,pmt,result){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type,pesType,pusi,parsed,frame,i,pes;var endLoop=false;var currentFrame={data:[],size:0};while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="video"){if(pusi&&!endLoop){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="video";result.video.push(parsed);endLoop=true}}if(!result.firstKeyFrame){if(pusi){if(currentFrame.size!==0){frame=new Uint8Array(currentFrame.size);i=0;while(currentFrame.data.length){pes=currentFrame.data.shift();frame.set(pes,i);i+=pes.byteLength}if(probe.ts.videoPacketContainsKeyFrame(frame)){result.firstKeyFrame=probe.ts.parsePesTime(frame);result.firstKeyFrame.type="video"}currentFrame.size=0}}currentFrame.data.push(packet);currentFrame.size+=packet.byteLength}}break;default:break}if(endLoop&&result.firstKeyFrame){break}startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue}startIndex++;endIndex++}endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="video"&&pusi){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="video";result.video.push(parsed);endLoop=true}}break;default:break}if(endLoop){break}startIndex-=MP2T_PACKET_LENGTH;endIndex-=MP2T_PACKET_LENGTH;continue}startIndex--;endIndex--}};var adjustTimestamp_=function adjustTimestamp_(segmentInfo,baseTimestamp){if(segmentInfo.audio&&segmentInfo.audio.length){var audioBaseTimestamp=baseTimestamp;if(typeof audioBaseTimestamp==="undefined"){audioBaseTimestamp=segmentInfo.audio[0].dts}segmentInfo.audio.forEach(function(info){info.dts=handleRollover(info.dts,audioBaseTimestamp);info.pts=handleRollover(info.pts,audioBaseTimestamp);info.dtsTime=info.dts/PES_TIMESCALE;info.ptsTime=info.pts/PES_TIMESCALE})}if(segmentInfo.video&&segmentInfo.video.length){var videoBaseTimestamp=baseTimestamp;if(typeof videoBaseTimestamp==="undefined"){videoBaseTimestamp=segmentInfo.video[0].dts}segmentInfo.video.forEach(function(info){info.dts=handleRollover(info.dts,videoBaseTimestamp);info.pts=handleRollover(info.pts,videoBaseTimestamp);info.dtsTime=info.dts/PES_TIMESCALE;info.ptsTime=info.pts/PES_TIMESCALE});if(segmentInfo.firstKeyFrame){var frame=segmentInfo.firstKeyFrame;frame.dts=handleRollover(frame.dts,videoBaseTimestamp);frame.pts=handleRollover(frame.pts,videoBaseTimestamp);frame.dtsTime=frame.dts/PES_TIMESCALE;frame.ptsTime=frame.dts/PES_TIMESCALE}}};var inspectAac_=function inspectAac_(bytes){var endLoop=false,audioCount=0,sampleRate=null,timestamp=null,frameSize=0,byteIndex=0,packet;while(bytes.length-byteIndex>=3){var type=probe.aac.parseType(bytes,byteIndex);switch(type){case"timed-metadata":if(bytes.length-byteIndex<10){endLoop=true;break}frameSize=probe.aac.parseId3TagSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break}if(timestamp===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);timestamp=probe.aac.parseAacTimestamp(packet)}byteIndex+=frameSize;break;case"audio":if(bytes.length-byteIndex<7){endLoop=true;break}frameSize=probe.aac.parseAdtsSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break}if(sampleRate===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);sampleRate=probe.aac.parseSampleRate(packet)}audioCount++;byteIndex+=frameSize;break;default:byteIndex++;break}if(endLoop){return null}}if(sampleRate===null||timestamp===null){return null}var audioTimescale=PES_TIMESCALE/sampleRate;var result={
audio:[{type:"audio",dts:timestamp,pts:timestamp},{type:"audio",dts:timestamp+audioCount*1024*audioTimescale,pts:timestamp+audioCount*1024*audioTimescale}]};return result};var inspectTs_=function inspectTs_(bytes){var pmt={pid:null,table:null};var result={};parsePsi_(bytes,pmt);for(var pid in pmt.table){if(pmt.table.hasOwnProperty(pid)){var type=pmt.table[pid];switch(type){case StreamTypes.H264_STREAM_TYPE:result.video=[];parseVideoPes_(bytes,pmt,result);if(result.video.length===0){delete result.video}break;case StreamTypes.ADTS_STREAM_TYPE:result.audio=[];parseAudioPes_(bytes,pmt,result);if(result.audio.length===0){delete result.audio}break;default:break}}}return result};var inspect=function inspect(bytes,baseTimestamp){var isAacData=isLikelyAacData(bytes);var result;if(isAacData){result=inspectAac_(bytes)}else{result=inspectTs_(bytes)}if(!result||!result.audio&&!result.video){return null}adjustTimestamp_(result,baseTimestamp);return result};module.exports={inspect:inspect}},function(module,exports,__webpack_require__){var StreamTypes=__webpack_require__(361);var parsePid=function parsePid(packet){var pid=packet[1]&31;pid<<=8;pid|=packet[2];return pid};var parsePayloadUnitStartIndicator=function parsePayloadUnitStartIndicator(packet){return!!(packet[1]&64)};var parseAdaptionField=function parseAdaptionField(packet){var offset=0;if((packet[3]&48)>>>4>1){offset+=packet[4]+1}return offset};var parseType=function parseType(packet,pmtPid){var pid=parsePid(packet);if(pid===0){return"pat"}else if(pid===pmtPid){return"pmt"}else if(pmtPid){return"pes"}return null};var parsePat=function parsePat(packet){var pusi=parsePayloadUnitStartIndicator(packet);var offset=4+parseAdaptionField(packet);if(pusi){offset+=packet[offset]+1}return(packet[offset+10]&31)<<8|packet[offset+11]};var parsePmt=function parsePmt(packet){var programMapTable={};var pusi=parsePayloadUnitStartIndicator(packet);var payloadOffset=4+parseAdaptionField(packet);if(pusi){payloadOffset+=packet[payloadOffset]+1}if(!(packet[payloadOffset+5]&1)){return}var sectionLength,tableEnd,programInfoLength;sectionLength=(packet[payloadOffset+1]&15)<<8|packet[payloadOffset+2];tableEnd=3+sectionLength-4;programInfoLength=(packet[payloadOffset+10]&15)<<8|packet[payloadOffset+11];var offset=12+programInfoLength;while(offset<tableEnd){var i=payloadOffset+offset;programMapTable[(packet[i+1]&31)<<8|packet[i+2]]=packet[i];offset+=((packet[i+3]&15)<<8|packet[i+4])+5}return programMapTable};var parsePesType=function parsePesType(packet,programMapTable){var pid=parsePid(packet);var type=programMapTable[pid];switch(type){case StreamTypes.H264_STREAM_TYPE:return"video";case StreamTypes.ADTS_STREAM_TYPE:return"audio";case StreamTypes.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var parsePesTime=function parsePesTime(packet){var pusi=parsePayloadUnitStartIndicator(packet);if(!pusi){return null}var offset=4+parseAdaptionField(packet);if(offset>=packet.byteLength){return null}var pes=null;var ptsDtsFlags;ptsDtsFlags=packet[offset+7];if(ptsDtsFlags&192){pes={};pes.pts=(packet[offset+9]&14)<<27|(packet[offset+10]&255)<<20|(packet[offset+11]&254)<<12|(packet[offset+12]&255)<<5|(packet[offset+13]&254)>>>3;pes.pts*=4;pes.pts+=(packet[offset+13]&6)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&64){pes.dts=(packet[offset+14]&14)<<27|(packet[offset+15]&255)<<20|(packet[offset+16]&254)<<12|(packet[offset+17]&255)<<5|(packet[offset+18]&254)>>>3;pes.dts*=4;pes.dts+=(packet[offset+18]&6)>>>1}}return pes};var parseNalUnitType=function parseNalUnitType(type){switch(type){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var videoPacketContainsKeyFrame=function videoPacketContainsKeyFrame(packet){var offset=4+parseAdaptionField(packet);var frameBuffer=packet.subarray(offset);var frameI=0;var frameSyncPoint=0;var foundKeyFrame=false;var nalType;for(;frameSyncPoint<frameBuffer.byteLength-3;frameSyncPoint++){if(frameBuffer[frameSyncPoint+2]===1){frameI=frameSyncPoint+5;break}}while(frameI<frameBuffer.byteLength){switch(frameBuffer[frameI]){case 0:if(frameBuffer[frameI-1]!==0){frameI+=2;break}else if(frameBuffer[frameI-2]!==0){frameI++;break}if(frameSyncPoint+3!==frameI-2){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true}}do{frameI++}while(frameBuffer[frameI]!==1&&frameI<frameBuffer.length);frameSyncPoint=frameI-2;frameI+=3;break;case 1:if(frameBuffer[frameI-1]!==0||frameBuffer[frameI-2]!==0){frameI+=3;break}nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true}frameSyncPoint=frameI-2;frameI+=3;break;default:frameI+=3;break}}frameBuffer=frameBuffer.subarray(frameSyncPoint);frameI-=frameSyncPoint;frameSyncPoint=0;if(frameBuffer&&frameBuffer.byteLength>3){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true}}return foundKeyFrame};module.exports={parseType:parseType,parsePat:parsePat,parsePmt:parsePmt,parsePayloadUnitStartIndicator:parsePayloadUnitStartIndicator,parsePesType:parsePesType,parsePesTime:parsePesTime,videoPacketContainsKeyFrame:videoPacketContainsKeyFrame}},function(module,exports){var ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var parseSyncSafeInteger=function parseSyncSafeInteger(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3]};var percentEncode=function percentEncode(bytes,start,end){var i,result="";for(i=start;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2)}return result};var parseIso88591=function parseIso88591(bytes,start,end){return unescape(percentEncode(bytes,start,end))};var parseId3TagSize=function parseId3TagSize(header,byteIndex){var returnSize=header[byteIndex+6]<<21|header[byteIndex+7]<<14|header[byteIndex+8]<<7|header[byteIndex+9],flags=header[byteIndex+5],footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20}return returnSize+10};var parseAdtsSize=function parseAdtsSize(header,byteIndex){var lowThree=(header[byteIndex+5]&224)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&3<<11;return highTwo|middle|lowThree};var parseType=function parseType(header,byteIndex){if(header[byteIndex]==="I".charCodeAt(0)&&header[byteIndex+1]==="D".charCodeAt(0)&&header[byteIndex+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(header[byteIndex]&255===255&&(header[byteIndex+1]&240)===240){return"audio"}return null};var parseSampleRate=function parseSampleRate(packet){var i=0;while(i+5<packet.length){if(packet[i]!==255||(packet[i+1]&246)!==240){i++;continue}return ADTS_SAMPLING_FREQUENCIES[(packet[i+2]&60)>>>2]}return null};var parseAacTimestamp=function parseAacTimestamp(packet){var frameStart,frameSize,frame,frameHeader;frameStart=10;if(packet[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger(packet.subarray(10,14))}do{frameSize=parseSyncSafeInteger(packet.subarray(frameStart+4,frameStart+8));if(frameSize<1){return null}frameHeader=String.fromCharCode(packet[frameStart],packet[frameStart+1],packet[frameStart+2],packet[frameStart+3]);if(frameHeader==="PRIV"){frame=packet.subarray(frameStart+10,frameStart+frameSize+10);for(var i=0;i<frame.byteLength;i++){if(frame[i]===0){var owner=parseIso88591(frame,0,i);if(owner==="com.apple.streaming.transportStreamTimestamp"){var d=frame.subarray(i+1);var size=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&3;return size}break}}}frameStart+=10;frameStart+=frameSize}while(frameStart<packet.byteLength);return null};module.exports={parseId3TagSize:parseId3TagSize,parseAdtsSize:parseAdtsSize,parseType:parseType,parseSampleRate:parseSampleRate,parseAacTimestamp:parseAacTimestamp}},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _aesDecrypter=__webpack_require__(343);var _binUtils=__webpack_require__(351);var DecrypterWorker=function DecrypterWorker(self){self.onmessage=function(event){var data=event.data;var encrypted=new Uint8Array(data.encrypted.bytes,data.encrypted.byteOffset,data.encrypted.byteLength);var key=new Uint32Array(data.key.bytes,data.key.byteOffset,data.key.byteLength/4);var iv=new Uint32Array(data.iv.bytes,data.iv.byteOffset,data.iv.byteLength/4);new _aesDecrypter.Decrypter(encrypted,key,iv,function(err,bytes){_globalWindow2["default"].postMessage((0,_binUtils.createTransferableMessage)({source:data.source,decrypted:bytes}),[bytes.buffer])})}};exports["default"]=function(self){return new DecrypterWorker(self)};module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var _playlistLoader=__webpack_require__(333);var _playlistLoader2=_interopRequireDefault(_playlistLoader);var noop=function noop(){};var audioTrackKind_=function audioTrackKind_(properties){var kind=properties["default"]?"main":"alternative";if(properties.characteristics&&properties.characteristics.indexOf("public.accessibility.describes-video")>=0){kind="main-desc"}return kind};var stopLoaders=function stopLoaders(segmentLoader,mediaType){segmentLoader.abort();segmentLoader.pause();if(mediaType&&mediaType.activePlaylistLoader){mediaType.activePlaylistLoader.pause();mediaType.activePlaylistLoader=null}};exports.stopLoaders=stopLoaders;var startLoaders=function startLoaders(playlistLoader,mediaType){mediaType.activePlaylistLoader=playlistLoader;playlistLoader.load()};exports.startLoaders=startLoaders;var onGroupChanged=function onGroupChanged(type,settings){return function(){var _settings$segmentLoaders=settings.segmentLoaders;var segmentLoader=_settings$segmentLoaders[type];var mainSegmentLoader=_settings$segmentLoaders.main;var mediaType=settings.mediaTypes[type];var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup(activeTrack);var previousActiveLoader=mediaType.activePlaylistLoader;stopLoaders(segmentLoader,mediaType);if(!activeGroup){return}if(!activeGroup.playlistLoader){if(previousActiveLoader){mainSegmentLoader.resetEverything()}return}segmentLoader.resyncLoader();startLoaders(activeGroup.playlistLoader,mediaType)}};exports.onGroupChanged=onGroupChanged;var onTrackChanged=function onTrackChanged(type,settings){return function(){var _settings$segmentLoaders2=settings.segmentLoaders;var segmentLoader=_settings$segmentLoaders2[type];var mainSegmentLoader=_settings$segmentLoaders2.main;var mediaType=settings.mediaTypes[type];var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup(activeTrack);var previousActiveLoader=mediaType.activePlaylistLoader;stopLoaders(segmentLoader,mediaType);if(!activeGroup){return}if(!activeGroup.playlistLoader){mainSegmentLoader.resetEverything();return}if(previousActiveLoader===activeGroup.playlistLoader){startLoaders(activeGroup.playlistLoader,mediaType);return}if(segmentLoader.track){segmentLoader.track(activeTrack)}segmentLoader.resetEverything();startLoaders(activeGroup.playlistLoader,mediaType)}};exports.onTrackChanged=onTrackChanged;var onError={AUDIO:function AUDIO(type,settings){return function(){var segmentLoader=settings.segmentLoaders[type];var mediaType=settings.mediaTypes[type];var blacklistCurrentPlaylist=settings.blacklistCurrentPlaylist;stopLoaders(segmentLoader,mediaType);var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup();var id=(activeGroup.filter(function(group){return group["default"]})[0]||activeGroup[0]).id;var defaultTrack=mediaType.tracks[id];if(activeTrack===defaultTrack){blacklistCurrentPlaylist({message:"Problem encountered loading the default audio track."});return}_videoJs2["default"].log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var trackId in mediaType.tracks){mediaType.tracks[trackId].enabled=mediaType.tracks[trackId]===defaultTrack}mediaType.onTrackChanged()}},SUBTITLES:function SUBTITLES(type,settings){return function(){var segmentLoader=settings.segmentLoaders[type];var mediaType=settings.mediaTypes[type];_videoJs2["default"].log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");stopLoaders(segmentLoader,mediaType);var track=mediaType.activeTrack();if(track){track.mode="disabled"}mediaType.onTrackChanged()}}};exports.onError=onError;var setupListeners={AUDIO:function AUDIO(type,playlistLoader,settings){if(!playlistLoader){return}var tech=settings.tech;var requestOptions=settings.requestOptions;var segmentLoader=settings.segmentLoaders[type];playlistLoader.on("loadedmetadata",function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);if(!tech.paused()||media.endList&&tech.preload()!=="none"){segmentLoader.load()}});playlistLoader.on("loadedplaylist",function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);if(!tech.paused()){segmentLoader.load()}});playlistLoader.on("error",onError[type](type,settings))},SUBTITLES:function SUBTITLES(type,playlistLoader,settings){var tech=settings.tech;var requestOptions=settings.requestOptions;var segmentLoader=settings.segmentLoaders[type];var mediaType=settings.mediaTypes[type];playlistLoader.on("loadedmetadata",function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);segmentLoader.track(mediaType.activeTrack());if(!tech.paused()||media.endList&&tech.preload()!=="none"){segmentLoader.load()}});playlistLoader.on("loadedplaylist",function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);if(!tech.paused()){segmentLoader.load()}});playlistLoader.on("error",onError[type](type,settings))}};exports.setupListeners=setupListeners;var initialize={AUDIO:function AUDIO(type,settings){var mode=settings.mode;var hls=settings.hls;var segmentLoader=settings.segmentLoaders[type];var withCredentials=settings.requestOptions.withCredentials;var mediaGroups=settings.master.mediaGroups;var _settings$mediaTypes$type=settings.mediaTypes[type];var groups=_settings$mediaTypes$type.groups;var tracks=_settings$mediaTypes$type.tracks;if(!mediaGroups[type]||Object.keys(mediaGroups[type]).length===0||mode!=="html5"){mediaGroups[type]={main:{"default":{"default":true}}}}for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[]}for(var variantLabel in mediaGroups[type][groupId]){var properties=mediaGroups[type][groupId][variantLabel];var playlistLoader=undefined;if(properties.resolvedUri){playlistLoader=new _playlistLoader2["default"](properties.resolvedUri,hls,withCredentials)}else{playlistLoader=null}properties=_videoJs2["default"].mergeOptions({id:variantLabel,playlistLoader:playlistLoader},properties);setupListeners[type](type,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==="undefined"){var track=new _videoJs2["default"].AudioTrack({id:variantLabel,kind:audioTrackKind_(properties),enabled:false,language:properties.language,"default":properties["default"],label:variantLabel});tracks[variantLabel]=track}}}segmentLoader.on("error",onError[type](type,settings))},SUBTITLES:function SUBTITLES(type,settings){var tech=settings.tech;var hls=settings.hls;var segmentLoader=settings.segmentLoaders[type];var withCredentials=settings.requestOptions.withCredentials;var mediaGroups=settings.master.mediaGroups;var _settings$mediaTypes$type2=settings.mediaTypes[type];var groups=_settings$mediaTypes$type2.groups;var tracks=_settings$mediaTypes$type2.tracks;for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[]}for(var variantLabel in mediaGroups[type][groupId]){if(mediaGroups[type][groupId][variantLabel].forced){continue}var properties=mediaGroups[type][groupId][variantLabel];properties=_videoJs2["default"].mergeOptions({id:variantLabel,playlistLoader:new _playlistLoader2["default"](properties.resolvedUri,hls,withCredentials)},properties);setupListeners[type](type,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==="undefined"){var track=tech.addRemoteTextTrack({id:variantLabel,kind:"subtitles",enabled:false,language:properties.language,label:variantLabel},false).track;tracks[variantLabel]=track}}}segmentLoader.on("error",onError[type](type,settings))},"CLOSED-CAPTIONS":function CLOSEDCAPTIONS(type,settings){var tech=settings.tech;var mediaGroups=settings.master.mediaGroups;var _settings$mediaTypes$type3=settings.mediaTypes[type];var groups=_settings$mediaTypes$type3.groups;var tracks=_settings$mediaTypes$type3.tracks;for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[]}for(var variantLabel in mediaGroups[type][groupId]){var properties=mediaGroups[type][groupId][variantLabel];if(!properties.instreamId.match(/CC\d/)){continue}groups[groupId].push(_videoJs2["default"].mergeOptions({id:variantLabel},properties));if(typeof tracks[variantLabel]==="undefined"){var track=tech.addRemoteTextTrack({id:properties.instreamId,kind:"captions",enabled:false,language:properties.language,label:variantLabel},false).track;tracks[variantLabel]=track}}}}};exports.initialize=initialize;var activeGroup=function activeGroup(type,settings){return function(track){var masterPlaylistLoader=settings.masterPlaylistLoader;var groups=settings.mediaTypes[type].groups;var media=masterPlaylistLoader.media();if(!media){return null}var variants=null;if(media.attributes[type]){variants=groups[media.attributes[type]]}variants=variants||groups.main;if(typeof track==="undefined"){return variants}if(track===null){return null}return variants.filter(function(props){return props.id===track.id})[0]||null}};exports.activeGroup=activeGroup;var activeTrack={AUDIO:function AUDIO(type,settings){return function(){var tracks=settings.mediaTypes[type].tracks;for(var id in tracks){if(tracks[id].enabled){return tracks[id]}}return null}},SUBTITLES:function SUBTITLES(type,settings){return function(){var tracks=settings.mediaTypes[type].tracks;for(var id in tracks){if(tracks[id].mode==="showing"){return tracks[id]}}return null}}};exports.activeTrack=activeTrack;var setupMediaGroups=function setupMediaGroups(settings){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(type){initialize[type](type,settings)});var mediaTypes=settings.mediaTypes;var masterPlaylistLoader=settings.masterPlaylistLoader;var tech=settings.tech;var hls=settings.hls;["AUDIO","SUBTITLES"].forEach(function(type){mediaTypes[type].activeGroup=activeGroup(type,settings);mediaTypes[type].activeTrack=activeTrack[type](type,settings);mediaTypes[type].onGroupChanged=onGroupChanged(type,settings);mediaTypes[type].onTrackChanged=onTrackChanged(type,settings)});var audioGroup=mediaTypes.AUDIO.activeGroup();var groupId=(audioGroup.filter(function(group){return group["default"]})[0]||audioGroup[0]).id;mediaTypes.AUDIO.tracks[groupId].enabled=true;mediaTypes.AUDIO.onTrackChanged();masterPlaylistLoader.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(type){return mediaTypes[type].onGroupChanged()})});var onAudioTrackChanged=function onAudioTrackChanged(){mediaTypes.AUDIO.onTrackChanged();tech.trigger({type:"usage",name:"hls-audio-change"})};tech.audioTracks().addEventListener("change",onAudioTrackChanged);tech.remoteTextTracks().addEventListener("change",mediaTypes.SUBTITLES.onTrackChanged);hls.on("dispose",function(){tech.audioTracks().removeEventListener("change",onAudioTrackChanged);tech.remoteTextTracks().removeEventListener("change",mediaTypes.SUBTITLES.onTrackChanged)});tech.clearTracks("audio");for(var id in mediaTypes.AUDIO.tracks){tech.audioTracks().addTrack(mediaTypes.AUDIO.tracks[id])}};exports.setupMediaGroups=setupMediaGroups;var createMediaTypes=function createMediaTypes(){var mediaTypes={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(type){mediaTypes[type]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,onGroupChanged:noop,onTrackChanged:noop}});return mediaTypes};exports.createMediaTypes=createMediaTypes},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _playlistJs=__webpack_require__(341);var enableFunction=function enableFunction(loader,playlistUri,changePlaylistFn){return function(enable){var playlist=loader.master.playlists[playlistUri];var incompatible=(0,_playlistJs.isIncompatible)(playlist);var currentlyEnabled=(0,_playlistJs.isEnabled)(playlist);if(typeof enable==="undefined"){return currentlyEnabled}if(enable){delete playlist.disabled}else{playlist.disabled=true}if(enable!==currentlyEnabled&&!incompatible){changePlaylistFn();if(enable){loader.trigger("renditionenabled")}else{loader.trigger("renditiondisabled")}}return enable}};var Representation=function Representation(hlsHandler,playlist,id){_classCallCheck(this,Representation);var fastChangeFunction=hlsHandler.masterPlaylistController_.fastQualityChange_.bind(hlsHandler.masterPlaylistController_);if(playlist.attributes.RESOLUTION){var resolution=playlist.attributes.RESOLUTION;this.width=resolution.width;this.height=resolution.height}this.bandwidth=playlist.attributes.BANDWIDTH;this.id=id;this.enabled=enableFunction(hlsHandler.playlists,playlist.uri,fastChangeFunction)};var renditionSelectionMixin=function renditionSelectionMixin(hlsHandler){var playlists=hlsHandler.playlists;hlsHandler.representations=function(){return playlists.master.playlists.filter(function(media){return!(0,_playlistJs.isIncompatible)(media)}).map(function(e,i){return new Representation(hlsHandler,e,e.uri)})}};exports["default"]=renditionSelectionMixin;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _globalWindow=__webpack_require__(254);var _globalWindow2=_interopRequireDefault(_globalWindow);var _ranges=__webpack_require__(391);var _ranges2=_interopRequireDefault(_ranges);var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var timerCancelEvents=["seeking","seeked","pause","playing","error"];var PlaybackWatcher=function(){function PlaybackWatcher(options){var _this=this;_classCallCheck(this,PlaybackWatcher);this.tech_=options.tech;this.seekable=options.seekable;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;if(options.debug){this.logger_=_videoJs2["default"].log.bind(_videoJs2["default"],"playback-watcher ->")}this.logger_("initialize");var canPlayHandler=function canPlayHandler(){return _this.monitorCurrentTime_()};var waitingHandler=function waitingHandler(){return _this.techWaiting_()};var cancelTimerHandler=function cancelTimerHandler(){return _this.cancelTimer_()};var fixesBadSeeksHandler=function fixesBadSeeksHandler(){return _this.fixesBadSeeks_()};this.tech_.on("seekablechanged",fixesBadSeeksHandler);this.tech_.on("waiting",waitingHandler);this.tech_.on(timerCancelEvents,cancelTimerHandler);this.tech_.on("canplay",canPlayHandler);this.dispose=function(){_this.logger_("dispose");_this.tech_.off("seekablechanged",fixesBadSeeksHandler);_this.tech_.off("waiting",waitingHandler);_this.tech_.off(timerCancelEvents,cancelTimerHandler);_this.tech_.off("canplay",canPlayHandler);if(_this.checkCurrentTimeTimeout_){_globalWindow2["default"].clearTimeout(_this.checkCurrentTimeTimeout_)}_this.cancelTimer_()}}_createClass(PlaybackWatcher,[{key:"monitorCurrentTime_",value:function monitorCurrentTime_(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){_globalWindow2["default"].clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=_globalWindow2["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function checkCurrentTime_(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(this.lastRecordedTime===currentTime&&(!buffered.length||currentTime+_ranges2["default"].SAFE_TIME_DELTA>=buffered.end(buffered.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&currentTime===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(currentTime===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=currentTime}}},{key:"cancelTimer_",value:function cancelTimer_(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function fixesBadSeeks_(){var seeking=this.tech_.seeking();var seekable=this.seekable();var currentTime=this.tech_.currentTime();var seekTo=undefined;if(seeking&&this.afterSeekableWindow_(seekable,currentTime)){var seekableEnd=seekable.end(seekable.length-1);seekTo=seekableEnd}if(seeking&&this.beforeSeekableWindow_(seekable,currentTime)){var seekableStart=seekable.start(0);seekTo=seekableStart+_ranges2["default"].SAFE_TIME_DELTA}if(typeof seekTo!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+currentTime+" with "+("seekable range "+_ranges2["default"].printableRange(seekable)+". Seeking to ")+(seekTo+"."));this.tech_.setCurrentTime(seekTo);return true}return false}},{key:"waiting_",value:function waiting_(){if(this.techWaiting_()){return}var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();var currentRange=_ranges2["default"].findRange(buffered,currentTime);if(currentRange.length&&currentTime+3<=currentRange.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(currentTime);this.logger_("Stopped at "+currentTime+" while inside a buffered region "+("["+currentRange.start(0)+" -> "+currentRange.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function techWaiting_(){var seekable=this.seekable();var currentTime=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(seekable,currentTime)){var livePoint=seekable.end(seekable.length-1);this.logger_("Fell out of live window at time "+currentTime+". Seeking to "+("live point (seekable end) "+livePoint));this.cancelTimer_();this.tech_.setCurrentTime(livePoint);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var buffered=this.tech_.buffered();var nextRange=_ranges2["default"].findNextRange(buffered,currentTime);if(this.videoUnderflow_(nextRange,buffered,currentTime)){this.cancelTimer_();this.tech_.setCurrentTime(currentTime);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(nextRange.length>0){var difference=nextRange.start(0)-currentTime;this.logger_("Stopped at "+currentTime+", setting timer for "+difference+", seeking "+("to "+nextRange.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),difference*1e3,currentTime);return true}return false}},{key:"afterSeekableWindow_",value:function afterSeekableWindow_(seekable,currentTime){if(!seekable.length){return false}if(currentTime>seekable.end(seekable.length-1)+_ranges2["default"].SAFE_TIME_DELTA){return true}return false}},{key:"beforeSeekableWindow_",value:function beforeSeekableWindow_(seekable,currentTime){if(seekable.length&&seekable.start(0)>0&&currentTime<seekable.start(0)-_ranges2["default"].SAFE_TIME_DELTA){return true}return false}},{key:"videoUnderflow_",value:function videoUnderflow_(nextRange,buffered,currentTime){if(nextRange.length===0){var gap=this.gapFromVideoUnderflow_(buffered,currentTime);if(gap){this.logger_("Encountered a gap in video from "+gap.start+" to "+gap.end+". "+("Seeking to current time "+currentTime));return true}}return false}},{key:"skipTheGap_",value:function skipTheGap_(scheduledCurrentTime){var buffered=this.tech_.buffered();var currentTime=this.tech_.currentTime();var nextRange=_ranges2["default"].findNextRange(buffered,currentTime);this.cancelTimer_();if(nextRange.length===0||currentTime!==scheduledCurrentTime){return}this.logger_("skipTheGap_:","currentTime:",currentTime,"scheduled currentTime:",scheduledCurrentTime,"nextRange start:",nextRange.start(0));this.tech_.setCurrentTime(nextRange.start(0)+_ranges2["default"].TIME_FUDGE_FACTOR);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function gapFromVideoUnderflow_(buffered,currentTime){var gaps=_ranges2["default"].findGaps(buffered);for(var i=0;i<gaps.length;i++){var start=gaps.start(i);var end=gaps.end(i);if(currentTime-start<4&&currentTime-start>2){return{start:start,end:end}}}return null}},{key:"logger_",value:function logger_(){}}]);return PlaybackWatcher}();exports["default"]=PlaybackWatcher;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _videoJs=__webpack_require__(220);var _videoJs2=_interopRequireDefault(_videoJs);var defaultOptions={errorInterval:30,getSource:function getSource(next){var tech=this.tech({IWillNotUseThisInPlugins:true});var sourceObj=tech.currentSource_;return next(sourceObj)}};var initPlugin=function initPlugin(player,options){var lastCalled=0;var seekTo=0;var localOptions=_videoJs2["default"].mergeOptions(defaultOptions,options);player.ready(function(){player.trigger({type:"usage",name:"hls-error-reload-initialized"})});var loadedMetadataHandler=function loadedMetadataHandler(){if(seekTo){player.currentTime(seekTo)}};var setSource=function setSource(sourceObj){if(sourceObj===null||sourceObj===undefined){return}seekTo=player.duration()!==Infinity&&player.currentTime()||0;player.one("loadedmetadata",loadedMetadataHandler);player.src(sourceObj);player.trigger({type:"usage",name:"hls-error-reload"});player.play()};var errorHandler=function errorHandler(){if(Date.now()-lastCalled<localOptions.errorInterval*1e3){player.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!localOptions.getSource||typeof localOptions.getSource!=="function"){_videoJs2["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}lastCalled=Date.now();return localOptions.getSource.call(player,setSource)};var cleanupEvents=function cleanupEvents(){player.off("loadedmetadata",loadedMetadataHandler);player.off("error",errorHandler);player.off("dispose",cleanupEvents)};var reinitPlugin=function reinitPlugin(newOptions){
cleanupEvents();initPlugin(player,newOptions)};player.on("error",errorHandler);player.on("dispose",cleanupEvents);player.reloadSourceOnError=reinitPlugin};var reloadSourceOnError=function reloadSourceOnError(options){initPlugin(this,options)};exports["default"]=reloadSourceOnError;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _Object$keys=__webpack_require__(123)["default"];var _Array$from=__webpack_require__(1)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _linkedinPlayerjs=__webpack_require__(407);var _helpersVideojsErrors=__webpack_require__(200);var _helpersVideojsErrors2=_interopRequireDefault(_helpersVideojsErrors);var _helpersVideojsAdapterEvents=__webpack_require__(181);var _helpersVideojsAdapterEvents2=_interopRequireDefault(_helpersVideojsAdapterEvents);var EVENTS_ARRAY=_Object$keys(_helpersVideojsAdapterEvents2["default"]).map(function(key){return _helpersVideojsAdapterEvents2["default"][key]});var EVENTS_MERGED=EVENTS_ARRAY.concat(_linkedinPlayerjs.EVENTS.all().filter(function(event){return EVENTS_ARRAY.indexOf(event)<0}));var VideoJSAdapter=function(){function VideoJSAdapter(player,controlTracker){_classCallCheck(this,VideoJSAdapter);this.player=player;this.receiver=new _linkedinPlayerjs.Receiver(EVENTS_MERGED);this.controlTracker=controlTracker;this.bindEvents();this.bindMethods()}_createClass(VideoJSAdapter,[{key:"bindEvents",value:function bindEvents(){var _this=this;var receiver=this.receiver;var player=this.player;var controlTracker=this.controlTracker;this.timeElapsed=this.player.currentTime();player.on(_helpersVideojsAdapterEvents2["default"].PAUSE,function(){receiver.emit(_helpersVideojsAdapterEvents2["default"].PAUSE,{controlName:controlTracker.controlName});controlTracker.reset()});player.on(_helpersVideojsAdapterEvents2["default"].PLAY,function(){receiver.emit(_helpersVideojsAdapterEvents2["default"].PLAY,{controlName:controlTracker.controlName});controlTracker.reset()});player.on(_helpersVideojsAdapterEvents2["default"].VOLUME_CHANGE,function(){var muted=player.muted();var data={controlName:controlTracker.controlName,volume:player.volume()};if(muted){receiver.emit(_helpersVideojsAdapterEvents2["default"].MUTE,data);_this.hasBeenMuted=true}else if(!muted&&_this.hasBeenMuted){receiver.emit(_helpersVideojsAdapterEvents2["default"].UNMUTE,data);_this.hasBeenMuted=false}else{receiver.emit(_helpersVideojsAdapterEvents2["default"].VOLUME_CHANGE,data)}controlTracker.reset()});player.on("seeking",function(){if(!_this.seeking){_this.seeking=true;_this.previousElapsedTime=_this.timeElapsed}});player.on(_helpersVideojsAdapterEvents2["default"].SEEKED,function(){_this.seeking=false;_this.receiver.emit(_helpersVideojsAdapterEvents2["default"].SEEKED,_this.previousElapsedTime)});player.on(_helpersVideojsAdapterEvents2["default"].TIME_UPDATE,function(){var seconds=player.currentTime();var duration=player.duration();if(!seconds||!duration){return}var value={seconds:seconds,duration:duration};_this.timeElapsed=seconds;receiver.emit(_helpersVideojsAdapterEvents2["default"].TIME_UPDATE,value)});player.on(_helpersVideojsAdapterEvents2["default"].ENDED,function(){receiver.emit(_helpersVideojsAdapterEvents2["default"].ENDED)});player.on(_helpersVideojsAdapterEvents2["default"].ERROR,function(){var videoError=player.error();var errorData={errorType:_helpersVideojsErrors2["default"][videoError.code],errorMsg:videoError.message};_this.receiver.emit(_helpersVideojsAdapterEvents2["default"].ERROR,errorData)});player.on(_linkedinPlayerjs.EVENTS.PROGRESS,function(){receiver.emit(_linkedinPlayerjs.EVENTS.PROGRESS,{percent:player.bufferedPercent()})});this.bindMediaBitrateChangedEvent()}},{key:"bindMediaBitrateChangedEvent",value:function bindMediaBitrateChangedEvent(){var _this2=this;var player=this.player;var segmentMetadataTrack=_Array$from(player.textTracks()||[]).filter(function(track){return track.label==="segment-metadata"})[0];if(segmentMetadataTrack){(function(){var hls=player.tech({IWillNotUseThisInPlugins:true}).hls;var previousPlaylist=undefined;if(!hls){throw new Error("hls plugin is not accessible on hls source")}segmentMetadataTrack.on("cuechange",function(){var activeCue=segmentMetadataTrack.activeCues[0];if(activeCue&&activeCue.value&&activeCue.value.playlist!==previousPlaylist){var newSegmentDuration=Math.floor((activeCue.value.end-activeCue.value.start)*1e3);var _hls$selectPlaylist=hls.selectPlaylist();var attributes=_hls$selectPlaylist.attributes;var newBitrate=attributes.BANDWIDTH;var _ref=attributes.CODECS?attributes.CODECS.split(",").map(function(item){return item.trim()}):[];var _ref2=_slicedToArray(_ref,2);var videoCodec=_ref2[0];var audioCodec=_ref2[1];var encodedDisplaySize=attributes.RESOLUTION;_this2.emit(_helpersVideojsAdapterEvents2["default"].BITRATE_CHANGED,{audioCodec:audioCodec,newBitrate:newBitrate,newSegmentDuration:newSegmentDuration,videoCodec:videoCodec,encodedDisplaySize:encodedDisplaySize,frameRate:60,targetSegmentDuration:6e3});previousPlaylist=activeCue.value.playlist}})})()}}},{key:"bindMethods",value:function bindMethods(){var receiver=this.receiver;var player=this.player;receiver.on(_linkedinPlayerjs.METHODS.PLAY,function(){player.play()});receiver.on(_linkedinPlayerjs.METHODS.PAUSE,function(){player.pause()});receiver.on(_linkedinPlayerjs.METHODS.GETPAUSED,function(callback){callback(player.paused())});receiver.on(_linkedinPlayerjs.METHODS.GETCURRENTTIME,function(callback){callback(player.currentTime())});receiver.on(_linkedinPlayerjs.METHODS.SETCURRENTTIME,function(value){player.currentTime(value)});receiver.on(_linkedinPlayerjs.METHODS.GETDURATION,function(callback){callback(player.duration())});receiver.on(_linkedinPlayerjs.METHODS.GETVOLUME,function(callback){callback(player.volume()*100)});receiver.on(_linkedinPlayerjs.METHODS.SETVOLUME,function(value){player.volume(value/100)});receiver.on(_linkedinPlayerjs.METHODS.MUTE,function(){player.muted(true)});receiver.on(_linkedinPlayerjs.METHODS.UNMUTE,function(){player.muted(false)});receiver.on(_linkedinPlayerjs.METHODS.GETMUTED,function(callback){callback(player.muted()||player.volume()===0)});receiver.on(_linkedinPlayerjs.METHODS.GETLOOP,function(callback){callback(player.loop())});receiver.on(_linkedinPlayerjs.METHODS.SETLOOP,function(value){player.loop(value)})}},{key:"isEventSupported",value:function isEventSupported(eventName){var supported=this.receiver.supported;return supported.events&&supported.events.indexOf(eventName)>-1}},{key:"registerEvent",value:function registerEvent(eventName){if(!this.isEventSupported(eventName)){var supported=this.receiver.supported;supported.events.push(eventName)}}},{key:"emit",value:function emit(eventName,eventData){if(!this.isEventSupported(eventName)){throw new Error("VideoJSAdapter: "+eventName+" not supported. Please use registerEvent first!")}if(typeof eventData==="string"){eventData={controlName:eventData}}this.receiver.emit(eventName,eventData)}},{key:"ready",value:function ready(){this.receiver.ready()}}]);return VideoJSAdapter}();exports["default"]=VideoJSAdapter;module.exports=exports["default"]},function(module,exports,__webpack_require__){(function(window){var playerjs={};playerjs.DEBUG=false;playerjs.VERSION="0.0.12";playerjs.CONTEXT="player.js";playerjs.POST_MESSAGE=!!window.postMessage;playerjs.origin=function(url){if(url.substr(0,2)==="//"){url=window.location.protocol+url}return url.split("/").slice(0,3).join("/")};playerjs.addEvent=function(elem,type,eventHandle){if(!elem){return}if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}else{elem["on "+type]=eventHandle}};playerjs.removeEvent=function(elem,type,eventHandle){if(!elem){return}if(elem.removeEventListener){elem.removeEventListener(type,eventHandle,false)}else if(elem.detachEvent){elem.detachEvent("on"+type,eventHandle)}else{elem["on"+type]=null}};playerjs.log=function(){playerjs.log.history=playerjs.log.history||[];playerjs.log.history.push(arguments);if(window.console&&playerjs.DEBUG){window.console.log(Array.prototype.slice.call(arguments))}};playerjs.isString=function(obj){return Object.prototype.toString.call(obj)==="[object String]"};playerjs.isObject=function(obj){return Object.prototype.toString.call(obj)==="[object Object]"};playerjs.isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};playerjs.isNone=function(obj){return obj===null||obj===undefined};playerjs.has=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)};playerjs.indexOf=function(array,item){if(array==null){return-1}var i=0,length=array.length;if(Array.prototype.IndexOf&&array.indexOf===Array.prototype.IndexOf){return array.indexOf(item)}for(;i<length;i++){if(array[i]===item){return i}}return-1};playerjs.assert=function(test,msg){if(!test){throw msg||"Player.js Assert Failed"}};playerjs.Keeper=function(){this.init()};playerjs.Keeper.prototype.init=function(){this.data={}};playerjs.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})};playerjs.Keeper.prototype.has=function(event,id){if(!this.data.hasOwnProperty(event)){return false}if(playerjs.isNone(id)){return true}var events=this.data[event];for(var i=0;i<events.length;i++){if(events[i].id===id){return true}}return false};playerjs.Keeper.prototype.add=function(id,event,cb,ctx,one){var d={id:id,event:event,cb:cb,ctx:ctx,one:one};if(this.has(event)){this.data[event].push(d)}else{this.data[event]=[d]}};playerjs.Keeper.prototype.execute=function(event,id,data,ctx){if(!this.has(event,id)){return false}var keep=[],execute=[];for(var i=0;i<this.data[event].length;i++){var d=this.data[event][i];if(playerjs.isNone(id)||!playerjs.isNone(id)&&d.id===id){execute.push({cb:d.cb,ctx:d.ctx?d.ctx:ctx,data:data});if(d.one===false){keep.push(d)}}else{keep.push(d)}}if(keep.length===0){delete this.data[event]}else{this.data[event]=keep}for(var n=0;n<execute.length;n++){var e=execute[n];e.cb.call(e.ctx,e.data)}};playerjs.Keeper.prototype.on=function(id,event,cb,ctx){this.add(id,event,cb,ctx,false)};playerjs.Keeper.prototype.one=function(id,event,cb,ctx){this.add(id,event,cb,ctx,true)};playerjs.Keeper.prototype.off=function(event,cb){var listeners=[];if(!this.data.hasOwnProperty(event)){return listeners}var keep=[];for(var i=0;i<this.data[event].length;i++){var data=this.data[event][i];if(!playerjs.isNone(cb)&&data.cb!==cb){keep.push(data)}else if(!playerjs.isNone(data.id)){listeners.push(data.id)}}if(keep.length===0){delete this.data[event]}else{this.data[event]=keep}return listeners};playerjs.Player=function(elem,options){if(!(this instanceof playerjs.Player)){return new playerjs.Player(elem,options)}this.init(elem,options)};playerjs.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"};playerjs.EVENTS.all=function(){var all=[];for(var key in playerjs.EVENTS){if(playerjs.has(playerjs.EVENTS,key)&&playerjs.isString(playerjs.EVENTS[key])){all.push(playerjs.EVENTS[key])}}return all};playerjs.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"};playerjs.METHODS.all=function(){var all=[];for(var key in playerjs.METHODS){if(playerjs.has(playerjs.METHODS,key)&&playerjs.isString(playerjs.METHODS[key])){all.push(playerjs.METHODS[key])}}return all};playerjs.READIED=[];playerjs.Player.prototype.init=function(elem,options){var self=this;if(playerjs.isString(elem)){elem=document.getElementById(elem)}this.elem=elem;this.origin=playerjs.origin(elem.src);this.keeper=new playerjs.Keeper;this.isReady=false;this.queue=[];this.events=playerjs.EVENTS.all();this.methods=playerjs.METHODS.all();this._boundReceive=function(e){this.receive(e)}.bind(this);if(playerjs.POST_MESSAGE){playerjs.addEvent(window,"message",this._boundReceive)}else{playerjs.log("Post Message is not Available.")}if(playerjs.indexOf(playerjs.READIED,elem.src)>-1){self.loaded=true}else{this.elem.onload=function(){self.loaded=true}}};playerjs.Player.prototype.send=function(data,callback,ctx){data.context=playerjs.CONTEXT;data.version=playerjs.VERSION;if(callback){if(!this.keeper){return false}var id=this.keeper.getUUID();data.listener=id;this.keeper.one(id,data.method,callback,ctx)}if(!this.isReady&&data.value!=="ready"){playerjs.log("Player.queue",data);this.queue.push(data);return false}playerjs.log("Player.send",data,this.origin);if(this.loaded===true&&this.elem.contentWindow){this.elem.contentWindow.postMessage(JSON.stringify(data),this.origin)}return true};playerjs.Player.prototype.receive=function(e){playerjs.log("Player.receive",e);if(e.origin!==this.origin){return false}var data;try{data=JSON.parse(e.data)}catch(err){return false}if(data.context!==playerjs.CONTEXT){return false}if(data.event==="ready"&&data.value&&data.value.src===this.elem.src){this.ready(data)}if(this.keeper&&this.keeper.has(data.event,data.listener)){this.keeper.execute(data.event,data.listener,data.value,this)}};playerjs.Player.prototype.ready=function(data){if(this.isReady===true){return false}if(data.value.events){this.events=data.value.events}if(data.value.methods){this.methods=data.value.methods}this.isReady=true;this.loaded=true;for(var i=0;i<this.queue.length;i++){var obj=this.queue[i];playerjs.log("Player.dequeue",obj);if(data.event==="ready"){this.keeper.execute(obj.event,obj.listener,true,this)}this.send(obj)}this.queue=[]};playerjs.Player.prototype.on=function(event,callback,ctx){if(!this.keeper){return false}var id=this.keeper.getUUID();if(event==="ready"){this.keeper.one(id,event,callback,ctx)}else{this.keeper.on(id,event,callback,ctx)}this.send({method:"addEventListener",value:event,listener:id});return true};playerjs.Player.prototype.off=function(event,callback){if(!this.keeper){return false}var listeners=this.keeper.off(event,callback);playerjs.log("Player.off",listeners);if(listeners.length>0){for(var i in listeners){this.send({method:"removeEventListener",value:event,listener:listeners[i]});return true}}return false};playerjs.Player.prototype.supports=function(evtOrMethod,names){playerjs.assert(playerjs.indexOf(["method","event"],evtOrMethod)>-1,'evtOrMethod needs to be either "event" or "method" got '+evtOrMethod);names=playerjs.isArray(names)?names:[names];var all=evtOrMethod==="event"?this.events:this.methods;for(var i=0;i<names.length;i++){if(playerjs.indexOf(all,names[i])===-1){return false}}return true};playerjs.Player.prototype.destroy=function(){playerjs.removeEvent(window,"message",this._boundReceive);try{delete this.origin;delete this.keeper;delete this.isReady;delete this.queue;delete this.events;delete this.methods}catch(err){playerjs.log("Error deleting Player properties",err)}};function createPrototypeFunction(name){return function(){var data={method:name};var args=Array.prototype.slice.call(arguments);if(/^get/.test(name)){playerjs.assert(args.length>0,"Get methods require a callback.");args.unshift(data)}else{if(/^set/.test(name)){playerjs.assert(args.length!==0,"Set methods require a value.");data.value=args[0]}args=[data]}this.send.apply(this,args)}}for(var i=0,l=playerjs.METHODS.all().length;i<l;i++){var methodName=playerjs.METHODS.all()[i];if(!playerjs.Player.prototype.hasOwnProperty(methodName)){playerjs.Player.prototype[methodName]=createPrototypeFunction(methodName)}}playerjs.addEvent(window,"message",function(e){var data;try{data=JSON.parse(e.data)}catch(err){return false}if(data.context!==playerjs.CONTEXT){return false}if(data.event==="ready"&&data.value&&data.value.src){playerjs.READIED.push(data.value.src)}});playerjs.Receiver=function(events,methods){this.init(events,methods)};playerjs.Receiver.prototype.init=function(events,methods){var self=this;this.isReady=false;this.cachedError=false;this.origin=playerjs.origin(document.referrer);this.methods={};this.supported={events:events?events:playerjs.EVENTS.all(),methods:methods?methods:playerjs.METHODS.all()};this.eventListeners={};this.reject=!(window.self!==window.top&&playerjs.POST_MESSAGE);if(!this.reject){playerjs.addEvent(window,"message",function(e){self.receive(e)})}};playerjs.Receiver.prototype.receive=function(e){if(e.origin!==this.origin){return false}var data={};if(playerjs.isObject(e.data)){data=e.data}else{try{data=window.JSON.parse(e.data)}catch(err){playerjs.log("JSON Parse Error",err)}}playerjs.log("Receiver.receive",e,data);if(!data.method){return false}if(data.context!==playerjs.CONTEXT){return false}if(playerjs.indexOf(playerjs.METHODS.all(),data.method)===-1){this.emit("error",{code:2,msg:'Invalid Method "'+data.method+'"'});return false}var listener=!playerjs.isNone(data.listener)?data.listener:null;if(data.method==="addEventListener"){if(this.eventListeners.hasOwnProperty(data.value)){if(playerjs.indexOf(this.eventListeners[data.value],listener)===-1){this.eventListeners[data.value].push(listener)}}else{this.eventListeners[data.value]=[listener]}if(data.value==="ready"&&this.isReady){this.ready()}else if(data.value==="error"&&this.cachedError){this.error()}}else if(data.method==="removeEventListener"){if(this.eventListeners.hasOwnProperty(data.value)){var index=playerjs.indexOf(this.eventListeners[data.value],listener);if(index>-1){this.eventListeners[data.value].splice(index,1)}if(this.eventListeners[data.value].length===0){delete this.eventListeners[data.value]}}}else{this.get(data.method,data.value,listener)}};playerjs.Receiver.prototype.get=function(method,value,listener){var self=this;if(!this.methods.hasOwnProperty(method)){this.emit("error",{code:3,msg:'Method Not Supported"'+method+'"'});return false}var func=this.methods[method];if(method.substr(0,3)==="get"){var callback=function callback(val){self.send(method,val,listener)};func.call(this,callback)}else{func.call(this,value)}};playerjs.Receiver.prototype.on=function(event,callback){this.methods[event]=callback};playerjs.Receiver.prototype.send=function(event,value,listener){playerjs.log("Receiver.send",event,value,listener);if(this.reject){playerjs.log("Receiver.send.reject",event,value,listener);return false}var data={context:playerjs.CONTEXT,version:playerjs.VERSION,event:event};if(!playerjs.isNone(value)){data.value=value}if(!playerjs.isNone(listener)){data.listener=listener}var msg=JSON.stringify(data);window.parent.postMessage(msg,this.origin===""?"*":this.origin)};playerjs.Receiver.prototype.emit=function(event,value){if(!this.eventListeners.hasOwnProperty(event)){if(event==="error"){this.cachedError=value||true}return false}playerjs.log("Instance.emit",event,value,this.eventListeners[event]);for(var i=0;i<this.eventListeners[event].length;i++){var listener=this.eventListeners[event][i];this.send(event,value,listener)}return true};playerjs.Receiver.prototype.ready=function(){playerjs.log("Receiver.ready");this.isReady=true;var data={src:window.location.toString(),events:this.supported.events,methods:this.supported.methods};if(!this.emit("ready",data)){this.send("ready",data)}};playerjs.Receiver.prototype.error=function(){playerjs.log("Receiver.error");var data=this.cachedError;if(!this.emit("error",data)){this.send("error",data)}this.cachedError=false};playerjs.HTML5Adapter=function(video){if(!(this instanceof playerjs.HTML5Adapter)){return new playerjs.HTML5Adapter(video)}this.init(video)};playerjs.HTML5Adapter.prototype.init=function(video){playerjs.assert(video,"playerjs.VideoJSReceiver requires a video element");var receiver=this.receiver=new playerjs.Receiver;video.addEventListener("playing",function(){receiver.emit("play")});video.addEventListener("pause",function(){receiver.emit("pause")});video.addEventListener("ended",function(){receiver.emit("ended")});video.addEventListener("timeupdate",function(){receiver.emit("timeupdate",{seconds:video.currentTime,duration:video.duration})});video.addEventListener("progress",function(){receiver.emit("buffered",{percent:video.buffered.length})});receiver.on("play",function(){video.play()});receiver.on("pause",function(){video.pause()});receiver.on("getPaused",function(callback){callback(video.paused)});receiver.on("getCurrentTime",function(callback){callback(video.currentTime)});receiver.on("setCurrentTime",function(value){video.currentTime=value});receiver.on("getDuration",function(callback){callback(video.duration)});receiver.on("getVolume",function(callback){callback(video.volume*100)});receiver.on("setVolume",function(value){video.volume=value/100});receiver.on("mute",function(){video.muted=true});receiver.on("unmute",function(){video.muted=false});receiver.on("getMuted",function(callback){callback(video.muted)});receiver.on("getLoop",function(callback){callback(video.loop)});receiver.on("setLoop",function(value){video.loop=value})};playerjs.HTML5Adapter.prototype.ready=function(){this.receiver.ready()};playerjs.JWPlayerAdapter=function(player){if(!(this instanceof playerjs.JWPlayerAdapter)){return new playerjs.JWPlayerAdapter(player)}this.init(player)};playerjs.JWPlayerAdapter.prototype.init=function(player){playerjs.assert(player,"playerjs.JWPlayerAdapter requires a player object");var receiver=this.receiver=new playerjs.Receiver;this.looped=false;player.onPause(function(){receiver.emit("pause")});player.onPlay(function(){receiver.emit("play")});player.onTime(function(e){var seconds=e.position,duration=e.duration;if(!seconds||!duration){return false}var value={seconds:seconds,duration:duration};receiver.emit("timeupdate",value)});var self=this;player.onComplete(function(){if(self.looped===true){player.seek(0)}else{receiver.emit("ended")}});player.onError(function(){receiver.emit("error")});receiver.on("play",function(){player.play(true)});receiver.on("pause",function(){player.pause(true)});receiver.on("getPaused",function(callback){callback(player.getState().toLowerCase()!=="PLAYING".toLowerCase())});receiver.on("getCurrentTime",function(callback){callback(player.getPosition())});receiver.on("setCurrentTime",function(value){player.seek(value)});receiver.on("getDuration",function(callback){callback(player.getDuration())});receiver.on("getVolume",function(callback){callback(player.getVolume())});receiver.on("setVolume",function(value){player.setVolume(value)});receiver.on("mute",function(){player.setMute(true)});receiver.on("unmute",function(){player.setMute(false)});receiver.on("getMuted",function(callback){callback(player.getMute()===true)});receiver.on("getLoop",function(callback){callback(this.looped)},this);receiver.on("setLoop",function(value){this.looped=value},this)};playerjs.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()};playerjs.MockAdapter=function(){if(!(this instanceof playerjs.MockAdapter)){return new playerjs.MockAdapter}this.init()};playerjs.MockAdapter.prototype.init=function(){var video={duration:20,currentTime:0,interval:null,timeupdate:function timeupdate(){},volume:100,mute:false,playing:false,loop:false,play:function play(){video.interval=setInterval(function(){video.currentTime+=.25;video.timeupdate({seconds:video.currentTime,duration:video.duration})},250);video.playing=true},pause:function pause(){clearInterval(video.interval);video.playing=false}};var receiver=this.receiver=new playerjs.Receiver;receiver.on("play",function(){var self=this;video.play();this.emit("play");video.timeupdate=function(data){self.emit("timeupdate",data)}});receiver.on("pause",function(){video.pause();this.emit("pause")});receiver.on("getPaused",function(callback){callback(!video.playing)});receiver.on("getCurrentTime",function(callback){callback(video.currentTime)});receiver.on("setCurrentTime",function(value){video.currentTime=value});receiver.on("getDuration",function(callback){callback(video.duration)});receiver.on("getVolume",function(callback){callback(video.volume)});receiver.on("setVolume",function(value){video.volume=value});receiver.on("mute",function(){video.mute=true});receiver.on("unmute",function(){video.mute=false});receiver.on("getMuted",function(callback){callback(video.mute)});receiver.on("getLoop",function(callback){callback(video.loop)});receiver.on("setLoop",function(value){video.loop=value})};playerjs.MockAdapter.prototype.ready=function(){this.receiver.ready()};playerjs.VideoJSAdapter=function(player){if(!(this instanceof playerjs.VideoJSAdapter)){return new playerjs.VideoJSAdapter(player)}this.init(player)};playerjs.VideoJSAdapter.prototype.init=function(player){playerjs.assert(player,"playerjs.VideoJSReceiver requires a player object");var receiver=this.receiver=new playerjs.Receiver;player.on("pause",function(){receiver.emit("pause")});player.on("play",function(){receiver.emit("play")});player.on("timeupdate",function(e){var seconds=player.currentTime(),duration=player.duration();if(!seconds||!duration){return false}var value={seconds:seconds,duration:duration};receiver.emit("timeupdate",value)});player.on("ended",function(){receiver.emit("ended")});player.on("error",function(){receiver.emit("error")});receiver.on("play",function(){player.play()});receiver.on("pause",function(){player.pause()});receiver.on("getPaused",function(callback){callback(player.paused())});receiver.on("getCurrentTime",function(callback){callback(player.currentTime())});receiver.on("setCurrentTime",function(value){player.currentTime(value)});receiver.on("getDuration",function(callback){callback(player.duration())});receiver.on("getVolume",function(callback){callback(player.volume()*100)});receiver.on("setVolume",function(value){player.volume(value/100)});receiver.on("mute",function(){player.volume(0)});receiver.on("unmute",function(){player.volume(1)});receiver.on("getMuted",function(callback){callback(player.volume()===0)});receiver.on("getLoop",function(callback){callback(player.loop())});receiver.on("setLoop",function(value){player.loop(value)})};playerjs.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()};{module.exports=playerjs}})(window)},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];Object.defineProperty(exports,"__esModule",{value:true});var ControlTracker=function(){function ControlTracker(){var controlName=arguments.length<=0||arguments[0]===undefined?null:arguments[0];_classCallCheck(this,ControlTracker);this.controlName=controlName}_createClass(ControlTracker,[{key:"reset",value:function reset(){this.controlName=null}}]);return ControlTracker}();exports["default"]=ControlTracker;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var _helpersA11yHelper=__webpack_require__(121);var PlaybackRateLabelComponent=function(_UIComponent){_inherits(PlaybackRateLabelComponent,_UIComponent);function PlaybackRateLabelComponent(playbackRateLabelElement){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PlaybackRateLabelComponent);_get(Object.getPrototypeOf(PlaybackRateLabelComponent.prototype),"constructor",this).call(this,playbackRateLabelElement);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{a11yDescAttr:"data-a11y-desc",a11yDesc:undefined})}_createClass(PlaybackRateLabelComponent,[{key:"focus",value:function focus(){this.element.focus()}},{key:"a11yDesc",get:function get(){var a11yDesc=this.options.a11yDesc||this.element.getAttribute(this.options.a11yDescAttr);Object.defineProperty(this,"a11yDesc",{value:a11yDesc});return this.a11yDesc}},{key:"a11yDescElement",get:function get(){var a11yDesc=this.a11yDesc;var a11yDescElement=(0,_helpersA11yHelper.createA11yControlTextElement)(a11yDesc+",");Object.defineProperty(this,"a11yDescElement",{value:a11yDescElement});return this.a11yDescElement}},{key:"childNodes",set:function set(nodes){var element=this.element;while(element.firstChild){element.removeChild(element.firstChild)}element.appendChild(this.a11yDescElement);nodes.forEach(function(node){return element.appendChild(node)})}}]);return PlaybackRateLabelComponent}(_ui2["default"]);exports["default"]=PlaybackRateLabelComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _focusable=__webpack_require__(165);var _focusable2=_interopRequireDefault(_focusable);var PlaybackRateMenuComponent=function(_FocusableComponent){_inherits(PlaybackRateMenuComponent,_FocusableComponent);function PlaybackRateMenuComponent(playbackRateMenuElement){var playerStateManager=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];_classCallCheck(this,PlaybackRateMenuComponent);_get(Object.getPrototypeOf(PlaybackRateMenuComponent.prototype),"constructor",this).call(this,playbackRateMenuElement,playerStateManager,(0,_lodashDefaultsdeep2["default"])({},options,{activeClass:"ssplayer-menu-active"}))}_createClass(PlaybackRateMenuComponent,[{key:"beforeInit",value:function beforeInit(){_get(Object.getPrototypeOf(PlaybackRateMenuComponent.prototype),"beforeInit",this).call(this);this.addEvents([this.element,"click",this.onClick])}},{key:"onClick",value:function onClick(event){this.emit("click",event)}}]);return PlaybackRateMenuComponent}(_focusable2["default"]);exports["default"]=PlaybackRateMenuComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _activatable=__webpack_require__(40);var _activatable2=_interopRequireDefault(_activatable);var PlaybackRateOptionComponent=function(_ActivatableComponent){_inherits(PlaybackRateOptionComponent,_ActivatableComponent);function PlaybackRateOptionComponent(playbackRateOptionElement){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PlaybackRateOptionComponent);_get(Object.getPrototypeOf(PlaybackRateOptionComponent.prototype),"constructor",this).call(this,playbackRateOptionElement,(0,_lodashDefaultsdeep2["default"])({},options,{playbackRateAttribute:"data-playback-rate"}));this.button=this.element.getElementsByTagName("button");if(this.button.length!==1){throw new Error("A playback rate option must include exactly one button")}this.button=this.button[0];
}_createClass(PlaybackRateOptionComponent,[{key:"contains",value:function contains(other){return this.element.contains(other)}},{key:"playbackRate",get:function get(){var playbackRate=parseFloat(this.element.getAttribute(this.options.playbackRateAttribute));Object.defineProperty(this,"playbackRate",{enumerable:true,value:playbackRate});return this.playbackRate}},{key:"childNodes",get:function get(){return Array.prototype.map.call(this.button.children,function(node){return node.cloneNode(true)})}}]);return PlaybackRateOptionComponent}(_activatable2["default"]);exports["default"]=PlaybackRateOptionComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersVideojsAdapterEvents=__webpack_require__(181);var _helpersVideojsAdapterEvents2=_interopRequireDefault(_helpersVideojsAdapterEvents);var _helpersPerformanceTime=__webpack_require__(413);var _helpersPerformanceTime2=_interopRequireDefault(_helpersPerformanceTime);var RumPlayerjsComponent=function(_EventListener){_inherits(RumPlayerjsComponent,_EventListener);function RumPlayerjsComponent(videoAdapter){_classCallCheck(this,RumPlayerjsComponent);_get(Object.getPrototypeOf(RumPlayerjsComponent.prototype),"constructor",this).call(this);this.bufferId=0;this.videoAdapter=videoAdapter}_createClass(RumPlayerjsComponent,[{key:"videoInitializationStart",value:function videoInitializationStart(){this.startTime=(0,_helpersPerformanceTime2["default"])()}},{key:"videoInitializationEnd",value:function videoInitializationEnd(){this.endTime=(0,_helpersPerformanceTime2["default"])();this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].INIT,{startTime:this.startTime,endTime:this.endTime,duration:this.endTime-this.startTime})}},{key:"bufferingStart",value:function bufferingStart(){this.bufferId+=1;var bufferId=this.bufferId;this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].BUFFER_START,{bufferId:bufferId,time:(0,_helpersPerformanceTime2["default"])()})}},{key:"bufferingEnd",value:function bufferingEnd(){var bufferId=this.bufferId;this.videoAdapter.emit(_helpersVideojsAdapterEvents2["default"].BUFFER_END,{bufferId:bufferId,time:(0,_helpersPerformanceTime2["default"])()})}}]);return RumPlayerjsComponent}(_coreEventListener2["default"]);exports["default"]=RumPlayerjsComponent;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=function(){return window&&window.performance&&window.performance.timing&&typeof window.performance.now==="function"?Math.round(window.performance.now())+window.performance.timing.navigationStart:(new Date).getTime()};module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _Number$isFinite=__webpack_require__(415)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersControlNames=__webpack_require__(182);var _helpersDecimal=__webpack_require__(418);var CONTROL_NAME_PLAYBACK_RATE=_helpersControlNames.CONTROL_NAME.TOOLBAR.PLAYBACK_RATE;var VideojsPlaybackRateBehavior=function(_EventListener){_inherits(VideojsPlaybackRateBehavior,_EventListener);function VideojsPlaybackRateBehavior(videojsPlayer,controlTracker,playbackRateLabel,playbackRateMenu,playbackRateOptions){var playerStateManager=arguments.length<=5||arguments[5]===undefined?{}:arguments[5];_classCallCheck(this,VideojsPlaybackRateBehavior);_get(Object.getPrototypeOf(VideojsPlaybackRateBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayer;this.playbackRateLabel=playbackRateLabel;this.playbackRateMenu=playbackRateMenu;this.playbackRateOptions=playbackRateOptions;this.controlTracker=controlTracker;this.playerStateManager=playerStateManager}_createClass(VideojsPlaybackRateBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"ratechange",this.onVideojsRateChange],[this.playbackRateMenu,"click",this.onRateOptionClick]);this.onVideojsRateChange()}},{key:"updateToolbarPlaybackRate",value:function updateToolbarPlaybackRate(){var playbackRate=this.videojsPlayer.playbackRate();this.updatePlaybackRateLabel(this.updatePlaybackRateOptionActive(playbackRate))}},{key:"updatePlaybackRateLabel",value:function updatePlaybackRateLabel(playbackRateOption){this.playbackRateLabel.childNodes=playbackRateOption.childNodes}},{key:"updatePlaybackRateOptionActive",value:function updatePlaybackRateOptionActive(playbackRate){var deactivatingOption=this.playbackRateOptions.find(function(option){return option.active});var activatingOption=this.playbackRateOptions.find(function(option){return(0,_helpersDecimal.decimalEqual)(option.playbackRate,playbackRate)});if(deactivatingOption){deactivatingOption.active=false}activatingOption.active=true;return activatingOption}},{key:"onVideojsRateChange",value:function onVideojsRateChange(){var newRate=this.videojsPlayer.playbackRate();var roundedRate=this.roundRate(newRate);if(!(0,_helpersDecimal.decimalEqual)(roundedRate,newRate)){this.videojsPlayer.playbackRate(roundedRate);return}this.updateToolbarPlaybackRate()}},{key:"roundRate",value:function roundRate(rate){var rates=this.playbackRateOptions.map(function(option){return option.playbackRate}).sort();var start=0;var end=rates.length-1;while(start+1<end){var mid=Math.floor((end-start)/2)+start;if(rates[mid]<rate){start=mid}else{end=mid}}var lower=rates[start];var upper=rates[end];var lowerDiff=Math.abs(rate-lower);var upperDiff=Math.abs(upper-rate);if(upperDiff<lowerDiff){return upper}return lower}},{key:"onRateOptionClick",value:function onRateOptionClick(event){var target=event.target;var rateOption=this.playbackRateOptions.find(function(option){return option.contains(target)});if(!rateOption){return}var requestedRate=rateOption.playbackRate;var existingRate=this.videojsPlayer.playbackRate();if(!_Number$isFinite(requestedRate)||(0,_helpersDecimal.decimalEqual)(requestedRate,existingRate)){return}this.controlTracker.controlName=CONTROL_NAME_PLAYBACK_RATE;this.videojsPlayer.playbackRate(requestedRate);if(!this.playerStateManager.isDisableA11y){this.playbackRateLabel.focus()}}}]);return VideojsPlaybackRateBehavior}(_coreEventListener2["default"]);exports["default"]=VideojsPlaybackRateBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(416),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(417);module.exports=__webpack_require__(11).Number.isFinite},function(module,exports,__webpack_require__){var $export=__webpack_require__(9),_isFinite=__webpack_require__(10).isFinite;$export($export.S,"Number",{isFinite:function isFinite(it){return typeof it=="number"&&_isFinite(it)}})},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.decimalEqual=decimalEqual;var EPSILON=Math.pow(2,-53);function decimalEqual(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(args.length<2){throw new Error("decimalEqual requires at least 2 arguments, but you only passed "+args.length)}var left=args.pop();var right=args.pop();while(right!==undefined){if(Math.abs(left-right)>=EPSILON){return false}left=right;right=args.pop()}return true}},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=initPresentation;var _lodashAssign=__webpack_require__(215);var _lodashAssign2=_interopRequireDefault(_lodashAssign);var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _behaviorsPresentation=__webpack_require__(194);var _behaviorsPresentation2=_interopRequireDefault(_behaviorsPresentation);var _behaviorsPresentationUserActivity=__webpack_require__(420);var _behaviorsPresentationUserActivity2=_interopRequireDefault(_behaviorsPresentationUserActivity);var _behaviorsPresentationManifest=__webpack_require__(421);var _behaviorsPresentationManifest2=_interopRequireDefault(_behaviorsPresentationManifest);var _behaviorsVirusScan=__webpack_require__(428);var _behaviorsVirusScan2=_interopRequireDefault(_behaviorsVirusScan);var _componentsCarousel=__webpack_require__(127);var _componentsCarousel2=_interopRequireDefault(_componentsCarousel);var _componentsDiscreteProgress=__webpack_require__(154);var _componentsDiscreteProgress2=_interopRequireDefault(_componentsDiscreteProgress);var _componentsKeyboard=__webpack_require__(168);var _componentsKeyboard2=_interopRequireDefault(_componentsKeyboard);var _componentsLoader=__webpack_require__(169);var _componentsLoader2=_interopRequireDefault(_componentsLoader);var _componentsPagination=__webpack_require__(171);var _componentsPagination2=_interopRequireDefault(_componentsPagination);var _componentsPresentationPlayer=__webpack_require__(173);var _componentsPresentationPlayer2=_interopRequireDefault(_componentsPresentationPlayer);var _componentsPresentationSidepanel=__webpack_require__(175);var _componentsPresentationSidepanel2=_interopRequireDefault(_componentsPresentationSidepanel);var _componentsPresentationTopbar=__webpack_require__(429);var _componentsPresentationTopbar2=_interopRequireDefault(_componentsPresentationTopbar);var _componentsPresentationBottombar=__webpack_require__(430);var _componentsPresentationBottombar2=_interopRequireDefault(_componentsPresentationBottombar);var _componentsToolbar=__webpack_require__(185);var _componentsToolbar2=_interopRequireDefault(_componentsToolbar);var _componentsPresentationPreviewThumbnail=__webpack_require__(161);var _componentsPresentationPreviewThumbnail2=_interopRequireDefault(_componentsPresentationPreviewThumbnail);var _componentsAccessibilityModeFrame=__webpack_require__(431);var _componentsAccessibilityModeFrame2=_interopRequireDefault(_componentsAccessibilityModeFrame);var _componentsVirusScan=__webpack_require__(433);var _componentsVirusScan2=_interopRequireDefault(_componentsVirusScan);function create(componentClass,element,options){for(var _len=arguments.length,otherArguments=Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){otherArguments[_key-3]=arguments[_key]}return element&&componentClass.create.apply(componentClass,[element,options].concat(otherArguments))}function initPresentation(options){var carousel=_componentsCarousel2["default"].create(options.carouselElement,options.carouselOptions);var positionOptions={position:carousel.position,length:carousel.slideCount};var toolbar=create(_componentsToolbar2["default"],options.toolbarElement,(0,_lodashAssign2["default"])({checkFullscreenAPI:true},options.toolbarOptions),undefined,undefined,undefined,options.toolbarA11yOptions&&options.toolbarA11yOptions.a11y);var presentationComponent=create(_componentsPresentationPlayer2["default"],options.presentationElement);var topbar=create(_componentsPresentationTopbar2["default"],options.topbarElement,options.topbarOptions);var bottombar=options.playerOptions.enableBottombar&&create(_componentsPresentationBottombar2["default"],options.bottombarElement,options.bottombarOptions);var progress=create(_componentsDiscreteProgress2["default"],options.progressElement,(0,_lodashDefaultsdeep2["default"])({},positionOptions,options.progressOptions));var previewThumbnail=create(_componentsPresentationPreviewThumbnail2["default"],options.previewThumbnailElement,options.previewThumbnailOptions);var sidepanelLeft=create(_componentsPresentationSidepanel2["default"],options.sidepanelLeftElement,options.sidepanelLeftOptions);var sidepanelRight=create(_componentsPresentationSidepanel2["default"],options.sidepanelRightElement,options.sidepanelRightOptions);var accessibilityModeFrame=create(_componentsAccessibilityModeFrame2["default"],options.accessibilityModeFrameElement,options.accessibilityModeOptions);var keyboard=_componentsKeyboard2["default"].create();var virusScan=create(_componentsVirusScan2["default"],options.virusScanElement,options.virusScanOptions);var presentationBehavior=_behaviorsPresentation2["default"].create({carousel:carousel,keyboard:keyboard,pagination:create(_componentsPagination2["default"],options.paginationElement,(0,_lodashDefaultsdeep2["default"])({},positionOptions,options.paginationOptions)),presentation:presentationComponent,progress:progress,previewThumbnail:previewThumbnail,sidepanelLeft:sidepanelLeft,sidepanelRight:sidepanelRight,topbar:topbar,bottombar:bottombar,toolbar:toolbar,loader:create(_componentsLoader2["default"],options.loaderElement),accessibilityModeFrame:accessibilityModeFrame,virusScan:virusScan},options.playerOptions);var virusScanBehavior=_behaviorsVirusScan2["default"].create({virusScan:virusScan,player:presentationComponent,topbar:topbar},options.virusScanBehaviorOptions);var presentationManifestBehavior=_behaviorsPresentationManifest2["default"].create({carousel:carousel,progress:progress,previewThumbnail:previewThumbnail,accessibilityModeFrame:accessibilityModeFrame,virusScan:virusScan},options.manifestOptions);_behaviorsPresentationUserActivity2["default"].create({carousel:carousel,player:presentationComponent,sidepanelLeft:sidepanelLeft,sidepanelRight:sidepanelRight,toolbar:toolbar,topbar:topbar,bottombar:bottombar,accessibilityModeFrame:accessibilityModeFrame,keyboard:keyboard,virusScan:virusScan});return{presentationBehavior:presentationBehavior,presentationManifestBehavior:presentationManifestBehavior,virusScanBehavior:virusScanBehavior}}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashAssign=__webpack_require__(215);var _lodashAssign2=_interopRequireDefault(_lodashAssign);var _lodashDebounce=__webpack_require__(206);var _lodashDebounce2=_interopRequireDefault(_lodashDebounce);var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var HIDE_TIMER_MS=1e3;var PresentationUserActivityBehavior=function(_EventListener){_inherits(PresentationUserActivityBehavior,_EventListener);function PresentationUserActivityBehavior(components){_classCallCheck(this,PresentationUserActivityBehavior);_get(Object.getPrototypeOf(PresentationUserActivityBehavior.prototype),"constructor",this).call(this);(0,_lodashAssign2["default"])(this,components)}_createClass(PresentationUserActivityBehavior,[{key:"beforeInit",value:function beforeInit(){this.debouncedIdleOnTimeout=(0,_lodashDebounce2["default"])(this.idleOnTimeout,HIDE_TIMER_MS);var events=[[this.player,"fullscreen",this.onFullscreen],[this.player,"mouseEnter",this.onUserActivity],[this.player,"mouseMove",this.onUserActivity],[this.player,"mouseLeave",this.onUserActivity],[this.toolbar,"mouseOver",this.onUserActivity],[this.toolbar,"mouseOut",this.onUserActivity],[this.topbar,"mouseOver",this.onUserActivity],[this.topbar,"mouseOut",this.onUserActivity],[this.bottombar,"mouseOver",this.onUserActivity],[this.bottombar,"mouseOut",this.onUserActivity],[this.keyboard,"tab",this.onUserActivity.bind(this,true)],[this.keyboard,"leftArrow",this.onArrowKey.bind(this)],[this.keyboard,"rightArrow",this.onArrowKey.bind(this)]].filter(function(_ref){var _ref2=_slicedToArray(_ref,1);var target=_ref2[0];return target});this.addEvents.apply(this,_toConsumableArray(events))}},{key:"onFullscreen",value:function onFullscreen(isFullscreen){this.isFullscreen=isFullscreen;this.setControlsVisibility(true)}},{key:"onArrowKey",value:function onArrowKey(){if(!this.isFullscreen){this.setControlsVisibility(false,this.carousel.isOnFirstPage,this.carousel.isOnFirstPage)}}},{key:"onUserActivity",value:function onUserActivity(overridePlayerMouseover){var isUserActive=overridePlayerMouseover===undefined?this.player.isMouseover:overridePlayerMouseover;if(isUserActive){this.setControlsVisibility(true)}this.debouncedIdleOnTimeout.cancel();if(!this.isMouseOverToolbar&&!this.isMouseOverSidepanels&&!this.isMouseOverTopbar&&!this.isMouseOverBottombar&&!this.isVirusScanVisible){this.debouncedIdleOnTimeout()}}},{key:"setControlsVisibility",value:function setControlsVisibility(isVisible,topbarVisibilityOverride,bottombarVisibilityOverride){var defaultTopbarVisibilityAction=undefined;if(isVisible&&this.isFullscreen||!isVisible&&!this.isFullscreen&&this.carousel.isOnFirstPage||this.isAccessibilityModeActive){defaultTopbarVisibilityAction="show"}else{defaultTopbarVisibilityAction="hide"}if(typeof topbarVisibilityOverride!=="undefined"){(0,_lodashInvoke2["default"])(this.topbar,topbarVisibilityOverride?"show":"hide")}else{(0,_lodashInvoke2["default"])(this.topbar,defaultTopbarVisibilityAction)}if(this.bottombar){var defaultBottombarVisibilityAction="hide";if(!isVisible&&!this.isFullscreen&&this.carousel.isOnFirstPage){defaultBottombarVisibilityAction="show"}if(typeof bottombarVisibilityOverride!=="undefined"){(0,_lodashInvoke2["default"])(this.bottombar,bottombarVisibilityOverride?"show":"hide")}else{(0,_lodashInvoke2["default"])(this.bottombar,defaultBottombarVisibilityAction)}if(isVisible&&!this.isAccessibilityModeActive){(0,_lodashInvoke2["default"])(this,"sidepanelRight.toggleEnabled",this.carousel.position<this.carousel.slideCount)}}this.player.idle=!isVisible;(0,_lodashInvoke2["default"])(this.player,"removeInitialLoadState");(0,_lodashInvoke2["default"])(this.toolbar,isVisible?"show":"hide")}},{key:"idleOnTimeout",value:function idleOnTimeout(){this.setControlsVisibility(false)}},{key:"isAccessibilityModeActive",get:function get(){return this.accessibilityModeFrame&&this.accessibilityModeFrame.isActive}},{key:"isVirusScanVisible",get:function get(){return this.virusScan&&this.virusScan.isVisible}},{key:"isMouseOverSidepanels",get:function get(){return this.sidepanelLeft&&this.sidepanelLeft.isMouseOver||this.sidepanelRight&&this.sidepanelRight.isMouseOver}},{key:"isMouseOverToolbar",get:function get(){return this.toolbar&&this.toolbar.isMouseOver}},{key:"isMouseOverTopbar",get:function get(){return this.topbar&&this.topbar.isMouseOver}},{key:"isMouseOverBottombar",get:function get(){return this.bottombar&&this.bottombar.isMouseOver}}]);return PresentationUserActivityBehavior}(_coreEventListener2["default"]);exports["default"]=PresentationUserActivityBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _Object$entries=__webpack_require__(422)["default"];var _Object$keys=__webpack_require__(123)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashAssign=__webpack_require__(215);var _lodashAssign2=_interopRequireDefault(_lodashAssign);var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _lodashDebounce=__webpack_require__(206);var _lodashDebounce2=_interopRequireDefault(_lodashDebounce);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersDocumentManifest=__webpack_require__(426);var _helpersDocumentManifest2=_interopRequireDefault(_helpersDocumentManifest);var _helpersImageManifestContainer=__webpack_require__(427);var _helpersImageManifestContainer2=_interopRequireDefault(_helpersImageManifestContainer);var RESIZE_DEBOUNCE_MS=100;var ONE_HOUR_IN_MS=36e5;var PresentationManifestBehavior=function(_EventListener){_inherits(PresentationManifestBehavior,_EventListener);function PresentationManifestBehavior(components){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PresentationManifestBehavior);_get(Object.getPrototypeOf(PresentationManifestBehavior.prototype),"constructor",this).call(this);(0,_lodashAssign2["default"])(this,components);this.options=options;this.imageManifestContainer=new _helpersImageManifestContainer2["default"](window.devicePixelRatio);if(!this.options.masterManifestUrl){this.skipEventBinding=true;return}this.fetchAndApplyManifests(this.options.masterManifestUrl);if(this.options.manifestUrlExpiresAt){this.scheduleManifestUpdate()}}_createClass(PresentationManifestBehavior,[{key:"beforeInit",value:function beforeInit(){if(this.skipEventBinding)return;this.debouncedResize=(0,_lodashDebounce2["default"])(this.onResize,RESIZE_DEBOUNCE_MS);this.addEvents([this.carousel,"resize",this.debouncedResize],[this.progress,"positionHover",this.onProgressHover])}},{key:"fetchAndApplyManifests",value:function fetchAndApplyManifests(masterManifestUrl){_helpersDocumentManifest2["default"].fetch(masterManifestUrl,{onMaster:this.onLoadMasterManifest.bind(this),onTranscript:this.onLoadTranscriptManifest.bind(this),onImageResolution:this.onLoadImageManifest.bind(this)})}},{key:"updateManifest",value:function updateManifest(newMasterManifestUrl,newManifestUrlExpiresAt){this.options.masterManifestUrl=newMasterManifestUrl;this.options.manifestUrlExpiresAt=newManifestUrlExpiresAt;this.imageManifestContainer.reset();this.fetchAndApplyManifests(newMasterManifestUrl);this.scheduleManifestUpdate()}},{key:"scheduleManifestUpdate",value:function scheduleManifestUpdate(){var _this=this;setTimeout(function(){(0,_lodashInvoke2["default"])(_this.options,"onRequestUpdateManifest")},this._getTimeToUpdateManifest())}},{key:"onResize",value:function onResize(){this.imageManifestContainer.updateOptimalManifest(this.carousel.slideWidth,this.carousel.slideHeight);var manifest=this.imageManifestContainer.getOptimalImageManifest();if(manifest){this._applyImageManifest(manifest)}}},{key:"onProgressHover",value:function onProgressHover(_ref){var position=_ref.position;var lowestResImageManifest=this.imageManifestContainer.getLowestResImageManifest();if(lowestResImageManifest){(0,_lodashInvoke2["default"])(this.previewThumbnail,"changeThumbnailImage",lowestResImageManifest.pages[position])}}},{key:"onLoadMasterManifest",value:function onLoadMasterManifest(manifest){var _this2=this;manifest.perResolutions.forEach(function(_ref2){var width=_ref2.width;var height=_ref2.height;_this2.imageManifestContainer.registerImageManifest(width,height)});this.imageManifestContainer.updateOptimalManifest(this.carousel.slideWidth,this.carousel.slideHeight);if(this.accessibilityModeFrame){this.accessibilityModeFrame.documentUrl=manifest.transcribedDocumentUrl}if(this.virusScan){this.virusScan.downloadUrl=manifest.transcribedDocumentUrl}}},{key:"onLoadImageManifest",value:function onLoadImageManifest(manifest,_ref3){var width=_ref3.width;var height=_ref3.height;this.imageManifestContainer.populateImageManifest(manifest,width,height);if(this.imageManifestContainer.isOptimalDimension(width,height)){this._applyImageManifest(manifest)}}},{key:"onLoadTranscriptManifest",value:function onLoadTranscriptManifest(manifest){var _this3=this;this.transcript=manifest.pages;_Object$entries(manifest.pages).forEach(function(_ref4){var _ref42=_slicedToArray(_ref4,2);var index=_ref42[0];var transcript=_ref42[1];var slide=_this3.carousel.adapter.restore(_this3.carousel.getSlideElement(index))[0];if(slide.getElementsByTagName("IMG").length>0){_this3.carousel.applyTranscriptToSlide(parseInt(index,10),transcript)}})}},{key:"_applyImageManifest",value:function _applyImageManifest(manifest){var _this4=this;_Object$keys(manifest.pages).forEach(function(indexString){var index=parseInt(indexString,10);var src=manifest.pages[index];_this4.carousel.applyImageSlideConfig({index:index,config:{src:src},clearSlide:false});if(_this4.transcript&&_this4.transcript[index]){_this4.carousel.applyTranscriptToSlide(index,_this4.transcript[index])}})}},{key:"_getTimeToUpdateManifest",value:function _getTimeToUpdateManifest(){var bufferInMS=arguments.length<=0||arguments[0]===undefined?ONE_HOUR_IN_MS:arguments[0];return this.options.manifestUrlExpiresAt-Date.now()-bufferInMS}}]);return PresentationManifestBehavior}(_coreEventListener2["default"]);exports["default"]=PresentationManifestBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(423),__esModule:true}},function(module,exports,__webpack_require__){__webpack_require__(424);module.exports=__webpack_require__(11).Object.entries},function(module,exports,__webpack_require__){var $export=__webpack_require__(9),$entries=__webpack_require__(425)(true);$export($export.S,"Object",{entries:function entries(it){return $entries(it)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(16),toIObject=__webpack_require__(45),isEnum=$.isEnum;module.exports=function(isEntries){return function(it){var O=toIObject(it),keys=$.getKeys(O),length=keys.length,i=0,result=[],key;while(length>i){if(isEnum.call(O,key=keys[i++])){result.push(isEntries?[key,O[key]]:O[key])}}return result}}},function(module,exports,__webpack_require__){var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _bind=__webpack_require__(112)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var DocumentManifest=function(){function DocumentManifest(url,callbacks){var _this=this;var shouldDownloadTranscript=arguments.length<=2||arguments[2]===undefined?false:arguments[2];_classCallCheck(this,DocumentManifest);if(!url){throw new TypeError("DocumentManifest: url expected to be truthy but was "+url)}if(typeof url!=="string"){throw new TypeError("DocumentManifest: url expected to be string but was type "+(typeof url==="undefined"?"undefined":_typeof2(url)))}var sanitizedUrl=_linkedinJsecure2["default"].sanitizeUrl(url);this.callbacks=callbacks;DocumentManifest.download(sanitizedUrl,function(manifest){return _this._parseMasterManifest(manifest,shouldDownloadTranscript)})}_createClass(DocumentManifest,[{key:"_parseMasterManifest",value:function _parseMasterManifest(manifest,shouldDownloadTranscript){var _this2=this;DocumentManifest.validateMasterManifestSchema(manifest,shouldDownloadTranscript);(0,_lodashInvoke2["default"])(this.callbacks,"onMaster",manifest);if(shouldDownloadTranscript){DocumentManifest.download(manifest.transcriptManifestUrl,this._parseTranscriptManifest.bind(this))}manifest.perResolutions.forEach(function(_ref){var imageManifestUrl=_ref.imageManifestUrl;var width=_ref.width;var height=_ref.height;DocumentManifest.download(imageManifestUrl,_this2._parseImageManifest.bind(_this2,width,height))})}},{key:"_parseTranscriptManifest",value:function _parseTranscriptManifest(manifest){DocumentManifest.validateSubManifest(manifest);(0,_lodashInvoke2["default"])(this.callbacks,"onTranscript",manifest)}},{key:"_parseImageManifest",value:function _parseImageManifest(width,height,manifest){DocumentManifest.validateSubManifest(manifest);(0,_lodashInvoke2["default"])(this.callbacks,"onImageResolution",manifest,{width:width,height:height})}}],[{key:"fetch",value:function fetch(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return new(_bind.apply(DocumentManifest,[null].concat(args)))}},{key:"download",value:function download(url,cb){var httpRequest=new XMLHttpRequest;httpRequest.onreadystatechange=function(){if(httpRequest.readyState===XMLHttpRequest.DONE&&httpRequest.status===200){cb(JSON.parse(httpRequest.responseText))}};httpRequest.open("GET",url,true);httpRequest.send()}},{key:"validateManifestSchema",value:function validateManifestSchema(manifest){if(!manifest){throw new TypeError("validateManifestSchema: manifest expected to be truthy but was '"+manifest+"'")}if((typeof manifest==="undefined"?"undefined":_typeof2(manifest))!=="object"){throw new TypeError("validateManifestSchema: manifest expected to be object but was type "+(typeof manifest==="undefined"?"undefined":_typeof2(manifest)))}}},{key:"validateMasterManifestSchema",value:function validateMasterManifestSchema(manifest,validateTranscript){DocumentManifest.validateManifestSchema(manifest);if(validateTranscript&&!manifest.transcriptManifestUrl){throw new TypeError("validateMasterManifestSchema: manifest does not contain transcript URL (found '"+manifest.transcriptManifestUrl+"' instead)")}if(!manifest.perResolutions){throw new TypeError("validateMasterManifestSchema: manifest does not contain perResolutions (found '"+manifest.perResolutions+"' instead)")}if(!Array.isArray(manifest.perResolutions)){throw new TypeError("validateMasterManifestSchema: expected perResolutions to be type Array but was type '"+_typeof2(manifest.perResolutions)+"' instead)")}}},{key:"validateSubManifest",value:function validateSubManifest(manifest){DocumentManifest.validateManifestSchema(manifest);if(!manifest.pages){throw new TypeError("validateSubManifest: manifest does not contain pages (found '"+manifest.pages+"' instead)")}if(_typeof2(manifest.pages)!=="object"){throw new TypeError("validateSubManifest: manifest.pages expected to be object but was type "+_typeof2(manifest.pages))}}}]);return DocumentManifest}();exports["default"]=DocumentManifest;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _classCallCheck=__webpack_require__(58)["default"];var _createClass=__webpack_require__(55)["default"];Object.defineProperty(exports,"__esModule",{value:true});var ManifestDimensions=function ManifestDimensions(width,height){_classCallCheck(this,ManifestDimensions);this.width=width;this.height=height};var ImageManifestContainer=function(){function ImageManifestContainer(){var devicePixelRatio=arguments.length<=0||arguments[0]===undefined?1:arguments[0];_classCallCheck(this,ImageManifestContainer);this.devicePixelRatio=devicePixelRatio;this.imageManifests=[];this.optimalImageManifestIndex=-1}_createClass(ImageManifestContainer,[{key:"reset",value:function reset(){this.imageManifests=[];this.optimalImageManifestIndex=-1}},{key:"registerImageManifest",value:function registerImageManifest(width,height){this.imageManifests.push({width:width,height:height});this.imageManifests.sort(function(a,b){if(a.width<b.width)return-1;if(a.width>b.width)return 1;return 0})}},{key:"populateImageManifest",value:function populateImageManifest(manifest,width,height){var index=this._getManifestIndexByDimensions(new ManifestDimensions(width,height));this.imageManifests[index].manifest=manifest;
}},{key:"updateOptimalManifest",value:function updateOptimalManifest(rawReferenceWidth,rawReferenceHeight){if(this.imageManifests.length===0){return}var normalizedReferenceWidth=this._normalizePixelLength(rawReferenceWidth);var normalizedReferenceHeight=this._normalizePixelLength(rawReferenceHeight);var _getOptimalWidthAndHeight2=this._getOptimalWidthAndHeight(normalizedReferenceWidth,normalizedReferenceHeight);var optimalWidth=_getOptimalWidthAndHeight2.width;var optimalHeight=_getOptimalWidthAndHeight2.height;if(normalizedReferenceWidth>normalizedReferenceHeight){this.optimalImageManifestIndex=this._getManifestIndexByDimensions({width:optimalWidth})}else{this.optimalImageManifestIndex=this._getManifestIndexByDimensions({height:optimalHeight})}}},{key:"isOptimalDimension",value:function isOptimalDimension(width,height){return this._getManifestIndexByDimensions(new ManifestDimensions(width,height))===this.optimalImageManifestIndex}},{key:"getOptimalImageManifest",value:function getOptimalImageManifest(){if(this.optimalImageManifestIndex<0){throw new ReferenceError("Optimal image manifest must be set before calling getOptimalImageManifest")}return this.imageManifests[this.optimalImageManifestIndex].manifest}},{key:"getLowestResImageManifest",value:function getLowestResImageManifest(){return this.imageManifests[0]&&this.imageManifests[0].manifest}},{key:"_getManifestIndexByDimensions",value:function _getManifestIndexByDimensions(_ref){var width=_ref.width;var height=_ref.height;if(width===undefined&&height===undefined){throw new TypeError("_getManifestIndexByDimensions must be called with either a width or a height (cannot be called with neither)")}for(var i=0;i<this.imageManifests.length;i+=1){if(height===undefined&&this.imageManifests[i].width===width){return i}if(width===undefined&&this.imageManifests[i].height===height){return i}if(this.imageManifests[i].width===width&&this.imageManifests[i].height===height){return i}}return-1}},{key:"_getOptimalWidthAndHeight",value:function _getOptimalWidthAndHeight(referenceWidth,referenceHeight){var optimalWidth=this.imageManifests[0].width;var optimalHeight=this.imageManifests[0].height;this.imageManifests.slice(1).forEach(function(_ref2){var width=_ref2.width;var height=_ref2.height;var newWidthDiff=Math.abs(width-referenceWidth);var newHeightDiff=Math.abs(height-referenceHeight);var oldWidthDiff=Math.abs(optimalWidth-referenceWidth);var oldHeightDiff=Math.abs(optimalHeight-referenceHeight);if(newWidthDiff<oldWidthDiff){optimalWidth=width}if(newHeightDiff<oldHeightDiff){optimalHeight=height}});return new ManifestDimensions(optimalWidth,optimalHeight)}},{key:"_normalizePixelLength",value:function _normalizePixelLength(length){return length*this.devicePixelRatio}}]);return ImageManifestContainer}();exports["default"]=ImageManifestContainer;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var VirusScanBehavior=function(_EventListener){_inherits(VirusScanBehavior,_EventListener);function VirusScanBehavior(components){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,VirusScanBehavior);_get(Object.getPrototypeOf(VirusScanBehavior.prototype),"constructor",this).call(this);this.components=components;this.callbacks=options.callbacks}_createClass(VirusScanBehavior,[{key:"beforeInit",value:function beforeInit(){var events=[[this.components.virusScan,"requestVirusScanPoll",this.onRequestVirusScanPoll.bind(this)],[this.components.virusScan,"hide",this.onVirusScanHide.bind(this)],[this.components.player,"fullscreen",this.onFullscreen.bind(this)]];this.addEvents.apply(this,events)}},{key:"onRequestVirusScanPoll",value:function onRequestVirusScanPoll(){(0,_lodashInvoke2["default"])(this.callbacks,"requestVirusScanStatus")}},{key:"onVirusScanPollResult",value:function onVirusScanPollResult(status){this.components.virusScan.updateWithPollResult(status)}},{key:"onVirusScanHide",value:function onVirusScanHide(){(0,_lodashInvoke2["default"])(this.components,"topbar.setFocus")}},{key:"onFullscreen",value:function onFullscreen(isFullscreen){if(!isFullscreen){this.components.virusScan.hide()}}}]);return VirusScanBehavior}(_coreEventListener2["default"]);exports["default"]=VirusScanBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _accessibleComponent=__webpack_require__(157);var _accessibleComponent2=_interopRequireDefault(_accessibleComponent);var PresentationTopbarComponent=function(_AccessibleComponent){_inherits(PresentationTopbarComponent,_AccessibleComponent);function PresentationTopbarComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PresentationTopbarComponent);var mergedOptions=(0,_lodashDefaultsdeep2["default"])({},options,{accessibilityButtonText:"Accessibility mode",title:"",details:"",detailsFullscreen:"",divider:"•",classes:{titleContainer:"ssplayer-topbar-title-container",titleText:"ssplayer-topbar-title-text",detailsText:"ssplayer-topbar-details__preview",detailsFullScreenText:"ssplayer-topbar-details__full-screen",divider:"ssplayer-topbar-divider",cancelButton:"ssplayer-topbar-action-cancel",downloadButton:"ssplayer-topbar-action-download",accessibilityButton:"ssplayer-topbar-action-accessibility",accessibilityButtonPressed:"ssplayer-topbar-accessibility-pressed"}});var a11yControlMap={downloadButton:"."+mergedOptions.classes.downloadButton,cancelButton:"."+mergedOptions.classes.cancelButton};_get(Object.getPrototypeOf(PresentationTopbarComponent.prototype),"constructor",this).call(this,element,mergedOptions,a11yControlMap);_linkedinSlideshareClientUtils.events.mixin(this);this.options=mergedOptions;this.accessibilityButtonText=this.options.accessibilityButtonText;this.title=this.options.title;this.details=this.options.details;this.detailsFullScreen=this.options.detailsFullscreen||this.options.details;this.divider=this.options.divider}_createClass(PresentationTopbarComponent,[{key:"beforeInit",value:function beforeInit(){var _this=this;this.addEvents([this.element,"mouseover",this.onMouseover],[this.element,"mouseout",this.onMouseout],[this.downloadButtonElement,"click",function(){return _this.emit("download")}],[this.accessibilityButtonElement,"click",function(){return _this.emit("accessibility")}],[this.cancelButtonElement,"click",function(){return _this.emit("cancel")}])}},{key:"onMouseover",value:function onMouseover(){this.isMouseOver=true;this.emit("onMouseOver")}},{key:"onMouseout",value:function onMouseout(){this.isMouseOver=false;this.emit("onMouseOut")}},{key:"setAccessibilityButtonState",value:function setAccessibilityButtonState(pressed){var button=this.adaptedElement.find("."+this.options.classes.accessibilityButton);button.toggleClass(this.options.classes.accessibilityButtonPressed,pressed)}},{key:"setFocus",value:function setFocus(){if(this.accessibilityButtonElement){this.accessibilityButtonElement.focus()}else{this.downloadButtonElement.focus()}}},{key:"downloadButtonElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.downloadButton)}},{key:"accessibilityButtonElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.accessibilityButton)}},{key:"accessibilityButtonText",set:function set(text){this.accessibilityButtonElement.text(text)}},{key:"cancelButtonElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.cancelButton)}},{key:"titleElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.titleText)}},{key:"title",set:function set(titleText){this.titleElement.text(titleText)}},{key:"detailsElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.detailsText)}},{key:"details",set:function set(detailsText){this.detailsElement.text(detailsText)}},{key:"detailsFullScreenElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.detailsFullScreenText)}},{key:"detailsFullScreen",set:function set(detailsText){this.detailsFullScreenElement.text(detailsText)}},{key:"dividerElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.divider)}},{key:"divider",set:function set(dividerText){this.dividerElement.text(dividerText)}}]);return PresentationTopbarComponent}(_accessibleComponent2["default"]);exports["default"]=PresentationTopbarComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _accessibleComponent=__webpack_require__(157);var _accessibleComponent2=_interopRequireDefault(_accessibleComponent);var PresentationBottombarComponent=function(_AccessibleComponent){_inherits(PresentationBottombarComponent,_AccessibleComponent);function PresentationBottombarComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,PresentationBottombarComponent);var mergedOptions=(0,_lodashDefaultsdeep2["default"])({},options,{title:"",subtitle:"",inbugUrl:"",titleUrl:"",classes:{titleText:"ssplayer-bottombar-title-text",subtitleText:"ssplayer-bottombar-subtitle-text"}});var a11yControlMap={};_get(Object.getPrototypeOf(PresentationBottombarComponent.prototype),"constructor",this).call(this,element,mergedOptions,a11yControlMap);_linkedinSlideshareClientUtils.events.mixin(this);this.options=mergedOptions;this.title=this.options.title;this.subtitle=this.options.subtitle}_createClass(PresentationBottombarComponent,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.element,"mouseover",this.onMouseover],[this.element,"mouseout",this.onMouseout])}},{key:"onMouseover",value:function onMouseover(){this.isMouseOver=true;this.emit("onMouseOver")}},{key:"onMouseout",value:function onMouseout(){this.isMouseOver=false;this.emit("onMouseOut")}},{key:"titleElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.titleText)}},{key:"subtitleElement",get:function get(){return this.adaptedElement.find("."+this.options.classes.subtitleText)}},{key:"title",set:function set(titleText){this.titleElement.text(titleText)}},{key:"subtitle",set:function set(subtitleText){this.subtitleElement.text(subtitleText)}}]);return PresentationBottombarComponent}(_accessibleComponent2["default"]);exports["default"]=PresentationBottombarComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _accessibleComponent=__webpack_require__(157);var _accessibleComponent2=_interopRequireDefault(_accessibleComponent);var _helpersDetectBrowser=__webpack_require__(432);var AccessibilityModeFrameComponent=function(_AccessibleComponent){_inherits(AccessibilityModeFrameComponent,_AccessibleComponent);function AccessibilityModeFrameComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,AccessibilityModeFrameComponent);var mergedOptions=(0,_lodashDefaultsdeep2["default"])({},options,{classes:{accessibilityContainerHidden:"ssplayer-presentation-accessibility-mode__container--hidden",accessibilityEmbed:"ssplayer-presentation-accessibility-mode__embed"}});var a11yControlMap={embed:"."+mergedOptions.classes.accessibilityEmbed};_get(Object.getPrototypeOf(AccessibilityModeFrameComponent.prototype),"constructor",this).call(this,element,mergedOptions,a11yControlMap);_linkedinSlideshareClientUtils.events.mixin(this);this.options=mergedOptions}_createClass(AccessibilityModeFrameComponent,[{key:"toggle",value:function toggle(shouldShow){if(shouldShow){this.show()}else{this.hide()}}},{key:"show",value:function show(){if(!this.documentUrl){throw new TypeError("Cannot enter accessibility mode without document URL")}this.documentEmbed.attr(this.documentEmbedSourceAttr,this.documentUrl);this.adaptedElement.removeClass(this.options.classes.accessibilityContainerHidden);this.isActive=true;this.emit("show")}},{key:"hide",value:function hide(){this.adaptedElement.addClass(this.options.classes.accessibilityContainerHidden);this.isActive=false;this.emit("hide")}},{key:"_createDocumentEmbedEl",value:function _createDocumentEmbedEl(){var embed=undefined;if((0,_helpersDetectBrowser.isIE11)()||(0,_helpersDetectBrowser.isMSEdge)()){embed=document.createElement("iframe")}else{embed=document.createElement("object");embed.setAttribute("type","application/pdf")}embed.classList.add(this.options.classes.accessibilityEmbed);return this.element.appendChild(embed)}},{key:"documentUrl",get:function get(){return this._safeUrl||""},set:function set(unsafeUrl){this._safeUrl=_linkedinJsecure2["default"].sanitizeUrl(unsafeUrl)}},{key:"documentEmbedSourceAttr",get:function get(){return this.documentEmbed.prop("tagName")==="IFRAME"?"src":"data"}},{key:"documentEmbed",get:function get(){if(!this._documentEmbed){this._documentEmbed=this.adapter.adapt(this._createDocumentEmbedEl())}return this._documentEmbed}}]);return AccessibilityModeFrameComponent}(_accessibleComponent2["default"]);exports["default"]=AccessibilityModeFrameComponent;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.isMSEdge=isMSEdge;exports.isIE11=isIE11;function isMSEdge(){return window.navigator.userAgent.indexOf("Edge")>-1}function isIE11(){return!!window.MSInputMethodContext&&!!document.documentMode}},function(module,exports,__webpack_require__){var _defineProperty=__webpack_require__(122)["default"];var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _ALLOWED_STATE_TRANSITIONS;var _linkedinSlideshareClientUtils=__webpack_require__(76);var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _lodashValues=__webpack_require__(434);var _lodashValues2=_interopRequireDefault(_lodashValues);var _lodashIncludes=__webpack_require__(158);var _lodashIncludes2=_interopRequireDefault(_lodashIncludes);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var VIRUS_SCAN_STATUSES={CLEAN:"CLEAN",DIRTY:"DIRTY",SCANNING:"SCANNING",ERROR:"ERROR"};exports.VIRUS_SCAN_STATUSES=VIRUS_SCAN_STATUSES;var STATES={NOT_STARTED:"notstarted",STARTED:"started",CLEAN:"clean",TIMED_OUT:"timedout",DIRTY:"dirty",REDIRECT:"redirect"};exports.STATES=STATES;var ALLOWED_STATE_TRANSITIONS=(_ALLOWED_STATE_TRANSITIONS={undefined:[STATES.NOT_STARTED,STATES.CLEAN,STATES.REDIRECT]},_defineProperty(_ALLOWED_STATE_TRANSITIONS,STATES.NOT_STARTED,[STATES.STARTED]),_defineProperty(_ALLOWED_STATE_TRANSITIONS,STATES.STARTED,[STATES.CLEAN,STATES.TIMED_OUT,STATES.DIRTY]),_defineProperty(_ALLOWED_STATE_TRANSITIONS,STATES.CLEAN,[]),_defineProperty(_ALLOWED_STATE_TRANSITIONS,STATES.TIMED_OUT,[]),_defineProperty(_ALLOWED_STATE_TRANSITIONS,STATES.DIRTY,[]),_ALLOWED_STATE_TRANSITIONS);var VirusScanComponent=function(_UIComponent){_inherits(VirusScanComponent,_UIComponent);function VirusScanComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,VirusScanComponent);_get(Object.getPrototypeOf(VirusScanComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{timeoutInSeconds:30,pollIntervalInSeconds:2,bypassScan:false,titleText:"",cancelButtonText:"Cancel",skipButtonText:"Skip",downloadButtonText:"Download",forceProceedButtonText:"Proceed anyways",progressDescriptionText:"Scanning for viruses...",cleanProgressDescriptionText:"Ready to download",timeoutTitle:"Can't scan this document for viruses",dirtyTitle:"This document is not safe",timeoutSubtitle:"We were unable to scan this document for viruses. Would you still like to proceed?",dirtySubtitle:"We detected a virus in this document that could harm your device.",redirect:false,redirectAccessibilityTitle:"Visit original post to get accessibility mode",redirectDownloadTitle:"Visit original post to download",redirectUrl:"https://www.linkedin.com"});this.cancelButtonEl=this.adaptedElement.find(".ssplayer-virus-scan-container__cancel-button");this.skipButtonEl=this.adaptedElement.find(".ssplayer-virus-scan-container__skip-button");this.downloadButtonEl=this.adaptedElement.find(".ssplayer-virus-scan-container__download-button");this.forceProceedButtonEl=this.adaptedElement.find(".ssplayer-virus-scan-container__force-proceed-button");this.progressContainerEl=this.adaptedElement.find(".ssplayer-virus-scan-container__progress-container");this.progressLoadingIconEl=this.adaptedElement.find(".ssplayer-loading-icon");this.progressLoadedIconEl=this.adaptedElement.find(".ssplayer-loaded-icon");this.progressDescriptionEl=this.adaptedElement.find(".ssplayer-virus-scan-container__progress-description");this.bottomActionsContainerEl=this.adaptedElement.find(".ssplayer-virus-scan-container__footer");this.titleEl=this.adaptedElement.find(".ssplayer-virus-scan-container__title");this.subtitleEl=this.adaptedElement.find(".ssplayer-virus-scan-container__subtitle");this.redirectEl=this.adaptedElement.find(".ssplayer-virus-scan-container__redirect");this.redirectAnchorEl=this.adaptedElement.find(".ssplayer-virus-scan-container__redirect-anchor");this._showInitialUI();if(this.options.redirect){this.currentState=STATES.REDIRECT}else if(this.options.bypassScan){this.currentState=STATES.CLEAN}else{this.currentState=STATES.NOT_STARTED}}_createClass(VirusScanComponent,[{key:"beforeInit",value:function beforeInit(){var _this=this;this.addEvents.apply(this,[[this.cancelButtonEl,"click",function(){return _this.onCancel()}],[this.skipButtonEl,"click",function(){return _this.onBypassScan()}],[this.forceProceedButtonEl,"click",function(){return _this.onBypassScan()}],[this.downloadButtonEl,"click",function(){return _this.hide()}]])}},{key:"show",value:function show(){this.adaptedElement.addClass("active");this.cancelButtonEl.focus();this.isVisible=true}},{key:"hide",value:function hide(){this.adaptedElement.removeClass("active");this.isVisible=false;this.emit("hide")}},{key:"onCancel",value:function onCancel(){this.onSuccessCallback=null;this.hide()}},{key:"onBypassScan",value:function onBypassScan(){if(this.currentState!==STATES.STARTED&&this.currentState!==STATES.TIMED_OUT){throw new TypeError("Cannot skip download from state '"+this.currentState+"'")}this.hide();this.onSuccessCallback();this.onSuccessCallback=null}},{key:"execute",value:function execute(onSuccessCallback){var promptDownloadOnSuccess=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var uponDownload=arguments.length<=2||arguments[2]===undefined?false:arguments[2];if(this.currentState===STATES.CLEAN&&!promptDownloadOnSuccess){onSuccessCallback();return}this._updateUIUponDownload(uponDownload);this.show();this.onSuccessCallback=onSuccessCallback;this.promptDownloadOnSuccess=promptDownloadOnSuccess;if(this.currentState===STATES.NOT_STARTED){this._startPolling()}}},{key:"updateWithPollResult",value:function updateWithPollResult(status){var _this2=this;if(this.currentState===STATES.TIMED_OUT){return}if(VIRUS_SCAN_STATUSES[status]===undefined){throw new TypeError("Virus scan status '"+status+"' is not a valid status!")}if(status===VIRUS_SCAN_STATUSES.SCANNING&&this.currentState===STATES.STARTED){setTimeout(function(){return _this2.emit("requestVirusScanPoll")},this.options.pollIntervalInSeconds*1e3)}else if(status===VIRUS_SCAN_STATUSES.CLEAN){this.currentState=STATES.CLEAN}else if(status===VIRUS_SCAN_STATUSES.DIRTY){this.currentState=STATES.DIRTY}else if(status===VIRUS_SCAN_STATUSES.ERROR){this.currentState=STATES.TIMED_OUT}}},{key:"_startPolling",value:function _startPolling(){var _this3=this;this.currentState=STATES.STARTED;this.emit("requestVirusScanPoll");setTimeout(function(){return _this3._timeoutPolling()},this.options.timeoutInSeconds*1e3)}},{key:"_timeoutPolling",value:function _timeoutPolling(){if(this&&this.currentState===STATES.STARTED){this.currentState=STATES.TIMED_OUT}}},{key:"_showInitialUI",value:function _showInitialUI(){VirusScanComponent.toggleControlVisibility(this.progressLoadingIconEl,true);VirusScanComponent.toggleControlVisibility(this.subtitleEl,false);VirusScanComponent.toggleControlVisibility(this.forceProceedButtonEl,false);VirusScanComponent.toggleControlVisibility(this.downloadButtonEl,false);VirusScanComponent.toggleControlVisibility(this.progressLoadedIconEl,false);VirusScanComponent.toggleControlVisibility(this.redirectEl,false);this.titleEl.text(this.options.titleText);this.progressDescriptionEl.text(this.options.progressDescriptionText);this.cancelButtonEl.text(this.options.cancelButtonText);this.skipButtonEl.text(this.options.skipButtonText);this.downloadButtonEl.text(this.options.downloadButtonText);this.forceProceedButtonEl.text(this.options.forceProceedButtonText)}},{key:"_showTimeoutUI",value:function _showTimeoutUI(){VirusScanComponent.toggleControlVisibility(this.progressContainerEl,false);VirusScanComponent.toggleControlVisibility(this.skipButtonEl,false);VirusScanComponent.toggleControlVisibility(this.subtitleEl,true);VirusScanComponent.toggleControlVisibility(this.forceProceedButtonEl,true);this.titleEl.text(this.options.timeoutTitle);this.subtitleEl.text(this.options.timeoutSubtitle)}},{key:"_showDirtyUI",value:function _showDirtyUI(){VirusScanComponent.toggleControlVisibility(this.progressContainerEl,false);VirusScanComponent.toggleControlVisibility(this.skipButtonEl,false);VirusScanComponent.toggleControlVisibility(this.subtitleEl,true);VirusScanComponent.toggleControlVisibility(this.cancelButtonEl,true);this.titleEl.text(this.options.dirtyTitle);this.subtitleEl.text(this.options.dirtySubtitle)}},{key:"_showCleanUI",value:function _showCleanUI(){VirusScanComponent.toggleControlVisibility(this.downloadButtonEl,true);VirusScanComponent.toggleControlVisibility(this.skipButtonEl,false);VirusScanComponent.toggleControlVisibility(this.progressLoadingIconEl,false);VirusScanComponent.toggleControlVisibility(this.progressLoadedIconEl,true);this.progressDescriptionEl.addClass("ssplayer-virus-scan-container__progress-description--clean");this.progressDescriptionEl.text(this.options.cleanProgressDescriptionText)}},{key:"_showRedirectUI",value:function _showRedirectUI(){VirusScanComponent.toggleControlVisibility(this.progressContainerEl,false);VirusScanComponent.toggleControlVisibility(this.bottomActionsContainerEl,false);VirusScanComponent.toggleControlVisibility(this.titleEl,false);VirusScanComponent.toggleControlVisibility(this.subtitleEl,false);VirusScanComponent.toggleControlVisibility(this.redirectEl,true);this.redirectAnchorEl.attr("href",this.options.redirectUrl);this.redirectAnchorEl.text(this.options.redirectDownloadTitle)}},{key:"_updateUIUponDownload",value:function _updateUIUponDownload(uponDownload){this.adaptedElement.toggleClass("ssplayer-virus-scan-container--accessibility",!uponDownload);if(this.currentState===STATES.REDIRECT){var title=uponDownload?this.options.redirectDownloadTitle:this.options.redirectAccessibilityTitle;this.redirectAnchorEl.text(title)}}},{key:"currentState",set:function set(newState){if(!(0,_lodashIncludes2["default"])((0,_lodashValues2["default"])(STATES),newState)){throw new TypeError("State "+newState+" not a valid state!")}if(!VirusScanComponent.isValidStateTransition(this.currentState,newState)){throw new TypeError("State transition '"+this.currentState+"' -> '"+newState+"' is not valid!")}this._currentState=newState;if(newState===STATES.CLEAN){this._showCleanUI();if(!this.promptDownloadOnSuccess){this.hide()}if(this.onSuccessCallback){this.onSuccessCallback()}}else if(newState===STATES.TIMED_OUT){this._showTimeoutUI()}else if(newState===STATES.DIRTY){this._showDirtyUI()}else if(newState===STATES.REDIRECT){this._showRedirectUI()}},get:function get(){return this._currentState}},{key:"promptDownloadOnSuccess",set:function set(shouldPrompt){this._promptDownloadOnSuccess=shouldPrompt;if(shouldPrompt){this.forceProceedButtonEl.attr("href",this._safeUrl);this.skipButtonEl.attr("href",this._safeUrl)}else{this.forceProceedButtonEl.removeAttr("href");this.skipButtonEl.removeAttr("href")}},get:function get(){return this._promptDownloadOnSuccess}},{key:"downloadUrl",set:function set(unsafeUrl){var safeUrl=_linkedinJsecure2["default"].sanitizeUrl(unsafeUrl);this.downloadButtonEl.attr("href",safeUrl);this._safeUrl=safeUrl}}],[{key:"toggleControlVisibility",value:function toggleControlVisibility(control,visible){control.toggleClass("ssplayer-virus-scan-container-control--hidden",!visible)}},{key:"isValidStateTransition",value:function isValidStateTransition(oldState,newState){var allowedStatesToEnterFromOldState=ALLOWED_STATE_TRANSITIONS[oldState];return(0,_lodashIncludes2["default"])(allowedStatesToEnterFromOldState,newState)}}]);return VirusScanComponent}(_ui2["default"]);exports["default"]=VirusScanComponent},function(module,exports,__webpack_require__){var keys=__webpack_require__(435);function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}module.exports=values},function(module,exports,__webpack_require__){var isNative=__webpack_require__(436),isObject=__webpack_require__(115),shimKeys=__webpack_require__(437);var nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys;var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};module.exports=keys},function(module,exports){var objectProto=Object.prototype;var toString=objectProto.toString;var reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");function isNative(value){return typeof value=="function"&&reNative.test(value)}module.exports=isNative},function(module,exports,__webpack_require__){var objectTypes=__webpack_require__(116);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var shimKeys=function shimKeys(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object==="undefined"?"undefined":_typeof2(object)])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};module.exports=shimKeys},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=initDocument;var _lodashAssign=__webpack_require__(215);var _lodashAssign2=_interopRequireDefault(_lodashAssign);var _behaviorsDocument=__webpack_require__(439);var _behaviorsDocument2=_interopRequireDefault(_behaviorsDocument);var _componentsDocumentPlayer=__webpack_require__(441);var _componentsDocumentPlayer2=_interopRequireDefault(_componentsDocumentPlayer);var _componentsScroll=__webpack_require__(442);var _componentsScroll2=_interopRequireDefault(_componentsScroll);var _componentsToc=__webpack_require__(446);var _componentsToc2=_interopRequireDefault(_componentsToc);var _componentsDiscreteProgress=__webpack_require__(154);var _componentsDiscreteProgress2=_interopRequireDefault(_componentsDiscreteProgress);var _componentsPagination=__webpack_require__(171);var _componentsPagination2=_interopRequireDefault(_componentsPagination);var _componentsToolbar=__webpack_require__(185);var _componentsToolbar2=_interopRequireDefault(_componentsToolbar);var _componentsFullscreenTarget=__webpack_require__(189);var _componentsFullscreenTarget2=_interopRequireDefault(_componentsFullscreenTarget);var _componentsKeyboard=__webpack_require__(168);var _componentsKeyboard2=_interopRequireDefault(_componentsKeyboard);var _helpersA11yHelper=__webpack_require__(121);var _helpersTryCreate=__webpack_require__(447);var _helpersTryCreate2=_interopRequireDefault(_helpersTryCreate);var _behaviorsDocumentManifestBehavior=__webpack_require__(448);var _behaviorsDocumentManifestBehavior2=_interopRequireDefault(_behaviorsDocumentManifestBehavior);var _behaviorsDocumentUserActivity=__webpack_require__(449);var _behaviorsDocumentUserActivity2=_interopRequireDefault(_behaviorsDocumentUserActivity);function initDocument(options){var playerStateManager=new _helpersA11yHelper.PlayerStateManager;var positionOptions=options.positionOptions||{};var playerComponent=(0,_helpersTryCreate2["default"])(_componentsDocumentPlayer2["default"],options.presentationElement);var fullscreenTarget=(0,_helpersTryCreate2["default"])(_componentsFullscreenTarget2["default"],options.presentationElement,{},undefined,playerStateManager);var scroll=(0,_helpersTryCreate2["default"])(_componentsScroll2["default"],options.scrollElement,options.scrollOptions);if(!options.tocOptions.aspectRatio){options.tocOptions.aspectRatio=options.scrollOptions.aspectRatio}var toc=(0,_helpersTryCreate2["default"])(_componentsToc2["default"],options.tocElement,options.tocOptions);var pagination=(0,_helpersTryCreate2["default"])(_componentsPagination2["default"],options.paginationElement,options.positionOptions);var progress=(0,_helpersTryCreate2["default"])(_componentsDiscreteProgress2["default"],options.progressElement,options.positionOptions);var toolbar=(0,_helpersTryCreate2["default"])(_componentsToolbar2["default"],options.toolbarElement,(0,_lodashAssign2["default"])({checkFullscreenAPI:true},options.toolbarOptions),undefined,undefined,undefined,options.toolbarA11yOptions&&options.toolbarA11yOptions.a11y);var keyboard=_componentsKeyboard2["default"].create(window.document,{shouldPreventScroll:false});_behaviorsDocumentManifestBehavior2["default"].create({
toc:toc,scroll:scroll,fullscreenTarget:fullscreenTarget},options.manifestOptions,options.textOverlayOptions);_behaviorsDocumentUserActivity2["default"].create({player:playerComponent,fullscreenTarget:fullscreenTarget,toolbar:toolbar,scroll:scroll,toc:toc,keyboard:keyboard});var documentPlayer=_behaviorsDocument2["default"].create({behaviorOptions:options.documentBehaviorOptions,positionOptions:positionOptions,fullscreenTarget:fullscreenTarget,toc:toc,scroll:scroll,pagination:pagination,progress:progress,toolbar:toolbar,keyboard:keyboard});return documentPlayer}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersAssertDefined=__webpack_require__(440);var _helpersAssertDefined2=_interopRequireDefault(_helpersAssertDefined);var _helpersToNumber=__webpack_require__(172);var _helpersToNumber2=_interopRequireDefault(_helpersToNumber);var DEFAULT_ZOOM=1;var DocumentBehavior=function(_EventListener){_inherits(DocumentBehavior,_EventListener);function DocumentBehavior(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var behaviorOptions=_ref.behaviorOptions;var positionOptions=_ref.positionOptions;var fullscreenTarget=_ref.fullscreenTarget;var toc=_ref.toc;var scroll=_ref.scroll;var pagination=_ref.pagination;var progress=_ref.progress;var toolbar=_ref.toolbar;var keyboard=_ref.keyboard;_classCallCheck(this,DocumentBehavior);_get(Object.getPrototypeOf(DocumentBehavior.prototype),"constructor",this).call(this);(0,_helpersAssertDefined2["default"])(positionOptions,"Document behavior expects to be passed position options");(0,_helpersAssertDefined2["default"])(positionOptions.position,"Document behavior expects positionOptions to have a position property");(0,_helpersAssertDefined2["default"])(positionOptions.length,"Document behavior expects positionOptions to have a length property");this.options=behaviorOptions;this.position=(0,_helpersToNumber2["default"])(positionOptions.position,0);this.maxPosition=positionOptions.length-1;this.zoomScale=DEFAULT_ZOOM;this.fullscreenTarget=fullscreenTarget;this.toc=toc;this.scroll=scroll;this.pagination=pagination;this.progress=progress;this.toolbar=toolbar;this.keyboard=keyboard}_createClass(DocumentBehavior,[{key:"beforeInit",value:function beforeInit(){var events=[[this.scroll,"onScrolledToPosition",this._updatePositionFromScroll],[this.scroll,"onViewedPosition",this._updateViewedStatus],[this.toc,"onTocPositionChange",this._updatePosition],[this.toc,"onTocToggled",this._updateToolbarStyle],[this.progress,"positionClick",this._updatePosition],[this.progress,"positionDrag",this._updatePosition],[this.toolbar,"enterFullscreen",this._requestEnterFullscreen],[this.toolbar,"exitFullscreen",this._requestExitFullscreen],[this.toolbar,"next",this._goToNextSlide],[this.toolbar,"previous",this._goToPreviousSlide],[this.toolbar,"zoom",this._updateZoom],[this.toolbar,"hcmToggle",this._updateHighContrastMode],[this.keyboard,"rightArrow",this._onRightKeyPress],[this.keyboard,"leftArrow",this._onLeftKeyPress],[this.fullscreenTarget,"changeFullscreen",this._handleFullscreenChanged]].filter(function(_ref2){var _ref22=_slicedToArray(_ref2,1);var target=_ref22[0];return target});this.addEvents.apply(this,_toConsumableArray(events))}},{key:"_updateZoom",value:function _updateZoom(zoomScale){(0,_lodashInvoke2["default"])(this.scroll,"zoom",zoomScale);this._handleZoomChange(zoomScale)}},{key:"_updateHighContrastMode",value:function _updateHighContrastMode(isHcmOn){(0,_lodashInvoke2["default"])(this.scroll,"hcmToggle",isHcmOn)}},{key:"_updatePosition",value:function _updatePosition(position){this.position=(0,_helpersToNumber2["default"])(position);(0,_lodashInvoke2["default"])(this.scroll,"changePosition",this.position);(0,_lodashInvoke2["default"])(this.pagination,"changePosition",this.position);(0,_lodashInvoke2["default"])(this.progress,"changePosition",this.position,true);(0,_lodashInvoke2["default"])(this.toc,"changePosition",this.position)}},{key:"_updateToolbarStyle",value:function _updateToolbarStyle(){(0,_lodashInvoke2["default"])(this.scroll,"onResize");(0,_lodashInvoke2["default"])(this.toolbar,"toggleTocToolbarStyle")}},{key:"_updatePositionFromScroll",value:function _updatePositionFromScroll(position){this.position=(0,_helpersToNumber2["default"])(position);(0,_lodashInvoke2["default"])(this.pagination,"changePosition",this.position);(0,_lodashInvoke2["default"])(this.progress,"changePosition",this.position,true);(0,_lodashInvoke2["default"])(this.toc,"changePosition",this.position)}},{key:"_updateViewedStatus",value:function _updateViewedStatus(position){(0,_lodashInvoke2["default"])(this.toc,"setViewedStatus",position)}},{key:"_onLeftKeyPress",value:function _onLeftKeyPress(){if(!this.isZoomedIn){this._goToPreviousSlide()}}},{key:"_onRightKeyPress",value:function _onRightKeyPress(){if(!this.isZoomedIn){this._goToNextSlide()}}},{key:"_goToNextSlide",value:function _goToNextSlide(){if(this.position===this.maxPosition){return}this._updatePosition(this.position+1)}},{key:"_goToPreviousSlide",value:function _goToPreviousSlide(){if(this.position===0){return}this._updatePosition(this.position-1)}},{key:"_requestEnterFullscreen",value:function _requestEnterFullscreen(){if(typeof this.fullscreenTarget==="undefined"){return}this.fullscreenTarget.fullscreen=true}},{key:"_requestExitFullscreen",value:function _requestExitFullscreen(){if(typeof this.fullscreenTarget==="undefined"){return}this.fullscreenTarget.fullscreen=false}},{key:"_handleFullscreenChanged",value:function _handleFullscreenChanged(isFullscreen){(0,_lodashInvoke2["default"])(this,"options.callbacks.onFullscreen",isFullscreen)}},{key:"_handleZoomChange",value:function _handleZoomChange(zoomScale){this.zoomScale=zoomScale}},{key:"isZoomedIn",get:function get(){return this.zoomScale>DEFAULT_ZOOM}}]);return DocumentBehavior}(_coreEventListener2["default"]);exports["default"]=DocumentBehavior;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=assertDefined;function assertDefined(arg,message){if(typeof arg==="undefined"){throw new TypeError(message)}}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _lodashThrottle=__webpack_require__(174);var _lodashThrottle2=_interopRequireDefault(_lodashThrottle);var _linkedinSlideshareClientUtils=__webpack_require__(76);var _ui=__webpack_require__(61);var _ui2=_interopRequireDefault(_ui);var MOUSE_MOVE_THROTTLE_MS=300;var DocumentPlayerComponent=function(_UIComponent){_inherits(DocumentPlayerComponent,_UIComponent);function DocumentPlayerComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var document=arguments.length<=2||arguments[2]===undefined?element.ownerDocument:arguments[2];return function(){_classCallCheck(this,DocumentPlayerComponent);_get(Object.getPrototypeOf(DocumentPlayerComponent.prototype),"constructor",this).call(this,element);_linkedinSlideshareClientUtils.events.mixin(this);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{classes:{initialized:"player-initialized",idle:"ssplayer-idle",isZoomed:"ssplayer-is-zoomed"}});this.document=document;this.isMouseover=false}.apply(this,arguments)}_createClass(DocumentPlayerComponent,[{key:"beforeInit",value:function beforeInit(){var eventsToAdd=[];eventsToAdd.push([this.element,"mouseenter",this.onMouseEnter],[this.element,"mousemove",(0,_lodashThrottle2["default"])(this.onMouseMove,MOUSE_MOVE_THROTTLE_MS)],[this.element,"mouseleave",this.onMouseLeave]);this.addEvents.apply(this,eventsToAdd);this.adapter.addClass(this.adaptedElement,this.options.classes.initialized)}},{key:"onMouseEnter",value:function onMouseEnter(){this.isMouseover=true;this.emit("mouseEnter")}},{key:"onMouseMove",value:function onMouseMove(){this.emit("mouseMove")}},{key:"onMouseLeave",value:function onMouseLeave(){this.isMouseover=false;this.emit("mouseLeave")}},{key:"toggleToolbar",value:function toggleToolbar(showToolbar){this.adapter.toggleClass(this.adaptedElement,this.options.classes.idle,!showToolbar)}},{key:"setIsZoomed",value:function setIsZoomed(isZoomed){this.adaptedElement.toggleClass(this.options.classes.isZoomed,isZoomed)}},{key:"idle",set:function set(isIdle){this.toggleToolbar(!isIdle)}}]);return DocumentPlayerComponent}(_ui2["default"]);exports["default"]=DocumentPlayerComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _Object$freeze=__webpack_require__(129)["default"];var _Array$from=__webpack_require__(1)["default"];var _Object$keys=__webpack_require__(123)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDebounce=__webpack_require__(206);var _lodashDebounce2=_interopRequireDefault(_lodashDebounce);var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _screenfull=__webpack_require__(139);var _screenfull2=_interopRequireDefault(_screenfull);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _track=__webpack_require__(443);var _track2=_interopRequireDefault(_track);var _helpersAssertDefined=__webpack_require__(440);var _helpersAssertDefined2=_interopRequireDefault(_helpersAssertDefined);var _helpersToNumber=__webpack_require__(172);var _helpersToNumber2=_interopRequireDefault(_helpersToNumber);var _helpersSlidesResetSlide=__webpack_require__(153);var _helpersSlidesResetSlide2=_interopRequireDefault(_helpersSlidesResetSlide);var _helpersSlidesCreateSlideImage=__webpack_require__(445);var _helpersSlidesCreateSlideImage2=_interopRequireDefault(_helpersSlidesCreateSlideImage);var DEFAULT_VIEW_DEBOUNCE_TIME=200;var SUPPORTED_SLIDE_TYPES=_Object$freeze({image:"image"});var VISIBLE_PAGE_BUFFER=3;var ScrollComponent=function(_TrackComponent){_inherits(ScrollComponent,_TrackComponent);function ScrollComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var window=arguments.length<=2||arguments[2]===undefined?element.ownerDocument.defaultView:arguments[2];return function(){_classCallCheck(this,ScrollComponent);_get(Object.getPrototypeOf(ScrollComponent.prototype),"constructor",this).call(this,element,options,window);this.options=(0,_lodashDefaultsdeep2["default"])(this.options,{constrainHeight:false,heightOffset:0,viewingStatusDebounceTime:DEFAULT_VIEW_DEBOUNCE_TIME,classes:{initialized:"ssplayer-scroll-initialized",isFullWidth:"ssplayer-scroll-is-full-width",highContrastActive:"ssplayer-hcm-active"}});(0,_helpersAssertDefined2["default"])(this.options.aspectRatio,"Scroll Component expects an aspectRatio in options");this.viewingStatusDebounceTime=this.options.viewingStatusDebounceTime;this.aspectRatio=this.options.aspectRatio;this.heightOffset=this.options.heightOffset;this.requestedSlideIndices={};this.zoomScale=1}.apply(this,arguments)}_createClass(ScrollComponent,[{key:"beforeInit",value:function beforeInit(){_get(Object.getPrototypeOf(ScrollComponent.prototype),"beforeInit",this).call(this);var slideClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.slide);this.debounceOnViewed=(0,_lodashDebounce2["default"])(this._markPagesAsViewed,this.viewingStatusDebounceTime);this.$slides=this.adapter.findAll(this.$track,"."+slideClass);this._setupEvents(this.$slides);this.applySlideConfigs(this.options.initialSlideConfigs);this._setDimensions();this.changePosition(this.position,true);var initializedClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.initialized);this.adapter.addClass(this.adaptedElement,initializedClass);this.onScroll()}},{key:"_setupEvents",value:function _setupEvents($slides){var slides=this.adapter.restore($slides);this.addEvents.apply(this,_toConsumableArray(slides.map(function(el){return[el,"dragstart",function(event){return event.preventDefault()}]})))}},{key:"onScroll",value:function onScroll(){var previousViewPositions=this.viewPositions.slice();_get(Object.getPrototypeOf(ScrollComponent.prototype),"onScroll",this).call(this);this._loadOffsetsForIndex(this.position);if(previousViewPositions[0]!==this.viewPositions[0]||previousViewPositions[1]!==this.viewPositions[1]){this._onPagesViewed(previousViewPositions)}}},{key:"_onPagesViewed",value:function _onPagesViewed(_ref){var _ref2=_slicedToArray(_ref,2);var prevStartPosition=_ref2[0];var prevEndPosition=_ref2[1];var _viewPositions=_slicedToArray(this.viewPositions,2);var startPosition=_viewPositions[0];var endPosition=_viewPositions[1];if(startPosition!==this.position){this._onPageActive(startPosition);this.emit("onScrolledToPosition",startPosition)}var newViewPositions=[startPosition,endPosition];if(startPosition<=prevEndPosition&&startPosition>=prevStartPosition){newViewPositions[0]=prevEndPosition+1}if(endPosition>=prevStartPosition&&endPosition<=prevEndPosition){newViewPositions[1]=prevStartPosition-1}if(newViewPositions[1]-newViewPositions[0]>=0){var newViewedRange=_Array$from(Array(newViewPositions[1]-newViewPositions[0]+1),function(e,i){return i+newViewPositions[0]});this.debounceOnViewed(newViewedRange)}}},{key:"_onPageActive",value:function _onPageActive(index){this.position=index;(0,_lodashInvoke2["default"])(this,"options.callbacks.onSlideActive",{index:index})}},{key:"_markPagesAsViewed",value:function _markPagesAsViewed(positions){for(var i=0,len=positions.length;i<len;i+=1){(0,_lodashInvoke2["default"])(this,"options.callbacks.onSlideViewed",{index:positions[i]});this.emit("onViewedPosition",positions[i])}}},{key:"onResize",value:function onResize(){_get(Object.getPrototypeOf(ScrollComponent.prototype),"onResize",this).call(this);this._setDimensions();this.changePosition(this.position,true);this.onScroll()}},{key:"_setDimensions",value:function _setDimensions(){var containerWidth=this.adapter.getWidth(this.adaptedElement);var slideWidth=containerWidth*this.zoomScale;var slideHeight=slideWidth/this.aspectRatio;var isFullWidthClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.isFullWidth);if(_screenfull2["default"].element===this.element||this.options.constrainHeight){var heightOffset=_screenfull2["default"].element===this.element.parentElement?0:this.heightOffset;var elementHeight=this.adapter.getHeight(this.adaptedElement)-heightOffset;if(slideHeight>elementHeight&&this.adapter.getHeight(this.adaptedElement)>0){slideHeight=elementHeight*this.zoomScale;slideWidth=slideHeight*this.aspectRatio}}slideWidth=Math.ceil(slideWidth);slideHeight=Math.floor(slideHeight);if(slideWidth===containerWidth){this.element.classList.add(isFullWidthClass)}else{this.element.classList.remove(isFullWidthClass)}this.adapter.setWidth(this.$slides,slideWidth);this.adapter.setHeight(this.$slides,slideHeight);this.slideWidth=slideWidth;this.slideHeight=slideHeight}},{key:"applySlideConfigs",value:function applySlideConfigs(configs){var _this=this;_Object$keys(configs).forEach(function(index){_this.applySlideConfigForType(index,configs[index].type,configs[index].config)})}},{key:"applySlideConfigForType",value:function applySlideConfigForType(index,type,config){switch(type){case SUPPORTED_SLIDE_TYPES.image:this.applyImageSlideConfig(index,config);break;default:throw new Error("Cannot generate slide node for type: "+type)}}},{key:"_validateImageSlideConfig",value:function _validateImageSlideConfig(index,config){if(!this._isValidIndex(index)){throw new RangeError("Attempting to apply a config to out of range index: "+index)}if(typeof config.src!=="string"){throw new TypeError("No src string in slide config at index: "+index)}}},{key:"applyImageSlideConfig",value:function applyImageSlideConfig(index,config){this._validateImageSlideConfig(index,config);var slideClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.slide);var indexAttribute=_linkedinJsecure2["default"].htmlEncode(this.options.attrs.index);var shouldRenderPage=this.shouldRenderPage(index);var $slide=this._getSlideElement(index);if(!shouldRenderPage){(0,_helpersSlidesResetSlide2["default"])({slide:this.adapter.restore($slide)[0],slideClass:slideClass,indexAttribute:indexAttribute,index:index,clearAttrs:_Object$keys(this.options.attrs)})}var lazyImageClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.lazyImage);var dataSrc=_linkedinJsecure2["default"].sanitizeUrl(config.src);var image=(0,_helpersSlidesCreateSlideImage2["default"])({dataSrc:dataSrc,lazyImageClass:lazyImageClass});var slide=this.adapter.restore($slide)[0];var isRerender=slide.children.length;var shouldSwapInPlace=shouldRenderPage&&isRerender;if(shouldSwapInPlace){slide.children[0].setAttribute("data-src",dataSrc)}else{slide.appendChild(image)}var slideAttrType=_linkedinJsecure2["default"].htmlEncode(this.options.attrs.type);slide.setAttribute(slideAttrType,SUPPORTED_SLIDE_TYPES.image);(0,_lodashInvoke2["default"])(this,"options.callbacks.onSlideConfigApplied",{slide:slide,index:(0,_helpersToNumber2["default"])(index)});var previouslyRequested=this.requestedSlideIndices[index];if(previouslyRequested){delete this.requestedSlideIndices[index]}if(previouslyRequested||shouldRenderPage){var inPlaceImage=undefined;if(shouldSwapInPlace){inPlaceImage=image}this._loadImageSlide($slide,index,inPlaceImage)}}},{key:"shouldRenderPage",value:function shouldRenderPage(index){return index<=this.viewPositions[1]+VISIBLE_PAGE_BUFFER&&index>=this.viewPositions[0]-VISIBLE_PAGE_BUFFER}},{key:"changePosition",value:function changePosition(position){var forceUpdate=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var newPos=Math.max(0,Math.min(position||0,this.numPages-1));if(newPos===this.position&&!forceUpdate){return}var $slide=this._getSlideElement(newPos);$slide[0].focus();var scrollElement=this.adapter.restore(this.adaptedElement)[0];scrollElement.scrollTop=this.$slides[newPos].offsetTop;this._onPageActive(newPos)}},{key:"zoom",value:function zoom(zoomScale){this.zoomScale=zoomScale;this.onResize()}},{key:"hcmToggle",value:function hcmToggle(isHcmOn){var highContrastActiveClass=this.options.classes.highContrastActive;this.element.classList.toggle(highContrastActiveClass,isHcmOn)}},{key:"_isValidIndex",value:function _isValidIndex(index){return index>=0&&index<this.numPages}},{key:"_loadOffsetsForIndex",value:function _loadOffsetsForIndex(index){var _this2=this;var numViewed=this.viewPositions[1]-this.viewPositions[0];var offsets=numViewed>=0?_Array$from(Array(numViewed+1+VISIBLE_PAGE_BUFFER*2),function(e,i){return i+_this2.viewPositions[0]-VISIBLE_PAGE_BUFFER}):[index];offsets.filter(function(position){return _this2._isValidIndex(position)}).forEach(function(position){return _this2._tryLoadIndex(position)})}},{key:"_tryLoadIndex",value:function _tryLoadIndex(index){var $slide=this._getSlideElement(index);var _options$classes=this.options.classes;var slideLoading=_options$classes.slideLoading;var slideLoaded=_options$classes.slideLoaded;if(this.adapter.hasClass($slide,slideLoading)||this.adapter.hasClass($slide,slideLoaded)){return}this._loadSlideAtIndex($slide,index)}},{key:"_loadSlideAtIndex",value:function _loadSlideAtIndex($slide,index){var slide=this.adapter.restore($slide)[0];if(!slide.hasAttribute(this.options.attrs.type)){if(!this.requestedSlideIndices[index]){this.requestedSlideIndices[index]=true;(0,_lodashInvoke2["default"])(this,"options.callbacks.onNeedSlideConfig",{index:index})}return}var type=slide.getAttribute(this.options.attrs.type);switch(type){case SUPPORTED_SLIDE_TYPES.image:this._loadImageSlide($slide,index);break;default:throw new Error("Cannot load slide content at index "+index+" for unsupported type: "+type)}}},{key:"_loadImageSlide",value:function _loadImageSlide($slide,index,inPlaceImage){var _this3=this;var _options$classes2=this.options.classes;var slideLoadError=_options$classes2.slideLoadError;var slideLoadSuccess=_options$classes2.slideLoadSuccess;var slideLoaded=_options$classes2.slideLoaded;var slideLoading=_options$classes2.slideLoading;this.adapter.addClass($slide,slideLoading);var $img=this.adapter.children($slide,"img."+this.options.classes.lazyImage);var src=this.adapter.getData(inPlaceImage?this.adapter.adapt(inPlaceImage):$img,"src");var img=inPlaceImage||document.createElement("img");img.onerror=function(){_this3.adapter.removeClass($slide,slideLoading);_this3.adapter.addClass($slide,slideLoaded+" "+slideLoadError);(0,_lodashInvoke2["default"])(_this3,"options.callbacks.onSlideLoadError",{index:index})};img.onload=function(){_this3.adapter.setAttr($img,"src",img.src);_this3.adapter.removeClass($slide,slideLoading);_this3.adapter.addClass($slide,slideLoaded+" "+slideLoadSuccess)};this.adapter.setAttr(this.adapter.adapt(img),"src",src)}},{key:"_getSlideElement",value:function _getSlideElement(index){return this.adapter.find(this.$track,"["+this.options.attrs.index+'="'+index+'"]')}},{key:"getTrackElement",value:function getTrackElement(index){return this.$slides[index]}},{key:"viewThreshold",get:function get(){return Math.min(this.scrollingElement.offsetHeight,this.slideHeight)/2}}]);return ScrollComponent}(_track2["default"]);exports["default"]=ScrollComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _lodashDebounce=__webpack_require__(206);var _lodashDebounce2=_interopRequireDefault(_lodashDebounce);var _lodashThrottle=__webpack_require__(174);var _lodashThrottle2=_interopRequireDefault(_lodashThrottle);var _control=__webpack_require__(186);var _control2=_interopRequireDefault(_control);var _helpersAssertDefined=__webpack_require__(440);var _helpersAssertDefined2=_interopRequireDefault(_helpersAssertDefined);var _helpersSlidesCreateTrack=__webpack_require__(444);var _helpersSlidesCreateTrack2=_interopRequireDefault(_helpersSlidesCreateTrack);var RESIZE_THROTTLE_TIME=200;var SCROLL_DEBOUNCE_TIME=100;var SCROLL_MAX_DEBOUNCE_TIME=300;var TrackComponent=function(_ControlComponent){_inherits(TrackComponent,_ControlComponent);function TrackComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var window=arguments.length<=2||arguments[2]===undefined?element.ownerDocument.defaultView:arguments[2];return function(){_classCallCheck(this,TrackComponent);_get(Object.getPrototypeOf(TrackComponent.prototype),"constructor",this).call(this,element);this.options=(0,_lodashDefaultsdeep2["default"])({},options,{startPosition:0,classes:{track:"ssplayer-scroll-track",slide:"ssplayer-scroll-slide",slideLoadError:"ssplayer-scroll-slide-load-error",slideLoadSuccess:"ssplayer-scroll-slide-load-success",slideLoaded:"ssplayer-scroll-slide-loaded",slideLoading:"ssplayer-scroll-slide-loading",lazyImage:"ssplayer-scroll-lazy-image"},attrs:{index:"data-ssplayer-slide-index",type:"data-ssplayer-slide-type"}});(0,_helpersAssertDefined2["default"])(this.options.numPages,"Track Component expects a numPages in options");this.position=this.options.startPosition;this.viewPositions=[this.options.numPages,-1];this.numPages=this.options.numPages;this.window=window}.apply(this,arguments)}_createClass(TrackComponent,[{key:"beforeInit",value:function beforeInit(){var trackClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.track);var slideClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.slide);var slideAttrIndex=_linkedinJsecure2["default"].htmlEncode(this.options.attrs.index);var track=(0,_helpersSlidesCreateTrack2["default"])(trackClass,slideClass,slideAttrIndex,this.numPages);this.$track=this.adapter.adapt(track);this.scrollingElement.appendChild(track);this.addEvents([this.window,"resize",(0,_lodashThrottle2["default"])(this.onResize,RESIZE_THROTTLE_TIME)],[this.scrollingElement,"scroll",(0,_lodashDebounce2["default"])(this.onScroll,SCROLL_DEBOUNCE_TIME,{maxWait:SCROLL_MAX_DEBOUNCE_TIME})])}},{key:"onResize",value:function onResize(){this.emit("resize")}},{key:"onScroll",value:function onScroll(){var scrollingElement=this.scrollingElement;var top=scrollingElement.scrollTop;var bottom=top+scrollingElement.offsetHeight;var viewThreshold=this.viewThreshold;var numPages=this.numPages;var viewedStartBound=top+viewThreshold;var viewedEndBound=bottom-viewThreshold;var viewPositions=[];for(var i=0;i<numPages;i+=1){var $slide=this.getTrackElement(i);var pageTop=$slide.offsetTop;var pageBottom=pageTop+$slide.offsetHeight;if(pageTop<viewedEndBound&&pageBottom>viewedStartBound){if(typeof viewPositions[0]!=="number"){viewPositions[0]=i}viewPositions[1]=i}else if(viewPositions.length){break}}if(viewPositions.length){this.viewPositions=viewPositions}}},{key:"getTrackElement",value:function getTrackElement(index){return this.$track[0].children[index]}},{key:"scrollingElement",get:function get(){return this.element}},{key:"viewThreshold",get:function get(){return 0}}]);return TrackComponent}(_control2["default"]);exports["default"]=TrackComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=createTrack;var _slidesCreateSlide=__webpack_require__(152);var _slidesCreateSlide2=_interopRequireDefault(_slidesCreateSlide);function createTrack(trackClass,slideClass,indexAttribute,numPages){var track=document.createElement("ul");track.setAttribute("class",trackClass);for(var index=0;index<numPages;index+=1){var slide=(0,_slidesCreateSlide2["default"])({index:index,slideClass:slideClass,indexAttribute:indexAttribute});track.appendChild(slide)}return track}module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=createSlideImage;function createSlideImage(_ref){var dataSrc=_ref.dataSrc;var lazyImageClass=_ref.lazyImageClass;var image=document.createElement("img");image.setAttribute("class",lazyImageClass);if(dataSrc){image.setAttribute("data-src",dataSrc)}return image}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashDefaultsdeep=__webpack_require__(59);var _lodashDefaultsdeep2=_interopRequireDefault(_lodashDefaultsdeep);var _linkedinJsecure=__webpack_require__(140);var _linkedinJsecure2=_interopRequireDefault(_linkedinJsecure);var _track=__webpack_require__(443);var _track2=_interopRequireDefault(_track);var _helpersSlidesCreateSlideImage=__webpack_require__(445);var _helpersSlidesCreateSlideImage2=_interopRequireDefault(_helpersSlidesCreateSlideImage);var _helpersAssertDefined=__webpack_require__(440);var _helpersAssertDefined2=_interopRequireDefault(_helpersAssertDefined);var THUMBNAIL_WIDTH_PX=150;var THUMBNAIL_WIDTH_PX_LARGE=175;var LARGE_SCREEN_SIZE=1100;var VISIBLE_ITEM_BUFFER=7;var TocComponent=function(_TrackComponent){_inherits(TocComponent,_TrackComponent);function TocComponent(element){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var window=arguments.length<=2||arguments[2]===undefined?element.ownerDocument.defaultView:arguments[2];return function(){_classCallCheck(this,TocComponent);_get(Object.getPrototypeOf(TocComponent.prototype),"constructor",this).call(this,element,options,window);this.enabled=options.enabled;if(!this.enabled){this.adaptedElement.addClass("ssplayer-toc-hidden")}this.onTocElementClicked=this.onTocElementClicked.bind(this);this.options=(0,_lodashDefaultsdeep2["default"])(this.options,{tocTitle:"Document Thumbnails",viewA11yText:"View thumbnails",hideA11yText:"Hide thumbnails",viewingStatusMap:null,classes:{toc:"ssplayer-toc",tocTitle:"ssplayer-toc-title",tocThumbnails:"ssplayer-toc-thumbnail-container",activeThumbnail:"ssplayer-toc-thumbnail-active",viewedThumbnail:"ssplayer-toc-thumbnail-viewed",viewingStatus:"ssplayer-toc-thumbnail-marker",tocThumbnailContainerMinimized:"ssplayer-toc-minimized",toggleButtonHidden:"ssplayer-toc-view-toggle-button-hidden",toggleButtonA11yText:"ssplayer-toc-view-toggle-button-text-ally",toggleButton:"ssplayer-toc-view-toggle-button"}});(0,_helpersAssertDefined2["default"])(this.options.aspectRatio,"TOC Component expects an aspectRatio in options");this.title=this.options.tocTitle;this.toggleButtonA11yText=this.options.hideA11yText;this.viewingStatusMap=this.options.viewingStatusMap;this.aspectRatio=this.options.aspectRatio;this.requestedSlideIndices={}}.apply(this,arguments)}_createClass(TocComponent,[{key:"beforeInit",value:function beforeInit(){if(!this.enabled){return}var toggleButtonClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.toggleButton);var tocThumbnailsClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.tocThumbnails);this.$toggleButton=this.adaptedElement.find("."+toggleButtonClass);this.$tocThumbnailContainer=this.adaptedElement.find("."+tocThumbnailsClass)[0];_get(Object.getPrototypeOf(TocComponent.prototype),"beforeInit",this).call(this);this._initThumbnails();this.addEvents([this.$toggleButton,"click",this.toggleTocVisibility]);this.changePosition(this.position,true);this.onScroll()}},{key:"onScroll",value:function onScroll(){_get(Object.getPrototypeOf(TocComponent.prototype),"onScroll",this).call(this);this._loadVisibleThumbnails()}},{key:"_loadVisibleThumbnails",value:function _loadVisibleThumbnails(){var offset=this.viewPositions[1]-this.viewPositions[0]+VISIBLE_ITEM_BUFFER*2;for(var i=0;i<offset+1;i+=1){var index=i+this.viewPositions[0]-VISIBLE_ITEM_BUFFER;if(index>=0&&index<this.numPages){this._loadThumbnail(index)}}}},{key:"_loadThumbnail",value:function _loadThumbnail(index){var lazyImageClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.lazyImage);
var $slide=this._getSlideElement(index);var $image=this.adapter.find($slide,"."+lazyImageClass);var dataSrc=this.adapter.getData($image,"src");if(dataSrc&&!$image.attr("src")){$image.attr("src",_linkedinJsecure2["default"].sanitizeUrl(dataSrc))}else{this.requestedSlideIndices[index]=true}}},{key:"onTocElementClicked",value:function onTocElementClicked(index){this.emit("onTocPositionChange",index)}},{key:"toggleTocVisibility",value:function toggleTocVisibility(){var tocThumbnailContainerMinimizedClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.tocThumbnailContainerMinimized);if(this.adaptedElement.hasClass(tocThumbnailContainerMinimizedClass)){this.adaptedElement.removeClass(tocThumbnailContainerMinimizedClass);this.title=this.options.tocTitle;this.toggleButtonA11yText=this.options.hideA11yText}else{this.adaptedElement.addClass(tocThumbnailContainerMinimizedClass);this.title=this.options.viewA11yText;this.toggleButtonA11yText=this.options.viewA11yText}this.emit("onTocToggled")}},{key:"applyImageSlideConfig",value:function applyImageSlideConfig(index,config){var lazyImageClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.lazyImage);var $slide=this._getSlideElement(index);var $image=this.adapter.find($slide,"."+lazyImageClass);var dataSrc=_linkedinJsecure2["default"].sanitizeUrl(config.src);$image.attr("data-src",dataSrc);if(this.requestedSlideIndices[index]){this._loadThumbnail(index);delete this.requestedSlideIndices[index]}}},{key:"changePosition",value:function changePosition(position,forceUpdate){if(!this.enabled){return}var newPos=Math.max(0,Math.min(position||0,this.numPages-1));if(!forceUpdate&&newPos===this.position){return}this._updateTocPosition(newPos);var $slide=this._getSlideElement(newPos);$slide[0].focus();this.position=newPos}},{key:"setViewedStatus",value:function setViewedStatus(position){if(!this.viewingStatusMap){return}this.viewingStatusMap[position]=true;var viewedThumbnailClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.viewedThumbnail);var $tocButton=this.adapter.children(this._getSlideElement(position));$tocButton.addClass(viewedThumbnailClass)}},{key:"_getSlideElement",value:function _getSlideElement(index){return this.adapter.find(this.$track,"["+this.options.attrs.index+'="'+index+'"]')}},{key:"_initThumbnails",value:function _initThumbnails(){var _this=this;this.adapter.children(this.$track).each(function(index,slide){var tocButton=document.createElement("button");if(_this.position===index){var activeThumbnailClass=_linkedinJsecure2["default"].htmlEncode(_this.options.classes.activeThumbnail);tocButton.classList.add(activeThumbnailClass)}if(_this.viewingStatusMap&&_this.viewingStatusMap[index]){var viewedThumbnailClass=_linkedinJsecure2["default"].htmlEncode(_this.options.classes.viewedThumbnail);tocButton.classList.add(viewedThumbnailClass)}var childDiv=document.createElement("div");var viewingStatus=document.createElement("span");var viewingStatusClass=_linkedinJsecure2["default"].htmlEncode(_this.options.classes.viewingStatus);viewingStatus.setAttribute("class",viewingStatusClass);viewingStatus.setAttribute("aria-hidden","true");childDiv.appendChild(viewingStatus);var lazyImageClass=_linkedinJsecure2["default"].htmlEncode(_this.options.classes.lazyImage);var image=(0,_helpersSlidesCreateSlideImage2["default"])({lazyImageClass:lazyImageClass});image.style.width=_linkedinJsecure2["default"].htmlEncode(_this.thumbnailWidth+"px");image.style.height=_linkedinJsecure2["default"].htmlEncode(_this.thumbnailHeight+"px");childDiv.appendChild(image);tocButton.appendChild(childDiv);var pageNumber=document.createElement("p");pageNumber.innerHTML=_linkedinJsecure2["default"].setElementContent(pageNumber,index+1);tocButton.appendChild(pageNumber);tocButton.addEventListener("click",function(){_this.onTocElementClicked(index)});slide.appendChild(tocButton)})}},{key:"onResize",value:function onResize(){_get(Object.getPrototypeOf(TocComponent.prototype),"onResize",this).call(this);this._setDimensions();this.onScroll()}},{key:"_setDimensions",value:function _setDimensions(){var $thumbnails=this.adapter.findAll(this.$track,"."+this.options.classes.lazyImage);this.adapter.setWidth($thumbnails,this.thumbnailWidth);this.adapter.setHeight($thumbnails,this.thumbnailHeight)}},{key:"_updateTocPosition",value:function _updateTocPosition(newPos){var activeThumbnailClass=_linkedinJsecure2["default"].htmlEncode(this.options.classes.activeThumbnail);var $previousActiveSlide=this._getSlideElement(this.position);var $previousActiveSlideThumbnail=this.adapter.children($previousActiveSlide,"button."+this.options.classes.activeThumbnail);this.adapter.removeClass($previousActiveSlideThumbnail,activeThumbnailClass);var $activeSlide=this._getSlideElement(newPos);var $activeSlideThumbnail=this.adapter.children($activeSlide,"button");this.adapter.addClass($activeSlideThumbnail,activeThumbnailClass);$activeSlideThumbnail.focus()}},{key:"scrollingElement",get:function get(){return this.$tocThumbnailContainer}},{key:"tocTitle",get:function get(){return this.adaptedElement.find("."+this.options.classes.tocTitle)}},{key:"title",set:function set(tocTitleText){this.tocTitle.text(tocTitleText)}},{key:"toggleButtonA11yText",get:function get(){return this.adaptedElement.find("."+this.options.classes.toggleButtonA11yText)},set:function set(toggleButtonText){this.toggleButtonA11yText.text(toggleButtonText)}},{key:"isLargeScreen",get:function get(){return this.window.outerWidth>=LARGE_SCREEN_SIZE}},{key:"thumbnailWidth",get:function get(){return this.isLargeScreen?THUMBNAIL_WIDTH_PX_LARGE:THUMBNAIL_WIDTH_PX}},{key:"thumbnailHeight",get:function get(){return Math.round(this.thumbnailWidth/this.aspectRatio)}}]);return TocComponent}(_track2["default"]);exports["default"]=TocComponent;module.exports=exports["default"]},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=tryCreate;function tryCreate(constructor,element){for(var _len=arguments.length,createArgs=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){createArgs[_key-2]=arguments[_key]}return element&&constructor.create.apply(constructor,[element].concat(createArgs))}module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashAssign=__webpack_require__(215);var _lodashAssign2=_interopRequireDefault(_lodashAssign);var _lodashInvoke=__webpack_require__(195);var _lodashInvoke2=_interopRequireDefault(_lodashInvoke);var _lodashDebounce=__webpack_require__(206);var _lodashDebounce2=_interopRequireDefault(_lodashDebounce);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var _helpersDocumentManifest=__webpack_require__(426);var _helpersDocumentManifest2=_interopRequireDefault(_helpersDocumentManifest);var _helpersImageManifestContainer=__webpack_require__(427);var _helpersImageManifestContainer2=_interopRequireDefault(_helpersImageManifestContainer);var RESIZE_DEBOUNCE_MS=200;var DocumentManifestBehavior=function(_EventListener){_inherits(DocumentManifestBehavior,_EventListener);function DocumentManifestBehavior(components){var manifestOptions=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var textOverlayOptions=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];_classCallCheck(this,DocumentManifestBehavior);_get(Object.getPrototypeOf(DocumentManifestBehavior.prototype),"constructor",this).call(this);(0,_lodashAssign2["default"])(this,components);this.manifestOptions=manifestOptions;this.textOverlayOptions=textOverlayOptions;this.imageManifestContainer=new _helpersImageManifestContainer2["default"](window.devicePixelRatio);if(this.toc){this.tocManifestContainer=new _helpersImageManifestContainer2["default"](window.devicePixelRatio)}if(!this.manifestOptions.masterManifestUrl){this.skipEventBinding=true;return}_helpersDocumentManifest2["default"].fetch(this.manifestOptions.masterManifestUrl,{onMaster:this.onLoadMasterManifest.bind(this),onImageResolution:this.onLoadImageManifest.bind(this)})}_createClass(DocumentManifestBehavior,[{key:"beforeInit",value:function beforeInit(){if(this.skipEventBinding)return;var debouncedResize=(0,_lodashDebounce2["default"])(this.onResize,RESIZE_DEBOUNCE_MS);this.addEvents([this.scroll,"resize",debouncedResize]);this.addEvents([this.fullscreenTarget,"changeFullscreen",debouncedResize])}},{key:"onResize",value:function onResize(){var _scroll=this.scroll;var slideWidth=_scroll.slideWidth;var slideHeight=_scroll.slideHeight;this.imageManifestContainer.updateOptimalManifest(slideWidth,slideHeight);var manifest=this.imageManifestContainer.getOptimalImageManifest();if(manifest){this._applyImageManifest(manifest)}}},{key:"onLoadMasterManifest",value:function onLoadMasterManifest(manifest){var _this=this;manifest.perResolutions.forEach(function(_ref){var width=_ref.width;var height=_ref.height;_this.imageManifestContainer.registerImageManifest(width,height);if(_this.toc){_this.tocManifestContainer.registerImageManifest(width,height)}});this.imageManifestContainer.updateOptimalManifest(this.scroll.slideWidth,this.scroll.slideHeight);if(this.toc){this.tocManifestContainer.updateOptimalManifest(this.toc.thumbnailWidth,this.toc.thumbnailHeight)}(0,_lodashInvoke2["default"])(this.textOverlayOptions,"setPdfUrl",manifest.transcribedDocumentUrl)}},{key:"onLoadImageManifest",value:function onLoadImageManifest(manifest,_ref2){var width=_ref2.width;var height=_ref2.height;this.imageManifestContainer.populateImageManifest(manifest,width,height);if(this.imageManifestContainer.isOptimalDimension(width,height)){this._applyImageManifest(manifest)}if(this.toc&&this.tocManifestContainer.isOptimalDimension(width,height)){this._applyImageManifestToTOC(manifest)}}},{key:"_applyImageManifest",value:function _applyImageManifest(manifest){var _this2=this;manifest.pages.forEach(function(imageUrl,index){return(0,_lodashInvoke2["default"])(_this2.scroll,"applyImageSlideConfig",index,{src:imageUrl})})}},{key:"_applyImageManifestToTOC",value:function _applyImageManifestToTOC(manifest){var _this3=this;manifest.pages.forEach(function(imageUrl,index){return(0,_lodashInvoke2["default"])(_this3.toc,"applyImageSlideConfig",index,{src:imageUrl})})}}]);return DocumentManifestBehavior}(_coreEventListener2["default"]);exports["default"]=DocumentManifestBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){var _get=__webpack_require__(41)["default"];var _inherits=__webpack_require__(48)["default"];var _createClass=__webpack_require__(55)["default"];var _classCallCheck=__webpack_require__(58)["default"];var _slicedToArray=__webpack_require__(64)["default"];var _toConsumableArray=__webpack_require__(75)["default"];var _interopRequireDefault=__webpack_require__(38)["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashAssign=__webpack_require__(215);var _lodashAssign2=_interopRequireDefault(_lodashAssign);var _lodashDebounce=__webpack_require__(206);var _lodashDebounce2=_interopRequireDefault(_lodashDebounce);var _coreEventListener=__webpack_require__(111);var _coreEventListener2=_interopRequireDefault(_coreEventListener);var HIDE_TIMER_MS=2500;var DocumentUserActivityBehavior=function(_EventListener){_inherits(DocumentUserActivityBehavior,_EventListener);function DocumentUserActivityBehavior(components){_classCallCheck(this,DocumentUserActivityBehavior);_get(Object.getPrototypeOf(DocumentUserActivityBehavior.prototype),"constructor",this).call(this);(0,_lodashAssign2["default"])(this,components)}_createClass(DocumentUserActivityBehavior,[{key:"beforeInit",value:function beforeInit(){this.debouncedIdleOnTimeout=(0,_lodashDebounce2["default"])(this.idleOnTimeout,HIDE_TIMER_MS);var events=[[this.fullscreenTarget,"changeFullscreen",this.onFullscreen],[this.player,"mouseEnter",this.onUserActivity],[this.player,"mouseMove",this.onUserActivity],[this.player,"mouseLeave",this.onUserActivity],[this.toolbar,"mouseOver",this.onUserActivity],[this.toolbar,"mouseOut",this.onUserActivity],[this.toc,"mouseOver",this.onUserActivity],[this.toc,"mouseOut",this.onUserActivity],[this.keyboard,"tab",this.onUserActivity.bind(this,true)]].filter(function(_ref){var _ref2=_slicedToArray(_ref,1);var target=_ref2[0];return target});this.addEvents.apply(this,_toConsumableArray(events))}},{key:"onFullscreen",value:function onFullscreen(isFullscreen){this.isFullscreen=isFullscreen;this.setControlsVisibility(true)}},{key:"onUserActivity",value:function onUserActivity(overridePlayerMouseover){var isUserActive=overridePlayerMouseover===undefined?this.player.isMouseover:overridePlayerMouseover;if(isUserActive){this.setControlsVisibility(true)}this.debouncedIdleOnTimeout.cancel();if(!(this.isMouseOverToolbar||this.isMouseOverToc)){this.debouncedIdleOnTimeout()}}},{key:"setControlsVisibility",value:function setControlsVisibility(isVisible){this.player.idle=!isVisible}},{key:"idleOnTimeout",value:function idleOnTimeout(){this.setControlsVisibility(false)}},{key:"isMouseOverToolbar",get:function get(){return this.toolbar&&this.toolbar.isMouseOver}},{key:"isMouseOverToc",get:function get(){return this.toc&&this.toc.isMouseOver}}]);return DocumentUserActivityBehavior}(_coreEventListener2["default"]);exports["default"]=DocumentUserActivityBehavior;module.exports=exports["default"]},function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});exports.buildRequestHeader=buildRequestHeader;var _linkedinSlideshareClientUtils=__webpack_require__(76);function buildRequestHeader(){var location=arguments.length<=0||arguments[0]===undefined?window.location:arguments[0];var requestHeaders={};var pageKey=_linkedinSlideshareClientUtils.li.getPageKey();if(pageKey){requestHeaders.pageKey=pageKey}var trackingCode=_linkedinSlideshareClientUtils.url.getTrackingCode(location.href);if(trackingCode){requestHeaders.trackingCode=trackingCode}return requestHeaders}},function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=from;var toStr=Object.prototype.toString;var isCallable=function isCallable(fn){return typeof fn==="function"||toStr.call(fn)==="[object Function]"};var toInteger=function toInteger(value){var number=Number(value);if(isNaN(number)){return 0}if(number===0||!isFinite(number)){return number}return(number>0?1:-1)*Math.floor(Math.abs(number))};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function toLength(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger)};function from(arrayLike){var C=this;var items=Object(arrayLike);if(arrayLike==null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!=="undefined"){if(!isCallable(mapFn)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){T=arguments[2]}}var len=toLength(items.length);var A=isCallable(C)?Object(new C(len)):new Array(len);var k=0;var kValue;while(k<len){kValue=items[k];if(mapFn){A[k]=typeof T==="undefined"?mapFn(kValue,k):mapFn.call(T,kValue,k)}else{A[k]=kValue}k+=1}A.length=len;return A}module.exports=exports["default"]}])})});var ssplayer$1=unwrapExports$$1(ssplayer);var FUNC_ERROR_TEXT="Expected a function";function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}var lodash__basedelay=baseDelay;var FUNC_ERROR_TEXT$1="Expected a function";var nativeMax=Math.max;function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT$1)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}var lodash_restparam=restParam;var defer$1=lodash_restparam(function(func,args){return lodash__basedelay(func,1,args)});var head={task:void 0,next:null};var tail=head;var flushing=false;var requestFlush=void 0;var isNodeJS=false;function flush(){while(head.next){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;if(domain){head.domain=void 0;domain.enter()}try{task()}catch(e){if(isNodeJS){if(domain){domain.exit()}setTimeout(flush,0);if(domain){domain.enter()}throw e}else{setTimeout(function(){throw e},0)}}if(domain){domain.exit()}}flushing=false}if(typeof process!=="undefined"&&process.nextTick){isNodeJS=true;requestFlush=function requestFlush(){process.nextTick(flush)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){requestFlush=setImmediate.bind(window,flush)}else{requestFlush=function requestFlush(){setImmediate(flush)}}}else if(typeof MessageChannel!=="undefined"){var channel$1=new MessageChannel;channel$1.port1.onmessage=flush;requestFlush=function requestFlush(){channel$1.port2.postMessage(0)}}else{requestFlush=function requestFlush(){setTimeout(flush,0)}}function asap(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null};if(!flushing){flushing=true;requestFlush()}}var asap_1=asap;var core=Promise$1;function Promise$1(fn){if(_typeof2(this)!=="object")throw new TypeError("Promises must be constructed via new");if(typeof fn!=="function")throw new TypeError("not a function");var state=null;var value=null;var deferreds=[];var self=this;this.then=function(onFulfilled,onRejected){return new self.constructor(function(resolve,reject){handle(new Handler(onFulfilled,onRejected,resolve,reject))})};function handle(deferred){if(state===null){deferreds.push(deferred);return}asap_1(function(){var cb=state?deferred.onFulfilled:deferred.onRejected;if(cb===null){(state?deferred.resolve:deferred.reject)(value);return}var ret;try{ret=cb(value)}catch(e){deferred.reject(e);return}deferred.resolve(ret)})}function resolve(newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&((typeof newValue==="undefined"?"undefined":_typeof2(newValue))==="object"||typeof newValue==="function")){var then=newValue.then;if(typeof then==="function"){doResolve(then.bind(newValue),resolve,reject);return}}state=true;value=newValue;finale()}catch(e){reject(e)}}function reject(newValue){state=false;value=newValue;finale()}function finale(){for(var i=0,len=deferreds.length;i<len;i++){handle(deferreds[i])}deferreds=null}doResolve(fn,resolve,reject)}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.resolve=resolve;this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=false;try{fn(function(value){if(done)return;done=true;onFulfilled(value)},function(reason){if(done)return;done=true;onRejected(reason)})}catch(ex){if(done)return;done=true;onRejected(ex)}}core.prototype.done=function(onFulfilled,onRejected){var self=arguments.length?this.then.apply(this,arguments):this;self.then(null,function(err){asap_1(function(){throw err})})};function ValuePromise(value){this.then=function(onFulfilled){if(typeof onFulfilled!=="function")return this;return new core(function(resolve,reject){asap_1(function(){try{resolve(onFulfilled(value))}catch(ex){reject(ex)}})})}}ValuePromise.prototype=core.prototype;var TRUE=new ValuePromise(true);var FALSE=new ValuePromise(false);var NULL=new ValuePromise(null);var UNDEFINED=new ValuePromise(undefined);var ZERO$1=new ValuePromise(0);var EMPTYSTRING=new ValuePromise("");core.resolve=function(value){if(value instanceof core)return value;if(value===null)return NULL;if(value===undefined)return UNDEFINED;if(value===true)return TRUE;if(value===false)return FALSE;if(value===0)return ZERO$1;if(value==="")return EMPTYSTRING;if((typeof value==="undefined"?"undefined":_typeof2(value))==="object"||typeof value==="function"){try{var then=value.then;if(typeof then==="function"){return new core(then.bind(value))}}catch(ex){return new core(function(resolve,reject){reject(ex)})}}return new ValuePromise(value)};core.all=function(arr){var args=Array.prototype.slice.call(arr);return new core(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&((typeof val==="undefined"?"undefined":_typeof2(val))==="object"||typeof val==="function")){var then=val.then;if(typeof then==="function"){then.call(val,function(val){res(i,val)},reject);return}}args[i]=val;if(--remaining===0){resolve(args)}}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};core.reject=function(value){return new core(function(resolve,reject){reject(value)})};core.race=function(values){return new core(function(resolve,reject){values.forEach(function(value){core.resolve(value).then(resolve,reject)})})};core.prototype["catch"]=function(onRejected){return this.then(null,onRejected)};core.denodeify=function(fn,argumentCount){argumentCount=argumentCount||Infinity;return function(){var self=this;var args=Array.prototype.slice.call(arguments);return new core(function(resolve,reject){while(args.length&&args.length>argumentCount){args.pop()}args.push(function(err,res){if(err)reject(err);else resolve(res)});var res=fn.apply(self,args);if(res&&((typeof res==="undefined"?"undefined":_typeof2(res))==="object"||typeof res==="function")&&typeof res.then==="function"){resolve(res)}})}};core.nodeify=function(fn){return function(){var args=Array.prototype.slice.call(arguments);var callback=typeof args[args.length-1]==="function"?args.pop():null;var ctx=this;try{return fn.apply(this,arguments).nodeify(callback,ctx)}catch(ex){if(callback===null||typeof callback=="undefined"){return new core(function(resolve,reject){reject(ex)})}else{asap_1(function(){callback.call(ctx,ex)})}}}};core.prototype.nodeify=function(callback,ctx){if(typeof callback!="function")return this;this.then(function(value){asap_1(function(){callback.call(ctx,null,value)})},function(err){asap_1(function(){callback.call(ctx,err)})})};var promise=core;var dom$1=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.createContentLoadedPromise=createContentLoadedPromise;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);function createContentLoadedPromise(){var doc=arguments.length<=0||arguments[0]===undefined?document:arguments[0];return new _promise2["default"](function(resolve){if(doc.readyState==="interactive"||doc.readyState==="complete"){resolve(doc)}else{doc.addEventListener("DOMContentLoaded",function(){return resolve(doc)})}})}var onContentLoaded=createContentLoadedPromise(document);exports.onContentLoaded=onContentLoaded});unwrapExports$$1(dom$1);var eventemitter3=createCommonjsModule$$1(function(module){var has=Object.prototype.hasOwnProperty;var prefix=typeof Object.create!=="function"?"~":false;function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false}function EventEmitter(){}EventEmitter.prototype._events=undefined;EventEmitter.prototype.eventNames=function eventNames(){var events=this._events,names=[],name;if(!events)return names;for(name in events){if(has.call(events,name))names.push(prefix?name.slice(1):name)}if(Object.getOwnPropertySymbols){return names.concat(Object.getOwnPropertySymbols(events))}return names};EventEmitter.prototype.listeners=function listeners(event,exists){var evt=prefix?prefix+event:event,available=this._events&&this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++){ee[i]=available[i].fn}return ee};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if("function"===typeof listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i]}listeners.fn.apply(listeners.context,args)}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j]}listeners[i].fn.apply(listeners[i].context,args)}}}return true};EventEmitter.prototype.on=function on(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.once=function once(event,fn,context){var listener=new EE(fn,context||this,true),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return this;var listeners=this._events[evt],events=[];if(fn){if(listeners.fn){if(listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context){events.push(listeners)}}else{for(var i=0,length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i])}}}}if(events.length){this._events[evt]=events.length===1?events[0]:events}else{delete this._events[evt]}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){if(!this._events)return this;if(event)delete this._events[prefix?prefix+event:event];else this._events=prefix?{}:Object.create(null);return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prefixed=prefix;{module.exports=EventEmitter}});var lib=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.mixin=mixin;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function entries(object){return Object.getOwnPropertyNames(object).map(function(key){return[key,object[key]]})}var Mixin=exports.Mixin=function(){function Mixin(){_classCallCheck(this,Mixin)}_createClass(Mixin,null,[{key:"mixin",value:function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var MixedIn=arguments.length<=1||arguments[1]===undefined?this:arguments[1];for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}var instance=new(Function.prototype.bind.apply(MixedIn,[null].concat(args)));entries(MixedIn.prototype).filter(function(_ref){var _ref2=_slicedToArray(_ref,2);var methodName=_ref2[0];var method=_ref2[1];return typeof method==="function"&&methodName!=="constructor"}).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2);var methodName=_ref4[0];var method=_ref4[1];return target[methodName]=method.bind(instance)});return target}}]);return Mixin}();function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var MixedIn=arguments.length<=1||arguments[1]===undefined?Mixin:arguments[1];for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}return Mixin.mixin.apply(Mixin,[target,MixedIn].concat(args))}});unwrapExports$$1(lib);var events=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.mixin=mixin;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _eventemitter32=_interopRequireDefault(eventemitter3);function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return(0,lib.mixin)(target,_eventemitter32["default"])}});unwrapExports$$1(events);var fn=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.imperative=imperative;var call=Function.prototype.call;function imperative(method){return function(){return call.apply(method,arguments)}}});unwrapExports$$1(fn);var lang=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.isDescendantClass=isDescendantClass;exports.assign=assign;exports.defaults=defaults;exports.entries=entries;function isDescendantClass(child,ancestor){return Boolean(ancestor&&child&&child.prototype&&child.prototype instanceof ancestor)}function assign(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){
sources[_key-1]=arguments[_key]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var key=_ref2[0];var value=_ref2[1];target[key]=value});return target},target)}var hasOwn=(0,fn.imperative)(Object.prototype.hasOwnProperty);function defaults(target){for(var _len2=arguments.length,sources=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){sources[_key2-1]=arguments[_key2]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref3){var _ref32=_slicedToArray(_ref3,2);var key=_ref32[0];var value=_ref32[1];if(!hasOwn(target,key)){target[key]=value}});return target},target)}var slice=(0,fn.imperative)(Array.prototype.slice);var toArray=function toArray(o){return slice(o)};exports.toArray=toArray;function entries(o){return Object.keys(o).map(function(key){return[key,o[key]]})}});unwrapExports$$1(lang);var string=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.capitalize=capitalize;function capitalize(word){if(typeof word==="string"){return word.charAt(0).toUpperCase()+word.substring(1)}return""}});unwrapExports$$1(string);var li=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getUrn=getUrn;exports.getPageKey=getPageKey;var urnMap={clip:"slideShareClip",clipboard:"slideShareClipboard",guest:"slideShareGuest",slideshow:"slideShareSlideshow",user:"slideShareUser"};var urnPrefix="urn:li";function getUrn(entityType,entityId){if(!entityType){return null}var urn=urnMap[entityType];if(!urn){urn="slideShare"+(0,string.capitalize)(entityType)}return[urnPrefix,urn,entityId].join(":")}function getPageKey(){var el=arguments.length<=0||arguments[0]===undefined?document.body:arguments[0];var match=/^pagekey-(.*)/.exec(el.id);if(match&&match[1]){return match[1]}}});unwrapExports$$1(li);var Headers_1=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var nameToKey=function nameToKey(name){return name.toLowerCase()};var Headers=function(){function Headers(){_classCallCheck(this,Headers);this._values=Object.create(null)}_createClass(Headers,[{key:"append",value:function append(name,value){var key=nameToKey(name);if(!this._values[key]){this._values[key]=[]}this._values[key].push(value)}},{key:"keys",value:function keys(){return Object.keys(this._values)}},{key:"getAll",value:function getAll(name){var key=nameToKey(name);return this._values[key].slice(0)}},{key:"entries",value:function entries(){var _this=this;return this.keys().reduce(function(entries,key){_this.getAll(key).forEach(function(value){return entries.push([key,value])});return entries},[])}},{key:"addTo",value:function addTo(xhr){this.entries().forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var name=_ref2[0];var value=_ref2[1];return xhr.setRequestHeader(name,value)})}},{key:"nameToKey",value:function nameToKey(name){return name.toLowerCase()}}],[{key:"create",value:function create(obj){var objEntries=obj instanceof Headers?obj.entries():(0,lang.entries)(obj);return objEntries.reduce(function(headers,_ref3){var _ref32=_slicedToArray(_ref3,2);var name=_ref32[0];var value=_ref32[1];headers.append(name,value);return headers},new Headers)}}]);return Headers}();exports["default"]=Headers;module.exports=exports["default"]});unwrapExports$$1(Headers_1);var net=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.request=request;exports.requestXml=requestXml;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);var _netHeaders2=_interopRequireDefault(Headers_1);exports.Headers=_netHeaders2["default"];function request(url){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref$method=_ref.method;var method=_ref$method===undefined?"get":_ref$method;var body=_ref.body;var _ref$headers=_ref.headers;var headers=_ref$headers===undefined?{}:_ref$headers;var xhr=new XMLHttpRequest;xhr.open(method,url,true);_netHeaders2["default"].create(headers).addTo(xhr);var promise$$1=new _promise2["default"](function(resolve,reject){xhr.addEventListener("readystatechange",function(){if(this.readyState===4){if(this.status>=200&&this.status<400){resolve(this)}else{reject(this)}}})});xhr.send(body);return promise$$1}function requestXml(){return request.apply(undefined,arguments).then(function(xhr){return xhr.responseXML})}});unwrapExports$$1(net);var svg=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getSvgUrls=getSvgUrls;exports.injectSvg=injectSvg;exports.loadSvgs=loadSvgs;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);function getSvgUrls(){var el=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var metaTagName=arguments.length<=1||arguments[1]===undefined?"ss-svg-icons":arguments[1];var metas=(0,lang.toArray)(el.querySelectorAll('meta[name="'+metaTagName+'"]'));return metas.map(function(meta){return meta.getAttribute("content")})}function injectSvg(xml){var el=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var firstChild=xml.firstChild;firstChild.style.display="none";el.insertBefore(firstChild,el.firstChild)}function loadSvgs(){var searchEl=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var destEl=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var svgPromises=getSvgUrls(searchEl).map(function(url){return(0,net.requestXml)(url).then(function(svg){return injectSvg(svg,destEl)})});return _promise2["default"].all(svgPromises)}});unwrapExports$$1(svg);var tracking=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getGlobalTrackingUrl=getGlobalTrackingUrl;var metaTagName="globalTrackingUrl";function getGlobalTrackingUrl(){var meta=document.querySelector('meta[name="'+metaTagName+'"]');return meta?meta.getAttribute("content"):null}});unwrapExports$$1(tracking);var punycode=createCommonjsModule$$1(function(module,exports){(function(root){var freeExports="object"=="object"&&exports&&!exports.nodeType&&exports;var freeModule="object"=="object"&&module&&!module.nodeType&&module;var freeGlobal=(typeof commonjsGlobal$$1==="undefined"?"undefined":_typeof2(commonjsGlobal$$1))=="object"&&commonjsGlobal$$1;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof undefined=="function"&&_typeof2(undefined.amd)=="object"&&undefined.amd){undefined("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(commonjsGlobal$$1)});function hasOwnProperty$1(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var decode=function decode(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty$1(obj,k)){obj[k]=v}else if(Array.isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var stringifyPrimitive=function stringifyPrimitive(v){switch(typeof v==="undefined"?"undefined":_typeof2(v)){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};var encode=function encode(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if((typeof obj==="undefined"?"undefined":_typeof2(obj))==="object"){return Object.keys(obj).map(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(Array.isArray(obj[k])){return obj[k].map(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var querystring=createCommonjsModule$$1(function(module,exports){exports.decode=exports.parse=decode;exports.encode=exports.stringify=encode});var parse=urlParse;var resolve=urlResolve;var resolveObject=urlResolveObject;var format=urlFormat;var Url_1=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i;var portPattern=/:[0-9]*$/;var delims=["<",">",'"',"`"," ","\r","\n","\t"];var unwise=["{","}","|","\\","^","`"].concat(delims);var autoEscape=["'"].concat(unwise);var nonHostChars=["%","/","?",";","#"].concat(autoEscape);var hostEndingChars=["/","?","#"];var hostnameMaxLen=255;var hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/;var hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/;var unsafeProtocol={javascript:true,"javascript:":true};var hostlessProtocol={javascript:true,"javascript:":true};var slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true};function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+(typeof url==="undefined"?"undefined":_typeof2(url)))}var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){var domainArray=this.hostname.split(".");var newOut=[];for(var i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;Object.keys(this).forEach(function(k){result[k]=this[k]},this);result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){Object.keys(relative).forEach(function(k){if(k!=="protocol")result[k]=relative[k]});if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){Object.keys(relative).forEach(function(k){result[k]=relative[k]});result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift())){}if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last=="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host};function isString(arg){return typeof arg==="string"}function isObject(arg){return(typeof arg==="undefined"?"undefined":_typeof2(arg))==="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}var url$2={parse:parse,resolve:resolve,resolveObject:resolveObject,format:format,Url:Url_1};var url=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getTrackingCode=getTrackingCode;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _url2=_interopRequireDefault(url$2);function getTrackingCode(link){if(typeof link!=="string"){throw new TypeError("link argument must be a string; found "+(typeof link==="undefined"?"undefined":_typeof2(link)))}var query=_url2["default"].parse(link,true).query;if(query){var trk=query.trk;if(trk){return Array.isArray(trk)?trk[trk.length-1]:trk}}return null}});unwrapExports$$1(url);var cjs=createCommonjsModule$$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var dom=_interopRequireWildcard(dom$1);var events$$1=_interopRequireWildcard(events);var fn$$1=_interopRequireWildcard(fn);var lang$$1=_interopRequireWildcard(lang);var li$$1=_interopRequireWildcard(li);var net$$1=_interopRequireWildcard(net);var string$$1=_interopRequireWildcard(string);var svg$$1=_interopRequireWildcard(svg);var tracking$$1=_interopRequireWildcard(tracking);var url$$1=_interopRequireWildcard(url);exports["default"]={dom:dom,events:events$$1,fn:fn$$1,lang:lang$$1,li:li$$1,net:net$$1,string:string$$1,svg:svg$$1,tracking:tracking$$1,url:url$$1};module.exports=exports["default"]});unwrapExports$$1(cjs);function queryAll(selector){var node=arguments.length<=1||arguments[1]===undefined?document:arguments[1];return Array.from(node.querySelectorAll(selector))}function toggleClass(element,className,toggle){element.classList[toggle?"add":"remove"](className)}var jSecure=createCommonjsModule$$1(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal$$1,function(){var VERY_COMMON_ATTRS="aria-[a-z0-9_\\-]+|class|data-[a-z0-9_\\-]+|dir|id"+"|role|tabindex";var COMMON_ATTRS="alt|checked|colgroup|cols|colspan|disabled|height|hidden|maxlength"+"|method|multiple|name|placeholder|readonly|rel|required|rows|rowspan|spellcheck|target|title|width";var OTHER_ATTRS="border|caption|color|controls|coords|hreflang|label|lang|loop"+"|marginheight|marginwidth|preload|reversed|type|usemap|clear|headers|ismap"+"|start|datetime|accept|max|min|size|step";var TEXT_CONTENT_PROP=hasTextContent()?"textContent":"innerText";var FORMATTING_TAGS=["b","del","em","i","s","strong","sub","sup"];var ALLOWED_TAGS=FORMATTING_TAGS.concat(["a","abbr","address","area","article","aside","audio","bdi","bdo","big","blockquote","br","button","center","cite","code","datalist","dd","details","dfn","div","dl","dt","fieldset","figcaption","figure","font","footer","h1","h2","h3","h4","h5","h6","header","hgroup","hr","img","ins","kbd","label","legend","li","map","mark","marquee","nav","nobr","ol","p","pre","q","rp","rt","ruby","samp","section","small","source","span","strike","table","tbody","td","tfoot","th","thead","time","tr","u","ul","var","video","wbr"]);var ALLOWED_ATTRS=[VERY_COMMON_ATTRS,COMMON_ATTRS,OTHER_ATTRS].join("|");var ALLOWED_URL_ATTRS="href|src";var ALLOWED_URL_PREFIXES="data:image/(?:gif|jpg|jpeg|png);base64,";var constants__ALLOWED_URL_SCHEMES="https?|ftp|mailto";function ValueString(){}function hasTextContent(){if(typeof document==="undefined"){return true}return"textContent"in document.createElement("div")}var jSecure={ALLOWED_TAGS:ALLOWED_TAGS,FORMATTING_TAGS:FORMATTING_TAGS};var log=jSecure.log=function(message,level){level=level||"log";if(window&&window.jet&&level.toLowerCase()==="error"){try{throw new Error(message)}catch(e){window.jet.error(e)}}if(typeof console!=="undefined"&&typeof console[level]==="function"){console[level](message)}};var unsafe=jSecure.unsafe=function(text){return text};var htmlEncode=jSecure.htmlEncode=function(){var rHtmlChars=/[&<>"'\u0000\\=]/g,htmlCharsToEntities;htmlCharsToEntities={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","\0":"�","\\":"&#92;","=":"&#61;"};return function(str){if(str===null||str===undefined){return null}return str.toString().replace(rHtmlChars,function(match){return htmlCharsToEntities[match]})}}();var htmlUnencode=jSecure.htmlUnencode=function(){var helperDiv,rEntities=/&(?:([a-z0-9]+)|#x([\da-f]{1,6})|#(\d{1,8}));/gi,decodeNumericEntity;if(typeof document==="undefined"){return function(){throw new Error("document is undefined (i.e. you are probably in Node.js)")}}helperDiv=document.createElement("div");var decodedEntities={nbsp:" ",lt:"<",gt:">",amp:"&",quot:'"'};function decodeNamedEntity(entity){var decoded;if(decodedEntities.hasOwnProperty(entity)){return decodedEntities[entity]}helperDiv.innerHTML="&"+entity+";";decoded=helperDiv[TEXT_CONTENT_PROP];decodedEntities[entity]=decoded;return decoded}if(typeof String.fromCodePoint==="function"){decodeNumericEntity=function decodeNumericEntity(num){return String.fromCodePoint(num)}}else{decodeNumericEntity=function decodeNumericEntity(num){return num<=65535?String.fromCharCode(num):"�"}}return function htmlUnencode(encodedText){if(encodedText===null||encodedText===undefined){return null}return(encodedText+"").replace(rEntities,function(match,named,hex,dec){if(named){return decodeNamedEntity(named)}else if(hex||dec){return decodeNumericEntity(parseInt(hex||dec,hex?16:10)||65533)}return"�"})}}();var reEncode=jSecure.reEncode=function(string){return jSecure.htmlEncode(jSecure.htmlUnencode(string))};var text=jSecure.text=function(string){jSecure.log("jSecure.text() is deprecated. Please use jSecure.htmlEncode().","warn");return jSecure.htmlEncode(string)};var isArray=Array.isArray||function(arg){return Object.prototype.toString.call(arg)==="[object Array]"};function containsHTML(string){return string.indexOf("<")>-1||string.indexOf("&")>-1}function extend(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}return target}function flattenShallow(array){return array.reduce(function(newArray,el){return newArray.concat(el)},[])}var forEach=function(){if(Array.prototype.forEach){return function(array,fn){Array.prototype.forEach.call(array,fn)}}return function(array,fn){
for(var i=0,length=array.length;i<length;i++){fn(array[i],i)}}}();var OPTIONAL_WHITESPACE="[ \t\r\n]*";var SOME_WHITESPACE="[ \t\r\n]+";function generateWhitelist(options){options=isArray(options)?options:[options];var tags,attrs,checkUrlAttrs,captureGroupCount=0,r="<(?!/?";r+="(?:";forEach(options,function(o,idx){tags=o.tags||ALLOWED_TAGS;attrs=o.attrs||ALLOWED_ATTRS;checkUrlAttrs=o.checkUrlAttrs||false;if(idx!==0){r+="|"}r+="(?:"+tags.join("|")+")";r+="(?:";r+=OPTIONAL_WHITESPACE;r+="|"+SOME_WHITESPACE;r+="(?:(?:";r+="(?:"+attrs+")"+"(?:=([\"'])[^'\"<>]*\\"+ ++captureGroupCount+")?";if(checkUrlAttrs){r+="|(?:"+ALLOWED_URL_ATTRS+")"+"=([\"'])(?:(?:"+constants__ALLOWED_URL_SCHEMES+")(?::|&#(?:58|x3a);)|(?:"+ALLOWED_URL_PREFIXES+")|[/.#?]|&#(?:35|4[67]|63|x(?:2[3ef]|3f));)[^'\"<>]*\\"+ ++captureGroupCount}r+=")"+OPTIONAL_WHITESPACE+")+";r+=")"});r+=")";r+="/?>)";return new RegExp(r,"i")}function createHTMLWhitelist(tags){tags=tags||ALLOWED_TAGS;return generateWhitelist({tags:tags,checkUrlAttrs:true})}function createCustomElementWhitelist(){var liIconCustomElement={tag:"li-icon",attrs:"active|color|size|type"};return generateWhitelist([{tags:ALLOWED_TAGS,checkUrlAttrs:true},{tags:[liIconCustomElement.tag],attrs:[VERY_COMMON_ATTRS,liIconCustomElement.attrs].join("|"),checkUrlAttrs:false}])}function isSafeHTML(string,options){var isSafe=false,rHtmlWhitelist;options=options||{};var customTagWhitelist=options.allowTags,checkCustomElement=options.hasCustomElementMarkup!==false;if(customTagWhitelist){rHtmlWhitelist=createHTMLWhitelist(customTagWhitelist);return!rHtmlWhitelist.test(string)}else if(checkCustomElement){return!isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT.test(string)}else{return!isSafeHTML.R_UNSAFE_HTML.test(string)}return isSafe}isSafeHTML.R_UNSAFE_HTML=createHTMLWhitelist();isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT=createCustomElementWhitelist();function stripTags(string){return string.replace(/<[^>]*>|[<>'"&\\]/g,"")}function processString(string,replacements,options){var replacedString=replacements?replacePlaceholders(string,replacements):string,origString=string;if(containsHTML(replacedString)&&!isSafeHTML(replacedString,options)){replacedString=stripTags(replacedString);log("Content contains non-whitelisted tags or attributes:\n"+"Content: "+origString,"error")}return replacedString}function replacePlaceholders(string,replacements){var processedReplacements={};return string.replace(/\{([^}]+)\}/g,function(match,placeholder){var replacement=match,isString,isNumber;if(processedReplacements.hasOwnProperty(placeholder)){return processedReplacements[placeholder]}if(replacements.hasOwnProperty(placeholder)){replacement=replacements[placeholder];isString=typeof replacement==="string";isNumber=typeof replacement==="number";if(!isString&&!(replacement instanceof ValueString)&&!isNumber){throw new Error("Only strings, numbers, and jSecure types are allowed as placeholder replacements.")}replacement=isString?htmlEncode(replacement):replacement.toString()}processedReplacements[placeholder]=replacement;return replacement})}function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first}var wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;var rtagName=/<([\w:]+)/;function buildFragment(htmls,context){var tag,wrap,fragment=context.createDocumentFragment(),wrapped,tmp,nodes=[],html,i,j,l;for(i=0,l=htmls.length;i<l;i++){html=htmls[i];if(html||html===0){if(typeof html==="string"){tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(html)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;wrapped=wrap[1]+html+wrap[2];jSecure.setElementContent(tmp,wrapped);j=wrap[0];while(j--){if(tmp.lastChild&&tmp.lastChild.nodeType===Node.ELEMENT_NODE){tmp=tmp.lastChild}}merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}else{merge(nodes,html.nodeType?[html]:html)}}}fragment.textContent="";i=0;html=nodes[i];while(html){fragment.appendChild(html);i++;html=nodes[i]}return fragment}function parseHTML(template,context){context=context||document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument(""):document;var parsed;if(typeof template==="string"){parsed=buildFragment([template],context)}else if(isArray(template)){parsed=buildFragment(template,context)}else{return template}return merge([],parsed.childNodes)}var processTemplate=jSecure.processTemplate=processString;var sanitizeHTML=jSecure.sanitizeHTML=function(htmlString){return processString(htmlString)};var setElementContent=jSecure.setElementContent=function(el,template,replacements){var processedTemplate=processString(template,replacements);if(containsHTML(processedTemplate)){el.innerHTML=processedTemplate}else{el[TEXT_CONTENT_PROP]=processedTemplate}return processedTemplate};jSecure.parseHTML=parseHTML;var parseSelector=jSecure.parseSelector=function(selector){var rQuickExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;if(typeof selector==="string"&&rQuickExpr.test(selector)){return[]}return selector};var UnsafeString=jSecure.UnsafeString=function(string,options){if(!(this instanceof UnsafeString)){return new UnsafeString(string,options)}options=options||{};options.allowTags=options.allowTags?flattenShallow(options.allowTags):jSecure.ALLOWED_TAGS;this._string=string;this._options=options};UnsafeString.prototype=extend(new ValueString,{toString:function toString(){var string=this._string,stringVal=this._stringVal,origString=string;if(stringVal!==undefined){return stringVal}if(!isSafeHTML(string,this._options)){origString=string;string=stripTags(string);jSecure.log("UnsafeString contains non-whitelisted tags or attributes.\n"+"String: "+origString,"error")}this._stringVal=string;return string}});var safeUrl__ALLOWED_URL_SCHEMES="https?|ftp|mailto|tel|blob";var RELATIVE_HASH_OR_QUERY_ONLY="[/.#?]";var rALL_SPACES=/ /g;var rBAD_CHARS=/[\s\u0000<>"]|%00/;var rBACKSLASH_SEMICOLON=/[\\;]/;var rDOT_DOT=/([.]|%2e){2}/i;var rAllowedStartOfUrl=new RegExp("^(?:"+safeUrl__ALLOWED_URL_SCHEMES+"|"+RELATIVE_HASH_OR_QUERY_ONLY+")");var sanitizeUrl=jSecure.sanitizeUrl=function(url){var testUrl=undefined;var defaultUrl="invalid://";if(typeof url!=="string"){jSecure.log("jSecure Warning: url must be a string","error");return defaultUrl}testUrl=url.trim();if(testUrl.indexOf(" ")>-1){jSecure.log("jSecure Warning: url should not contain spaces: "+url,"warn")}testUrl=testUrl.replace(rALL_SPACES,"+");if(!rAllowedStartOfUrl.test(testUrl)){jSecure.log("jSecure Error: URL should be absolute with allowed schemas, relative, a hash fragment or query string. "+url,"error");return defaultUrl}if(rBAD_CHARS.test(testUrl)){jSecure.log("jSecure Error: not valid url character found in url: "+url,"error");return defaultUrl}var path=testUrl.split("?")[0];if(rBACKSLASH_SEMICOLON.test(path)||rDOT_DOT.test(path)||rDOT_DOT.test(decodeURI(path))){jSecure.log("jSecure Error: malicious data found in url path: "+path,"error");return defaultUrl}return url};var _redirect=jSecure._redirect=function(sanitizedUrl){if(window){window.location.href=sanitizedUrl}};var redirect=jSecure.redirect=function(url){var sanitizedUrl=undefined;sanitizedUrl=jSecure.sanitizeUrl(url);if(sanitizedUrl===url){jSecure._redirect(sanitizedUrl)}};var index=jSecure;return index})});var ActivatableComponent=ssplayer$1.ActivatableComponent;var classes={captionsOn:"video-player--captions-on",captionsOff:"video-player--captions-off"};var CaptionsText=function(_ActivatableComponent){babelHelpers.inherits(CaptionsText,_ActivatableComponent);function CaptionsText(element,videojsPlayerInstance,videoPlayerInstance){var transcripts=arguments.length<=3||arguments[3]===undefined?[]:arguments[3];babelHelpers.classCallCheck(this,CaptionsText);babelHelpers.get(Object.getPrototypeOf(CaptionsText.prototype),"constructor",this).call(this);this.element=element;this.videojsPlayer=videojsPlayerInstance;this.videoPlayer=videoPlayerInstance;this.transcripts=transcripts;this._hasTranscripts=this.transcripts&&this.transcripts.length;this.captionsTextElement=queryAll(".captions__text",this.element)[0];this.setPlayerClass(this.videojsPlayer.captions())}babelHelpers.createClass(CaptionsText,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"captionschange",this.onCaptionsChange]);if(this._hasTranscripts){this.addEvents([this.videojsPlayer,"ended",this.onTimeChange],[this.videojsPlayer,"timeupdate",this.onTimeChange],[this.videojsPlayer,"durationchange",this.onTimeChange])}}},{key:"onTimeChange",value:function onTimeChange(){this.updateText()}},{key:"onCaptionsChange",value:function onCaptionsChange(){var isShowing=this.videojsPlayer.captions();if(isShowing&&this._hasTranscripts){this.updateText()}this.setPlayerClass(isShowing)}},{key:"setPlayerClass",value:function setPlayerClass(isShowing){toggleClass(this.videoPlayer.adaptedElement[0],classes.captionsOn,isShowing);toggleClass(this.videoPlayer.adaptedElement[0],classes.captionsOff,!isShowing)}},{key:"getTranscriptLine",value:function getTranscriptLine(){var time=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var millisecondsTime=time*1e3;var lines=this.transcripts.filter(function(line){return millisecondsTime>=line.transcriptStartAt});return lines[lines.length-1]}},{key:"updateText",value:function updateText(){var currentTime=this.videojsPlayer.currentTime();var line=this.getTranscriptLine(currentTime);var caption=line&&line.caption;if(caption){jSecure.setElementContent(this.captionsTextElement,caption)}}}]);return CaptionsText}(ActivatableComponent);var ButtonComponent=ssplayer$1.ButtonComponent;var CaptionsButton=function(_ButtonComponent){babelHelpers.inherits(CaptionsButton,_ButtonComponent);function CaptionsButton(videojsPlayerInstance,onButton,offButton){babelHelpers.classCallCheck(this,CaptionsButton);babelHelpers.get(Object.getPrototypeOf(CaptionsButton.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayerInstance;this.onButton=onButton;this.offButton=offButton;this.onButton.disabled=false;this.offButton.disabled=false}babelHelpers.createClass(CaptionsButton,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.onButton,"click",this.onHide],[this.offButton,"click",this.onShow])}},{key:"onShow",value:function onShow(){this.videojsPlayer.captions(true)}},{key:"onHide",value:function onHide(){this.videojsPlayer.captions(false)}}]);return CaptionsButton}(ButtonComponent);var EventListener=ssplayer$1.EventListener;var DisableContextMenuBehavior=function(_EventListener){babelHelpers.inherits(DisableContextMenuBehavior,_EventListener);function DisableContextMenuBehavior(videoElement){babelHelpers.classCallCheck(this,DisableContextMenuBehavior);babelHelpers.get(Object.getPrototypeOf(DisableContextMenuBehavior.prototype),"constructor",this).call(this);this.videoElement=videoElement}babelHelpers.createClass(DisableContextMenuBehavior,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videoElement,"contextmenu",function(event){event.preventDefault()}])}}]);return DisableContextMenuBehavior}(EventListener);function throttle$1(fn){var threshold=arguments.length<=1||arguments[1]===undefined?200:arguments[1];var last=undefined,deferTimer=undefined;return function(){var context=this;var now=+new Date,args=arguments;if(last&&now<last+threshold){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args)},threshold)}else{last=now;fn.apply(context,args)}}}function storageAvailable(type){try{var storage=window[type],x="__storage_test__";storage.setItem(x,x);storage.removeItem(x);return true}catch(e){return e instanceof DOMException&&(e.code===22||e.code===1014||e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&storage.length!==0}}var fallbackStorage=Object.create({setItem:function setItem(key,value){this[key]=value},getItem:function getItem(key){return this[key]}});var fieldNames=["volume","muted","rate","captions"];var EventListener$1=ssplayer$1.EventListener;var PersistenceBehavior=function(_EventListener){babelHelpers.inherits(PersistenceBehavior,_EventListener);function PersistenceBehavior(videojsPlayerInstance,options){babelHelpers.classCallCheck(this,PersistenceBehavior);babelHelpers.get(Object.getPrototypeOf(PersistenceBehavior.prototype),"constructor",this).call(this);this.videojsPlayer=videojsPlayerInstance;this.options=options}babelHelpers.createClass(PersistenceBehavior,[{key:"beforeInit",value:function beforeInit(){var events=[[this.videojsPlayer,"ratechange",this.rateChanged],[this.videojsPlayer,"captionschange",this.onCaptionsChange],[this.videojsPlayer,"volumechange",throttle$1(this.volumeChanged.bind(this),300)]];this.addEvents.apply(this,events);var _state=this.state;var volume=_state.volume;var muted=_state.muted;var rate=_state.rate;var captions=_state.captions;if(volume!=null&&volume!==this.videojsPlayer.volume()){this.videojsPlayer.volume(volume)}if(muted!=null&&!this.videojsPlayer.muted()){this.videojsPlayer.muted(muted)}if(rate!=null&&rate!==this.videojsPlayer.playbackRate()){this.videojsPlayer.playbackRate(rate)}if(captions!=null&&captions!==this.videojsPlayer.captions()){this.videojsPlayer.captions(captions)}}},{key:"rateChanged",value:function rateChanged(){this.state={rate:this.videojsPlayer.playbackRate()}}},{key:"volumeChanged",value:function volumeChanged(){var muted=this.videojsPlayer.muted();if(muted){this.state={muted:muted}}else{this.state={muted:muted,volume:this.videojsPlayer.volume()}}}},{key:"onCaptionsChange",value:function onCaptionsChange(){this.state={captions:this.videojsPlayer.captions()}}},{key:"namespacify",value:function namespacify(name){return"li_video_prefs__"+this.options.appId+"__"+name}},{key:"state",get:function get(){var _this=this;var storage=this.storage;return fieldNames.reduce(function(state,fieldName){state[fieldName]=JSON.parse(storage.getItem(_this.namespacify(fieldName)));return state},{})},set:function set(state){var _this2=this;var storage=this.storage;fieldNames.forEach(function(fieldName){if(state.hasOwnProperty(fieldName)){storage.setItem(_this2.namespacify(fieldName),state[fieldName])}})}},{key:"storage",get:function get(){var storage=undefined;if(storageAvailable("localStorage")){storage=localStorage}else if(storageAvailable("sessionStorage")){storage=sessionStorage}else{storage=fallbackStorage}Object.defineProperty(this,"storage",{value:storage,enumerable:true});return storage}}]);return PersistenceBehavior}(EventListener$1);var EventListener$2=ssplayer$1.EventListener;var VideojsTrackingExt=function(_EventListener){babelHelpers.inherits(VideojsTrackingExt,_EventListener);function VideojsTrackingExt(videojsTrackingInstance){babelHelpers.classCallCheck(this,VideojsTrackingExt);babelHelpers.get(Object.getPrototypeOf(VideojsTrackingExt.prototype),"constructor",this).call(this);this.videojsTracking=videojsTrackingInstance;this.videojsPlayer=this.videojsTracking.videojsInstance;this.videoTrackingAdapter=this.videojsTracking.videoTrackingAdapter}babelHelpers.createClass(VideojsTrackingExt,[{key:"beforeInit",value:function beforeInit(){this.addEvents([this.videojsPlayer,"captionschange",this.onCaptionsChange]);this.videoTrackingAdapter.state={ccVisible:"NOT_SUPPORTED"}}},{key:"onCaptionsChange",value:function onCaptionsChange(){var ccVisible=this.videojsPlayer.captions()?"ON":"OFF";this.videoTrackingAdapter.state={ccVisible:ccVisible};this.videojsTracking.restartBeaconPolling()}}]);return VideojsTrackingExt}(EventListener$2);var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]";var funcTag="[object Function]";var genTag="[object GeneratorFunction]";var reIsUint=/^(?:0|[1-9]\d*)$/;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var objectProto=Object.prototype;var hasOwnProperty$2=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeKeys=overArg(Object.keys,Object);var nativeMax$1=Math.max;var nonEnumShadows=!propertyIsEnumerable.call({valueOf:1},"valueOf");function arrayLikeKeys(value,inherited){var result=isArray$1(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty$2.call(value,key))&&!(skipIndexes&&(key=="length"||isIndex(key,length)))){result.push(key)}}return result}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty$2.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){object[key]=value}}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$2.call(object,key)&&key!="constructor"){result.push(key)}}return result}function baseRest(func,start){start=nativeMax$1(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax$1(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=array;return apply(func,this,otherArgs)}}function copyObject(source,props,object,customizer){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;assignValue(object,key,newValue===undefined?source[key]:newValue)}return object}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject$1(object)){return false}var type=typeof index==="undefined"?"undefined":_typeof2(index);if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty$2.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArray$1=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject$1(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject$1(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var assign$1=createAssigner(function(object,source){if(nonEnumShadows||isPrototype(source)||isArrayLike(source)){copyObject(source,keys$2(source),object);return}for(var key in source){if(hasOwnProperty$2.call(source,key)){assignValue(object,key,source[key])}}});function keys$2(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var lodash_assign=assign$1;function deepFind(obj,path){return path.split(".").reduce(function(accum,key){if(accum&&accum[key]){return accum[key]}return null},obj)}var VideoPlayer=ssplayer$1.VideoPlayer;var FocusableComponent=ssplayer$1.FocusableComponent;var LearningVideoPlayer=function(_VideoPlayer){babelHelpers.inherits(LearningVideoPlayer,_VideoPlayer);function LearningVideoPlayer(){babelHelpers.classCallCheck(this,LearningVideoPlayer);babelHelpers.get(Object.getPrototypeOf(LearningVideoPlayer.prototype),"constructor",this).apply(this,arguments)}babelHelpers.createClass(LearningVideoPlayer,[{key:"setup",value:function setup(){var cachedPlayerJs=this.options.playerjs;delete this.options.playerjs;var autoplay=this.options.autoplay;lodash_assign(this.options.videojsOptions,{autoplay:autoplay?"muted":false,muted:!!autoplay});babelHelpers.get(Object.getPrototypeOf(LearningVideoPlayer.prototype),"setup",this).call(this);lodash_assign(this,this.createCaptions(this.videojsPlayer,this.videoPlayer,this.options.captions));lodash_assign(this,this.createPersistenceBehavior(this.videojsPlayer,lodash_assign({appId:this.options&&this.options.trackingSettings&&this.options.trackingSettings.appId},this.options.persistSettings)));lodash_assign(this,this.createSettingsComponent(deepFind(this,"options.settings.element"),this.playerStateManager,deepFind(this,"options.settings.options")));var videoElement=deepFind(this,"options.videojsElement");this.disableContextMenuBehavior=DisableContextMenuBehavior.create(videoElement);if(cachedPlayerJs){this.options.playerjs=cachedPlayerJs;this.playerJsReady()}}},{key:"createCaptions",value:function createCaptions(videojsPlayer,videoPlayer){var _this=this;var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];videojsPlayer.captions=function(val){if(val!==undefined){_this.videojsPlayer._captions=val;_this.videojsPlayer.trigger("captionschange",val)}return videojsPlayer._captions||false};if(options.element&&options.onButton&&options.offButton){if(options.on){videojsPlayer.captions(true)}var captionsButtonComponent=CaptionsButton.create(videojsPlayer,options.onButton,options.offButton);var captionsComponent=CaptionsText.create(options.element,videojsPlayer,videoPlayer,options.transcript);return{captionsButtonComponent:captionsButtonComponent,captionsComponent:captionsComponent}}}},{key:"createPersistenceBehavior",value:function createPersistenceBehavior(videojsPlayer,options){if(options.enabled&&options.appId){var persistenceBehavior=PersistenceBehavior.create(videojsPlayer,options);return{persistenceBehavior:persistenceBehavior}}}},{key:"createSettingsComponent",value:function createSettingsComponent(element,playerStateManager,options){if(element){var settingsComponent=FocusableComponent.create(element,playerStateManager,lodash_assign({},{activeClass:"ssplayer-menu-active"},options));return{settingsComponent:settingsComponent}}}},{key:"createTracking",value:function createTracking(videojsPlayer,videoPlayer,trackingSettings){var obj=babelHelpers.get(Object.getPrototypeOf(LearningVideoPlayer.prototype),"createTracking",this).call(this,videojsPlayer,videoPlayer,trackingSettings);if(obj){obj.videojsTrackingExtBehavior=VideojsTrackingExt.create(obj.videojsTrackingBehavior)}return obj}}]);return LearningVideoPlayer}(VideoPlayer);module.exports=LearningVideoPlayer});var LearningVideoPlayer=unwrapExports(dist);var IS_BROWSER=typeof window!=="undefined"&&window&&window.appEnvironment!=="node";if(IS_BROWSER){window.VIDEOJS_NO_DYNAMIC_STYLE=true}var commonjsGlobal$1=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function unwrapExports$1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function createCommonjsModule$1(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var win;if(typeof window!=="undefined"){win=window}else if(typeof commonjsGlobal$1!=="undefined"){win=commonjsGlobal$1}else if(typeof self!=="undefined"){win=self}else{win={}}var window_1=win;var slice=Array.prototype.slice;var domWalk=iterativelyWalk;function iterativelyWalk(nodes,cb){if(!("length"in nodes)){nodes=[nodes]}nodes=slice.call(nodes);while(nodes.length){var node=nodes.shift(),ret=cb(node);if(ret){return ret}if(node.childNodes&&node.childNodes.length){nodes=slice.call(node.childNodes).concat(nodes)}}}var domComment=Comment;function Comment(data,owner){if(!(this instanceof Comment)){return new Comment(data,owner)}this.data=data;this.nodeValue=data;this.length=data.length;this.ownerDocument=owner||null}Comment.prototype.nodeType=8;Comment.prototype.nodeName="#comment";Comment.prototype.toString=function _Comment_toString(){return"[object Comment]"};var domText=DOMText;function DOMText(value,owner){if(!(this instanceof DOMText)){return new DOMText(value)}this.data=value||"";this.length=this.data.length;this.ownerDocument=owner||null}DOMText.prototype.type="DOMTextNode";DOMText.prototype.nodeType=3;DOMText.prototype.nodeName="#text";DOMText.prototype.toString=function _Text_toString(){return this.data};DOMText.prototype.replaceData=function replaceData(index,length,value){var current=this.data;var left=current.substring(0,index);var right=current.substring(index+length,current.length);this.data=left+value+right;this.length=this.data.length};var dispatchEvent_1=dispatchEvent;function dispatchEvent(ev){var elem=this;var type=ev.type;if(!ev.target){ev.target=elem}if(!elem.listeners){elem.listeners={}}var listeners=elem.listeners[type];if(listeners){return listeners.forEach(function(listener){ev.currentTarget=elem;if(typeof listener==="function"){listener(ev)}else{listener.handleEvent(ev)}})}if(elem.parentNode){elem.parentNode.dispatchEvent(ev)}}var addEventListener_1=addEventListener;function addEventListener(type,listener){var elem=this;if(!elem.listeners){elem.listeners={}}if(!elem.listeners[type]){elem.listeners[type]=[]}if(elem.listeners[type].indexOf(listener)===-1){elem.listeners[type].push(listener)}}var removeEventListener_1=removeEventListener;function removeEventListener(type,listener){var elem=this;if(!elem.listeners){return}if(!elem.listeners[type]){return}var list=elem.listeners[type];var index=list.indexOf(listener);if(index!==-1){list.splice(index,1)}}var serialize=serializeNode;var voidElements=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function serializeNode(node){switch(node.nodeType){case 3:return escapeText(node.data);case 8:return"<!--"+node.data+"-->";default:return serializeElement(node)}}function serializeElement(elem){var strings=[];var tagname=elem.tagName;if(elem.namespaceURI==="http://www.w3.org/1999/xhtml"){tagname=tagname.toLowerCase()}strings.push("<"+tagname+properties(elem)+datasetify(elem));if(voidElements.indexOf(tagname)>-1){strings.push(" />")}else{strings.push(">");if(elem.childNodes.length){strings.push.apply(strings,elem.childNodes.map(serializeNode))}else if(elem.textContent||elem.innerText){strings.push(escapeText(elem.textContent||elem.innerText))}else if(elem.innerHTML){strings.push(elem.innerHTML)}strings.push("</"+tagname+">")}return strings.join("")}function isProperty(elem,key){var type=_typeof2(elem[key]);if(key==="style"&&Object.keys(elem.style).length>0){return true}return elem.hasOwnProperty(key)&&(type==="string"||type==="boolean"||type==="number")&&key!=="nodeName"&&key!=="className"&&key!=="tagName"&&key!=="textContent"&&key!=="innerText"&&key!=="namespaceURI"&&key!=="innerHTML"}function stylify(styles){if(typeof styles==="string")return styles;var attr="";Object.keys(styles).forEach(function(key){var value=styles[key];key=key.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});attr+=key+":"+value+";"});return attr}function datasetify(elem){var ds=elem.dataset;var props=[];for(var key in ds){props.push({name:"data-"+key,value:ds[key]})}return props.length?stringify(props):""}function stringify(list){var attributes=[];list.forEach(function(tuple){var name=tuple.name;var value=tuple.value;if(name==="style"){value=stylify(value)}attributes.push(name+"="+'"'+escapeAttributeValue(value)+'"')});return attributes.length?" "+attributes.join(" "):""}function properties(elem){var props=[];for(var key in elem){if(isProperty(elem,key)){props.push({name:key,value:elem[key]})}}for(var ns in elem._attributes){for(var attribute in elem._attributes[ns]){var prop=elem._attributes[ns][attribute];var name=(prop.prefix?prop.prefix+":":"")+attribute;props.push({name:name,value:prop.value})}}if(elem.className){props.push({name:"class",value:elem.className})}return props.length?stringify(props):""}function escapeText(s){var str="";if(typeof s==="string"){str=s}else if(s){str=s.toString()}return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function escapeAttributeValue(str){return escapeText(str).replace(/"/g,"&quot;")}var htmlns="http://www.w3.org/1999/xhtml";var domElement=DOMElement;function DOMElement(tagName,owner,namespace){if(!(this instanceof DOMElement)){return new DOMElement(tagName)}var ns=namespace===undefined?htmlns:namespace||null;this.tagName=ns===htmlns?String(tagName).toUpperCase():tagName;this.nodeName=this.tagName;this.className="";this.dataset={};this.childNodes=[];this.parentNode=null;this.style={};this.ownerDocument=owner||null;this.namespaceURI=ns;this._attributes={};if(this.tagName==="INPUT"){this.type="text"}}DOMElement.prototype.type="DOMElement";DOMElement.prototype.nodeType=1;DOMElement.prototype.appendChild=function _Element_appendChild(child){if(child.parentNode){child.parentNode.removeChild(child)}this.childNodes.push(child);child.parentNode=this;return child};DOMElement.prototype.replaceChild=function _Element_replaceChild(elem,needle){if(elem.parentNode){elem.parentNode.removeChild(elem)}var index=this.childNodes.indexOf(needle);needle.parentNode=null;this.childNodes[index]=elem;elem.parentNode=this;return needle};DOMElement.prototype.removeChild=function _Element_removeChild(elem){var index=this.childNodes.indexOf(elem);this.childNodes.splice(index,1);elem.parentNode=null;return elem};DOMElement.prototype.insertBefore=function _Element_insertBefore(elem,needle){if(elem.parentNode){elem.parentNode.removeChild(elem)}var index=needle===null||needle===undefined?-1:this.childNodes.indexOf(needle);if(index>-1){this.childNodes.splice(index,0,elem)}else{this.childNodes.push(elem)}elem.parentNode=this;return elem};DOMElement.prototype.setAttributeNS=function _Element_setAttributeNS(namespace,name,value){var prefix=null;var localName=name;var colonPosition=name.indexOf(":");if(colonPosition>-1){prefix=name.substr(0,colonPosition);localName=name.substr(colonPosition+1)}if(this.tagName==="INPUT"&&name==="type"){this.type=value}else{var attributes=this._attributes[namespace]||(this._attributes[namespace]={});attributes[localName]={value:value,prefix:prefix}}};DOMElement.prototype.getAttributeNS=function _Element_getAttributeNS(namespace,name){var attributes=this._attributes[namespace];var value=attributes&&attributes[name]&&attributes[name].value;if(this.tagName==="INPUT"&&name==="type"){return this.type}if(typeof value!=="string"){return null}return value};DOMElement.prototype.removeAttributeNS=function _Element_removeAttributeNS(namespace,name){
var attributes=this._attributes[namespace];if(attributes){delete attributes[name]}};DOMElement.prototype.hasAttributeNS=function _Element_hasAttributeNS(namespace,name){var attributes=this._attributes[namespace];return!!attributes&&name in attributes};DOMElement.prototype.setAttribute=function _Element_setAttribute(name,value){return this.setAttributeNS(null,name,value)};DOMElement.prototype.getAttribute=function _Element_getAttribute(name){return this.getAttributeNS(null,name)};DOMElement.prototype.removeAttribute=function _Element_removeAttribute(name){return this.removeAttributeNS(null,name)};DOMElement.prototype.hasAttribute=function _Element_hasAttribute(name){return this.hasAttributeNS(null,name)};DOMElement.prototype.removeEventListener=removeEventListener_1;DOMElement.prototype.addEventListener=addEventListener_1;DOMElement.prototype.dispatchEvent=dispatchEvent_1;DOMElement.prototype.focus=function _Element_focus(){return void 0};DOMElement.prototype.toString=function _Element_toString(){return serialize(this)};DOMElement.prototype.getElementsByClassName=function _Element_getElementsByClassName(classNames){var classes=classNames.split(" ");var elems=[];domWalk(this,function(node){if(node.nodeType===1){var nodeClassName=node.className||"";var nodeClasses=nodeClassName.split(" ");if(classes.every(function(item){return nodeClasses.indexOf(item)!==-1})){elems.push(node)}}});return elems};DOMElement.prototype.getElementsByTagName=function _Element_getElementsByTagName(tagName){tagName=tagName.toLowerCase();var elems=[];domWalk(this.childNodes,function(node){if(node.nodeType===1&&(tagName==="*"||node.tagName.toLowerCase()===tagName)){elems.push(node)}});return elems};DOMElement.prototype.contains=function _Element_contains(element){return domWalk(this,function(node){return element===node})||false};var domFragment=DocumentFragment;function DocumentFragment(owner){if(!(this instanceof DocumentFragment)){return new DocumentFragment}this.childNodes=[];this.parentNode=null;this.ownerDocument=owner||null}DocumentFragment.prototype.type="DocumentFragment";DocumentFragment.prototype.nodeType=11;DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.appendChild=domElement.prototype.appendChild;DocumentFragment.prototype.replaceChild=domElement.prototype.replaceChild;DocumentFragment.prototype.removeChild=domElement.prototype.removeChild;DocumentFragment.prototype.toString=function _DocumentFragment_toString(){return this.childNodes.map(function(node){return String(node)}).join("")};var event=Event$1;function Event$1(family){}Event$1.prototype.initEvent=function _Event_initEvent(type,bubbles,cancelable){this.type=type;this.bubbles=bubbles;this.cancelable=cancelable};Event$1.prototype.preventDefault=function _Event_preventDefault(){};var document$1=Document;function Document(){if(!(this instanceof Document)){return new Document}this.head=this.createElement("head");this.body=this.createElement("body");this.documentElement=this.createElement("html");this.documentElement.appendChild(this.head);this.documentElement.appendChild(this.body);this.childNodes=[this.documentElement];this.nodeType=9}var proto=Document.prototype;proto.createTextNode=function createTextNode(value){return new domText(value,this)};proto.createElementNS=function createElementNS(namespace,tagName){var ns=namespace===null?null:String(namespace);return new domElement(tagName,this,ns)};proto.createElement=function createElement(tagName){return new domElement(tagName,this)};proto.createDocumentFragment=function createDocumentFragment(){return new domFragment(this)};proto.createEvent=function createEvent(family){return new event(family)};proto.createComment=function createComment(data){return new domComment(data,this)};proto.getElementById=function getElementById(id){id=String(id);var result=domWalk(this.childNodes,function(node){if(String(node.id)===id){return node}});return result||null};proto.getElementsByClassName=domElement.prototype.getElementsByClassName;proto.getElementsByTagName=domElement.prototype.getElementsByTagName;proto.contains=domElement.prototype.contains;proto.removeEventListener=removeEventListener_1;proto.addEventListener=addEventListener_1;proto.dispatchEvent=dispatchEvent_1;var minDocument=new document$1;var topLevel=typeof commonjsGlobal$1!=="undefined"?commonjsGlobal$1:typeof window!=="undefined"?window:{};var doccy;if(typeof document!=="undefined"){doccy=document}else{doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];if(!doccy){doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDocument}}var document_1=doccy;function clean(s){return s.replace(/\n\r?\s*/g,"")}var tsml=function tsml(sa){var s="",i=0;for(;i<arguments.length;i++){s+=clean(sa[i])+(arguments[i+1]||"")}return s};var tuple=SafeParseTuple;function SafeParseTuple(obj,reviver){var json;var error=null;try{json=JSON.parse(obj,reviver)}catch(err){error=err}return[error,json]}var keycode=createCommonjsModule$1(function(module,exports){function keyCode(searchInput){if(searchInput&&"object"===(typeof searchInput==="undefined"?"undefined":_typeof2(searchInput))){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;if(hasKeyCode)searchInput=hasKeyCode}if("number"===typeof searchInput)return names[searchInput];var search=String(searchInput);var foundNamedKey=codes[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;var foundNamedKey=aliases[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;if(search.length===1)return search.charCodeAt(0);return undefined}keyCode.isEventKey=function isEventKey(event,nameOrCode){if(event&&"object"===(typeof event==="undefined"?"undefined":_typeof2(event))){var keyCode=event.which||event.keyCode||event.charCode;if(keyCode===null||keyCode===undefined){return false}if(typeof nameOrCode==="string"){var foundNamedKey=codes[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode}var foundNamedKey=aliases[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode}}else if(typeof nameOrCode==="number"){return nameOrCode===keyCode}return false}};exports=module.exports=keyCode;var codes=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var aliases=exports.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++){codes[String.fromCharCode(i)]=i-32}for(var i=48;i<58;i++){codes[i-48]=i}for(i=1;i<13;i++){codes["f"+i]=i+111}for(i=0;i<10;i++){codes["numpad "+i]=i+96}var names=exports.names=exports.title={};for(i in codes){names[codes[i]]=i}for(var alias in aliases){codes[alias]=aliases[alias]}});var keycode_1=keycode.code;var keycode_2=keycode.codes;var keycode_3=keycode.aliases;var keycode_4=keycode.names;var keycode_5=keycode.title;var isFunction_1=isFunction;var toString=Object.prototype.toString;function isFunction(fn){var string=toString.call(fn);return string==="[object Function]"||typeof fn==="function"&&string!=="[object RegExp]"||typeof window!=="undefined"&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}var ERROR_MESSAGE="Function.prototype.bind called on incompatible ";var slice$1=Array.prototype.slice;var toStr=Object.prototype.toString;var funcType="[object Function]";var implementation=function bind(that){var target=this;if(typeof target!=="function"||toStr.call(target)!==funcType){throw new TypeError(ERROR_MESSAGE+target)}var args=slice$1.call(arguments,1);var bound;var binder=function binder(){if(this instanceof bound){var result=target.apply(this,args.concat(slice$1.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice$1.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder);if(target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound};var functionBind=Function.prototype.bind||implementation;var toStr$1=Object.prototype.toString;var isArguments=function isArguments(value){var str=toStr$1.call(value);var isArgs=str==="[object Arguments]";if(!isArgs){isArgs=str!=="[object Array]"&&value!==null&&(typeof value==="undefined"?"undefined":_typeof2(value))==="object"&&typeof value.length==="number"&&value.length>=0&&toStr$1.call(value.callee)==="[object Function]"}return isArgs};var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty;var toStr$2=Object.prototype.toString;var isArgs=isArguments;var isEnumerable=Object.prototype.propertyIsEnumerable;var hasDontEnumBug=!isEnumerable.call({toString:null},"toString");var hasProtoEnumBug=isEnumerable.call(function(){},"prototype");var dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var equalsConstructorPrototype=function equalsConstructorPrototype(o){var ctor=o.constructor;return ctor&&ctor.prototype===o};var excludedKeys={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var hasAutomationEqualityBug=function(){if(typeof window==="undefined"){return false}for(var k in window){try{if(!excludedKeys["$"+k]&&has.call(window,k)&&window[k]!==null&&_typeof2(window[k])==="object"){try{equalsConstructorPrototype(window[k])}catch(e){return true}}}catch(e){return true}}return false}();var equalsConstructorPrototypeIfNotBuggy=function equalsConstructorPrototypeIfNotBuggy(o){if(typeof window==="undefined"||!hasAutomationEqualityBug){return equalsConstructorPrototype(o)}try{return equalsConstructorPrototype(o)}catch(e){return false}};keysShim=function keys(object){var isObject=object!==null&&(typeof object==="undefined"?"undefined":_typeof2(object))==="object";var isFunction=toStr$2.call(object)==="[object Function]";var isArguments$$1=isArgs(object);var isString=isObject&&toStr$2.call(object)==="[object String]";var theKeys=[];if(!isObject&&!isFunction&&!isArguments$$1){throw new TypeError("Object.keys called on a non-object")}var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0)){for(var i=0;i<object.length;++i){theKeys.push(String(i))}}if(isArguments$$1&&object.length>0){for(var j=0;j<object.length;++j){theKeys.push(String(j))}}else{for(var name in object){if(!(skipProto&&name==="prototype")&&has.call(object,name)){theKeys.push(String(name))}}}if(hasDontEnumBug){var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object);for(var k=0;k<dontEnums.length;++k){if(!(skipConstructor&&dontEnums[k]==="constructor")&&has.call(object,dontEnums[k])){theKeys.push(dontEnums[k])}}}return theKeys}}var implementation$1=keysShim;var slice$2=Array.prototype.slice;var origKeys=Object.keys;var keysShim$1=origKeys?function keys(o){return origKeys(o)}:implementation$1;var originalKeys=Object.keys;keysShim$1.shim=function shimObjectKeys(){if(Object.keys){var keysWorksWithArguments=function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2);if(!keysWorksWithArguments){Object.keys=function keys(object){if(isArguments(object)){return originalKeys(slice$2.call(object))}return originalKeys(object)}}}else{Object.keys=keysShim$1}return Object.keys||keysShim$1};var objectKeys=keysShim$1;var hasSymbols=typeof Symbol==="function"&&_typeof2(Symbol("foo"))==="symbol";var toStr$3=Object.prototype.toString;var concat=Array.prototype.concat;var origDefineProperty=Object.defineProperty;var isFunction$1=function isFunction$1(fn){return typeof fn==="function"&&toStr$3.call(fn)==="[object Function]"};var arePropertyDescriptorsSupported=function arePropertyDescriptorsSupported(){var obj={};try{origDefineProperty(obj,"x",{enumerable:false,value:obj});for(var _ in obj){return false}return obj.x===obj}catch(e){return false}};var supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported();var defineProperty=function defineProperty(object,name,value,predicate){if(name in object&&(!isFunction$1(predicate)||!predicate())){return}if(supportsDescriptors){origDefineProperty(object,name,{configurable:true,enumerable:false,value:value,writable:true})}else{object[name]=value}};var defineProperties=function defineProperties(object,map){var predicates=arguments.length>2?arguments[2]:{};var props=objectKeys(map);if(hasSymbols){props=concat.call(props,Object.getOwnPropertySymbols(map))}for(var i=0;i<props.length;i+=1){defineProperty(object,props[i],map[props[i]],predicates[props[i]])}};defineProperties.supportsDescriptors=!!supportsDescriptors;var defineProperties_1=defineProperties;var undefined$1;var ThrowTypeError=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError};var hasSymbols$1=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol";var getProto=Object.getPrototypeOf||function(x){return x.__proto__};var generator;var generatorFunction=generator?getProto(generator):undefined$1;var asyncFn;var asyncFunction=asyncFn?asyncFn.constructor:undefined$1;var asyncGen;var asyncGenFunction=asyncGen?getProto(asyncGen):undefined$1;var asyncGenIterator=asyncGen?asyncGen():undefined$1;var TypedArray=typeof Uint8Array==="undefined"?undefined$1:getProto(Uint8Array);var INTRINSICS={"$ %Array%":Array,"$ %ArrayBuffer%":typeof ArrayBuffer==="undefined"?undefined$1:ArrayBuffer,"$ %ArrayBufferPrototype%":typeof ArrayBuffer==="undefined"?undefined$1:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":hasSymbols$1?getProto([][Symbol.iterator]()):undefined$1,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":undefined$1,"$ %AsyncFunction%":asyncFunction,"$ %AsyncFunctionPrototype%":asyncFunction?asyncFunction.prototype:undefined$1,"$ %AsyncGenerator%":asyncGen?getProto(asyncGenIterator):undefined$1,"$ %AsyncGeneratorFunction%":asyncGenFunction,"$ %AsyncGeneratorPrototype%":asyncGenFunction?asyncGenFunction.prototype:undefined$1,"$ %AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols$1&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():undefined$1,"$ %Atomics%":typeof Atomics==="undefined"?undefined$1:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":typeof DataView==="undefined"?undefined$1:DataView,"$ %DataViewPrototype%":typeof DataView==="undefined"?undefined$1:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":typeof Float32Array==="undefined"?undefined$1:Float32Array,"$ %Float32ArrayPrototype%":typeof Float32Array==="undefined"?undefined$1:Float32Array.prototype,"$ %Float64Array%":typeof Float64Array==="undefined"?undefined$1:Float64Array,"$ %Float64ArrayPrototype%":typeof Float64Array==="undefined"?undefined$1:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":generator?getProto(generator()):undefined$1,"$ %GeneratorFunction%":generatorFunction,"$ %GeneratorPrototype%":generatorFunction?generatorFunction.prototype:undefined$1,"$ %Int8Array%":typeof Int8Array==="undefined"?undefined$1:Int8Array,"$ %Int8ArrayPrototype%":typeof Int8Array==="undefined"?undefined$1:Int8Array.prototype,"$ %Int16Array%":typeof Int16Array==="undefined"?undefined$1:Int16Array,"$ %Int16ArrayPrototype%":typeof Int16Array==="undefined"?undefined$1:Int8Array.prototype,"$ %Int32Array%":typeof Int32Array==="undefined"?undefined$1:Int32Array,"$ %Int32ArrayPrototype%":typeof Int32Array==="undefined"?undefined$1:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":hasSymbols$1?getProto(getProto([][Symbol.iterator]())):undefined$1,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":typeof Map==="undefined"?undefined$1:Map,"$ %MapIteratorPrototype%":typeof Map==="undefined"||!hasSymbols$1?undefined$1:getProto((new Map)[Symbol.iterator]()),"$ %MapPrototype%":typeof Map==="undefined"?undefined$1:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":typeof Promise==="undefined"?undefined$1:Promise,"$ %PromisePrototype%":typeof Promise==="undefined"?undefined$1:Promise.prototype,"$ %PromiseProto_then%":typeof Promise==="undefined"?undefined$1:Promise.prototype.then,"$ %Promise_all%":typeof Promise==="undefined"?undefined$1:Promise.all,"$ %Promise_reject%":typeof Promise==="undefined"?undefined$1:Promise.reject,"$ %Promise_resolve%":typeof Promise==="undefined"?undefined$1:Promise.resolve,"$ %Proxy%":typeof Proxy==="undefined"?undefined$1:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":typeof Reflect==="undefined"?undefined$1:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":typeof Set==="undefined"?undefined$1:Set,"$ %SetIteratorPrototype%":typeof Set==="undefined"||!hasSymbols$1?undefined$1:getProto((new Set)[Symbol.iterator]()),"$ %SetPrototype%":typeof Set==="undefined"?undefined$1:Set.prototype,"$ %SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?undefined$1:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":typeof SharedArrayBuffer==="undefined"?undefined$1:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":hasSymbols$1?getProto(""[Symbol.iterator]()):undefined$1,"$ %StringPrototype%":String.prototype,"$ %Symbol%":hasSymbols$1?Symbol:undefined$1,"$ %SymbolPrototype%":hasSymbols$1?Symbol.prototype:undefined$1,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":ThrowTypeError,"$ %TypedArray%":TypedArray,"$ %TypedArrayPrototype%":TypedArray?TypedArray.prototype:undefined$1,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":typeof Uint8Array==="undefined"?undefined$1:Uint8Array,"$ %Uint8ArrayPrototype%":typeof Uint8Array==="undefined"?undefined$1:Uint8Array.prototype,"$ %Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?undefined$1:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray==="undefined"?undefined$1:Uint8ClampedArray.prototype,"$ %Uint16Array%":typeof Uint16Array==="undefined"?undefined$1:Uint16Array,"$ %Uint16ArrayPrototype%":typeof Uint16Array==="undefined"?undefined$1:Uint16Array.prototype,"$ %Uint32Array%":typeof Uint32Array==="undefined"?undefined$1:Uint32Array,"$ %Uint32ArrayPrototype%":typeof Uint32Array==="undefined"?undefined$1:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":typeof WeakMap==="undefined"?undefined$1:WeakMap,"$ %WeakMapPrototype%":typeof WeakMap==="undefined"?undefined$1:WeakMap.prototype,"$ %WeakSet%":typeof WeakSet==="undefined"?undefined$1:WeakSet,"$ %WeakSetPrototype%":typeof WeakSet==="undefined"?undefined$1:WeakSet.prototype};var GetIntrinsic=function GetIntrinsic(name,allowMissing){if(arguments.length>1&&typeof allowMissing!=="boolean"){throw new TypeError('"allowMissing" argument must be a boolean')}var key="$ "+name;if(!(key in INTRINSICS)){throw new SyntaxError("intrinsic "+name+" does not exist!")}if(typeof INTRINSICS[key]==="undefined"&&!allowMissing){throw new TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!")}return INTRINSICS[key]};var src=functionBind.call(Function.call,Object.prototype.hasOwnProperty);var $TypeError=GetIntrinsic("%TypeError%");var $SyntaxError=GetIntrinsic("%SyntaxError%");var predicates={"Property Descriptor":function isPropertyDescriptor(ES,Desc){if(ES.Type(Desc)!=="Object"){return false}var allowed={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var key in Desc){if(src(Desc,key)&&!allowed[key]){return false}}var isData=src(Desc,"[[Value]]");var IsAccessor=src(Desc,"[[Get]]")||src(Desc,"[[Set]]");if(isData&&IsAccessor){throw new $TypeError("Property Descriptors may not be both accessor and data descriptors")}return true}};var assertRecord=function assertRecord(ES,recordType,argumentName,value){var predicate=predicates[recordType];if(typeof predicate!=="function"){throw new $SyntaxError("unknown record type: "+recordType)}if(!predicate(ES,value)){throw new $TypeError(argumentName+" must be a "+recordType)}console.log(predicate(ES,value),value)};var _isNaN=Number.isNaN||function isNaN(a){return a!==a};var $isNaN=Number.isNaN||function(a){return a!==a};var _isFinite=Number.isFinite||function(x){return typeof x==="number"&&!$isNaN(x)&&x!==Infinity&&x!==-Infinity};var sign=function sign(number){return number>=0?1:-1};var mod=function mod(number,modulo){var remain=number%modulo;return Math.floor(remain>=0?remain:remain+modulo)};var fnToStr=Function.prototype.toString;var constructorRegex=/^\s*class\b/;var isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return false}};var tryFunctionObject=function tryFunctionToStr(value){try{if(isES6ClassFn(value)){return false}fnToStr.call(value);return true}catch(e){return false}};var toStr$4=Object.prototype.toString;var fnClass="[object Function]";var genClass="[object GeneratorFunction]";var hasToStringTag=typeof Symbol==="function"&&_typeof2(Symbol.toStringTag)==="symbol";var isCallable=function isCallable(value){if(!value){return false}if(typeof value!=="function"&&(typeof value==="undefined"?"undefined":_typeof2(value))!=="object"){return false}if(typeof value==="function"&&!value.prototype){return true}if(hasToStringTag){return tryFunctionObject(value)}if(isES6ClassFn(value)){return false}var strClass=toStr$4.call(value);return strClass===fnClass||strClass===genClass};var isPrimitive=function isPrimitive(value){return value===null||typeof value!=="function"&&(typeof value==="undefined"?"undefined":_typeof2(value))!=="object"};var toStr$5=Object.prototype.toString;var ES5internalSlots={"[[DefaultValue]]":function DefaultValue(O){var actualHint;if(arguments.length>1){actualHint=arguments[1]}else{actualHint=toStr$5.call(O)==="[object Date]"?String:Number}if(actualHint===String||actualHint===Number){var methods=actualHint===String?["toString","valueOf"]:["valueOf","toString"];var value,i;for(i=0;i<methods.length;++i){if(isCallable(O[methods[i]])){value=O[methods[i]]();if(isPrimitive(value)){return value}}}throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};var es5=function ToPrimitive(input){if(isPrimitive(input)){return input}if(arguments.length>1){return ES5internalSlots["[[DefaultValue]]"](input,arguments[1])}return ES5internalSlots["[[DefaultValue]]"](input)};var $Object=GetIntrinsic("%Object%");var $TypeError$1=GetIntrinsic("%TypeError%");var $String=GetIntrinsic("%String%");var ES5={ToPrimitive:es5,ToBoolean:function ToBoolean(value){return!!value},ToNumber:function ToNumber(value){return+value},ToInteger:function ToInteger(value){var number=this.ToNumber(value);if(_isNaN(number)){return 0}if(number===0||!_isFinite(number)){return number}return sign(number)*Math.floor(Math.abs(number))},ToInt32:function ToInt32(x){return this.ToNumber(x)>>0},ToUint32:function ToUint32(x){return this.ToNumber(x)>>>0},ToUint16:function ToUint16(value){var number=this.ToNumber(value);if(_isNaN(number)||number===0||!_isFinite(number)){return 0}var posInt=sign(number)*Math.floor(Math.abs(number));return mod(posInt,65536)},ToString:function ToString(value){return $String(value)},ToObject:function ToObject(value){this.CheckObjectCoercible(value);return $Object(value)},CheckObjectCoercible:function CheckObjectCoercible(value,optMessage){if(value==null){throw new $TypeError$1(optMessage||"Cannot call method on "+value)}return value},IsCallable:isCallable,SameValue:function SameValue(x,y){if(x===y){if(x===0){return 1/x===1/y}return true}return _isNaN(x)&&_isNaN(y)},Type:function Type(x){if(x===null){return"Null"}if(typeof x==="undefined"){return"Undefined"}if(typeof x==="function"||(typeof x==="undefined"?"undefined":_typeof2(x))==="object"){return"Object"}if(typeof x==="number"){return"Number"}if(typeof x==="boolean"){return"Boolean"}if(typeof x==="string"){return"String"}},IsPropertyDescriptor:function IsPropertyDescriptor(Desc){if(this.Type(Desc)!=="Object"){return false}var allowed={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var key in Desc){if(src(Desc,key)&&!allowed[key]){return false}}var isData=src(Desc,"[[Value]]");var IsAccessor=src(Desc,"[[Get]]")||src(Desc,"[[Set]]");if(isData&&IsAccessor){throw new $TypeError$1("Property Descriptors may not be both accessor and data descriptors")}return true},IsAccessorDescriptor:function IsAccessorDescriptor(Desc){if(typeof Desc==="undefined"){return false}assertRecord(this,"Property Descriptor","Desc",Desc);if(!src(Desc,"[[Get]]")&&!src(Desc,"[[Set]]")){return false}return true},IsDataDescriptor:function IsDataDescriptor(Desc){if(typeof Desc==="undefined"){return false}assertRecord(this,"Property Descriptor","Desc",Desc);if(!src(Desc,"[[Value]]")&&!src(Desc,"[[Writable]]")){return false}return true},IsGenericDescriptor:function IsGenericDescriptor(Desc){if(typeof Desc==="undefined"){return false}assertRecord(this,"Property Descriptor","Desc",Desc);if(!this.IsAccessorDescriptor(Desc)&&!this.IsDataDescriptor(Desc)){return true}return false},FromPropertyDescriptor:function FromPropertyDescriptor(Desc){if(typeof Desc==="undefined"){return Desc}assertRecord(this,"Property Descriptor","Desc",Desc);if(this.IsDataDescriptor(Desc)){return{value:Desc["[[Value]]"],writable:!!Desc["[[Writable]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]}}else if(this.IsAccessorDescriptor(Desc)){return{get:Desc["[[Get]]"],set:Desc["[[Set]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]}}else{throw new $TypeError$1("FromPropertyDescriptor must be called with a fully populated Property Descriptor")}},ToPropertyDescriptor:function ToPropertyDescriptor(Obj){if(this.Type(Obj)!=="Object"){throw new $TypeError$1("ToPropertyDescriptor requires an object")}var desc={};if(src(Obj,"enumerable")){desc["[[Enumerable]]"]=this.ToBoolean(Obj.enumerable)}if(src(Obj,"configurable")){desc["[[Configurable]]"]=this.ToBoolean(Obj.configurable)}if(src(Obj,"value")){desc["[[Value]]"]=Obj.value}if(src(Obj,"writable")){desc["[[Writable]]"]=this.ToBoolean(Obj.writable)}if(src(Obj,"get")){var getter=Obj.get;if(typeof getter!=="undefined"&&!this.IsCallable(getter)){throw new TypeError("getter must be a function")}desc["[[Get]]"]=getter}if(src(Obj,"set")){var setter=Obj.set;if(typeof setter!=="undefined"&&!this.IsCallable(setter)){throw new $TypeError$1("setter must be a function")}desc["[[Set]]"]=setter}if((src(desc,"[[Get]]")||src(desc,"[[Set]]"))&&(src(desc,"[[Value]]")||src(desc,"[[Writable]]"))){throw new $TypeError$1("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute")}return desc}};var es5$1=ES5;var replace=functionBind.call(Function.call,String.prototype.replace);var leftWhitespace=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/;var rightWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;var implementation$2=function trim(){var S=es5$1.ToString(es5$1.CheckObjectCoercible(this));return replace(replace(S,leftWhitespace,""),rightWhitespace,"")};var zeroWidthSpace="​";var polyfill=function getPolyfill(){if(String.prototype.trim&&zeroWidthSpace.trim()===zeroWidthSpace){return String.prototype.trim}return implementation$2};var shim=function shimStringTrim(){var polyfill$$1=polyfill();defineProperties_1(String.prototype,{trim:polyfill$$1},{trim:function trim(){return String.prototype.trim!==polyfill$$1}});return polyfill$$1};var boundTrim=functionBind.call(Function.call,polyfill());defineProperties_1(boundTrim,{getPolyfill:polyfill,implementation:implementation$2,shim:shim});var string_prototype_trim=boundTrim;var toStr$6=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var forEachArray=function forEachArray(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++){if(hasOwnProperty.call(array,i)){if(receiver==null){iterator(array[i],i,array)}else{iterator.call(receiver,array[i],i,array)}}}};var forEachString=function forEachString(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++){if(receiver==null){iterator(string.charAt(i),i,string)}else{iterator.call(receiver,string.charAt(i),i,string)}}};var forEachObject=function forEachObject(object,iterator,receiver){for(var k in object){if(hasOwnProperty.call(object,k)){if(receiver==null){iterator(object[k],k,object)}else{iterator.call(receiver,object[k],k,object)}}}};var forEach=function forEach(list,iterator,thisArg){if(!isCallable(iterator)){throw new TypeError("iterator must be a function")}var receiver;if(arguments.length>=3){receiver=thisArg}if(toStr$6.call(list)==="[object Array]"){forEachArray(list,iterator,receiver)}else if(typeof list==="string"){forEachString(list,iterator,receiver)}else{forEachObject(list,iterator,receiver)}};var forEach_1=forEach;var isArray=function isArray(arg){return Object.prototype.toString.call(arg)==="[object Array]"};var parseHeaders=function parseHeaders(headers){if(!headers)return{};var result={};forEach_1(string_prototype_trim(headers).split("\n"),function(row){var index=row.indexOf(":"),key=string_prototype_trim(row.slice(0,index)).toLowerCase(),value=string_prototype_trim(row.slice(index+1));if(typeof result[key]==="undefined"){result[key]=value}else if(isArray(result[key])){result[key].push(value)}else{result[key]=[result[key],value]}});return result};var immutable=extend;var hasOwnProperty$1=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty$1.call(source,key)){target[key]=source[key]}}}return target}var xhr=createXHR;createXHR.XMLHttpRequest=window_1.XMLHttpRequest||noop;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window_1.XDomainRequest;forEachArray$1(["get","put","post","patch","head","delete"],function(method){
createXHR[method==="delete"?"del":method]=function(uri,options,callback){options=initParams(uri,options,callback);options.method=method.toUpperCase();return _createXHR(options)}});function forEachArray$1(array,iterator){for(var i=0;i<array.length;i++){iterator(array[i])}}function isEmpty(obj){for(var i in obj){if(obj.hasOwnProperty(i))return false}return true}function initParams(uri,options,callback){var params=uri;if(isFunction_1(options)){callback=options;if(typeof uri==="string"){params={uri:uri}}}else{params=immutable(options,{uri:uri})}params.callback=callback;return params}function createXHR(uri,options,callback){options=initParams(uri,options,callback);return _createXHR(options)}function _createXHR(options){if(typeof options.callback==="undefined"){throw new Error("callback argument missing")}var called=false;var callback=function cbOnce(err,response,body){if(!called){called=true;options.callback(err,response,body)}};function readystatechange(){if(xhr.readyState===4){setTimeout(loadFunc,0)}}function getBody(){var body=undefined;if(xhr.response){body=xhr.response}else{body=xhr.responseText||getXml(xhr)}if(isJson){try{body=JSON.parse(body)}catch(e){}}return body}function errorFunc(evt){clearTimeout(timeoutTimer);if(!(evt instanceof Error)){evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"))}evt.statusCode=0;return callback(evt,failureResponse)}function loadFunc(){if(aborted)return;var status;clearTimeout(timeoutTimer);if(options.useXDR&&xhr.status===undefined){status=200}else{status=xhr.status===1223?204:xhr.status}var response=failureResponse;var err=null;if(status!==0){response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr};if(xhr.getAllResponseHeaders){response.headers=parseHeaders(xhr.getAllResponseHeaders())}}else{err=new Error("Internal XMLHttpRequest Error")}return callback(err,response,response.body)}var xhr=options.xhr||null;if(!xhr){if(options.cors||options.useXDR){xhr=new createXHR.XDomainRequest}else{xhr=new createXHR.XMLHttpRequest}}var key;var aborted;var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var timeoutTimer;var failureResponse={body:undefined,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr};if("json"in options&&options.json!==false){isJson=true;headers["accept"]||headers["Accept"]||(headers["Accept"]="application/json");if(method!=="GET"&&method!=="HEAD"){headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json");body=JSON.stringify(options.json===true?body:options.json)}}xhr.onreadystatechange=readystatechange;xhr.onload=loadFunc;xhr.onerror=errorFunc;xhr.onprogress=function(){};xhr.onabort=function(){aborted=true};xhr.ontimeout=errorFunc;xhr.open(method,uri,!sync,options.username,options.password);if(!sync){xhr.withCredentials=!!options.withCredentials}if(!sync&&options.timeout>0){timeoutTimer=setTimeout(function(){if(aborted)return;aborted=true;xhr.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";errorFunc(e)},options.timeout)}if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key])}}}else if(options.headers&&!isEmpty(options.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in options){xhr.responseType=options.responseType}if("beforeSend"in options&&typeof options.beforeSend==="function"){options.beforeSend(xhr)}xhr.send(body||null);return xhr}function getXml(xhr){if(xhr.responseType==="document"){return xhr.responseXML}var firefoxBugTakenEffect=xhr.responseXML&&xhr.responseXML.documentElement.nodeName==="parsererror";if(xhr.responseType===""&&!firefoxBugTakenEffect){return xhr.responseXML}return null}function noop(){}var _objCreate=Object.create||function(){function F(){}return function(o){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.")}F.prototype=o;return new F}}();function ParsingError(errorData,message){this.name="ParsingError";this.code=errorData.code;this.message=message||errorData.message}ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(input){function computeSeconds(h,m,s,f){return(h|0)*3600+(m|0)*60+(s|0)+(f|0)/1e3}var m=input.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!m){return null}if(m[3]){return computeSeconds(m[1],m[2],m[3].replace(":",""),m[4])}else if(m[1]>59){return computeSeconds(m[1],m[2],0,m[4])}else{return computeSeconds(0,m[1],m[2],m[4])}}function Settings(){this.values=_objCreate(null)}Settings.prototype={set:function set(k,v){if(!this.get(k)&&v!==""){this.values[k]=v}},get:function get(k,dflt,defaultKey){if(defaultKey){return this.has(k)?this.values[k]:dflt[defaultKey]}return this.has(k)?this.values[k]:dflt},has:function has(k){return k in this.values},alt:function alt(k,v,a){for(var n=0;n<a.length;++n){if(v===a[n]){this.set(k,v);break}}},integer:function integer(k,v){if(/^-?\d+$/.test(v)){this.set(k,parseInt(v,10))}},percent:function percent(k,v){var m;if(m=v.match(/^([\d]{1,3})(\.[\d]*)?%$/)){v=parseFloat(v);if(v>=0&&v<=100){this.set(k,v);return true}}return false}};function parseOptions(input,callback,keyValueDelim,groupDelim){var groups=groupDelim?input.split(groupDelim):[input];for(var i in groups){if(typeof groups[i]!=="string"){continue}var kv=groups[i].split(keyValueDelim);if(kv.length!==2){continue}var k=kv[0];var v=kv[1];callback(k,v)}}function parseCue(input,cue,regionList){var oInput=input;function consumeTimeStamp(){var ts=parseTimeStamp(input);if(ts===null){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+oInput)}input=input.replace(/^[^\sa-zA-Z-]+/,"");return ts}function consumeCueSettings(input,cue){var settings=new Settings;parseOptions(input,function(k,v){switch(k){case"region":for(var i=regionList.length-1;i>=0;i--){if(regionList[i].id===v){settings.set(k,regionList[i].region);break}}break;case"vertical":settings.alt(k,v,["rl","lr"]);break;case"line":var vals=v.split(","),vals0=vals[0];settings.integer(k,vals0);settings.percent(k,vals0)?settings.set("snapToLines",false):null;settings.alt(k,vals0,["auto"]);if(vals.length===2){settings.alt("lineAlign",vals[1],["start","middle","end"])}break;case"position":vals=v.split(",");settings.percent(k,vals[0]);if(vals.length===2){settings.alt("positionAlign",vals[1],["start","middle","end"])}break;case"size":settings.percent(k,v);break;case"align":settings.alt(k,v,["start","middle","end","left","right"]);break}},/:/,/\s/);cue.region=settings.get("region",null);cue.vertical=settings.get("vertical","");cue.line=settings.get("line","auto");cue.lineAlign=settings.get("lineAlign","start");cue.snapToLines=settings.get("snapToLines",true);cue.size=settings.get("size",100);cue.align=settings.get("align","middle");cue.position=settings.get("position",{start:0,left:0,middle:50,end:100,right:100},cue.align);cue.positionAlign=settings.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},cue.align)}function skipWhitespace(){input=input.replace(/^\s+/,"")}skipWhitespace();cue.startTime=consumeTimeStamp();skipWhitespace();if(input.substr(0,3)!=="-->"){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+oInput)}input=input.substr(3);skipWhitespace();cue.endTime=consumeTimeStamp();skipWhitespace();consumeCueSettings(input,cue)}var ESCAPE={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "};var TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var TAG_ANNOTATION={v:"title",lang:"lang"};var NEEDS_PARENT={rt:"ruby"};function parseContent(window,input){function nextToken(){if(!input){return null}function consume(result){input=input.substr(result.length);return result}var m=input.match(/^([^<]*)(<[^>]*>?)?/);return consume(m[1]?m[1]:m[2])}function unescape1(e){return ESCAPE[e]}function unescape(s){while(m=s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)){s=s.replace(m[0],unescape1)}return s}function shouldAdd(current,element){return!NEEDS_PARENT[element.localName]||NEEDS_PARENT[element.localName]===current.localName}function createElement(type,annotation){var tagName=TAG_NAME[type];if(!tagName){return null}var element=window.document.createElement(tagName);element.localName=tagName;var name=TAG_ANNOTATION[type];if(name&&annotation){element[name]=annotation.trim()}return element}var rootDiv=window.document.createElement("div"),current=rootDiv,t,tagStack=[];while((t=nextToken())!==null){if(t[0]==="<"){if(t[1]==="/"){if(tagStack.length&&tagStack[tagStack.length-1]===t.substr(2).replace(">","")){tagStack.pop();current=current.parentNode}continue}var ts=parseTimeStamp(t.substr(1,t.length-2));var node;if(ts){node=window.document.createProcessingInstruction("timestamp",ts);current.appendChild(node);continue}var m=t.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m){continue}node=createElement(m[1],m[3]);if(!node){continue}if(!shouldAdd(current,node)){continue}if(m[2]){node.className=m[2].substr(1).replace("."," ")}tagStack.push(m[1]);current.appendChild(node);current=node;continue}current.appendChild(window.document.createTextNode(unescape(t)))}return rootDiv}var strongRTLRanges=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(charCode){for(var i=0;i<strongRTLRanges.length;i++){var currentRange=strongRTLRanges[i];if(charCode>=currentRange[0]&&charCode<=currentRange[1]){return true}}return false}function determineBidi(cueDiv){var nodeStack=[],text="",charCode;if(!cueDiv||!cueDiv.childNodes){return"ltr"}function pushNodes(nodeStack,node){for(var i=node.childNodes.length-1;i>=0;i--){nodeStack.push(node.childNodes[i])}}function nextTextNode(nodeStack){if(!nodeStack||!nodeStack.length){return null}var node=nodeStack.pop(),text=node.textContent||node.innerText;if(text){var m=text.match(/^.*(\n|\r)/);if(m){nodeStack.length=0;return m[0]}return text}if(node.tagName==="ruby"){return nextTextNode(nodeStack)}if(node.childNodes){pushNodes(nodeStack,node);return nextTextNode(nodeStack)}}pushNodes(nodeStack,cueDiv);while(text=nextTextNode(nodeStack)){for(var i=0;i<text.length;i++){charCode=text.charCodeAt(i);if(isStrongRTLChar(charCode)){return"rtl"}}}return"ltr"}function computeLinePos(cue){if(typeof cue.line==="number"&&(cue.snapToLines||cue.line>=0&&cue.line<=100)){return cue.line}if(!cue.track||!cue.track.textTrackList||!cue.track.textTrackList.mediaElement){return-1}var track=cue.track,trackList=track.textTrackList,count=0;for(var i=0;i<trackList.length&&trackList[i]!==track;i++){if(trackList[i].mode==="showing"){count++}}return++count*-1}function StyleBox(){}StyleBox.prototype.applyStyles=function(styles,div){div=div||this.div;for(var prop in styles){if(styles.hasOwnProperty(prop)){div.style[prop]=styles[prop]}}};StyleBox.prototype.formatStyle=function(val,unit){return val===0?0:val+unit};function CueStyleBox(window,cue,styleOptions){StyleBox.call(this);this.cue=cue;this.cueDiv=parseContent(window,cue.text);var styles={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(styles,this.cueDiv);this.div=window.document.createElement("div");styles={direction:determineBidi(this.cueDiv),writingMode:cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:cue.align==="middle"?"center":cue.align,font:styleOptions.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(styles);this.div.appendChild(this.cueDiv);var textPos=0;switch(cue.positionAlign){case"start":textPos=cue.position;break;case"middle":textPos=cue.position-cue.size/2;break;case"end":textPos=cue.position-cue.size;break}if(cue.vertical===""){this.applyStyles({left:this.formatStyle(textPos,"%"),width:this.formatStyle(cue.size,"%")})}else{this.applyStyles({top:this.formatStyle(textPos,"%"),height:this.formatStyle(cue.size,"%")})}this.move=function(box){this.applyStyles({top:this.formatStyle(box.top,"px"),bottom:this.formatStyle(box.bottom,"px"),left:this.formatStyle(box.left,"px"),right:this.formatStyle(box.right,"px"),height:this.formatStyle(box.height,"px"),width:this.formatStyle(box.width,"px")})}}CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(obj){var lh,height,width,top;if(obj.div){height=obj.div.offsetHeight;width=obj.div.offsetWidth;top=obj.div.offsetTop;var rects=(rects=obj.div.childNodes)&&(rects=rects[0])&&rects.getClientRects&&rects.getClientRects();obj=obj.div.getBoundingClientRect();lh=rects?Math.max(rects[0]&&rects[0].height||0,obj.height/rects.length):0}this.left=obj.left;this.right=obj.right;this.top=obj.top||top;this.height=obj.height||height;this.bottom=obj.bottom||top+(obj.height||height);this.width=obj.width||width;this.lineHeight=lh!==undefined?lh:obj.lineHeight}BoxPosition.prototype.move=function(axis,toMove){toMove=toMove!==undefined?toMove:this.lineHeight;switch(axis){case"+x":this.left+=toMove;this.right+=toMove;break;case"-x":this.left-=toMove;this.right-=toMove;break;case"+y":this.top+=toMove;this.bottom+=toMove;break;case"-y":this.top-=toMove;this.bottom-=toMove;break}};BoxPosition.prototype.overlaps=function(b2){return this.left<b2.right&&this.right>b2.left&&this.top<b2.bottom&&this.bottom>b2.top};BoxPosition.prototype.overlapsAny=function(boxes){for(var i=0;i<boxes.length;i++){if(this.overlaps(boxes[i])){return true}}return false};BoxPosition.prototype.within=function(container){return this.top>=container.top&&this.bottom<=container.bottom&&this.left>=container.left&&this.right<=container.right};BoxPosition.prototype.overlapsOppositeAxis=function(container,axis){switch(axis){case"+x":return this.left<container.left;case"-x":return this.right>container.right;case"+y":return this.top<container.top;case"-y":return this.bottom>container.bottom}};BoxPosition.prototype.intersectPercentage=function(b2){var x=Math.max(0,Math.min(this.right,b2.right)-Math.max(this.left,b2.left)),y=Math.max(0,Math.min(this.bottom,b2.bottom)-Math.max(this.top,b2.top)),intersectArea=x*y;return intersectArea/(this.height*this.width)};BoxPosition.prototype.toCSSCompatValues=function(reference){return{top:this.top-reference.top,bottom:reference.bottom-this.bottom,left:this.left-reference.left,right:reference.right-this.right,height:this.height,width:this.width}};BoxPosition.getSimpleBoxPosition=function(obj){var height=obj.div?obj.div.offsetHeight:obj.tagName?obj.offsetHeight:0;var width=obj.div?obj.div.offsetWidth:obj.tagName?obj.offsetWidth:0;var top=obj.div?obj.div.offsetTop:obj.tagName?obj.offsetTop:0;obj=obj.div?obj.div.getBoundingClientRect():obj.tagName?obj.getBoundingClientRect():obj;var ret={left:obj.left,right:obj.right,top:obj.top||top,height:obj.height||height,bottom:obj.bottom||top+(obj.height||height),width:obj.width||width};return ret};function moveBoxToLinePosition(window,styleBox,containerBox,boxPositions){function findBestPosition(b,axis){var bestPosition,specifiedPosition=new BoxPosition(b),percentage=1;for(var i=0;i<axis.length;i++){while(b.overlapsOppositeAxis(containerBox,axis[i])||b.within(containerBox)&&b.overlapsAny(boxPositions)){b.move(axis[i])}if(b.within(containerBox)){return b}var p=b.intersectPercentage(containerBox);if(percentage>p){bestPosition=new BoxPosition(b);percentage=p}b=new BoxPosition(specifiedPosition)}return bestPosition||specifiedPosition}var boxPosition=new BoxPosition(styleBox),cue=styleBox.cue,linePos=computeLinePos(cue),axis=[];if(cue.snapToLines){var size;switch(cue.vertical){case"":axis=["+y","-y"];size="height";break;case"rl":axis=["+x","-x"];size="width";break;case"lr":axis=["-x","+x"];size="width";break}var step=boxPosition.lineHeight,position=step*Math.round(linePos),maxPosition=containerBox[size]+step,initialAxis=axis[0];if(Math.abs(position)>maxPosition){position=position<0?-1:1;position*=Math.ceil(maxPosition/step)*step}if(linePos<0){position+=cue.vertical===""?containerBox.height:containerBox.width;axis=axis.reverse()}boxPosition.move(initialAxis,position)}else{var calculatedPercentage=boxPosition.lineHeight/containerBox.height*100;switch(cue.lineAlign){case"middle":linePos-=calculatedPercentage/2;break;case"end":linePos-=calculatedPercentage;break}switch(cue.vertical){case"":styleBox.applyStyles({top:styleBox.formatStyle(linePos,"%")});break;case"rl":styleBox.applyStyles({left:styleBox.formatStyle(linePos,"%")});break;case"lr":styleBox.applyStyles({right:styleBox.formatStyle(linePos,"%")});break}axis=["+y","-x","+x","-y"];boxPosition=new BoxPosition(styleBox)}var bestPosition=findBestPosition(boxPosition,axis);styleBox.move(bestPosition.toCSSCompatValues(containerBox))}function WebVTT$1(){}WebVTT$1.StringDecoder=function(){return{decode:function decode(data){if(!data){return""}if(typeof data!=="string"){throw new Error("Error - expected string data.")}return decodeURIComponent(encodeURIComponent(data))}}};WebVTT$1.convertCueToDOMTree=function(window,cuetext){if(!window||!cuetext){return null}return parseContent(window,cuetext)};var FONT_SIZE_PERCENT=.05;var FONT_STYLE="sans-serif";var CUE_BACKGROUND_PADDING="1.5%";WebVTT$1.processCues=function(window,cues,overlay){if(!window||!cues||!overlay){return null}while(overlay.firstChild){overlay.removeChild(overlay.firstChild)}var paddedOverlay=window.document.createElement("div");paddedOverlay.style.position="absolute";paddedOverlay.style.left="0";paddedOverlay.style.right="0";paddedOverlay.style.top="0";paddedOverlay.style.bottom="0";paddedOverlay.style.margin=CUE_BACKGROUND_PADDING;overlay.appendChild(paddedOverlay);function shouldCompute(cues){for(var i=0;i<cues.length;i++){if(cues[i].hasBeenReset||!cues[i].displayState){return true}}return false}if(!shouldCompute(cues)){for(var i=0;i<cues.length;i++){paddedOverlay.appendChild(cues[i].displayState)}return}var boxPositions=[],containerBox=BoxPosition.getSimpleBoxPosition(paddedOverlay),fontSize=Math.round(containerBox.height*FONT_SIZE_PERCENT*100)/100;var styleOptions={font:fontSize+"px "+FONT_STYLE};(function(){var styleBox,cue;for(var i=0;i<cues.length;i++){cue=cues[i];styleBox=new CueStyleBox(window,cue,styleOptions);paddedOverlay.appendChild(styleBox.div);moveBoxToLinePosition(window,styleBox,containerBox,boxPositions);cue.displayState=styleBox.div;boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox))}})()};WebVTT$1.Parser=function(window,vttjs,decoder){if(!decoder){decoder=vttjs;vttjs={}}if(!vttjs){vttjs={}}this.window=window;this.vttjs=vttjs;this.state="INITIAL";this.buffer="";this.decoder=decoder||new TextDecoder("utf8");this.regionList=[]};WebVTT$1.Parser.prototype={reportOrThrowError:function reportOrThrowError(e){if(e instanceof ParsingError){this.onparsingerror&&this.onparsingerror(e)}else{throw e}},parse:function parse(data){var self=this;if(data){self.buffer+=self.decoder.decode(data,{stream:true})}function collectNextLine(){var buffer=self.buffer;var pos=0;while(pos<buffer.length&&buffer[pos]!=="\r"&&buffer[pos]!=="\n"){++pos}var line=buffer.substr(0,pos);if(buffer[pos]==="\r"){++pos}if(buffer[pos]==="\n"){++pos}self.buffer=buffer.substr(pos);return line}function parseRegion(input){var settings=new Settings;parseOptions(input,function(k,v){switch(k){case"id":settings.set(k,v);break;case"width":settings.percent(k,v);break;case"lines":settings.integer(k,v);break;case"regionanchor":case"viewportanchor":var xy=v.split(",");if(xy.length!==2){break}var anchor=new Settings;anchor.percent("x",xy[0]);anchor.percent("y",xy[1]);if(!anchor.has("x")||!anchor.has("y")){break}settings.set(k+"X",anchor.get("x"));settings.set(k+"Y",anchor.get("y"));break;case"scroll":settings.alt(k,v,["up"]);break}},/=/,/\s/);if(settings.has("id")){var region=new(self.vttjs.VTTRegion||self.window.VTTRegion);region.width=settings.get("width",100);region.lines=settings.get("lines",3);region.regionAnchorX=settings.get("regionanchorX",0);region.regionAnchorY=settings.get("regionanchorY",100);region.viewportAnchorX=settings.get("viewportanchorX",0);region.viewportAnchorY=settings.get("viewportanchorY",100);region.scroll=settings.get("scroll","");self.onregion&&self.onregion(region);self.regionList.push({id:settings.get("id"),region:region})}}function parseTimestampMap(input){var settings=new Settings;parseOptions(input,function(k,v){switch(k){case"MPEGT":settings.integer(k+"S",v);break;case"LOCA":settings.set(k+"L",parseTimeStamp(v));break}},/[^\d]:/,/,/);self.ontimestampmap&&self.ontimestampmap({MPEGTS:settings.get("MPEGTS"),LOCAL:settings.get("LOCAL")})}function parseHeader(input){if(input.match(/X-TIMESTAMP-MAP/)){parseOptions(input,function(k,v){switch(k){case"X-TIMESTAMP-MAP":parseTimestampMap(v);break}},/=/)}else{parseOptions(input,function(k,v){switch(k){case"Region":parseRegion(v);break}},/:/)}}try{var line;if(self.state==="INITIAL"){if(!/\r\n|\n/.test(self.buffer)){return this}line=collectNextLine();var m=line.match(/^WEBVTT([ \t].*)?$/);if(!m||!m[0]){throw new ParsingError(ParsingError.Errors.BadSignature)}self.state="HEADER"}var alreadyCollectedLine=false;while(self.buffer){if(!/\r\n|\n/.test(self.buffer)){return this}if(!alreadyCollectedLine){line=collectNextLine()}else{alreadyCollectedLine=false}switch(self.state){case"HEADER":if(/:/.test(line)){parseHeader(line)}else if(!line){self.state="ID"}continue;case"NOTE":if(!line){self.state="ID"}continue;case"ID":if(/^NOTE($|[ \t])/.test(line)){self.state="NOTE";break}if(!line){continue}self.cue=new(self.vttjs.VTTCue||self.window.VTTCue)(0,0,"");self.state="CUE";if(line.indexOf("-->")===-1){self.cue.id=line;continue}case"CUE":try{parseCue(line,self.cue,self.regionList)}catch(e){self.reportOrThrowError(e);self.cue=null;self.state="BADCUE";continue}self.state="CUETEXT";continue;case"CUETEXT":var hasSubstring=line.indexOf("-->")!==-1;if(!line||hasSubstring&&(alreadyCollectedLine=true)){self.oncue&&self.oncue(self.cue);self.cue=null;self.state="ID";continue}if(self.cue.text){self.cue.text+="\n"}self.cue.text+=line;continue;case"BADCUE":if(!line){self.state="ID"}continue}}}catch(e){self.reportOrThrowError(e);if(self.state==="CUETEXT"&&self.cue&&self.oncue){self.oncue(self.cue)}self.cue=null;self.state=self.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function flush(){var self=this;try{self.buffer+=self.decoder.decode();if(self.cue||self.state==="HEADER"){self.buffer+="\n\n";self.parse()}if(self.state==="INITIAL"){throw new ParsingError(ParsingError.Errors.BadSignature)}}catch(e){self.reportOrThrowError(e)}self.onflush&&self.onflush();return this}};var vtt=WebVTT$1;var autoKeyword="auto";var directionSetting={"":1,lr:1,rl:1};var alignSetting={start:1,middle:1,end:1,left:1,right:1};function findDirectionSetting(value){if(typeof value!=="string"){return false}var dir=directionSetting[value.toLowerCase()];return dir?value.toLowerCase():false}function findAlignSetting(value){if(typeof value!=="string"){return false}var align=alignSetting[value.toLowerCase()];return align?value.toLowerCase():false}function VTTCue(startTime,endTime,text){this.hasBeenReset=false;var _id="";var _pauseOnExit=false;var _startTime=startTime;var _endTime=endTime;var _text=text;var _region=null;var _vertical="";var _snapToLines=true;var _line="auto";var _lineAlign="start";var _position=50;var _positionAlign="middle";var _size=50;var _align="middle";Object.defineProperties(this,{id:{enumerable:true,get:function get(){return _id},set:function set(value){_id=""+value}},pauseOnExit:{enumerable:true,get:function get(){return _pauseOnExit},set:function set(value){_pauseOnExit=!!value}},startTime:{enumerable:true,get:function get(){return _startTime},set:function set(value){if(typeof value!=="number"){throw new TypeError("Start time must be set to a number.")}_startTime=value;this.hasBeenReset=true}},endTime:{enumerable:true,get:function get(){return _endTime},set:function set(value){if(typeof value!=="number"){throw new TypeError("End time must be set to a number.")}_endTime=value;this.hasBeenReset=true}},text:{enumerable:true,get:function get(){return _text},set:function set(value){_text=""+value;this.hasBeenReset=true}},region:{enumerable:true,get:function get(){return _region},set:function set(value){_region=value;this.hasBeenReset=true}},vertical:{enumerable:true,get:function get(){return _vertical},set:function set(value){var setting=findDirectionSetting(value);if(setting===false){throw new SyntaxError("An invalid or illegal string was specified.")}_vertical=setting;this.hasBeenReset=true}},snapToLines:{enumerable:true,get:function get(){return _snapToLines},set:function set(value){_snapToLines=!!value;this.hasBeenReset=true}},line:{enumerable:true,get:function get(){return _line},set:function set(value){if(typeof value!=="number"&&value!==autoKeyword){throw new SyntaxError("An invalid number or illegal string was specified.")}_line=value;this.hasBeenReset=true}},lineAlign:{enumerable:true,get:function get(){return _lineAlign},set:function set(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.")}_lineAlign=setting;this.hasBeenReset=true}},position:{enumerable:true,get:function get(){return _position},set:function set(value){if(value<0||value>100){throw new Error("Position must be between 0 and 100.")}_position=value;this.hasBeenReset=true}},positionAlign:{enumerable:true,get:function get(){return _positionAlign},set:function set(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.")}_positionAlign=setting;this.hasBeenReset=true}},size:{enumerable:true,get:function get(){return _size},set:function set(value){if(value<0||value>100){throw new Error("Size must be between 0 and 100.")}_size=value;this.hasBeenReset=true}},align:{enumerable:true,get:function get(){return _align},set:function set(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.")}_align=setting;this.hasBeenReset=true}}});this.displayState=undefined}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var vttcue=VTTCue;var scrollSetting={"":true,up:true};function findScrollSetting(value){if(typeof value!=="string"){return false}var scroll=scrollSetting[value.toLowerCase()];return scroll?value.toLowerCase():false}function isValidPercentValue(value){return typeof value==="number"&&value>=0&&value<=100}function VTTRegion(){var _width=100;var _lines=3;var _regionAnchorX=0;var _regionAnchorY=100;var _viewportAnchorX=0;var _viewportAnchorY=100;var _scroll="";Object.defineProperties(this,{width:{enumerable:true,get:function get(){return _width},set:function set(value){if(!isValidPercentValue(value)){throw new Error("Width must be between 0 and 100.")}_width=value}},lines:{enumerable:true,get:function get(){return _lines},set:function set(value){if(typeof value!=="number"){throw new TypeError("Lines must be set to a number.")}_lines=value}},regionAnchorY:{enumerable:true,get:function get(){return _regionAnchorY},set:function set(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorX must be between 0 and 100.")}_regionAnchorY=value}},regionAnchorX:{enumerable:true,get:function get(){return _regionAnchorX},set:function set(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorY must be between 0 and 100.")}_regionAnchorX=value}},viewportAnchorY:{enumerable:true,get:function get(){return _viewportAnchorY},set:function set(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorY must be between 0 and 100.")}_viewportAnchorY=value}},viewportAnchorX:{enumerable:true,get:function get(){return _viewportAnchorX},set:function set(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorX must be between 0 and 100.")}_viewportAnchorX=value}},scroll:{enumerable:true,get:function get(){return _scroll},set:function set(value){var setting=findScrollSetting(value);if(setting===false){throw new SyntaxError("An invalid or illegal string was specified.")}_scroll=setting}}})}var vttregion=VTTRegion;var browserIndex=createCommonjsModule$1(function(module){var vttjs=module.exports={WebVTT:vtt,VTTCue:vttcue,VTTRegion:vttregion};window_1.vttjs=vttjs;window_1.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue;var regionShim=vttjs.VTTRegion;var nativeVTTCue=window_1.VTTCue;var nativeVTTRegion=window_1.VTTRegion;vttjs.shim=function(){window_1.VTTCue=cueShim;window_1.VTTRegion=regionShim};vttjs.restore=function(){window_1.VTTCue=nativeVTTCue;window_1.VTTRegion=nativeVTTRegion};if(!window_1.VTTCue){vttjs.shim()}});var browserIndex_1=browserIndex.WebVTT;var browserIndex_2=browserIndex.VTTCue;var browserIndex_3=browserIndex.VTTRegion;var urlToolkit=createCommonjsModule$1(function(module,exports){(function(root){var URL_REGEX=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var FIRST_SEGMENT_REGEX=/^([^\/?#]*)(.*)$/;var SLASH_DOT_REGEX=/(?:\/|^)\.(?=\/)/g;var SLASH_DOT_DOT_REGEX=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var URLToolkit={buildAbsoluteURL:function buildAbsoluteURL(baseURL,relativeURL,opts){opts=opts||{};baseURL=baseURL.trim();relativeURL=relativeURL.trim();if(!relativeURL){if(!opts.alwaysNormalize){return baseURL}var basePartsForNormalise=URLToolkit.parseURL(baseURL);if(!basePartsForNormalise){throw new Error("Error trying to parse base URL.")}basePartsForNormalise.path=URLToolkit.normalizePath(basePartsForNormalise.path);return URLToolkit.buildURLFromParts(basePartsForNormalise)}var relativeParts=URLToolkit.parseURL(relativeURL);if(!relativeParts){throw new Error("Error trying to parse relative URL.")}if(relativeParts.scheme){if(!opts.alwaysNormalize){return relativeURL}relativeParts.path=URLToolkit.normalizePath(relativeParts.path);return URLToolkit.buildURLFromParts(relativeParts)}var baseParts=URLToolkit.parseURL(baseURL);if(!baseParts){throw new Error("Error trying to parse base URL.")}if(!baseParts.netLoc&&baseParts.path&&baseParts.path[0]!=="/"){var pathParts=FIRST_SEGMENT_REGEX.exec(baseParts.path);baseParts.netLoc=pathParts[1];
baseParts.path=pathParts[2]}if(baseParts.netLoc&&!baseParts.path){baseParts.path="/"}var builtParts={scheme:baseParts.scheme,netLoc:relativeParts.netLoc,path:null,params:relativeParts.params,query:relativeParts.query,fragment:relativeParts.fragment};if(!relativeParts.netLoc){builtParts.netLoc=baseParts.netLoc;if(relativeParts.path[0]!=="/"){if(!relativeParts.path){builtParts.path=baseParts.path;if(!relativeParts.params){builtParts.params=baseParts.params;if(!relativeParts.query){builtParts.query=baseParts.query}}}else{var baseURLPath=baseParts.path;var newPath=baseURLPath.substring(0,baseURLPath.lastIndexOf("/")+1)+relativeParts.path;builtParts.path=URLToolkit.normalizePath(newPath)}}}if(builtParts.path===null){builtParts.path=opts.alwaysNormalize?URLToolkit.normalizePath(relativeParts.path):relativeParts.path}return URLToolkit.buildURLFromParts(builtParts)},parseURL:function parseURL(url){var parts=URL_REGEX.exec(url);if(!parts){return null}return{scheme:parts[1]||"",netLoc:parts[2]||"",path:parts[3]||"",params:parts[4]||"",query:parts[5]||"",fragment:parts[6]||""}},normalizePath:function normalizePath(path){path=path.split("").reverse().join("").replace(SLASH_DOT_REGEX,"");while(path.length!==(path=path.replace(SLASH_DOT_DOT_REGEX,"")).length){}return path.split("").reverse().join("")},buildURLFromParts:function buildURLFromParts(parts){return parts.scheme+parts.netLoc+parts.path+parts.params+parts.query+parts.fragment}};module.exports=URLToolkit})(commonjsGlobal$1)});function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}var Stream=function(){function Stream(){this.listeners={}}var _proto=Stream.prototype;_proto.on=function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[]}this.listeners[type].push(listener)};_proto.off=function off(type,listener){if(!this.listeners[type]){return false}var index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1};_proto.trigger=function trigger(type){var callbacks=this.listeners[type];var i;var length;var args;if(!callbacks){return}if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{args=Array.prototype.slice.call(arguments,1);length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args)}}};_proto.dispose=function dispose(){this.listeners={}};_proto.pipe=function pipe(destination){this.on("data",function(data){destination.push(data)})};return Stream}();var LineStream=function(_Stream){_inheritsLoose(LineStream,_Stream);function LineStream(){var _this;_this=_Stream.call(this)||this;_this.buffer="";return _this}var _proto=LineStream.prototype;_proto.push=function push(data){var nextNewline;this.buffer+=data;nextNewline=this.buffer.indexOf("\n");for(;nextNewline>-1;nextNewline=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,nextNewline));this.buffer=this.buffer.substring(nextNewline+1)}};return LineStream}(Stream);var attributeSeparator=function attributeSeparator(){var key="[^=]*";var value='"[^"]*"|[^,]*';var keyvalue="(?:"+key+")=(?:"+value+")";return new RegExp("(?:^|,)("+keyvalue+")")};var parseAttributes=function parseAttributes(attributes){var attrs=attributes.split(attributeSeparator());var result={};var i=attrs.length;var attr;while(i--){if(attrs[i]===""){continue}attr=/([^=]*)=(.*)/.exec(attrs[i]).slice(1);attr[0]=attr[0].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^['"](.*)['"]$/g,"$1");result[attr[0]]=attr[1]}return result};var ParseStream=function(_Stream){_inheritsLoose(ParseStream,_Stream);function ParseStream(){var _this;_this=_Stream.call(this)||this;_this.customParsers=[];_this.tagMappers=[];return _this}var _proto=ParseStream.prototype;_proto.push=function push(line){var _this2=this;var match;var event;line=line.trim();if(line.length===0){return}if(line[0]!=="#"){this.trigger("data",{type:"uri",uri:line});return}var newLines=this.tagMappers.reduce(function(acc,mapper){var mappedLine=mapper(line);if(mappedLine===line){return acc}return acc.concat([mappedLine])},[line]);newLines.forEach(function(newLine){for(var i=0;i<_this2.customParsers.length;i++){if(_this2.customParsers[i].call(_this2,newLine)){return}}if(newLine.indexOf("#EXT")!==0){_this2.trigger("data",{type:"comment",text:newLine.slice(1)});return}newLine=newLine.replace("\r","");match=/^#EXTM3U/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"m3u"});return}match=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"inf"};if(match[1]){event.duration=parseFloat(match[1])}if(match[2]){event.title=match[2]}_this2.trigger("data",event);return}match=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"targetduration"};if(match[1]){event.duration=parseInt(match[1],10)}_this2.trigger("data",event);return}match=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"totalduration"};if(match[1]){event.duration=parseInt(match[1],10)}_this2.trigger("data",event);return}match=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"version"};if(match[1]){event.version=parseInt(match[1],10)}_this2.trigger("data",event);return}match=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"media-sequence"};if(match[1]){event.number=parseInt(match[1],10)}_this2.trigger("data",event);return}match=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"discontinuity-sequence"};if(match[1]){event.number=parseInt(match[1],10)}_this2.trigger("data",event);return}match=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"playlist-type"};if(match[1]){event.playlistType=match[1]}_this2.trigger("data",event);return}match=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"byterange"};if(match[1]){event.length=parseInt(match[1],10)}if(match[2]){event.offset=parseInt(match[2],10)}_this2.trigger("data",event);return}match=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);if(match){event={type:"tag",tagType:"allow-cache"};if(match[1]){event.allowed=!/NO/.test(match[1])}_this2.trigger("data",event);return}match=/^#EXT-X-MAP:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"map"};if(match[1]){var attributes=parseAttributes(match[1]);if(attributes.URI){event.uri=attributes.URI}if(attributes.BYTERANGE){var _attributes$BYTERANGE=attributes.BYTERANGE.split("@"),length=_attributes$BYTERANGE[0],offset=_attributes$BYTERANGE[1];event.byterange={};if(length){event.byterange.length=parseInt(length,10)}if(offset){event.byterange.offset=parseInt(offset,10)}}}_this2.trigger("data",event);return}match=/^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"stream-inf"};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.RESOLUTION){var split=event.attributes.RESOLUTION.split("x");var resolution={};if(split[0]){resolution.width=parseInt(split[0],10)}if(split[1]){resolution.height=parseInt(split[1],10)}event.attributes.RESOLUTION=resolution}if(event.attributes.BANDWIDTH){event.attributes.BANDWIDTH=parseInt(event.attributes.BANDWIDTH,10)}if(event.attributes["PROGRAM-ID"]){event.attributes["PROGRAM-ID"]=parseInt(event.attributes["PROGRAM-ID"],10)}}_this2.trigger("data",event);return}match=/^#EXT-X-MEDIA:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"media"};if(match[1]){event.attributes=parseAttributes(match[1])}_this2.trigger("data",event);return}match=/^#EXT-X-ENDLIST/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"endlist"});return}match=/^#EXT-X-DISCONTINUITY/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"discontinuity"});return}match=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"program-date-time"};if(match[1]){event.dateTimeString=match[1];event.dateTimeObject=new Date(match[1])}_this2.trigger("data",event);return}match=/^#EXT-X-KEY:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"key"};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.IV){if(event.attributes.IV.substring(0,2).toLowerCase()==="0x"){event.attributes.IV=event.attributes.IV.substring(2)}event.attributes.IV=event.attributes.IV.match(/.{8}/g);event.attributes.IV[0]=parseInt(event.attributes.IV[0],16);event.attributes.IV[1]=parseInt(event.attributes.IV[1],16);event.attributes.IV[2]=parseInt(event.attributes.IV[2],16);event.attributes.IV[3]=parseInt(event.attributes.IV[3],16);event.attributes.IV=new Uint32Array(event.attributes.IV)}}_this2.trigger("data",event);return}match=/^#EXT-X-START:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"start"};if(match[1]){event.attributes=parseAttributes(match[1]);event.attributes["TIME-OFFSET"]=parseFloat(event.attributes["TIME-OFFSET"]);event.attributes.PRECISE=/YES/.test(event.attributes.PRECISE)}_this2.trigger("data",event);return}match=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"cue-out-cont"};if(match[1]){event.data=match[1]}else{event.data=""}_this2.trigger("data",event);return}match=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"cue-out"};if(match[1]){event.data=match[1]}else{event.data=""}_this2.trigger("data",event);return}match=/^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"cue-in"};if(match[1]){event.data=match[1]}else{event.data=""}_this2.trigger("data",event);return}_this2.trigger("data",{type:"tag",data:newLine.slice(4)})})};_proto.addParser=function addParser(_ref){var _this3=this;var expression=_ref.expression,customType=_ref.customType,dataParser=_ref.dataParser,segment=_ref.segment;if(typeof dataParser!=="function"){dataParser=function dataParser(line){return line}}this.customParsers.push(function(line){var match=expression.exec(line);if(match){_this3.trigger("data",{type:"custom",data:dataParser(line),customType:customType,segment:segment});return true}})};_proto.addTagMapper=function addTagMapper(_ref2){var expression=_ref2.expression,map=_ref2.map;var mapFn=function mapFn(line){if(expression.test(line)){return map(line)}return line};this.tagMappers.push(mapFn)};return ParseStream}(Stream);var Parser=function(_Stream){_inheritsLoose(Parser,_Stream);function Parser(){var _this;_this=_Stream.call(this)||this;_this.lineStream=new LineStream;_this.parseStream=new ParseStream;_this.lineStream.pipe(_this.parseStream);var self=_assertThisInitialized(_assertThisInitialized(_this));var uris=[];var currentUri={};var currentMap;var _key;var noop=function noop(){};var defaultMediaGroups={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var currentTimeline=0;_this.manifest={allowCache:true,discontinuityStarts:[],segments:[]};_this.parseStream.on("data",function(entry){var mediaGroup;var rendition;({tag:function tag(){(({"allow-cache":function allowCache(){this.manifest.allowCache=entry.allowed;if(!("allowed"in entry)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function byterange(){var byterange={};if("length"in entry){currentUri.byterange=byterange;byterange.length=entry.length;if(!("offset"in entry)){this.trigger("info",{message:"defaulting offset to zero"});entry.offset=0}}if("offset"in entry){currentUri.byterange=byterange;byterange.offset=entry.offset}},endlist:function endlist(){this.manifest.endList=true},inf:function inf(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(entry.duration>0){currentUri.duration=entry.duration}if(entry.duration===0){currentUri.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=uris},key:function key(){if(!entry.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(entry.attributes.METHOD==="NONE"){_key=null;return}if(!entry.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(!entry.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}_key={method:entry.attributes.METHOD||"AES-128",uri:entry.attributes.URI};if(typeof entry.attributes.IV!=="undefined"){_key.iv=entry.attributes.IV}},"media-sequence":function mediaSequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+entry.number});return}this.manifest.mediaSequence=entry.number},"discontinuity-sequence":function discontinuitySequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+entry.number});return}this.manifest.discontinuitySequence=entry.number;currentTimeline=entry.number},"playlist-type":function playlistType(){if(!/VOD|EVENT/.test(entry.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+entry.playlist});return}this.manifest.playlistType=entry.playlistType},map:function map(){currentMap={};if(entry.uri){currentMap.uri=entry.uri}if(entry.byterange){currentMap.byterange=entry.byterange}},"stream-inf":function streamInf(){this.manifest.playlists=uris;this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!entry.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!currentUri.attributes){currentUri.attributes={}}_extends(currentUri.attributes,entry.attributes)},media:function media(){this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!(entry.attributes&&entry.attributes.TYPE&&entry.attributes["GROUP-ID"]&&entry.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var mediaGroupType=this.manifest.mediaGroups[entry.attributes.TYPE];mediaGroupType[entry.attributes["GROUP-ID"]]=mediaGroupType[entry.attributes["GROUP-ID"]]||{};mediaGroup=mediaGroupType[entry.attributes["GROUP-ID"]];rendition={"default":/yes/i.test(entry.attributes.DEFAULT)};if(rendition.default){rendition.autoselect=true}else{rendition.autoselect=/yes/i.test(entry.attributes.AUTOSELECT)}if(entry.attributes.LANGUAGE){rendition.language=entry.attributes.LANGUAGE}if(entry.attributes.URI){rendition.uri=entry.attributes.URI}if(entry.attributes["INSTREAM-ID"]){rendition.instreamId=entry.attributes["INSTREAM-ID"]}if(entry.attributes.CHARACTERISTICS){rendition.characteristics=entry.attributes.CHARACTERISTICS}if(entry.attributes.FORCED){rendition.forced=/yes/i.test(entry.attributes.FORCED)}mediaGroup[entry.attributes.NAME]=rendition},discontinuity:function discontinuity(){currentTimeline+=1;currentUri.discontinuity=true;this.manifest.discontinuityStarts.push(uris.length)},"program-date-time":function programDateTime(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=entry.dateTimeString;this.manifest.dateTimeObject=entry.dateTimeObject}currentUri.dateTimeString=entry.dateTimeString;currentUri.dateTimeObject=entry.dateTimeObject},targetduration:function targetduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+entry.duration});return}this.manifest.targetDuration=entry.duration},totalduration:function totalduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+entry.duration});return}this.manifest.totalDuration=entry.duration},start:function start(){if(!entry.attributes||isNaN(entry.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:entry.attributes["TIME-OFFSET"],precise:entry.attributes.PRECISE}},"cue-out":function cueOut(){currentUri.cueOut=entry.data},"cue-out-cont":function cueOutCont(){currentUri.cueOutCont=entry.data},"cue-in":function cueIn(){currentUri.cueIn=entry.data}})[entry.tagType]||noop).call(self)},uri:function uri(){currentUri.uri=entry.uri;uris.push(currentUri);if(this.manifest.targetDuration&&!("duration"in currentUri)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});currentUri.duration=this.manifest.targetDuration}if(_key){currentUri.key=_key}currentUri.timeline=currentTimeline;if(currentMap){currentUri.map=currentMap}currentUri={}},comment:function comment(){},custom:function custom(){if(entry.segment){currentUri.custom=currentUri.custom||{};currentUri.custom[entry.customType]=entry.data}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[entry.customType]=entry.data}}})[entry.type].call(self)});return _this}var _proto=Parser.prototype;_proto.push=function push(chunk){this.lineStream.push(chunk)};_proto.end=function end(){this.lineStream.push("\n")};_proto.addParser=function addParser(options){this.parseStream.addParser(options)};_proto.addTagMapper=function addTagMapper(options){this.parseStream.addTagMapper(options)};return Parser}(Stream);var isObject=function isObject(obj){return!!obj&&(typeof obj==="undefined"?"undefined":_typeof2(obj))==="object"};var merge=function merge(){for(var _len=arguments.length,objects=new Array(_len),_key=0;_key<_len;_key++){objects[_key]=arguments[_key]}return objects.reduce(function(result,source){Object.keys(source).forEach(function(key){if(Array.isArray(result[key])&&Array.isArray(source[key])){result[key]=result[key].concat(source[key])}else if(isObject(result[key])&&isObject(source[key])){result[key]=merge(result[key],source[key])}else{result[key]=source[key]}});return result},{})};var values=function values(o){return Object.keys(o).map(function(k){return o[k]})};var range=function range(start,end){var result=[];for(var i=start;i<end;i++){result.push(i)}return result};var flatten=function flatten(lists){return lists.reduce(function(x,y){return x.concat(y)},[])};var from=function from(list){if(!list.length){return[]}var result=[];for(var i=0;i<list.length;i++){result.push(list[i])}return result};var findIndexes=function findIndexes(l,key){return l.reduce(function(a,e,i){if(e[key]){a.push(i)}return a},[])};var mergeDiscontiguousPlaylists=function mergeDiscontiguousPlaylists(playlists){var mergedPlaylists=values(playlists.reduce(function(acc,playlist){var name=playlist.attributes.id+(playlist.attributes.lang||"");if(acc[name]){var _acc$name$segments;playlist.segments[0].discontinuity=true;(_acc$name$segments=acc[name].segments).push.apply(_acc$name$segments,playlist.segments);if(playlist.attributes.contentProtection){acc[name].attributes.contentProtection=playlist.attributes.contentProtection}}else{acc[name]=playlist}return acc},{}));return mergedPlaylists.map(function(playlist){playlist.discontinuityStarts=findIndexes(playlist.segments,"discontinuity");return playlist})};var formatAudioPlaylist=function formatAudioPlaylist(_ref){var _attributes;var attributes=_ref.attributes,segments=_ref.segments;var playlist={attributes:(_attributes={NAME:attributes.id,BANDWIDTH:attributes.bandwidth,CODECS:attributes.codecs},_attributes["PROGRAM-ID"]=1,_attributes),uri:"",endList:(attributes.type||"static")==="static",timeline:attributes.periodIndex,resolvedUri:"",targetDuration:attributes.duration,segments:segments,mediaSequence:segments.length?segments[0].number:1};if(attributes.contentProtection){playlist.contentProtection=attributes.contentProtection}return playlist};var formatVttPlaylist=function formatVttPlaylist(_ref2){var _attributes2;var attributes=_ref2.attributes,segments=_ref2.segments;if(typeof segments==="undefined"){segments=[{uri:attributes.baseUrl,timeline:attributes.periodIndex,resolvedUri:attributes.baseUrl||"",duration:attributes.sourceDuration,number:0}];attributes.duration=attributes.sourceDuration}return{attributes:(_attributes2={NAME:attributes.id,BANDWIDTH:attributes.bandwidth},_attributes2["PROGRAM-ID"]=1,_attributes2),uri:"",endList:(attributes.type||"static")==="static",timeline:attributes.periodIndex,resolvedUri:attributes.baseUrl||"",targetDuration:attributes.duration,segments:segments,mediaSequence:segments.length?segments[0].number:1}};var organizeAudioPlaylists=function organizeAudioPlaylists(playlists){return playlists.reduce(function(a,playlist){var role=playlist.attributes.role&&playlist.attributes.role.value||"main";var language=playlist.attributes.lang||"";var label="main";if(language){label=playlist.attributes.lang+" ("+role+")"}if(a[label]&&a[label].playlists[0].attributes.BANDWIDTH>playlist.attributes.bandwidth){return a}a[label]={language:language,autoselect:true,"default":role==="main",playlists:[formatAudioPlaylist(playlist)],uri:""};return a},{})};var organizeVttPlaylists=function organizeVttPlaylists(playlists){return playlists.reduce(function(a,playlist){var label=playlist.attributes.lang||"text";if(a[label]){return a}a[label]={language:label,"default":false,autoselect:false,playlists:[formatVttPlaylist(playlist)],uri:""};return a},{})};var formatVideoPlaylist=function formatVideoPlaylist(_ref3){var _attributes3;var attributes=_ref3.attributes,segments=_ref3.segments;var playlist={attributes:(_attributes3={NAME:attributes.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:attributes.width,height:attributes.height},CODECS:attributes.codecs,BANDWIDTH:attributes.bandwidth},_attributes3["PROGRAM-ID"]=1,_attributes3),uri:"",endList:(attributes.type||"static")==="static",timeline:attributes.periodIndex,resolvedUri:"",targetDuration:attributes.duration,segments:segments,mediaSequence:segments.length?segments[0].number:1};if(attributes.contentProtection){playlist.contentProtection=attributes.contentProtection}return playlist};var toM3u8=function toM3u8(dashPlaylists){var _mediaGroups;if(!dashPlaylists.length){return{}}var _dashPlaylists$0$attr=dashPlaylists[0].attributes,duration=_dashPlaylists$0$attr.sourceDuration,_dashPlaylists$0$attr2=_dashPlaylists$0$attr.minimumUpdatePeriod,minimumUpdatePeriod=_dashPlaylists$0$attr2===void 0?0:_dashPlaylists$0$attr2;var videoOnly=function videoOnly(_ref4){var attributes=_ref4.attributes;return attributes.mimeType==="video/mp4"||attributes.contentType==="video"};var audioOnly=function audioOnly(_ref5){var attributes=_ref5.attributes;return attributes.mimeType==="audio/mp4"||attributes.contentType==="audio"};var vttOnly=function vttOnly(_ref6){var attributes=_ref6.attributes;return attributes.mimeType==="text/vtt"||attributes.contentType==="text"};var videoPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist);var audioPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly));var vttPlaylists=dashPlaylists.filter(vttOnly);var master={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(_mediaGroups={AUDIO:{},VIDEO:{}},_mediaGroups["CLOSED-CAPTIONS"]={},_mediaGroups.SUBTITLES={},_mediaGroups),uri:"",duration:duration,playlists:videoPlaylists,minimumUpdatePeriod:minimumUpdatePeriod*1e3};if(audioPlaylists.length){master.mediaGroups.AUDIO.audio=organizeAudioPlaylists(audioPlaylists)}if(vttPlaylists.length){master.mediaGroups.SUBTITLES.subs=organizeVttPlaylists(vttPlaylists)}return master};var commonjsGlobal$1$1=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule$1$1(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var urlToolkit$1=createCommonjsModule$1$1(function(module,exports){(function(root){var URL_REGEX=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var FIRST_SEGMENT_REGEX=/^([^\/?#]*)(.*)$/;var SLASH_DOT_REGEX=/(?:\/|^)\.(?=\/)/g;var SLASH_DOT_DOT_REGEX=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var URLToolkit={buildAbsoluteURL:function buildAbsoluteURL(baseURL,relativeURL,opts){opts=opts||{};baseURL=baseURL.trim();relativeURL=relativeURL.trim();if(!relativeURL){if(!opts.alwaysNormalize){return baseURL}var basePartsForNormalise=URLToolkit.parseURL(baseURL);if(!basePartsForNormalise){throw new Error("Error trying to parse base URL.")}basePartsForNormalise.path=URLToolkit.normalizePath(basePartsForNormalise.path);return URLToolkit.buildURLFromParts(basePartsForNormalise)}var relativeParts=URLToolkit.parseURL(relativeURL);if(!relativeParts){throw new Error("Error trying to parse relative URL.")}if(relativeParts.scheme){if(!opts.alwaysNormalize){return relativeURL}relativeParts.path=URLToolkit.normalizePath(relativeParts.path);return URLToolkit.buildURLFromParts(relativeParts)}var baseParts=URLToolkit.parseURL(baseURL);if(!baseParts){throw new Error("Error trying to parse base URL.")}if(!baseParts.netLoc&&baseParts.path&&baseParts.path[0]!=="/"){var pathParts=FIRST_SEGMENT_REGEX.exec(baseParts.path);baseParts.netLoc=pathParts[1];baseParts.path=pathParts[2]}if(baseParts.netLoc&&!baseParts.path){baseParts.path="/"}var builtParts={scheme:baseParts.scheme,netLoc:relativeParts.netLoc,path:null,params:relativeParts.params,query:relativeParts.query,fragment:relativeParts.fragment};if(!relativeParts.netLoc){builtParts.netLoc=baseParts.netLoc;if(relativeParts.path[0]!=="/"){if(!relativeParts.path){builtParts.path=baseParts.path;if(!relativeParts.params){builtParts.params=baseParts.params;if(!relativeParts.query){builtParts.query=baseParts.query}}}else{var baseURLPath=baseParts.path;var newPath=baseURLPath.substring(0,baseURLPath.lastIndexOf("/")+1)+relativeParts.path;builtParts.path=URLToolkit.normalizePath(newPath)}}}if(builtParts.path===null){builtParts.path=opts.alwaysNormalize?URLToolkit.normalizePath(relativeParts.path):relativeParts.path}return URLToolkit.buildURLFromParts(builtParts)},parseURL:function parseURL(url){var parts=URL_REGEX.exec(url);if(!parts){return null}return{scheme:parts[1]||"",netLoc:parts[2]||"",path:parts[3]||"",params:parts[4]||"",query:parts[5]||"",fragment:parts[6]||""}},normalizePath:function normalizePath(path){path=path.split("").reverse().join("").replace(SLASH_DOT_REGEX,"");while(path.length!==(path=path.replace(SLASH_DOT_DOT_REGEX,"")).length){}return path.split("").reverse().join("")},buildURLFromParts:function buildURLFromParts(parts){return parts.scheme+parts.netLoc+parts.path+parts.params+parts.query+parts.fragment}};module.exports=URLToolkit})(commonjsGlobal$1$1)});var resolveUrl=function resolveUrl(baseUrl,relativeUrl){if(/^[a-z]+:/i.test(relativeUrl)){return relativeUrl}if(!/\/\//i.test(baseUrl)){baseUrl=urlToolkit$1.buildAbsoluteURL(window_1.location.href,baseUrl)}return urlToolkit$1.buildAbsoluteURL(baseUrl,relativeUrl)};var urlTypeToSegment=function urlTypeToSegment(_ref){var _ref$baseUrl=_ref.baseUrl,baseUrl=_ref$baseUrl===void 0?"":_ref$baseUrl,_ref$source=_ref.source,source=_ref$source===void 0?"":_ref$source,_ref$range=_ref.range,range=_ref$range===void 0?"":_ref$range;var init={uri:source,resolvedUri:resolveUrl(baseUrl||"",source)};if(range){var ranges=range.split("-");var startRange=parseInt(ranges[0],10);var endRange=parseInt(ranges[1],10);init.byterange={length:endRange-startRange,offset:startRange}}return init};var getLiveRValue=function getLiveRValue(attributes,time,duration){var NOW=attributes.NOW,clientOffset=attributes.clientOffset,availabilityStartTime=attributes.availabilityStartTime,_attributes$timescale=attributes.timescale,timescale=_attributes$timescale===void 0?1:_attributes$timescale,_attributes$start=attributes.start,start=_attributes$start===void 0?0:_attributes$start,_attributes$minimumUp=attributes.minimumUpdatePeriod,minimumUpdatePeriod=_attributes$minimumUp===void 0?0:_attributes$minimumUp;var now=(NOW+clientOffset)/1e3;var periodStartWC=availabilityStartTime+start;var periodEndWC=now+minimumUpdatePeriod;var periodDuration=periodEndWC-periodStartWC;return Math.ceil((periodDuration*timescale-time)/duration)};var parseByTimeline=function parseByTimeline(attributes,segmentTimeline){var _attributes$type=attributes.type,type=_attributes$type===void 0?"static":_attributes$type,_attributes$minimumUp2=attributes.minimumUpdatePeriod,minimumUpdatePeriod=_attributes$minimumUp2===void 0?0:_attributes$minimumUp2,_attributes$media=attributes.media,media=_attributes$media===void 0?"":_attributes$media,sourceDuration=attributes.sourceDuration,_attributes$timescale2=attributes.timescale,timescale=_attributes$timescale2===void 0?1:_attributes$timescale2,_attributes$startNumb=attributes.startNumber,startNumber=_attributes$startNumb===void 0?1:_attributes$startNumb,timeline=attributes.periodIndex;var segments=[];var time=-1;for(var sIndex=0;sIndex<segmentTimeline.length;sIndex++){var S=segmentTimeline[sIndex];var duration=S.d;var repeat=S.r||0;var segmentTime=S.t||0;if(time<0){time=segmentTime}if(segmentTime&&segmentTime>time){time=segmentTime}var count=void 0;if(repeat<0){var nextS=sIndex+1;if(nextS===segmentTimeline.length){if(type==="dynamic"&&minimumUpdatePeriod>0&&media.indexOf("$Number$")>0){count=getLiveRValue(attributes,time,duration)}else{count=(sourceDuration*timescale-time)/duration}}else{count=(segmentTimeline[nextS].t-time)/duration}}else{count=repeat+1}var end=startNumber+segments.length+count;var number=startNumber+segments.length;while(number<end){segments.push({number:number,duration:duration/timescale,time:time,timeline:timeline});time+=duration;number++}}return segments};var segmentRange={"static":function _static(attributes){var duration=attributes.duration,_attributes$timescale=attributes.timescale,timescale=_attributes$timescale===void 0?1:_attributes$timescale,sourceDuration=attributes.sourceDuration;return{start:0,end:Math.ceil(sourceDuration/(duration/timescale))}},dynamic:function dynamic(attributes){var NOW=attributes.NOW,clientOffset=attributes.clientOffset,availabilityStartTime=attributes.availabilityStartTime,_attributes$timescale2=attributes.timescale,timescale=_attributes$timescale2===void 0?1:_attributes$timescale2,duration=attributes.duration,_attributes$start=attributes.start,start=_attributes$start===void 0?0:_attributes$start,_attributes$minimumUp=attributes.minimumUpdatePeriod,minimumUpdatePeriod=_attributes$minimumUp===void 0?0:_attributes$minimumUp,_attributes$timeShift=attributes.timeShiftBufferDepth,timeShiftBufferDepth=_attributes$timeShift===void 0?Infinity:_attributes$timeShift;var now=(NOW+clientOffset)/1e3;var periodStartWC=availabilityStartTime+start;var periodEndWC=now+minimumUpdatePeriod;var periodDuration=periodEndWC-periodStartWC;var segmentCount=Math.ceil(periodDuration*timescale/duration);var availableStart=Math.floor((now-periodStartWC-timeShiftBufferDepth)*timescale/duration);var availableEnd=Math.floor((now-periodStartWC)*timescale/duration);return{start:Math.max(0,availableStart),end:Math.min(segmentCount,availableEnd)}}};var toSegments=function toSegments(attributes){return function(number,index){var duration=attributes.duration,_attributes$timescale3=attributes.timescale,timescale=_attributes$timescale3===void 0?1:_attributes$timescale3,periodIndex=attributes.periodIndex,_attributes$startNumb=attributes.startNumber,startNumber=_attributes$startNumb===void 0?1:_attributes$startNumb;return{number:startNumber+number,duration:duration/timescale,timeline:periodIndex,time:index*duration}}};var parseByDuration=function parseByDuration(attributes){
var _attributes$type=attributes.type,type=_attributes$type===void 0?"static":_attributes$type,duration=attributes.duration,_attributes$timescale4=attributes.timescale,timescale=_attributes$timescale4===void 0?1:_attributes$timescale4,sourceDuration=attributes.sourceDuration;var _segmentRange$type=segmentRange[type](attributes),start=_segmentRange$type.start,end=_segmentRange$type.end;var segments=range(start,end).map(toSegments(attributes));if(type==="static"){var index=segments.length-1;segments[index].duration=sourceDuration-duration/timescale*index}return segments};var identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var identifierReplacement=function identifierReplacement(values){return function(match,identifier,format,width){if(match==="$$"){return"$"}if(typeof values[identifier]==="undefined"){return match}var value=""+values[identifier];if(identifier==="RepresentationID"){return value}if(!format){width=1}else{width=parseInt(width,10)}if(value.length>=width){return value}return""+new Array(width-value.length+1).join("0")+value}};var constructTemplateUrl=function constructTemplateUrl(url,values){return url.replace(identifierPattern,identifierReplacement(values))};var parseTemplateInfo=function parseTemplateInfo(attributes,segmentTimeline){if(!attributes.duration&&!segmentTimeline){return[{number:attributes.startNumber||1,duration:attributes.sourceDuration,time:0,timeline:attributes.periodIndex}]}if(attributes.duration){return parseByDuration(attributes)}return parseByTimeline(attributes,segmentTimeline)};var segmentsFromTemplate=function segmentsFromTemplate(attributes,segmentTimeline){var templateValues={RepresentationID:attributes.id,Bandwidth:attributes.bandwidth||0};var _attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{sourceURL:"",range:""}:_attributes$initializ;var mapSegment=urlTypeToSegment({baseUrl:attributes.baseUrl,source:constructTemplateUrl(initialization.sourceURL,templateValues),range:initialization.range});var segments=parseTemplateInfo(attributes,segmentTimeline);return segments.map(function(segment){templateValues.Number=segment.number;templateValues.Time=segment.time;var uri=constructTemplateUrl(attributes.media||"",templateValues);return{uri:uri,timeline:segment.timeline,duration:segment.duration,resolvedUri:resolveUrl(attributes.baseUrl||"",uri),map:mapSegment,number:segment.number}})};var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var SegmentURLToSegmentObject=function SegmentURLToSegmentObject(attributes,segmentUrl){var baseUrl=attributes.baseUrl,_attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{}:_attributes$initializ;var initSegment=urlTypeToSegment({baseUrl:baseUrl,source:initialization.sourceURL,range:initialization.range});var segment=urlTypeToSegment({baseUrl:baseUrl,source:segmentUrl.media,range:segmentUrl.mediaRange});segment.map=initSegment;return segment};var segmentsFromList=function segmentsFromList(attributes,segmentTimeline){var duration=attributes.duration,_attributes$segmentUr=attributes.segmentUrls,segmentUrls=_attributes$segmentUr===void 0?[]:_attributes$segmentUr;if(!duration&&!segmentTimeline||duration&&segmentTimeline){throw new Error(errors.SEGMENT_TIME_UNSPECIFIED)}var segmentUrlMap=segmentUrls.map(function(segmentUrlObject){return SegmentURLToSegmentObject(attributes,segmentUrlObject)});var segmentTimeInfo;if(duration){segmentTimeInfo=parseByDuration(attributes)}if(segmentTimeline){segmentTimeInfo=parseByTimeline(attributes,segmentTimeline)}var segments=segmentTimeInfo.map(function(segmentTime,index){if(segmentUrlMap[index]){var segment=segmentUrlMap[index];segment.timeline=segmentTime.timeline;segment.duration=segmentTime.duration;segment.number=segmentTime.number;return segment}}).filter(function(segment){return segment});return segments};var segmentsFromBase=function segmentsFromBase(attributes){var baseUrl=attributes.baseUrl,_attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{}:_attributes$initializ,sourceDuration=attributes.sourceDuration,_attributes$timescale=attributes.timescale,timescale=_attributes$timescale===void 0?1:_attributes$timescale,_attributes$indexRang=attributes.indexRange,indexRange=_attributes$indexRang===void 0?"":_attributes$indexRang,duration=attributes.duration;if(!baseUrl){throw new Error(errors.NO_BASE_URL)}var initSegment=urlTypeToSegment({baseUrl:baseUrl,source:initialization.sourceURL,range:initialization.range});var segment=urlTypeToSegment({baseUrl:baseUrl,source:baseUrl,range:indexRange});segment.map=initSegment;if(duration){var segmentTimeInfo=parseByDuration(attributes);if(segmentTimeInfo.length){segment.duration=segmentTimeInfo[0].duration;segment.timeline=segmentTimeInfo[0].timeline}}else if(sourceDuration){segment.duration=sourceDuration/timescale;segment.timeline=0}segment.number=0;return[segment]};var generateSegments=function generateSegments(_ref){var attributes=_ref.attributes,segmentInfo=_ref.segmentInfo;var segmentAttributes;var segmentsFn;if(segmentInfo.template){segmentsFn=segmentsFromTemplate;segmentAttributes=merge(attributes,segmentInfo.template)}else if(segmentInfo.base){segmentsFn=segmentsFromBase;segmentAttributes=merge(attributes,segmentInfo.base)}else if(segmentInfo.list){segmentsFn=segmentsFromList;segmentAttributes=merge(attributes,segmentInfo.list)}if(!segmentsFn){return{attributes:attributes}}var segments=segmentsFn(segmentAttributes,segmentInfo.timeline);if(segmentAttributes.duration){var _segmentAttributes=segmentAttributes,duration=_segmentAttributes.duration,_segmentAttributes$ti=_segmentAttributes.timescale,timescale=_segmentAttributes$ti===void 0?1:_segmentAttributes$ti;segmentAttributes.duration=duration/timescale}else if(segments.length){segmentAttributes.duration=segments.reduce(function(max,segment){return Math.max(max,Math.ceil(segment.duration))},0)}else{segmentAttributes.duration=0}return{attributes:segmentAttributes,segments:segments}};var toPlaylists=function toPlaylists(representations){return representations.map(generateSegments)};var findChildren=function findChildren(element,name){return from(element.childNodes).filter(function(_ref){var tagName=_ref.tagName;return tagName===name})};var getContent=function getContent(element){return element.textContent.trim()};var parseDuration=function parseDuration(str){var SECONDS_IN_YEAR=365*24*60*60;var SECONDS_IN_MONTH=30*24*60*60;var SECONDS_IN_DAY=24*60*60;var SECONDS_IN_HOUR=60*60;var SECONDS_IN_MIN=60;var durationRegex=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var match=durationRegex.exec(str);if(!match){return 0}var _match$slice=match.slice(1),year=_match$slice[0],month=_match$slice[1],day=_match$slice[2],hour=_match$slice[3],minute=_match$slice[4],second=_match$slice[5];return parseFloat(year||0)*SECONDS_IN_YEAR+parseFloat(month||0)*SECONDS_IN_MONTH+parseFloat(day||0)*SECONDS_IN_DAY+parseFloat(hour||0)*SECONDS_IN_HOUR+parseFloat(minute||0)*SECONDS_IN_MIN+parseFloat(second||0)};var parseDate=function parseDate(str){var dateRegex=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(dateRegex.test(str)){str+="Z"}return Date.parse(str)};var parsers={mediaPresentationDuration:function mediaPresentationDuration(value){return parseDuration(value)},availabilityStartTime:function availabilityStartTime(value){return parseDate(value)/1e3},minimumUpdatePeriod:function minimumUpdatePeriod(value){return parseDuration(value)},timeShiftBufferDepth:function timeShiftBufferDepth(value){return parseDuration(value)},start:function start(value){return parseDuration(value)},width:function width(value){return parseInt(value,10)},height:function height(value){return parseInt(value,10)},bandwidth:function bandwidth(value){return parseInt(value,10)},startNumber:function startNumber(value){return parseInt(value,10)},timescale:function timescale(value){return parseInt(value,10)},duration:function duration(value){var parsedValue=parseInt(value,10);if(isNaN(parsedValue)){return parseDuration(value)}return parsedValue},d:function d(value){return parseInt(value,10)},t:function t(value){return parseInt(value,10)},r:function r(value){return parseInt(value,10)},DEFAULT:function DEFAULT(value){return value}};var parseAttributes$1=function parseAttributes(el){if(!(el&&el.attributes)){return{}}return from(el.attributes).reduce(function(a,e){var parseFn=parsers[e.name]||parsers.DEFAULT;a[e.name]=parseFn(e.value);return a},{})};function decodeB64ToUint8Array(b64Text){var decodedString=window_1.atob(b64Text);var array=new Uint8Array(decodedString.length);for(var i=0;i<decodedString.length;i++){array[i]=decodedString.charCodeAt(i)}return array}var keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var buildBaseUrls=function buildBaseUrls(referenceUrls,baseUrlElements){if(!baseUrlElements.length){return referenceUrls}return flatten(referenceUrls.map(function(reference){return baseUrlElements.map(function(baseUrlElement){return resolveUrl(reference,getContent(baseUrlElement))})}))};var getSegmentInformation=function getSegmentInformation(adaptationSet){var segmentTemplate=findChildren(adaptationSet,"SegmentTemplate")[0];var segmentList=findChildren(adaptationSet,"SegmentList")[0];var segmentUrls=segmentList&&findChildren(segmentList,"SegmentURL").map(function(s){return merge({tag:"SegmentURL"},parseAttributes$1(s))});var segmentBase=findChildren(adaptationSet,"SegmentBase")[0];var segmentTimelineParentNode=segmentList||segmentTemplate;var segmentTimeline=segmentTimelineParentNode&&findChildren(segmentTimelineParentNode,"SegmentTimeline")[0];var segmentInitializationParentNode=segmentList||segmentBase||segmentTemplate;var segmentInitialization=segmentInitializationParentNode&&findChildren(segmentInitializationParentNode,"Initialization")[0];var template=segmentTemplate&&parseAttributes$1(segmentTemplate);if(template&&segmentInitialization){template.initialization=segmentInitialization&&parseAttributes$1(segmentInitialization)}else if(template&&template.initialization){template.initialization={sourceURL:template.initialization}}var segmentInfo={template:template,timeline:segmentTimeline&&findChildren(segmentTimeline,"S").map(function(s){return parseAttributes$1(s)}),list:segmentList&&merge(parseAttributes$1(segmentList),{segmentUrls:segmentUrls,initialization:parseAttributes$1(segmentInitialization)}),base:segmentBase&&merge(parseAttributes$1(segmentBase),{initialization:parseAttributes$1(segmentInitialization)})};Object.keys(segmentInfo).forEach(function(key){if(!segmentInfo[key]){delete segmentInfo[key]}});return segmentInfo};var inheritBaseUrls=function inheritBaseUrls(adaptationSetAttributes,adaptationSetBaseUrls,adaptationSetSegmentInfo){return function(representation){var repBaseUrlElements=findChildren(representation,"BaseURL");var repBaseUrls=buildBaseUrls(adaptationSetBaseUrls,repBaseUrlElements);var attributes=merge(adaptationSetAttributes,parseAttributes$1(representation));var representationSegmentInfo=getSegmentInformation(representation);return repBaseUrls.map(function(baseUrl){return{segmentInfo:merge(adaptationSetSegmentInfo,representationSegmentInfo),attributes:merge(attributes,{baseUrl:baseUrl})}})}};var generateKeySystemInformation=function generateKeySystemInformation(contentProtectionNodes){return contentProtectionNodes.reduce(function(acc,node){var attributes=parseAttributes$1(node);var keySystem=keySystemsMap[attributes.schemeIdUri];if(keySystem){acc[keySystem]={attributes:attributes};var psshNode=findChildren(node,"cenc:pssh")[0];if(psshNode){var pssh=getContent(psshNode);var psshBuffer=pssh&&decodeB64ToUint8Array(pssh);acc[keySystem].pssh=psshBuffer}}return acc},{})};var toRepresentations=function toRepresentations(periodAttributes,periodBaseUrls,periodSegmentInfo){return function(adaptationSet){var adaptationSetAttributes=parseAttributes$1(adaptationSet);var adaptationSetBaseUrls=buildBaseUrls(periodBaseUrls,findChildren(adaptationSet,"BaseURL"));var role=findChildren(adaptationSet,"Role")[0];var roleAttributes={role:parseAttributes$1(role)};var attrs=merge(periodAttributes,adaptationSetAttributes,roleAttributes);var contentProtection=generateKeySystemInformation(findChildren(adaptationSet,"ContentProtection"));if(Object.keys(contentProtection).length){attrs=merge(attrs,{contentProtection:contentProtection})}var segmentInfo=getSegmentInformation(adaptationSet);var representations=findChildren(adaptationSet,"Representation");var adaptationSetSegmentInfo=merge(periodSegmentInfo,segmentInfo);return flatten(representations.map(inheritBaseUrls(attrs,adaptationSetBaseUrls,adaptationSetSegmentInfo)))}};var toAdaptationSets=function toAdaptationSets(mpdAttributes,mpdBaseUrls){return function(period,index){var periodBaseUrls=buildBaseUrls(mpdBaseUrls,findChildren(period,"BaseURL"));var periodAtt=parseAttributes$1(period);var parsedPeriodId=parseInt(periodAtt.id,10);var periodIndex=window_1.isNaN(parsedPeriodId)?index:parsedPeriodId;var periodAttributes=merge(mpdAttributes,{periodIndex:periodIndex});var adaptationSets=findChildren(period,"AdaptationSet");var periodSegmentInfo=getSegmentInformation(period);return flatten(adaptationSets.map(toRepresentations(periodAttributes,periodBaseUrls,periodSegmentInfo)))}};var inheritAttributes=function inheritAttributes(mpd,options){if(options===void 0){options={}}var _options=options,_options$manifestUri=_options.manifestUri,manifestUri=_options$manifestUri===void 0?"":_options$manifestUri,_options$NOW=_options.NOW,NOW=_options$NOW===void 0?Date.now():_options$NOW,_options$clientOffset=_options.clientOffset,clientOffset=_options$clientOffset===void 0?0:_options$clientOffset;var periods=findChildren(mpd,"Period");if(!periods.length){throw new Error(errors.INVALID_NUMBER_OF_PERIOD)}var mpdAttributes=parseAttributes$1(mpd);var mpdBaseUrls=buildBaseUrls([manifestUri],findChildren(mpd,"BaseURL"));mpdAttributes.sourceDuration=mpdAttributes.mediaPresentationDuration||0;mpdAttributes.NOW=NOW;mpdAttributes.clientOffset=clientOffset;return flatten(periods.map(toAdaptationSets(mpdAttributes,mpdBaseUrls)))};var stringToMpdXml=function stringToMpdXml(manifestString){if(manifestString===""){throw new Error(errors.DASH_EMPTY_MANIFEST)}var parser=new window_1.DOMParser;var xml=parser.parseFromString(manifestString,"application/xml");var mpd=xml&&xml.documentElement.tagName==="MPD"?xml.documentElement:null;if(!mpd||mpd&&mpd.getElementsByTagName("parsererror").length>0){throw new Error(errors.DASH_INVALID_XML)}return mpd};var parseUTCTimingScheme=function parseUTCTimingScheme(mpd){var UTCTimingNode=findChildren(mpd,"UTCTiming")[0];if(!UTCTimingNode){return null}var attributes=parseAttributes$1(UTCTimingNode);switch(attributes.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":attributes.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":attributes.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":attributes.method="DIRECT";attributes.value=Date.parse(attributes.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME)}return attributes};var parse=function parse(manifestString,options){return toM3u8(toPlaylists(inheritAttributes(stringToMpdXml(manifestString),options)))};var parseUTCTiming=function parseUTCTiming(manifestString){return parseUTCTimingScheme(stringToMpdXml(manifestString))};var toUnsigned=function toUnsigned(value){return value>>>0};var bin={toUnsigned:toUnsigned};var toUnsigned$1=bin.toUnsigned;var _findBox3,parseType,timescale,startTime,getVideoTrackIds;_findBox3=function findBox(data,path){var results=[],i,size,type,end,subresults;if(!path.length){return null}for(i=0;i<data.byteLength;){size=toUnsigned$1(data[i]<<24|data[i+1]<<16|data[i+2]<<8|data[i+3]);type=parseType(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;if(type===path[0]){if(path.length===1){results.push(data.subarray(i+8,end))}else{subresults=_findBox3(data.subarray(i+8,end),path.slice(1));if(subresults.length){results=results.concat(subresults)}}}i=end}return results};parseType=function parseType(buffer){var result="";result+=String.fromCharCode(buffer[0]);result+=String.fromCharCode(buffer[1]);result+=String.fromCharCode(buffer[2]);result+=String.fromCharCode(buffer[3]);return result};timescale=function timescale(init){var result={},traks=_findBox3(init,["moov","trak"]);return traks.reduce(function(result,trak){var tkhd,version,index,id,mdhd;tkhd=_findBox3(trak,["tkhd"])[0];if(!tkhd){return null}version=tkhd[0];index=version===0?12:20;id=toUnsigned$1(tkhd[index]<<24|tkhd[index+1]<<16|tkhd[index+2]<<8|tkhd[index+3]);mdhd=_findBox3(trak,["mdia","mdhd"])[0];if(!mdhd){return null}version=mdhd[0];index=version===0?12:20;result[id]=toUnsigned$1(mdhd[index]<<24|mdhd[index+1]<<16|mdhd[index+2]<<8|mdhd[index+3]);return result},result)};startTime=function startTime(timescale,fragment){var trafs,baseTimes,result;trafs=_findBox3(fragment,["moof","traf"]);baseTimes=[].concat.apply([],trafs.map(function(traf){return _findBox3(traf,["tfhd"]).map(function(tfhd){var id,scale,baseTime;id=toUnsigned$1(tfhd[4]<<24|tfhd[5]<<16|tfhd[6]<<8|tfhd[7]);scale=timescale[id]||9e4;baseTime=_findBox3(traf,["tfdt"]).map(function(tfdt){var version,result;version=tfdt[0];result=toUnsigned$1(tfdt[4]<<24|tfdt[5]<<16|tfdt[6]<<8|tfdt[7]);if(version===1){result*=Math.pow(2,32);result+=toUnsigned$1(tfdt[8]<<24|tfdt[9]<<16|tfdt[10]<<8|tfdt[11])}return result})[0];baseTime=baseTime||Infinity;return baseTime/scale})}));result=Math.min.apply(null,baseTimes);return isFinite(result)?result:0};getVideoTrackIds=function getVideoTrackIds(init){var traks=_findBox3(init,["moov","trak"]);var videoTrackIds=[];traks.forEach(function(trak){var hdlrs=_findBox3(trak,["mdia","hdlr"]);var tkhds=_findBox3(trak,["tkhd"]);hdlrs.forEach(function(hdlr,index){var handlerType=parseType(hdlr.subarray(8,12));var tkhd=tkhds[index];var view;var version;var trackId;if(handlerType==="vide"){view=new DataView(tkhd.buffer,tkhd.byteOffset,tkhd.byteLength);version=view.getUint8(0);trackId=version===0?view.getUint32(12):view.getUint32(20);videoTrackIds.push(trackId)}})});return videoTrackIds};var probe={findBox:_findBox3,parseType:parseType,timescale:timescale,startTime:startTime,videoTrackIds:getVideoTrackIds};var UINT32_MAX=Math.pow(2,32)-1;var box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,traf,trex,trun,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;(function(){var i;types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(i in types){if(types.hasOwnProperty(i)){types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]}}MAJOR_BRAND=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);AVC1_BRAND=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);MINOR_VERSION=new Uint8Array([0,0,0,1]);VIDEO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);AUDIO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR};DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);SMHD=new Uint8Array([0,0,0,0,0,0,0,0]);STCO=new Uint8Array([0,0,0,0,0,0,0,0]);STSC=STCO;STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);STTS=STCO;VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();box=function box(type){var payload=[],size=0,i,result,view;for(i=1;i<arguments.length;i++){payload.push(arguments[i])}i=payload.length;while(i--){size+=payload[i].byteLength}result=new Uint8Array(size+8);view=new DataView(result.buffer,result.byteOffset,result.byteLength);view.setUint32(0,result.byteLength);result.set(type,4);for(i=0,size=8;i<payload.length;i++){result.set(payload[i],size);size+=payload[i].byteLength}return result};dinf=function dinf(){return box(types.dinf,box(types.dref,DREF))};esds=function esds(track){return box(types.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,track.audioobjecttype<<3|track.samplingfrequencyindex>>>1,track.samplingfrequencyindex<<7|track.channelcount<<3,6,1,2]))};ftyp=function ftyp(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND)};hdlr=function hdlr(type){return box(types.hdlr,HDLR_TYPES[type])};mdat=function mdat(data){return box(types.mdat,data)};mdhd=function mdhd(track){var result=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,track.duration>>>24&255,track.duration>>>16&255,track.duration>>>8&255,track.duration&255,85,196,0,0]);if(track.samplerate){result[12]=track.samplerate>>>24&255;result[13]=track.samplerate>>>16&255;result[14]=track.samplerate>>>8&255;result[15]=track.samplerate&255}return box(types.mdhd,result)};mdia=function mdia(track){return box(types.mdia,mdhd(track),hdlr(track.type),minf(track))};mfhd=function mfhd(sequenceNumber){return box(types.mfhd,new Uint8Array([0,0,0,0,(sequenceNumber&4278190080)>>24,(sequenceNumber&16711680)>>16,(sequenceNumber&65280)>>8,sequenceNumber&255]))};minf=function minf(track){return box(types.minf,track.type==="video"?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(track))};moof=function moof(sequenceNumber,tracks){var trackFragments=[],i=tracks.length;while(i--){trackFragments[i]=traf(tracks[i])}return box.apply(null,[types.moof,mfhd(sequenceNumber)].concat(trackFragments))};moov=function moov(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trak(tracks[i])}return box.apply(null,[types.moov,mvhd(4294967295)].concat(boxes).concat(mvex(tracks)))};mvex=function mvex(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trex(tracks[i])}return box.apply(null,[types.mvex].concat(boxes))};mvhd=function mvhd(duration){var bytes=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(duration&4278190080)>>24,(duration&16711680)>>16,(duration&65280)>>8,duration&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return box(types.mvhd,bytes)};sdtp=function sdtp(track){var samples=track.samples||[],bytes=new Uint8Array(4+samples.length),flags,i;for(i=0;i<samples.length;i++){flags=samples[i].flags;bytes[i+4]=flags.dependsOn<<4|flags.isDependedOn<<2|flags.hasRedundancy}return box(types.sdtp,bytes)};stbl=function stbl(track){return box(types.stbl,stsd(track),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO))};(function(){var videoSample,audioSample;stsd=function stsd(track){return box(types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),track.type==="video"?videoSample(track):audioSample(track))};videoSample=function videoSample(track){var sps=track.sps||[],pps=track.pps||[],sequenceParameterSets=[],pictureParameterSets=[],i;for(i=0;i<sps.length;i++){sequenceParameterSets.push((sps[i].byteLength&65280)>>>8);sequenceParameterSets.push(sps[i].byteLength&255);sequenceParameterSets=sequenceParameterSets.concat(Array.prototype.slice.call(sps[i]))}for(i=0;i<pps.length;i++){pictureParameterSets.push((pps[i].byteLength&65280)>>>8);pictureParameterSets.push(pps[i].byteLength&255);pictureParameterSets=pictureParameterSets.concat(Array.prototype.slice.call(pps[i]))}return box(types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(track.width&65280)>>8,track.width&255,(track.height&65280)>>8,track.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),box(types.avcC,new Uint8Array([1,track.profileIdc,track.profileCompatibility,track.levelIdc,255].concat([sps.length]).concat(sequenceParameterSets).concat([pps.length]).concat(pictureParameterSets))),box(types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};audioSample=function audioSample(track){return box(types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(track.channelcount&65280)>>8,track.channelcount&255,(track.samplesize&65280)>>8,track.samplesize&255,0,0,0,0,(track.samplerate&65280)>>8,track.samplerate&255,0,0]),esds(track))}})();tkhd=function tkhd(track){var result=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,0,(track.duration&4278190080)>>24,(track.duration&16711680)>>16,(track.duration&65280)>>8,track.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(track.width&65280)>>8,track.width&255,0,0,(track.height&65280)>>8,track.height&255,0,0]);return box(types.tkhd,result)};traf=function traf(track){var trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable,dataOffset,upperWordBaseMediaDecodeTime,lowerWordBaseMediaDecodeTime;trackFragmentHeader=box(types.tfhd,new Uint8Array([0,0,0,58,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));upperWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime/(UINT32_MAX+1));lowerWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime%(UINT32_MAX+1));trackFragmentDecodeTime=box(types.tfdt,new Uint8Array([1,0,0,0,upperWordBaseMediaDecodeTime>>>24&255,upperWordBaseMediaDecodeTime>>>16&255,upperWordBaseMediaDecodeTime>>>8&255,upperWordBaseMediaDecodeTime&255,lowerWordBaseMediaDecodeTime>>>24&255,lowerWordBaseMediaDecodeTime>>>16&255,lowerWordBaseMediaDecodeTime>>>8&255,lowerWordBaseMediaDecodeTime&255]));dataOffset=32+20+8+16+8+8;if(track.type==="audio"){trackFragmentRun=trun(track,dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun)}sampleDependencyTable=sdtp(track);trackFragmentRun=trun(track,sampleDependencyTable.length+dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable)};trak=function trak(track){track.duration=track.duration||4294967295;return box(types.trak,tkhd(track),mdia(track))};trex=function trex(track){var result=new Uint8Array([0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(track.type!=="video"){result[result.length-1]=0}return box(types.trex,result)};(function(){var audioTrun,videoTrun,trunHeader;trunHeader=function trunHeader(samples,offset){var durationPresent=0,sizePresent=0,flagsPresent=0,compositionTimeOffset=0;if(samples.length){if(samples[0].duration!==undefined){durationPresent=1}if(samples[0].size!==undefined){sizePresent=2}if(samples[0].flags!==undefined){flagsPresent=4}if(samples[0].compositionTimeOffset!==undefined){compositionTimeOffset=8}}return[0,0,durationPresent|sizePresent|flagsPresent|compositionTimeOffset,1,(samples.length&4278190080)>>>24,(samples.length&16711680)>>>16,(samples.length&65280)>>>8,samples.length&255,(offset&4278190080)>>>24,(offset&16711680)>>>16,(offset&65280)>>>8,offset&255]};videoTrun=function videoTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+16*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&4278190080)>>>24,(sample.duration&16711680)>>>16,(sample.duration&65280)>>>8,sample.duration&255,(sample.size&4278190080)>>>24,(sample.size&16711680)>>>16,(sample.size&65280)>>>8,sample.size&255,sample.flags.isLeading<<2|sample.flags.dependsOn,sample.flags.isDependedOn<<6|sample.flags.hasRedundancy<<4|sample.flags.paddingValue<<1|sample.flags.isNonSyncSample,sample.flags.degradationPriority&240<<8,sample.flags.degradationPriority&15,(sample.compositionTimeOffset&4278190080)>>>24,(sample.compositionTimeOffset&16711680)>>>16,(sample.compositionTimeOffset&65280)>>>8,sample.compositionTimeOffset&255])}return box(types.trun,new Uint8Array(bytes))};audioTrun=function audioTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+8*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&4278190080)>>>24,(sample.duration&16711680)>>>16,(sample.duration&65280)>>>8,sample.duration&255,(sample.size&4278190080)>>>24,(sample.size&16711680)>>>16,(sample.size&65280)>>>8,sample.size&255])}return box(types.trun,new Uint8Array(bytes))};trun=function trun(track,offset){if(track.type==="audio"){return audioTrun(track,offset)}return videoTrun(track,offset)}})();var mp4Generator={ftyp:ftyp,mdat:mdat,moof:moof,moov:moov,initSegment:function initSegment(tracks){var fileType=ftyp(),movie=moov(tracks),result;result=new Uint8Array(fileType.byteLength+movie.byteLength);result.set(fileType);result.set(movie,fileType.byteLength);return result}};var Stream$1=function Stream$1(){this.init=function(){var listeners={};this.on=function(type,listener){if(!listeners[type]){listeners[type]=[]}listeners[type]=listeners[type].concat(listener)};this.off=function(type,listener){var index;if(!listeners[type]){return false}index=listeners[type].indexOf(listener);listeners[type]=listeners[type].slice();listeners[type].splice(index,1);return index>-1};this.trigger=function(type){var callbacks,i,length,args;callbacks=listeners[type];if(!callbacks){return}if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{args=[];i=arguments.length;for(i=1;i<arguments.length;++i){args.push(arguments[i])}length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args)}}};this.dispose=function(){listeners={}}}};Stream$1.prototype.pipe=function(destination){this.on("data",function(data){destination.push(data)});this.on("done",function(flushSource){destination.flush(flushSource)});return destination};Stream$1.prototype.push=function(data){this.trigger("data",data)};Stream$1.prototype.flush=function(flushSource){this.trigger("done",flushSource)};var stream=Stream$1;var groupNalsIntoFrames=function groupNalsIntoFrames(nalUnits){var i,currentNal,currentFrame=[],frames=[];currentFrame.byteLength=0;for(i=0;i<nalUnits.length;i++){currentNal=nalUnits[i];if(currentNal.nalUnitType==="access_unit_delimiter_rbsp"){if(currentFrame.length){currentFrame.duration=currentNal.dts-currentFrame.dts;frames.push(currentFrame)}currentFrame=[currentNal];currentFrame.byteLength=currentNal.data.byteLength;currentFrame.pts=currentNal.pts;currentFrame.dts=currentNal.dts}else{if(currentNal.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){currentFrame.keyFrame=true}currentFrame.duration=currentNal.dts-currentFrame.dts;currentFrame.byteLength+=currentNal.data.byteLength;currentFrame.push(currentNal)}}if(frames.length&&(!currentFrame.duration||currentFrame.duration<=0)){currentFrame.duration=frames[frames.length-1].duration}frames.push(currentFrame);return frames};var groupFramesIntoGops=function groupFramesIntoGops(frames){
var i,currentFrame,currentGop=[],gops=[];currentGop.byteLength=0;currentGop.nalCount=0;currentGop.duration=0;currentGop.pts=frames[0].pts;currentGop.dts=frames[0].dts;gops.byteLength=0;gops.nalCount=0;gops.duration=0;gops.pts=frames[0].pts;gops.dts=frames[0].dts;for(i=0;i<frames.length;i++){currentFrame=frames[i];if(currentFrame.keyFrame){if(currentGop.length){gops.push(currentGop);gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration}currentGop=[currentFrame];currentGop.nalCount=currentFrame.length;currentGop.byteLength=currentFrame.byteLength;currentGop.pts=currentFrame.pts;currentGop.dts=currentFrame.dts;currentGop.duration=currentFrame.duration}else{currentGop.duration+=currentFrame.duration;currentGop.nalCount+=currentFrame.length;currentGop.byteLength+=currentFrame.byteLength;currentGop.push(currentFrame)}}if(gops.length&&currentGop.duration<=0){currentGop.duration=gops[gops.length-1].duration}gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;gops.push(currentGop);return gops};var extendFirstKeyFrame=function extendFirstKeyFrame(gops){var currentGop;if(!gops[0][0].keyFrame&&gops.length>1){currentGop=gops.shift();gops.byteLength-=currentGop.byteLength;gops.nalCount-=currentGop.nalCount;gops[0][0].dts=currentGop.dts;gops[0][0].pts=currentGop.pts;gops[0][0].duration+=currentGop.duration}return gops};var createDefaultSample=function createDefaultSample(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var sampleForFrame=function sampleForFrame(frame,dataOffset){var sample=createDefaultSample();sample.dataOffset=dataOffset;sample.compositionTimeOffset=frame.pts-frame.dts;sample.duration=frame.duration;sample.size=4*frame.length;sample.size+=frame.byteLength;if(frame.keyFrame){sample.flags.dependsOn=2;sample.flags.isNonSyncSample=0}return sample};var generateSampleTable=function generateSampleTable(gops,baseDataOffset){var h,i,sample,currentGop,currentFrame,dataOffset=baseDataOffset||0,samples=[];for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];sample=sampleForFrame(currentFrame,dataOffset);dataOffset+=sample.size;samples.push(sample)}}return samples};var concatenateNalData=function concatenateNalData(gops){var h,i,j,currentGop,currentFrame,currentNal,dataOffset=0,nalsByteLength=gops.byteLength,numberOfNals=gops.nalCount,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];for(j=0;j<currentFrame.length;j++){currentNal=currentFrame[j];view.setUint32(dataOffset,currentNal.data.byteLength);dataOffset+=4;data.set(currentNal.data,dataOffset);dataOffset+=currentNal.data.byteLength}}}return data};var frameUtils={groupNalsIntoFrames:groupNalsIntoFrames,groupFramesIntoGops:groupFramesIntoGops,extendFirstKeyFrame:extendFirstKeyFrame,generateSampleTable:generateSampleTable,concatenateNalData:concatenateNalData};var highPrefix=[33,16,5,32,164,27];var lowPrefix=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var zeroFill=function zeroFill(count){var a=[];while(count--){a.push(0)}return a};var makeTable=function makeTable(metaTable){return Object.keys(metaTable).reduce(function(obj,key){obj[key]=new Uint8Array(metaTable[key].reduce(function(arr,part){return arr.concat(part)},[]));return obj},{})};var coneOfSilence={96e3:[highPrefix,[227,64],zeroFill(154),[56]],88200:[highPrefix,[231],zeroFill(170),[56]],64e3:[highPrefix,[248,192],zeroFill(240),[56]],48e3:[highPrefix,[255,192],zeroFill(268),[55,148,128],zeroFill(54),[112]],44100:[highPrefix,[255,192],zeroFill(268),[55,163,128],zeroFill(84),[112]],32e3:[highPrefix,[255,192],zeroFill(268),[55,234],zeroFill(226),[112]],24e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,112],zeroFill(126),[224]],16e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,255],zeroFill(269),[223,108],zeroFill(195),[1,192]],12e3:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,253,128],zeroFill(259),[56]],11025:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,255,192],zeroFill(268),[55,175,128],zeroFill(108),[112]],8e3:[lowPrefix,zeroFill(268),[3,121,16],zeroFill(47),[7]]};var silence=makeTable(coneOfSilence);var ONE_SECOND_IN_TS=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs;secondsToVideoTs=function secondsToVideoTs(seconds){return seconds*ONE_SECOND_IN_TS};secondsToAudioTs=function secondsToAudioTs(seconds,sampleRate){return seconds*sampleRate};videoTsToSeconds=function videoTsToSeconds(timestamp){return timestamp/ONE_SECOND_IN_TS};audioTsToSeconds=function audioTsToSeconds(timestamp,sampleRate){return timestamp/sampleRate};audioTsToVideoTs=function audioTsToVideoTs(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate))};videoTsToAudioTs=function videoTsToAudioTs(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate)};var clock={secondsToVideoTs:secondsToVideoTs,secondsToAudioTs:secondsToAudioTs,videoTsToSeconds:videoTsToSeconds,audioTsToSeconds:audioTsToSeconds,audioTsToVideoTs:audioTsToVideoTs,videoTsToAudioTs:videoTsToAudioTs};var ONE_SECOND_IN_TS$1=9e4;var sumFrameByteLengths=function sumFrameByteLengths(array){var i,currentObj,sum=0;for(i=0;i<array.length;i++){currentObj=array[i];sum+=currentObj.data.byteLength}return sum};var prefixWithSilence=function prefixWithSilence(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime){var baseMediaDecodeTimeTs,frameDuration=0,audioGapDuration=0,audioFillFrameCount=0,audioFillDuration=0,silentFrame,i;if(!frames.length){return}baseMediaDecodeTimeTs=clock.audioTsToVideoTs(track.baseMediaDecodeTime,track.samplerate);frameDuration=Math.ceil(ONE_SECOND_IN_TS$1/(track.samplerate/1024));if(audioAppendStartTs&&videoBaseMediaDecodeTime){audioGapDuration=baseMediaDecodeTimeTs-Math.max(audioAppendStartTs,videoBaseMediaDecodeTime);audioFillFrameCount=Math.floor(audioGapDuration/frameDuration);audioFillDuration=audioFillFrameCount*frameDuration}if(audioFillFrameCount<1||audioFillDuration>ONE_SECOND_IN_TS$1/2){return}silentFrame=silence[track.samplerate];if(!silentFrame){silentFrame=frames[0].data}for(i=0;i<audioFillFrameCount;i++){frames.splice(i,0,{data:silentFrame})}track.baseMediaDecodeTime-=Math.floor(clock.videoTsToAudioTs(audioFillDuration,track.samplerate))};var trimAdtsFramesByEarliestDts=function trimAdtsFramesByEarliestDts(adtsFrames,track,earliestAllowedDts){if(track.minSegmentDts>=earliestAllowedDts){return adtsFrames}track.minSegmentDts=Infinity;return adtsFrames.filter(function(currentFrame){if(currentFrame.dts>=earliestAllowedDts){track.minSegmentDts=Math.min(track.minSegmentDts,currentFrame.dts);track.minSegmentPts=track.minSegmentDts;return true}return false})};var generateSampleTable$1=function generateSampleTable$1(frames){var i,currentFrame,samples=[];for(i=0;i<frames.length;i++){currentFrame=frames[i];samples.push({size:currentFrame.data.byteLength,duration:1024})}return samples};var concatenateFrameData=function concatenateFrameData(frames){var i,currentFrame,dataOffset=0,data=new Uint8Array(sumFrameByteLengths(frames));for(i=0;i<frames.length;i++){currentFrame=frames[i];data.set(currentFrame.data,dataOffset);dataOffset+=currentFrame.data.byteLength}return data};var audioFrameUtils={prefixWithSilence:prefixWithSilence,trimAdtsFramesByEarliestDts:trimAdtsFramesByEarliestDts,generateSampleTable:generateSampleTable$1,concatenateFrameData:concatenateFrameData};var ONE_SECOND_IN_TS$2=9e4;var collectDtsInfo=function collectDtsInfo(track,data){if(typeof data.pts==="number"){if(track.timelineStartInfo.pts===undefined){track.timelineStartInfo.pts=data.pts}if(track.minSegmentPts===undefined){track.minSegmentPts=data.pts}else{track.minSegmentPts=Math.min(track.minSegmentPts,data.pts)}if(track.maxSegmentPts===undefined){track.maxSegmentPts=data.pts}else{track.maxSegmentPts=Math.max(track.maxSegmentPts,data.pts)}}if(typeof data.dts==="number"){if(track.timelineStartInfo.dts===undefined){track.timelineStartInfo.dts=data.dts}if(track.minSegmentDts===undefined){track.minSegmentDts=data.dts}else{track.minSegmentDts=Math.min(track.minSegmentDts,data.dts)}if(track.maxSegmentDts===undefined){track.maxSegmentDts=data.dts}else{track.maxSegmentDts=Math.max(track.maxSegmentDts,data.dts)}}};var clearDtsInfo=function clearDtsInfo(track){delete track.minSegmentDts;delete track.maxSegmentDts;delete track.minSegmentPts;delete track.maxSegmentPts};var calculateTrackBaseMediaDecodeTime=function calculateTrackBaseMediaDecodeTime(track,keepOriginalTimestamps){var baseMediaDecodeTime,scale,minSegmentDts=track.minSegmentDts;if(!keepOriginalTimestamps){minSegmentDts-=track.timelineStartInfo.dts}baseMediaDecodeTime=track.timelineStartInfo.baseMediaDecodeTime;baseMediaDecodeTime+=minSegmentDts;baseMediaDecodeTime=Math.max(0,baseMediaDecodeTime);if(track.type==="audio"){scale=track.samplerate/ONE_SECOND_IN_TS$2;baseMediaDecodeTime*=scale;baseMediaDecodeTime=Math.floor(baseMediaDecodeTime)}return baseMediaDecodeTime};var trackDecodeInfo={clearDtsInfo:clearDtsInfo,calculateTrackBaseMediaDecodeTime:calculateTrackBaseMediaDecodeTime,collectDtsInfo:collectDtsInfo};var USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128;var parseSei=function parseSei(bytes){var i=0,result={payloadType:-1,payloadSize:0},payloadType=0,payloadSize=0;while(i<bytes.byteLength){if(bytes[i]===RBSP_TRAILING_BITS){break}while(bytes[i]===255){payloadType+=255;i++}payloadType+=bytes[i++];while(bytes[i]===255){payloadSize+=255;i++}payloadSize+=bytes[i++];if(!result.payload&&payloadType===USER_DATA_REGISTERED_ITU_T_T35){result.payloadType=payloadType;result.payloadSize=payloadSize;result.payload=bytes.subarray(i,i+payloadSize);break}i+=payloadSize;payloadType=0;payloadSize=0}return result};var parseUserData=function parseUserData(sei){if(sei.payload[0]!==181){return null}if((sei.payload[1]<<8|sei.payload[2])!==49){return null}if(String.fromCharCode(sei.payload[3],sei.payload[4],sei.payload[5],sei.payload[6])!=="GA94"){return null}if(sei.payload[7]!==3){return null}return sei.payload.subarray(8,sei.payload.length-1)};var parseCaptionPackets=function parseCaptionPackets(pts,userData){var results=[],i,count,offset,data;if(!(userData[0]&64)){return results}count=userData[0]&31;for(i=0;i<count;i++){offset=i*3;data={type:userData[offset+2]&3,pts:pts};if(userData[offset+2]&4){data.ccData=userData[offset+3]<<8|userData[offset+4];results.push(data)}}return results};var discardEmulationPreventionBytes=function discardEmulationPreventionBytes(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===3){emulationPreventionBytesPositions.push(i+2);i+=2}else{i++}}if(emulationPreventionBytesPositions.length===0){return data}newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift()}newData[i]=data[sourceIndex]}return newData};var captionPacketParser={parseSei:parseSei,parseUserData:parseUserData,parseCaptionPackets:parseCaptionPackets,discardEmulationPreventionBytes:discardEmulationPreventionBytes,USER_DATA_REGISTERED_ITU_T_T35:USER_DATA_REGISTERED_ITU_T_T35};var CaptionStream=function CaptionStream(){CaptionStream.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Cea608Stream(0,0),new Cea608Stream(0,1),new Cea608Stream(1,0),new Cea608Stream(1,1)];this.reset();this.ccStreams_.forEach(function(cc){cc.on("data",this.trigger.bind(this,"data"));cc.on("done",this.trigger.bind(this,"done"))},this)};CaptionStream.prototype=new stream;CaptionStream.prototype.push=function(event){var sei,userData,newCaptionPackets;if(event.nalUnitType!=="sei_rbsp"){return}sei=captionPacketParser.parseSei(event.escapedRBSP);if(sei.payloadType!==captionPacketParser.USER_DATA_REGISTERED_ITU_T_T35){return}userData=captionPacketParser.parseUserData(sei);if(!userData){return}if(event.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(event.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}newCaptionPackets=captionPacketParser.parseCaptionPackets(event.pts,userData);this.captionPackets_=this.captionPackets_.concat(newCaptionPackets);if(this.latestDts_!==event.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=event.dts};CaptionStream.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(cc){cc.flush()},this);return}this.captionPackets_.forEach(function(elem,idx){elem.presortIndex=idx});this.captionPackets_.sort(function(a,b){if(a.pts===b.pts){return a.presortIndex-b.presortIndex}return a.pts-b.pts});this.captionPackets_.forEach(function(packet){if(packet.type<2){this.dispatchCea608Packet(packet)}},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(cc){cc.flush()},this);return};CaptionStream.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(ccStream){ccStream.reset()})};CaptionStream.prototype.dispatchCea608Packet=function(packet){if(this.setsChannel1Active(packet)){this.activeCea608Channel_[packet.type]=0}else if(this.setsChannel2Active(packet)){this.activeCea608Channel_[packet.type]=1}if(this.activeCea608Channel_[packet.type]===null){return}this.ccStreams_[(packet.type<<1)+this.activeCea608Channel_[packet.type]].push(packet)};CaptionStream.prototype.setsChannel1Active=function(packet){return(packet.ccData&30720)===4096};CaptionStream.prototype.setsChannel2Active=function(packet){return(packet.ccData&30720)===6144};var CHARACTER_TRANSLATION={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var getCharFromCode=function getCharFromCode(code){if(code===null){return""}code=CHARACTER_TRANSLATION[code]||code;return String.fromCharCode(code)};var BOTTOM_ROW=14;var ROWS=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var createDisplayBuffer=function createDisplayBuffer(){var result=[],i=BOTTOM_ROW+1;while(i--){result.push("")}return result};var Cea608Stream=function Cea608Stream(field,dataChannel){Cea608Stream.prototype.init.call(this);this.field_=field||0;this.dataChannel_=dataChannel||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(packet){var data,swap,char0,char1,text;data=packet.ccData&32639;if(data===this.lastControlCode_){this.lastControlCode_=null;return}if((data&61440)===4096){this.lastControlCode_=data}else if(data!==this.PADDING_){this.lastControlCode_=null}char0=data>>>8;char1=data&255;if(data===this.PADDING_){return}else if(data===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(data===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);swap=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=swap;this.startPts_=packet.pts}else if(data===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(packet.pts)}else if(data===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(packet.pts)}else if(data===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(packet.pts)}else if(data===this.CARRIAGE_RETURN_){this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);this.shiftRowsUp_();this.startPts_=packet.pts}else if(data===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(data===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer()}else if(data===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=createDisplayBuffer()}else if(data===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer()}this.mode_="paintOn";this.startPts_=packet.pts}else if(this.isSpecialCharacter(char0,char1)){char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++}else if(this.isExtCharacter(char0,char1)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++}else if(this.isMidRowCode(char0,char1)){this.clearFormatting(packet.pts);this[this.mode_](packet.pts," ");this.column_++;if((char1&14)===14){this.addFormatting(packet.pts,["i"])}if((char1&1)===1){this.addFormatting(packet.pts,["u"])}}else if(this.isOffsetControlCode(char0,char1)){this.column_+=char1&3}else if(this.isPAC(char0,char1)){var row=ROWS.indexOf(data&7968);if(this.mode_==="rollUp"){if(row-this.rollUpRows_+1<0){row=this.rollUpRows_-1}this.setRollUp(packet.pts,row)}if(row!==this.row_){this.clearFormatting(packet.pts);this.row_=row}if(char1&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(packet.pts,["u"])}if((data&16)===16){this.column_=((data&14)>>1)*4}if(this.isColorPAC(char1)){if((char1&14)===14){this.addFormatting(packet.pts,["i"])}}}else if(this.isNormalChar(char0)){if(char1===0){char1=null}text=getCharFromCode(char0);text+=getCharFromCode(char1);this[this.mode_](packet.pts,text);this.column_+=text.length}}};Cea608Stream.prototype=new stream;Cea608Stream.prototype.flushDisplayed=function(pts){var content=this.displayed_.map(function(row){try{return row.trim()}catch(e){console.error("Skipping malformed caption.");return""}}).join("\n").replace(/^\n+|\n+$/g,"");if(content.length){this.trigger("data",{startPts:this.startPts_,endPts:pts,text:content,stream:this.name_})}};Cea608Stream.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=createDisplayBuffer();this.nonDisplayed_=createDisplayBuffer();this.lastControlCode_=null;this.column_=0;this.row_=BOTTOM_ROW;this.rollUpRows_=2;this.formatting_=[]};Cea608Stream.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Cea608Stream.prototype.isSpecialCharacter=function(char0,char1){return char0===this.EXT_&&char1>=48&&char1<=63};Cea608Stream.prototype.isExtCharacter=function(char0,char1){return(char0===this.EXT_+1||char0===this.EXT_+2)&&char1>=32&&char1<=63};Cea608Stream.prototype.isMidRowCode=function(char0,char1){return char0===this.EXT_&&char1>=32&&char1<=47};Cea608Stream.prototype.isOffsetControlCode=function(char0,char1){return char0===this.OFFSET_&&char1>=33&&char1<=35};Cea608Stream.prototype.isPAC=function(char0,char1){return char0>=this.BASE_&&char0<this.BASE_+8&&char1>=64&&char1<=127};Cea608Stream.prototype.isColorPAC=function(char1){return char1>=64&&char1<=79||char1>=96&&char1<=127};Cea608Stream.prototype.isNormalChar=function(char){return char>=32&&char<=127};Cea608Stream.prototype.setRollUp=function(pts,newBaseRow){if(this.mode_!=="rollUp"){this.row_=BOTTOM_ROW;this.mode_="rollUp";this.flushDisplayed(pts);this.nonDisplayed_=createDisplayBuffer();this.displayed_=createDisplayBuffer()}if(newBaseRow!==undefined&&newBaseRow!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[newBaseRow-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(newBaseRow===undefined){newBaseRow=this.row_}this.topRow_=newBaseRow-this.rollUpRows_+1};Cea608Stream.prototype.addFormatting=function(pts,format){this.formatting_=this.formatting_.concat(format);var text=format.reduce(function(text,format){return text+"<"+format+">"},"");this[this.mode_](pts,text)};Cea608Stream.prototype.clearFormatting=function(pts){if(!this.formatting_.length){return}var text=this.formatting_.reverse().reduce(function(text,format){return text+"</"+format+">"},"");this.formatting_=[];this[this.mode_](pts,text)};Cea608Stream.prototype.popOn=function(pts,text){var baseRow=this.nonDisplayed_[this.row_];baseRow+=text;this.nonDisplayed_[this.row_]=baseRow};Cea608Stream.prototype.rollUp=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow};Cea608Stream.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++){this.displayed_[i]=""}for(i=this.row_+1;i<BOTTOM_ROW+1;i++){this.displayed_[i]=""}for(i=this.topRow_;i<this.row_;i++){this.displayed_[i]=this.displayed_[i+1]}this.displayed_[this.row_]=""};Cea608Stream.prototype.paintOn=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow};var captionStream={CaptionStream:CaptionStream,Cea608Stream:Cea608Stream};var streamTypes={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var MAX_TS=8589934592;var RO_THRESH=4294967296;var handleRollover=function handleRollover(value,reference){var direction=1;if(value>reference){direction=-1}while(Math.abs(reference-value)>RO_THRESH){value+=direction*MAX_TS}return value};var TimestampRolloverStream=function TimestampRolloverStream(type){var lastDTS,referenceDTS;TimestampRolloverStream.prototype.init.call(this);this.type_=type;this.push=function(data){if(data.type!==this.type_){return}if(referenceDTS===undefined){referenceDTS=data.dts}data.dts=handleRollover(data.dts,referenceDTS);data.pts=handleRollover(data.pts,referenceDTS);lastDTS=data.dts;this.trigger("data",data)};this.flush=function(){referenceDTS=lastDTS;this.trigger("done")};this.discontinuity=function(){referenceDTS=void 0;lastDTS=void 0}};TimestampRolloverStream.prototype=new stream;var timestampRolloverStream={TimestampRolloverStream:TimestampRolloverStream,handleRollover:handleRollover};var percentEncode=function percentEncode(bytes,start,end){var i,result="";for(i=start;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2)}return result},parseUtf8=function parseUtf8(bytes,start,end){return decodeURIComponent(percentEncode(bytes,start,end))},parseIso88591=function parseIso88591(bytes,start,end){return unescape(percentEncode(bytes,start,end))},parseSyncSafeInteger=function parseSyncSafeInteger(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3]},tagParsers={TXXX:function TXXX(tag){var i;if(tag.data[0]!==3){return}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.value=parseUtf8(tag.data,i+1,tag.data.length).replace(/\0*$/,"");break}}tag.data=tag.value},WXXX:function WXXX(tag){var i;if(tag.data[0]!==3){return}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.url=parseUtf8(tag.data,i+1,tag.data.length);break}}},PRIV:function PRIV(tag){var i;for(i=0;i<tag.data.length;i++){if(tag.data[i]===0){tag.owner=parseIso88591(tag.data,0,i);break}}tag.privateData=tag.data.subarray(i+1);tag.data=tag.privateData}},_MetadataStream3;_MetadataStream3=function MetadataStream(options){var settings={debug:!!(options&&options.debug),descriptor:options&&options.descriptor},tagSize=0,buffer=[],bufferSize=0,i;_MetadataStream3.prototype.init.call(this);this.dispatchType=streamTypes.METADATA_STREAM_TYPE.toString(16);if(settings.descriptor){for(i=0;i<settings.descriptor.length;i++){this.dispatchType+=("00"+settings.descriptor[i].toString(16)).slice(-2)}}this.push=function(chunk){var tag,frameStart,frameSize,frame,i,frameHeader;if(chunk.type!=="timed-metadata"){return}if(chunk.dataAlignmentIndicator){bufferSize=0;buffer.length=0}if(buffer.length===0&&(chunk.data.length<10||chunk.data[0]!=="I".charCodeAt(0)||chunk.data[1]!=="D".charCodeAt(0)||chunk.data[2]!=="3".charCodeAt(0))){if(settings.debug){console.log("Skipping unrecognized metadata packet")}return}buffer.push(chunk);bufferSize+=chunk.data.byteLength;if(buffer.length===1){tagSize=parseSyncSafeInteger(chunk.data.subarray(6,10));tagSize+=10}if(bufferSize<tagSize){return}tag={data:new Uint8Array(tagSize),frames:[],pts:buffer[0].pts,dts:buffer[0].dts};for(i=0;i<tagSize;){tag.data.set(buffer[0].data.subarray(0,tagSize-i),i);i+=buffer[0].data.byteLength;bufferSize-=buffer[0].data.byteLength;buffer.shift()}frameStart=10;if(tag.data[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger(tag.data.subarray(10,14));tagSize-=parseSyncSafeInteger(tag.data.subarray(16,20))}do{frameSize=parseSyncSafeInteger(tag.data.subarray(frameStart+4,frameStart+8));if(frameSize<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}frameHeader=String.fromCharCode(tag.data[frameStart],tag.data[frameStart+1],tag.data[frameStart+2],tag.data[frameStart+3]);frame={id:frameHeader,data:tag.data.subarray(frameStart+10,frameStart+frameSize+10)};frame.key=frame.id;if(tagParsers[frame.id]){tagParsers[frame.id](frame);if(frame.owner==="com.apple.streaming.transportStreamTimestamp"){var d=frame.data,size=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&3;frame.timeStamp=size;if(tag.pts===undefined&&tag.dts===undefined){tag.pts=frame.timeStamp;tag.dts=frame.timeStamp}this.trigger("timestamp",frame)}}tag.frames.push(frame);frameStart+=10;frameStart+=frameSize}while(frameStart<tagSize);this.trigger("data",tag)}};_MetadataStream3.prototype=new stream;var metadataStream=_MetadataStream3;var TimestampRolloverStream$1=timestampRolloverStream.TimestampRolloverStream;var _TransportPacketStream3,_TransportParseStream3,_ElementaryStream3;var MP2T_PACKET_LENGTH=188,SYNC_BYTE=71;_TransportPacketStream3=function TransportPacketStream(){var buffer=new Uint8Array(MP2T_PACKET_LENGTH),bytesInBuffer=0;_TransportPacketStream3.prototype.init.call(this);this.push=function(bytes){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,everything;if(bytesInBuffer){everything=new Uint8Array(bytes.byteLength+bytesInBuffer);everything.set(buffer.subarray(0,bytesInBuffer));everything.set(bytes,bytesInBuffer);bytesInBuffer=0}else{everything=bytes}while(endIndex<everything.byteLength){if(everything[startIndex]===SYNC_BYTE&&everything[endIndex]===SYNC_BYTE){this.trigger("data",everything.subarray(startIndex,endIndex));startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue}startIndex++;endIndex++}if(startIndex<everything.byteLength){buffer.set(everything.subarray(startIndex),0);bytesInBuffer=everything.byteLength-startIndex}};this.flush=function(){if(bytesInBuffer===MP2T_PACKET_LENGTH&&buffer[0]===SYNC_BYTE){this.trigger("data",buffer);bytesInBuffer=0}this.trigger("done")}};_TransportPacketStream3.prototype=new stream;_TransportParseStream3=function TransportParseStream(){var parsePsi,parsePat,parsePmt,self;_TransportParseStream3.prototype.init.call(this);self=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;parsePsi=function parsePsi(payload,psi){var offset=0;if(psi.payloadUnitStartIndicator){offset+=payload[offset]+1}if(psi.type==="pat"){parsePat(payload.subarray(offset),psi)}else{parsePmt(payload.subarray(offset),psi)}};parsePat=function parsePat(payload,pat){pat.section_number=payload[7];pat.last_section_number=payload[8];self.pmtPid=(payload[10]&31)<<8|payload[11];pat.pmtPid=self.pmtPid};parsePmt=function parsePmt(payload,pmt){var sectionLength,tableEnd,programInfoLength,offset;if(!(payload[5]&1)){return}self.programMapTable={video:null,audio:null,"timed-metadata":{}};sectionLength=(payload[1]&15)<<8|payload[2];tableEnd=3+sectionLength-4;programInfoLength=(payload[10]&15)<<8|payload[11];offset=12+programInfoLength;while(offset<tableEnd){var streamType=payload[offset];var pid=(payload[offset+1]&31)<<8|payload[offset+2];if(streamType===streamTypes.H264_STREAM_TYPE&&self.programMapTable.video===null){self.programMapTable.video=pid}else if(streamType===streamTypes.ADTS_STREAM_TYPE&&self.programMapTable.audio===null){self.programMapTable.audio=pid}else if(streamType===streamTypes.METADATA_STREAM_TYPE){self.programMapTable["timed-metadata"][pid]=streamType}offset+=((payload[offset+3]&15)<<8|payload[offset+4])+5}pmt.programMapTable=self.programMapTable};this.push=function(packet){var result={},offset=4;result.payloadUnitStartIndicator=!!(packet[1]&64);result.pid=packet[1]&31;result.pid<<=8;result.pid|=packet[2];if((packet[3]&48)>>>4>1){offset+=packet[offset]+1}if(result.pid===0){result.type="pat";parsePsi(packet.subarray(offset),result);this.trigger("data",result)}else if(result.pid===this.pmtPid){result.type="pmt";parsePsi(packet.subarray(offset),result);this.trigger("data",result);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([packet,offset,result])}else{this.processPes_(packet,offset,result)}};this.processPes_=function(packet,offset,result){if(result.pid===this.programMapTable.video){result.streamType=streamTypes.H264_STREAM_TYPE}else if(result.pid===this.programMapTable.audio){result.streamType=streamTypes.ADTS_STREAM_TYPE}else{result.streamType=this.programMapTable["timed-metadata"][result.pid]}result.type="pes";result.data=packet.subarray(offset);this.trigger("data",result)}};_TransportParseStream3.prototype=new stream;_TransportParseStream3.STREAM_TYPES={h264:27,adts:15};_ElementaryStream3=function ElementaryStream(){var self=this,video={data:[],size:0},audio={data:[],size:0},timedMetadata={data:[],size:0},parsePes=function parsePes(payload,pes){var ptsDtsFlags;pes.packetLength=6+(payload[4]<<8|payload[5]);pes.dataAlignmentIndicator=(payload[6]&4)!==0;ptsDtsFlags=payload[7];if(ptsDtsFlags&192){pes.pts=(payload[9]&14)<<27|(payload[10]&255)<<20|(payload[11]&254)<<12|(payload[12]&255)<<5|(payload[13]&254)>>>3;pes.pts*=4;pes.pts+=(payload[13]&6)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&64){pes.dts=(payload[14]&14)<<27|(payload[15]&255)<<20|(payload[16]&254)<<12|(payload[17]&255)<<5|(payload[18]&254)>>>3;pes.dts*=4;pes.dts+=(payload[18]&6)>>>1}}pes.data=payload.subarray(9+payload[8])},flushStream=function flushStream(stream$$1,type,forceFlush){var packetData=new Uint8Array(stream$$1.size),event={type:type},i=0,offset=0,packetFlushable=false,fragment;if(!stream$$1.data.length||stream$$1.size<9){return}event.trackId=stream$$1.data[0].pid;for(i=0;i<stream$$1.data.length;i++){fragment=stream$$1.data[i];packetData.set(fragment.data,offset);offset+=fragment.data.byteLength}parsePes(packetData,event);packetFlushable=type==="video"||event.packetLength<=stream$$1.size;if(forceFlush||packetFlushable){stream$$1.size=0;
stream$$1.data.length=0}if(packetFlushable){self.trigger("data",event)}};_ElementaryStream3.prototype.init.call(this);this.push=function(data){({pat:function pat(){},pes:function pes(){var stream$$1,streamType;switch(data.streamType){case streamTypes.H264_STREAM_TYPE:case streamTypes.H264_STREAM_TYPE:stream$$1=video;streamType="video";break;case streamTypes.ADTS_STREAM_TYPE:stream$$1=audio;streamType="audio";break;case streamTypes.METADATA_STREAM_TYPE:stream$$1=timedMetadata;streamType="timed-metadata";break;default:return}if(data.payloadUnitStartIndicator){flushStream(stream$$1,streamType,true)}stream$$1.data.push(data);stream$$1.size+=data.data.byteLength},pmt:function pmt(){var event={type:"metadata",tracks:[]},programMapTable=data.programMapTable;if(programMapTable.video!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.video,codec:"avc",type:"video"})}if(programMapTable.audio!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.audio,codec:"adts",type:"audio"})}self.trigger("data",event)}})[data.type]()};this.flush=function(){flushStream(video,"video");flushStream(audio,"audio");flushStream(timedMetadata,"timed-metadata");this.trigger("done")}};_ElementaryStream3.prototype=new stream;var m2ts={PAT_PID:0,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH,TransportPacketStream:_TransportPacketStream3,TransportParseStream:_TransportParseStream3,ElementaryStream:_ElementaryStream3,TimestampRolloverStream:TimestampRolloverStream$1,CaptionStream:captionStream.CaptionStream,Cea608Stream:captionStream.Cea608Stream,MetadataStream:metadataStream};for(var type$1 in streamTypes){if(streamTypes.hasOwnProperty(type$1)){m2ts[type$1]=streamTypes[type$1]}}var m2ts_1=m2ts;var _AdtsStream3;var ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_AdtsStream3=function AdtsStream(){var buffer;_AdtsStream3.prototype.init.call(this);this.push=function(packet){var i=0,frameNum=0,frameLength,protectionSkipBytes,frameEnd,oldBuffer,sampleCount,adtsFrameDuration;if(packet.type!=="audio"){return}if(buffer){oldBuffer=buffer;buffer=new Uint8Array(oldBuffer.byteLength+packet.data.byteLength);buffer.set(oldBuffer);buffer.set(packet.data,oldBuffer.byteLength)}else{buffer=packet.data}while(i+5<buffer.length){if(buffer[i]!==255||(buffer[i+1]&246)!==240){i++;continue}protectionSkipBytes=(~buffer[i+1]&1)*2;frameLength=(buffer[i+3]&3)<<11|buffer[i+4]<<3|(buffer[i+5]&224)>>5;sampleCount=((buffer[i+6]&3)+1)*1024;adtsFrameDuration=sampleCount*9e4/ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&60)>>>2];frameEnd=i+frameLength;if(buffer.byteLength<frameEnd){return}this.trigger("data",{pts:packet.pts+frameNum*adtsFrameDuration,dts:packet.dts+frameNum*adtsFrameDuration,sampleCount:sampleCount,audioobjecttype:(buffer[i+2]>>>6&3)+1,channelcount:(buffer[i+2]&1)<<2|(buffer[i+3]&192)>>>6,samplerate:ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&60)>>>2],samplingfrequencyindex:(buffer[i+2]&60)>>>2,samplesize:16,data:buffer.subarray(i+7+protectionSkipBytes,frameEnd)});if(buffer.byteLength===frameEnd){buffer=undefined;return}frameNum++;buffer=buffer.subarray(frameEnd)}};this.flush=function(){this.trigger("done")}};_AdtsStream3.prototype=new stream;var adts=_AdtsStream3;var ExpGolomb;ExpGolomb=function ExpGolomb(workingData){var workingBytesAvailable=workingData.byteLength,workingWord=0,workingBitsAvailable=0;this.length=function(){return 8*workingBytesAvailable};this.bitsAvailable=function(){return 8*workingBytesAvailable+workingBitsAvailable};this.loadWord=function(){var position=workingData.byteLength-workingBytesAvailable,workingBytes=new Uint8Array(4),availableBytes=Math.min(4,workingBytesAvailable);if(availableBytes===0){throw new Error("no bytes available")}workingBytes.set(workingData.subarray(position,position+availableBytes));workingWord=new DataView(workingBytes.buffer).getUint32(0);workingBitsAvailable=availableBytes*8;workingBytesAvailable-=availableBytes};this.skipBits=function(count){var skipBytes;if(workingBitsAvailable>count){workingWord<<=count;workingBitsAvailable-=count}else{count-=workingBitsAvailable;skipBytes=Math.floor(count/8);count-=skipBytes*8;workingBytesAvailable-=skipBytes;this.loadWord();workingWord<<=count;workingBitsAvailable-=count}};this.readBits=function(size){var bits=Math.min(workingBitsAvailable,size),valu=workingWord>>>32-bits;workingBitsAvailable-=bits;if(workingBitsAvailable>0){workingWord<<=bits}else if(workingBytesAvailable>0){this.loadWord()}bits=size-bits;if(bits>0){return valu<<bits|this.readBits(bits)}return valu};this.skipLeadingZeros=function(){var leadingZeroCount;for(leadingZeroCount=0;leadingZeroCount<workingBitsAvailable;++leadingZeroCount){if((workingWord&2147483648>>>leadingZeroCount)!==0){workingWord<<=leadingZeroCount;workingBitsAvailable-=leadingZeroCount;return leadingZeroCount}}this.loadWord();return leadingZeroCount+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var clz=this.skipLeadingZeros();return this.readBits(clz+1)-1};this.readExpGolomb=function(){var valu=this.readUnsignedExpGolomb();if(1&valu){return 1+valu>>>1}return-1*(valu>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var expGolomb=ExpGolomb;var _H264Stream3,_NalByteStream3;var PROFILES_WITH_OPTIONAL_SPS_DATA;_NalByteStream3=function NalByteStream(){var syncPoint=0,i,buffer;_NalByteStream3.prototype.init.call(this);this.push=function(data){var swapBuffer;if(!buffer){buffer=data.data}else{swapBuffer=new Uint8Array(buffer.byteLength+data.data.byteLength);swapBuffer.set(buffer);swapBuffer.set(data.data,buffer.byteLength);buffer=swapBuffer}for(;syncPoint<buffer.byteLength-3;syncPoint++){if(buffer[syncPoint+2]===1){i=syncPoint+5;break}}while(i<buffer.byteLength){switch(buffer[i]){case 0:if(buffer[i-1]!==0){i+=2;break}else if(buffer[i-2]!==0){i++;break}if(syncPoint+3!==i-2){this.trigger("data",buffer.subarray(syncPoint+3,i-2))}do{i++}while(buffer[i]!==1&&i<buffer.length);syncPoint=i-2;i+=3;break;case 1:if(buffer[i-1]!==0||buffer[i-2]!==0){i+=3;break}this.trigger("data",buffer.subarray(syncPoint+3,i-2));syncPoint=i-2;i+=3;break;default:i+=3;break}}buffer=buffer.subarray(syncPoint);i-=syncPoint;syncPoint=0};this.flush=function(){if(buffer&&buffer.byteLength>3){this.trigger("data",buffer.subarray(syncPoint+3))}buffer=null;syncPoint=0;this.trigger("done")}};_NalByteStream3.prototype=new stream;PROFILES_WITH_OPTIONAL_SPS_DATA={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};_H264Stream3=function H264Stream(){var nalByteStream=new _NalByteStream3,self,trackId,currentPts,currentDts,discardEmulationPreventionBytes,readSequenceParameterSet,skipScalingList;_H264Stream3.prototype.init.call(this);self=this;this.push=function(packet){if(packet.type!=="video"){return}trackId=packet.trackId;currentPts=packet.pts;currentDts=packet.dts;nalByteStream.push(packet)};nalByteStream.on("data",function(data){var event={trackId:trackId,pts:currentPts,dts:currentDts,data:data};switch(data[0]&31){case 5:event.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:event.nalUnitType="sei_rbsp";event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));break;case 7:event.nalUnitType="seq_parameter_set_rbsp";event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));event.config=readSequenceParameterSet(event.escapedRBSP);break;case 8:event.nalUnitType="pic_parameter_set_rbsp";break;case 9:event.nalUnitType="access_unit_delimiter_rbsp";break;default:break}self.trigger("data",event)});nalByteStream.on("done",function(){self.trigger("done")});this.flush=function(){nalByteStream.flush()};skipScalingList=function skipScalingList(count,expGolombDecoder){var lastScale=8,nextScale=8,j,deltaScale;for(j=0;j<count;j++){if(nextScale!==0){deltaScale=expGolombDecoder.readExpGolomb();nextScale=(lastScale+deltaScale+256)%256}lastScale=nextScale===0?lastScale:nextScale}};discardEmulationPreventionBytes=function discardEmulationPreventionBytes(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===3){emulationPreventionBytesPositions.push(i+2);i+=2}else{i++}}if(emulationPreventionBytesPositions.length===0){return data}newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift()}newData[i]=data[sourceIndex]}return newData};readSequenceParameterSet=function readSequenceParameterSet(data){var frameCropLeftOffset=0,frameCropRightOffset=0,frameCropTopOffset=0,frameCropBottomOffset=0,sarScale=1,expGolombDecoder,profileIdc,levelIdc,profileCompatibility,chromaFormatIdc,picOrderCntType,numRefFramesInPicOrderCntCycle,picWidthInMbsMinus1,picHeightInMapUnitsMinus1,frameMbsOnlyFlag,scalingListCount,sarRatio,aspectRatioIdc,i;expGolombDecoder=new expGolomb(data);profileIdc=expGolombDecoder.readUnsignedByte();profileCompatibility=expGolombDecoder.readUnsignedByte();levelIdc=expGolombDecoder.readUnsignedByte();expGolombDecoder.skipUnsignedExpGolomb();if(PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]){chromaFormatIdc=expGolombDecoder.readUnsignedExpGolomb();if(chromaFormatIdc===3){expGolombDecoder.skipBits(1)}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){scalingListCount=chromaFormatIdc!==3?8:12;for(i=0;i<scalingListCount;i++){if(expGolombDecoder.readBoolean()){if(i<6){skipScalingList(16,expGolombDecoder)}else{skipScalingList(64,expGolombDecoder)}}}}}expGolombDecoder.skipUnsignedExpGolomb();picOrderCntType=expGolombDecoder.readUnsignedExpGolomb();if(picOrderCntType===0){expGolombDecoder.readUnsignedExpGolomb()}else if(picOrderCntType===1){expGolombDecoder.skipBits(1);expGolombDecoder.skipExpGolomb();expGolombDecoder.skipExpGolomb();numRefFramesInPicOrderCntCycle=expGolombDecoder.readUnsignedExpGolomb();for(i=0;i<numRefFramesInPicOrderCntCycle;i++){expGolombDecoder.skipExpGolomb()}}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);picWidthInMbsMinus1=expGolombDecoder.readUnsignedExpGolomb();picHeightInMapUnitsMinus1=expGolombDecoder.readUnsignedExpGolomb();frameMbsOnlyFlag=expGolombDecoder.readBits(1);if(frameMbsOnlyFlag===0){expGolombDecoder.skipBits(1)}expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){frameCropLeftOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropRightOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropTopOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropBottomOffset=expGolombDecoder.readUnsignedExpGolomb()}if(expGolombDecoder.readBoolean()){if(expGolombDecoder.readBoolean()){aspectRatioIdc=expGolombDecoder.readUnsignedByte();switch(aspectRatioIdc){case 1:sarRatio=[1,1];break;case 2:sarRatio=[12,11];break;case 3:sarRatio=[10,11];break;case 4:sarRatio=[16,11];break;case 5:sarRatio=[40,33];break;case 6:sarRatio=[24,11];break;case 7:sarRatio=[20,11];break;case 8:sarRatio=[32,11];break;case 9:sarRatio=[80,33];break;case 10:sarRatio=[18,11];break;case 11:sarRatio=[15,11];break;case 12:sarRatio=[64,33];break;case 13:sarRatio=[160,99];break;case 14:sarRatio=[4,3];break;case 15:sarRatio=[3,2];break;case 16:sarRatio=[2,1];break;case 255:{sarRatio=[expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte(),expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte()];break}}if(sarRatio){sarScale=sarRatio[0]/sarRatio[1]}}}return{profileIdc:profileIdc,levelIdc:levelIdc,profileCompatibility:profileCompatibility,width:Math.ceil(((picWidthInMbsMinus1+1)*16-frameCropLeftOffset*2-frameCropRightOffset*2)*sarScale),height:(2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16-frameCropTopOffset*2-frameCropBottomOffset*2}}};_H264Stream3.prototype=new stream;var h264={H264Stream:_H264Stream3,NalByteStream:_NalByteStream3};var ADTS_SAMPLING_FREQUENCIES$1=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var isLikelyAacData=function isLikelyAacData(data){if(data[0]==="I".charCodeAt(0)&&data[1]==="D".charCodeAt(0)&&data[2]==="3".charCodeAt(0)){return true}return false};var parseSyncSafeInteger$1=function parseSyncSafeInteger$1(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3]};var percentEncode$1=function percentEncode$1(bytes,start,end){var i,result="";for(i=start;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2)}return result};var parseIso88591$1=function parseIso88591$1(bytes,start,end){return unescape(percentEncode$1(bytes,start,end))};var parseId3TagSize=function parseId3TagSize(header,byteIndex){var returnSize=header[byteIndex+6]<<21|header[byteIndex+7]<<14|header[byteIndex+8]<<7|header[byteIndex+9],flags=header[byteIndex+5],footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20}return returnSize+10};var parseAdtsSize=function parseAdtsSize(header,byteIndex){var lowThree=(header[byteIndex+5]&224)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&3<<11;return highTwo|middle|lowThree};var parseType$1=function parseType$1(header,byteIndex){if(header[byteIndex]==="I".charCodeAt(0)&&header[byteIndex+1]==="D".charCodeAt(0)&&header[byteIndex+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(header[byteIndex]&255===255&&(header[byteIndex+1]&240)===240){return"audio"}return null};var parseSampleRate=function parseSampleRate(packet){var i=0;while(i+5<packet.length){if(packet[i]!==255||(packet[i+1]&246)!==240){i++;continue}return ADTS_SAMPLING_FREQUENCIES$1[(packet[i+2]&60)>>>2]}return null};var parseAacTimestamp=function parseAacTimestamp(packet){var frameStart,frameSize,frame,frameHeader;frameStart=10;if(packet[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger$1(packet.subarray(10,14))}do{frameSize=parseSyncSafeInteger$1(packet.subarray(frameStart+4,frameStart+8));if(frameSize<1){return null}frameHeader=String.fromCharCode(packet[frameStart],packet[frameStart+1],packet[frameStart+2],packet[frameStart+3]);if(frameHeader==="PRIV"){frame=packet.subarray(frameStart+10,frameStart+frameSize+10);for(var i=0;i<frame.byteLength;i++){if(frame[i]===0){var owner=parseIso88591$1(frame,0,i);if(owner==="com.apple.streaming.transportStreamTimestamp"){var d=frame.subarray(i+1);var size=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&3;return size}break}}}frameStart+=10;frameStart+=frameSize}while(frameStart<packet.byteLength);return null};var utils={isLikelyAacData:isLikelyAacData,parseId3TagSize:parseId3TagSize,parseAdtsSize:parseAdtsSize,parseType:parseType$1,parseSampleRate:parseSampleRate,parseAacTimestamp:parseAacTimestamp};var _AacStream3;_AacStream3=function AacStream(){var everything=new Uint8Array,timeStamp=0;_AacStream3.prototype.init.call(this);this.setTimestamp=function(timestamp){timeStamp=timestamp};this.push=function(bytes){var frameSize=0,byteIndex=0,bytesLeft,chunk,packet,tempLength;if(everything.length){tempLength=everything.length;everything=new Uint8Array(bytes.byteLength+tempLength);everything.set(everything.subarray(0,tempLength));everything.set(bytes,tempLength)}else{everything=bytes}while(everything.length-byteIndex>=3){if(everything[byteIndex]==="I".charCodeAt(0)&&everything[byteIndex+1]==="D".charCodeAt(0)&&everything[byteIndex+2]==="3".charCodeAt(0)){if(everything.length-byteIndex<10){break}frameSize=utils.parseId3TagSize(everything,byteIndex);if(byteIndex+frameSize>everything.length){break}chunk={type:"timed-metadata",data:everything.subarray(byteIndex,byteIndex+frameSize)};this.trigger("data",chunk);byteIndex+=frameSize;continue}else if((everything[byteIndex]&255)===255&&(everything[byteIndex+1]&240)===240){if(everything.length-byteIndex<7){break}frameSize=utils.parseAdtsSize(everything,byteIndex);if(byteIndex+frameSize>everything.length){break}packet={type:"audio",data:everything.subarray(byteIndex,byteIndex+frameSize),pts:timeStamp,dts:timeStamp};this.trigger("data",packet);byteIndex+=frameSize;continue}byteIndex++}bytesLeft=everything.length-byteIndex;if(bytesLeft>0){everything=everything.subarray(byteIndex)}else{everything=new Uint8Array}}};_AacStream3.prototype=new stream;var aac=_AacStream3;var H264Stream$1=h264.H264Stream;var isLikelyAacData$1=utils.isLikelyAacData;var AUDIO_PROPERTIES=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var VIDEO_PROPERTIES=["width","height","profileIdc","levelIdc","profileCompatibility"];var _VideoSegmentStream4,_AudioSegmentStream4,_Transmuxer4,_CoalesceStream3;var arrayEquals=function arrayEquals(a,b){var i;if(a.length!==b.length){return false}for(i=0;i<a.length;i++){if(a[i]!==b[i]){return false}}return true};var generateVideoSegmentTimingInfo=function generateVideoSegmentTimingInfo(baseMediaDecodeTime,startDts,startPts,endDts,endPts,prependedContentDuration){var ptsOffsetFromDts=startPts-startDts,decodeDuration=endDts-startDts,presentationDuration=endPts-startPts;return{start:{dts:baseMediaDecodeTime,pts:baseMediaDecodeTime+ptsOffsetFromDts},end:{dts:baseMediaDecodeTime+decodeDuration,pts:baseMediaDecodeTime+presentationDuration},prependedContentDuration:prependedContentDuration,baseMediaDecodeTime:baseMediaDecodeTime}};_AudioSegmentStream4=function AudioSegmentStream(track,options){var adtsFrames=[],sequenceNumber=0,earliestAllowedDts=0,audioAppendStartTs=0,videoBaseMediaDecodeTime=Infinity;options=options||{};_AudioSegmentStream4.prototype.init.call(this);this.push=function(data){trackDecodeInfo.collectDtsInfo(track,data);if(track){AUDIO_PROPERTIES.forEach(function(prop){track[prop]=data[prop]})}adtsFrames.push(data)};this.setEarliestDts=function(earliestDts){earliestAllowedDts=earliestDts-track.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(baseMediaDecodeTime){videoBaseMediaDecodeTime=baseMediaDecodeTime};this.setAudioAppendStart=function(timestamp){audioAppendStartTs=timestamp};this.flush=function(){var frames,moof,mdat,boxes;if(adtsFrames.length===0){this.trigger("done","AudioSegmentStream");return}frames=audioFrameUtils.trimAdtsFramesByEarliestDts(adtsFrames,track,earliestAllowedDts);track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);audioFrameUtils.prefixWithSilence(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime);track.samples=audioFrameUtils.generateSampleTable(frames);mdat=mp4Generator.mdat(audioFrameUtils.concatenateFrameData(frames));adtsFrames=[];moof=mp4Generator.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);trackDecodeInfo.clearDtsInfo(track);this.trigger("data",{track:track,boxes:boxes});this.trigger("done","AudioSegmentStream")}};_AudioSegmentStream4.prototype=new stream;_VideoSegmentStream4=function VideoSegmentStream(track,options){var sequenceNumber=0,nalUnits=[],gopsToAlignWith=[],config,pps;options=options||{};_VideoSegmentStream4.prototype.init.call(this);delete track.minPTS;this.gopCache_=[];this.push=function(nalUnit){trackDecodeInfo.collectDtsInfo(track,nalUnit);if(nalUnit.nalUnitType==="seq_parameter_set_rbsp"&&!config){config=nalUnit.config;track.sps=[nalUnit.data];VIDEO_PROPERTIES.forEach(function(prop){track[prop]=config[prop]},this)}if(nalUnit.nalUnitType==="pic_parameter_set_rbsp"&&!pps){pps=nalUnit.data;track.pps=[nalUnit.data]}nalUnits.push(nalUnit)};this.flush=function(){var frames,gopForFusion,gops,moof,mdat,boxes,prependedContentDuration=0,firstGop,lastGop;while(nalUnits.length){if(nalUnits[0].nalUnitType==="access_unit_delimiter_rbsp"){break}nalUnits.shift()}if(nalUnits.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}frames=frameUtils.groupNalsIntoFrames(nalUnits);gops=frameUtils.groupFramesIntoGops(frames);if(!gops[0][0].keyFrame){gopForFusion=this.getGopForFusion_(nalUnits[0],track);if(gopForFusion){prependedContentDuration=gopForFusion.duration;gops.unshift(gopForFusion);gops.byteLength+=gopForFusion.byteLength;gops.nalCount+=gopForFusion.nalCount;gops.pts=gopForFusion.pts;gops.dts=gopForFusion.dts;gops.duration+=gopForFusion.duration}else{gops=frameUtils.extendFirstKeyFrame(gops)}}if(gopsToAlignWith.length){var alignedGops;if(options.alignGopsAtEnd){alignedGops=this.alignGopsAtEnd_(gops)}else{alignedGops=this.alignGopsAtStart_(gops)}if(!alignedGops){this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}trackDecodeInfo.clearDtsInfo(track);gops=alignedGops}trackDecodeInfo.collectDtsInfo(track,gops);track.samples=frameUtils.generateSampleTable(gops);mdat=mp4Generator.mdat(frameUtils.concatenateNalData(gops));track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);this.trigger("processedGopsInfo",gops.map(function(gop){return{pts:gop.pts,dts:gop.dts,byteLength:gop.byteLength}}));firstGop=gops[0];lastGop=gops[gops.length-1];this.trigger("segmentTimingInfo",generateVideoSegmentTimingInfo(track.baseMediaDecodeTime,firstGop.dts,firstGop.pts,lastGop.dts+lastGop.duration,lastGop.pts+lastGop.duration,prependedContentDuration));this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.trigger("baseMediaDecodeTime",track.baseMediaDecodeTime);this.trigger("timelineStartInfo",track.timelineStartInfo);moof=mp4Generator.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);this.trigger("data",{track:track,boxes:boxes});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){trackDecodeInfo.clearDtsInfo(track);config=undefined;pps=undefined};this.getGopForFusion_=function(nalUnit){var halfSecond=45e3,allowableOverlap=1e4,nearestDistance=Infinity,dtsDistance,nearestGopObj,currentGop,currentGopObj,i;for(i=0;i<this.gopCache_.length;i++){currentGopObj=this.gopCache_[i];currentGop=currentGopObj.gop;if(!(track.pps&&arrayEquals(track.pps[0],currentGopObj.pps[0]))||!(track.sps&&arrayEquals(track.sps[0],currentGopObj.sps[0]))){continue}if(currentGop.dts<track.timelineStartInfo.dts){continue}dtsDistance=nalUnit.dts-currentGop.dts-currentGop.duration;if(dtsDistance>=-allowableOverlap&&dtsDistance<=halfSecond){if(!nearestGopObj||nearestDistance>dtsDistance){nearestGopObj=currentGopObj;nearestDistance=dtsDistance}}}if(nearestGopObj){return nearestGopObj.gop}return null};this.alignGopsAtStart_=function(gops){var alignIndex,gopIndex,align,gop,byteLength,nalCount,duration,alignedGops;byteLength=gops.byteLength;nalCount=gops.nalCount;duration=gops.duration;alignIndex=gopIndex=0;while(alignIndex<gopsToAlignWith.length&&gopIndex<gops.length){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){break}if(gop.pts>align.pts){alignIndex++;continue}gopIndex++;byteLength-=gop.byteLength;nalCount-=gop.nalCount;duration-=gop.duration}if(gopIndex===0){return gops}if(gopIndex===gops.length){return null}alignedGops=gops.slice(gopIndex);alignedGops.byteLength=byteLength;alignedGops.duration=duration;alignedGops.nalCount=nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops};this.alignGopsAtEnd_=function(gops){var alignIndex,gopIndex,align,gop,alignEndIndex,matchFound;alignIndex=gopsToAlignWith.length-1;gopIndex=gops.length-1;alignEndIndex=null;matchFound=false;while(alignIndex>=0&&gopIndex>=0){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){matchFound=true;break}if(align.pts>gop.pts){alignIndex--;continue}if(alignIndex===gopsToAlignWith.length-1){alignEndIndex=gopIndex}gopIndex--}if(!matchFound&&alignEndIndex===null){return null}var trimIndex;if(matchFound){trimIndex=gopIndex}else{trimIndex=alignEndIndex}if(trimIndex===0){return gops}var alignedGops=gops.slice(trimIndex);var metadata=alignedGops.reduce(function(total,gop){total.byteLength+=gop.byteLength;total.duration+=gop.duration;total.nalCount+=gop.nalCount;return total},{byteLength:0,duration:0,nalCount:0});alignedGops.byteLength=metadata.byteLength;alignedGops.duration=metadata.duration;alignedGops.nalCount=metadata.nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops};this.alignGopsWith=function(newGopsToAlignWith){gopsToAlignWith=newGopsToAlignWith}};_VideoSegmentStream4.prototype=new stream;_CoalesceStream3=function CoalesceStream(options,metadataStream){this.numberOfTracks=0;this.metadataStream=metadataStream;options=options||{};if(typeof options.remux!=="undefined"){this.remuxTracks=!!options.remux}else{this.remuxTracks=true}if(typeof options.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=options.keepOriginalTimestamps}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;_CoalesceStream3.prototype.init.call(this);this.push=function(output){if(output.text){return this.pendingCaptions.push(output)}if(output.frames){return this.pendingMetadata.push(output)}this.pendingTracks.push(output.track);this.pendingBoxes.push(output.boxes);this.pendingBytes+=output.boxes.byteLength;if(output.track.type==="video"){this.videoTrack=output.track}if(output.track.type==="audio"){this.audioTrack=output.track}}};_CoalesceStream3.prototype=new stream;_CoalesceStream3.prototype.flush=function(flushSource){var offset=0,event={captions:[],captionStreams:{},metadata:[],info:{}},caption,id3,initSegment,timelineStartPts=0,i;if(this.pendingTracks.length<this.numberOfTracks){if(flushSource!=="VideoSegmentStream"&&flushSource!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts;VIDEO_PROPERTIES.forEach(function(prop){event.info[prop]=this.videoTrack[prop]},this)}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts;AUDIO_PROPERTIES.forEach(function(prop){event.info[prop]=this.audioTrack[prop]},this)}if(this.pendingTracks.length===1){event.type=this.pendingTracks[0].type}else{event.type="combined"}this.emittedTracks+=this.pendingTracks.length;initSegment=mp4Generator.initSegment(this.pendingTracks);event.initSegment=new Uint8Array(initSegment.byteLength);event.initSegment.set(initSegment);event.data=new Uint8Array(this.pendingBytes);for(i=0;i<this.pendingBoxes.length;i++){event.data.set(this.pendingBoxes[i],offset);offset+=this.pendingBoxes[i].byteLength}for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=caption.startPts;if(!this.keepOriginalTimestamps){caption.startTime-=timelineStartPts}caption.startTime/=9e4;caption.endTime=caption.endPts;if(!this.keepOriginalTimestamps){caption.endTime-=timelineStartPts}caption.endTime/=9e4;event.captionStreams[caption.stream]=true;event.captions.push(caption)}for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=id3.pts;if(!this.keepOriginalTimestamps){id3.cueTime-=timelineStartPts}id3.cueTime/=9e4;event.metadata.push(id3)}event.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",event);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};_Transmuxer4=function Transmuxer(options){var self=this,hasFlushed=true,videoTrack,audioTrack;_Transmuxer4.prototype.init.call(this);options=options||{};this.baseMediaDecodeTime=options.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="aac";pipeline.metadataStream=new m2ts_1.MetadataStream;pipeline.aacStream=new aac;pipeline.audioTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("audio");pipeline.timedMetadataTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("timed-metadata");pipeline.adtsStream=new adts;pipeline.coalesceStream=new _CoalesceStream3(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.aacStream;pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.metadataStream.on("timestamp",function(frame){pipeline.aacStream.setTimestamp(frame.timeStamp)});pipeline.aacStream.on("data",function(data){if(data.type==="timed-metadata"&&!pipeline.audioSegmentStream){audioTrack=audioTrack||{timelineStartInfo:{baseMediaDecodeTime:self.baseMediaDecodeTime},codec:"adts",type:"audio"};pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream4(audioTrack,options);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream)}});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="ts";pipeline.metadataStream=new m2ts_1.MetadataStream;pipeline.packetStream=new m2ts_1.TransportPacketStream;pipeline.parseStream=new m2ts_1.TransportParseStream;pipeline.elementaryStream=new m2ts_1.ElementaryStream;pipeline.videoTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("video");pipeline.audioTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("audio");pipeline.timedMetadataTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("timed-metadata");pipeline.adtsStream=new adts;pipeline.h264Stream=new H264Stream$1;pipeline.captionStream=new m2ts_1.CaptionStream;pipeline.coalesceStream=new _CoalesceStream3(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.packetStream;pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream);pipeline.elementaryStream.pipe(pipeline.videoTimestampRolloverStream).pipe(pipeline.h264Stream);pipeline.elementaryStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.elementaryStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);pipeline.elementaryStream.on("data",function(data){var i;if(data.type==="metadata"){i=data.tracks.length;while(i--){if(!videoTrack&&data.tracks[i].type==="video"){videoTrack=data.tracks[i];videoTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime}else if(!audioTrack&&data.tracks[i].type==="audio"){audioTrack=data.tracks[i];audioTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime}}if(videoTrack&&!pipeline.videoSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.videoSegmentStream=new _VideoSegmentStream4(videoTrack,options);pipeline.videoSegmentStream.on("timelineStartInfo",function(timelineStartInfo){if(audioTrack){audioTrack.timelineStartInfo=timelineStartInfo;pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts)}});pipeline.videoSegmentStream.on("processedGopsInfo",self.trigger.bind(self,"gopInfo"));pipeline.videoSegmentStream.on("segmentTimingInfo",self.trigger.bind(self,"videoSegmentTimingInfo"));pipeline.videoSegmentStream.on("baseMediaDecodeTime",function(baseMediaDecodeTime){
if(audioTrack){pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime)}});pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream)}if(audioTrack&&!pipeline.audioSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream4(audioTrack,options);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream)}}});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(baseMediaDecodeTime){var pipeline=this.transmuxPipeline_;if(!options.keepOriginalTimestamps){this.baseMediaDecodeTime=baseMediaDecodeTime}if(audioTrack){audioTrack.timelineStartInfo.dts=undefined;audioTrack.timelineStartInfo.pts=undefined;trackDecodeInfo.clearDtsInfo(audioTrack);if(!options.keepOriginalTimestamps){audioTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime}if(pipeline.audioTimestampRolloverStream){pipeline.audioTimestampRolloverStream.discontinuity()}}if(videoTrack){if(pipeline.videoSegmentStream){pipeline.videoSegmentStream.gopCache_=[];pipeline.videoTimestampRolloverStream.discontinuity()}videoTrack.timelineStartInfo.dts=undefined;videoTrack.timelineStartInfo.pts=undefined;trackDecodeInfo.clearDtsInfo(videoTrack);pipeline.captionStream.reset();if(!options.keepOriginalTimestamps){videoTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime}}if(pipeline.timedMetadataTimestampRolloverStream){pipeline.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(timestamp){if(audioTrack){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp)}};this.alignGopsWith=function(gopsToAlignWith){if(videoTrack&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith)}};this.push=function(data){if(hasFlushed){var isAac=isLikelyAacData$1(data);if(isAac&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!isAac&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}hasFlushed=false}this.transmuxPipeline_.headOfPipeline.push(data)};this.flush=function(){hasFlushed=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};_Transmuxer4.prototype=new stream;var transmuxer={Transmuxer:_Transmuxer4,VideoSegmentStream:_VideoSegmentStream4,AudioSegmentStream:_AudioSegmentStream4,AUDIO_PROPERTIES:AUDIO_PROPERTIES,VIDEO_PROPERTIES:VIDEO_PROPERTIES,generateVideoSegmentTimingInfo:generateVideoSegmentTimingInfo};var inspectMp4,_textifyMp2,parseType$2=probe.parseType,parseMp4Date=function parseMp4Date(seconds){return new Date(seconds*1e3-20828448e5)},parseSampleFlags=function parseSampleFlags(flags){return{isLeading:(flags[0]&12)>>>2,dependsOn:flags[0]&3,isDependedOn:(flags[1]&192)>>>6,hasRedundancy:(flags[1]&48)>>>4,paddingValue:(flags[1]&14)>>>1,isNonSyncSample:flags[1]&1,degradationPriority:flags[2]<<8|flags[3]}},nalParse=function nalParse(avcStream){var avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result=[],i,length;for(i=0;i+4<avcStream.length;i+=length){length=avcView.getUint32(i);i+=4;if(length<=0){result.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(avcStream[i]&31){case 1:result.push("slice_layer_without_partitioning_rbsp");break;case 5:result.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:result.push("sei_rbsp");break;case 7:result.push("seq_parameter_set_rbsp");break;case 8:result.push("pic_parameter_set_rbsp");break;case 9:result.push("access_unit_delimiter_rbsp");break;default:result.push("UNKNOWN NAL - "+avcStream[i]&31);break}}return result},parse$1={avc1:function avc1(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{dataReferenceIndex:view.getUint16(6),width:view.getUint16(24),height:view.getUint16(26),horizresolution:view.getUint16(28)+view.getUint16(30)/16,vertresolution:view.getUint16(32)+view.getUint16(34)/16,frameCount:view.getUint16(40),depth:view.getUint16(74),config:inspectMp4(data.subarray(78,data.byteLength))}},avcC:function avcC(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={configurationVersion:data[0],avcProfileIndication:data[1],profileCompatibility:data[2],avcLevelIndication:data[3],lengthSizeMinusOne:data[4]&3,sps:[],pps:[]},numOfSequenceParameterSets=data[5]&31,numOfPictureParameterSets,nalSize,offset,i;offset=6;for(i=0;i<numOfSequenceParameterSets;i++){nalSize=view.getUint16(offset);offset+=2;result.sps.push(new Uint8Array(data.subarray(offset,offset+nalSize)));offset+=nalSize}numOfPictureParameterSets=data[offset];offset++;for(i=0;i<numOfPictureParameterSets;i++){nalSize=view.getUint16(offset);offset+=2;result.pps.push(new Uint8Array(data.subarray(offset,offset+nalSize)));offset+=nalSize}return result},btrt:function btrt(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{bufferSizeDB:view.getUint32(0),maxBitrate:view.getUint32(4),avgBitrate:view.getUint32(8)}},esds:function esds(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),esId:data[6]<<8|data[7],streamPriority:data[8]&31,decoderConfig:{objectProfileIndication:data[11],streamType:data[12]>>>2&63,bufferSize:data[13]<<16|data[14]<<8|data[15],maxBitrate:data[16]<<24|data[17]<<16|data[18]<<8|data[19],avgBitrate:data[20]<<24|data[21]<<16|data[22]<<8|data[23],decoderConfigDescriptor:{tag:data[24],length:data[25],audioObjectType:data[26]>>>3&31,samplingFrequencyIndex:(data[26]&7)<<1|data[27]>>>7&1,channelConfiguration:data[27]>>>3&15}}}},ftyp:function ftyp(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={majorBrand:parseType$2(data.subarray(0,4)),minorVersion:view.getUint32(4),compatibleBrands:[]},i=8;while(i<data.byteLength){result.compatibleBrands.push(parseType$2(data.subarray(i,i+4)));i+=4}return result},dinf:function dinf(data){return{boxes:inspectMp4(data)}},dref:function dref(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),dataReferences:inspectMp4(data.subarray(8))}},hdlr:function hdlr(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),handlerType:parseType$2(data.subarray(8,12)),name:""},i=8;for(i=24;i<data.byteLength;i++){if(data[i]===0){i++;break}result.name+=String.fromCharCode(data[i])}result.name=decodeURIComponent(escape(result.name));return result},mdat:function mdat(data){return{byteLength:data.byteLength,nals:nalParse(data)}},mdhd:function mdhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,language,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),language:""};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=8;result.duration=view.getUint32(i)}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=4;result.duration=view.getUint32(i)}i+=4;language=view.getUint16(i);result.language+=String.fromCharCode((language>>10)+96);result.language+=String.fromCharCode(((language&992)>>5)+96);result.language+=String.fromCharCode((language&31)+96);return result},mdia:function mdia(data){return{boxes:inspectMp4(data)}},mfhd:function mfhd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sequenceNumber:data[4]<<24|data[5]<<16|data[6]<<8|data[7]}},minf:function minf(data){return{boxes:inspectMp4(data)}},mp4a:function mp4a(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={dataReferenceIndex:view.getUint16(6),channelcount:view.getUint16(16),samplesize:view.getUint16(18),samplerate:view.getUint16(24)+view.getUint16(26)/65536};if(data.byteLength>28){result.streamDescriptor=inspectMp4(data.subarray(28))[0]}return result},moof:function moof(data){return{boxes:inspectMp4(data)}},moov:function moov(data){return{boxes:inspectMp4(data)}},mvex:function mvex(data){return{boxes:inspectMp4(data)}},mvhd:function mvhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=8;result.duration=view.getUint32(i)}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=4;result.duration=view.getUint32(i)}i+=4;result.rate=view.getUint16(i)+view.getUint16(i+2)/16;i+=4;result.volume=view.getUint8(i)+view.getUint8(i+1)/8;i+=2;i+=2;i+=2*4;result.matrix=new Uint32Array(data.subarray(i,i+9*4));i+=9*4;i+=6*4;result.nextTrackId=view.getUint32(i);return result},pdin:function pdin(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),rate:view.getUint32(4),initialDelay:view.getUint32(8)}},sdtp:function sdtp(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},i;for(i=4;i<data.byteLength;i++){result.samples.push({dependsOn:(data[i]&48)>>4,isDependedOn:(data[i]&12)>>2,hasRedundancy:data[i]&3})}return result},sidx:function sidx(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),references:[],referenceId:view.getUint32(4),timescale:view.getUint32(8),earliestPresentationTime:view.getUint32(12),firstOffset:view.getUint32(16)},referenceCount=view.getUint16(22),i;for(i=24;referenceCount;i+=12,referenceCount--){result.references.push({referenceType:(data[i]&128)>>>7,referencedSize:view.getUint32(i)&2147483647,subsegmentDuration:view.getUint32(i+4),startsWithSap:!!(data[i+8]&128),sapType:(data[i+8]&112)>>>4,sapDeltaTime:view.getUint32(i+8)&268435455})}return result},smhd:function smhd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),balance:data[4]+data[5]/256}},stbl:function stbl(data){return{boxes:inspectMp4(data)}},stco:function stco(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),chunkOffsets:[]},entryCount=view.getUint32(4),i;for(i=8;entryCount;i+=4,entryCount--){result.chunkOffsets.push(view.getUint32(i))}return result},stsc:function stsc(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),entryCount=view.getUint32(4),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleToChunks:[]},i;for(i=8;entryCount;i+=12,entryCount--){result.sampleToChunks.push({firstChunk:view.getUint32(i),samplesPerChunk:view.getUint32(i+4),sampleDescriptionIndex:view.getUint32(i+8)})}return result},stsd:function stsd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleDescriptions:inspectMp4(data.subarray(8))}},stsz:function stsz(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleSize:view.getUint32(4),entries:[]},i;for(i=12;i<data.byteLength;i+=4){result.entries.push(view.getUint32(i))}return result},stts:function stts(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),timeToSamples:[]},entryCount=view.getUint32(4),i;for(i=8;entryCount;i+=8,entryCount--){result.timeToSamples.push({sampleCount:view.getUint32(i),sampleDelta:view.getUint32(i+4)})}return result},styp:function styp(data){return parse$1.ftyp(data)},tfdt:function tfdt(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),baseMediaDecodeTime:data[4]<<24|data[5]<<16|data[6]<<8|data[7]};if(result.version===1){result.baseMediaDecodeTime*=Math.pow(2,32);result.baseMediaDecodeTime+=data[8]<<24|data[9]<<16|data[10]<<8|data[11]}return result},tfhd:function tfhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4)},baseDataOffsetPresent=result.flags[2]&1,sampleDescriptionIndexPresent=result.flags[2]&2,defaultSampleDurationPresent=result.flags[2]&8,defaultSampleSizePresent=result.flags[2]&16,defaultSampleFlagsPresent=result.flags[2]&32,durationIsEmpty=result.flags[0]&65536,defaultBaseIsMoof=result.flags[0]&131072,i;i=8;if(baseDataOffsetPresent){i+=4;result.baseDataOffset=view.getUint32(12);i+=4}if(sampleDescriptionIndexPresent){result.sampleDescriptionIndex=view.getUint32(i);i+=4}if(defaultSampleDurationPresent){result.defaultSampleDuration=view.getUint32(i);i+=4}if(defaultSampleSizePresent){result.defaultSampleSize=view.getUint32(i);i+=4}if(defaultSampleFlagsPresent){result.defaultSampleFlags=view.getUint32(i)}if(durationIsEmpty){result.durationIsEmpty=true}if(!baseDataOffsetPresent&&defaultBaseIsMoof){result.baseDataOffsetIsMoof=true}return result},tkhd:function tkhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.trackId=view.getUint32(i);i+=4;i+=8;result.duration=view.getUint32(i)}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.trackId=view.getUint32(i);i+=4;i+=4;result.duration=view.getUint32(i)}i+=4;i+=2*4;result.layer=view.getUint16(i);i+=2;result.alternateGroup=view.getUint16(i);i+=2;result.volume=view.getUint8(i)+view.getUint8(i+1)/8;i+=2;i+=2;result.matrix=new Uint32Array(data.subarray(i,i+9*4));i+=9*4;result.width=view.getUint16(i)+view.getUint16(i+2)/16;i+=4;result.height=view.getUint16(i)+view.getUint16(i+2)/16;return result},traf:function traf(data){return{boxes:inspectMp4(data)}},trak:function trak(data){return{boxes:inspectMp4(data)}},trex:function trex(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4),defaultSampleDescriptionIndex:view.getUint32(8),defaultSampleDuration:view.getUint32(12),defaultSampleSize:view.getUint32(16),sampleDependsOn:data[20]&3,sampleIsDependedOn:(data[21]&192)>>6,sampleHasRedundancy:(data[21]&48)>>4,samplePaddingValue:(data[21]&14)>>1,sampleIsDifferenceSample:!!(data[21]&1),sampleDegradationPriority:view.getUint16(22)}},trun:function trun(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},view=new DataView(data.buffer,data.byteOffset,data.byteLength),dataOffsetPresent=result.flags[2]&1,firstSampleFlagsPresent=result.flags[2]&4,sampleDurationPresent=result.flags[1]&1,sampleSizePresent=result.flags[1]&2,sampleFlagsPresent=result.flags[1]&4,sampleCompositionTimeOffsetPresent=result.flags[1]&8,sampleCount=view.getUint32(4),offset=8,sample;if(dataOffsetPresent){result.dataOffset=view.getInt32(offset);offset+=4}if(firstSampleFlagsPresent&&sampleCount){sample={flags:parseSampleFlags(data.subarray(offset,offset+4))};offset+=4;if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4}if(sampleCompositionTimeOffsetPresent){sample.compositionTimeOffset=view.getUint32(offset);offset+=4}result.samples.push(sample);sampleCount--}while(sampleCount--){sample={};if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4}if(sampleFlagsPresent){sample.flags=parseSampleFlags(data.subarray(offset,offset+4));offset+=4}if(sampleCompositionTimeOffsetPresent){sample.compositionTimeOffset=view.getUint32(offset);offset+=4}result.samples.push(sample)}return result},"url ":function url(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4))}},vmhd:function vmhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),graphicsmode:view.getUint16(4),opcolor:new Uint16Array([view.getUint16(6),view.getUint16(8),view.getUint16(10)])}}};inspectMp4=function inspectMp4(data){var i=0,result=[],view,size,type,end,box;var ab=new ArrayBuffer(data.length);var v=new Uint8Array(ab);for(var z=0;z<data.length;++z){v[z]=data[z]}view=new DataView(ab);while(i<data.byteLength){size=view.getUint32(i);type=parseType$2(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;box=(parse$1[type]||function(data){return{data:data}})(data.subarray(i+8,end));box.size=size;box.type=type;result.push(box);i=end}return result};_textifyMp2=function textifyMp4(inspectedMp4,depth){var indent;depth=depth||0;indent=new Array(depth*2+1).join(" ");return inspectedMp4.map(function(box,index){return indent+box.type+"\n"+Object.keys(box).filter(function(key){return key!=="type"&&key!=="boxes"}).map(function(key){var prefix=indent+"  "+key+": ",value=box[key];if(value instanceof Uint8Array||value instanceof Uint32Array){var bytes=Array.prototype.slice.call(new Uint8Array(value.buffer,value.byteOffset,value.byteLength)).map(function(byte){return" "+("00"+byte.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);if(!bytes){return prefix+"<>"}if(bytes.length===1){return prefix+"<"+bytes.join("").slice(1)+">"}return prefix+"<\n"+bytes.map(function(line){return indent+"  "+line}).join("\n")+"\n"+indent+"  >"}return prefix+JSON.stringify(value,null,2).split("\n").map(function(line,index){if(index===0){return line}return indent+"  "+line}).join("\n")}).join("\n")+(box.boxes?"\n"+_textifyMp2(box.boxes,depth+1):"")}).join("\n")};var mp4Inspector={inspect:inspectMp4,textify:_textifyMp2,parseTfdt:parse$1.tfdt,parseHdlr:parse$1.hdlr,parseTfhd:parse$1.tfhd,parseTrun:parse$1.trun,parseSidx:parse$1.sidx};var discardEmulationPreventionBytes$1=captionPacketParser.discardEmulationPreventionBytes;var CaptionStream$1=captionStream.CaptionStream;var mapToSample=function mapToSample(offset,samples){var approximateOffset=offset;for(var i=0;i<samples.length;i++){var sample=samples[i];if(approximateOffset<sample.size){return sample}approximateOffset-=sample.size}return null};var findSeiNals=function findSeiNals(avcStream,samples,trackId){var avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result=[],seiNal,i,length,lastMatchedSample;for(i=0;i+4<avcStream.length;i+=length){length=avcView.getUint32(i);i+=4;if(length<=0){continue}switch(avcStream[i]&31){case 6:var data=avcStream.subarray(i+1,i+1+length);var matchingSample=mapToSample(i,samples);seiNal={nalUnitType:"sei_rbsp",size:length,data:data,escapedRBSP:discardEmulationPreventionBytes$1(data),trackId:trackId};if(matchingSample){seiNal.pts=matchingSample.pts;seiNal.dts=matchingSample.dts;lastMatchedSample=matchingSample}else{seiNal.pts=lastMatchedSample.pts;seiNal.dts=lastMatchedSample.dts}result.push(seiNal);break;default:break}}return result};var parseSamples=function parseSamples(truns,baseMediaDecodeTime,tfhd){var currentDts=baseMediaDecodeTime;var defaultSampleDuration=tfhd.defaultSampleDuration||0;var defaultSampleSize=tfhd.defaultSampleSize||0;var trackId=tfhd.trackId;var allSamples=[];truns.forEach(function(trun){var trackRun=mp4Inspector.parseTrun(trun);var samples=trackRun.samples;samples.forEach(function(sample){if(sample.duration===undefined){sample.duration=defaultSampleDuration}if(sample.size===undefined){sample.size=defaultSampleSize}sample.trackId=trackId;sample.dts=currentDts;if(sample.compositionTimeOffset===undefined){sample.compositionTimeOffset=0}sample.pts=currentDts+sample.compositionTimeOffset;currentDts+=sample.duration});allSamples=allSamples.concat(samples)});return allSamples};var parseCaptionNals=function parseCaptionNals(segment,videoTrackId){var trafs=probe.findBox(segment,["moof","traf"]);var mdats=probe.findBox(segment,["mdat"]);var captionNals={};var mdatTrafPairs=[];mdats.forEach(function(mdat,index){var matchingTraf=trafs[index];mdatTrafPairs.push({mdat:mdat,traf:matchingTraf})});mdatTrafPairs.forEach(function(pair){var mdat=pair.mdat;var traf=pair.traf;var tfhd=probe.findBox(traf,["tfhd"]);var headerInfo=mp4Inspector.parseTfhd(tfhd[0]);var trackId=headerInfo.trackId;var tfdt=probe.findBox(traf,["tfdt"]);var baseMediaDecodeTime=tfdt.length>0?mp4Inspector.parseTfdt(tfdt[0]).baseMediaDecodeTime:0;var truns=probe.findBox(traf,["trun"]);var samples;var seiNals;if(videoTrackId===trackId&&truns.length>0){samples=parseSamples(truns,baseMediaDecodeTime,headerInfo);seiNals=findSeiNals(mdat,samples,trackId);if(!captionNals[trackId]){captionNals[trackId]=[]}captionNals[trackId]=captionNals[trackId].concat(seiNals)}});return captionNals};var parseEmbeddedCaptions=function parseEmbeddedCaptions(segment,trackId,timescale){var seiNals;if(!trackId){return null}seiNals=parseCaptionNals(segment,trackId);return{seiNals:seiNals[trackId],timescale:timescale}};var CaptionParser=function CaptionParser(){var isInitialized=false;var captionStream$$1;var segmentCache;var trackId;var timescale;var parsedCaptions;this.isInitialized=function(){return isInitialized};this.init=function(){captionStream$$1=new CaptionStream$1;isInitialized=true;captionStream$$1.on("data",function(event){event.startTime=event.startPts/timescale;event.endTime=event.endPts/timescale;parsedCaptions.captions.push(event);parsedCaptions.captionStreams[event.stream]=true})};this.isNewInit=function(videoTrackIds,timescales){if(videoTrackIds&&videoTrackIds.length===0||timescales&&(typeof timescales==="undefined"?"undefined":_typeof2(timescales))==="object"&&Object.keys(timescales).length===0){return false}return trackId!==videoTrackIds[0]||timescale!==timescales[trackId]};this.parse=function(segment,videoTrackIds,timescales){var parsedData;if(!this.isInitialized()){return null}else if(!videoTrackIds||!timescales){return null}else if(this.isNewInit(videoTrackIds,timescales)){trackId=videoTrackIds[0];timescale=timescales[trackId]}else if(!trackId||!timescale){segmentCache.push(segment);return null}while(segmentCache.length>0){var cachedSegment=segmentCache.shift();this.parse(cachedSegment,videoTrackIds,timescales)}parsedData=parseEmbeddedCaptions(segment,trackId,timescale);if(parsedData===null||!parsedData.seiNals){return null}this.pushNals(parsedData.seiNals);this.flushStream();return parsedCaptions};this.pushNals=function(nals){if(!this.isInitialized()||!nals||nals.length===0){return null}nals.forEach(function(nal){captionStream$$1.push(nal)})};this.flushStream=function(){if(!this.isInitialized()){return null}captionStream$$1.flush()};this.clearParsedCaptions=function(){parsedCaptions.captions=[];parsedCaptions.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}captionStream$$1.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){segmentCache=[];trackId=null;timescale=null;if(!parsedCaptions){parsedCaptions={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var captionParser=CaptionParser;var mp4={generator:mp4Generator,probe:probe,Transmuxer:transmuxer.Transmuxer,AudioSegmentStream:transmuxer.AudioSegmentStream,VideoSegmentStream:transmuxer.VideoSegmentStream,CaptionParser:captionParser};var mp4_6=mp4.CaptionParser;var parsePid=function parsePid(packet){var pid=packet[1]&31;pid<<=8;pid|=packet[2];return pid};var parsePayloadUnitStartIndicator=function parsePayloadUnitStartIndicator(packet){return!!(packet[1]&64)};var parseAdaptionField=function parseAdaptionField(packet){var offset=0;if((packet[3]&48)>>>4>1){offset+=packet[4]+1}return offset};var parseType$3=function parseType$3(packet,pmtPid){var pid=parsePid(packet);if(pid===0){return"pat"}else if(pid===pmtPid){return"pmt"}else if(pmtPid){return"pes"}return null};var parsePat=function parsePat(packet){var pusi=parsePayloadUnitStartIndicator(packet);var offset=4+parseAdaptionField(packet);if(pusi){offset+=packet[offset]+1}return(packet[offset+10]&31)<<8|packet[offset+11]};var parsePmt=function parsePmt(packet){var programMapTable={};var pusi=parsePayloadUnitStartIndicator(packet);var payloadOffset=4+parseAdaptionField(packet);if(pusi){payloadOffset+=packet[payloadOffset]+1}if(!(packet[payloadOffset+5]&1)){return}var sectionLength,tableEnd,programInfoLength;sectionLength=(packet[payloadOffset+1]&15)<<8|packet[payloadOffset+2];tableEnd=3+sectionLength-4;programInfoLength=(packet[payloadOffset+10]&15)<<8|packet[payloadOffset+11];var offset=12+programInfoLength;while(offset<tableEnd){var i=payloadOffset+offset;programMapTable[(packet[i+1]&31)<<8|packet[i+2]]=packet[i];offset+=((packet[i+3]&15)<<8|packet[i+4])+5}return programMapTable};var parsePesType=function parsePesType(packet,programMapTable){var pid=parsePid(packet);var type=programMapTable[pid];switch(type){case streamTypes.H264_STREAM_TYPE:return"video";case streamTypes.ADTS_STREAM_TYPE:return"audio";case streamTypes.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var parsePesTime=function parsePesTime(packet){var pusi=parsePayloadUnitStartIndicator(packet);if(!pusi){return null}var offset=4+parseAdaptionField(packet);if(offset>=packet.byteLength){return null}var pes=null;var ptsDtsFlags;ptsDtsFlags=packet[offset+7];if(ptsDtsFlags&192){pes={};pes.pts=(packet[offset+9]&14)<<27|(packet[offset+10]&255)<<20|(packet[offset+11]&254)<<12|(packet[offset+12]&255)<<5|(packet[offset+13]&254)>>>3;pes.pts*=4;pes.pts+=(packet[offset+13]&6)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&64){pes.dts=(packet[offset+14]&14)<<27|(packet[offset+15]&255)<<20|(packet[offset+16]&254)<<12|(packet[offset+17]&255)<<5|(packet[offset+18]&254)>>>3;pes.dts*=4;pes.dts+=(packet[offset+18]&6)>>>1}}return pes};var parseNalUnitType=function parseNalUnitType(type){switch(type){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var videoPacketContainsKeyFrame=function videoPacketContainsKeyFrame(packet){var offset=4+parseAdaptionField(packet);var frameBuffer=packet.subarray(offset);var frameI=0;var frameSyncPoint=0;var foundKeyFrame=false;var nalType;for(;frameSyncPoint<frameBuffer.byteLength-3;frameSyncPoint++){if(frameBuffer[frameSyncPoint+2]===1){frameI=frameSyncPoint+5;break}}while(frameI<frameBuffer.byteLength){switch(frameBuffer[frameI]){case 0:if(frameBuffer[frameI-1]!==0){frameI+=2;break}else if(frameBuffer[frameI-2]!==0){frameI++;break}if(frameSyncPoint+3!==frameI-2){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true}}do{frameI++}while(frameBuffer[frameI]!==1&&frameI<frameBuffer.length);frameSyncPoint=frameI-2;frameI+=3;break;case 1:if(frameBuffer[frameI-1]!==0||frameBuffer[frameI-2]!==0){frameI+=3;break}nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true}frameSyncPoint=frameI-2;frameI+=3;break;default:frameI+=3;break}}frameBuffer=frameBuffer.subarray(frameSyncPoint);frameI-=frameSyncPoint;frameSyncPoint=0;if(frameBuffer&&frameBuffer.byteLength>3){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true}}return foundKeyFrame};var probe$1={parseType:parseType$3,parsePat:parsePat,parsePmt:parsePmt,parsePayloadUnitStartIndicator:parsePayloadUnitStartIndicator,parsePesType:parsePesType,parsePesTime:parsePesTime,videoPacketContainsKeyFrame:videoPacketContainsKeyFrame};var handleRollover$1=timestampRolloverStream.handleRollover;var probe$2={};probe$2.ts=probe$1;probe$2.aac=utils;var PES_TIMESCALE=9e4,MP2T_PACKET_LENGTH$1=188,SYNC_BYTE$1=71;var parsePsi_=function parsePsi_(bytes,pmt){var startIndex=0,endIndex=MP2T_PACKET_LENGTH$1,packet,type;while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE$1&&bytes[endIndex]===SYNC_BYTE$1){packet=bytes.subarray(startIndex,endIndex);type=probe$2.ts.parseType(packet,pmt.pid);switch(type){case"pat":if(!pmt.pid){pmt.pid=probe$2.ts.parsePat(packet)}break;case"pmt":if(!pmt.table){pmt.table=probe$2.ts.parsePmt(packet)}break;default:break}if(pmt.pid&&pmt.table){return}startIndex+=MP2T_PACKET_LENGTH$1;endIndex+=MP2T_PACKET_LENGTH$1;continue}startIndex++;endIndex++}};var parseAudioPes_=function parseAudioPes_(bytes,pmt,result){var startIndex=0,endIndex=MP2T_PACKET_LENGTH$1,packet,type,pesType,pusi,parsed;var endLoop=false;while(endIndex<=bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE$1&&(bytes[endIndex]===SYNC_BYTE$1||endIndex===bytes.byteLength)){packet=bytes.subarray(startIndex,endIndex);type=probe$2.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe$2.ts.parsePesType(packet,pmt.table);pusi=probe$2.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="audio"&&pusi){parsed=probe$2.ts.parsePesTime(packet);if(parsed){parsed.type="audio";result.audio.push(parsed);endLoop=true}}break;default:break}if(endLoop){break}startIndex+=MP2T_PACKET_LENGTH$1;endIndex+=MP2T_PACKET_LENGTH$1;continue}startIndex++;endIndex++}endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH$1;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE$1&&(bytes[endIndex]===SYNC_BYTE$1||endIndex===bytes.byteLength)){packet=bytes.subarray(startIndex,endIndex);type=probe$2.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe$2.ts.parsePesType(packet,pmt.table);pusi=probe$2.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="audio"&&pusi){parsed=probe$2.ts.parsePesTime(packet);if(parsed){parsed.type="audio";result.audio.push(parsed);endLoop=true}}break;default:break}if(endLoop){break}startIndex-=MP2T_PACKET_LENGTH$1;endIndex-=MP2T_PACKET_LENGTH$1;continue}startIndex--;endIndex--}};var parseVideoPes_=function parseVideoPes_(bytes,pmt,result){var startIndex=0,endIndex=MP2T_PACKET_LENGTH$1,packet,type,pesType,pusi,parsed,frame,i,pes;var endLoop=false;var currentFrame={data:[],size:0};while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE$1&&bytes[endIndex]===SYNC_BYTE$1){packet=bytes.subarray(startIndex,endIndex);type=probe$2.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe$2.ts.parsePesType(packet,pmt.table);pusi=probe$2.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="video"){if(pusi&&!endLoop){parsed=probe$2.ts.parsePesTime(packet);if(parsed){parsed.type="video";result.video.push(parsed);endLoop=true}}if(!result.firstKeyFrame){if(pusi){if(currentFrame.size!==0){frame=new Uint8Array(currentFrame.size);i=0;while(currentFrame.data.length){pes=currentFrame.data.shift();frame.set(pes,i);i+=pes.byteLength}if(probe$2.ts.videoPacketContainsKeyFrame(frame)){result.firstKeyFrame=probe$2.ts.parsePesTime(frame);result.firstKeyFrame.type="video"}currentFrame.size=0}}currentFrame.data.push(packet);currentFrame.size+=packet.byteLength}}break;default:break}if(endLoop&&result.firstKeyFrame){break}startIndex+=MP2T_PACKET_LENGTH$1;endIndex+=MP2T_PACKET_LENGTH$1;continue}startIndex++;endIndex++}endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH$1;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE$1&&bytes[endIndex]===SYNC_BYTE$1){packet=bytes.subarray(startIndex,endIndex);type=probe$2.ts.parseType(packet,pmt.pid);switch(type){case"pes":pesType=probe$2.ts.parsePesType(packet,pmt.table);pusi=probe$2.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="video"&&pusi){
parsed=probe$2.ts.parsePesTime(packet);if(parsed){parsed.type="video";result.video.push(parsed);endLoop=true}}break;default:break}if(endLoop){break}startIndex-=MP2T_PACKET_LENGTH$1;endIndex-=MP2T_PACKET_LENGTH$1;continue}startIndex--;endIndex--}};var adjustTimestamp_=function adjustTimestamp_(segmentInfo,baseTimestamp){if(segmentInfo.audio&&segmentInfo.audio.length){var audioBaseTimestamp=baseTimestamp;if(typeof audioBaseTimestamp==="undefined"){audioBaseTimestamp=segmentInfo.audio[0].dts}segmentInfo.audio.forEach(function(info){info.dts=handleRollover$1(info.dts,audioBaseTimestamp);info.pts=handleRollover$1(info.pts,audioBaseTimestamp);info.dtsTime=info.dts/PES_TIMESCALE;info.ptsTime=info.pts/PES_TIMESCALE})}if(segmentInfo.video&&segmentInfo.video.length){var videoBaseTimestamp=baseTimestamp;if(typeof videoBaseTimestamp==="undefined"){videoBaseTimestamp=segmentInfo.video[0].dts}segmentInfo.video.forEach(function(info){info.dts=handleRollover$1(info.dts,videoBaseTimestamp);info.pts=handleRollover$1(info.pts,videoBaseTimestamp);info.dtsTime=info.dts/PES_TIMESCALE;info.ptsTime=info.pts/PES_TIMESCALE});if(segmentInfo.firstKeyFrame){var frame=segmentInfo.firstKeyFrame;frame.dts=handleRollover$1(frame.dts,videoBaseTimestamp);frame.pts=handleRollover$1(frame.pts,videoBaseTimestamp);frame.dtsTime=frame.dts/PES_TIMESCALE;frame.ptsTime=frame.dts/PES_TIMESCALE}}};var inspectAac_=function inspectAac_(bytes){var endLoop=false,audioCount=0,sampleRate=null,timestamp=null,frameSize=0,byteIndex=0,packet;while(bytes.length-byteIndex>=3){var type=probe$2.aac.parseType(bytes,byteIndex);switch(type){case"timed-metadata":if(bytes.length-byteIndex<10){endLoop=true;break}frameSize=probe$2.aac.parseId3TagSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break}if(timestamp===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);timestamp=probe$2.aac.parseAacTimestamp(packet)}byteIndex+=frameSize;break;case"audio":if(bytes.length-byteIndex<7){endLoop=true;break}frameSize=probe$2.aac.parseAdtsSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break}if(sampleRate===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);sampleRate=probe$2.aac.parseSampleRate(packet)}audioCount++;byteIndex+=frameSize;break;default:byteIndex++;break}if(endLoop){return null}}if(sampleRate===null||timestamp===null){return null}var audioTimescale=PES_TIMESCALE/sampleRate;var result={audio:[{type:"audio",dts:timestamp,pts:timestamp},{type:"audio",dts:timestamp+audioCount*1024*audioTimescale,pts:timestamp+audioCount*1024*audioTimescale}]};return result};var inspectTs_=function inspectTs_(bytes){var pmt={pid:null,table:null};var result={};parsePsi_(bytes,pmt);for(var pid in pmt.table){if(pmt.table.hasOwnProperty(pid)){var type=pmt.table[pid];switch(type){case streamTypes.H264_STREAM_TYPE:result.video=[];parseVideoPes_(bytes,pmt,result);if(result.video.length===0){delete result.video}break;case streamTypes.ADTS_STREAM_TYPE:result.audio=[];parseAudioPes_(bytes,pmt,result);if(result.audio.length===0){delete result.audio}break;default:break}}}return result};var inspect=function inspect(bytes,baseTimestamp){var isAacData=probe$2.aac.isLikelyAacData(bytes);var result;if(isAacData){result=inspectAac_(bytes)}else{result=inspectTs_(bytes)}if(!result||!result.audio&&!result.video){return null}adjustTimestamp_(result,baseTimestamp);return result};var tsInspector={inspect:inspect,parseAudioPes_:parseAudioPes_};function unpad(padded){return padded.subarray(0,padded.byteLength-padded[padded.byteLength-1])}var classCallCheck=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var inherits=function inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};var possibleConstructorReturn=function possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self};var precompute=function precompute(){var tables=[[[],[],[],[],[]],[[],[],[],[],[]]];var encTable=tables[0];var decTable=tables[1];var sbox=encTable[4];var sboxInv=decTable[4];var i=void 0;var x=void 0;var xInv=void 0;var d=[];var th=[];var x2=void 0;var x4=void 0;var x8=void 0;var s=void 0;var tEnc=void 0;var tDec=void 0;for(i=0;i<256;i++){th[(d[i]=i<<1^(i>>7)*283)^i]=i}for(x=xInv=0;!sbox[x];x^=x2||1,xInv=th[xInv]||1){s=xInv^xInv<<1^xInv<<2^xInv<<3^xInv<<4;s=s>>8^s&255^99;sbox[x]=s;sboxInv[s]=x;x8=d[x4=d[x2=d[x]]];tDec=x8*16843009^x4*65537^x2*257^x*16843008;tEnc=d[s]*257^s*16843008;for(i=0;i<4;i++){encTable[i][x]=tEnc=tEnc<<24^tEnc>>>8;decTable[i][s]=tDec=tDec<<24^tDec>>>8}}for(i=0;i<5;i++){encTable[i]=encTable[i].slice(0);decTable[i]=decTable[i].slice(0)}return tables};var aesTables=null;var AES=function(){function AES(key){classCallCheck(this,AES);if(!aesTables){aesTables=precompute()}this._tables=[[aesTables[0][0].slice(),aesTables[0][1].slice(),aesTables[0][2].slice(),aesTables[0][3].slice(),aesTables[0][4].slice()],[aesTables[1][0].slice(),aesTables[1][1].slice(),aesTables[1][2].slice(),aesTables[1][3].slice(),aesTables[1][4].slice()]];var i=void 0;var j=void 0;var tmp=void 0;var encKey=void 0;var decKey=void 0;var sbox=this._tables[0][4];var decTable=this._tables[1];var keyLen=key.length;var rcon=1;if(keyLen!==4&&keyLen!==6&&keyLen!==8){throw new Error("Invalid aes key size")}encKey=key.slice(0);decKey=[];this._key=[encKey,decKey];for(i=keyLen;i<4*keyLen+28;i++){tmp=encKey[i-1];if(i%keyLen===0||keyLen===8&&i%keyLen===4){tmp=sbox[tmp>>>24]<<24^sbox[tmp>>16&255]<<16^sbox[tmp>>8&255]<<8^sbox[tmp&255];if(i%keyLen===0){tmp=tmp<<8^tmp>>>24^rcon<<24;rcon=rcon<<1^(rcon>>7)*283}}encKey[i]=encKey[i-keyLen]^tmp}for(j=0;i;j++,i--){tmp=encKey[j&3?i:i-4];if(i<=4||j<4){decKey[j]=tmp}else{decKey[j]=decTable[0][sbox[tmp>>>24]]^decTable[1][sbox[tmp>>16&255]]^decTable[2][sbox[tmp>>8&255]]^decTable[3][sbox[tmp&255]]}}}AES.prototype.decrypt=function decrypt(encrypted0,encrypted1,encrypted2,encrypted3,out,offset){var key=this._key[1];var a=encrypted0^key[0];var b=encrypted3^key[1];var c=encrypted2^key[2];var d=encrypted1^key[3];var a2=void 0;var b2=void 0;var c2=void 0;var nInnerRounds=key.length/4-2;var i=void 0;var kIndex=4;var table=this._tables[1];var table0=table[0];var table1=table[1];var table2=table[2];var table3=table[3];var sbox=table[4];for(i=0;i<nInnerRounds;i++){a2=table0[a>>>24]^table1[b>>16&255]^table2[c>>8&255]^table3[d&255]^key[kIndex];b2=table0[b>>>24]^table1[c>>16&255]^table2[d>>8&255]^table3[a&255]^key[kIndex+1];c2=table0[c>>>24]^table1[d>>16&255]^table2[a>>8&255]^table3[b&255]^key[kIndex+2];d=table0[d>>>24]^table1[a>>16&255]^table2[b>>8&255]^table3[c&255]^key[kIndex+3];kIndex+=4;a=a2;b=b2;c=c2}for(i=0;i<4;i++){out[(3&-i)+offset]=sbox[a>>>24]<<24^sbox[b>>16&255]<<16^sbox[c>>8&255]<<8^sbox[d&255]^key[kIndex++];a2=a;a=b;b=c;c=d;d=a2}};return AES}();var Stream$2=function(){function Stream(){classCallCheck(this,Stream);this.listeners={}}Stream.prototype.on=function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[]}this.listeners[type].push(listener)};Stream.prototype.off=function off(type,listener){if(!this.listeners[type]){return false}var index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1};Stream.prototype.trigger=function trigger(type){var callbacks=this.listeners[type];if(!callbacks){return}if(arguments.length===2){var length=callbacks.length;for(var i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{var args=Array.prototype.slice.call(arguments,1);var _length=callbacks.length;for(var _i=0;_i<_length;++_i){callbacks[_i].apply(this,args)}}};Stream.prototype.dispose=function dispose(){this.listeners={}};Stream.prototype.pipe=function pipe(destination){this.on("data",function(data){destination.push(data)})};return Stream}();var AsyncStream=function(_Stream){inherits(AsyncStream,_Stream);function AsyncStream(){classCallCheck(this,AsyncStream);var _this=possibleConstructorReturn(this,_Stream.call(this,Stream$2));_this.jobs=[];_this.delay=1;_this.timeout_=null;return _this}AsyncStream.prototype.processJob_=function processJob_(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};AsyncStream.prototype.push=function push(job){this.jobs.push(job);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return AsyncStream}(Stream$2);var ntoh=function ntoh(word){return word<<24|(word&65280)<<8|(word&16711680)>>8|word>>>24};var decrypt=function decrypt(encrypted,key,initVector){var encrypted32=new Int32Array(encrypted.buffer,encrypted.byteOffset,encrypted.byteLength>>2);var decipher=new AES(Array.prototype.slice.call(key));var decrypted=new Uint8Array(encrypted.byteLength);var decrypted32=new Int32Array(decrypted.buffer);var init0=void 0;var init1=void 0;var init2=void 0;var init3=void 0;var encrypted0=void 0;var encrypted1=void 0;var encrypted2=void 0;var encrypted3=void 0;var wordIx=void 0;init0=initVector[0];init1=initVector[1];init2=initVector[2];init3=initVector[3];for(wordIx=0;wordIx<encrypted32.length;wordIx+=4){encrypted0=ntoh(encrypted32[wordIx]);encrypted1=ntoh(encrypted32[wordIx+1]);encrypted2=ntoh(encrypted32[wordIx+2]);encrypted3=ntoh(encrypted32[wordIx+3]);decipher.decrypt(encrypted0,encrypted1,encrypted2,encrypted3,decrypted32,wordIx);decrypted32[wordIx]=ntoh(decrypted32[wordIx]^init0);decrypted32[wordIx+1]=ntoh(decrypted32[wordIx+1]^init1);decrypted32[wordIx+2]=ntoh(decrypted32[wordIx+2]^init2);decrypted32[wordIx+3]=ntoh(decrypted32[wordIx+3]^init3);init0=encrypted0;init1=encrypted1;init2=encrypted2;init3=encrypted3}return decrypted};var Decrypter=function(){function Decrypter(encrypted,key,initVector,done){classCallCheck(this,Decrypter);var step=Decrypter.STEP;var encrypted32=new Int32Array(encrypted.buffer);var decrypted=new Uint8Array(encrypted.byteLength);var i=0;this.asyncStream_=new AsyncStream;this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));for(i=step;i<encrypted32.length;i+=step){initVector=new Uint32Array([ntoh(encrypted32[i-4]),ntoh(encrypted32[i-3]),ntoh(encrypted32[i-2]),ntoh(encrypted32[i-1])]);this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted))}this.asyncStream_.push(function(){done(null,unpad(decrypted))})}Decrypter.prototype.decryptChunk_=function decryptChunk_(encrypted,key,initVector,decrypted){return function(){var bytes=decrypt(encrypted,key,initVector);decrypted.set(bytes,encrypted.byteOffset)}};createClass(Decrypter,null,[{key:"STEP",get:function get$$1(){return 32e3}}]);return Decrypter}();var version$2="7.5.4";function _inheritsLoose$1(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _assertThisInitialized$1(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _taggedTemplateLiteralLoose(strings,raw){if(!raw){raw=strings.slice(0)}strings.raw=raw;return strings}var history=[];var LogByTypeFactory=function LogByTypeFactory(name,log){return function(type,level,args){var lvl=log.levels[level];var lvlRegExp=new RegExp("^("+lvl+")$");if(type!=="log"){args.unshift(type.toUpperCase()+":")}args.unshift(name+":");if(history){history.push([].concat(args))}if(!window_1.console){return}var fn=window_1.console[type];if(!fn&&type==="debug"){fn=window_1.console.info||window_1.console.log}if(!fn||!lvl||!lvlRegExp.test(type)){return}fn[Array.isArray(args)?"apply":"call"](window_1.console,args)}};function createLogger(name){var level="info";var logByType;var log=function log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}logByType("log",level,args)};logByType=LogByTypeFactory(name,log);log.createLogger=function(subname){return createLogger(name+": "+subname)};log.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:level};log.level=function(lvl){if(typeof lvl==="string"){if(!log.levels.hasOwnProperty(lvl)){throw new Error('"'+lvl+'" in not a valid log level')}level=lvl}return level};log.history=function(){return history?[].concat(history):[]};log.history.filter=function(fname){return(history||[]).filter(function(historyItem){return new RegExp(".*"+fname+".*").test(historyItem[0])})};log.history.clear=function(){if(history){history.length=0}};log.history.disable=function(){if(history!==null){history.length=0;history=null}};log.history.enable=function(){if(history===null){history=[]}};log.error=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return logByType("error",level,args)};log.warn=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}return logByType("warn",level,args)};log.debug=function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}return logByType("debug",level,args)};return log}var log=createLogger("VIDEOJS");var createLogger$1=log.createLogger;var toString$1=Object.prototype.toString;var keys=function keys(object){return isObject$1(object)?Object.keys(object):[]};function each(object,fn){keys(object).forEach(function(key){return fn(object[key],key)})}function reduce(object,fn,initial){if(initial===void 0){initial=0}return keys(object).reduce(function(accum,key){return fn(accum,object[key],key)},initial)}function assign(target){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}if(Object.assign){return Object.assign.apply(Object,[target].concat(sources))}sources.forEach(function(source){if(!source){return}each(source,function(value,key){target[key]=value})});return target}function isObject$1(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))==="object"}function isPlain(value){return isObject$1(value)&&toString$1.call(value)==="[object Object]"&&value.constructor===Object}function computedStyle(el,prop){if(!el||!prop){return""}if(typeof window_1.getComputedStyle==="function"){var cs=window_1.getComputedStyle(el);return cs?cs[prop]:""}return""}function _templateObject(){var data=_taggedTemplateLiteralLoose(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);_templateObject=function _templateObject(){return data};return data}function isNonBlankString(str){return typeof str==="string"&&/\S/.test(str)}function throwIfWhitespace(str){if(/\s/.test(str)){throw new Error("class has illegal whitespace characters")}}function classRegExp(className){return new RegExp("(^|\\s)"+className+"($|\\s)")}function isReal(){return document_1===window_1.document}function isEl(value){return isObject$1(value)&&value.nodeType===1}function isInFrame(){try{return window_1.parent!==window_1.self}catch(x){return true}}function createQuerier(method){return function(selector,context){if(!isNonBlankString(selector)){return document_1[method](null)}if(isNonBlankString(context)){context=document_1.querySelector(context)}var ctx=isEl(context)?context:document_1;return ctx[method]&&ctx[method](selector)}}function createEl(tagName,properties,attributes,content){if(tagName===void 0){tagName="div"}if(properties===void 0){properties={}}if(attributes===void 0){attributes={}}var el=document_1.createElement(tagName);Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];if(propName.indexOf("aria-")!==-1||propName==="role"||propName==="type"){log.warn(tsml(_templateObject(),propName,val));el.setAttribute(propName,val)}else if(propName==="textContent"){textContent(el,val)}else{el[propName]=val}});Object.getOwnPropertyNames(attributes).forEach(function(attrName){el.setAttribute(attrName,attributes[attrName])});if(content){appendContent(el,content)}return el}function textContent(el,text){if(typeof el.textContent==="undefined"){el.innerText=text}else{el.textContent=text}return el}function prependTo(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild)}else{parent.appendChild(child)}}function hasClass(element,classToCheck){throwIfWhitespace(classToCheck);if(element.classList){return element.classList.contains(classToCheck)}return classRegExp(classToCheck).test(element.className)}function addClass(element,classToAdd){if(element.classList){element.classList.add(classToAdd)}else if(!hasClass(element,classToAdd)){element.className=(element.className+" "+classToAdd).trim()}return element}function removeClass(element,classToRemove){if(element.classList){element.classList.remove(classToRemove)}else{throwIfWhitespace(classToRemove);element.className=element.className.split(/\s+/).filter(function(c){return c!==classToRemove}).join(" ")}return element}function toggleClass(element,classToToggle,predicate){var has=hasClass(element,classToToggle);if(typeof predicate==="function"){predicate=predicate(element,classToToggle)}if(typeof predicate!=="boolean"){predicate=!has}if(predicate===has){return}if(predicate){addClass(element,classToToggle)}else{removeClass(element,classToToggle)}return element}function setAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];if(attrValue===null||typeof attrValue==="undefined"||attrValue===false){el.removeAttribute(attrName)}else{el.setAttribute(attrName,attrValue===true?"":attrValue)}})}function getAttributes(tag){var obj={};var knownBooleans=","+"autoplay,controls,playsinline,loop,muted,default,defaultMuted"+",";if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;var attrVal=attrs[i].value;if(typeof tag[attrName]==="boolean"||knownBooleans.indexOf(","+attrName+",")!==-1){attrVal=attrVal!==null?true:false}obj[attrName]=attrVal}}return obj}function getAttribute(el,attribute){return el.getAttribute(attribute)}function setAttribute(el,attribute,value){el.setAttribute(attribute,value)}function removeAttribute(el,attribute){el.removeAttribute(attribute)}function blockTextSelection(){document_1.body.focus();document_1.onselectstart=function(){return false}}function unblockTextSelection(){document_1.onselectstart=function(){return true}}function getBoundingClientRect(el){if(el&&el.getBoundingClientRect&&el.parentNode){var rect=el.getBoundingClientRect();var result={};["bottom","height","left","right","top","width"].forEach(function(k){if(rect[k]!==undefined){result[k]=rect[k]}});if(!result.height){result.height=parseFloat(computedStyle(el,"height"))}if(!result.width){result.width=parseFloat(computedStyle(el,"width"))}return result}}function findPosition(el){var box;if(el.getBoundingClientRect&&el.parentNode){box=el.getBoundingClientRect()}if(!box){return{left:0,top:0}}var docEl=document_1.documentElement;var body=document_1.body;var clientLeft=docEl.clientLeft||body.clientLeft||0;var scrollLeft=window_1.pageXOffset||body.scrollLeft;var left=box.left+scrollLeft-clientLeft;var clientTop=docEl.clientTop||body.clientTop||0;var scrollTop=window_1.pageYOffset||body.scrollTop;var top=box.top+scrollTop-clientTop;return{left:Math.round(left),top:Math.round(top)}}function getPointerPosition(el,event){var position={};var box=findPosition(el);var boxW=el.offsetWidth;var boxH=el.offsetHeight;var boxY=box.top;var boxX=box.left;var pageY=event.pageY;var pageX=event.pageX;if(event.changedTouches){pageX=event.changedTouches[0].pageX;pageY=event.changedTouches[0].pageY}position.y=Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH));position.x=Math.max(0,Math.min(1,(pageX-boxX)/boxW));return position}function isTextNode(value){return isObject$1(value)&&value.nodeType===3}function emptyEl(el){while(el.firstChild){el.removeChild(el.firstChild)}return el}function normalizeContent(content){if(typeof content==="function"){content=content()}return(Array.isArray(content)?content:[content]).map(function(value){if(typeof value==="function"){value=value()}if(isEl(value)||isTextNode(value)){return value}if(typeof value==="string"&&/\S/.test(value)){return document_1.createTextNode(value)}}).filter(function(value){return value})}function appendContent(el,content){normalizeContent(content).forEach(function(node){return el.appendChild(node)});return el}function insertContent(el,content){return appendContent(emptyEl(el),content)}function isSingleLeftClick(event){if(event.button===undefined&&event.buttons===undefined){return true}if(event.button===0&&event.buttons===undefined){return true}if(event.button!==0||event.buttons!==1){return false}return true}var $=createQuerier("querySelector");var $$=createQuerier("querySelectorAll");var Dom=Object.freeze({isReal:isReal,isEl:isEl,isInFrame:isInFrame,createEl:createEl,textContent:textContent,prependTo:prependTo,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,setAttributes:setAttributes,getAttributes:getAttributes,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,blockTextSelection:blockTextSelection,unblockTextSelection:unblockTextSelection,getBoundingClientRect:getBoundingClientRect,findPosition:findPosition,getPointerPosition:getPointerPosition,isTextNode:isTextNode,emptyEl:emptyEl,normalizeContent:normalizeContent,appendContent:appendContent,insertContent:insertContent,isSingleLeftClick:isSingleLeftClick,$:$,$$:$$});var _guid=1;function newGUID(){return _guid++}var elData={};var elIdAttr="vdata"+(new Date).getTime();function getData(el){var id=el[elIdAttr];if(!id){id=el[elIdAttr]=newGUID()}if(!elData[id]){elData[id]={}}return elData[id]}function hasData(el){var id=el[elIdAttr];if(!id){return false}return!!Object.getOwnPropertyNames(elData[id]).length}function removeData(el){var id=el[elIdAttr];if(!id){return}delete elData[id];try{delete el[elIdAttr]}catch(e){if(el.removeAttribute){el.removeAttribute(elIdAttr)}else{el[elIdAttr]=null}}}function _cleanUpEvents(elem,type){var data=getData(elem);if(data.handlers[type].length===0){delete data.handlers[type];if(elem.removeEventListener){elem.removeEventListener(type,data.dispatcher,false)}else if(elem.detachEvent){elem.detachEvent("on"+type,data.dispatcher)}}if(Object.getOwnPropertyNames(data.handlers).length<=0){delete data.handlers;delete data.dispatcher;delete data.disabled}if(Object.getOwnPropertyNames(data).length===0){removeData(elem)}}function _handleMultipleEvents(fn,elem,types,callback){types.forEach(function(type){fn(elem,type,callback)})}function fixEvent(event){function returnTrue(){return true}function returnFalse(){return false}if(!event||!event.isPropagationStopped){var old=event||window_1.event;event={};for(var key in old){if(key!=="layerX"&&key!=="layerY"&&key!=="keyLocation"&&key!=="webkitMovementX"&&key!=="webkitMovementY"){if(!(key==="returnValue"&&old.preventDefault)){event[key]=old[key]}}}if(!event.target){event.target=event.srcElement||document_1}if(!event.relatedTarget){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement}event.preventDefault=function(){if(old.preventDefault){old.preventDefault()}event.returnValue=false;old.returnValue=false;event.defaultPrevented=true};event.defaultPrevented=false;event.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation()}event.cancelBubble=true;old.cancelBubble=true;event.isPropagationStopped=returnTrue};event.isPropagationStopped=returnFalse;event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation()}event.isImmediatePropagationStopped=returnTrue;event.stopPropagation()};event.isImmediatePropagationStopped=returnFalse;if(event.clientX!==null&&event.clientX!==undefined){var doc=document_1.documentElement;var body=document_1.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}event.which=event.charCode||event.keyCode;if(event.button!==null&&event.button!==undefined){event.button=event.button&1?0:event.button&4?1:event.button&2?2:0}}return event}var _supportsPassive=false;(function(){try{var opts=Object.defineProperty({},"passive",{get:function get(){_supportsPassive=true}});window_1.addEventListener("test",null,opts);window_1.removeEventListener("test",null,opts)}catch(e){}})();var passiveEvents=["touchstart","touchmove"];function on(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(on,elem,type,fn)}var data=getData(elem);if(!data.handlers){data.handlers={}}if(!data.handlers[type]){data.handlers[type]=[]}if(!fn.guid){fn.guid=newGUID()}data.handlers[type].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event,hash){if(data.disabled){return}event=fixEvent(event);var handlers=data.handlers[event.type];if(handlers){var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++){if(event.isImmediatePropagationStopped()){break}else{try{handlersCopy[m].call(elem,event,hash)}catch(e){log.error(e)}}}}}}if(data.handlers[type].length===1){if(elem.addEventListener){var options=false;if(_supportsPassive&&passiveEvents.indexOf(type)>-1){options={passive:true}}elem.addEventListener(type,data.dispatcher,options)}else if(elem.attachEvent){elem.attachEvent("on"+type,data.dispatcher)}}}function off(elem,type,fn){if(!hasData(elem)){return}var data=getData(elem);if(!data.handlers){return}if(Array.isArray(type)){return _handleMultipleEvents(off,elem,type,fn)}var removeType=function removeType(el,t){data.handlers[t]=[];_cleanUpEvents(el,t)};if(type===undefined){for(var t in data.handlers){if(Object.prototype.hasOwnProperty.call(data.handlers||{},t)){removeType(elem,t)}}return}var handlers=data.handlers[type];if(!handlers){return}if(!fn){removeType(elem,type);return}if(fn.guid){for(var n=0;n<handlers.length;n++){if(handlers[n].guid===fn.guid){handlers.splice(n--,1)}}}_cleanUpEvents(elem,type)}function trigger(elem,event,hash){var elemData=hasData(elem)?getData(elem):{};var parent=elem.parentNode||elem.ownerDocument;if(typeof event==="string"){event={type:event,target:elem}}else if(!event.target){event.target=elem}event=fixEvent(event);if(elemData.dispatcher){elemData.dispatcher.call(elem,event,hash)}if(parent&&!event.isPropagationStopped()&&event.bubbles===true){trigger.call(null,parent,event,hash)}else if(!parent&&!event.defaultPrevented&&event.target&&event.target[event.type]){var targetData=getData(event.target);if(event.target[event.type]){targetData.disabled=true;if(typeof event.target[event.type]==="function"){event.target[event.type]()}targetData.disabled=false}}return!event.defaultPrevented}function one(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(one,elem,type,fn)}var func=function func(){off(elem,type,func);fn.apply(this,arguments)};func.guid=fn.guid=fn.guid||newGUID();on(elem,type,func)}var Events=Object.freeze({fixEvent:fixEvent,on:on,off:off,trigger:trigger,one:one});var _windowLoaded=false;var videojs;var autoSetup=function autoSetup(){if(!isReal()||videojs.options.autoSetup===false){return}var vids=Array.prototype.slice.call(document_1.getElementsByTagName("video"));var audios=Array.prototype.slice.call(document_1.getElementsByTagName("audio"));var divs=Array.prototype.slice.call(document_1.getElementsByTagName("video-js"));var mediaEls=vids.concat(audios,divs);if(mediaEls&&mediaEls.length>0){for(var i=0,e=mediaEls.length;i<e;i++){var mediaEl=mediaEls[i];if(mediaEl&&mediaEl.getAttribute){if(mediaEl.player===undefined){var options=mediaEl.getAttribute("data-setup");if(options!==null){videojs(mediaEl)}}}else{autoSetupTimeout(1);break}}}else if(!_windowLoaded){autoSetupTimeout(1)}};function autoSetupTimeout(wait,vjs){if(vjs){videojs=vjs}window_1.setTimeout(autoSetup,wait)}if(isReal()&&document_1.readyState==="complete"){_windowLoaded=true}else{one(window_1,"load",function(){_windowLoaded=true})}var createStyleElement=function createStyleElement(className){var style=document_1.createElement("style");style.className=className;return style};var setTextContent=function setTextContent(el,content){if(el.styleSheet){el.styleSheet.cssText=content}else{el.textContent=content}};var bind=function bind(context,fn,uid){if(!fn.guid){fn.guid=newGUID()}var bound=function bound(){return fn.apply(context,arguments)};bound.guid=uid?uid+"_"+fn.guid:fn.guid;return bound};var throttle=function throttle(fn,wait){var last=Date.now();var throttled=function throttled(){var now=Date.now();if(now-last>=wait){fn.apply(void 0,arguments);last=now}};return throttled};var debounce=function debounce(func,wait,immediate,context){if(context===void 0){context=window_1}var timeout;var cancel=function cancel(){context.clearTimeout(timeout);timeout=null};var debounced=function debounced(){var self=this;var args=arguments;var _later=function later(){timeout=null;_later=null;if(!immediate){func.apply(self,args)}};if(!timeout&&immediate){func.apply(self,args)}context.clearTimeout(timeout);timeout=context.setTimeout(_later,wait)};debounced.cancel=cancel;return debounced};var EventTarget=function EventTarget(){};EventTarget.prototype.allowedEvents_={};EventTarget.prototype.on=function(type,fn){var ael=this.addEventListener;this.addEventListener=function(){};on(this,type,fn);this.addEventListener=ael};EventTarget.prototype.addEventListener=EventTarget.prototype.on;EventTarget.prototype.off=function(type,fn){off(this,type,fn)};EventTarget.prototype.removeEventListener=EventTarget.prototype.off;EventTarget.prototype.one=function(type,fn){var ael=this.addEventListener;this.addEventListener=function(){};one(this,type,fn);this.addEventListener=ael};EventTarget.prototype.trigger=function(event){var type=event.type||event;if(typeof event==="string"){
event={type:type}}event=fixEvent(event);if(this.allowedEvents_[type]&&this["on"+type]){this["on"+type](event)}trigger(this,event)};EventTarget.prototype.dispatchEvent=EventTarget.prototype.trigger;var EVENT_MAP;EventTarget.prototype.queueTrigger=function(event){var _this=this;if(!EVENT_MAP){EVENT_MAP=new Map}var type=event.type||event;var map=EVENT_MAP.get(this);if(!map){map=new Map;EVENT_MAP.set(this,map)}var oldTimeout=map.get(type);map.delete(type);window_1.clearTimeout(oldTimeout);var timeout=window_1.setTimeout(function(){if(map.size===0){map=null;EVENT_MAP.delete(_this)}_this.trigger(event)},0);map.set(type,timeout)};var isEvented=function isEvented(object){return object instanceof EventTarget||!!object.eventBusEl_&&["on","one","off","trigger"].every(function(k){return typeof object[k]==="function"})};var addEventedCallback=function addEventedCallback(target,callback){if(isEvented(target)){callback()}else{if(!target.eventedCallbacks){target.eventedCallbacks=[]}target.eventedCallbacks.push(callback)}};var isValidEventType=function isValidEventType(type){return typeof type==="string"&&/\S/.test(type)||Array.isArray(type)&&!!type.length};var validateTarget=function validateTarget(target){if(!target.nodeName&&!isEvented(target)){throw new Error("Invalid target; must be a DOM node or evented object.")}};var validateEventType=function validateEventType(type){if(!isValidEventType(type)){throw new Error("Invalid event type; must be a non-empty string or array.")}};var validateListener=function validateListener(listener){if(typeof listener!=="function"){throw new Error("Invalid listener; must be a function.")}};var normalizeListenArgs=function normalizeListenArgs(self,args){var isTargetingSelf=args.length<3||args[0]===self||args[0]===self.eventBusEl_;var target;var type;var listener;if(isTargetingSelf){target=self.eventBusEl_;if(args.length>=3){args.shift()}type=args[0];listener=args[1]}else{target=args[0];type=args[1];listener=args[2]}validateTarget(target);validateEventType(type);validateListener(listener);listener=bind(self,listener);return{isTargetingSelf:isTargetingSelf,target:target,type:type,listener:listener}};var listen=function listen(target,method,type,listener){validateTarget(target);if(target.nodeName){Events[method](target,type,listener)}else{target[method](type,listener)}};var EventedMixin={on:function on$$1(){var _this=this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var _normalizeListenArgs=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs.isTargetingSelf,target=_normalizeListenArgs.target,type=_normalizeListenArgs.type,listener=_normalizeListenArgs.listener;listen(target,"on",type,listener);if(!isTargetingSelf){var removeListenerOnDispose=function removeListenerOnDispose(){return _this.off(target,type,listener)};removeListenerOnDispose.guid=listener.guid;var removeRemoverOnTargetDispose=function removeRemoverOnTargetDispose(){return _this.off("dispose",removeListenerOnDispose)};removeRemoverOnTargetDispose.guid=listener.guid;listen(this,"on","dispose",removeListenerOnDispose);listen(target,"on","dispose",removeRemoverOnTargetDispose)}},one:function one$$1(){var _this2=this;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var _normalizeListenArgs2=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs2.isTargetingSelf,target=_normalizeListenArgs2.target,type=_normalizeListenArgs2.type,listener=_normalizeListenArgs2.listener;if(isTargetingSelf){listen(target,"one",type,listener)}else{var wrapper=function wrapper(){_this2.off(target,type,wrapper);for(var _len3=arguments.length,largs=new Array(_len3),_key3=0;_key3<_len3;_key3++){largs[_key3]=arguments[_key3]}listener.apply(null,largs)};wrapper.guid=listener.guid;listen(target,"one",type,wrapper)}},off:function off$$1(targetOrType,typeOrListener,listener){if(!targetOrType||isValidEventType(targetOrType)){off(this.eventBusEl_,targetOrType,typeOrListener)}else{var target=targetOrType;var type=typeOrListener;validateTarget(target);validateEventType(type);validateListener(listener);listener=bind(this,listener);this.off("dispose",listener);if(target.nodeName){off(target,type,listener);off(target,"dispose",listener)}else if(isEvented(target)){target.off(type,listener);target.off("dispose",listener)}}},trigger:function trigger$$1(event,hash){return trigger(this.eventBusEl_,event,hash)}};function evented(target,options){if(options===void 0){options={}}var _options=options,eventBusKey=_options.eventBusKey;if(eventBusKey){if(!target[eventBusKey].nodeName){throw new Error('The eventBusKey "'+eventBusKey+'" does not refer to an element.')}target.eventBusEl_=target[eventBusKey]}else{target.eventBusEl_=createEl("span",{className:"vjs-event-bus"})}assign(target,EventedMixin);if(target.eventedCallbacks){target.eventedCallbacks.forEach(function(callback){callback()})}target.on("dispose",function(){target.off();window_1.setTimeout(function(){target.eventBusEl_=null},0)});return target}var StatefulMixin={state:{},setState:function setState(stateUpdates){var _this=this;if(typeof stateUpdates==="function"){stateUpdates=stateUpdates()}var changes;each(stateUpdates,function(value,key){if(_this.state[key]!==value){changes=changes||{};changes[key]={from:_this.state[key],to:value}}_this.state[key]=value});if(changes&&isEvented(this)){this.trigger({changes:changes,type:"statechanged"})}return changes}};function stateful(target,defaultState){assign(target,StatefulMixin);target.state=assign({},target.state,defaultState);if(typeof target.handleStateChanged==="function"&&isEvented(target)){target.on("statechanged",target.handleStateChanged)}return target}function toTitleCase(string){if(typeof string!=="string"){return string}return string.charAt(0).toUpperCase()+string.slice(1)}function titleCaseEquals(str1,str2){return toTitleCase(str1)===toTitleCase(str2)}function mergeOptions(){var result={};for(var _len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++){sources[_key]=arguments[_key]}sources.forEach(function(source){if(!source){return}each(source,function(value,key){if(!isPlain(value)){result[key]=value;return}if(!isPlain(result[key])){result[key]={}}result[key]=mergeOptions(result[key],value)})});return result}var Component=function(){function Component(player,options,ready){if(!player&&this.play){this.player_=player=this}else{this.player_=player}this.parentComponent_=null;this.options_=mergeOptions({},this.options_);options=this.options_=mergeOptions(this.options_,options);this.id_=options.id||options.el&&options.el.id;if(!this.id_){var id=player&&player.id&&player.id()||"no_player";this.id_=id+"_component_"+newGUID()}this.name_=options.name||null;if(options.el){this.el_=options.el}else if(options.createEl!==false){this.el_=this.createEl()}if(options.evented!==false){evented(this,{eventBusKey:this.el_?"el_":null})}stateful(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};if(options.initChildren!==false){this.initChildren()}this.ready(ready);if(options.reportTouchActivity!==false){this.enableTouchActivity()}}var _proto=Component.prototype;_proto.dispose=function dispose(){this.trigger({type:"dispose",bubbles:false});if(this.children_){for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i].dispose){this.children_[i].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}removeData(this.el_);this.el_=null}this.player_=null};_proto.player=function player(){return this.player_};_proto.options=function options(obj){log.warn("this.options() has been deprecated and will be moved to the constructor in 6.0");if(!obj){return this.options_}this.options_=mergeOptions(this.options_,obj);return this.options_};_proto.el=function el(){return this.el_};_proto.createEl=function createEl$$1(tagName,properties,attributes){return createEl(tagName,properties,attributes)};_proto.localize=function localize(string,tokens,defaultValue){if(defaultValue===void 0){defaultValue=string}var code=this.player_.language&&this.player_.language();var languages=this.player_.languages&&this.player_.languages();var language=languages&&languages[code];var primaryCode=code&&code.split("-")[0];var primaryLang=languages&&languages[primaryCode];var localizedString=defaultValue;if(language&&language[string]){localizedString=language[string]}else if(primaryLang&&primaryLang[string]){localizedString=primaryLang[string]}if(tokens){localizedString=localizedString.replace(/\{(\d+)\}/g,function(match,index){var value=tokens[index-1];var ret=value;if(typeof value==="undefined"){ret=match}return ret})}return localizedString};_proto.contentEl=function contentEl(){return this.contentEl_||this.el_};_proto.id=function id(){return this.id_};_proto.name=function name(){return this.name_};_proto.children=function children(){return this.children_};_proto.getChildById=function getChildById(id){return this.childIndex_[id]};_proto.getChild=function getChild(name){if(!name){return}name=toTitleCase(name);return this.childNameIndex_[name]};_proto.addChild=function addChild(child,options,index){if(options===void 0){options={}}if(index===void 0){index=this.children_.length}var component;var componentName;if(typeof child==="string"){componentName=toTitleCase(child);var componentClassName=options.componentClass||componentName;options.name=componentName;var ComponentClass=Component.getComponent(componentClassName);if(!ComponentClass){throw new Error("Component "+componentClassName+" does not exist")}if(typeof ComponentClass!=="function"){return null}component=new ComponentClass(this.player_||this,options)}else{component=child}if(component.parentComponent_){component.parentComponent_.removeChild(component)}this.children_.splice(index,0,component);component.parentComponent_=this;if(typeof component.id==="function"){this.childIndex_[component.id()]=component}componentName=componentName||component.name&&toTitleCase(component.name());if(componentName){this.childNameIndex_[componentName]=component}if(typeof component.el==="function"&&component.el()){var childNodes=this.contentEl().children;var refNode=childNodes[index]||null;this.contentEl().insertBefore(component.el(),refNode)}return component};_proto.removeChild=function removeChild(component){if(typeof component==="string"){component=this.getChild(component)}if(!component||!this.children_){return}var childFound=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break}}if(!childFound){return}component.parentComponent_=null;this.childIndex_[component.id()]=null;this.childNameIndex_[component.name()]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el())}};_proto.initChildren=function initChildren(){var _this=this;var children=this.options_.children;if(children){var parentOptions=this.options_;var handleAdd=function handleAdd(child){var name=child.name;var opts=child.opts;if(parentOptions[name]!==undefined){opts=parentOptions[name]}if(opts===false){return}if(opts===true){opts={}}opts.playerOptions=_this.options_.playerOptions;var newChild=_this.addChild(name,opts);if(newChild){_this[name]=newChild}};var workingChildren;var Tech=Component.getComponent("Tech");if(Array.isArray(children)){workingChildren=children}else{workingChildren=Object.keys(children)}workingChildren.concat(Object.keys(this.options_).filter(function(child){return!workingChildren.some(function(wchild){if(typeof wchild==="string"){return child===wchild}return child===wchild.name})})).map(function(child){var name;var opts;if(typeof child==="string"){name=child;opts=children[name]||_this.options_[name]||{}}else{name=child.name;opts=child}return{name:name,opts:opts}}).filter(function(child){var c=Component.getComponent(child.opts.componentClass||toTitleCase(child.name));return c&&!Tech.isTech(c)}).forEach(handleAdd)}};_proto.buildCSSClass=function buildCSSClass(){return""};_proto.ready=function ready(fn,sync){if(sync===void 0){sync=false}if(!fn){return}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(fn);return}if(sync){fn.call(this)}else{this.setTimeout(fn,1)}};_proto.triggerReady=function triggerReady(){this.isReady_=true;this.setTimeout(function(){var readyQueue=this.readyQueue_;this.readyQueue_=[];if(readyQueue&&readyQueue.length>0){readyQueue.forEach(function(fn){fn.call(this)},this)}this.trigger("ready")},1)};_proto.$=function $$$1(selector,context){return $(selector,context||this.contentEl())};_proto.$$=function $$$$1(selector,context){return $$(selector,context||this.contentEl())};_proto.hasClass=function hasClass$$1(classToCheck){return hasClass(this.el_,classToCheck)};_proto.addClass=function addClass$$1(classToAdd){addClass(this.el_,classToAdd)};_proto.removeClass=function removeClass$$1(classToRemove){removeClass(this.el_,classToRemove)};_proto.toggleClass=function toggleClass$$1(classToToggle,predicate){toggleClass(this.el_,classToToggle,predicate)};_proto.show=function show(){this.removeClass("vjs-hidden")};_proto.hide=function hide(){this.addClass("vjs-hidden")};_proto.lockShowing=function lockShowing(){this.addClass("vjs-lock-showing")};_proto.unlockShowing=function unlockShowing(){this.removeClass("vjs-lock-showing")};_proto.getAttribute=function getAttribute$$1(attribute){return getAttribute(this.el_,attribute)};_proto.setAttribute=function setAttribute$$1(attribute,value){setAttribute(this.el_,attribute,value)};_proto.removeAttribute=function removeAttribute$$1(attribute){removeAttribute(this.el_,attribute)};_proto.width=function width(num,skipListeners){return this.dimension("width",num,skipListeners)};_proto.height=function height(num,skipListeners){return this.dimension("height",num,skipListeners)};_proto.dimensions=function dimensions(width,height){this.width(width,true);this.height(height)};_proto.dimension=function dimension(widthOrHeight,num,skipListeners){if(num!==undefined){if(num===null||num!==num){num=0}if((""+num).indexOf("%")!==-1||(""+num).indexOf("px")!==-1){this.el_.style[widthOrHeight]=num}else if(num==="auto"){this.el_.style[widthOrHeight]=""}else{this.el_.style[widthOrHeight]=num+"px"}if(!skipListeners){this.trigger("componentresize")}return}if(!this.el_){return 0}var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf("px");if(pxIndex!==-1){return parseInt(val.slice(0,pxIndex),10)}return parseInt(this.el_["offset"+toTitleCase(widthOrHeight)],10)};_proto.currentDimension=function currentDimension(widthOrHeight){var computedWidthOrHeight=0;if(widthOrHeight!=="width"&&widthOrHeight!=="height"){throw new Error("currentDimension only accepts width or height value")}if(typeof window_1.getComputedStyle==="function"){var computedStyle=window_1.getComputedStyle(this.el_);computedWidthOrHeight=computedStyle.getPropertyValue(widthOrHeight)||computedStyle[widthOrHeight]}computedWidthOrHeight=parseFloat(computedWidthOrHeight);if(computedWidthOrHeight===0){var rule="offset"+toTitleCase(widthOrHeight);computedWidthOrHeight=this.el_[rule]}return computedWidthOrHeight};_proto.currentDimensions=function currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};_proto.currentWidth=function currentWidth(){return this.currentDimension("width")};_proto.currentHeight=function currentHeight(){return this.currentDimension("height")};_proto.focus=function focus(){this.el_.focus()};_proto.blur=function blur(){this.el_.blur()};_proto.handleKeyPress=function handleKeyPress(event){if(this.player_){this.player_.handleKeyPress(event)}};_proto.emitTapEvents=function emitTapEvents(){var touchStart=0;var firstTouch=null;var tapMovementThreshold=10;var touchTimeThreshold=200;var couldBeTap;this.on("touchstart",function(event){if(event.touches.length===1){firstTouch={pageX:event.touches[0].pageX,pageY:event.touches[0].pageY};touchStart=(new Date).getTime();couldBeTap=true}});this.on("touchmove",function(event){if(event.touches.length>1){couldBeTap=false}else if(firstTouch){var xdiff=event.touches[0].pageX-firstTouch.pageX;var ydiff=event.touches[0].pageY-firstTouch.pageY;var touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold){couldBeTap=false}}});var noTap=function noTap(){couldBeTap=false};this.on("touchleave",noTap);this.on("touchcancel",noTap);this.on("touchend",function(event){firstTouch=null;if(couldBeTap===true){var touchTime=(new Date).getTime()-touchStart;if(touchTime<touchTimeThreshold){event.preventDefault();this.trigger("tap")}}})};_proto.enableTouchActivity=function enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity){return}var report=bind(this.player(),this.player().reportUserActivity);var touchHolding;this.on("touchstart",function(){report();this.clearInterval(touchHolding);touchHolding=this.setInterval(report,250)});var touchEnd=function touchEnd(event){report();this.clearInterval(touchHolding)};this.on("touchmove",report);this.on("touchend",touchEnd);this.on("touchcancel",touchEnd)};_proto.setTimeout=function setTimeout(fn,timeout){var _this2=this;var timeoutId,disposeFn;fn=bind(this,fn);timeoutId=window_1.setTimeout(function(){_this2.off("dispose",disposeFn);fn()},timeout);disposeFn=function disposeFn(){return _this2.clearTimeout(timeoutId)};disposeFn.guid="vjs-timeout-"+timeoutId;this.on("dispose",disposeFn);return timeoutId};_proto.clearTimeout=function clearTimeout(timeoutId){window_1.clearTimeout(timeoutId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-timeout-"+timeoutId;this.off("dispose",disposeFn);return timeoutId};_proto.setInterval=function setInterval(fn,interval){var _this3=this;fn=bind(this,fn);var intervalId=window_1.setInterval(fn,interval);var disposeFn=function disposeFn(){return _this3.clearInterval(intervalId)};disposeFn.guid="vjs-interval-"+intervalId;this.on("dispose",disposeFn);return intervalId};_proto.clearInterval=function clearInterval(intervalId){window_1.clearInterval(intervalId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-interval-"+intervalId;this.off("dispose",disposeFn);return intervalId};_proto.requestAnimationFrame=function requestAnimationFrame(fn){var _this4=this;var id,disposeFn;if(this.supportsRaf_){fn=bind(this,fn);id=window_1.requestAnimationFrame(function(){_this4.off("dispose",disposeFn);fn()});disposeFn=function disposeFn(){return _this4.cancelAnimationFrame(id)};disposeFn.guid="vjs-raf-"+id;this.on("dispose",disposeFn);return id}return this.setTimeout(fn,1e3/60)};_proto.cancelAnimationFrame=function cancelAnimationFrame(id){if(this.supportsRaf_){window_1.cancelAnimationFrame(id);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-raf-"+id;this.off("dispose",disposeFn);return id}return this.clearTimeout(id)};Component.registerComponent=function registerComponent(name,ComponentToRegister){if(typeof name!=="string"||!name){throw new Error('Illegal component name, "'+name+'"; must be a non-empty string.')}var Tech=Component.getComponent("Tech");var isTech=Tech&&Tech.isTech(ComponentToRegister);var isComp=Component===ComponentToRegister||Component.prototype.isPrototypeOf(ComponentToRegister.prototype);if(isTech||!isComp){var reason;if(isTech){reason="techs must be registered using Tech.registerTech()"}else{reason="must be a Component subclass"}throw new Error('Illegal component, "'+name+'"; '+reason+".")}name=toTitleCase(name);if(!Component.components_){Component.components_={}}var Player=Component.getComponent("Player");if(name==="Player"&&Player&&Player.players){var players=Player.players;var playerNames=Object.keys(players);if(players&&playerNames.length>0&&playerNames.map(function(pname){return players[pname]}).every(Boolean)){throw new Error("Can not register Player component after player has been created.")}}Component.components_[name]=ComponentToRegister;return ComponentToRegister};Component.getComponent=function getComponent(name){if(!name){return}name=toTitleCase(name);if(Component.components_&&Component.components_[name]){return Component.components_[name]}};return Component}();Component.prototype.supportsRaf_=typeof window_1.requestAnimationFrame==="function"&&typeof window_1.cancelAnimationFrame==="function";Component.registerComponent("Component",Component);var USER_AGENT=window_1.navigator&&window_1.navigator.userAgent||"";var webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT);var appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null;var IS_IPAD=/iPad/i.test(USER_AGENT);var IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;var IS_IPOD=/iPod/i.test(USER_AGENT);var IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;var IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1]}return null}();var IS_ANDROID=/Android/i.test(USER_AGENT);var ANDROID_VERSION=function(){var match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!match){return null}var major=match[1]&&parseFloat(match[1]);var minor=match[2]&&parseFloat(match[2]);if(major&&minor){return parseFloat(match[1]+"."+match[2])}else if(major){return major}return null}();var IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;var IS_FIREFOX=/Firefox/i.test(USER_AGENT);var IS_EDGE=/Edge/i.test(USER_AGENT);var IS_CHROME=!IS_EDGE&&(/Chrome/i.test(USER_AGENT)||/CriOS/i.test(USER_AGENT));var CHROME_VERSION=function(){var match=USER_AGENT.match(/(Chrome|CriOS)\/(\d+)/);if(match&&match[2]){return parseFloat(match[2])}return null}();var IE_VERSION=function(){var result=/MSIE\s(\d+)\.\d/.exec(USER_AGENT);var version=result&&parseFloat(result[1]);if(!version&&/Trident\/7.0/i.test(USER_AGENT)&&/rv:11.0/.test(USER_AGENT)){version=11}return version}();var IS_SAFARI=/Safari/i.test(USER_AGENT)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE;var IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var TOUCH_ENABLED=isReal()&&("ontouchstart"in window_1||window_1.navigator.maxTouchPoints||window_1.DocumentTouch&&window_1.document instanceof window_1.DocumentTouch);var browser=Object.freeze({IS_IPAD:IS_IPAD,IS_IPHONE:IS_IPHONE,IS_IPOD:IS_IPOD,IS_IOS:IS_IOS,IOS_VERSION:IOS_VERSION,IS_ANDROID:IS_ANDROID,ANDROID_VERSION:ANDROID_VERSION,IS_NATIVE_ANDROID:IS_NATIVE_ANDROID,IS_FIREFOX:IS_FIREFOX,IS_EDGE:IS_EDGE,IS_CHROME:IS_CHROME,CHROME_VERSION:CHROME_VERSION,IE_VERSION:IE_VERSION,IS_SAFARI:IS_SAFARI,IS_ANY_SAFARI:IS_ANY_SAFARI,TOUCH_ENABLED:TOUCH_ENABLED});function rangeCheck(fnName,index,maxIndex){if(typeof index!=="number"||index<0||index>maxIndex){throw new Error("Failed to execute '"+fnName+"' on 'TimeRanges': The index provided ("+index+") is non-numeric or out of bounds (0-"+maxIndex+").")}}function getRange(fnName,valueIndex,ranges,rangeIndex){rangeCheck(fnName,rangeIndex,ranges.length-1);return ranges[rangeIndex][valueIndex]}function createTimeRangesObj(ranges){if(ranges===undefined||ranges.length===0){return{length:0,start:function start(){throw new Error("This TimeRanges object is empty")},end:function end(){throw new Error("This TimeRanges object is empty")}}}return{length:ranges.length,start:getRange.bind(null,"start",0,ranges),end:getRange.bind(null,"end",1,ranges)}}function createTimeRanges(start,end){if(Array.isArray(start)){return createTimeRangesObj(start)}else if(start===undefined||end===undefined){return createTimeRangesObj()}return createTimeRangesObj([[start,end]])}function bufferedPercent(buffered,duration){var bufferedDuration=0;var start;var end;if(!duration){return 0}if(!buffered||!buffered.length){buffered=createTimeRanges(0,0)}for(var i=0;i<buffered.length;i++){start=buffered.start(i);end=buffered.end(i);if(end>duration){end=duration}bufferedDuration+=end-start}return bufferedDuration/duration}var FullscreenApi={};var apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var specApi=apiMap[0];var browserApi;var prefixedAPI=false;for(var i=0;i<apiMap.length;i++){if(apiMap[i][1]in document_1){browserApi=apiMap[i];break}}if(browserApi){for(var _i=0;_i<browserApi.length;_i++){FullscreenApi[specApi[_i]]=browserApi[_i]}prefixedAPI=browserApi[0]===specApi[0]}function MediaError(value){if(value instanceof MediaError){return value}if(typeof value==="number"){this.code=value}else if(typeof value==="string"){this.message=value}else if(isObject$1(value)){if(typeof value.code==="number"){this.code=value.code}assign(this,value)}if(!this.message){this.message=MediaError.defaultMessages[this.code]||""}}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var errNum=0;errNum<MediaError.errorTypes.length;errNum++){MediaError[MediaError.errorTypes[errNum]]=errNum;MediaError.prototype[MediaError.errorTypes[errNum]]=errNum}function isPromise(value){return value!==undefined&&value!==null&&typeof value.then==="function"}function silencePromise(value){if(isPromise(value)){value.then(null,function(e){})}}var trackToJson_=function trackToJson_(track){var ret=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(acc,prop,i){if(track[prop]){acc[prop]=track[prop]}return acc},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id}})});return ret};var textTracksToJson=function textTracksToJson(tech){var trackEls=tech.$$("track");var trackObjs=Array.prototype.map.call(trackEls,function(t){return t.track});var tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);if(trackEl.src){json.src=trackEl.src}return json});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1}).map(trackToJson_))};var jsonToTextTracks=function jsonToTextTracks(json,tech){json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;if(!track.src&&track.cues){track.cues.forEach(function(cue){return addedTrack.addCue(cue)})}});return tech.textTracks()};var textTrackConverter={textTracksToJson:textTracksToJson,jsonToTextTracks:jsonToTextTracks,trackToJson_:trackToJson_};var MODAL_CLASS_NAME="vjs-modal-dialog";var ModalDialog=function(_Component){_inheritsLoose$1(ModalDialog,_Component);function ModalDialog(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.opened_=_this.hasBeenOpened_=_this.hasBeenFilled_=false;_this.closeable(!_this.options_.uncloseable);_this.content(_this.options_.content);_this.contentEl_=createEl("div",{className:MODAL_CLASS_NAME+"-content"},{role:"document"});_this.descEl_=createEl("p",{className:MODAL_CLASS_NAME+"-description vjs-control-text",id:_this.el().getAttribute("aria-describedby")});textContent(_this.descEl_,_this.description());_this.el_.appendChild(_this.descEl_);_this.el_.appendChild(_this.contentEl_);return _this}var _proto=ModalDialog.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};_proto.dispose=function dispose(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;_Component.prototype.dispose.call(this)};_proto.buildCSSClass=function buildCSSClass(){return MODAL_CLASS_NAME+" vjs-hidden "+_Component.prototype.buildCSSClass.call(this)};_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,"Escape")&&this.closeable()){this.close()}};_proto.label=function label(){return this.localize(this.options_.label||"Modal Window")};_proto.description=function description(){var desc=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){desc+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return desc};_proto.open=function open(){if(!this.opened_){var player=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!player.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){player.pause()}if(this.closeable()){this.on(this.el_.ownerDocument,"keydown",bind(this,this.handleKeyPress))}this.hadControls_=player.controls();player.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}};_proto.opened=function opened(value){if(typeof value==="boolean"){this[value?"open":"close"]()}return this.opened_};_proto.close=function close(){if(!this.opened_){return}var player=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){player.play()}if(this.closeable()){this.off(this.el_.ownerDocument,"keydown",bind(this,this.handleKeyPress))}if(this.hadControls_){player.controls(true)}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose()}};_proto.closeable=function closeable(value){if(typeof value==="boolean"){var closeable=this.closeable_=!!value;var close=this.getChild("closeButton");if(closeable&&!close){var temp=this.contentEl_;this.contentEl_=this.el_;close=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=temp;this.on(close,"close",this.close)}if(!closeable&&close){this.off(close,"close",this.close);this.removeChild(close);close.dispose()}}return this.closeable_};_proto.fill=function fill(){this.fillWith(this.content())};_proto.fillWith=function fillWith(content){var contentEl=this.contentEl();var parentEl=contentEl.parentNode;var nextSiblingEl=contentEl.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;parentEl.removeChild(contentEl);this.empty();insertContent(contentEl,content);this.trigger("modalfill");if(nextSiblingEl){parentEl.insertBefore(contentEl,nextSiblingEl)}else{parentEl.appendChild(contentEl)}var closeButton=this.getChild("closeButton");if(closeButton){parentEl.appendChild(closeButton.el_)}};_proto.empty=function empty(){this.trigger("beforemodalempty");emptyEl(this.contentEl());this.trigger("modalempty")};_proto.content=function content(value){if(typeof value!=="undefined"){this.content_=value}return this.content_};_proto.conditionalFocus_=function conditionalFocus_(){var activeEl=document_1.activeElement;var playerEl=this.player_.el_;this.previouslyActiveEl_=null;if(playerEl.contains(activeEl)||playerEl===activeEl){this.previouslyActiveEl_=activeEl;this.focus();this.on(document_1,"keydown",this.handleKeyDown)}};_proto.conditionalBlur_=function conditionalBlur_(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();
this.previouslyActiveEl_=null}this.off(document_1,"keydown",this.handleKeyDown)};_proto.handleKeyDown=function handleKeyDown(event){if(!keycode.isEventKey(event,"Tab")){return}var focusableEls=this.focusableEls_();var activeEl=this.el_.querySelector(":focus");var focusIndex;for(var i=0;i<focusableEls.length;i++){if(activeEl===focusableEls[i]){focusIndex=i;break}}if(document_1.activeElement===this.el_){focusIndex=0}if(event.shiftKey&&focusIndex===0){focusableEls[focusableEls.length-1].focus();event.preventDefault()}else if(!event.shiftKey&&focusIndex===focusableEls.length-1){focusableEls[0].focus();event.preventDefault()}};_proto.focusableEls_=function focusableEls_(){var allChildren=this.el_.querySelectorAll("*");return Array.prototype.filter.call(allChildren,function(child){return(child instanceof window_1.HTMLAnchorElement||child instanceof window_1.HTMLAreaElement)&&child.hasAttribute("href")||(child instanceof window_1.HTMLInputElement||child instanceof window_1.HTMLSelectElement||child instanceof window_1.HTMLTextAreaElement||child instanceof window_1.HTMLButtonElement)&&!child.hasAttribute("disabled")||child instanceof window_1.HTMLIFrameElement||child instanceof window_1.HTMLObjectElement||child instanceof window_1.HTMLEmbedElement||child.hasAttribute("tabindex")&&child.getAttribute("tabindex")!==-1||child.hasAttribute("contenteditable")})};return ModalDialog}(Component);ModalDialog.prototype.options_={pauseOnOpen:true,temporary:true};Component.registerComponent("ModalDialog",ModalDialog);var TrackList=function(_EventTarget){_inheritsLoose$1(TrackList,_EventTarget);function TrackList(tracks){var _this;if(tracks===void 0){tracks=[]}_this=_EventTarget.call(this)||this;_this.tracks_=[];Object.defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(_this)),"length",{get:function get(){return this.tracks_.length}});for(var i=0;i<tracks.length;i++){_this.addTrack(tracks[i])}return _this}var _proto=TrackList.prototype;_proto.addTrack=function addTrack(track){var index=this.tracks_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get(){return this.tracks_[index]}})}if(this.tracks_.indexOf(track)===-1){this.tracks_.push(track);this.trigger({track:track,type:"addtrack",target:this})}};_proto.removeTrack=function removeTrack(rtrack){var track;for(var i=0,l=this.length;i<l;i++){if(this[i]===rtrack){track=this[i];if(track.off){track.off()}this.tracks_.splice(i,1);break}}if(!track){return}this.trigger({track:track,type:"removetrack",target:this})};_proto.getTrackById=function getTrackById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var track=this[i];if(track.id===id){result=track;break}}return result};return TrackList}(EventTarget);TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var event$1 in TrackList.prototype.allowedEvents_){TrackList.prototype["on"+event$1]=null}var disableOthers=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue}list[i].enabled=false}};var AudioTrackList=function(_TrackList){_inheritsLoose$1(AudioTrackList,_TrackList);function AudioTrackList(tracks){var _this;if(tracks===void 0){tracks=[]}for(var i=tracks.length-1;i>=0;i--){if(tracks[i].enabled){disableOthers(tracks,tracks[i]);break}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;return _this}var _proto=AudioTrackList.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.enabled){disableOthers(this,track)}_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return}track.enabledChange_=function(){if(_this2.changing_){return}_this2.changing_=true;disableOthers(_this2,track);_this2.changing_=false;_this2.trigger("change")};track.addEventListener("enabledchange",track.enabledChange_)};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.enabledChange_){rtrack.removeEventListener("enabledchange",rtrack.enabledChange_);rtrack.enabledChange_=null}};return AudioTrackList}(TrackList);var disableOthers$1=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue}list[i].selected=false}};var VideoTrackList=function(_TrackList){_inheritsLoose$1(VideoTrackList,_TrackList);function VideoTrackList(tracks){var _this;if(tracks===void 0){tracks=[]}for(var i=tracks.length-1;i>=0;i--){if(tracks[i].selected){disableOthers$1(tracks,tracks[i]);break}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;Object.defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(_this)),"selectedIndex",{get:function get(){for(var _i=0;_i<this.length;_i++){if(this[_i].selected){return _i}}return-1},set:function set(){}});return _this}var _proto=VideoTrackList.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.selected){disableOthers$1(this,track)}_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return}track.selectedChange_=function(){if(_this2.changing_){return}_this2.changing_=true;disableOthers$1(_this2,track);_this2.changing_=false;_this2.trigger("change")};track.addEventListener("selectedchange",track.selectedChange_)};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.selectedChange_){rtrack.removeEventListener("selectedchange",rtrack.selectedChange_);rtrack.selectedChange_=null}};return VideoTrackList}(TrackList);var TextTrackList=function(_TrackList){_inheritsLoose$1(TextTrackList,_TrackList);function TextTrackList(){return _TrackList.apply(this,arguments)||this}var _proto=TextTrackList.prototype;_proto.addTrack=function addTrack(track){var _this=this;_TrackList.prototype.addTrack.call(this,track);if(!this.queueChange_){this.queueChange_=function(){return _this.queueTrigger("change")}}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return _this.trigger("selectedlanguagechange")}}track.addEventListener("modechange",this.queueChange_);var nonLanguageTextTrackKind=["metadata","chapters"];if(nonLanguageTextTrackKind.indexOf(track.kind)===-1){track.addEventListener("modechange",this.triggerSelectedlanguagechange_)}};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener){if(this.queueChange_){rtrack.removeEventListener("modechange",this.queueChange_)}if(this.selectedlanguagechange_){rtrack.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}}};return TextTrackList}(TrackList);var HtmlTrackElementList=function(){function HtmlTrackElementList(trackElements){if(trackElements===void 0){trackElements=[]}this.trackElements_=[];Object.defineProperty(this,"length",{get:function get(){return this.trackElements_.length}});for(var i=0,length=trackElements.length;i<length;i++){this.addTrackElement_(trackElements[i])}}var _proto=HtmlTrackElementList.prototype;_proto.addTrackElement_=function addTrackElement_(trackElement){var index=this.trackElements_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get(){return this.trackElements_[index]}})}if(this.trackElements_.indexOf(trackElement)===-1){this.trackElements_.push(trackElement)}};_proto.getTrackElementByTrack_=function getTrackElementByTrack_(track){var trackElement_;for(var i=0,length=this.trackElements_.length;i<length;i++){if(track===this.trackElements_[i].track){trackElement_=this.trackElements_[i];break}}return trackElement_};_proto.removeTrackElement_=function removeTrackElement_(trackElement){for(var i=0,length=this.trackElements_.length;i<length;i++){if(trackElement===this.trackElements_[i]){if(this.trackElements_[i].track&&typeof this.trackElements_[i].track.off==="function"){this.trackElements_[i].track.off()}if(typeof this.trackElements_[i].off==="function"){this.trackElements_[i].off()}this.trackElements_.splice(i,1);break}}};return HtmlTrackElementList}();var TextTrackCueList=function(){function TextTrackCueList(cues){TextTrackCueList.prototype.setCues_.call(this,cues);Object.defineProperty(this,"length",{get:function get(){return this.length_}})}var _proto=TextTrackCueList.prototype;_proto.setCues_=function setCues_(cues){var oldLength=this.length||0;var i=0;var l=cues.length;this.cues_=cues;this.length_=cues.length;var defineProp=function defineProp(index){if(!(""+index in this)){Object.defineProperty(this,""+index,{get:function get(){return this.cues_[index]}})}};if(oldLength<l){i=oldLength;for(;i<l;i++){defineProp.call(this,i)}}};_proto.getCueById=function getCueById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var cue=this[i];if(cue.id===id){result=cue;break}}return result};return TextTrackCueList}();var VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};var Track=function(_EventTarget){_inheritsLoose$1(Track,_EventTarget);function Track(options){var _this;if(options===void 0){options={}}_this=_EventTarget.call(this)||this;var trackProps={id:options.id||"vjs_track_"+newGUID(),kind:options.kind||"",label:options.label||"",language:options.language||""};var _loop=function _loop(key){Object.defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(_this)),key,{get:function get(){return trackProps[key]},set:function set(){}})};for(var key in trackProps){_loop(key)}return _this}return Track}(EventTarget);var parseUrl=function parseUrl(url){var props=["protocol","hostname","port","pathname","search","hash","host"];var a=document_1.createElement("a");a.href=url;var addToBody=a.host===""&&a.protocol!=="file:";var div;if(addToBody){div=document_1.createElement("div");div.innerHTML='<a href="'+url+'"></a>';a=div.firstChild;div.setAttribute("style","display:none; position:absolute;");document_1.body.appendChild(div)}var details={};for(var i=0;i<props.length;i++){details[props[i]]=a[props[i]]}if(details.protocol==="http:"){details.host=details.host.replace(/:80$/,"")}if(details.protocol==="https:"){details.host=details.host.replace(/:443$/,"")}if(!details.protocol){details.protocol=window_1.location.protocol}if(addToBody){document_1.body.removeChild(div)}return details};var getAbsoluteURL=function getAbsoluteURL(url){if(!url.match(/^https?:\/\//)){var div=document_1.createElement("div");div.innerHTML='<a href="'+url+'">x</a>';url=div.firstChild.href}return url};var getFileExtension=function getFileExtension(path){if(typeof path==="string"){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var pathParts=splitPathRe.exec(path);if(pathParts){return pathParts.pop().toLowerCase()}}return""};var isCrossOrigin=function isCrossOrigin(url){var winLoc=window_1.location;var urlInfo=parseUrl(url);var srcProtocol=urlInfo.protocol===":"?winLoc.protocol:urlInfo.protocol;var crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin};var Url=Object.freeze({parseUrl:parseUrl,getAbsoluteURL:getAbsoluteURL,getFileExtension:getFileExtension,isCrossOrigin:isCrossOrigin});var parseCues=function parseCues(srcContent,track){var parser=new window_1.WebVTT.Parser(window_1,window_1.vttjs,window_1.WebVTT.StringDecoder());var errors=[];parser.oncue=function(cue){track.addCue(cue)};parser.onparsingerror=function(error){errors.push(error)};parser.onflush=function(){track.trigger({type:"loadeddata",target:track})};parser.parse(srcContent);if(errors.length>0){if(window_1.console&&window_1.console.groupCollapsed){window_1.console.groupCollapsed("Text Track parsing errors for "+track.src)}errors.forEach(function(error){return log.error(error)});if(window_1.console&&window_1.console.groupEnd){window_1.console.groupEnd()}}parser.flush()};var loadTrack=function loadTrack(src,track){var opts={uri:src};var crossOrigin=isCrossOrigin(src);if(crossOrigin){opts.cors=crossOrigin}xhr(opts,bind(this,function(err,response,responseBody){if(err){return log.error(err,response)}track.loaded_=true;if(typeof window_1.WebVTT!=="function"){if(track.tech_){var loadHandler;var errorHandler=function errorHandler(){log.error("vttjs failed to load, stopping trying to process "+track.src);track.tech_.off("vttjsloaded",loadHandler)};loadHandler=function loadHandler(){track.tech_.off("vttjserror",errorHandler);return parseCues(responseBody,track)};track.tech_.one("vttjsloaded",loadHandler);track.tech_.one("vttjserror",errorHandler)}}else{parseCues(responseBody,track)}}))};var TextTrack=function(_Track){_inheritsLoose$1(TextTrack,_Track);function TextTrack(options){var _this;if(options===void 0){options={}}if(!options.tech){throw new Error("A tech was not provided.")}var settings=mergeOptions(options,{kind:TextTrackKind[options.kind]||"subtitles",language:options.language||options.srclang||""});var mode=TextTrackMode[settings.mode]||"disabled";var default_=settings.default;if(settings.kind==="metadata"||settings.kind==="chapters"){mode="hidden"}_this=_Track.call(this,settings)||this;_this.tech_=settings.tech;_this.cues_=[];_this.activeCues_=[];var cues=new TextTrackCueList(_this.cues_);var activeCues=new TextTrackCueList(_this.activeCues_);var changed=false;var timeupdateHandler=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),function(){this.activeCues=this.activeCues;if(changed){this.trigger("cuechange");changed=false}});if(mode!=="disabled"){_this.tech_.ready(function(){_this.tech_.on("timeupdate",timeupdateHandler)},true)}Object.defineProperties(_assertThisInitialized$1(_assertThisInitialized$1(_this)),{"default":{get:function get(){return default_},set:function set(){}},mode:{get:function get(){return mode},set:function set(newMode){var _this2=this;if(!TextTrackMode[newMode]){return}mode=newMode;if(mode!=="disabled"){this.tech_.ready(function(){_this2.tech_.on("timeupdate",timeupdateHandler)},true)}else{this.tech_.off("timeupdate",timeupdateHandler)}this.trigger("modechange")}},cues:{get:function get(){if(!this.loaded_){return null}return cues},set:function set(){}},activeCues:{get:function get(){if(!this.loaded_){return null}if(this.cues.length===0){return activeCues}var ct=this.tech_.currentTime();var active=[];for(var i=0,l=this.cues.length;i<l;i++){var cue=this.cues[i];if(cue.startTime<=ct&&cue.endTime>=ct){active.push(cue)}else if(cue.startTime===cue.endTime&&cue.startTime<=ct&&cue.startTime+.5>=ct){active.push(cue)}}changed=false;if(active.length!==this.activeCues_.length){changed=true}else{for(var _i=0;_i<active.length;_i++){if(this.activeCues_.indexOf(active[_i])===-1){changed=true}}}this.activeCues_=active;activeCues.setCues_(this.activeCues_);return activeCues},set:function set(){}}});if(settings.src){_this.src=settings.src;loadTrack(settings.src,_assertThisInitialized$1(_assertThisInitialized$1(_this)))}else{_this.loaded_=true}return _this}var _proto=TextTrack.prototype;_proto.addCue=function addCue(originalCue){var cue=originalCue;if(window_1.vttjs&&!(originalCue instanceof window_1.vttjs.VTTCue)){cue=new window_1.vttjs.VTTCue(originalCue.startTime,originalCue.endTime,originalCue.text);for(var prop in originalCue){if(!(prop in cue)){cue[prop]=originalCue[prop]}}cue.id=originalCue.id;cue.originalCue_=originalCue}var tracks=this.tech_.textTracks();for(var i=0;i<tracks.length;i++){if(tracks[i]!==this){tracks[i].removeCue(cue)}}this.cues_.push(cue);this.cues.setCues_(this.cues_)};_proto.removeCue=function removeCue(_removeCue){var i=this.cues_.length;while(i--){var cue=this.cues_[i];if(cue===_removeCue||cue.originalCue_&&cue.originalCue_===_removeCue){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break}}};return TextTrack}(Track);TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};var AudioTrack=function(_Track){_inheritsLoose$1(AudioTrack,_Track);function AudioTrack(options){var _this;if(options===void 0){options={}}var settings=mergeOptions(options,{kind:AudioTrackKind[options.kind]||""});_this=_Track.call(this,settings)||this;var enabled=false;Object.defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(_this)),"enabled",{get:function get(){return enabled},set:function set(newEnabled){if(typeof newEnabled!=="boolean"||newEnabled===enabled){return}enabled=newEnabled;this.trigger("enabledchange")}});if(settings.enabled){_this.enabled=settings.enabled}_this.loaded_=true;return _this}return AudioTrack}(Track);var VideoTrack=function(_Track){_inheritsLoose$1(VideoTrack,_Track);function VideoTrack(options){var _this;if(options===void 0){options={}}var settings=mergeOptions(options,{kind:VideoTrackKind[options.kind]||""});_this=_Track.call(this,settings)||this;var selected=false;Object.defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(_this)),"selected",{get:function get(){return selected},set:function set(newSelected){if(typeof newSelected!=="boolean"||newSelected===selected){return}selected=newSelected;this.trigger("selectedchange")}});if(settings.selected){_this.selected=settings.selected}return _this}return VideoTrack}(Track);var NONE=0;var LOADING=1;var LOADED=2;var ERROR=3;var HTMLTrackElement=function(_EventTarget){_inheritsLoose$1(HTMLTrackElement,_EventTarget);function HTMLTrackElement(options){var _this;if(options===void 0){options={}}_this=_EventTarget.call(this)||this;var readyState;var track=new TextTrack(options);_this.kind=track.kind;_this.src=track.src;_this.srclang=track.language;_this.label=track.label;_this.default=track.default;Object.defineProperties(_assertThisInitialized$1(_assertThisInitialized$1(_this)),{readyState:{get:function get(){return readyState}},track:{get:function get(){return track}}});readyState=NONE;track.addEventListener("loadeddata",function(){readyState=LOADED;_this.trigger({type:"load",target:_assertThisInitialized$1(_assertThisInitialized$1(_this))})});return _this}return HTMLTrackElement}(EventTarget);HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=NONE;HTMLTrackElement.LOADING=LOADING;HTMLTrackElement.LOADED=LOADED;HTMLTrackElement.ERROR=ERROR;var NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(type){NORMAL[type].getterName=type+"Tracks";NORMAL[type].privateName=type+"Tracks_"});var REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var ALL=mergeOptions(NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(self,kind,label,language,options){if(options===void 0){options={}}var tracks=self.textTracks();options.kind=kind;if(label){options.label=label}if(language){options.language=language}options.tech=self;var track=new ALL.text.TrackClass(options);tracks.addTrack(track);return track}var Tech=function(_Component){_inheritsLoose$1(Tech,_Component);function Tech(options,ready){var _this;if(options===void 0){options={}}if(ready===void 0){ready=function ready(){}}options.reportTouchActivity=false;_this=_Component.call(this,null,options,ready)||this;_this.hasStarted_=false;_this.on("playing",function(){this.hasStarted_=true});_this.on("loadstart",function(){this.hasStarted_=false});ALL.names.forEach(function(name){var props=ALL[name];if(options&&options[props.getterName]){_this[props.privateName]=options[props.getterName]}});if(!_this.featuresProgressEvents){_this.manualProgressOn()}if(!_this.featuresTimeupdateEvents){_this.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach(function(track){if(options["native"+track+"Tracks"]===false){_this["featuresNative"+track+"Tracks"]=false}});if(options.nativeCaptions===false||options.nativeTextTracks===false){_this.featuresNativeTextTracks=false}else if(options.nativeCaptions===true||options.nativeTextTracks===true){_this.featuresNativeTextTracks=true}if(!_this.featuresNativeTextTracks){_this.emulateTextTracks()}_this.autoRemoteTextTracks_=new ALL.text.ListClass;_this.initTrackListeners();if(!options.nativeControlsForTouch){_this.emitTapEvents()}if(_this.constructor){_this.name_=_this.constructor.name||"Unknown Tech"}return _this}var _proto=Tech.prototype;_proto.triggerSourceset=function triggerSourceset(src){var _this2=this;if(!this.isReady_){this.one("ready",function(){return _this2.setTimeout(function(){return _this2.triggerSourceset(src)},1)})}this.trigger({src:src,type:"sourceset"})};_proto.manualProgressOn=function manualProgressOn(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};_proto.manualProgressOff=function manualProgressOff(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};_proto.trackProgress=function trackProgress(event){this.stopTrackingProgress();this.progressInterval=this.setInterval(bind(this,function(){var numBufferedPercent=this.bufferedPercent();if(this.bufferedPercent_!==numBufferedPercent){this.trigger("progress")}this.bufferedPercent_=numBufferedPercent;if(numBufferedPercent===1){this.stopTrackingProgress()}}),500)};_proto.onDurationChange=function onDurationChange(event){this.duration_=this.duration()};_proto.buffered=function buffered(){return createTimeRanges(0,0)};_proto.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration_)};_proto.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval)};_proto.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};_proto.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};_proto.trackCurrentTime=function trackCurrentTime(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})},250)};_proto.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};_proto.dispose=function dispose(){this.clearTracks(NORMAL.names);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}_Component.prototype.dispose.call(this)};_proto.clearTracks=function clearTracks(types){var _this3=this;types=[].concat(types);types.forEach(function(type){var list=_this3[type+"Tracks"]()||[];var i=list.length;while(i--){var track=list[i];if(type==="text"){_this3.removeRemoteTextTrack(track)}list.removeTrack(track)}})};_proto.cleanupAutoTextTracks=function cleanupAutoTextTracks(){var list=this.autoRemoteTextTracks_||[];var i=list.length;while(i--){var track=list[i];this.removeRemoteTextTrack(track)}};_proto.reset=function reset(){};_proto.error=function error(err){if(err!==undefined){this.error_=new MediaError(err);this.trigger("error")}return this.error_};_proto.played=function played(){if(this.hasStarted_){return createTimeRanges(0,0)}return createTimeRanges()};_proto.setCurrentTime=function setCurrentTime(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};_proto.initTrackListeners=function initTrackListeners(){var _this4=this;NORMAL.names.forEach(function(name){var props=NORMAL[name];var trackListChanges=function trackListChanges(){_this4.trigger(name+"trackchange")};var tracks=_this4[props.getterName]();tracks.addEventListener("removetrack",trackListChanges);tracks.addEventListener("addtrack",trackListChanges);_this4.on("dispose",function(){tracks.removeEventListener("removetrack",trackListChanges);tracks.removeEventListener("addtrack",trackListChanges)})})};_proto.addWebVttScript_=function addWebVttScript_(){var _this5=this;if(window_1.WebVTT){return}if(document_1.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(browserIndex)&&Object.keys(browserIndex).length>0){this.trigger("vttjsloaded");return}var script=document_1.createElement("script");script.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";script.onload=function(){_this5.trigger("vttjsloaded")};script.onerror=function(){_this5.trigger("vttjserror")};this.on("dispose",function(){script.onload=null;script.onerror=null});window_1.WebVTT=true;this.el().parentNode.appendChild(script)}else{this.ready(this.addWebVttScript_)}};_proto.emulateTextTracks=function emulateTextTracks(){var _this6=this;var tracks=this.textTracks();var remoteTracks=this.remoteTextTracks();var handleAddTrack=function handleAddTrack(e){return tracks.addTrack(e.track)};var handleRemoveTrack=function handleRemoveTrack(e){return tracks.removeTrack(e.track)};remoteTracks.on("addtrack",handleAddTrack);remoteTracks.on("removetrack",handleRemoveTrack);this.addWebVttScript_();var updateDisplay=function updateDisplay(){return _this6.trigger("texttrackchange")};var textTracksChanges=function textTracksChanges(){updateDisplay();for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener("cuechange",updateDisplay);if(track.mode==="showing"){track.addEventListener("cuechange",updateDisplay)}}};textTracksChanges();tracks.addEventListener("change",textTracksChanges);tracks.addEventListener("addtrack",textTracksChanges);tracks.addEventListener("removetrack",textTracksChanges);this.on("dispose",function(){remoteTracks.off("addtrack",handleAddTrack);remoteTracks.off("removetrack",handleRemoveTrack);tracks.removeEventListener("change",textTracksChanges);tracks.removeEventListener("addtrack",textTracksChanges);tracks.removeEventListener("removetrack",textTracksChanges);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener("cuechange",updateDisplay)}})};_proto.addTextTrack=function addTextTrack(kind,label,language){if(!kind){throw new Error("TextTrack kind is required but was not provided")}return createTrackHelper(this,kind,label,language)};_proto.createRemoteTextTrack=function createRemoteTextTrack(options){var track=mergeOptions(options,{tech:this});return new REMOTE.remoteTextEl.TrackClass(track)};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var _this7=this;if(options===void 0){options={}}var htmlTrackElement=this.createRemoteTextTrack(options);if(manualCleanup!==true&&manualCleanup!==false){log.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');manualCleanup=true}this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);this.remoteTextTracks().addTrack(htmlTrackElement.track);if(manualCleanup!==true){this.ready(function(){return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track)})}return htmlTrackElement};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);this.remoteTextTrackEls().removeTrackElement_(trackElement);this.remoteTextTracks().removeTrack(track);this.autoRemoteTextTracks_.removeTrack(track)};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{}};_proto.setPoster=function setPoster(){};_proto.playsinline=function playsinline(){};_proto.setPlaysinline=function setPlaysinline(){};_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(){};_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(){};_proto.canPlayType=function canPlayType(){return""};Tech.canPlayType=function canPlayType(){return""};Tech.canPlaySource=function canPlaySource(srcObj,options){return Tech.canPlayType(srcObj.type)};Tech.isTech=function isTech(component){return component.prototype instanceof Tech||component instanceof Tech||component===Tech};Tech.registerTech=function registerTech(name,tech){if(!Tech.techs_){Tech.techs_={}}if(!Tech.isTech(tech)){throw new Error("Tech "+name+" must be a Tech")}if(!Tech.canPlayType){throw new Error("Techs must have a static canPlayType method on them")}if(!Tech.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them")}name=toTitleCase(name);Tech.techs_[name]=tech;if(name!=="Tech"){Tech.defaultTechOrder_.push(name)}return tech};Tech.getTech=function getTech(name){if(!name){return}name=toTitleCase(name);if(Tech.techs_&&Tech.techs_[name]){return Tech.techs_[name]}if(window_1&&window_1.videojs&&window_1.videojs[name]){log.warn("The "+name+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return window_1.videojs[name]}};return Tech}(Component);ALL.names.forEach(function(name){var props=ALL[name];Tech.prototype[props.getterName]=function(){this[props.privateName]=this[props.privateName]||new props.ListClass;return this[props.privateName]}});Tech.prototype.featuresVolumeControl=true;Tech.prototype.featuresMuteControl=true;Tech.prototype.featuresFullscreenResize=false;Tech.prototype.featuresPlaybackRate=false;Tech.prototype.featuresProgressEvents=false;Tech.prototype.featuresSourceset=false;Tech.prototype.featuresTimeupdateEvents=false;Tech.prototype.featuresNativeTextTracks=false;Tech.withSourceHandlers=function(_Tech){_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;if(!handlers){handlers=_Tech.sourceHandlers=[]}if(index===undefined){index=handlers.length}handlers.splice(index,0,handler)};_Tech.canPlayType=function(type){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canPlayType(type);if(can){return can}}return""};_Tech.selectSourceHandler=function(source,options){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canHandleSource(source,options);if(can){return handlers[i]}}return null};_Tech.canPlaySource=function(srcObj,options){var sh=_Tech.selectSourceHandler(srcObj,options);if(sh){return sh.canHandleSource(srcObj,options)}return""};var deferrable=["seekable","seeking","duration"];deferrable.forEach(function(fnName){var originalFn=this[fnName];if(typeof originalFn!=="function"){return}this[fnName]=function(){if(this.sourceHandler_&&this.sourceHandler_[fnName]){return this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments)}return originalFn.apply(this,arguments)}},_Tech.prototype);_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source,this.options_);if(!sh){if(_Tech.nativeSourceHandler){sh=_Tech.nativeSourceHandler}else{log.error("No source handler found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(sh!==_Tech.nativeSourceHandler){this.currentSource_=source}this.sourceHandler_=sh.handleSource(source,this,this.options_);this.one("dispose",this.disposeSourceHandler)};_Tech.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};Component.registerComponent("Tech",Tech);
Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];var middlewares={};var middlewareInstances={};var TERMINATOR={};function use(type,middleware){middlewares[type]=middlewares[type]||[];middlewares[type].push(middleware)}function setSource(player,src,next){player.setTimeout(function(){return setSourceHelper(src,middlewares[src.type],next,player)},1)}function setTech(middleware,tech){middleware.forEach(function(mw){return mw.setTech&&mw.setTech(tech)})}function get(middleware,tech,method){return middleware.reduceRight(middlewareIterator(method),tech[method]())}function set$1(middleware,tech,method,arg){return tech[method](middleware.reduce(middlewareIterator(method),arg))}function mediate(middleware,tech,method,arg){if(arg===void 0){arg=null}var callMethod="call"+toTitleCase(method);var middlewareValue=middleware.reduce(middlewareIterator(callMethod),arg);var terminated=middlewareValue===TERMINATOR;var returnValue=terminated?null:tech[method](middlewareValue);executeRight(middleware,method,returnValue,terminated);return returnValue}var allowedGetters={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1};var allowedSetters={setCurrentTime:1};var allowedMediators={play:1,pause:1};function middlewareIterator(method){return function(value,mw){if(value===TERMINATOR){return TERMINATOR}if(mw[method]){return mw[method](value)}return value}}function executeRight(mws,method,value,terminated){for(var i=mws.length-1;i>=0;i--){var mw=mws[i];if(mw[method]){mw[method](terminated,value)}}}function clearCacheForPlayer(player){middlewareInstances[player.id()]=null}function getOrCreateFactory(player,mwFactory){var mws=middlewareInstances[player.id()];var mw=null;if(mws===undefined||mws===null){mw=mwFactory(player);middlewareInstances[player.id()]=[[mwFactory,mw]];return mw}for(var i=0;i<mws.length;i++){var _mws$i=mws[i],mwf=_mws$i[0],mwi=_mws$i[1];if(mwf!==mwFactory){continue}mw=mwi}if(mw===null){mw=mwFactory(player);mws.push([mwFactory,mw])}return mw}function setSourceHelper(src,middleware,next,player,acc,lastRun){if(src===void 0){src={}}if(middleware===void 0){middleware=[]}if(acc===void 0){acc=[]}if(lastRun===void 0){lastRun=false}var _middleware=middleware,mwFactory=_middleware[0],mwrest=_middleware.slice(1);if(typeof mwFactory==="string"){setSourceHelper(src,middlewares[mwFactory],next,player,acc,lastRun)}else if(mwFactory){var mw=getOrCreateFactory(player,mwFactory);if(!mw.setSource){acc.push(mw);return setSourceHelper(src,mwrest,next,player,acc,lastRun)}mw.setSource(assign({},src),function(err,_src){if(err){return setSourceHelper(src,mwrest,next,player,acc,lastRun)}acc.push(mw);setSourceHelper(_src,src.type===_src.type?mwrest:middlewares[_src.type],next,player,acc,lastRun)})}else if(mwrest.length){setSourceHelper(src,mwrest,next,player,acc,lastRun)}else if(lastRun){next(src,acc)}else{setSourceHelper(src,middlewares["*"],next,player,acc,true)}}var MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var getMimetype=function getMimetype(src){if(src===void 0){src=""}var ext=getFileExtension(src);var mimetype=MimetypesKind[ext.toLowerCase()];return mimetype||""};var findMimetype=function findMimetype(player,src){if(!src){return""}if(player.cache_.source.src===src&&player.cache_.source.type){return player.cache_.source.type}var matchingSources=player.cache_.sources.filter(function(s){return s.src===src});if(matchingSources.length){return matchingSources[0].type}var sources=player.$$("source");for(var i=0;i<sources.length;i++){var s=sources[i];if(s.type&&s.src&&s.src===src){return s.type}}return getMimetype(src)};var filterSource=function filterSource(src){if(Array.isArray(src)){var newsrc=[];src.forEach(function(srcobj){srcobj=filterSource(srcobj);if(Array.isArray(srcobj)){newsrc=newsrc.concat(srcobj)}else if(isObject$1(srcobj)){newsrc.push(srcobj)}});src=newsrc}else if(typeof src==="string"&&src.trim()){src=[fixSource({src:src})]}else if(isObject$1(src)&&typeof src.src==="string"&&src.src&&src.src.trim()){src=[fixSource(src)]}else{src=[]}return src};function fixSource(src){var mimetype=getMimetype(src.src);if(!src.type&&mimetype){src.type=mimetype}return src}var MediaLoader=function(_Component){_inheritsLoose$1(MediaLoader,_Component);function MediaLoader(player,options,ready){var _this;var options_=mergeOptions({createEl:false},options);_this=_Component.call(this,player,options_,ready)||this;if(!options.playerOptions.sources||options.playerOptions.sources.length===0){for(var i=0,j=options.playerOptions.techOrder;i<j.length;i++){var techName=toTitleCase(j[i]);var tech=Tech.getTech(techName);if(!techName){tech=Component.getComponent(techName)}if(tech&&tech.isSupported()){player.loadTech_(techName);break}}}else{player.src(options.playerOptions.sources)}return _this}return MediaLoader}(Component);Component.registerComponent("MediaLoader",MediaLoader);var ClickableComponent=function(_Component){_inheritsLoose$1(ClickableComponent,_Component);function ClickableComponent(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.emitTapEvents();_this.enable();return _this}var _proto=ClickableComponent.prototype;_proto.createEl=function createEl$$1(tag,props,attributes){if(tag===void 0){tag="div"}if(props===void 0){props={}}if(attributes===void 0){attributes={}}props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},props);if(tag==="button"){log.error("Creating a ClickableComponent with an HTML element of "+tag+" is not supported; use a Button instead.")}attributes=assign({role:"button"},attributes);this.tabIndex_=props.tabIndex;var el=_Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el};_proto.dispose=function dispose(){this.controlTextEl_=null;_Component.prototype.dispose.call(this)};_proto.createControlTextEl=function createControlTextEl(el){this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(el){el.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,el);return this.controlTextEl_};_proto.controlText=function controlText(text,el){if(el===void 0){el=this.el()}if(text===undefined){return this.controlText_||"Need Text"}var localizedText=this.localize(text);this.controlText_=text;textContent(this.controlTextEl_,localizedText);if(!this.nonIconControl){el.setAttribute("title",localizedText)}};_proto.buildCSSClass=function buildCSSClass(){return"vjs-control vjs-button "+_Component.prototype.buildCSSClass.call(this)};_proto.enable=function enable(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.on(["tap","click"],this.handleClick);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur)}};_proto.disable=function disable(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)};_proto.handleClick=function handleClick(event){};_proto.handleFocus=function handleFocus(event){on(document_1,"keydown",bind(this,this.handleKeyPress))};_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,"Space")||keycode.isEventKey(event,"Enter")){event.preventDefault();this.trigger("click")}else{_Component.prototype.handleKeyPress.call(this,event)}};_proto.handleBlur=function handleBlur(event){off(document_1,"keydown",bind(this,this.handleKeyPress))};return ClickableComponent}(Component);Component.registerComponent("ClickableComponent",ClickableComponent);var PosterImage=function(_ClickableComponent){_inheritsLoose$1(PosterImage,_ClickableComponent);function PosterImage(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.update();player.on("posterchange",bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.update));return _this}var _proto=PosterImage.prototype;_proto.dispose=function dispose(){this.player().off("posterchange",this.update);_ClickableComponent.prototype.dispose.call(this)};_proto.createEl=function createEl$$1(){var el=createEl("div",{className:"vjs-poster",tabIndex:-1});return el};_proto.update=function update(event){var url=this.player().poster();this.setSrc(url);if(url){this.show()}else{this.hide()}};_proto.setSrc=function setSrc(url){var backgroundImage="";if(url){backgroundImage='url("'+url+'")'}this.el_.style.backgroundImage=backgroundImage};_proto.handleClick=function handleClick(event){if(!this.player_.controls()){return}if(this.player_.paused()){silencePromise(this.player_.play())}else{this.player_.pause()}this.player_.handleFocus({})};return PosterImage}(ClickableComponent);Component.registerComponent("PosterImage",PosterImage);var darkGray="#222";var lightGray="#ccc";var fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(color,opacity){var hex;if(color.length===4){hex=color[1]+color[1]+color[2]+color[2]+color[3]+color[3]}else if(color.length===7){hex=color.slice(1)}else{throw new Error("Invalid color code provided, "+color+"; must be formatted as e.g. #f0e or #f604e2.")}return"rgba("+parseInt(hex.slice(0,2),16)+","+parseInt(hex.slice(2,4),16)+","+parseInt(hex.slice(4,6),16)+","+opacity+")"}function tryUpdateStyle(el,style,rule){try{el.style[style]=rule}catch(e){return}}var TextTrackDisplay=function(_Component){_inheritsLoose$1(TextTrackDisplay,_Component);function TextTrackDisplay(player,options,ready){var _this;_this=_Component.call(this,player,options,ready)||this;var updateDisplayHandler=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.updateDisplay);player.on("loadstart",bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.toggleDisplay));player.on("texttrackchange",updateDisplayHandler);player.on("loadedmetadata",bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.preselectTrack));player.ready(bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),function(){if(player.tech_&&player.tech_.featuresNativeTextTracks){this.hide();return}player.on("fullscreenchange",updateDisplayHandler);player.on("playerresize",updateDisplayHandler);window_1.addEventListener("orientationchange",updateDisplayHandler);player.on("dispose",function(){return window_1.removeEventListener("orientationchange",updateDisplayHandler)});var tracks=this.options_.playerOptions.tracks||[];for(var i=0;i<tracks.length;i++){this.player_.addRemoteTextTrack(tracks[i],true)}this.preselectTrack()}));return _this}var _proto=TextTrackDisplay.prototype;_proto.preselectTrack=function preselectTrack(){var modes={captions:1,subtitles:1};var trackList=this.player_.textTracks();var userPref=this.player_.cache_.selectedLanguage;var firstDesc;var firstCaptions;var preferredTrack;for(var i=0;i<trackList.length;i++){var track=trackList[i];if(userPref&&userPref.enabled&&userPref.language&&userPref.language===track.language&&track.kind in modes){if(track.kind===userPref.kind){preferredTrack=track}else if(!preferredTrack){preferredTrack=track}}else if(userPref&&!userPref.enabled){preferredTrack=null;firstDesc=null;firstCaptions=null}else if(track.default){if(track.kind==="descriptions"&&!firstDesc){firstDesc=track}else if(track.kind in modes&&!firstCaptions){firstCaptions=track}}}if(preferredTrack){preferredTrack.mode="showing"}else if(firstCaptions){firstCaptions.mode="showing"}else if(firstDesc){firstDesc.mode="showing"}};_proto.toggleDisplay=function toggleDisplay(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};_proto.clearDisplay=function clearDisplay(){if(typeof window_1.WebVTT==="function"){window_1.WebVTT.processCues(window_1,[],this.el_)}};_proto.updateDisplay=function updateDisplay(){var tracks=this.player_.textTracks();this.clearDisplay();var descriptionsTrack=null;var captionsSubtitlesTrack=null;var i=tracks.length;while(i--){var track=tracks[i];if(track.mode==="showing"){if(track.kind==="descriptions"){descriptionsTrack=track}else{captionsSubtitlesTrack=track}}}if(captionsSubtitlesTrack){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(captionsSubtitlesTrack)}else if(descriptionsTrack){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(descriptionsTrack)}};_proto.updateForTrack=function updateForTrack(track){if(typeof window_1.WebVTT!=="function"||!track.activeCues){return}var cues=[];for(var _i=0;_i<track.activeCues.length;_i++){cues.push(track.activeCues[_i])}window_1.WebVTT.processCues(window_1,cues,this.el_);if(!this.player_.textTrackSettings){return}var overrides=this.player_.textTrackSettings.getValues();var i=cues.length;while(i--){var cue=cues[i];if(!cue){continue}var cueDiv=cue.displayState;if(overrides.color){cueDiv.firstChild.style.color=overrides.color}if(overrides.textOpacity){tryUpdateStyle(cueDiv.firstChild,"color",constructColor(overrides.color||"#fff",overrides.textOpacity))}if(overrides.backgroundColor){cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor}if(overrides.backgroundOpacity){tryUpdateStyle(cueDiv.firstChild,"backgroundColor",constructColor(overrides.backgroundColor||"#000",overrides.backgroundOpacity))}if(overrides.windowColor){if(overrides.windowOpacity){tryUpdateStyle(cueDiv,"backgroundColor",constructColor(overrides.windowColor,overrides.windowOpacity))}else{cueDiv.style.backgroundColor=overrides.windowColor}}if(overrides.edgeStyle){if(overrides.edgeStyle==="dropshadow"){cueDiv.firstChild.style.textShadow="2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray}else if(overrides.edgeStyle==="raised"){cueDiv.firstChild.style.textShadow="1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray}else if(overrides.edgeStyle==="depressed"){cueDiv.firstChild.style.textShadow="1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray}else if(overrides.edgeStyle==="uniform"){cueDiv.firstChild.style.textShadow="0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray}}if(overrides.fontPercent&&overrides.fontPercent!==1){var fontSize=window_1.parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+"px";cueDiv.style.height="auto";cueDiv.style.top="auto";cueDiv.style.bottom="2px"}if(overrides.fontFamily&&overrides.fontFamily!=="default"){if(overrides.fontFamily==="small-caps"){cueDiv.firstChild.style.fontVariant="small-caps"}else{cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily]}}}};return TextTrackDisplay}(Component);Component.registerComponent("TextTrackDisplay",TextTrackDisplay);var LoadingSpinner=function(_Component){_inheritsLoose$1(LoadingSpinner,_Component);function LoadingSpinner(){return _Component.apply(this,arguments)||this}var _proto=LoadingSpinner.prototype;_proto.createEl=function createEl$$1(){var isAudio=this.player_.isAudio();var playerType=this.localize(isAudio?"Audio Player":"Video Player");var controlText=createEl("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[playerType])});var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});el.appendChild(controlText);return el};return LoadingSpinner}(Component);Component.registerComponent("LoadingSpinner",LoadingSpinner);var Button=function(_ClickableComponent){_inheritsLoose$1(Button,_ClickableComponent);function Button(){return _ClickableComponent.apply(this,arguments)||this}var _proto=Button.prototype;_proto.createEl=function createEl(tag,props,attributes){if(props===void 0){props={}}if(attributes===void 0){attributes={}}tag="button";props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},props);attributes=assign({type:"button"},attributes);var el=Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el};_proto.addChild=function addChild(child,options){if(options===void 0){options={}}var className=this.constructor.name;log.warn("Adding an actionable (user controllable) child to a Button ("+className+") is not supported; use a ClickableComponent instead.");return Component.prototype.addChild.call(this,child,options)};_proto.enable=function enable(){_ClickableComponent.prototype.enable.call(this);this.el_.removeAttribute("disabled")};_proto.disable=function disable(){_ClickableComponent.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};_proto.handleKeyPress=function handleKeyPress(event){if(!(keycode.isEventKey(event,"Space")||keycode.isEventKey(event,"Enter"))){_ClickableComponent.prototype.handleKeyPress.call(this,event)}};return Button}(ClickableComponent);Component.registerComponent("Button",Button);var BigPlayButton=function(_Button){_inheritsLoose$1(BigPlayButton,_Button);function BigPlayButton(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.mouseused_=false;_this.on("mousedown",_this.handleMouseDown);return _this}var _proto=BigPlayButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-big-play-button"};_proto.handleClick=function handleClick(event){var playPromise=this.player_.play();if(this.mouseused_&&event.clientX&&event.clientY){silencePromise(playPromise);this.player_.handleFocus({});return}var cb=this.player_.getChild("controlBar");var playToggle=cb&&cb.getChild("playToggle");if(!playToggle){this.player_.focus();return}var playFocus=function playFocus(){return playToggle.focus()};if(isPromise(playPromise)){playPromise.then(playFocus,function(){})}else{this.setTimeout(playFocus,1)}};_proto.handleKeyPress=function handleKeyPress(event){this.mouseused_=false;_Button.prototype.handleKeyPress.call(this,event)};_proto.handleMouseDown=function handleMouseDown(event){this.mouseused_=true};return BigPlayButton}(Button);BigPlayButton.prototype.controlText_="Play Video";Component.registerComponent("BigPlayButton",BigPlayButton);var CloseButton=function(_Button){_inheritsLoose$1(CloseButton,_Button);function CloseButton(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.controlText(options&&options.controlText||_this.localize("Close"));return _this}var _proto=CloseButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-close-button "+_Button.prototype.buildCSSClass.call(this)};_proto.handleKeyPress=function handleKeyPress(event){};_proto.handleClick=function handleClick(event){this.trigger({type:"close",bubbles:false})};return CloseButton}(Button);Component.registerComponent("CloseButton",CloseButton);var PlayToggle=function(_Button){_inheritsLoose$1(PlayToggle,_Button);function PlayToggle(player,options){var _this;if(options===void 0){options={}}_this=_Button.call(this,player,options)||this;options.replay=options.replay===undefined||options.replay;_this.on(player,"play",_this.handlePlay);_this.on(player,"pause",_this.handlePause);if(options.replay){_this.on(player,"ended",_this.handleEnded)}return _this}var _proto=PlayToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-play-control "+_Button.prototype.buildCSSClass.call(this)};_proto.handleClick=function handleClick(event){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};_proto.handleSeeked=function handleSeeked(event){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(event)}else{this.handlePlay(event)}};_proto.handlePlay=function handlePlay(event){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};_proto.handlePause=function handlePause(event){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};_proto.handleEnded=function handleEnded(event){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return PlayToggle}(Button);PlayToggle.prototype.controlText_="Play";Component.registerComponent("PlayToggle",PlayToggle);var defaultImplementation=function defaultImplementation(seconds,guide){seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60);var m=Math.floor(seconds/60%60);var h=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);if(isNaN(seconds)||seconds===Infinity){h=m=s="-"}h=h>0||gh>0?h+":":"";m=((h||gm>=10)&&m<10?"0"+m:m)+":";s=s<10?"0"+s:s;return h+m+s};var implementation$3=defaultImplementation;function setFormatTime(customImplementation){implementation$3=customImplementation}function resetFormatTime(){implementation$3=defaultImplementation}function formatTime(seconds,guide){if(guide===void 0){guide=seconds}return implementation$3(seconds,guide)}var TimeDisplay=function(_Component){_inheritsLoose$1(TimeDisplay,_Component);function TimeDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.throttledUpdateContent=throttle(bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.updateContent),25);_this.on(player,"timeupdate",_this.throttledUpdateContent);return _this}var _proto=TimeDisplay.prototype;_proto.createEl=function createEl$$1(){var className=this.buildCSSClass();var el=_Component.prototype.createEl.call(this,"div",{className:className+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});this.contentEl_=createEl("span",{className:className+"-display"},{"aria-live":"off",role:"presentation"});this.updateTextNode_();el.appendChild(this.contentEl_);return el};_proto.dispose=function dispose(){this.contentEl_=null;this.textNode_=null;_Component.prototype.dispose.call(this)};_proto.updateTextNode_=function updateTextNode_(){if(!this.contentEl_){return}while(this.contentEl_.firstChild){this.contentEl_.removeChild(this.contentEl_.firstChild)}this.textNode_=document_1.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)};_proto.formatTime_=function formatTime_(time){return formatTime(time)};_proto.updateFormattedTime_=function updateFormattedTime_(time){var formattedTime=this.formatTime_(time);if(formattedTime===this.formattedTime_){return}this.formattedTime_=formattedTime;this.requestAnimationFrame(this.updateTextNode_)};_proto.updateContent=function updateContent(event){};return TimeDisplay}(Component);TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component.registerComponent("TimeDisplay",TimeDisplay);var CurrentTimeDisplay=function(_TimeDisplay){_inheritsLoose$1(CurrentTimeDisplay,_TimeDisplay);function CurrentTimeDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,"ended",_this.handleEnded);return _this}var _proto=CurrentTimeDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-current-time"};_proto.updateContent=function updateContent(event){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(time)};_proto.handleEnded=function handleEnded(event){if(!this.player_.duration()){return}this.updateFormattedTime_(this.player_.duration())};return CurrentTimeDisplay}(TimeDisplay);CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);var DurationDisplay=function(_TimeDisplay){_inheritsLoose$1(DurationDisplay,_TimeDisplay);function DurationDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,"durationchange",_this.updateContent);_this.on(player,"loadstart",_this.updateContent);_this.on(player,"loadedmetadata",_this.throttledUpdateContent);return _this}var _proto=DurationDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-duration"};_proto.updateContent=function updateContent(event){var duration=this.player_.duration();if(this.duration_!==duration){this.duration_=duration;this.updateFormattedTime_(duration)}};return DurationDisplay}(TimeDisplay);DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component.registerComponent("DurationDisplay",DurationDisplay);var TimeDivider=function(_Component){_inheritsLoose$1(TimeDivider,_Component);function TimeDivider(){return _Component.apply(this,arguments)||this}var _proto=TimeDivider.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":true})};return TimeDivider}(Component);Component.registerComponent("TimeDivider",TimeDivider);var RemainingTimeDisplay=function(_TimeDisplay){_inheritsLoose$1(RemainingTimeDisplay,_TimeDisplay);function RemainingTimeDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,"durationchange",_this.throttledUpdateContent);_this.on(player,"ended",_this.handleEnded);return _this}var _proto=RemainingTimeDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-remaining-time"};_proto.createEl=function createEl$$1(){var el=_TimeDisplay.prototype.createEl.call(this);el.insertBefore(createEl("span",{},{"aria-hidden":true},"-"),this.contentEl_);return el};_proto.updateContent=function updateContent(event){if(typeof this.player_.duration()!=="number"){return}if(this.player_.remainingTimeDisplay){this.updateFormattedTime_(this.player_.remainingTimeDisplay())}else{this.updateFormattedTime_(this.player_.remainingTime())}};_proto.handleEnded=function handleEnded(event){if(!this.player_.duration()){return}this.updateFormattedTime_(0)};return RemainingTimeDisplay}(TimeDisplay);RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);var LiveDisplay=function(_Component){_inheritsLoose$1(LiveDisplay,_Component);function LiveDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.updateShowing();_this.on(_this.player(),"durationchange",_this.updateShowing);return _this}var _proto=LiveDisplay.prototype;_proto.createEl=function createEl$$1(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"});el.appendChild(this.contentEl_);return el};_proto.dispose=function dispose(){this.contentEl_=null;_Component.prototype.dispose.call(this)};_proto.updateShowing=function updateShowing(event){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return LiveDisplay}(Component);Component.registerComponent("LiveDisplay",LiveDisplay);var SeekToLive=function(_Button){_inheritsLoose$1(SeekToLive,_Button);function SeekToLive(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.updateLiveEdgeStatus();if(_this.player_.liveTracker){_this.on(_this.player_.liveTracker,"liveedgechange",_this.updateLiveEdgeStatus)}return _this}var _proto=SeekToLive.prototype;_proto.createEl=function createEl$$1(){var el=_Button.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});el.appendChild(this.textEl_);return el};_proto.updateLiveEdgeStatus=function updateLiveEdgeStatus(e){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live")}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live")}};_proto.handleClick=function handleClick(){this.player_.liveTracker.seekToLiveEdge()};_proto.dispose=function dispose(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus)}this.textEl_=null;_Button.prototype.dispose.call(this)};return SeekToLive}(Button);SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component.registerComponent("SeekToLive",SeekToLive);var Slider=function(_Component){_inheritsLoose$1(Slider,_Component);function Slider(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.bar=_this.getChild(_this.options_.barName);_this.vertical(!!_this.options_.vertical);_this.enable();return _this}var _proto=Slider.prototype;_proto.enabled=function enabled(){return this.enabled_};_proto.enable=function enable(){if(this.enabled()){return}this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update)}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true};_proto.disable=function disable(){if(!this.enabled()){return}var doc=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(doc,"mousemove",this.handleMouseMove);this.off(doc,"mouseup",this.handleMouseUp);this.off(doc,"touchmove",this.handleMouseMove);this.off(doc,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update)}this.enabled_=false};_proto.createEl=function createEl$$1(type,props,attributes){if(props===void 0){props={}}if(attributes===void 0){attributes={}}props.className=props.className+" vjs-slider";props=assign({tabIndex:0},props);attributes=assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},attributes);return _Component.prototype.createEl.call(this,type,props,attributes)};_proto.handleMouseDown=function handleMouseDown(event){var doc=this.bar.el_.ownerDocument;if(event.type==="mousedown"){event.preventDefault()}if(event.type==="touchstart"&&!IS_CHROME){event.preventDefault()}blockTextSelection();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(doc,"mousemove",this.handleMouseMove);this.on(doc,"mouseup",this.handleMouseUp);this.on(doc,"touchmove",this.handleMouseMove);this.on(doc,"touchend",this.handleMouseUp);this.handleMouseMove(event)};_proto.handleMouseMove=function handleMouseMove(event){};_proto.handleMouseUp=function handleMouseUp(){var doc=this.bar.el_.ownerDocument;unblockTextSelection();this.removeClass("vjs-sliding");
this.trigger("sliderinactive");this.off(doc,"mousemove",this.handleMouseMove);this.off(doc,"mouseup",this.handleMouseUp);this.off(doc,"touchmove",this.handleMouseMove);this.off(doc,"touchend",this.handleMouseUp);this.update()};_proto.update=function update(){if(!this.el_){return}var progress=this.getPercent();var bar=this.bar;if(!bar){return}if(typeof progress!=="number"||progress!==progress||progress<0||progress===Infinity){progress=0}var percentage=(progress*100).toFixed(2)+"%";var style=bar.el().style;if(this.vertical()){style.height=percentage}else{style.width=percentage}return progress};_proto.calculateDistance=function calculateDistance(event){var position=getPointerPosition(this.el_,event);if(this.vertical()){return position.y}return position.x};_proto.handleFocus=function handleFocus(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,"Left")||keycode.isEventKey(event,"Down")){event.preventDefault();this.stepBack()}else if(keycode.isEventKey(event,"Right")||keycode.isEventKey(event,"Up")){event.preventDefault();this.stepForward()}else{_Component.prototype.handleKeyPress.call(this,event)}};_proto.handleBlur=function handleBlur(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};_proto.handleClick=function handleClick(event){event.stopImmediatePropagation();event.preventDefault()};_proto.vertical=function vertical(bool){if(bool===undefined){return this.vertical_||false}this.vertical_=!!bool;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}};return Slider}(Component);Component.registerComponent("Slider",Slider);var LoadProgressBar=function(_Component){_inheritsLoose$1(LoadProgressBar,_Component);function LoadProgressBar(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.partEls_=[];_this.on(player,"progress",_this.update);return _this}var _proto=LoadProgressBar.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})};_proto.dispose=function dispose(){this.partEls_=null;_Component.prototype.dispose.call(this)};_proto.update=function update(event){var liveTracker=this.player_.liveTracker;var buffered=this.player_.buffered();var duration=liveTracker&&liveTracker.isLive()?liveTracker.seekableEnd():this.player_.duration();var bufferedEnd=this.player_.bufferedEnd();var children=this.partEls_;var controlTextPercentage=this.$(".vjs-control-text-loaded-percentage");var percentify=function percentify(time,end,rounded){var percent=time/end||0;percent=(percent>=1?1:percent)*100;if(rounded){percent=percent.toFixed(2)}return percent+"%"};this.el_.style.width=percentify(bufferedEnd,duration);textContent(controlTextPercentage,percentify(bufferedEnd,duration,true));for(var i=0;i<buffered.length;i++){var start=buffered.start(i);var end=buffered.end(i);var part=children[i];if(!part){part=this.el_.appendChild(createEl());children[i]=part}part.style.left=percentify(start,bufferedEnd);part.style.width=percentify(end-start,bufferedEnd)}for(var _i=children.length;_i>buffered.length;_i--){this.el_.removeChild(children[_i-1])}children.length=buffered.length};return LoadProgressBar}(Component);Component.registerComponent("LoadProgressBar",LoadProgressBar);var TimeTooltip=function(_Component){_inheritsLoose$1(TimeTooltip,_Component);function TimeTooltip(){return _Component.apply(this,arguments)||this}var _proto=TimeTooltip.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};_proto.update=function update(seekBarRect,seekBarPoint,content){var tooltipRect=getBoundingClientRect(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var seekBarPointPx=seekBarRect.width*seekBarPoint;if(!playerRect||!tooltipRect){return}var spaceLeftOfPoint=seekBarRect.left-playerRect.left+seekBarPointPx;var spaceRightOfPoint=seekBarRect.width-seekBarPointPx+(playerRect.right-seekBarRect.right);var pullTooltipBy=tooltipRect.width/2;if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint}if(pullTooltipBy<0){pullTooltipBy=0}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width}this.el_.style.right="-"+pullTooltipBy+"px";textContent(this.el_,content)};_proto.updateTime=function updateTime(seekBarRect,seekBarPoint,time,cb){var _this=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_)}this.rafId_=this.requestAnimationFrame(function(){var content;var duration=_this.player_.duration();if(_this.player_.liveTracker&&_this.player_.liveTracker.isLive()){var liveWindow=_this.player_.liveTracker.liveWindow();var secondsBehind=liveWindow-seekBarPoint*liveWindow;content=(secondsBehind<1?"":"-")+formatTime(secondsBehind,liveWindow)}else{content=formatTime(time,duration)}_this.update(seekBarRect,seekBarPoint,content);if(cb){cb()}})};return TimeTooltip}(Component);Component.registerComponent("TimeTooltip",TimeTooltip);var PlayProgressBar=function(_Component){_inheritsLoose$1(PlayProgressBar,_Component);function PlayProgressBar(){return _Component.apply(this,arguments)||this}var _proto=PlayProgressBar.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};_proto.update=function update(seekBarRect,seekBarPoint){var timeTooltip=this.getChild("timeTooltip");if(!timeTooltip){return}var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();timeTooltip.updateTime(seekBarRect,seekBarPoint,time)};return PlayProgressBar}(Component);PlayProgressBar.prototype.options_={children:[]};if(!IS_IOS&&!IS_ANDROID){PlayProgressBar.prototype.options_.children.push("timeTooltip")}Component.registerComponent("PlayProgressBar",PlayProgressBar);var MouseTimeDisplay=function(_Component){_inheritsLoose$1(MouseTimeDisplay,_Component);function MouseTimeDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.update),25);return _this}var _proto=MouseTimeDisplay.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};_proto.update=function update(seekBarRect,seekBarPoint){var _this2=this;var time=seekBarPoint*this.player_.duration();this.getChild("timeTooltip").updateTime(seekBarRect,seekBarPoint,time,function(){_this2.el_.style.left=seekBarRect.width*seekBarPoint+"px"})};return MouseTimeDisplay}(Component);MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component.registerComponent("MouseTimeDisplay",MouseTimeDisplay);var STEP_SECONDS=5;var PAGE_KEY_MULTIPLIER=12;var UPDATE_REFRESH_INTERVAL=30;var SeekBar=function(_Slider){_inheritsLoose$1(SeekBar,_Slider);function SeekBar(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.setEventHandlers_();return _this}var _proto=SeekBar.prototype;_proto.setEventHandlers_=function setEventHandlers_(){this.update=throttle(bind(this,this.update),UPDATE_REFRESH_INTERVAL);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.on(this.player_,"durationchange",this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in document_1&&"visibilityState"in document_1){this.on(document_1,"visibilitychange",this.toggleVisibility_)}};_proto.toggleVisibility_=function toggleVisibility_(e){if(document_1.hidden){this.disableInterval_(e)}else{this.enableInterval_();this.requestAnimationFrame(this.update)}};_proto.enableInterval_=function enableInterval_(){var _this2=this;this.clearInterval(this.updateInterval);this.updateInterval=this.setInterval(function(){_this2.requestAnimationFrame(_this2.update)},UPDATE_REFRESH_INTERVAL)};_proto.disableInterval_=function disableInterval_(e){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e.type!=="ended"){return}this.clearInterval(this.updateInterval)};_proto.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};_proto.update_=function update_(currentTime,percent){var liveTracker=this.player_.liveTracker;var duration=this.player_.duration();if(liveTracker&&liveTracker.isLive()){duration=this.player_.liveTracker.liveCurrentTime()}this.el_.setAttribute("aria-valuenow",(percent*100).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(currentTime,duration),formatTime(duration,duration)],"{1} of {2}"));if(this.bar){this.bar.update(getBoundingClientRect(this.el_),percent)}};_proto.update=function update(event){if(this.el().offsetParent===null){return}var percent=_Slider.prototype.update.call(this);this.update_(this.getCurrentTime_(),percent);return percent};_proto.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};_proto.handleEnded=function handleEnded(event){this.update_(this.player_.duration(),1)};_proto.getPercent=function getPercent(){var currentTime=this.getCurrentTime_();var percent;var liveTracker=this.player_.liveTracker;if(liveTracker&&liveTracker.isLive()){percent=(currentTime-liveTracker.seekableStart())/liveTracker.liveWindow();if(liveTracker.atLiveEdge()){percent=1}}else{percent=currentTime/this.player_.duration()}return percent>=1?1:percent||0};_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return}event.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();_Slider.prototype.handleMouseDown.call(this,event)};_proto.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return}var newTime;var distance=this.calculateDistance(event);var liveTracker=this.player_.liveTracker;if(!liveTracker||!liveTracker.isLive()){newTime=distance*this.player_.duration();if(newTime===this.player_.duration()){newTime=newTime-.1}}else{var seekableStart=liveTracker.seekableStart();var seekableEnd=liveTracker.liveCurrentTime();newTime=seekableStart+distance*liveTracker.liveWindow();if(newTime>=seekableEnd){newTime=seekableEnd}if(newTime<=seekableStart){newTime=seekableStart+.1}if(newTime===Infinity){return}}this.player_.currentTime(newTime)};_proto.enable=function enable(){_Slider.prototype.enable.call(this);var mouseTimeDisplay=this.getChild("mouseTimeDisplay");if(!mouseTimeDisplay){return}mouseTimeDisplay.show()};_proto.disable=function disable(){_Slider.prototype.disable.call(this);var mouseTimeDisplay=this.getChild("mouseTimeDisplay");if(!mouseTimeDisplay){return}mouseTimeDisplay.hide()};_proto.handleMouseUp=function handleMouseUp(event){_Slider.prototype.handleMouseUp.call(this,event);if(event){event.stopPropagation()}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){silencePromise(this.player_.play())}};_proto.stepForward=function stepForward(){this.player_.currentTime(this.player_.currentTime()+STEP_SECONDS)};_proto.stepBack=function stepBack(){this.player_.currentTime(this.player_.currentTime()-STEP_SECONDS)};_proto.handleAction=function handleAction(event){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,"Space")||keycode.isEventKey(event,"Enter")){event.preventDefault();this.handleAction(event)}else if(keycode.isEventKey(event,"Home")){event.preventDefault();this.player_.currentTime(0)}else if(keycode.isEventKey(event,"End")){event.preventDefault();this.player_.currentTime(this.player_.duration())}else if(/^[0-9]$/.test(keycode(event))){event.preventDefault();var gotoFraction=(keycode.codes[keycode(event)]-keycode.codes["0"])*10/100;this.player_.currentTime(this.player_.duration()*gotoFraction)}else if(keycode.isEventKey(event,"PgDn")){event.preventDefault();this.player_.currentTime(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER)}else if(keycode.isEventKey(event,"PgUp")){event.preventDefault();this.player_.currentTime(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER)}else{_Slider.prototype.handleKeyPress.call(this,event)}};return SeekBar}(Slider);SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!IS_IOS&&!IS_ANDROID){SeekBar.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}Component.registerComponent("SeekBar",SeekBar);var ProgressControl=function(_Component){_inheritsLoose$1(ProgressControl,_Component);function ProgressControl(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.handleMouseMove=throttle(bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.handleMouseMove),25);_this.throttledHandleMouseSeek=throttle(bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.handleMouseSeek),25);_this.enable();return _this}var _proto=ProgressControl.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};_proto.handleMouseMove=function handleMouseMove(event){var seekBar=this.getChild("seekBar");if(seekBar){var mouseTimeDisplay=seekBar.getChild("mouseTimeDisplay");var seekBarEl=seekBar.el();var seekBarRect=getBoundingClientRect(seekBarEl);var seekBarPoint=getPointerPosition(seekBarEl,event).x;if(seekBarPoint>1){seekBarPoint=1}else if(seekBarPoint<0){seekBarPoint=0}if(mouseTimeDisplay){mouseTimeDisplay.update(seekBarRect,seekBarPoint)}}};_proto.handleMouseSeek=function handleMouseSeek(event){var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseMove(event)}};_proto.enabled=function enabled(){return this.enabled_};_proto.disable=function disable(){this.children().forEach(function(child){return child.disable&&child.disable()});if(!this.enabled()){return}this.off(["mousedown","touchstart"],this.handleMouseDown);this.off(this.el_,"mousemove",this.handleMouseMove);this.handleMouseUp();this.addClass("disabled");this.enabled_=false};_proto.enable=function enable(){this.children().forEach(function(child){return child.enable&&child.enable()});if(this.enabled()){return}this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true};_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseDown(event)}this.on(doc,"mousemove",this.throttledHandleMouseSeek);this.on(doc,"touchmove",this.throttledHandleMouseSeek);this.on(doc,"mouseup",this.handleMouseUp);this.on(doc,"touchend",this.handleMouseUp)};_proto.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseUp(event)}this.off(doc,"mousemove",this.throttledHandleMouseSeek);this.off(doc,"touchmove",this.throttledHandleMouseSeek);this.off(doc,"mouseup",this.handleMouseUp);this.off(doc,"touchend",this.handleMouseUp)};return ProgressControl}(Component);ProgressControl.prototype.options_={children:["seekBar"]};Component.registerComponent("ProgressControl",ProgressControl);var FullscreenToggle=function(_Button){_inheritsLoose$1(FullscreenToggle,_Button);function FullscreenToggle(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.on(player,"fullscreenchange",_this.handleFullscreenChange);if(document_1[FullscreenApi.fullscreenEnabled]===false){_this.disable()}return _this}var _proto=FullscreenToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-fullscreen-control "+_Button.prototype.buildCSSClass.call(this)};_proto.handleFullscreenChange=function handleFullscreenChange(event){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};_proto.handleClick=function handleClick(event){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return FullscreenToggle}(Button);FullscreenToggle.prototype.controlText_="Fullscreen";Component.registerComponent("FullscreenToggle",FullscreenToggle);var checkVolumeSupport=function checkVolumeSupport(self,player){if(player.tech_&&!player.tech_.featuresVolumeControl){self.addClass("vjs-hidden")}self.on(player,"loadstart",function(){if(!player.tech_.featuresVolumeControl){self.addClass("vjs-hidden")}else{self.removeClass("vjs-hidden")}})};var VolumeLevel=function(_Component){_inheritsLoose$1(VolumeLevel,_Component);function VolumeLevel(){return _Component.apply(this,arguments)||this}var _proto=VolumeLevel.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return VolumeLevel}(Component);Component.registerComponent("VolumeLevel",VolumeLevel);var VolumeBar=function(_Slider){_inheritsLoose$1(VolumeBar,_Slider);function VolumeBar(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.on("slideractive",_this.updateLastVolume_);_this.on(player,"volumechange",_this.updateARIAAttributes);player.ready(function(){return _this.updateARIAAttributes()});return _this}var _proto=VolumeBar.prototype;_proto.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return}_Slider.prototype.handleMouseDown.call(this,event)};_proto.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return}this.checkMuted();this.player_.volume(this.calculateDistance(event))};_proto.checkMuted=function checkMuted(){if(this.player_.muted()){this.player_.muted(false)}};_proto.getPercent=function getPercent(){if(this.player_.muted()){return 0}return this.player_.volume()};_proto.stepForward=function stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};_proto.stepBack=function stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};_proto.updateARIAAttributes=function updateARIAAttributes(event){var ariaValue=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",ariaValue);this.el_.setAttribute("aria-valuetext",ariaValue+"%")};_proto.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(this.player_.volume()*100)};_proto.updateLastVolume_=function updateLastVolume_(){var _this2=this;var volumeBeforeDrag=this.player_.volume();this.one("sliderinactive",function(){if(_this2.player_.volume()===0){_this2.player_.lastVolume_(volumeBeforeDrag)}})};return VolumeBar}(Slider);VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};VolumeBar.prototype.playerEvent="volumechange";Component.registerComponent("VolumeBar",VolumeBar);var VolumeControl=function(_Component){_inheritsLoose$1(VolumeControl,_Component);function VolumeControl(player,options){var _this;if(options===void 0){options={}}options.vertical=options.vertical||false;if(typeof options.volumeBar==="undefined"||isPlain(options.volumeBar)){options.volumeBar=options.volumeBar||{};options.volumeBar.vertical=options.vertical}_this=_Component.call(this,player,options)||this;checkVolumeSupport(_assertThisInitialized$1(_assertThisInitialized$1(_this)),player);_this.throttledHandleMouseMove=throttle(bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.handleMouseMove),25);_this.on("mousedown",_this.handleMouseDown);_this.on("touchstart",_this.handleMouseDown);_this.on(_this.volumeBar,["focus","slideractive"],function(){_this.volumeBar.addClass("vjs-slider-active");_this.addClass("vjs-slider-active");_this.trigger("slideractive")});_this.on(_this.volumeBar,["blur","sliderinactive"],function(){_this.volumeBar.removeClass("vjs-slider-active");_this.removeClass("vjs-slider-active");_this.trigger("sliderinactive")});return _this}var _proto=VolumeControl.prototype;_proto.createEl=function createEl(){var orientationClass="vjs-volume-horizontal";if(this.options_.vertical){orientationClass="vjs-volume-vertical"}return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+orientationClass})};_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;this.on(doc,"mousemove",this.throttledHandleMouseMove);this.on(doc,"touchmove",this.throttledHandleMouseMove);this.on(doc,"mouseup",this.handleMouseUp);this.on(doc,"touchend",this.handleMouseUp)};_proto.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;this.off(doc,"mousemove",this.throttledHandleMouseMove);this.off(doc,"touchmove",this.throttledHandleMouseMove);this.off(doc,"mouseup",this.handleMouseUp);this.off(doc,"touchend",this.handleMouseUp)};_proto.handleMouseMove=function handleMouseMove(event){this.volumeBar.handleMouseMove(event)};return VolumeControl}(Component);VolumeControl.prototype.options_={children:["volumeBar"]};Component.registerComponent("VolumeControl",VolumeControl);var checkMuteSupport=function checkMuteSupport(self,player){if(player.tech_&&!player.tech_.featuresMuteControl){self.addClass("vjs-hidden")}self.on(player,"loadstart",function(){if(!player.tech_.featuresMuteControl){self.addClass("vjs-hidden")}else{self.removeClass("vjs-hidden")}})};var MuteToggle=function(_Button){_inheritsLoose$1(MuteToggle,_Button);function MuteToggle(player,options){var _this;_this=_Button.call(this,player,options)||this;checkMuteSupport(_assertThisInitialized$1(_assertThisInitialized$1(_this)),player);_this.on(player,["loadstart","volumechange"],_this.update);return _this}var _proto=MuteToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-mute-control "+_Button.prototype.buildCSSClass.call(this)};_proto.handleClick=function handleClick(event){var vol=this.player_.volume();var lastVolume=this.player_.lastVolume_();if(vol===0){var volumeToSet=lastVolume<.1?.1:lastVolume;this.player_.volume(volumeToSet);this.player_.muted(false)}else{this.player_.muted(this.player_.muted()?false:true)}};_proto.update=function update(event){this.updateIcon_();this.updateControlText_()};_proto.updateIcon_=function updateIcon_(){var vol=this.player_.volume();var level=3;if(IS_IOS&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted)}if(vol===0||this.player_.muted()){level=0}else if(vol<.33){level=1}else if(vol<.67){level=2}for(var i=0;i<4;i++){removeClass(this.el_,"vjs-vol-"+i)}addClass(this.el_,"vjs-vol-"+level)};_proto.updateControlText_=function updateControlText_(){var soundOff=this.player_.muted()||this.player_.volume()===0;var text=soundOff?"Unmute":"Mute";if(this.controlText()!==text){this.controlText(text)}};return MuteToggle}(Button);MuteToggle.prototype.controlText_="Mute";Component.registerComponent("MuteToggle",MuteToggle);var VolumePanel=function(_Component){_inheritsLoose$1(VolumePanel,_Component);function VolumePanel(player,options){var _this;if(options===void 0){options={}}if(typeof options.inline!=="undefined"){options.inline=options.inline}else{options.inline=true}if(typeof options.volumeControl==="undefined"||isPlain(options.volumeControl)){options.volumeControl=options.volumeControl||{};options.volumeControl.vertical=!options.inline}_this=_Component.call(this,player,options)||this;_this.on(player,["loadstart"],_this.volumePanelState_);_this.on(_this.volumeControl,["slideractive"],_this.sliderActive_);_this.on(_this.volumeControl,["sliderinactive"],_this.sliderInactive_);return _this}var _proto=VolumePanel.prototype;_proto.sliderActive_=function sliderActive_(){this.addClass("vjs-slider-active")};_proto.sliderInactive_=function sliderInactive_(){this.removeClass("vjs-slider-active")};_proto.volumePanelState_=function volumePanelState_(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden")}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only")}};_proto.createEl=function createEl(){var orientationClass="vjs-volume-panel-horizontal";if(!this.options_.inline){orientationClass="vjs-volume-panel-vertical"}return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+orientationClass})};return VolumePanel}(Component);VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component.registerComponent("VolumePanel",VolumePanel);var Menu=function(_Component){_inheritsLoose$1(Menu,_Component);function Menu(player,options){var _this;_this=_Component.call(this,player,options)||this;if(options){_this.menuButton_=options.menuButton}_this.focusedChild_=-1;_this.on("keydown",_this.handleKeyPress);_this.boundHandleBlur_=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.handleBlur);_this.boundHandleTapClick_=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.handleTapClick);return _this}var _proto=Menu.prototype;_proto.addEventListenerForItem=function addEventListenerForItem(component){if(!(component instanceof Component)){return}this.on(component,"blur",this.boundHandleBlur_);this.on(component,["tap","click"],this.boundHandleTapClick_)};_proto.removeEventListenerForItem=function removeEventListenerForItem(component){if(!(component instanceof Component)){return}this.off(component,"blur",this.boundHandleBlur_);this.off(component,["tap","click"],this.boundHandleTapClick_)};_proto.removeChild=function removeChild(component){if(typeof component==="string"){component=this.getChild(component)}this.removeEventListenerForItem(component);_Component.prototype.removeChild.call(this,component)};_proto.addItem=function addItem(component){var childComponent=this.addChild(component);if(childComponent){this.addEventListenerForItem(childComponent)}};_proto.createEl=function createEl$$1(){var contentElType=this.options_.contentElType||"ul";this.contentEl_=createEl(contentElType,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var el=_Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});el.appendChild(this.contentEl_);on(el,"click",function(event){event.preventDefault();event.stopImmediatePropagation()});return el};_proto.dispose=function dispose(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;_Component.prototype.dispose.call(this)};_proto.handleBlur=function handleBlur(event){var relatedTarget=event.relatedTarget||document_1.activeElement;if(!this.children().some(function(element){return element.el()===relatedTarget})){var btn=this.menuButton_;if(btn&&btn.buttonPressed_&&relatedTarget!==btn.el().firstChild){btn.unpressButton()}}};_proto.handleTapClick=function handleTapClick(event){if(this.menuButton_){this.menuButton_.unpressButton();var childComponents=this.children();if(!Array.isArray(childComponents)){return}var foundComponent=childComponents.filter(function(component){return component.el()===event.target})[0];if(!foundComponent){return}if(foundComponent.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus()}}};_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,"Left")||keycode.isEventKey(event,"Down")){event.preventDefault();this.stepForward()}else if(keycode.isEventKey(event,"Right")||keycode.isEventKey(event,"Up")){event.preventDefault();this.stepBack()}};_proto.stepForward=function stepForward(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_+1}this.focus(stepChild)};_proto.stepBack=function stepBack(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_-1}this.focus(stepChild)};_proto.focus=function focus(item){if(item===void 0){item=0}var children=this.children().slice();var haveTitle=children.length&&children[0].className&&/vjs-menu-title/.test(children[0].className);if(haveTitle){children.shift()}if(children.length>0){if(item<0){item=0}else if(item>=children.length){item=children.length-1}this.focusedChild_=item;children[item].el_.focus()}};return Menu}(Component);Component.registerComponent("Menu",Menu);var MenuButton=function(_Component){_inheritsLoose$1(MenuButton,_Component);function MenuButton(player,options){var _this;if(options===void 0){options={}}_this=_Component.call(this,player,options)||this;_this.menuButton_=new Button(player,options);_this.menuButton_.controlText(_this.controlText_);_this.menuButton_.el_.setAttribute("aria-haspopup","true");var buttonClass=Button.prototype.buildCSSClass();_this.menuButton_.el_.className=_this.buildCSSClass()+" "+buttonClass;_this.menuButton_.removeClass("vjs-control");_this.addChild(_this.menuButton_);_this.update();_this.enabled_=true;_this.on(_this.menuButton_,"tap",_this.handleClick);_this.on(_this.menuButton_,"click",_this.handleClick);_this.on(_this.menuButton_,"focus",_this.handleFocus);_this.on(_this.menuButton_,"blur",_this.handleBlur);_this.on(_this.menuButton_,"mouseenter",function(){_this.menu.show()});_this.on("keydown",_this.handleSubmenuKeyPress);return _this}var _proto=MenuButton.prototype;_proto.update=function update(){var menu=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu)}this.menu=menu;this.addChild(menu);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};_proto.createMenu=function createMenu(){var menu=new Menu(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var titleEl=createEl("li",{className:"vjs-menu-title",innerHTML:toTitleCase(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var titleComponent=new Component(this.player_,{el:titleEl});menu.addItem(titleComponent)}this.items=this.createItems();if(this.items){for(var i=0;i<this.items.length;i++){menu.addItem(this.items[i])}}return menu};_proto.createItems=function createItems(){};_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline"}else{menuButtonClass+="-popup"}var buttonClass=Button.prototype.buildCSSClass();return"vjs-menu-button "+menuButtonClass+" "+buttonClass+" "+_Component.prototype.buildCSSClass.call(this)};_proto.buildCSSClass=function buildCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline"}else{menuButtonClass+="-popup"}return"vjs-menu-button "+menuButtonClass+" "+_Component.prototype.buildCSSClass.call(this)};_proto.controlText=function controlText(text,el){if(el===void 0){el=this.menuButton_.el()}return this.menuButton_.controlText(text,el)};_proto.handleClick=function handleClick(event){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};_proto.focus=function focus(){this.menuButton_.focus()};_proto.blur=function blur(){this.menuButton_.blur()};_proto.handleFocus=function handleFocus(){on(document_1,"keydown",bind(this,this.handleKeyPress));
};_proto.handleBlur=function handleBlur(){off(document_1,"keydown",bind(this,this.handleKeyPress))};_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,"Esc")||keycode.isEventKey(event,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!keycode.isEventKey(event,"Tab")){event.preventDefault();this.menuButton_.focus()}}else if(keycode.isEventKey(event,"Up")||keycode.isEventKey(event,"Down")){if(!this.buttonPressed_){event.preventDefault();this.pressButton()}}};_proto.handleSubmenuKeyPress=function handleSubmenuKeyPress(event){if(keycode.isEventKey(event,"Esc")||keycode.isEventKey(event,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!keycode.isEventKey(event,"Tab")){event.preventDefault();this.menuButton_.focus()}}};_proto.pressButton=function pressButton(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(IS_IOS&&isInFrame()){return}this.menu.focus()}};_proto.unpressButton=function unpressButton(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false")}};_proto.disable=function disable(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable()};_proto.enable=function enable(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable()};return MenuButton}(Component);Component.registerComponent("MenuButton",MenuButton);var TrackButton=function(_MenuButton){_inheritsLoose$1(TrackButton,_MenuButton);function TrackButton(player,options){var _this;var tracks=options.tracks;_this=_MenuButton.call(this,player,options)||this;if(_this.items.length<=1){_this.hide()}if(!tracks){return _assertThisInitialized$1(_this)}var updateHandler=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.update);tracks.addEventListener("removetrack",updateHandler);tracks.addEventListener("addtrack",updateHandler);_this.player_.on("ready",updateHandler);_this.player_.on("dispose",function(){tracks.removeEventListener("removetrack",updateHandler);tracks.removeEventListener("addtrack",updateHandler)});return _this}return TrackButton}(MenuButton);Component.registerComponent("TrackButton",TrackButton);var MenuKeys=["Tab","Esc","Up","Down","Right","Left"];var MenuItem=function(_ClickableComponent){_inheritsLoose$1(MenuItem,_ClickableComponent);function MenuItem(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.selectable=options.selectable;_this.isSelected_=options.selected||false;_this.multiSelectable=options.multiSelectable;_this.selected(_this.isSelected_);if(_this.selectable){if(_this.multiSelectable){_this.el_.setAttribute("role","menuitemcheckbox")}else{_this.el_.setAttribute("role","menuitemradio")}}else{_this.el_.setAttribute("role","menuitem")}return _this}var _proto=MenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){this.nonIconControl=true;return _ClickableComponent.prototype.createEl.call(this,"li",assign({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},props),attrs)};_proto.handleKeyPress=function handleKeyPress(event){if(!MenuKeys.some(function(key){return keycode.isEventKey(event,key)})){_ClickableComponent.prototype.handleKeyPress.call(this,event)}};_proto.handleClick=function handleClick(event){this.selected(true)};_proto.selected=function selected(_selected){if(this.selectable){if(_selected){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false}}};return MenuItem}(ClickableComponent);Component.registerComponent("MenuItem",MenuItem);var TextTrackMenuItem=function(_MenuItem){_inheritsLoose$1(TextTrackMenuItem,_MenuItem);function TextTrackMenuItem(player,options){var _this;var track=options.track;var tracks=player.textTracks();options.label=track.label||track.language||"Unknown";options.selected=track.mode==="showing";_this=_MenuItem.call(this,player,options)||this;_this.track=track;var changeHandler=function changeHandler(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this.handleTracksChange.apply(_assertThisInitialized$1(_assertThisInitialized$1(_this)),args)};var selectedLanguageChangeHandler=function selectedLanguageChangeHandler(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}_this.handleSelectedLanguageChange.apply(_assertThisInitialized$1(_assertThisInitialized$1(_this)),args)};player.on(["loadstart","texttrackchange"],changeHandler);tracks.addEventListener("change",changeHandler);tracks.addEventListener("selectedlanguagechange",selectedLanguageChangeHandler);_this.on("dispose",function(){player.off(["loadstart","texttrackchange"],changeHandler);tracks.removeEventListener("change",changeHandler);tracks.removeEventListener("selectedlanguagechange",selectedLanguageChangeHandler)});if(tracks.onchange===undefined){var event;_this.on(["tap","click"],function(){if(_typeof2(window_1.Event)!=="object"){try{event=new window_1.Event("change")}catch(err){}}if(!event){event=document_1.createEvent("Event");event.initEvent("change",true,true)}tracks.dispatchEvent(event)})}_this.handleTracksChange();return _this}var _proto=TextTrackMenuItem.prototype;_proto.handleClick=function handleClick(event){var referenceTrack=this.track;var tracks=this.player_.textTracks();_MenuItem.prototype.handleClick.call(this,event);if(!tracks){return}var kinds=(referenceTrack.kinds||[referenceTrack.kind]).filter(Boolean);for(var i=0;i<tracks.length;i++){var track=tracks[i];if(kinds.indexOf(track.kind)===-1){continue}if(track===referenceTrack){if(track.mode!=="showing"){track.mode="showing"}}else if(track.mode!=="disabled"){track.mode="disabled"}}};_proto.handleTracksChange=function handleTracksChange(event){var shouldBeSelected=this.track.mode==="showing";if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected)}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){if(this.track.mode==="showing"){var selectedLanguage=this.player_.cache_.selectedLanguage;if(selectedLanguage&&selectedLanguage.enabled&&selectedLanguage.language===this.track.language&&selectedLanguage.kind!==this.track.kind){return}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind}}};_proto.dispose=function dispose(){this.track=null;_MenuItem.prototype.dispose.call(this)};return TextTrackMenuItem}(MenuItem);Component.registerComponent("TextTrackMenuItem",TextTrackMenuItem);var OffTextTrackMenuItem=function(_TextTrackMenuItem){_inheritsLoose$1(OffTextTrackMenuItem,_TextTrackMenuItem);function OffTextTrackMenuItem(player,options){options.track={player:player,kind:options.kind,kinds:options.kinds,"default":false,mode:"disabled"};if(!options.kinds){options.kinds=[options.kind]}if(options.label){options.track.label=options.label}else{options.track.label=options.kinds.join(" and ")+" off"}options.selectable=true;options.multiSelectable=false;return _TextTrackMenuItem.call(this,player,options)||this}var _proto=OffTextTrackMenuItem.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var shouldBeSelected=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(this.options_.kinds.indexOf(track.kind)>-1&&track.mode==="showing"){shouldBeSelected=false;break}}if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected)}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){var tracks=this.player().textTracks();var allHidden=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(["captions","descriptions","subtitles"].indexOf(track.kind)>-1&&track.mode==="showing"){allHidden=false;break}}if(allHidden){this.player_.cache_.selectedLanguage={enabled:false}}};return OffTextTrackMenuItem}(TextTrackMenuItem);Component.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);var TextTrackButton=function(_TrackButton){_inheritsLoose$1(TextTrackButton,_TrackButton);function TextTrackButton(player,options){if(options===void 0){options={}}options.tracks=player.textTracks();return _TrackButton.call(this,player,options)||this}var _proto=TextTrackButton.prototype;_proto.createItems=function createItems(items,TrackMenuItem){if(items===void 0){items=[]}if(TrackMenuItem===void 0){TrackMenuItem=TextTrackMenuItem}var label;if(this.label_){label=this.label_+" off"}items.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:label}));this.hideThreshold_+=1;var tracks=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_]}for(var i=0;i<tracks.length;i++){var track=tracks[i];if(this.kinds_.indexOf(track.kind)>-1){var item=new TrackMenuItem(this.player_,{track:track,selectable:true,multiSelectable:false});item.addClass("vjs-"+track.kind+"-menu-item");items.push(item)}}return items};return TextTrackButton}(TrackButton);Component.registerComponent("TextTrackButton",TextTrackButton);var ChaptersTrackMenuItem=function(_MenuItem){_inheritsLoose$1(ChaptersTrackMenuItem,_MenuItem);function ChaptersTrackMenuItem(player,options){var _this;var track=options.track;var cue=options.cue;var currentTime=player.currentTime();options.selectable=true;options.multiSelectable=false;options.label=cue.text;options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.cue=cue;track.addEventListener("cuechange",bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.update));return _this}var _proto=ChaptersTrackMenuItem.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};_proto.update=function update(event){var cue=this.cue;var currentTime=this.player_.currentTime();this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime)};return ChaptersTrackMenuItem}(MenuItem);Component.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);var ChaptersButton=function(_TextTrackButton){_inheritsLoose$1(ChaptersButton,_TextTrackButton);function ChaptersButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this}var _proto=ChaptersButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this)};_proto.update=function update(event){if(!this.track_||event&&(event.type==="addtrack"||event.type==="removetrack")){this.setTrack(this.findChaptersTrack())}_TextTrackButton.prototype.update.call(this)};_proto.setTrack=function setTrack(track){if(this.track_===track){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(remoteTextTrackEl){remoteTextTrackEl.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=track;if(this.track_){this.track_.mode="hidden";var _remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(_remoteTextTrackEl){_remoteTextTrackEl.addEventListener("load",this.updateHandler_)}}};_proto.findChaptersTrack=function findChaptersTrack(){var tracks=this.player_.textTracks()||[];for(var i=tracks.length-1;i>=0;i--){var track=tracks[i];if(track.kind===this.kind_){return track}}};_proto.getMenuCaption=function getMenuCaption(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize(toTitleCase(this.kind_))};_proto.createMenu=function createMenu(){this.options_.title=this.getMenuCaption();return _TextTrackButton.prototype.createMenu.call(this)};_proto.createItems=function createItems(){var items=[];if(!this.track_){return items}var cues=this.track_.cues;if(!cues){return items}for(var i=0,l=cues.length;i<l;i++){var cue=cues[i];var mi=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:cue});items.push(mi)}return items};return ChaptersButton}(TextTrackButton);ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component.registerComponent("ChaptersButton",ChaptersButton);var DescriptionsButton=function(_TextTrackButton){_inheritsLoose$1(DescriptionsButton,_TextTrackButton);function DescriptionsButton(player,options,ready){var _this;_this=_TextTrackButton.call(this,player,options,ready)||this;var tracks=player.textTracks();var changeHandler=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.handleTracksChange);tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler)});return _this}var _proto=DescriptionsButton.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var disabled=false;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind!==this.kind_&&track.mode==="showing"){disabled=true;break}}if(disabled){this.disable()}else{this.enable()}};_proto.buildCSSClass=function buildCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this)};return DescriptionsButton}(TextTrackButton);DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component.registerComponent("DescriptionsButton",DescriptionsButton);var SubtitlesButton=function(_TextTrackButton){_inheritsLoose$1(SubtitlesButton,_TextTrackButton);function SubtitlesButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this}var _proto=SubtitlesButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this)};return SubtitlesButton}(TextTrackButton);SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component.registerComponent("SubtitlesButton",SubtitlesButton);var CaptionSettingsMenuItem=function(_TextTrackMenuItem){_inheritsLoose$1(CaptionSettingsMenuItem,_TextTrackMenuItem);function CaptionSettingsMenuItem(player,options){var _this;options.track={player:player,kind:options.kind,label:options.kind+" settings",selectable:false,"default":false,mode:"disabled"};options.selectable=false;options.name="CaptionSettingsMenuItem";_this=_TextTrackMenuItem.call(this,player,options)||this;_this.addClass("vjs-texttrack-settings");_this.controlText(", opens "+options.kind+" settings dialog");return _this}var _proto=CaptionSettingsMenuItem.prototype;_proto.handleClick=function handleClick(event){this.player().getChild("textTrackSettings").open()};return CaptionSettingsMenuItem}(TextTrackMenuItem);Component.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);var CaptionsButton=function(_TextTrackButton){_inheritsLoose$1(CaptionsButton,_TextTrackButton);function CaptionsButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this}var _proto=CaptionsButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this)};_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return _TextTrackButton.prototype.createItems.call(this,items)};return CaptionsButton}(TextTrackButton);CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component.registerComponent("CaptionsButton",CaptionsButton);var SubsCapsMenuItem=function(_TextTrackMenuItem){_inheritsLoose$1(SubsCapsMenuItem,_TextTrackMenuItem);function SubsCapsMenuItem(){return _TextTrackMenuItem.apply(this,arguments)||this}var _proto=SubsCapsMenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){var innerHTML='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="captions"){innerHTML+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "}innerHTML+="</span>";var el=_TextTrackMenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el};return SubsCapsMenuItem}(TextTrackMenuItem);Component.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);var SubsCapsButton=function(_TextTrackButton){_inheritsLoose$1(SubsCapsButton,_TextTrackButton);function SubsCapsButton(player,options){var _this;if(options===void 0){options={}}_this=_TextTrackButton.call(this,player,options)||this;_this.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(_this.player_.language_)>-1){_this.label_="captions"}_this.menuButton_.controlText(toTitleCase(_this.label_));return _this}var _proto=SubsCapsButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildCSSClass.call(this)};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this)};_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_}));this.hideThreshold_+=1}items=_TextTrackButton.prototype.createItems.call(this,items,SubsCapsMenuItem);return items};return SubsCapsButton}(TextTrackButton);SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component.registerComponent("SubsCapsButton",SubsCapsButton);var AudioTrackMenuItem=function(_MenuItem){_inheritsLoose$1(AudioTrackMenuItem,_MenuItem);function AudioTrackMenuItem(player,options){var _this;var track=options.track;var tracks=player.audioTracks();options.label=track.label||track.language||"Unknown";options.selected=track.enabled;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.addClass("vjs-"+track.kind+"-menu-item");var changeHandler=function changeHandler(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this.handleTracksChange.apply(_assertThisInitialized$1(_assertThisInitialized$1(_this)),args)};tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler)});return _this}var _proto=AudioTrackMenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){var innerHTML='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="main-desc"){innerHTML+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "}innerHTML+="</span>";var el=_MenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el};_proto.handleClick=function handleClick(event){var tracks=this.player_.audioTracks();_MenuItem.prototype.handleClick.call(this,event);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.enabled=track===this.track}};_proto.handleTracksChange=function handleTracksChange(event){this.selected(this.track.enabled)};return AudioTrackMenuItem}(MenuItem);Component.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);var AudioTrackButton=function(_TrackButton){_inheritsLoose$1(AudioTrackButton,_TrackButton);function AudioTrackButton(player,options){if(options===void 0){options={}}options.tracks=player.audioTracks();return _TrackButton.call(this,player,options)||this}var _proto=AudioTrackButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildCSSClass.call(this)};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildWrapperCSSClass.call(this)};_proto.createItems=function createItems(items){if(items===void 0){items=[]}this.hideThreshold_=1;var tracks=this.player_.audioTracks();for(var i=0;i<tracks.length;i++){var track=tracks[i];items.push(new AudioTrackMenuItem(this.player_,{track:track,selectable:true,multiSelectable:false}))}return items};return AudioTrackButton}(TrackButton);AudioTrackButton.prototype.controlText_="Audio Track";Component.registerComponent("AudioTrackButton",AudioTrackButton);var PlaybackRateMenuItem=function(_MenuItem){_inheritsLoose$1(PlaybackRateMenuItem,_MenuItem);function PlaybackRateMenuItem(player,options){var _this;var label=options.rate;var rate=parseFloat(label,10);options.label=label;options.selected=rate===1;options.selectable=true;options.multiSelectable=false;_this=_MenuItem.call(this,player,options)||this;_this.label=label;_this.rate=rate;_this.on(player,"ratechange",_this.update);return _this}var _proto=PlaybackRateMenuItem.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};_proto.update=function update(event){this.selected(this.player().playbackRate()===this.rate)};return PlaybackRateMenuItem}(MenuItem);PlaybackRateMenuItem.prototype.contentElType="button";Component.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);var PlaybackRateMenuButton=function(_MenuButton){_inheritsLoose$1(PlaybackRateMenuButton,_MenuButton);function PlaybackRateMenuButton(player,options){var _this;_this=_MenuButton.call(this,player,options)||this;_this.updateVisibility();_this.updateLabel();_this.on(player,"loadstart",_this.updateVisibility);_this.on(player,"ratechange",_this.updateLabel);return _this}var _proto=PlaybackRateMenuButton.prototype;_proto.createEl=function createEl$$1(){var el=_MenuButton.prototype.createEl.call(this);this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});el.appendChild(this.labelEl_);return el};_proto.dispose=function dispose(){this.labelEl_=null;_MenuButton.prototype.dispose.call(this)};_proto.buildCSSClass=function buildCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildCSSClass.call(this)};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildWrapperCSSClass.call(this)};_proto.createMenu=function createMenu(){var menu=new Menu(this.player());var rates=this.playbackRates();if(rates){for(var i=rates.length-1;i>=0;i--){menu.addChild(new PlaybackRateMenuItem(this.player(),{rate:rates[i]+"x"}))}}return menu};_proto.updateARIAAttributes=function updateARIAAttributes(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};_proto.handleClick=function handleClick(event){var currentRate=this.player().playbackRate();var rates=this.playbackRates();var newRate=rates[0];for(var i=0;i<rates.length;i++){if(rates[i]>currentRate){newRate=rates[i];break}}this.player().playbackRate(newRate)};_proto.playbackRates=function playbackRates(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};_proto.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};_proto.updateVisibility=function updateVisibility(event){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};_proto.updateLabel=function updateLabel(event){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return PlaybackRateMenuButton}(MenuButton);PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);var Spacer=function(_Component){_inheritsLoose$1(Spacer,_Component);function Spacer(){return _Component.apply(this,arguments)||this}var _proto=Spacer.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-spacer "+_Component.prototype.buildCSSClass.call(this)};_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return Spacer}(Component);Component.registerComponent("Spacer",Spacer);var CustomControlSpacer=function(_Spacer){_inheritsLoose$1(CustomControlSpacer,_Spacer);function CustomControlSpacer(){return _Spacer.apply(this,arguments)||this}var _proto=CustomControlSpacer.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-custom-control-spacer "+_Spacer.prototype.buildCSSClass.call(this)};_proto.createEl=function createEl(){var el=_Spacer.prototype.createEl.call(this,{className:this.buildCSSClass()});el.innerHTML=" ";return el};return CustomControlSpacer}(Spacer);Component.registerComponent("CustomControlSpacer",CustomControlSpacer);var ControlBar=function(_Component){_inheritsLoose$1(ControlBar,_Component);function ControlBar(){return _Component.apply(this,arguments)||this}var _proto=ControlBar.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return ControlBar}(Component);ControlBar.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};Component.registerComponent("ControlBar",ControlBar);var ErrorDisplay=function(_ModalDialog){_inheritsLoose$1(ErrorDisplay,_ModalDialog);function ErrorDisplay(player,options){var _this;_this=_ModalDialog.call(this,player,options)||this;_this.on(player,"error",_this.open);return _this}var _proto=ErrorDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-error-display "+_ModalDialog.prototype.buildCSSClass.call(this)};_proto.content=function content(){var error=this.player().error();return error?this.localize(error.message):""};return ErrorDisplay}(ModalDialog);ErrorDisplay.prototype.options_=mergeOptions(ModalDialog.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});Component.registerComponent("ErrorDisplay",ErrorDisplay);var LOCAL_STORAGE_KEY="vjs-text-track-settings";var COLOR_BLACK=["#000","Black"];var COLOR_BLUE=["#00F","Blue"];var COLOR_CYAN=["#0FF","Cyan"];var COLOR_GREEN=["#0F0","Green"];var COLOR_MAGENTA=["#F0F","Magenta"];var COLOR_RED=["#F00","Red"];var COLOR_WHITE=["#FFF","White"];var COLOR_YELLOW=["#FF0","Yellow"];var OPACITY_OPAQUE=["1","Opaque"];var OPACITY_SEMI=["0.5","Semi-Transparent"];var OPACITY_TRANS=["0","Transparent"];var selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function parser(v){return v==="1.00"?null:Number(v)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(value,parser){if(parser){value=parser(value)}if(value&&value!=="none"){return value}}function getSelectedOptionValue(el,parser){var value=el.options[el.options.selectedIndex].value;return parseOptionValue(value,parser)}function setSelectedOption(el,value,parser){if(!value){return}for(var i=0;i<el.options.length;i++){if(parseOptionValue(el.options[i].value,parser)===value){el.selectedIndex=i;break}}}var TextTrackSettings=function(_ModalDialog){_inheritsLoose$1(TextTrackSettings,_ModalDialog);function TextTrackSettings(player,options){var _this;options.temporary=false;_this=_ModalDialog.call(this,player,options)||this;_this.updateDisplay=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.updateDisplay);_this.fill();_this.hasBeenOpened_=_this.hasBeenFilled_=true;_this.endDialog=createEl("p",{className:"vjs-control-text",textContent:_this.localize("End of dialog window.")});_this.el().appendChild(_this.endDialog);_this.setDefaults();if(options.persistTextTrackSettings===undefined){_this.options_.persistTextTrackSettings=_this.options_.playerOptions.persistTextTrackSettings}_this.on(_this.$(".vjs-done-button"),"click",function(){_this.saveSettings();_this.close()});_this.on(_this.$(".vjs-default-button"),"click",function(){_this.setDefaults();_this.updateDisplay()});each(selectConfigs,function(config){_this.on(_this.$(config.selector),"change",_this.updateDisplay)});if(_this.options_.persistTextTrackSettings){_this.restoreSettings()}return _this}var _proto=TextTrackSettings.prototype;_proto.dispose=function dispose(){this.endDialog=null;_ModalDialog.prototype.dispose.call(this)};_proto.createElSelect_=function createElSelect_(key,legendId,type){var _this2=this;if(legendId===void 0){legendId=""}if(type===void 0){type="label"}var config=selectConfigs[key];var id=config.id.replace("%s",this.id_);var selectLabelledbyIds=[legendId,id].join(" ").trim();return["<"+type+' id="'+id+'" class="'+(type==="label"?"vjs-label":"")+'">',this.localize(config.label),"</"+type+">",'<select aria-labelledby="'+selectLabelledbyIds+'">'].concat(config.options.map(function(o){var optionId=id+"-"+o[1].replace(/\W+/g,"");return['<option id="'+optionId+'" value="'+o[0]+'" ','aria-labelledby="'+selectLabelledbyIds+" "+optionId+'">',_this2.localize(o[1]),"</option>"].join("");
})).concat("</select>").join("")};_proto.createElFgColor_=function createElFgColor_(){var legendId="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",legendId),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",legendId),"</span>","</fieldset>"].join("")};_proto.createElBgColor_=function createElBgColor_(){var legendId="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",legendId),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",legendId),"</span>","</fieldset>"].join("")};_proto.createElWinColor_=function createElWinColor_(){var legendId="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",legendId),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",legendId),"</span>","</fieldset>"].join("")};_proto.createElColors_=function createElColors_(){return createEl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};_proto.createElFont_=function createElFont_(){return createEl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};_proto.createElControls_=function createElControls_(){var defaultsDescription=this.localize("restore all settings to the default values");return createEl("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+defaultsDescription+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+defaultsDescription+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};_proto.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};_proto.label=function label(){return this.localize("Caption Settings Dialog")};_proto.description=function description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};_proto.buildCSSClass=function buildCSSClass(){return _ModalDialog.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};_proto.getValues=function getValues(){var _this3=this;return reduce(selectConfigs,function(accum,config,key){var value=getSelectedOptionValue(_this3.$(config.selector),config.parser);if(value!==undefined){accum[key]=value}return accum},{})};_proto.setValues=function setValues(values){var _this4=this;each(selectConfigs,function(config,key){setSelectedOption(_this4.$(config.selector),values[key],config.parser)})};_proto.setDefaults=function setDefaults(){var _this5=this;each(selectConfigs,function(config){var index=config.hasOwnProperty("default")?config.default:0;_this5.$(config.selector).selectedIndex=index})};_proto.restoreSettings=function restoreSettings(){var values;try{values=JSON.parse(window_1.localStorage.getItem(LOCAL_STORAGE_KEY))}catch(err){log.warn(err)}if(values){this.setValues(values)}};_proto.saveSettings=function saveSettings(){if(!this.options_.persistTextTrackSettings){return}var values=this.getValues();try{if(Object.keys(values).length){window_1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(values))}else{window_1.localStorage.removeItem(LOCAL_STORAGE_KEY)}}catch(err){log.warn(err)}};_proto.updateDisplay=function updateDisplay(){var ttDisplay=this.player_.getChild("textTrackDisplay");if(ttDisplay){ttDisplay.updateDisplay()}};_proto.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;this.off(document_1,"keydown",this.handleKeyDown);var cb=this.player_.controlBar;var subsCapsBtn=cb&&cb.subsCapsButton;var ccBtn=cb&&cb.captionsButton;if(subsCapsBtn){subsCapsBtn.focus()}else if(ccBtn){ccBtn.focus()}};return TextTrackSettings}(ModalDialog);Component.registerComponent("TextTrackSettings",TextTrackSettings);var ResizeManager=function(_Component){_inheritsLoose$1(ResizeManager,_Component);function ResizeManager(player,options){var _this;var RESIZE_OBSERVER_AVAILABLE=options.ResizeObserver||window_1.ResizeObserver;if(options.ResizeObserver===null){RESIZE_OBSERVER_AVAILABLE=false}var options_=mergeOptions({createEl:!RESIZE_OBSERVER_AVAILABLE,reportTouchActivity:false},options);_this=_Component.call(this,player,options_)||this;_this.ResizeObserver=options.ResizeObserver||window_1.ResizeObserver;_this.loadListener_=null;_this.resizeObserver_=null;_this.debouncedHandler_=debounce(function(){_this.resizeHandler()},100,false,_assertThisInitialized$1(_assertThisInitialized$1(_this)));if(RESIZE_OBSERVER_AVAILABLE){_this.resizeObserver_=new _this.ResizeObserver(_this.debouncedHandler_);_this.resizeObserver_.observe(player.el())}else{_this.loadListener_=function(){if(!_this.el_||!_this.el_.contentWindow){return}var debouncedHandler_=_this.debouncedHandler_;var unloadListener_=_this.unloadListener_=function(){off(this,"resize",debouncedHandler_);off(this,"unload",unloadListener_);unloadListener_=null};on(_this.el_.contentWindow,"unload",unloadListener_);on(_this.el_.contentWindow,"resize",debouncedHandler_)};_this.one("load",_this.loadListener_)}return _this}var _proto=ResizeManager.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};_proto.resizeHandler=function resizeHandler(){if(!this.player_||!this.player_.trigger){return}this.player_.trigger("playerresize")};_proto.dispose=function dispose(){if(this.debouncedHandler_){this.debouncedHandler_.cancel()}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el())}this.resizeObserver_.disconnect()}if(this.loadListener_){this.off("load",this.loadListener_)}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow)}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;_Component.prototype.dispose.call(this)};return ResizeManager}(Component);Component.registerComponent("ResizeManager",ResizeManager);var LiveTracker=function(_Component){_inheritsLoose$1(LiveTracker,_Component);function LiveTracker(player,options){var _this;var options_=mergeOptions({createEl:false},options);_this=_Component.call(this,player,options_)||this;_this.reset_();_this.on(_this.player_,"durationchange",_this.handleDurationchange);if(IE_VERSION&&"hidden"in document_1&&"visibilityState"in document_1){_this.on(document_1,"visibilitychange",_this.handleVisibilityChange)}return _this}var _proto=LiveTracker.prototype;_proto.handleVisibilityChange=function handleVisibilityChange(){if(this.player_.duration()!==Infinity){return}if(document_1.hidden){this.stopTracking()}else{this.startTracking()}};_proto.isBehind_=function isBehind_(){if(!this.timeupdateSeen_){return false}var liveCurrentTime=this.liveCurrentTime();var currentTime=this.player_.currentTime();var seekableIncrement=this.seekableIncrement_;var liveEdgeWindow=seekableIncrement*2+.07;return liveCurrentTime!==Infinity&&liveCurrentTime-liveEdgeWindow>=currentTime};_proto.trackLive_=function trackLive_(){this.pastSeekEnd_=this.pastSeekEnd_;var seekable=this.player_.seekable();if(!seekable||!seekable.length){return}var newSeekEnd=this.seekableEnd();if(newSeekEnd!==this.lastSeekEnd_){if(this.lastSeekEnd_){this.seekableIncrement_=Math.abs(newSeekEnd-this.lastSeekEnd_)}this.pastSeekEnd_=0;this.lastSeekEnd_=newSeekEnd;this.trigger("seekableendchange")}this.pastSeekEnd_=this.pastSeekEnd()+.03;if(this.isBehind_()!==this.behindLiveEdge()){this.behindLiveEdge_=this.isBehind_();this.trigger("liveedgechange")}};_proto.handleDurationchange=function handleDurationchange(){if(this.player_.duration()===Infinity){this.startTracking()}else{this.stopTracking()}};_proto.startTracking=function startTracking(){var _this2=this;if(this.isTracking()){return}this.trackingInterval_=this.setInterval(this.trackLive_,30);this.trackLive_();this.on(this.player_,"play",this.trackLive_);this.on(this.player_,"pause",this.trackLive_);this.one(this.player_,"play",this.handlePlay);if(!this.timeupdateSeen_){this.handleTimeupdate=function(){_this2.timeupdateSeen_=true;_this2.handleTimeupdate=null};this.one(this.player_,"timeupdate",this.handleTimeupdate)}};_proto.handlePlay=function handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};_proto.reset_=function reset_(){this.pastSeekEnd_=0;this.lastSeekEnd_=null;this.behindLiveEdge_=null;this.timeupdateSeen_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=12;this.off(this.player_,"play",this.trackLive_);this.off(this.player_,"pause",this.trackLive_);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.seekToLiveEdge);if(this.handleTimeupdate){this.off(this.player_,"timeupdate",this.handleTimeupdate);this.handleTimeupdate=null}};_proto.stopTracking=function stopTracking(){if(!this.isTracking()){return}this.reset_()};_proto.seekableEnd=function seekableEnd(){var seekable=this.player_.seekable();var seekableEnds=[];var i=seekable?seekable.length:0;while(i--){seekableEnds.push(seekable.end(i))}return seekableEnds.length?seekableEnds.sort()[seekableEnds.length-1]:Infinity};_proto.seekableStart=function seekableStart(){var seekable=this.player_.seekable();var seekableStarts=[];var i=seekable?seekable.length:0;while(i--){seekableStarts.push(seekable.start(i))}return seekableStarts.length?seekableStarts.sort()[0]:0};_proto.liveWindow=function liveWindow(){var liveCurrentTime=this.liveCurrentTime();if(liveCurrentTime===Infinity){return Infinity}return liveCurrentTime-this.seekableStart()};_proto.isLive=function isLive(){return this.isTracking()};_proto.atLiveEdge=function atLiveEdge(){return!this.behindLiveEdge()};_proto.liveCurrentTime=function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()};_proto.pastSeekEnd=function pastSeekEnd(){return this.pastSeekEnd_};_proto.behindLiveEdge=function behindLiveEdge(){return this.behindLiveEdge_};_proto.isTracking=function isTracking(){return typeof this.trackingInterval_==="number"};_proto.seekToLiveEdge=function seekToLiveEdge(){if(this.atLiveEdge()){return}this.player_.currentTime(this.liveCurrentTime());if(this.player_.paused()){this.player_.play()}};_proto.dispose=function dispose(){this.stopTracking();_Component.prototype.dispose.call(this)};return LiveTracker}(Component);Component.registerComponent("LiveTracker",LiveTracker);var sourcesetLoad=function sourcesetLoad(tech){var el=tech.el();if(el.hasAttribute("src")){tech.triggerSourceset(el.src);return true}var sources=tech.$$("source");var srcUrls=[];var src="";if(!sources.length){return false}for(var i=0;i<sources.length;i++){var url=sources[i].src;if(url&&srcUrls.indexOf(url)===-1){srcUrls.push(url)}}if(!srcUrls.length){return false}if(srcUrls.length===1){src=srcUrls[0]}tech.triggerSourceset(src);return true};var innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get:function get(){return this.cloneNode(true).innerHTML},set:function set(v){var dummy=document_1.createElement(this.nodeName.toLowerCase());dummy.innerHTML=v;var docFrag=document_1.createDocumentFragment();while(dummy.childNodes.length){docFrag.appendChild(dummy.childNodes[0])}this.innerText="";window_1.Element.prototype.appendChild.call(this,docFrag);return this.innerHTML}});var getDescriptor=function getDescriptor(priority,prop){var descriptor={};for(var i=0;i<priority.length;i++){descriptor=Object.getOwnPropertyDescriptor(priority[i],prop);if(descriptor&&descriptor.set&&descriptor.get){break}}descriptor.enumerable=true;descriptor.configurable=true;return descriptor};var getInnerHTMLDescriptor=function getInnerHTMLDescriptor(tech){return getDescriptor([tech.el(),window_1.HTMLMediaElement.prototype,window_1.Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML")};var firstSourceWatch=function firstSourceWatch(tech){var el=tech.el();if(el.resetSourceWatch_){return}var old={};var innerDescriptor=getInnerHTMLDescriptor(tech);var appendWrapper=function appendWrapper(appendFn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var retval=appendFn.apply(el,args);sourcesetLoad(tech);return retval}};["append","appendChild","insertAdjacentHTML"].forEach(function(k){if(!el[k]){return}old[k]=el[k];el[k]=appendWrapper(old[k])});Object.defineProperty(el,"innerHTML",mergeOptions(innerDescriptor,{set:appendWrapper(innerDescriptor.set)}));el.resetSourceWatch_=function(){el.resetSourceWatch_=null;Object.keys(old).forEach(function(k){el[k]=old[k]});Object.defineProperty(el,"innerHTML",innerDescriptor)};tech.one("sourceset",el.resetSourceWatch_)};var srcDescriptorPolyfill=Object.defineProperty({},"src",{get:function get(){if(this.hasAttribute("src")){return getAbsoluteURL(window_1.Element.prototype.getAttribute.call(this,"src"))}return""},set:function set(v){window_1.Element.prototype.setAttribute.call(this,"src",v);return v}});var getSrcDescriptor=function getSrcDescriptor(tech){return getDescriptor([tech.el(),window_1.HTMLMediaElement.prototype,srcDescriptorPolyfill],"src")};var setupSourceset=function setupSourceset(tech){if(!tech.featuresSourceset){return}var el=tech.el();if(el.resetSourceset_){return}var srcDescriptor=getSrcDescriptor(tech);var oldSetAttribute=el.setAttribute;var oldLoad=el.load;Object.defineProperty(el,"src",mergeOptions(srcDescriptor,{set:function set(v){var retval=srcDescriptor.set.call(el,v);tech.triggerSourceset(el.src);return retval}}));el.setAttribute=function(n,v){var retval=oldSetAttribute.call(el,n,v);if(/src/i.test(n)){tech.triggerSourceset(el.src)}return retval};el.load=function(){var retval=oldLoad.call(el);if(!sourcesetLoad(tech)){tech.triggerSourceset("");firstSourceWatch(tech)}return retval};if(el.currentSrc){tech.triggerSourceset(el.currentSrc)}else if(!sourcesetLoad(tech)){firstSourceWatch(tech)}el.resetSourceset_=function(){el.resetSourceset_=null;el.load=oldLoad;el.setAttribute=oldSetAttribute;Object.defineProperty(el,"src",srcDescriptor);if(el.resetSourceWatch_){el.resetSourceWatch_()}}};function _templateObject$1(){var data=_taggedTemplateLiteralLoose(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);_templateObject$1=function _templateObject(){return data};return data}var Html5=function(_Tech){_inheritsLoose$1(Html5,_Tech);function Html5(options,ready){var _this;_this=_Tech.call(this,options,ready)||this;var source=options.source;var crossoriginTracks=false;if(source&&(_this.el_.currentSrc!==source.src||options.tag&&options.tag.initNetworkState_===3)){_this.setSource(source)}else{_this.handleLateInit_(_this.el_)}if(options.enableSourceset){_this.setupSourcesetHandling_()}if(_this.el_.hasChildNodes()){var nodes=_this.el_.childNodes;var nodesLength=nodes.length;var removeNodes=[];while(nodesLength--){var node=nodes[nodesLength];var nodeName=node.nodeName.toLowerCase();if(nodeName==="track"){if(!_this.featuresNativeTextTracks){removeNodes.push(node)}else{_this.remoteTextTrackEls().addTrackElement_(node);_this.remoteTextTracks().addTrack(node.track);_this.textTracks().addTrack(node.track);if(!crossoriginTracks&&!_this.el_.hasAttribute("crossorigin")&&isCrossOrigin(node.src)){crossoriginTracks=true}}}}for(var i=0;i<removeNodes.length;i++){_this.el_.removeChild(removeNodes[i])}}_this.proxyNativeTracks_();if(_this.featuresNativeTextTracks&&crossoriginTracks){log.warn(tsml(_templateObject$1()))}_this.restoreMetadataTracksInIOSNativePlayer_();if((TOUCH_ENABLED||IS_IPHONE||IS_NATIVE_ANDROID)&&options.nativeControlsForTouch===true){_this.setControls(true)}_this.proxyWebkitFullscreen_();_this.triggerReady();return _this}var _proto=Html5.prototype;_proto.dispose=function dispose(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_()}Html5.disposeMediaElement(this.el_);this.options_=null;_Tech.prototype.dispose.call(this)};_proto.setupSourcesetHandling_=function setupSourcesetHandling_(){setupSourceset(this)};_proto.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var textTracks=this.textTracks();var metadataTracksPreFullscreenState;var takeMetadataTrackSnapshot=function takeMetadataTrackSnapshot(){metadataTracksPreFullscreenState=[];for(var i=0;i<textTracks.length;i++){var track=textTracks[i];if(track.kind==="metadata"){metadataTracksPreFullscreenState.push({track:track,storedMode:track.mode})}}};takeMetadataTrackSnapshot();textTracks.addEventListener("change",takeMetadataTrackSnapshot);this.on("dispose",function(){return textTracks.removeEventListener("change",takeMetadataTrackSnapshot)});var restoreTrackMode=function restoreTrackMode(){for(var i=0;i<metadataTracksPreFullscreenState.length;i++){var storedTrack=metadataTracksPreFullscreenState[i];if(storedTrack.track.mode==="disabled"&&storedTrack.track.mode!==storedTrack.storedMode){storedTrack.track.mode=storedTrack.storedMode}}textTracks.removeEventListener("change",restoreTrackMode)};this.on("webkitbeginfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode);textTracks.addEventListener("change",restoreTrackMode)});this.on("webkitendfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.addEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode)})};_proto.overrideNative_=function overrideNative_(type,override){var _this2=this;if(override!==this["featuresNative"+type+"Tracks"]){return}var lowerCaseType=type.toLowerCase();if(this[lowerCaseType+"TracksListeners_"]){Object.keys(this[lowerCaseType+"TracksListeners_"]).forEach(function(eventName){var elTracks=_this2.el()[lowerCaseType+"Tracks"];elTracks.removeEventListener(eventName,_this2[lowerCaseType+"TracksListeners_"][eventName])})}this["featuresNative"+type+"Tracks"]=!override;this[lowerCaseType+"TracksListeners_"]=null;this.proxyNativeTracksForType_(lowerCaseType)};_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(override){this.overrideNative_("Audio",override)};_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(override){this.overrideNative_("Video",override)};_proto.proxyNativeTracksForType_=function proxyNativeTracksForType_(name){var _this3=this;var props=NORMAL[name];var elTracks=this.el()[props.getterName];var techTracks=this[props.getterName]();if(!this["featuresNative"+props.capitalName+"Tracks"]||!elTracks||!elTracks.addEventListener){return}var listeners={change:function change(e){techTracks.trigger({type:"change",target:techTracks,currentTarget:techTracks,srcElement:techTracks})},addtrack:function addtrack(e){techTracks.addTrack(e.track)},removetrack:function removetrack(e){techTracks.removeTrack(e.track)}};var removeOldTracks=function removeOldTracks(){var removeTracks=[];for(var i=0;i<techTracks.length;i++){var found=false;for(var j=0;j<elTracks.length;j++){if(elTracks[j]===techTracks[i]){found=true;break}}if(!found){removeTracks.push(techTracks[i])}}while(removeTracks.length){techTracks.removeTrack(removeTracks.shift())}};this[props.getterName+"Listeners_"]=listeners;Object.keys(listeners).forEach(function(eventName){var listener=listeners[eventName];elTracks.addEventListener(eventName,listener);_this3.on("dispose",function(e){return elTracks.removeEventListener(eventName,listener)})});this.on("loadstart",removeOldTracks);this.on("dispose",function(e){return _this3.off("loadstart",removeOldTracks)})};_proto.proxyNativeTracks_=function proxyNativeTracks_(){var _this4=this;NORMAL.names.forEach(function(name){_this4.proxyNativeTracksForType_(name)})};_proto.createEl=function createEl$$1(){var el=this.options_.tag;if(!el||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(el){var clone=el.cloneNode(true);if(el.parentNode){el.parentNode.insertBefore(clone,el)}Html5.disposeMediaElement(el);el=clone}else{el=document_1.createElement("video");var tagAttributes=this.options_.tag&&getAttributes(this.options_.tag);var attributes=mergeOptions({},tagAttributes);if(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete attributes.controls}setAttributes(el,assign(attributes,{id:this.options_.techId,"class":"vjs-tech"}))}el.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){setAttribute(el,"preload",this.options_.preload)}var settingsAttrs=["loop","muted","playsinline","autoplay"];for(var i=0;i<settingsAttrs.length;i++){var attr=settingsAttrs[i];var value=this.options_[attr];if(typeof value!=="undefined"){if(value){setAttribute(el,attr,attr)}else{removeAttribute(el,attr)}el[attr]=value}}return el};_proto.handleLateInit_=function handleLateInit_(el){if(el.networkState===0||el.networkState===3){return}if(el.readyState===0){var loadstartFired=false;var setLoadstartFired=function setLoadstartFired(){loadstartFired=true};this.on("loadstart",setLoadstartFired);var triggerLoadstart=function triggerLoadstart(){if(!loadstartFired){this.trigger("loadstart")}};this.on("loadedmetadata",triggerLoadstart);this.ready(function(){this.off("loadstart",setLoadstartFired);this.off("loadedmetadata",triggerLoadstart);if(!loadstartFired){this.trigger("loadstart")}});return}var eventsToTrigger=["loadstart"];eventsToTrigger.push("loadedmetadata");if(el.readyState>=2){eventsToTrigger.push("loadeddata")}if(el.readyState>=3){eventsToTrigger.push("canplay")}if(el.readyState>=4){eventsToTrigger.push("canplaythrough")}this.ready(function(){eventsToTrigger.forEach(function(type){this.trigger(type)},this)})};_proto.setCurrentTime=function setCurrentTime(seconds){try{this.el_.currentTime=seconds}catch(e){log(e,"Video is not ready. (Video.js)")}};_proto.duration=function duration(){var _this5=this;if(this.el_.duration===Infinity&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){var checkProgress=function checkProgress(){if(_this5.el_.currentTime>0){if(_this5.el_.duration===Infinity){_this5.trigger("durationchange")}_this5.off("timeupdate",checkProgress)}};this.on("timeupdate",checkProgress);return NaN}return this.el_.duration||NaN};_proto.width=function width(){return this.el_.offsetWidth};_proto.height=function height(){return this.el_.offsetHeight};_proto.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var _this6=this;if(!("webkitDisplayingFullscreen"in this.el_)){return}var endFn=function endFn(){this.trigger("fullscreenchange",{isFullscreen:false})};var beginFn=function beginFn(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",endFn);this.trigger("fullscreenchange",{isFullscreen:true})}};this.on("webkitbeginfullscreen",beginFn);this.on("dispose",function(){_this6.off("webkitbeginfullscreen",beginFn);_this6.off("webkitendfullscreen",endFn)})};_proto.supportsFullScreen=function supportsFullScreen(){if(typeof this.el_.webkitEnterFullScreen==="function"){var userAgent=window_1.navigator&&window_1.navigator.userAgent||"";if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent)){return true}}return false};_proto.enterFullScreen=function enterFullScreen(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){this.el_.play();this.setTimeout(function(){video.pause();video.webkitEnterFullScreen()},0)}else{video.webkitEnterFullScreen()}};_proto.exitFullScreen=function exitFullScreen(){this.el_.webkitExitFullScreen()};_proto.src=function src(_src){if(_src===undefined){return this.el_.src}this.setSrc(_src)};_proto.reset=function reset(){Html5.resetMediaElement(this.el_)};_proto.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};_proto.setControls=function setControls(val){this.el_.controls=!!val};_proto.addTextTrack=function addTextTrack(kind,label,language){if(!this.featuresNativeTextTracks){return _Tech.prototype.addTextTrack.call(this,kind,label,language)}return this.el_.addTextTrack(kind,label,language)};_proto.createRemoteTextTrack=function createRemoteTextTrack(options){if(!this.featuresNativeTextTracks){return _Tech.prototype.createRemoteTextTrack.call(this,options)}var htmlTrackElement=document_1.createElement("track");if(options.kind){htmlTrackElement.kind=options.kind}if(options.label){htmlTrackElement.label=options.label}if(options.language||options.srclang){htmlTrackElement.srclang=options.language||options.srclang}if(options.default){htmlTrackElement.default=options.default}if(options.id){htmlTrackElement.id=options.id}if(options.src){htmlTrackElement.src=options.src}return htmlTrackElement};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var htmlTrackElement=_Tech.prototype.addRemoteTextTrack.call(this,options,manualCleanup);if(this.featuresNativeTextTracks){this.el().appendChild(htmlTrackElement)}return htmlTrackElement};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){_Tech.prototype.removeRemoteTextTrack.call(this,track);if(this.featuresNativeTextTracks){var tracks=this.$$("track");var i=tracks.length;while(i--){if(track===tracks[i]||track===tracks[i].track){this.el().removeChild(tracks[i])}}}};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var videoPlaybackQuality={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){videoPlaybackQuality.droppedVideoFrames=this.el().webkitDroppedFrameCount;videoPlaybackQuality.totalVideoFrames=this.el().webkitDecodedFrameCount}if(window_1.performance&&typeof window_1.performance.now==="function"){videoPlaybackQuality.creationTime=window_1.performance.now()}else if(window_1.performance&&window_1.performance.timing&&typeof window_1.performance.timing.navigationStart==="number"){videoPlaybackQuality.creationTime=window_1.Date.now()-window_1.performance.timing.navigationStart}return videoPlaybackQuality};return Html5}(Tech);if(isReal()){Html5.TEST_VID=document_1.createElement("video");var track=document_1.createElement("track");track.kind="captions";track.srclang="en";track.label="English";Html5.TEST_VID.appendChild(track)}Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch(e){return false}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType)};Html5.canPlayType=function(type){return Html5.TEST_VID.canPlayType(type)};Html5.canPlaySource=function(srcObj,options){return Html5.canPlayType(srcObj.type)};Html5.canControlVolume=function(){try{var volume=Html5.TEST_VID.volume;Html5.TEST_VID.volume=volume/2+.1;return volume!==Html5.TEST_VID.volume}catch(e){return false}};Html5.canMuteVolume=function(){try{var muted=Html5.TEST_VID.muted;Html5.TEST_VID.muted=!muted;if(Html5.TEST_VID.muted){setAttribute(Html5.TEST_VID,"muted","muted")}else{removeAttribute(Html5.TEST_VID,"muted","muted")}return muted!==Html5.TEST_VID.muted}catch(e){return false}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58){return false}try{var playbackRate=Html5.TEST_VID.playbackRate;Html5.TEST_VID.playbackRate=playbackRate/2+.1;return playbackRate!==Html5.TEST_VID.playbackRate}catch(e){return false}};Html5.canOverrideAttributes=function(){try{var noop=function noop(){};Object.defineProperty(document_1.createElement("video"),"src",{get:noop,set:noop});Object.defineProperty(document_1.createElement("audio"),"src",{get:noop,set:noop});Object.defineProperty(document_1.createElement("video"),"innerHTML",{get:noop,set:noop});Object.defineProperty(document_1.createElement("audio"),"innerHTML",{get:noop,set:noop})}catch(e){return false}return true};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks)};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks)};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.featuresMuteControl=Html5.canMuteVolume();Html5.prototype.featuresPlaybackRate=Html5.canControlPlaybackRate();Html5.prototype.featuresSourceset=Html5.canOverrideAttributes();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=true;Html5.prototype.featuresProgressEvents=true;Html5.prototype.featuresTimeupdateEvents=true;Html5.prototype.featuresNativeTextTracks=Html5.supportsNativeTextTracks();Html5.prototype.featuresNativeVideoTracks=Html5.supportsNativeVideoTracks();Html5.prototype.featuresNativeAudioTracks=Html5.supportsNativeAudioTracks();var canPlayType=Html5.TEST_VID&&Html5.TEST_VID.constructor.prototype.canPlayType;var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Html5.patchCanPlayType=function(){if(ANDROID_VERSION>=4&&!IS_FIREFOX&&!IS_CHROME){Html5.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mpegurlRE.test(type)){return"maybe"}return canPlayType.call(this,type)}}};Html5.unpatchCanPlayType=function(){var r=Html5.TEST_VID.constructor.prototype.canPlayType;Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType;return r};Html5.patchCanPlayType();Html5.disposeMediaElement=function(el){if(!el){return}if(el.parentNode){el.parentNode.removeChild(el)}while(el.hasChildNodes()){el.removeChild(el.firstChild)}el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load()}catch(e){}})()}};Html5.resetMediaElement=function(el){if(!el){return}var sources=el.querySelectorAll("source");var i=sources.length;while(i--){el.removeChild(sources[i])}el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load()}catch(e){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]||this.el_.hasAttribute(prop)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(prop){Html5.prototype["set"+toTitleCase(prop)]=function(v){this.el_[prop]=v;if(v){this.el_.setAttribute(prop,prop)}else{this.el_.removeAttribute(prop)}}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(prop){Html5.prototype["set"+toTitleCase(prop)]=function(v){this.el_[prop]=v}});["pause","load","play"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]()}});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(type){try{return Html5.TEST_VID.canPlayType(type)}catch(e){return""}};Html5.nativeSourceHandler.canHandleSource=function(source,options){if(source.type){return Html5.nativeSourceHandler.canPlayType(source.type);
}else if(source.src){var ext=getFileExtension(source.src);return Html5.nativeSourceHandler.canPlayType("video/"+ext)}return""};Html5.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src)};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);function _templateObject$2(){var data=_taggedTemplateLiteralLoose(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);_templateObject$2=function _templateObject(){return data};return data}var TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"];var BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(function(k){var v=k.charAt(0)==="x"?"x-"+k.substring(1):k;BREAKPOINT_CLASSES[k]="vjs-layout-"+v});var DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var Player=function(_Component){_inheritsLoose$1(Player,_Component);function Player(tag,options,ready){var _this;tag.id=tag.id||options.id||"vjs_video_"+newGUID();options=assign(Player.getTagSettings(tag),options);options.initChildren=false;options.createEl=false;options.evented=false;options.reportTouchActivity=false;if(!options.language){if(typeof tag.closest==="function"){var closest=tag.closest("[lang]");if(closest&&closest.getAttribute){options.language=closest.getAttribute("lang")}}else{var element=tag;while(element&&element.nodeType===1){if(getAttributes(element).hasOwnProperty("lang")){options.language=element.getAttribute("lang");break}element=element.parentNode}}}_this=_Component.call(this,null,options,ready)||this;_this.boundDocumentFullscreenChange_=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.documentFullscreenChange_);_this.boundFullWindowOnEscKey_=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.fullWindowOnEscKey);_this.boundHandleKeyPress_=bind(_assertThisInitialized$1(_assertThisInitialized$1(_this)),_this.handleKeyPress);_this.log=createLogger$1(_this.id_);_this.isPosterFromTech_=false;_this.queuedCallbacks_=[];_this.isReady_=false;_this.hasStarted_=false;_this.userActive_=false;if(!_this.options_||!_this.options_.techOrder||!_this.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?")}_this.tag=tag;_this.tagAttributes=tag&&getAttributes(tag);_this.language(_this.options_.language);if(options.languages){var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name$$1){languagesToLower[name$$1.toLowerCase()]=options.languages[name$$1]});_this.languages_=languagesToLower}else{_this.languages_=Player.prototype.options_.languages}_this.resetCache_();_this.poster_=options.poster||"";_this.controls_=!!options.controls;tag.controls=false;tag.removeAttribute("controls");_this.changingSrc_=false;_this.playCallbacks_=[];_this.playTerminatedQueue_=[];if(tag.hasAttribute("autoplay")){_this.autoplay(true)}else{_this.autoplay(_this.options_.autoplay)}if(options.plugins){Object.keys(options.plugins).forEach(function(name$$1){if(typeof _this[name$$1]!=="function"){throw new Error('plugin "'+name$$1+'" does not exist')}})}_this.scrubbing_=false;_this.el_=_this.createEl();evented(_assertThisInitialized$1(_assertThisInitialized$1(_this)),{eventBusKey:"el_"});if(_this.fluid_){_this.on("playerreset",_this.updateStyleEl_)}var playerOptionsCopy=mergeOptions(_this.options_);if(options.plugins){Object.keys(options.plugins).forEach(function(name$$1){_this[name$$1](options.plugins[name$$1])})}_this.options_.playerOptions=playerOptionsCopy;_this.middleware_=[];_this.initChildren();_this.isAudio(tag.nodeName.toLowerCase()==="audio");if(_this.controls()){_this.addClass("vjs-controls-enabled")}else{_this.addClass("vjs-controls-disabled")}_this.el_.setAttribute("role","region");if(_this.isAudio()){_this.el_.setAttribute("aria-label",_this.localize("Audio Player"))}else{_this.el_.setAttribute("aria-label",_this.localize("Video Player"))}if(_this.isAudio()){_this.addClass("vjs-audio")}if(_this.flexNotSupported_()){_this.addClass("vjs-no-flex")}if(TOUCH_ENABLED){_this.addClass("vjs-touch-enabled")}if(!IS_IOS){_this.addClass("vjs-workinghover")}Player.players[_this.id_]=_assertThisInitialized$1(_assertThisInitialized$1(_this));var majorVersion=version$2.split(".")[0];_this.addClass("vjs-v"+majorVersion);_this.userActive(true);_this.reportUserActivity();_this.one("play",_this.listenForUserActivity_);_this.on("focus",_this.handleFocus);_this.on("blur",_this.handleBlur);_this.on("stageclick",_this.handleStageClick_);_this.breakpoints(_this.options_.breakpoints);_this.responsive(_this.options_.responsive);return _this}var _proto=Player.prototype;_proto.dispose=function dispose(){var _this2=this;this.trigger("dispose");this.off("dispose");off(document_1,FullscreenApi.fullscreenchange,this.boundDocumentFullscreenChange_);off(document_1,"keydown",this.boundFullWindowOnEscKey_);off(document_1,"keydown",this.boundHandleKeyPress_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null}Player.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_=""}if(this.playerElIngest_){this.playerElIngest_=null}if(this.tag){this.tag=null}clearCacheForPlayer(this);ALL.names.forEach(function(name$$1){var props=ALL[name$$1];var list=_this2[props.getterName]();if(list&&list.off){list.off()}});_Component.prototype.dispose.call(this)};_proto.createEl=function createEl$$1(){var tag=this.tag;var el;var playerElIngest=this.playerElIngest_=tag.parentNode&&tag.parentNode.hasAttribute&&tag.parentNode.hasAttribute("data-vjs-player");var divEmbed=this.tag.tagName.toLowerCase()==="video-js";if(playerElIngest){el=this.el_=tag.parentNode}else if(!divEmbed){el=this.el_=_Component.prototype.createEl.call(this,"div")}var attrs=getAttributes(tag);if(divEmbed){el=this.el_=tag;tag=this.tag=document_1.createElement("video");while(el.children.length){tag.appendChild(el.firstChild)}if(!hasClass(el,"video-js")){addClass(el,"video-js")}el.appendChild(tag);playerElIngest=this.playerElIngest_=el;Object.keys(el).forEach(function(k){tag[k]=el[k]})}tag.setAttribute("tabindex","-1");attrs.tabindex="-1";if(IE_VERSION){tag.setAttribute("role","application");attrs.role="application"}tag.removeAttribute("width");tag.removeAttribute("height");if("width"in attrs){delete attrs.width}if("height"in attrs){delete attrs.height}Object.getOwnPropertyNames(attrs).forEach(function(attr){if(!(divEmbed&&attr==="class")){el.setAttribute(attr,attrs[attr])}if(divEmbed){tag.setAttribute(attr,attrs[attr])}});tag.playerId=tag.id;tag.id+="_html5_api";tag.className="vjs-tech";tag.player=el.player=this;this.addClass("vjs-paused");if(window_1.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=createStyleElement("vjs-styles-dimensions");var defaultsStyleEl=$(".vjs-styles-defaults");var head=$("head");head.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head.firstChild)}this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);var links=tag.getElementsByTagName("a");for(var i=0;i<links.length;i++){var linkEl=links.item(i);addClass(linkEl,"vjs-hidden");linkEl.setAttribute("hidden","hidden")}tag.initNetworkState_=tag.networkState;if(tag.parentNode&&!playerElIngest){tag.parentNode.insertBefore(el,tag)}prependTo(tag,el);this.children_.unshift(tag);this.el_.setAttribute("lang",this.language_);this.el_=el;return el};_proto.width=function width(value){return this.dimension("width",value)};_proto.height=function height(value){return this.dimension("height",value)};_proto.dimension=function dimension(_dimension,value){var privDimension=_dimension+"_";if(value===undefined){return this[privDimension]||0}if(value===""){this[privDimension]=undefined;this.updateStyleEl_();return}var parsedVal=parseFloat(value);if(isNaN(parsedVal)){log.error('Improper value "'+value+'" supplied for for '+_dimension);return}this[privDimension]=parsedVal;this.updateStyleEl_()};_proto.fluid=function fluid(bool){if(bool===undefined){return!!this.fluid_}this.fluid_=!!bool;if(isEvented(this)){this.off("playerreset",this.updateStyleEl_)}if(bool){this.addClass("vjs-fluid");this.fill(false);addEventedCallback(function(){this.on("playerreset",this.updateStyleEl_)})}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};_proto.fill=function fill(bool){if(bool===undefined){return!!this.fill_}this.fill_=!!bool;if(bool){this.addClass("vjs-fill");this.fluid(false)}else{this.removeClass("vjs-fill")}};_proto.aspectRatio=function aspectRatio(ratio){if(ratio===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(ratio)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=ratio;this.fluid(true);this.updateStyleEl_()};_proto.updateStyleEl_=function updateStyleEl_(){if(window_1.VIDEOJS_NO_DYNAMIC_STYLE===true){var _width=typeof this.width_==="number"?this.width_:this.options_.width;var _height=typeof this.height_==="number"?this.height_:this.options_.height;var techEl=this.tech_&&this.tech_.el();if(techEl){if(_width>=0){techEl.width=_width}if(_height>=0){techEl.height=_height}}return}var width;var height;var aspectRatio;var idClass;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){aspectRatio=this.aspectRatio_}else if(this.videoWidth()>0){aspectRatio=this.videoWidth()+":"+this.videoHeight()}else{aspectRatio="16:9"}var ratioParts=aspectRatio.split(":");var ratioMultiplier=ratioParts[1]/ratioParts[0];if(this.width_!==undefined){width=this.width_}else if(this.height_!==undefined){width=this.height_/ratioMultiplier}else{width=this.videoWidth()||300}if(this.height_!==undefined){height=this.height_}else{height=width*ratioMultiplier}if(/^[^a-zA-Z]/.test(this.id())){idClass="dimensions-"+this.id()}else{idClass=this.id()+"-dimensions"}this.addClass(idClass);setTextContent(this.styleEl_,"\n      ."+idClass+" {\n        width: "+width+"px;\n        height: "+height+"px;\n      }\n\n      ."+idClass+".vjs-fluid {\n        padding-top: "+ratioMultiplier*100+"%;\n      }\n    ")};_proto.loadTech_=function loadTech_(techName,source){var _this3=this;if(this.tech_){this.unloadTech_()}var titleTechName=toTitleCase(techName);var camelTechName=techName.charAt(0).toLowerCase()+techName.slice(1);if(titleTechName!=="Html5"&&this.tag){Tech.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=titleTechName;this.isReady_=false;var autoplay=typeof this.autoplay()==="string"?false:this.autoplay();var techOptions={source:source,autoplay:autoplay,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+camelTechName+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ALL.names.forEach(function(name$$1){var props=ALL[name$$1];techOptions[props.getterName]=_this3[props.privateName]});assign(techOptions,this.options_[titleTechName]);assign(techOptions,this.options_[camelTechName]);assign(techOptions,this.options_[techName.toLowerCase()]);if(this.tag){techOptions.tag=this.tag}if(source&&source.src===this.cache_.src&&this.cache_.currentTime>0){techOptions.startTime=this.cache_.currentTime}var TechClass=Tech.getTech(techName);if(!TechClass){throw new Error("No Tech named '"+titleTechName+"' exists! '"+titleTechName+"' should be registered using videojs.registerTech()'")}this.tech_=new TechClass(techOptions);this.tech_.ready(bind(this,this.handleTechReady_),true);textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_);TECH_EVENTS_RETRIGGER.forEach(function(event){_this3.on(_this3.tech_,event,_this3["handleTech"+toTitleCase(event)+"_"])});Object.keys(TECH_EVENTS_QUEUE).forEach(function(event){_this3.on(_this3.tech_,event,function(eventObj){if(_this3.tech_.playbackRate()===0&&_this3.tech_.seeking()){_this3.queuedCallbacks_.push({callback:_this3["handleTech"+TECH_EVENTS_QUEUE[event]+"_"].bind(_this3),event:eventObj});return}_this3["handleTech"+TECH_EVENTS_QUEUE[event]+"_"](eventObj)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(titleTechName!=="Html5"||!this.tag)){prependTo(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};_proto.unloadTech_=function unloadTech_(){var _this4=this;ALL.names.forEach(function(name$$1){var props=ALL[name$$1];_this4[props.privateName]=_this4[props.getterName]()});this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange")}this.isPosterFromTech_=false};_proto.tech=function tech(safety){if(safety===undefined){log.warn(tsml(_templateObject$2()))}return this.tech_};_proto.addTechControlsListeners_=function addTechControlsListeners_(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};_proto.removeTechControlsListeners_=function removeTechControlsListeners_(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};_proto.handleTechReady_=function handleTechReady_(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_()};_proto.handleTechLoadStart_=function handleTechLoadStart_(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}this.manualAutoplay_(this.autoplay())};_proto.manualAutoplay_=function manualAutoplay_(type){var _this5=this;if(!this.tech_||typeof type!=="string"){return}var muted=function muted(){var previouslyMuted=_this5.muted();_this5.muted(true);var restoreMuted=function restoreMuted(){_this5.muted(previouslyMuted)};_this5.playTerminatedQueue_.push(restoreMuted);var mutedPromise=_this5.play();if(!isPromise(mutedPromise)){return}return mutedPromise.catch(restoreMuted)};var promise;if(type==="any"&&this.muted()!==true){promise=this.play();if(isPromise(promise)){promise=promise.catch(muted)}}else if(type==="muted"&&this.muted()!==true){promise=muted()}else{promise=this.play()}if(!isPromise(promise)){return}return promise.then(function(){_this5.trigger({type:"autoplay-success",autoplay:type})}).catch(function(e){_this5.trigger({type:"autoplay-failure",autoplay:type})})};_proto.updateSourceCaches_=function updateSourceCaches_(srcObj){if(srcObj===void 0){srcObj=""}var src=srcObj;var type="";if(typeof src!=="string"){src=srcObj.src;type=srcObj.type}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(src&&!type){type=findMimetype(this,src)}this.cache_.source=mergeOptions({},srcObj,{src:src,type:type});var matchingSources=this.cache_.sources.filter(function(s){return s.src&&s.src===src});var sourceElSources=[];var sourceEls=this.$$("source");var matchingSourceEls=[];for(var i=0;i<sourceEls.length;i++){var sourceObj=getAttributes(sourceEls[i]);sourceElSources.push(sourceObj);if(sourceObj.src&&sourceObj.src===src){matchingSourceEls.push(sourceObj.src)}}if(matchingSourceEls.length&&!matchingSources.length){this.cache_.sources=sourceElSources}else if(!matchingSources.length){this.cache_.sources=[this.cache_.source]}this.cache_.src=src};_proto.handleTechSourceset_=function handleTechSourceset_(event){var _this6=this;if(!this.changingSrc_){var updateSourceCaches=function updateSourceCaches(src){return _this6.updateSourceCaches_(src)};var playerSrc=this.currentSource().src;var eventSrc=event.src;if(playerSrc&&!/^blob:/.test(playerSrc)&&/^blob:/.test(eventSrc)){if(!this.lastSource_||this.lastSource_.tech!==eventSrc&&this.lastSource_.player!==playerSrc){updateSourceCaches=function updateSourceCaches(){}}}updateSourceCaches(eventSrc);if(!event.src){var updateCache=function updateCache(e){if(e.type!=="sourceset"){var techSrc=_this6.techGet("currentSrc");_this6.lastSource_.tech=techSrc;_this6.updateSourceCaches_(techSrc)}_this6.tech_.off(["sourceset","loadstart"],updateCache)};this.tech_.one(["sourceset","loadstart"],updateCache)}}this.lastSource_={player:this.currentSource().src,tech:event.src};this.trigger({src:event.src,type:"sourceset"})};_proto.hasStarted=function hasStarted(request){if(request===undefined){return this.hasStarted_}if(request===this.hasStarted_){return}this.hasStarted_=request;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}};_proto.handleTechPlay_=function handleTechPlay_(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};_proto.handleTechRateChange_=function handleTechRateChange_(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(queued){return queued.callback(queued.event)});this.queuedCallbacks_=[]}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};_proto.handleTechWaiting_=function handleTechWaiting_(){var _this7=this;this.addClass("vjs-waiting");this.trigger("waiting");var timeWhenWaiting=this.currentTime();var timeUpdateListener=function timeUpdateListener(){if(timeWhenWaiting!==_this7.currentTime()){_this7.removeClass("vjs-waiting");_this7.off("timeupdate",timeUpdateListener)}};this.on("timeupdate",timeUpdateListener)};_proto.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass("vjs-waiting");this.trigger("canplay")};_proto.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};_proto.handleTechPlaying_=function handleTechPlaying_(){this.removeClass("vjs-waiting");this.trigger("playing")};_proto.handleTechSeeking_=function handleTechSeeking_(){this.addClass("vjs-seeking");this.trigger("seeking")};_proto.handleTechSeeked_=function handleTechSeeked_(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};_proto.handleTechFirstPlay_=function handleTechFirstPlay_(){if(this.options_.starttime){log.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};_proto.handleTechPause_=function handleTechPause_(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};_proto.handleTechEnded_=function handleTechEnded_(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else if(!this.paused()){this.pause()}this.trigger("ended")};_proto.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_("duration"))};_proto.handleTechClick_=function handleTechClick_(event){if(!isSingleLeftClick(event)){return}if(!this.controls_){return}if(this.paused()){silencePromise(this.play())}else{this.pause()}};_proto.handleTechDoubleClick_=function handleTechDoubleClick_(event){if(!this.controls_){return}var inAllowedEls=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(el){return el.contains(event.target)});if(!inAllowedEls){if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,event)}else if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen()}}}};_proto.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive())};_proto.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive()};_proto.handleTechTouchMove_=function handleTechTouchMove_(){if(this.userWasActive){this.reportUserActivity()}};_proto.handleTechTouchEnd_=function handleTechTouchEnd_(event){event.preventDefault()};_proto.handleStageClick_=function handleStageClick_(){this.reportUserActivity()};_proto.toggleFullscreenClass_=function toggleFullscreenClass_(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};_proto.documentFullscreenChange_=function documentFullscreenChange_(e){var fsApi=FullscreenApi;this.isFullscreen(document_1[fsApi.fullscreenElement]===this.el()||this.el().matches(":"+fsApi.fullscreen));if(this.isFullscreen()===false){off(document_1,fsApi.fullscreenchange,this.boundDocumentFullscreenChange_)}if(!prefixedAPI){this.trigger("fullscreenchange")}};_proto.handleTechFullscreenChange_=function handleTechFullscreenChange_(event,data){if(data){this.isFullscreen(data.isFullscreen)}this.trigger("fullscreenchange")};_proto.handleTechError_=function handleTechError_(){var error=this.tech_.error();this.error(error)};_proto.handleTechTextData_=function handleTechTextData_(){var data=null;if(arguments.length>1){data=arguments[1]}this.trigger("textdata",data)};_proto.getCache=function getCache(){return this.cache_};_proto.resetCache_=function resetCache_(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};_proto.techCall_=function techCall_(method,arg){this.ready(function(){if(method in allowedSetters){return set$1(this.middleware_,this.tech_,method,arg)}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method,arg)}try{if(this.tech_){this.tech_[method](arg)}}catch(e){log(e);throw e}},true)};_proto.techGet_=function techGet_(method){if(!this.tech_||!this.tech_.isReady_){return}if(method in allowedGetters){return get(this.middleware_,this.tech_,method)}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method)}try{return this.tech_[method]()}catch(e){if(this.tech_[method]===undefined){log("Video.js: "+method+" method not defined for "+this.techName_+" playback technology.",e);throw e}if(e.name==="TypeError"){log("Video.js: "+method+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e}log(e);throw e}};_proto.play=function play(){var _this8=this;var PromiseClass=this.options_.Promise||window_1.Promise;if(PromiseClass){return new PromiseClass(function(resolve){_this8.play_(resolve)})}return this.play_()};_proto.play_=function play_(callback){var _this9=this;if(callback===void 0){callback=silencePromise}this.playCallbacks_.push(callback);var isSrcReady=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null}if(!this.isReady_||!isSrcReady){this.waitToPlay_=function(e){_this9.play_()};this.one(["ready","loadstart"],this.waitToPlay_);if(!isSrcReady&&(IS_ANY_SAFARI||IS_IOS)){this.load()}return}var val=this.techGet_("play");if(val===null){this.runPlayTerminatedQueue_()}else{this.runPlayCallbacks_(val)}};_proto.runPlayTerminatedQueue_=function runPlayTerminatedQueue_(){var queue=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];queue.forEach(function(q){q()})};_proto.runPlayCallbacks_=function runPlayCallbacks_(val){var callbacks=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];callbacks.forEach(function(cb){cb(val)})};_proto.pause=function pause(){this.techCall_("pause")};_proto.paused=function paused(){return this.techGet_("paused")===false?false:true};_proto.played=function played(){return this.techGet_("played")||createTimeRanges(0,0)};_proto.scrubbing=function scrubbing(isScrubbing){if(typeof isScrubbing==="undefined"){return this.scrubbing_}this.scrubbing_=!!isScrubbing;if(isScrubbing){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}};_proto.currentTime=function currentTime(seconds){if(typeof seconds!=="undefined"){if(seconds<0){seconds=0}this.techCall_("setCurrentTime",seconds);return}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};_proto.duration=function duration(seconds){if(seconds===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}seconds=parseFloat(seconds);if(seconds<0){seconds=Infinity}if(seconds!==this.cache_.duration){this.cache_.duration=seconds;if(seconds===Infinity){this.addClass("vjs-live");if(this.options_.liveui&&this.player_.liveTracker){this.addClass("vjs-liveui")}}else{this.removeClass("vjs-live");this.removeClass("vjs-liveui")}if(!isNaN(seconds)){this.trigger("durationchange")}}};_proto.remainingTime=function remainingTime(){return this.duration()-this.currentTime()};_proto.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())};_proto.buffered=function buffered(){var buffered=this.techGet_("buffered");if(!buffered||!buffered.length){buffered=createTimeRanges(0,0)}return buffered};_proto.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration())};_proto.bufferedEnd=function bufferedEnd(){var buffered=this.buffered();var duration=this.duration();var end=buffered.end(buffered.length-1);if(end>duration){end=duration}return end};_proto.volume=function volume(percentAsDecimal){var vol;if(percentAsDecimal!==undefined){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall_("setVolume",vol);if(vol>0){this.lastVolume_(vol)}return}vol=parseFloat(this.techGet_("volume"));return isNaN(vol)?1:vol};_proto.muted=function muted(_muted){if(_muted!==undefined){this.techCall_("setMuted",_muted);return}return this.techGet_("muted")||false};_proto.defaultMuted=function defaultMuted(_defaultMuted){if(_defaultMuted!==undefined){return this.techCall_("setDefaultMuted",_defaultMuted)}return this.techGet_("defaultMuted")||false};_proto.lastVolume_=function lastVolume_(percentAsDecimal){if(percentAsDecimal!==undefined&&percentAsDecimal!==0){this.cache_.lastVolume=percentAsDecimal;return}return this.cache_.lastVolume};_proto.supportsFullScreen=function supportsFullScreen(){return this.techGet_("supportsFullScreen")||false};_proto.isFullscreen=function isFullscreen(isFS){if(isFS!==undefined){this.isFullscreen_=!!isFS;this.toggleFullscreenClass_();return}return!!this.isFullscreen_};_proto.requestFullscreen=function requestFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(true);if(fsApi.requestFullscreen){on(document_1,fsApi.fullscreenchange,this.boundDocumentFullscreenChange_);this.el_[fsApi.requestFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow();this.trigger("fullscreenchange")}};_proto.exitFullscreen=function exitFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(false);if(fsApi.requestFullscreen){document_1[fsApi.exitFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow();this.trigger("fullscreenchange")}};_proto.enterFullWindow=function enterFullWindow(){this.isFullWindow=true;this.docOrigOverflow=document_1.documentElement.style.overflow;on(document_1,"keydown",this.boundFullWindowOnEscKey_);document_1.documentElement.style.overflow="hidden";addClass(document_1.body,"vjs-full-window");this.trigger("enterFullWindow")};_proto.fullWindowOnEscKey=function fullWindowOnEscKey(event){if(keycode.isEventKey(event,"Esc")){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};_proto.exitFullWindow=function exitFullWindow(){this.isFullWindow=false;off(document_1,"keydown",this.boundFullWindowOnEscKey_);document_1.documentElement.style.overflow=this.docOrigOverflow;removeClass(document_1.body,"vjs-full-window");this.trigger("exitFullWindow")};_proto.handleFocus=function handleFocus(event){off(document_1,"keydown",this.boundHandleKeyPress_);on(document_1,"keydown",this.boundHandleKeyPress_)};_proto.handleBlur=function handleBlur(event){off(document_1,"keydown",this.boundHandleKeyPress_)};_proto.handleKeyPress=function handleKeyPress(event){if(this.options_.userActions&&this.options_.userActions.hotkeys&&this.options_.userActions.hotkeys!==false){if(typeof this.options_.userActions.hotkeys==="function"){this.options_.userActions.hotkeys.call(this,event)}else{this.handleHotkeys(event)}}};_proto.handleHotkeys=function handleHotkeys(event){var hotkeys=this.options_.userActions?this.options_.userActions.hotkeys:{};var _hotkeys$fullscreenKe=hotkeys.fullscreenKey,fullscreenKey=_hotkeys$fullscreenKe===void 0?function(keydownEvent){return keycode.isEventKey(keydownEvent,"f")}:_hotkeys$fullscreenKe,_hotkeys$muteKey=hotkeys.muteKey,muteKey=_hotkeys$muteKey===void 0?function(keydownEvent){return keycode.isEventKey(keydownEvent,"m")}:_hotkeys$muteKey,_hotkeys$playPauseKey=hotkeys.playPauseKey,playPauseKey=_hotkeys$playPauseKey===void 0?function(keydownEvent){return keycode.isEventKey(keydownEvent,"k")||keycode.isEventKey(keydownEvent,"Space")}:_hotkeys$playPauseKey;if(fullscreenKey.call(this,event)){event.preventDefault();var FSToggle=Component.getComponent("FullscreenToggle");if(document_1[FullscreenApi.fullscreenEnabled]!==false){FSToggle.prototype.handleClick.call(this)}}else if(muteKey.call(this,event)){event.preventDefault();var MuteToggle=Component.getComponent("MuteToggle");MuteToggle.prototype.handleClick.call(this)}else if(playPauseKey.call(this,event)){event.preventDefault();var PlayToggle=Component.getComponent("PlayToggle");
PlayToggle.prototype.handleClick.call(this)}};_proto.canPlayType=function canPlayType(type){var can;for(var i=0,j=this.options_.techOrder;i<j.length;i++){var techName=j[i];var tech=Tech.getTech(techName);if(!tech){tech=Component.getComponent(techName)}if(!tech){log.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');continue}if(tech.isSupported()){can=tech.canPlayType(type);if(can){return can}}}return""};_proto.selectSource=function selectSource(sources){var _this10=this;var techs=this.options_.techOrder.map(function(techName){return[techName,Tech.getTech(techName)]}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];if(tech){return tech.isSupported()}log.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');return false});var findFirstPassingTechSourcePair=function findFirstPassingTechSourcePair(outerArray,innerArray,tester){var found;outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){found=tester(outerChoice,innerChoice);if(found){return true}})});return found};var foundSourceAndTech;var flip=function flip(fn){return function(a,b){return fn(b,a)}};var finder=function finder(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source,_this10.options_[techName.toLowerCase()])){return{source:source,tech:techName}}};if(this.options_.sourceOrder){foundSourceAndTech=findFirstPassingTechSourcePair(sources,techs,flip(finder))}else{foundSourceAndTech=findFirstPassingTechSourcePair(techs,sources,finder)}return foundSourceAndTech||false};_proto.src=function src(source){var _this11=this;if(typeof source==="undefined"){return this.cache_.src||""}var sources=filterSource(source);if(!sources.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=true;this.cache_.sources=sources;this.updateSourceCaches_(sources[0]);setSource(this,sources[0],function(middlewareSource,mws){_this11.middleware_=mws;_this11.cache_.sources=sources;_this11.updateSourceCaches_(middlewareSource);var err=_this11.src_(middlewareSource);if(err){if(sources.length>1){return _this11.src(sources.slice(1))}_this11.changingSrc_=false;_this11.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);_this11.triggerReady();return}setTech(mws,_this11.tech_)})};_proto.src_=function src_(source){var _this12=this;var sourceTech=this.selectSource([source]);if(!sourceTech){return true}if(!titleCaseEquals(sourceTech.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(sourceTech.tech,sourceTech.source);this.tech_.ready(function(){_this12.changingSrc_=false});return false}this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",source)}else{this.techCall_("src",source.src)}this.changingSrc_=false},true);return false};_proto.load=function load(){this.techCall_("load")};_proto.reset=function reset(){var _this13=this;var PromiseClass=this.options_.Promise||window_1.Promise;if(this.paused()||!PromiseClass){this.doReset_()}else{var playPromise=this.play();silencePromise(playPromise.then(function(){return _this13.doReset_()}))}};_proto.doReset_=function doReset_(){if(this.tech_){this.tech_.clearTracks("text")}this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(isEvented(this)){this.trigger("playerreset")}};_proto.resetControlBarUI_=function resetControlBarUI_(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};_proto.resetProgressBar_=function resetProgressBar_(){this.currentTime(0);var _this$controlBar=this.controlBar,durationDisplay=_this$controlBar.durationDisplay,remainingTimeDisplay=_this$controlBar.remainingTimeDisplay;if(durationDisplay){durationDisplay.updateContent()}if(remainingTimeDisplay){remainingTimeDisplay.updateContent()}};_proto.resetPlaybackRate_=function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};_proto.resetVolumeBar_=function resetVolumeBar_(){this.volume(1);this.trigger("volumechange")};_proto.currentSources=function currentSources(){var source=this.currentSource();var sources=[];if(Object.keys(source).length!==0){sources.push(source)}return this.cache_.sources||sources};_proto.currentSource=function currentSource(){return this.cache_.source||{}};_proto.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||""};_proto.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||""};_proto.preload=function preload(value){if(value!==undefined){this.techCall_("setPreload",value);this.options_.preload=value;return}return this.techGet_("preload")};_proto.autoplay=function autoplay(value){if(value===undefined){return this.options_.autoplay||false}var techAutoplay;if(typeof value==="string"&&/(any|play|muted)/.test(value)){this.options_.autoplay=value;this.manualAutoplay_(value);techAutoplay=false}else if(!value){this.options_.autoplay=false}else{this.options_.autoplay=true}techAutoplay=typeof techAutoplay==="undefined"?this.options_.autoplay:techAutoplay;if(this.tech_){this.techCall_("setAutoplay",techAutoplay)}};_proto.playsinline=function playsinline(value){if(value!==undefined){this.techCall_("setPlaysinline",value);this.options_.playsinline=value;return this}return this.techGet_("playsinline")};_proto.loop=function loop(value){if(value!==undefined){this.techCall_("setLoop",value);this.options_.loop=value;return}return this.techGet_("loop")};_proto.poster=function poster(src){if(src===undefined){return this.poster_}if(!src){src=""}if(src===this.poster_){return}this.poster_=src;this.techCall_("setPoster",src);this.isPosterFromTech_=false;this.trigger("posterchange")};_proto.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var newPoster=this.tech_.poster()||"";if(newPoster!==this.poster_){this.poster_=newPoster;this.isPosterFromTech_=true;this.trigger("posterchange")}}};_proto.controls=function controls(bool){if(bool===undefined){return!!this.controls_}bool=!!bool;if(this.controls_===bool){return}this.controls_=bool;if(this.usingNativeControls()){this.techCall_("setControls",bool)}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}};_proto.usingNativeControls=function usingNativeControls(bool){if(bool===undefined){return!!this.usingNativeControls_}bool=!!bool;if(this.usingNativeControls_===bool){return}this.usingNativeControls_=bool;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}};_proto.error=function error(err){if(err===undefined){return this.error_||null}if(err===null){this.error_=err;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return}this.error_=new MediaError(err);this.addClass("vjs-error");log.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return};_proto.reportUserActivity=function reportUserActivity(event){this.userActivity_=true};_proto.userActive=function userActive(bool){if(bool===undefined){return this.userActive_}bool=!!bool;if(bool===this.userActive_){return}this.userActive_=bool;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()})}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")};_proto.listenForUserActivity_=function listenForUserActivity_(){var mouseInProgress;var lastMoveX;var lastMoveY;var handleActivity=bind(this,this.reportUserActivity);var handleMouseMove=function handleMouseMove(e){if(e.screenX!==lastMoveX||e.screenY!==lastMoveY){lastMoveX=e.screenX;lastMoveY=e.screenY;handleActivity()}};var handleMouseDown=function handleMouseDown(){handleActivity();this.clearInterval(mouseInProgress);mouseInProgress=this.setInterval(handleActivity,250)};var handleMouseUp=function handleMouseUp(event){handleActivity();this.clearInterval(mouseInProgress)};this.on("mousedown",handleMouseDown);this.on("mousemove",handleMouseMove);this.on("mouseup",handleMouseUp);var controlBar=this.getChild("controlBar");if(controlBar&&!IS_IOS&&!IS_ANDROID){controlBar.on("mouseenter",function(event){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0});controlBar.on("mouseleave",function(event){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})}this.on("keydown",handleActivity);this.on("keyup",handleActivity);var inactivityTimeout;this.setInterval(function(){if(!this.userActivity_){return}this.userActivity_=false;this.userActive(true);this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;if(timeout<=0){return}inactivityTimeout=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false)}},timeout)},250)};_proto.playbackRate=function playbackRate(rate){if(rate!==undefined){this.techCall_("setPlaybackRate",rate);return}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate")}return 1};_proto.defaultPlaybackRate=function defaultPlaybackRate(rate){if(rate!==undefined){return this.techCall_("setDefaultPlaybackRate",rate)}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate")}return 1};_proto.isAudio=function isAudio(bool){if(bool!==undefined){this.isAudio_=!!bool;return}return!!this.isAudio_};_proto.addTextTrack=function addTextTrack(kind,label,language){if(this.tech_){return this.tech_.addTextTrack(kind,label,language)}};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){if(this.tech_){return this.tech_.addRemoteTextTrack(options,manualCleanup)}};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(obj){if(obj===void 0){obj={}}var _obj=obj,track=_obj.track;if(!track){track=obj}if(this.tech_){return this.tech_.removeRemoteTextTrack(track)}};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")};_proto.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};_proto.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};_proto.language=function language(code){if(code===undefined){return this.language_}this.language_=String(code).toLowerCase()};_proto.languages=function languages(){return mergeOptions(Player.prototype.options_.languages,this.languages_)};_proto.toJSON=function toJSON(){var options=mergeOptions(this.options_);var tracks=options.tracks;options.tracks=[];for(var i=0;i<tracks.length;i++){var track=tracks[i];track=mergeOptions(track);track.player=undefined;options.tracks[i]=track}return options};_proto.createModal=function createModal(content,options){var _this14=this;options=options||{};options.content=content||"";var modal=new ModalDialog(this,options);this.addChild(modal);modal.on("dispose",function(){_this14.removeChild(modal)});modal.open();return modal};_proto.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(!this.responsive()){return}var currentBreakpoint=this.currentBreakpoint();var currentWidth=this.currentWidth();for(var i=0;i<BREAKPOINT_ORDER.length;i++){var candidateBreakpoint=BREAKPOINT_ORDER[i];var maxWidth=this.breakpoints_[candidateBreakpoint];if(currentWidth<=maxWidth){if(currentBreakpoint===candidateBreakpoint){return}if(currentBreakpoint){this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint])}this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);this.breakpoint_=candidateBreakpoint;break}}};_proto.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var className=this.currentBreakpointClass();this.breakpoint_="";if(className){this.removeClass(className)}};_proto.breakpoints=function breakpoints(_breakpoints){if(_breakpoints===undefined){return assign(this.breakpoints_)}this.breakpoint_="";this.breakpoints_=assign({},DEFAULT_BREAKPOINTS,_breakpoints);this.updateCurrentBreakpoint_();return assign(this.breakpoints_)};_proto.responsive=function responsive(value){if(value===undefined){return this.responsive_}value=Boolean(value);var current=this.responsive_;if(value===current){return}this.responsive_=value;if(value){this.on("playerresize",this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_()}else{this.off("playerresize",this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_()}return value};_proto.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_};_proto.currentBreakpointClass=function currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||""};_proto.loadMedia=function loadMedia(media,ready){var _this15=this;if(!media||(typeof media==="undefined"?"undefined":_typeof2(media))!=="object"){return}this.reset();this.cache_.media=mergeOptions(media);var _this$cache_$media=this.cache_.media,artwork=_this$cache_$media.artwork,poster=_this$cache_$media.poster,src=_this$cache_$media.src,textTracks=_this$cache_$media.textTracks;if(!artwork&&poster){this.cache_.media.artwork=[{src:poster,type:getMimetype(poster)}]}if(src){this.src(src)}if(poster){this.poster(poster)}if(Array.isArray(textTracks)){textTracks.forEach(function(tt){return _this15.addRemoteTextTrack(tt,false)})}this.ready(ready)};_proto.getMedia=function getMedia(){if(!this.cache_.media){var poster=this.poster();var src=this.currentSources();var textTracks=Array.prototype.map.call(this.remoteTextTracks(),function(tt){return{kind:tt.kind,label:tt.label,language:tt.language,src:tt.src}});var media={src:src,textTracks:textTracks};if(poster){media.poster=poster;media.artwork=[{src:media.poster,type:getMimetype(media.poster)}]}return media}return mergeOptions(this.cache_.media)};Player.getTagSettings=function getTagSettings(tag){var baseOptions={sources:[],tracks:[]};var tagOptions=getAttributes(tag);var dataSetup=tagOptions["data-setup"];if(hasClass(tag,"vjs-fill")){tagOptions.fill=true}if(hasClass(tag,"vjs-fluid")){tagOptions.fluid=true}if(dataSetup!==null){var _safeParseTuple=tuple(dataSetup||"{}"),err=_safeParseTuple[0],data=_safeParseTuple[1];if(err){log.error(err)}assign(tagOptions,data)}assign(baseOptions,tagOptions);if(tag.hasChildNodes()){var children=tag.childNodes;for(var i=0,j=children.length;i<j;i++){var child=children[i];var childName=child.nodeName.toLowerCase();if(childName==="source"){baseOptions.sources.push(getAttributes(child))}else if(childName==="track"){baseOptions.tracks.push(getAttributes(child))}}}return baseOptions};_proto.flexNotSupported_=function flexNotSupported_(){var elem=document_1.createElement("i");return!("flexBasis"in elem.style||"webkitFlexBasis"in elem.style||"mozFlexBasis"in elem.style||"msFlexBasis"in elem.style||"msFlexOrder"in elem.style)};return Player}(Component);ALL.names.forEach(function(name$$1){var props=ALL[name$$1];Player.prototype[props.getterName]=function(){if(this.tech_){return this.tech_[props.getterName]()}this[props.privateName]=this[props.privateName]||new props.ListClass;return this[props.privateName]}});Player.players={};var navigator$1=window_1.navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator$1&&(navigator$1.languages&&navigator$1.languages[0]||navigator$1.userLanguage||navigator$1.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:false};["ended","seeking","seekable","networkState","readyState"].forEach(function(fn){Player.prototype[fn]=function(){return this.techGet_(fn)}});TECH_EVENTS_RETRIGGER.forEach(function(event){Player.prototype["handleTech"+toTitleCase(event)+"_"]=function(){return this.trigger(event)}});Component.registerComponent("Player",Player);var BASE_PLUGIN_NAME="plugin";var PLUGIN_CACHE_KEY="activePlugins_";var pluginStorage={};var pluginExists=function pluginExists(name){return pluginStorage.hasOwnProperty(name)};var getPlugin=function getPlugin(name){return pluginExists(name)?pluginStorage[name]:undefined};var markPluginAsActive=function markPluginAsActive(player,name){player[PLUGIN_CACHE_KEY]=player[PLUGIN_CACHE_KEY]||{};player[PLUGIN_CACHE_KEY][name]=true};var triggerSetupEvent=function triggerSetupEvent(player,hash,before){var eventName=(before?"before":"")+"pluginsetup";player.trigger(eventName,hash);player.trigger(eventName+":"+hash.name,hash)};var createBasicPlugin=function createBasicPlugin(name,plugin){var basicPluginWrapper=function basicPluginWrapper(){triggerSetupEvent(this,{name:name,plugin:plugin,instance:null},true);var instance=plugin.apply(this,arguments);markPluginAsActive(this,name);triggerSetupEvent(this,{name:name,plugin:plugin,instance:instance});return instance};Object.keys(plugin).forEach(function(prop){basicPluginWrapper[prop]=plugin[prop]});return basicPluginWrapper};var createPluginFactory=function createPluginFactory(name,PluginSubClass){PluginSubClass.prototype.name=name;return function(){triggerSetupEvent(this,{name:name,plugin:PluginSubClass,instance:null},true);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var instance=_construct(PluginSubClass,[this].concat(args));this[name]=function(){return instance};triggerSetupEvent(this,instance.getEventHash());return instance}};var Plugin=function(){function Plugin(player){if(this.constructor===Plugin){throw new Error("Plugin must be sub-classed; not directly instantiated.")}this.player=player;evented(this);delete this.trigger;stateful(this,this.constructor.defaultState);markPluginAsActive(player,this.name);this.dispose=bind(this,this.dispose);player.on("dispose",this.dispose)}var _proto=Plugin.prototype;_proto.version=function version(){return this.constructor.VERSION};_proto.getEventHash=function getEventHash(hash){if(hash===void 0){hash={}}hash.name=this.name;hash.plugin=this.constructor;hash.instance=this;return hash};_proto.trigger=function trigger$$1(event,hash){if(hash===void 0){hash={}}return trigger(this.eventBusEl_,event,this.getEventHash(hash))};_proto.handleStateChanged=function handleStateChanged(e){};_proto.dispose=function dispose(){var name=this.name,player=this.player;this.trigger("dispose");this.off();player.off("dispose",this.dispose);player[PLUGIN_CACHE_KEY][name]=false;this.player=this.state=null;player[name]=createPluginFactory(name,pluginStorage[name])};Plugin.isBasic=function isBasic(plugin){var p=typeof plugin==="string"?getPlugin(plugin):plugin;return typeof p==="function"&&!Plugin.prototype.isPrototypeOf(p.prototype)};Plugin.registerPlugin=function registerPlugin(name,plugin){if(typeof name!=="string"){throw new Error('Illegal plugin name, "'+name+'", must be a string, was '+(typeof name==="undefined"?"undefined":_typeof2(name))+".")}if(pluginExists(name)){log.warn('A plugin named "'+name+'" already exists. You may want to avoid re-registering plugins!')}else if(Player.prototype.hasOwnProperty(name)){throw new Error('Illegal plugin name, "'+name+'", cannot share a name with an existing player method!')}if(typeof plugin!=="function"){throw new Error('Illegal plugin for "'+name+'", must be a function, was '+(typeof plugin==="undefined"?"undefined":_typeof2(plugin))+".")}pluginStorage[name]=plugin;if(name!==BASE_PLUGIN_NAME){if(Plugin.isBasic(plugin)){Player.prototype[name]=createBasicPlugin(name,plugin)}else{Player.prototype[name]=createPluginFactory(name,plugin)}}return plugin};Plugin.deregisterPlugin=function deregisterPlugin(name){if(name===BASE_PLUGIN_NAME){throw new Error("Cannot de-register base plugin.")}if(pluginExists(name)){delete pluginStorage[name];delete Player.prototype[name]}};Plugin.getPlugins=function getPlugins(names){if(names===void 0){names=Object.keys(pluginStorage)}var result;names.forEach(function(name){var plugin=getPlugin(name);if(plugin){result=result||{};result[name]=plugin}});return result};Plugin.getPluginVersion=function getPluginVersion(name){var plugin=getPlugin(name);return plugin&&plugin.VERSION||""};return Plugin}();Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(name){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][name]===true};Player.prototype.hasPlugin=function(name){return!!pluginExists(name)};var _inherits$1=function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass){subClass.super_=superClass}};var extend$1=function extend(superClass,subClassMethods){if(subClassMethods===void 0){subClassMethods={}}var subClass=function subClass(){superClass.apply(this,arguments)};var methods={};if((typeof subClassMethods==="undefined"?"undefined":_typeof2(subClassMethods))==="object"){if(subClassMethods.constructor!==Object.prototype.constructor){subClass=subClassMethods.constructor}methods=subClassMethods}else if(typeof subClassMethods==="function"){subClass=subClassMethods}_inherits$1(subClass,superClass);for(var name in methods){if(methods.hasOwnProperty(name)){subClass.prototype[name]=methods[name]}}return subClass};var normalizeId=function normalizeId(id){return id.indexOf("#")===0?id.slice(1):id};function videojs$1(id,options,ready){var player=videojs$1.getPlayer(id);if(player){if(options){log.warn('Player "'+id+'" is already initialised. Options will not be applied.')}if(ready){player.ready(ready)}return player}var el=typeof id==="string"?$("#"+normalizeId(id)):id;if(!isEl(el)){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(!el.ownerDocument.defaultView||!el.ownerDocument.body.contains(el)){log.warn("The element supplied is not included in the DOM")}options=options||{};videojs$1.hooks("beforesetup").forEach(function(hookFunction){var opts=hookFunction(el,mergeOptions(options));if(!isObject$1(opts)||Array.isArray(opts)){log.error("please return an object in beforesetup hooks");return}options=mergeOptions(options,opts)});var PlayerComponent=Component.getComponent("Player");player=new PlayerComponent(el,options,ready);videojs$1.hooks("setup").forEach(function(hookFunction){return hookFunction(player)});return player}videojs$1.hooks_={};videojs$1.hooks=function(type,fn){videojs$1.hooks_[type]=videojs$1.hooks_[type]||[];if(fn){videojs$1.hooks_[type]=videojs$1.hooks_[type].concat(fn)}return videojs$1.hooks_[type]};videojs$1.hook=function(type,fn){videojs$1.hooks(type,fn)};videojs$1.hookOnce=function(type,fn){videojs$1.hooks(type,[].concat(fn).map(function(original){var wrapper=function wrapper(){videojs$1.removeHook(type,wrapper);return original.apply(void 0,arguments)};return wrapper}))};videojs$1.removeHook=function(type,fn){var index=videojs$1.hooks(type).indexOf(fn);if(index<=-1){return false}videojs$1.hooks_[type]=videojs$1.hooks_[type].slice();videojs$1.hooks_[type].splice(index,1);return true};if(window_1.VIDEOJS_NO_DYNAMIC_STYLE!==true&&isReal()){var style$1=$(".vjs-styles-defaults");if(!style$1){style$1=createStyleElement("vjs-styles-defaults");var head=$("head");if(head){head.insertBefore(style$1,head.firstChild)}setTextContent(style$1,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}autoSetupTimeout(1,videojs$1);videojs$1.VERSION=version$2;videojs$1.options=Player.prototype.options_;videojs$1.getPlayers=function(){return Player.players};videojs$1.getPlayer=function(id){var players=Player.players;var tag;if(typeof id==="string"){var nId=normalizeId(id);var player=players[nId];if(player){return player}tag=$("#"+nId)}else{tag=id}if(isEl(tag)){var _tag=tag,_player=_tag.player,playerId=_tag.playerId;if(_player||players[playerId]){return _player||players[playerId]}}};videojs$1.getAllPlayers=function(){return Object.keys(Player.players).map(function(k){return Player.players[k]}).filter(Boolean)};videojs$1.players=Player.players;videojs$1.getComponent=Component.getComponent;videojs$1.registerComponent=function(name$$1,comp){if(Tech.isTech(comp)){log.warn("The "+name$$1+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}Component.registerComponent.call(Component,name$$1,comp)};videojs$1.getTech=Tech.getTech;videojs$1.registerTech=Tech.registerTech;videojs$1.use=use;Object.defineProperty(videojs$1,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(videojs$1.middleware,"TERMINATOR",{value:TERMINATOR,writeable:false,enumerable:true});videojs$1.browser=browser;videojs$1.TOUCH_ENABLED=TOUCH_ENABLED;videojs$1.extend=extend$1;videojs$1.mergeOptions=mergeOptions;videojs$1.bind=bind;videojs$1.registerPlugin=Plugin.registerPlugin;videojs$1.deregisterPlugin=Plugin.deregisterPlugin;videojs$1.plugin=function(name$$1,plugin){log.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Plugin.registerPlugin(name$$1,plugin)};videojs$1.getPlugins=Plugin.getPlugins;videojs$1.getPlugin=Plugin.getPlugin;videojs$1.getPluginVersion=Plugin.getPluginVersion;videojs$1.addLanguage=function(code,data){var _mergeOptions;code=(""+code).toLowerCase();videojs$1.options.languages=mergeOptions(videojs$1.options.languages,(_mergeOptions={},_mergeOptions[code]=data,_mergeOptions));return videojs$1.options.languages[code]};videojs$1.log=log;videojs$1.createLogger=createLogger$1;videojs$1.createTimeRange=videojs$1.createTimeRanges=createTimeRanges;videojs$1.formatTime=formatTime;videojs$1.setFormatTime=setFormatTime;videojs$1.resetFormatTime=resetFormatTime;videojs$1.parseUrl=parseUrl;videojs$1.isCrossOrigin=isCrossOrigin;videojs$1.EventTarget=EventTarget;videojs$1.on=on;videojs$1.one=one;videojs$1.off=off;videojs$1.trigger=trigger;videojs$1.xhr=xhr;videojs$1.TextTrack=TextTrack;videojs$1.AudioTrack=AudioTrack;videojs$1.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(k){videojs$1[k]=function(){log.warn("videojs."+k+"() is deprecated; use videojs.dom."+k+"() instead");return Dom[k].apply(null,arguments)}});videojs$1.computedStyle=computedStyle;videojs$1.dom=Dom;videojs$1.url=Url;var resolveUrl$1=function resolveUrl(baseURL,relativeURL){if(/^[a-z]+:/i.test(relativeURL)){return relativeURL}if(!/\/\//i.test(baseURL)){baseURL=urlToolkit.buildAbsoluteURL(window_1.location.href,baseURL)}return urlToolkit.buildAbsoluteURL(baseURL,relativeURL)};var resolveManifestRedirect=function resolveManifestRedirect(handleManifestRedirect,url,req){if(handleManifestRedirect&&req.responseURL&&url!==req.responseURL){return req.responseURL}return url};var classCallCheck$1=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass$1=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var get$1=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var inherits$1=function inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};var possibleConstructorReturn$1=function possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self};var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var mergeOptions$1=videojs$1.mergeOptions,EventTarget$1=videojs$1.EventTarget,log$1=videojs$1.log;var forEachMediaGroup=function forEachMediaGroup(master,callback){["AUDIO","SUBTITLES"].forEach(function(mediaType){for(var groupKey in master.mediaGroups[mediaType]){for(var labelKey in master.mediaGroups[mediaType][groupKey]){var mediaProperties=master.mediaGroups[mediaType][groupKey][labelKey];callback(mediaProperties,mediaType,groupKey,labelKey)}}})};var updateSegments=function updateSegments(original,update,offset){var result=update.slice();offset=offset||0;var length=Math.min(original.length,update.length+offset);for(var i=offset;i<length;i++){result[i-offset]=mergeOptions$1(original[i],result[i-offset])}return result};var resolveSegmentUris=function resolveSegmentUris(segment,baseUri){if(!segment.resolvedUri){segment.resolvedUri=resolveUrl$1(baseUri,segment.uri)}if(segment.key&&!segment.key.resolvedUri){segment.key.resolvedUri=resolveUrl$1(baseUri,segment.key.uri)}if(segment.map&&!segment.map.resolvedUri){segment.map.resolvedUri=resolveUrl$1(baseUri,segment.map.uri)}};var updateMaster=function updateMaster(master,media){var result=mergeOptions$1(master,{});var playlist=result.playlists[media.uri];if(!playlist){return null}if(playlist.segments&&media.segments&&playlist.segments.length===media.segments.length&&playlist.endList===media.endList&&playlist.mediaSequence===media.mediaSequence){return null}var mergedPlaylist=mergeOptions$1(playlist,media);if(playlist.segments){mergedPlaylist.segments=updateSegments(playlist.segments,media.segments,media.mediaSequence-playlist.mediaSequence);
}mergedPlaylist.segments.forEach(function(segment){resolveSegmentUris(segment,mergedPlaylist.resolvedUri)});for(var i=0;i<result.playlists.length;i++){if(result.playlists[i].uri===media.uri){result.playlists[i]=mergedPlaylist}}result.playlists[media.uri]=mergedPlaylist;return result};var setupMediaPlaylists=function setupMediaPlaylists(master){var i=master.playlists.length;while(i--){var playlist=master.playlists[i];master.playlists[playlist.uri]=playlist;playlist.resolvedUri=resolveUrl$1(master.uri,playlist.uri);playlist.id=i;if(!playlist.attributes){playlist.attributes={};log$1.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};var resolveMediaGroupUris=function resolveMediaGroupUris(master){forEachMediaGroup(master,function(properties){if(properties.uri){properties.resolvedUri=resolveUrl$1(master.uri,properties.uri)}})};var refreshDelay=function refreshDelay(media,update){var lastSegment=media.segments[media.segments.length-1];var delay=void 0;if(update&&lastSegment&&lastSegment.duration){delay=lastSegment.duration*1e3}else{delay=(media.targetDuration||10)*500}return delay};var PlaylistLoader=function(_EventTarget){inherits$1(PlaylistLoader,_EventTarget);function PlaylistLoader(srcUrl,hls){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};classCallCheck$1(this,PlaylistLoader);var _this=possibleConstructorReturn$1(this,(PlaylistLoader.__proto__||Object.getPrototypeOf(PlaylistLoader)).call(this));var _options$withCredenti=options.withCredentials,withCredentials=_options$withCredenti===undefined?false:_options$withCredenti,_options$handleManife=options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===undefined?false:_options$handleManife;_this.srcUrl=srcUrl;_this.hls_=hls;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;var hlsOptions=hls.options_;_this.customTagParsers=hlsOptions&&hlsOptions.customTagParsers||[];_this.customTagMappers=hlsOptions&&hlsOptions.customTagMappers||[];if(!_this.srcUrl){throw new Error("A non-empty playlist URL is required")}_this.state="HAVE_NOTHING";_this.on("mediaupdatetimeout",function(){if(_this.state!=="HAVE_METADATA"){return}_this.state="HAVE_CURRENT_METADATA";_this.request=_this.hls_.xhr({uri:resolveUrl$1(_this.master.uri,_this.media().uri),withCredentials:_this.withCredentials},function(error,req){if(!_this.request){return}if(error){return _this.playlistRequestError(_this.request,_this.media().uri,"HAVE_METADATA")}_this.haveMetadata(_this.request,_this.media().uri)})});return _this}createClass$1(PlaylistLoader,[{key:"playlistRequestError",value:function playlistRequestError(xhr$$1,url,startingState){this.request=null;if(startingState){this.state=startingState}this.error={playlist:this.master.playlists[url],status:xhr$$1.status,message:"HLS playlist request error at URL: "+url,responseText:xhr$$1.responseText,code:xhr$$1.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function haveMetadata(xhr$$1,url){var _this2=this;this.request=null;this.state="HAVE_METADATA";var parser=new Parser;this.customTagParsers.forEach(function(customParser){return parser.addParser(customParser)});this.customTagMappers.forEach(function(mapper){return parser.addTagMapper(mapper)});parser.push(xhr$$1.responseText);parser.end();parser.manifest.uri=url;parser.manifest.attributes=parser.manifest.attributes||{};var update=updateMaster(this.master,parser.manifest);this.targetDuration=parser.manifest.targetDuration;if(update){this.master=update;this.media_=this.master.playlists[parser.manifest.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){window_1.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=window_1.setTimeout(function(){_this2.trigger("mediaupdatetimeout")},refreshDelay(this.media(),!!update))}this.trigger("loadedplaylist")}},{key:"dispose",value:function dispose(){this.stopRequest();window_1.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort()}}},{key:"media",value:function media(playlist){var _this3=this;if(!playlist){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var startingState=this.state;if(typeof playlist==="string"){if(!this.master.playlists[playlist]){throw new Error("Unknown playlist URI: "+playlist)}playlist=this.master.playlists[playlist]}var mediaChange=!this.media_||playlist.uri!==this.media_.uri;if(this.master.playlists[playlist.uri].endList){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=playlist;if(mediaChange){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!mediaChange){return}this.state="SWITCHING_MEDIA";if(this.request){if(playlist.resolvedUri===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.hls_.xhr({uri:playlist.resolvedUri,withCredentials:this.withCredentials},function(error,req){if(!_this3.request){return}playlist.resolvedUri=resolveManifestRedirect(_this3.handleManifestRedirects,playlist.resolvedUri,req);if(error){return _this3.playlistRequestError(_this3.request,playlist.uri,startingState)}_this3.haveMetadata(req,playlist.uri);if(startingState==="HAVE_MASTER"){_this3.trigger("loadedmetadata")}else{_this3.trigger("mediachange")}})}},{key:"pause",value:function pause(){this.stopRequest();window_1.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}}},{key:"load",value:function load(isFinalRendition){var _this4=this;window_1.clearTimeout(this.mediaUpdateTimeout);var media=this.media();if(isFinalRendition){var delay=media?media.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=window_1.setTimeout(function(){return _this4.load()},delay);return}if(!this.started){this.start();return}if(media&&!media.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"start",value:function start(){var _this5=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(error,req){if(!_this5.request){return}_this5.request=null;if(error){_this5.error={status:req.status,message:"HLS playlist request error at URL: "+_this5.srcUrl,responseText:req.responseText,code:2};if(_this5.state==="HAVE_NOTHING"){_this5.started=false}return _this5.trigger("error")}var parser=new Parser;_this5.customTagParsers.forEach(function(customParser){return parser.addParser(customParser)});_this5.customTagMappers.forEach(function(mapper){return parser.addTagMapper(mapper)});parser.push(req.responseText);parser.end();_this5.state="HAVE_MASTER";_this5.srcUrl=resolveManifestRedirect(_this5.handleManifestRedirects,_this5.srcUrl,req);parser.manifest.uri=_this5.srcUrl;if(parser.manifest.playlists){_this5.master=parser.manifest;setupMediaPlaylists(_this5.master);resolveMediaGroupUris(_this5.master);_this5.trigger("loadedplaylist");if(!_this5.request){_this5.media(parser.manifest.playlists[0])}return}_this5.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window_1.location.href,playlists:[{uri:_this5.srcUrl,id:0,resolvedUri:_this5.srcUrl,attributes:{}}]};_this5.master.playlists[_this5.srcUrl]=_this5.master.playlists[0];_this5.haveMetadata(req,_this5.srcUrl);return _this5.trigger("loadedmetadata")})}}]);return PlaylistLoader}(EventTarget$1);var createTimeRange=videojs$1.createTimeRange;var backwardDuration=function backwardDuration(playlist,endSequence){var result=0;var i=endSequence-playlist.mediaSequence;var segment=playlist.segments[i];if(segment){if(typeof segment.start!=="undefined"){return{result:segment.start,precise:true}}if(typeof segment.end!=="undefined"){return{result:segment.end-segment.duration,precise:true}}}while(i--){segment=playlist.segments[i];if(typeof segment.end!=="undefined"){return{result:result+segment.end,precise:true}}result+=segment.duration;if(typeof segment.start!=="undefined"){return{result:result+segment.start,precise:true}}}return{result:result,precise:false}};var forwardDuration=function forwardDuration(playlist,endSequence){var result=0;var segment=void 0;var i=endSequence-playlist.mediaSequence;for(;i<playlist.segments.length;i++){segment=playlist.segments[i];if(typeof segment.start!=="undefined"){return{result:segment.start-result,precise:true}}result+=segment.duration;if(typeof segment.end!=="undefined"){return{result:segment.end-result,precise:true}}}return{result:-1,precise:false}};var intervalDuration=function intervalDuration(playlist,endSequence,expired){var backward=void 0;var forward=void 0;if(typeof endSequence==="undefined"){endSequence=playlist.mediaSequence+playlist.segments.length}if(endSequence<playlist.mediaSequence){return 0}backward=backwardDuration(playlist,endSequence);if(backward.precise){return backward.result}forward=forwardDuration(playlist,endSequence);if(forward.precise){return forward.result}return backward.result+expired};var duration=function duration(playlist,endSequence,expired){if(!playlist){return 0}if(typeof expired!=="number"){expired=0}if(typeof endSequence==="undefined"){if(playlist.totalDuration){return playlist.totalDuration}if(!playlist.endList){return window_1.Infinity}}return intervalDuration(playlist,endSequence,expired)};var sumDurations=function sumDurations(playlist,startIndex,endIndex){var durations=0;if(startIndex>endIndex){var _ref=[endIndex,startIndex];startIndex=_ref[0];endIndex=_ref[1]}if(startIndex<0){for(var i=startIndex;i<Math.min(0,endIndex);i++){durations+=playlist.targetDuration}startIndex=0}for(var _i=startIndex;_i<endIndex;_i++){durations+=playlist.segments[_i].duration}return durations};var safeLiveIndex=function safeLiveIndex(playlist){if(!playlist.segments.length){return 0}var i=playlist.segments.length-1;var distanceFromEnd=playlist.segments[i].duration||playlist.targetDuration;var safeDistance=distanceFromEnd+playlist.targetDuration*2;while(i--){distanceFromEnd+=playlist.segments[i].duration;if(distanceFromEnd>=safeDistance){break}}return Math.max(0,i)};var playlistEnd=function playlistEnd(playlist,expired,useSafeLiveEnd){if(!playlist||!playlist.segments){return null}if(playlist.endList){return duration(playlist)}if(expired===null){return null}expired=expired||0;var endSequence=useSafeLiveEnd?safeLiveIndex(playlist):playlist.segments.length;return intervalDuration(playlist,playlist.mediaSequence+endSequence,expired)};var seekable=function seekable(playlist,expired){var useSafeLiveEnd=true;var seekableStart=expired||0;var seekableEnd=playlistEnd(playlist,expired,useSafeLiveEnd);if(seekableEnd===null){return createTimeRange()}return createTimeRange(seekableStart,seekableEnd)};var isWholeNumber=function isWholeNumber(num){return num-Math.floor(num)===0};var roundSignificantDigit=function roundSignificantDigit(increment,num){if(isWholeNumber(num)){return num+increment*.1}var numDecimalDigits=num.toString().split(".")[1].length;for(var i=1;i<=numDecimalDigits;i++){var scale=Math.pow(10,i);var temp=num*scale;if(isWholeNumber(temp)||i===numDecimalDigits){return(temp+increment)/scale}}};var ceilLeastSignificantDigit=roundSignificantDigit.bind(null,1);var floorLeastSignificantDigit=roundSignificantDigit.bind(null,-1);var getMediaInfoForTime=function getMediaInfoForTime(playlist,currentTime,startIndex,startTime){var i=void 0;var segment=void 0;var numSegments=playlist.segments.length;var time=currentTime-startTime;if(time<0){if(startIndex>0){for(i=startIndex-1;i>=0;i--){segment=playlist.segments[i];time+=floorLeastSignificantDigit(segment.duration);if(time>0){return{mediaIndex:i,startTime:startTime-sumDurations(playlist,startIndex,i)}}}}return{mediaIndex:0,startTime:currentTime}}if(startIndex<0){for(i=startIndex;i<0;i++){time-=playlist.targetDuration;if(time<0){return{mediaIndex:0,startTime:currentTime}}}startIndex=0}for(i=startIndex;i<numSegments;i++){segment=playlist.segments[i];time-=ceilLeastSignificantDigit(segment.duration);if(time<0){return{mediaIndex:i,startTime:startTime+sumDurations(playlist,startIndex,i)}}}return{mediaIndex:numSegments-1,startTime:currentTime}};var isBlacklisted=function isBlacklisted(playlist){return playlist.excludeUntil&&playlist.excludeUntil>Date.now()};var isIncompatible=function isIncompatible(playlist){return playlist.excludeUntil&&playlist.excludeUntil===Infinity};var isEnabled=function isEnabled(playlist){var blacklisted=isBlacklisted(playlist);return!playlist.disabled&&!blacklisted};var isDisabled=function isDisabled(playlist){return playlist.disabled};var isAes=function isAes(media){for(var i=0;i<media.segments.length;i++){if(media.segments[i].key){return true}}return false};var isFmp4=function isFmp4(media){for(var i=0;i<media.segments.length;i++){if(media.segments[i].map){return true}}return false};var hasAttribute=function hasAttribute(attr,playlist){return playlist.attributes&&playlist.attributes[attr]};var estimateSegmentRequestTime=function estimateSegmentRequestTime(segmentDuration,bandwidth,playlist){var bytesReceived=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(!hasAttribute("BANDWIDTH",playlist)){return NaN}var size=segmentDuration*playlist.attributes.BANDWIDTH;return(size-bytesReceived*8)/bandwidth};var isLowestEnabledRendition=function isLowestEnabledRendition(master,media){if(master.playlists.length===1){return true}var currentBandwidth=media.attributes.BANDWIDTH||Number.MAX_VALUE;return master.playlists.filter(function(playlist){if(!isEnabled(playlist)){return false}return(playlist.attributes.BANDWIDTH||0)<currentBandwidth}).length===0};var Playlist={duration:duration,seekable:seekable,safeLiveIndex:safeLiveIndex,getMediaInfoForTime:getMediaInfoForTime,isEnabled:isEnabled,isDisabled:isDisabled,isBlacklisted:isBlacklisted,isIncompatible:isIncompatible,playlistEnd:playlistEnd,isAes:isAes,isFmp4:isFmp4,hasAttribute:hasAttribute,estimateSegmentRequestTime:estimateSegmentRequestTime,isLowestEnabledRendition:isLowestEnabledRendition};var videojsXHR=videojs$1.xhr,mergeOptions$1$1=videojs$1.mergeOptions;var xhrFactory=function xhrFactory(){var xhr$$1=function XhrFunction(options,callback){options=mergeOptions$1$1({timeout:45e3},options);var beforeRequest=XhrFunction.beforeRequest||videojs$1.Hls.xhr.beforeRequest;if(beforeRequest&&typeof beforeRequest==="function"){var newOptions=beforeRequest(options);if(newOptions){options=newOptions}}var request=videojsXHR(options,function(error,response){var reqResponse=request.response;if(!error&&reqResponse){request.responseTime=Date.now();request.roundTripTime=request.responseTime-request.requestTime;request.bytesReceived=reqResponse.byteLength||reqResponse.length;if(!request.bandwidth){request.bandwidth=Math.floor(request.bytesReceived/request.roundTripTime*8*1e3)}}if(response.headers){request.responseHeaders=response.headers}if(error&&error.code==="ETIMEDOUT"){request.timedout=true}if(!error&&!request.aborted&&response.statusCode!==200&&response.statusCode!==206&&response.statusCode!==0){error=new Error("XHR Failed with a response of: "+(request&&(reqResponse||request.responseText)))}callback(error,request)});var originalAbort=request.abort;request.abort=function(){request.aborted=true;return originalAbort.apply(request,arguments)};request.uri=options.uri;request.requestTime=Date.now();return request};return xhr$$1};var textRange=function textRange(range,i){return range.start(i)+"-"+range.end(i)};var formatHexString=function formatHexString(e,i){var value=e.toString(16);return"00".substring(0,2-value.length)+value+(i%2?" ":"")};var formatAsciiString=function formatAsciiString(e){if(e>=32&&e<126){return String.fromCharCode(e)}return"."};var createTransferableMessage=function createTransferableMessage(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(ArrayBuffer.isView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength}}else{transferable[key]=value}});return transferable};var initSegmentId=function initSegmentId(initSegment){var byterange=initSegment.byterange||{length:Infinity,offset:0};return[byterange.length,byterange.offset,initSegment.resolvedUri].join(",")};var hexDump=function hexDump(data){var bytes=Array.prototype.slice.call(data);var step=16;var result="";var hex=void 0;var ascii=void 0;for(var j=0;j<bytes.length/step;j++){hex=bytes.slice(j*step,j*step+step).map(formatHexString).join("");ascii=bytes.slice(j*step,j*step+step).map(formatAsciiString).join("");result+=hex+" "+ascii+"\n"}return result};var tagDump=function tagDump(_ref){var bytes=_ref.bytes;return hexDump(bytes)};var textRanges=function textRanges(ranges){var result="";var i=void 0;for(i=0;i<ranges.length;i++){result+=textRange(ranges,i)+" "}return result};var utils$1=Object.freeze({createTransferableMessage:createTransferableMessage,initSegmentId:initSegmentId,hexDump:hexDump,tagDump:tagDump,textRanges:textRanges});var SEGMENT_END_FUDGE_PERCENT=.25;var playerTimeToProgramTime=function playerTimeToProgramTime(playerTime,segment){if(!segment.dateTimeObject){return null}var transmuxerPrependedSeconds=segment.videoTimingInfo.transmuxerPrependedSeconds;var transmuxedStart=segment.videoTimingInfo.transmuxedPresentationStart;var startOfSegment=transmuxedStart+transmuxerPrependedSeconds;var offsetFromSegmentStart=playerTime-startOfSegment;return new Date(segment.dateTimeObject.getTime()+offsetFromSegmentStart*1e3)};var originalSegmentVideoDuration=function originalSegmentVideoDuration(videoTimingInfo){return videoTimingInfo.transmuxedPresentationEnd-videoTimingInfo.transmuxedPresentationStart-videoTimingInfo.transmuxerPrependedSeconds};var findSegmentForProgramTime=function findSegmentForProgramTime(programTime,playlist){var dateTimeObject=void 0;try{dateTimeObject=new Date(programTime)}catch(e){return null}if(!playlist||!playlist.segments||playlist.segments.length===0){return null}var segment=playlist.segments[0];if(dateTimeObject<segment.dateTimeObject){return null}for(var i=0;i<playlist.segments.length-1;i++){segment=playlist.segments[i];var nextSegmentStart=playlist.segments[i+1].dateTimeObject;if(dateTimeObject<nextSegmentStart){break}}var lastSegment=playlist.segments[playlist.segments.length-1];var lastSegmentStart=lastSegment.dateTimeObject;var lastSegmentDuration=lastSegment.videoTimingInfo?originalSegmentVideoDuration(lastSegment.videoTimingInfo):lastSegment.duration+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT;var lastSegmentEnd=new Date(lastSegmentStart.getTime()+lastSegmentDuration*1e3);if(dateTimeObject>lastSegmentEnd){return null}if(dateTimeObject>lastSegmentStart){segment=lastSegment}return{segment:segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(playlist,playlist.mediaSequence+playlist.segments.indexOf(segment)),type:segment.videoTimingInfo?"accurate":"estimate"}};var findSegmentForPlayerTime=function findSegmentForPlayerTime(time,playlist){if(!playlist||!playlist.segments||playlist.segments.length===0){return null}var segmentEnd=0;var segment=void 0;for(var i=0;i<playlist.segments.length;i++){segment=playlist.segments[i];segmentEnd=segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationEnd:segmentEnd+segment.duration;if(time<=segmentEnd){break}}var lastSegment=playlist.segments[playlist.segments.length-1];if(lastSegment.videoTimingInfo&&lastSegment.videoTimingInfo.transmuxedPresentationEnd<time){return null}if(time>segmentEnd){if(time>segmentEnd+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT){return null}segment=lastSegment}return{segment:segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:segmentEnd-segment.duration,type:segment.videoTimingInfo?"accurate":"estimate"}};var getOffsetFromTimestamp=function getOffsetFromTimestamp(comparisonTimeStamp,programTime){var segmentDateTime=void 0;var programDateTime=void 0;try{segmentDateTime=new Date(comparisonTimeStamp);programDateTime=new Date(programTime)}catch(e){}var segmentTimeEpoch=segmentDateTime.getTime();var programTimeEpoch=programDateTime.getTime();return(programTimeEpoch-segmentTimeEpoch)/1e3};var verifyProgramDateTimeTags=function verifyProgramDateTimeTags(playlist){if(!playlist.segments||playlist.segments.length===0){return false}for(var i=0;i<playlist.segments.length;i++){var segment=playlist.segments[i];if(!segment.dateTimeObject){return false}}return true};var getProgramTime=function getProgramTime(_ref){var playlist=_ref.playlist,_ref$time=_ref.time,time=_ref$time===undefined?undefined:_ref$time,callback=_ref.callback;if(!callback){throw new Error("getProgramTime: callback must be provided")}if(!playlist||time===undefined){return callback({message:"getProgramTime: playlist and time must be provided"})}var matchedSegment=findSegmentForPlayerTime(time,playlist);if(!matchedSegment){return callback({message:"valid programTime was not found"})}if(matchedSegment.type==="estimate"){return callback({message:"Accurate programTime could not be determined."+" Please seek to e.seekTime and try again",seekTime:matchedSegment.estimatedStart})}var programTimeObject={mediaSeconds:time};var programTime=playerTimeToProgramTime(time,matchedSegment.segment);if(programTime){programTimeObject.programDateTime=programTime.toISOString()}return callback(null,programTimeObject)};var seekToProgramTime=function seekToProgramTime(_ref2){var programTime=_ref2.programTime,playlist=_ref2.playlist,_ref2$retryCount=_ref2.retryCount,retryCount=_ref2$retryCount===undefined?2:_ref2$retryCount,seekTo=_ref2.seekTo,_ref2$pauseAfterSeek=_ref2.pauseAfterSeek,pauseAfterSeek=_ref2$pauseAfterSeek===undefined?true:_ref2$pauseAfterSeek,tech=_ref2.tech,callback=_ref2.callback;if(!callback){throw new Error("seekToProgramTime: callback must be provided")}if(typeof programTime==="undefined"||!playlist||!seekTo){return callback({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}if(!playlist.endList&&!tech.hasStarted_){return callback({message:"player must be playing a live stream to start buffering"})}if(!verifyProgramDateTimeTags(playlist)){return callback({message:"programDateTime tags must be provided in the manifest "+playlist.resolvedUri})}var matchedSegment=findSegmentForProgramTime(programTime,playlist);if(!matchedSegment){return callback({message:programTime+" was not found in the stream"})}var segment=matchedSegment.segment;var mediaOffset=getOffsetFromTimestamp(segment.dateTimeObject,programTime);if(matchedSegment.type==="estimate"){if(retryCount===0){return callback({message:programTime+" is not buffered yet. Try again"})}seekTo(matchedSegment.estimatedStart+mediaOffset);tech.one("seeked",function(){seekToProgramTime({programTime:programTime,playlist:playlist,retryCount:retryCount-1,seekTo:seekTo,pauseAfterSeek:pauseAfterSeek,tech:tech,callback:callback})});return}var seekToTime=segment.start+mediaOffset;var seekedCallback=function seekedCallback(){return callback(null,tech.currentTime())};tech.one("seeked",seekedCallback);if(pauseAfterSeek){tech.pause()}seekTo(seekToTime)};var TIME_FUDGE_FACTOR=1/30;var SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3;var filterRanges=function filterRanges(timeRanges,predicate){var results=[];var i=void 0;if(timeRanges&&timeRanges.length){for(i=0;i<timeRanges.length;i++){if(predicate(timeRanges.start(i),timeRanges.end(i))){results.push([timeRanges.start(i),timeRanges.end(i)])}}}return videojs$1.createTimeRanges(results)};var findRange=function findRange(buffered,time){return filterRanges(buffered,function(start,end){return start-TIME_FUDGE_FACTOR<=time&&end+TIME_FUDGE_FACTOR>=time})};var findNextRange=function findNextRange(timeRanges,time){return filterRanges(timeRanges,function(start){return start-TIME_FUDGE_FACTOR>=time})};var findGaps=function findGaps(buffered){if(buffered.length<2){return videojs$1.createTimeRanges()}var ranges=[];for(var i=1;i<buffered.length;i++){var start=buffered.end(i-1);var end=buffered.start(i);ranges.push([start,end])}return videojs$1.createTimeRanges(ranges)};var printableRange=function printableRange(range){var strArr=[];if(!range||!range.length){return""}for(var i=0;i<range.length;i++){strArr.push(range.start(i)+" => "+range.end(i))}return strArr.join(", ")};var timeUntilRebuffer=function timeUntilRebuffer(buffered,currentTime){var playbackRate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var bufferedEnd=buffered.length?buffered.end(buffered.length-1):0;return(bufferedEnd-currentTime)/playbackRate};var timeRangesToArray=function timeRangesToArray(timeRanges){var timeRangesList=[];for(var i=0;i<timeRanges.length;i++){timeRangesList.push({start:timeRanges.start(i),end:timeRanges.end(i)})}return timeRangesList};var createTextTracksIfNecessary=function createTextTracksIfNecessary(sourceBuffer,mediaSource,segment){var player=mediaSource.player_;if(segment.captions&&segment.captions.length){if(!sourceBuffer.inbandTextTracks_){sourceBuffer.inbandTextTracks_={}}for(var trackId in segment.captionStreams){if(!sourceBuffer.inbandTextTracks_[trackId]){player.tech_.trigger({type:"usage",name:"hls-608"});var track=player.textTracks().getTrackById(trackId);if(track){sourceBuffer.inbandTextTracks_[trackId]=track}else{sourceBuffer.inbandTextTracks_[trackId]=player.addRemoteTextTrack({kind:"captions",id:trackId,label:trackId},false).track}}}}if(segment.metadata&&segment.metadata.length&&!sourceBuffer.metadataTrack_){sourceBuffer.metadataTrack_=player.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;sourceBuffer.metadataTrack_.inBandMetadataTrackDispatchType=segment.metadata.dispatchType}};var removeCuesFromTrack=function removeCuesFromTrack(start,end,track){var i=void 0;var cue=void 0;if(!track){return}if(!track.cues){return}i=track.cues.length;while(i--){cue=track.cues[i];if(cue.startTime<=end&&cue.endTime>=start){track.removeCue(cue)}}};var deprecateOldCue=function deprecateOldCue(cue){Object.defineProperties(cue.frame,{id:{get:function get(){videojs$1.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return cue.value.key}},value:{get:function get(){videojs$1.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return cue.value.data}},privateData:{get:function get(){videojs$1.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return cue.value.data}}})};var durationOfVideo=function durationOfVideo(duration){var dur=void 0;if(isNaN(duration)||Math.abs(duration)===Infinity){dur=Number.MAX_VALUE}else{dur=duration}return dur};var addTextTrackData=function addTextTrackData(sourceHandler,captionArray,metadataArray){var Cue=window_1.WebKitDataCue||window_1.VTTCue;if(captionArray){captionArray.forEach(function(caption){var track=caption.stream;this.inbandTextTracks_[track].addCue(new Cue(caption.startTime+this.timestampOffset,caption.endTime+this.timestampOffset,caption.text))},sourceHandler)}if(metadataArray){var videoDuration=durationOfVideo(sourceHandler.mediaSource_.duration);metadataArray.forEach(function(metadata){var time=metadata.cueTime+this.timestampOffset;if(typeof time!=="number"||window_1.isNaN(time)||time<0||!(time<Infinity)){return}metadata.frames.forEach(function(frame){var cue=new Cue(time,time,frame.value||frame.url||frame.data||"");cue.frame=frame;cue.value=frame;deprecateOldCue(cue);this.metadataTrack_.addCue(cue)},this)},sourceHandler);if(sourceHandler.metadataTrack_&&sourceHandler.metadataTrack_.cues&&sourceHandler.metadataTrack_.cues.length){var cues=sourceHandler.metadataTrack_.cues;var cuesArray=[];for(var i=0;i<cues.length;i++){if(cues[i]){cuesArray.push(cues[i])}}var cuesGroupedByStartTime=cuesArray.reduce(function(obj,cue){var timeSlot=obj[cue.startTime]||[];timeSlot.push(cue);obj[cue.startTime]=timeSlot;return obj},{});var sortedStartTimes=Object.keys(cuesGroupedByStartTime).sort(function(a,b){return Number(a)-Number(b)});sortedStartTimes.forEach(function(startTime,idx){var cueGroup=cuesGroupedByStartTime[startTime];var nextTime=Number(sortedStartTimes[idx+1])||videoDuration;cueGroup.forEach(function(cue){cue.endTime=nextTime})})}}};var win$1=typeof window!=="undefined"?window:{},TARGET=typeof Symbol==="undefined"?"__target":Symbol(),SCRIPT_TYPE="application/javascript",BlobBuilder=win$1.BlobBuilder||win$1.WebKitBlobBuilder||win$1.MozBlobBuilder||win$1.MSBlobBuilder,URL=win$1.URL||win$1.webkitURL||URL&&URL.msURL,Worker$1=win$1.Worker;function shimWorker(filename,fn){return function ShimWorker(forceFallback){var o=this;if(!fn){return new Worker$1(filename)}else if(Worker$1&&!forceFallback){var source=fn.toString().replace(/^function.+?{/,"").slice(0,-1),objURL=createSourceObject(source);this[TARGET]=new Worker$1(objURL);wrapTerminate(this[TARGET],objURL);return this[TARGET]}else{var selfShim={postMessage:function postMessage(m){if(o.onmessage){setTimeout(function(){o.onmessage({data:m,target:selfShim})})}}};fn.call(selfShim);this.postMessage=function(m){setTimeout(function(){selfShim.onmessage({data:m,target:o})})};this.isThisThread=true}}}if(Worker$1){var testWorker,objURL=createSourceObject("self.onmessage = function () {}"),testArray=new Uint8Array(1);try{testWorker=new Worker$1(objURL);testWorker.postMessage(testArray,[testArray.buffer])}catch(e){Worker$1=null}finally{URL.revokeObjectURL(objURL);if(testWorker){testWorker.terminate()}}}function createSourceObject(str){try{return URL.createObjectURL(new Blob([str],{type:SCRIPT_TYPE}))}catch(e){var blob=new BlobBuilder;blob.append(str);return URL.createObjectURL(blob.getBlob(type))}}function wrapTerminate(worker,objURL){if(!worker||!objURL)return;var term=worker.terminate;worker.objURL=objURL;worker.terminate=function(){if(worker.objURL)URL.revokeObjectURL(worker.objURL);term.call(worker)}}var TransmuxWorker=new shimWorker("./transmuxer-worker.worker.js",function(window,document$$1){var self=this;var transmuxerWorker=function(){var UINT32_MAX=Math.pow(2,32)-1;var box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,traf,trex,trun,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;(function(){var i;types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(i in types){if(types.hasOwnProperty(i)){types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]}}MAJOR_BRAND=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);AVC1_BRAND=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);MINOR_VERSION=new Uint8Array([0,0,0,1]);VIDEO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);AUDIO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR};DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);SMHD=new Uint8Array([0,0,0,0,0,0,0,0]);STCO=new Uint8Array([0,0,0,0,0,0,0,0]);STSC=STCO;STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);STTS=STCO;VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();box=function box(type){var payload=[],size=0,i,result,view;for(i=1;i<arguments.length;i++){payload.push(arguments[i])}i=payload.length;while(i--){size+=payload[i].byteLength;
}result=new Uint8Array(size+8);view=new DataView(result.buffer,result.byteOffset,result.byteLength);view.setUint32(0,result.byteLength);result.set(type,4);for(i=0,size=8;i<payload.length;i++){result.set(payload[i],size);size+=payload[i].byteLength}return result};dinf=function dinf(){return box(types.dinf,box(types.dref,DREF))};esds=function esds(track){return box(types.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,track.audioobjecttype<<3|track.samplingfrequencyindex>>>1,track.samplingfrequencyindex<<7|track.channelcount<<3,6,1,2]))};ftyp=function ftyp(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND)};hdlr=function hdlr(type){return box(types.hdlr,HDLR_TYPES[type])};mdat=function mdat(data){return box(types.mdat,data)};mdhd=function mdhd(track){var result=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,track.duration>>>24&255,track.duration>>>16&255,track.duration>>>8&255,track.duration&255,85,196,0,0]);if(track.samplerate){result[12]=track.samplerate>>>24&255;result[13]=track.samplerate>>>16&255;result[14]=track.samplerate>>>8&255;result[15]=track.samplerate&255}return box(types.mdhd,result)};mdia=function mdia(track){return box(types.mdia,mdhd(track),hdlr(track.type),minf(track))};mfhd=function mfhd(sequenceNumber){return box(types.mfhd,new Uint8Array([0,0,0,0,(sequenceNumber&4278190080)>>24,(sequenceNumber&16711680)>>16,(sequenceNumber&65280)>>8,sequenceNumber&255]))};minf=function minf(track){return box(types.minf,track.type==="video"?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(track))};moof=function moof(sequenceNumber,tracks){var trackFragments=[],i=tracks.length;while(i--){trackFragments[i]=traf(tracks[i])}return box.apply(null,[types.moof,mfhd(sequenceNumber)].concat(trackFragments))};moov=function moov(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trak(tracks[i])}return box.apply(null,[types.moov,mvhd(4294967295)].concat(boxes).concat(mvex(tracks)))};mvex=function mvex(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trex(tracks[i])}return box.apply(null,[types.mvex].concat(boxes))};mvhd=function mvhd(duration){var bytes=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(duration&4278190080)>>24,(duration&16711680)>>16,(duration&65280)>>8,duration&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return box(types.mvhd,bytes)};sdtp=function sdtp(track){var samples=track.samples||[],bytes=new Uint8Array(4+samples.length),flags,i;for(i=0;i<samples.length;i++){flags=samples[i].flags;bytes[i+4]=flags.dependsOn<<4|flags.isDependedOn<<2|flags.hasRedundancy}return box(types.sdtp,bytes)};stbl=function stbl(track){return box(types.stbl,stsd(track),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO))};(function(){var videoSample,audioSample;stsd=function stsd(track){return box(types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),track.type==="video"?videoSample(track):audioSample(track))};videoSample=function videoSample(track){var sps=track.sps||[],pps=track.pps||[],sequenceParameterSets=[],pictureParameterSets=[],i;for(i=0;i<sps.length;i++){sequenceParameterSets.push((sps[i].byteLength&65280)>>>8);sequenceParameterSets.push(sps[i].byteLength&255);sequenceParameterSets=sequenceParameterSets.concat(Array.prototype.slice.call(sps[i]))}for(i=0;i<pps.length;i++){pictureParameterSets.push((pps[i].byteLength&65280)>>>8);pictureParameterSets.push(pps[i].byteLength&255);pictureParameterSets=pictureParameterSets.concat(Array.prototype.slice.call(pps[i]))}return box(types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(track.width&65280)>>8,track.width&255,(track.height&65280)>>8,track.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),box(types.avcC,new Uint8Array([1,track.profileIdc,track.profileCompatibility,track.levelIdc,255].concat([sps.length]).concat(sequenceParameterSets).concat([pps.length]).concat(pictureParameterSets))),box(types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};audioSample=function audioSample(track){return box(types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(track.channelcount&65280)>>8,track.channelcount&255,(track.samplesize&65280)>>8,track.samplesize&255,0,0,0,0,(track.samplerate&65280)>>8,track.samplerate&255,0,0]),esds(track))}})();tkhd=function tkhd(track){var result=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,0,(track.duration&4278190080)>>24,(track.duration&16711680)>>16,(track.duration&65280)>>8,track.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(track.width&65280)>>8,track.width&255,0,0,(track.height&65280)>>8,track.height&255,0,0]);return box(types.tkhd,result)};traf=function traf(track){var trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable,dataOffset,upperWordBaseMediaDecodeTime,lowerWordBaseMediaDecodeTime;trackFragmentHeader=box(types.tfhd,new Uint8Array([0,0,0,58,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));upperWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime/(UINT32_MAX+1));lowerWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime%(UINT32_MAX+1));trackFragmentDecodeTime=box(types.tfdt,new Uint8Array([1,0,0,0,upperWordBaseMediaDecodeTime>>>24&255,upperWordBaseMediaDecodeTime>>>16&255,upperWordBaseMediaDecodeTime>>>8&255,upperWordBaseMediaDecodeTime&255,lowerWordBaseMediaDecodeTime>>>24&255,lowerWordBaseMediaDecodeTime>>>16&255,lowerWordBaseMediaDecodeTime>>>8&255,lowerWordBaseMediaDecodeTime&255]));dataOffset=32+20+8+16+8+8;if(track.type==="audio"){trackFragmentRun=trun(track,dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun)}sampleDependencyTable=sdtp(track);trackFragmentRun=trun(track,sampleDependencyTable.length+dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable)};trak=function trak(track){track.duration=track.duration||4294967295;return box(types.trak,tkhd(track),mdia(track))};trex=function trex(track){var result=new Uint8Array([0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(track.type!=="video"){result[result.length-1]=0}return box(types.trex,result)};(function(){var audioTrun,videoTrun,trunHeader;trunHeader=function trunHeader(samples,offset){var durationPresent=0,sizePresent=0,flagsPresent=0,compositionTimeOffset=0;if(samples.length){if(samples[0].duration!==undefined){durationPresent=1}if(samples[0].size!==undefined){sizePresent=2}if(samples[0].flags!==undefined){flagsPresent=4}if(samples[0].compositionTimeOffset!==undefined){compositionTimeOffset=8}}return[0,0,durationPresent|sizePresent|flagsPresent|compositionTimeOffset,1,(samples.length&4278190080)>>>24,(samples.length&16711680)>>>16,(samples.length&65280)>>>8,samples.length&255,(offset&4278190080)>>>24,(offset&16711680)>>>16,(offset&65280)>>>8,offset&255]};videoTrun=function videoTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+16*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&4278190080)>>>24,(sample.duration&16711680)>>>16,(sample.duration&65280)>>>8,sample.duration&255,(sample.size&4278190080)>>>24,(sample.size&16711680)>>>16,(sample.size&65280)>>>8,sample.size&255,sample.flags.isLeading<<2|sample.flags.dependsOn,sample.flags.isDependedOn<<6|sample.flags.hasRedundancy<<4|sample.flags.paddingValue<<1|sample.flags.isNonSyncSample,sample.flags.degradationPriority&240<<8,sample.flags.degradationPriority&15,(sample.compositionTimeOffset&4278190080)>>>24,(sample.compositionTimeOffset&16711680)>>>16,(sample.compositionTimeOffset&65280)>>>8,sample.compositionTimeOffset&255])}return box(types.trun,new Uint8Array(bytes))};audioTrun=function audioTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+8*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&4278190080)>>>24,(sample.duration&16711680)>>>16,(sample.duration&65280)>>>8,sample.duration&255,(sample.size&4278190080)>>>24,(sample.size&16711680)>>>16,(sample.size&65280)>>>8,sample.size&255])}return box(types.trun,new Uint8Array(bytes))};trun=function trun(track,offset){if(track.type==="audio"){return audioTrun(track,offset)}return videoTrun(track,offset)}})();var mp4Generator={ftyp:ftyp,mdat:mdat,moof:moof,moov:moov,initSegment:function initSegment(tracks){var fileType=ftyp(),movie=moov(tracks),result;result=new Uint8Array(fileType.byteLength+movie.byteLength);result.set(fileType);result.set(movie,fileType.byteLength);return result}};var toUnsigned=function toUnsigned(value){return value>>>0};var bin={toUnsigned:toUnsigned};var toUnsigned$1=bin.toUnsigned;var _findBox,parseType,timescale,startTime,getVideoTrackIds;_findBox=function findBox(data,path){var results=[],i,size,type,end,subresults;if(!path.length){return null}for(i=0;i<data.byteLength;){size=toUnsigned$1(data[i]<<24|data[i+1]<<16|data[i+2]<<8|data[i+3]);type=parseType(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;if(type===path[0]){if(path.length===1){results.push(data.subarray(i+8,end))}else{subresults=_findBox(data.subarray(i+8,end),path.slice(1));if(subresults.length){results=results.concat(subresults)}}}i=end}return results};parseType=function parseType(buffer){var result="";result+=String.fromCharCode(buffer[0]);result+=String.fromCharCode(buffer[1]);result+=String.fromCharCode(buffer[2]);result+=String.fromCharCode(buffer[3]);return result};timescale=function timescale(init){var result={},traks=_findBox(init,["moov","trak"]);return traks.reduce(function(result,trak){var tkhd,version,index,id,mdhd;tkhd=_findBox(trak,["tkhd"])[0];if(!tkhd){return null}version=tkhd[0];index=version===0?12:20;id=toUnsigned$1(tkhd[index]<<24|tkhd[index+1]<<16|tkhd[index+2]<<8|tkhd[index+3]);mdhd=_findBox(trak,["mdia","mdhd"])[0];if(!mdhd){return null}version=mdhd[0];index=version===0?12:20;result[id]=toUnsigned$1(mdhd[index]<<24|mdhd[index+1]<<16|mdhd[index+2]<<8|mdhd[index+3]);return result},result)};startTime=function startTime(timescale,fragment){var trafs,baseTimes,result;trafs=_findBox(fragment,["moof","traf"]);baseTimes=[].concat.apply([],trafs.map(function(traf){return _findBox(traf,["tfhd"]).map(function(tfhd){var id,scale,baseTime;id=toUnsigned$1(tfhd[4]<<24|tfhd[5]<<16|tfhd[6]<<8|tfhd[7]);scale=timescale[id]||9e4;baseTime=_findBox(traf,["tfdt"]).map(function(tfdt){var version,result;version=tfdt[0];result=toUnsigned$1(tfdt[4]<<24|tfdt[5]<<16|tfdt[6]<<8|tfdt[7]);if(version===1){result*=Math.pow(2,32);result+=toUnsigned$1(tfdt[8]<<24|tfdt[9]<<16|tfdt[10]<<8|tfdt[11])}return result})[0];baseTime=baseTime||Infinity;return baseTime/scale})}));result=Math.min.apply(null,baseTimes);return isFinite(result)?result:0};getVideoTrackIds=function getVideoTrackIds(init){var traks=_findBox(init,["moov","trak"]);var videoTrackIds=[];traks.forEach(function(trak){var hdlrs=_findBox(trak,["mdia","hdlr"]);var tkhds=_findBox(trak,["tkhd"]);hdlrs.forEach(function(hdlr,index){var handlerType=parseType(hdlr.subarray(8,12));var tkhd=tkhds[index];var view;var version;var trackId;if(handlerType==="vide"){view=new DataView(tkhd.buffer,tkhd.byteOffset,tkhd.byteLength);version=view.getUint8(0);trackId=version===0?view.getUint32(12):view.getUint32(20);videoTrackIds.push(trackId)}})});return videoTrackIds};var probe$$1={findBox:_findBox,parseType:parseType,timescale:timescale,startTime:startTime,videoTrackIds:getVideoTrackIds};var Stream=function Stream(){this.init=function(){var listeners={};this.on=function(type,listener){if(!listeners[type]){listeners[type]=[]}listeners[type]=listeners[type].concat(listener)};this.off=function(type,listener){var index;if(!listeners[type]){return false}index=listeners[type].indexOf(listener);listeners[type]=listeners[type].slice();listeners[type].splice(index,1);return index>-1};this.trigger=function(type){var callbacks,i,length,args;callbacks=listeners[type];if(!callbacks){return}if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{args=[];i=arguments.length;for(i=1;i<arguments.length;++i){args.push(arguments[i])}length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args)}}};this.dispose=function(){listeners={}}}};Stream.prototype.pipe=function(destination){this.on("data",function(data){destination.push(data)});this.on("done",function(flushSource){destination.flush(flushSource)});return destination};Stream.prototype.push=function(data){this.trigger("data",data)};Stream.prototype.flush=function(flushSource){this.trigger("done",flushSource)};var stream=Stream;var groupNalsIntoFrames=function groupNalsIntoFrames(nalUnits){var i,currentNal,currentFrame=[],frames=[];currentFrame.byteLength=0;for(i=0;i<nalUnits.length;i++){currentNal=nalUnits[i];if(currentNal.nalUnitType==="access_unit_delimiter_rbsp"){if(currentFrame.length){currentFrame.duration=currentNal.dts-currentFrame.dts;frames.push(currentFrame)}currentFrame=[currentNal];currentFrame.byteLength=currentNal.data.byteLength;currentFrame.pts=currentNal.pts;currentFrame.dts=currentNal.dts}else{if(currentNal.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){currentFrame.keyFrame=true}currentFrame.duration=currentNal.dts-currentFrame.dts;currentFrame.byteLength+=currentNal.data.byteLength;currentFrame.push(currentNal)}}if(frames.length&&(!currentFrame.duration||currentFrame.duration<=0)){currentFrame.duration=frames[frames.length-1].duration}frames.push(currentFrame);return frames};var groupFramesIntoGops=function groupFramesIntoGops(frames){var i,currentFrame,currentGop=[],gops=[];currentGop.byteLength=0;currentGop.nalCount=0;currentGop.duration=0;currentGop.pts=frames[0].pts;currentGop.dts=frames[0].dts;gops.byteLength=0;gops.nalCount=0;gops.duration=0;gops.pts=frames[0].pts;gops.dts=frames[0].dts;for(i=0;i<frames.length;i++){currentFrame=frames[i];if(currentFrame.keyFrame){if(currentGop.length){gops.push(currentGop);gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration}currentGop=[currentFrame];currentGop.nalCount=currentFrame.length;currentGop.byteLength=currentFrame.byteLength;currentGop.pts=currentFrame.pts;currentGop.dts=currentFrame.dts;currentGop.duration=currentFrame.duration}else{currentGop.duration+=currentFrame.duration;currentGop.nalCount+=currentFrame.length;currentGop.byteLength+=currentFrame.byteLength;currentGop.push(currentFrame)}}if(gops.length&&currentGop.duration<=0){currentGop.duration=gops[gops.length-1].duration}gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;gops.push(currentGop);return gops};var extendFirstKeyFrame=function extendFirstKeyFrame(gops){var currentGop;if(!gops[0][0].keyFrame&&gops.length>1){currentGop=gops.shift();gops.byteLength-=currentGop.byteLength;gops.nalCount-=currentGop.nalCount;gops[0][0].dts=currentGop.dts;gops[0][0].pts=currentGop.pts;gops[0][0].duration+=currentGop.duration}return gops};var createDefaultSample=function createDefaultSample(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var sampleForFrame=function sampleForFrame(frame,dataOffset){var sample=createDefaultSample();sample.dataOffset=dataOffset;sample.compositionTimeOffset=frame.pts-frame.dts;sample.duration=frame.duration;sample.size=4*frame.length;sample.size+=frame.byteLength;if(frame.keyFrame){sample.flags.dependsOn=2;sample.flags.isNonSyncSample=0}return sample};var generateSampleTable=function generateSampleTable(gops,baseDataOffset){var h,i,sample,currentGop,currentFrame,dataOffset=baseDataOffset||0,samples=[];for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];sample=sampleForFrame(currentFrame,dataOffset);dataOffset+=sample.size;samples.push(sample)}}return samples};var concatenateNalData=function concatenateNalData(gops){var h,i,j,currentGop,currentFrame,currentNal,dataOffset=0,nalsByteLength=gops.byteLength,numberOfNals=gops.nalCount,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];for(j=0;j<currentFrame.length;j++){currentNal=currentFrame[j];view.setUint32(dataOffset,currentNal.data.byteLength);dataOffset+=4;data.set(currentNal.data,dataOffset);dataOffset+=currentNal.data.byteLength}}}return data};var frameUtils={groupNalsIntoFrames:groupNalsIntoFrames,groupFramesIntoGops:groupFramesIntoGops,extendFirstKeyFrame:extendFirstKeyFrame,generateSampleTable:generateSampleTable,concatenateNalData:concatenateNalData};var highPrefix=[33,16,5,32,164,27];var lowPrefix=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var zeroFill=function zeroFill(count){var a=[];while(count--){a.push(0)}return a};var makeTable=function makeTable(metaTable){return Object.keys(metaTable).reduce(function(obj,key){obj[key]=new Uint8Array(metaTable[key].reduce(function(arr,part){return arr.concat(part)},[]));return obj},{})};var coneOfSilence={96e3:[highPrefix,[227,64],zeroFill(154),[56]],88200:[highPrefix,[231],zeroFill(170),[56]],64e3:[highPrefix,[248,192],zeroFill(240),[56]],48e3:[highPrefix,[255,192],zeroFill(268),[55,148,128],zeroFill(54),[112]],44100:[highPrefix,[255,192],zeroFill(268),[55,163,128],zeroFill(84),[112]],32e3:[highPrefix,[255,192],zeroFill(268),[55,234],zeroFill(226),[112]],24e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,112],zeroFill(126),[224]],16e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,255],zeroFill(269),[223,108],zeroFill(195),[1,192]],12e3:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,253,128],zeroFill(259),[56]],11025:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,255,192],zeroFill(268),[55,175,128],zeroFill(108),[112]],8e3:[lowPrefix,zeroFill(268),[3,121,16],zeroFill(47),[7]]};var silence=makeTable(coneOfSilence);var ONE_SECOND_IN_TS=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs;secondsToVideoTs=function secondsToVideoTs(seconds){return seconds*ONE_SECOND_IN_TS};secondsToAudioTs=function secondsToAudioTs(seconds,sampleRate){return seconds*sampleRate};videoTsToSeconds=function videoTsToSeconds(timestamp){return timestamp/ONE_SECOND_IN_TS};audioTsToSeconds=function audioTsToSeconds(timestamp,sampleRate){return timestamp/sampleRate};audioTsToVideoTs=function audioTsToVideoTs(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate))};videoTsToAudioTs=function videoTsToAudioTs(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate)};var clock={secondsToVideoTs:secondsToVideoTs,secondsToAudioTs:secondsToAudioTs,videoTsToSeconds:videoTsToSeconds,audioTsToSeconds:audioTsToSeconds,audioTsToVideoTs:audioTsToVideoTs,videoTsToAudioTs:videoTsToAudioTs};var ONE_SECOND_IN_TS$1=9e4;var sumFrameByteLengths=function sumFrameByteLengths(array){var i,currentObj,sum=0;for(i=0;i<array.length;i++){currentObj=array[i];sum+=currentObj.data.byteLength}return sum};var prefixWithSilence=function prefixWithSilence(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime){var baseMediaDecodeTimeTs,frameDuration=0,audioGapDuration=0,audioFillFrameCount=0,audioFillDuration=0,silentFrame,i;if(!frames.length){return}baseMediaDecodeTimeTs=clock.audioTsToVideoTs(track.baseMediaDecodeTime,track.samplerate);frameDuration=Math.ceil(ONE_SECOND_IN_TS$1/(track.samplerate/1024));if(audioAppendStartTs&&videoBaseMediaDecodeTime){audioGapDuration=baseMediaDecodeTimeTs-Math.max(audioAppendStartTs,videoBaseMediaDecodeTime);audioFillFrameCount=Math.floor(audioGapDuration/frameDuration);audioFillDuration=audioFillFrameCount*frameDuration}if(audioFillFrameCount<1||audioFillDuration>ONE_SECOND_IN_TS$1/2){return}silentFrame=silence[track.samplerate];if(!silentFrame){silentFrame=frames[0].data}for(i=0;i<audioFillFrameCount;i++){frames.splice(i,0,{data:silentFrame})}track.baseMediaDecodeTime-=Math.floor(clock.videoTsToAudioTs(audioFillDuration,track.samplerate))};var trimAdtsFramesByEarliestDts=function trimAdtsFramesByEarliestDts(adtsFrames,track,earliestAllowedDts){if(track.minSegmentDts>=earliestAllowedDts){return adtsFrames}track.minSegmentDts=Infinity;return adtsFrames.filter(function(currentFrame){if(currentFrame.dts>=earliestAllowedDts){track.minSegmentDts=Math.min(track.minSegmentDts,currentFrame.dts);track.minSegmentPts=track.minSegmentDts;return true}return false})};var generateSampleTable$1=function generateSampleTable(frames){var i,currentFrame,samples=[];for(i=0;i<frames.length;i++){currentFrame=frames[i];samples.push({size:currentFrame.data.byteLength,duration:1024})}return samples};var concatenateFrameData=function concatenateFrameData(frames){var i,currentFrame,dataOffset=0,data=new Uint8Array(sumFrameByteLengths(frames));for(i=0;i<frames.length;i++){currentFrame=frames[i];data.set(currentFrame.data,dataOffset);dataOffset+=currentFrame.data.byteLength}return data};var audioFrameUtils={prefixWithSilence:prefixWithSilence,trimAdtsFramesByEarliestDts:trimAdtsFramesByEarliestDts,generateSampleTable:generateSampleTable$1,concatenateFrameData:concatenateFrameData};var ONE_SECOND_IN_TS$2=9e4;var collectDtsInfo=function collectDtsInfo(track,data){if(typeof data.pts==="number"){if(track.timelineStartInfo.pts===undefined){track.timelineStartInfo.pts=data.pts}if(track.minSegmentPts===undefined){track.minSegmentPts=data.pts}else{track.minSegmentPts=Math.min(track.minSegmentPts,data.pts)}if(track.maxSegmentPts===undefined){track.maxSegmentPts=data.pts}else{track.maxSegmentPts=Math.max(track.maxSegmentPts,data.pts)}}if(typeof data.dts==="number"){if(track.timelineStartInfo.dts===undefined){track.timelineStartInfo.dts=data.dts}if(track.minSegmentDts===undefined){track.minSegmentDts=data.dts}else{track.minSegmentDts=Math.min(track.minSegmentDts,data.dts)}if(track.maxSegmentDts===undefined){track.maxSegmentDts=data.dts}else{track.maxSegmentDts=Math.max(track.maxSegmentDts,data.dts)}}};var clearDtsInfo=function clearDtsInfo(track){delete track.minSegmentDts;delete track.maxSegmentDts;delete track.minSegmentPts;delete track.maxSegmentPts};var calculateTrackBaseMediaDecodeTime=function calculateTrackBaseMediaDecodeTime(track,keepOriginalTimestamps){var baseMediaDecodeTime,scale,minSegmentDts=track.minSegmentDts;if(!keepOriginalTimestamps){minSegmentDts-=track.timelineStartInfo.dts}baseMediaDecodeTime=track.timelineStartInfo.baseMediaDecodeTime;baseMediaDecodeTime+=minSegmentDts;baseMediaDecodeTime=Math.max(0,baseMediaDecodeTime);if(track.type==="audio"){scale=track.samplerate/ONE_SECOND_IN_TS$2;baseMediaDecodeTime*=scale;baseMediaDecodeTime=Math.floor(baseMediaDecodeTime)}return baseMediaDecodeTime};var trackDecodeInfo={clearDtsInfo:clearDtsInfo,calculateTrackBaseMediaDecodeTime:calculateTrackBaseMediaDecodeTime,collectDtsInfo:collectDtsInfo};var USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128;var parseSei=function parseSei(bytes){var i=0,result={payloadType:-1,payloadSize:0},payloadType=0,payloadSize=0;while(i<bytes.byteLength){if(bytes[i]===RBSP_TRAILING_BITS){break}while(bytes[i]===255){payloadType+=255;i++}payloadType+=bytes[i++];while(bytes[i]===255){payloadSize+=255;i++}payloadSize+=bytes[i++];if(!result.payload&&payloadType===USER_DATA_REGISTERED_ITU_T_T35){result.payloadType=payloadType;result.payloadSize=payloadSize;result.payload=bytes.subarray(i,i+payloadSize);break}i+=payloadSize;payloadType=0;payloadSize=0}return result};var parseUserData=function parseUserData(sei){if(sei.payload[0]!==181){return null}if((sei.payload[1]<<8|sei.payload[2])!==49){return null}if(String.fromCharCode(sei.payload[3],sei.payload[4],sei.payload[5],sei.payload[6])!=="GA94"){return null}if(sei.payload[7]!==3){return null}return sei.payload.subarray(8,sei.payload.length-1)};var parseCaptionPackets=function parseCaptionPackets(pts,userData){var results=[],i,count,offset,data;if(!(userData[0]&64)){return results}count=userData[0]&31;for(i=0;i<count;i++){offset=i*3;data={type:userData[offset+2]&3,pts:pts};if(userData[offset+2]&4){data.ccData=userData[offset+3]<<8|userData[offset+4];results.push(data)}}return results};var discardEmulationPreventionBytes=function discardEmulationPreventionBytes(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===3){emulationPreventionBytesPositions.push(i+2);i+=2}else{i++}}if(emulationPreventionBytesPositions.length===0){return data}newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift()}newData[i]=data[sourceIndex]}return newData};var captionPacketParser={parseSei:parseSei,parseUserData:parseUserData,parseCaptionPackets:parseCaptionPackets,discardEmulationPreventionBytes:discardEmulationPreventionBytes,USER_DATA_REGISTERED_ITU_T_T35:USER_DATA_REGISTERED_ITU_T_T35};var CaptionStream=function CaptionStream(){CaptionStream.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Cea608Stream(0,0),new Cea608Stream(0,1),new Cea608Stream(1,0),new Cea608Stream(1,1)];this.reset();this.ccStreams_.forEach(function(cc){cc.on("data",this.trigger.bind(this,"data"));cc.on("done",this.trigger.bind(this,"done"))},this)};CaptionStream.prototype=new stream;CaptionStream.prototype.push=function(event){var sei,userData,newCaptionPackets;if(event.nalUnitType!=="sei_rbsp"){return}sei=captionPacketParser.parseSei(event.escapedRBSP);if(sei.payloadType!==captionPacketParser.USER_DATA_REGISTERED_ITU_T_T35){return}userData=captionPacketParser.parseUserData(sei);if(!userData){return}if(event.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(event.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}newCaptionPackets=captionPacketParser.parseCaptionPackets(event.pts,userData);this.captionPackets_=this.captionPackets_.concat(newCaptionPackets);if(this.latestDts_!==event.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=event.dts};CaptionStream.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(cc){cc.flush()},this);return}this.captionPackets_.forEach(function(elem,idx){elem.presortIndex=idx});this.captionPackets_.sort(function(a,b){if(a.pts===b.pts){return a.presortIndex-b.presortIndex}return a.pts-b.pts});this.captionPackets_.forEach(function(packet){if(packet.type<2){this.dispatchCea608Packet(packet)}},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(cc){cc.flush()},this);return};CaptionStream.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(ccStream){ccStream.reset()})};CaptionStream.prototype.dispatchCea608Packet=function(packet){if(this.setsChannel1Active(packet)){this.activeCea608Channel_[packet.type]=0}else if(this.setsChannel2Active(packet)){this.activeCea608Channel_[packet.type]=1}if(this.activeCea608Channel_[packet.type]===null){return}this.ccStreams_[(packet.type<<1)+this.activeCea608Channel_[packet.type]].push(packet)};CaptionStream.prototype.setsChannel1Active=function(packet){return(packet.ccData&30720)===4096};CaptionStream.prototype.setsChannel2Active=function(packet){return(packet.ccData&30720)===6144};var CHARACTER_TRANSLATION={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var getCharFromCode=function getCharFromCode(code){if(code===null){return""}code=CHARACTER_TRANSLATION[code]||code;return String.fromCharCode(code)};var BOTTOM_ROW=14;var ROWS=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var createDisplayBuffer=function createDisplayBuffer(){var result=[],i=BOTTOM_ROW+1;while(i--){result.push("")}return result};var Cea608Stream=function Cea608Stream(field,dataChannel){Cea608Stream.prototype.init.call(this);this.field_=field||0;this.dataChannel_=dataChannel||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(packet){var data,swap,char0,char1,text;data=packet.ccData&32639;if(data===this.lastControlCode_){this.lastControlCode_=null;return}if((data&61440)===4096){this.lastControlCode_=data}else if(data!==this.PADDING_){this.lastControlCode_=null}char0=data>>>8;char1=data&255;if(data===this.PADDING_){return}else if(data===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(data===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);swap=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=swap;this.startPts_=packet.pts}else if(data===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(packet.pts)}else if(data===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(packet.pts)}else if(data===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(packet.pts)}else if(data===this.CARRIAGE_RETURN_){this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);this.shiftRowsUp_();this.startPts_=packet.pts}else if(data===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(data===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer()}else if(data===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=createDisplayBuffer()}else if(data===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer()}this.mode_="paintOn";this.startPts_=packet.pts}else if(this.isSpecialCharacter(char0,char1)){char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++}else if(this.isExtCharacter(char0,char1)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++}else if(this.isMidRowCode(char0,char1)){this.clearFormatting(packet.pts);this[this.mode_](packet.pts," ");this.column_++;if((char1&14)===14){this.addFormatting(packet.pts,["i"])}if((char1&1)===1){this.addFormatting(packet.pts,["u"]);
}}else if(this.isOffsetControlCode(char0,char1)){this.column_+=char1&3}else if(this.isPAC(char0,char1)){var row=ROWS.indexOf(data&7968);if(this.mode_==="rollUp"){if(row-this.rollUpRows_+1<0){row=this.rollUpRows_-1}this.setRollUp(packet.pts,row)}if(row!==this.row_){this.clearFormatting(packet.pts);this.row_=row}if(char1&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(packet.pts,["u"])}if((data&16)===16){this.column_=((data&14)>>1)*4}if(this.isColorPAC(char1)){if((char1&14)===14){this.addFormatting(packet.pts,["i"])}}}else if(this.isNormalChar(char0)){if(char1===0){char1=null}text=getCharFromCode(char0);text+=getCharFromCode(char1);this[this.mode_](packet.pts,text);this.column_+=text.length}}};Cea608Stream.prototype=new stream;Cea608Stream.prototype.flushDisplayed=function(pts){var content=this.displayed_.map(function(row){try{return row.trim()}catch(e){console.error("Skipping malformed caption.");return""}}).join("\n").replace(/^\n+|\n+$/g,"");if(content.length){this.trigger("data",{startPts:this.startPts_,endPts:pts,text:content,stream:this.name_})}};Cea608Stream.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=createDisplayBuffer();this.nonDisplayed_=createDisplayBuffer();this.lastControlCode_=null;this.column_=0;this.row_=BOTTOM_ROW;this.rollUpRows_=2;this.formatting_=[]};Cea608Stream.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Cea608Stream.prototype.isSpecialCharacter=function(char0,char1){return char0===this.EXT_&&char1>=48&&char1<=63};Cea608Stream.prototype.isExtCharacter=function(char0,char1){return(char0===this.EXT_+1||char0===this.EXT_+2)&&char1>=32&&char1<=63};Cea608Stream.prototype.isMidRowCode=function(char0,char1){return char0===this.EXT_&&char1>=32&&char1<=47};Cea608Stream.prototype.isOffsetControlCode=function(char0,char1){return char0===this.OFFSET_&&char1>=33&&char1<=35};Cea608Stream.prototype.isPAC=function(char0,char1){return char0>=this.BASE_&&char0<this.BASE_+8&&char1>=64&&char1<=127};Cea608Stream.prototype.isColorPAC=function(char1){return char1>=64&&char1<=79||char1>=96&&char1<=127};Cea608Stream.prototype.isNormalChar=function(char){return char>=32&&char<=127};Cea608Stream.prototype.setRollUp=function(pts,newBaseRow){if(this.mode_!=="rollUp"){this.row_=BOTTOM_ROW;this.mode_="rollUp";this.flushDisplayed(pts);this.nonDisplayed_=createDisplayBuffer();this.displayed_=createDisplayBuffer()}if(newBaseRow!==undefined&&newBaseRow!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[newBaseRow-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(newBaseRow===undefined){newBaseRow=this.row_}this.topRow_=newBaseRow-this.rollUpRows_+1};Cea608Stream.prototype.addFormatting=function(pts,format){this.formatting_=this.formatting_.concat(format);var text=format.reduce(function(text,format){return text+"<"+format+">"},"");this[this.mode_](pts,text)};Cea608Stream.prototype.clearFormatting=function(pts){if(!this.formatting_.length){return}var text=this.formatting_.reverse().reduce(function(text,format){return text+"</"+format+">"},"");this.formatting_=[];this[this.mode_](pts,text)};Cea608Stream.prototype.popOn=function(pts,text){var baseRow=this.nonDisplayed_[this.row_];baseRow+=text;this.nonDisplayed_[this.row_]=baseRow};Cea608Stream.prototype.rollUp=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow};Cea608Stream.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++){this.displayed_[i]=""}for(i=this.row_+1;i<BOTTOM_ROW+1;i++){this.displayed_[i]=""}for(i=this.topRow_;i<this.row_;i++){this.displayed_[i]=this.displayed_[i+1]}this.displayed_[this.row_]=""};Cea608Stream.prototype.paintOn=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow};var captionStream={CaptionStream:CaptionStream,Cea608Stream:Cea608Stream};var streamTypes={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var MAX_TS=8589934592;var RO_THRESH=4294967296;var handleRollover=function handleRollover(value,reference){var direction=1;if(value>reference){direction=-1}while(Math.abs(reference-value)>RO_THRESH){value+=direction*MAX_TS}return value};var TimestampRolloverStream=function TimestampRolloverStream(type){var lastDTS,referenceDTS;TimestampRolloverStream.prototype.init.call(this);this.type_=type;this.push=function(data){if(data.type!==this.type_){return}if(referenceDTS===undefined){referenceDTS=data.dts}data.dts=handleRollover(data.dts,referenceDTS);data.pts=handleRollover(data.pts,referenceDTS);lastDTS=data.dts;this.trigger("data",data)};this.flush=function(){referenceDTS=lastDTS;this.trigger("done")};this.discontinuity=function(){referenceDTS=void 0;lastDTS=void 0}};TimestampRolloverStream.prototype=new stream;var timestampRolloverStream={TimestampRolloverStream:TimestampRolloverStream,handleRollover:handleRollover};var percentEncode=function percentEncode(bytes,start,end){var i,result="";for(i=start;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2)}return result},parseUtf8=function parseUtf8(bytes,start,end){return decodeURIComponent(percentEncode(bytes,start,end))},parseIso88591=function parseIso88591(bytes,start,end){return unescape(percentEncode(bytes,start,end))},parseSyncSafeInteger=function parseSyncSafeInteger(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3]},tagParsers={TXXX:function TXXX(tag){var i;if(tag.data[0]!==3){return}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.value=parseUtf8(tag.data,i+1,tag.data.length).replace(/\0*$/,"");break}}tag.data=tag.value},WXXX:function WXXX(tag){var i;if(tag.data[0]!==3){return}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.url=parseUtf8(tag.data,i+1,tag.data.length);break}}},PRIV:function PRIV(tag){var i;for(i=0;i<tag.data.length;i++){if(tag.data[i]===0){tag.owner=parseIso88591(tag.data,0,i);break}}tag.privateData=tag.data.subarray(i+1);tag.data=tag.privateData}},_MetadataStream;_MetadataStream=function MetadataStream(options){var settings={debug:!!(options&&options.debug),descriptor:options&&options.descriptor},tagSize=0,buffer=[],bufferSize=0,i;_MetadataStream.prototype.init.call(this);this.dispatchType=streamTypes.METADATA_STREAM_TYPE.toString(16);if(settings.descriptor){for(i=0;i<settings.descriptor.length;i++){this.dispatchType+=("00"+settings.descriptor[i].toString(16)).slice(-2)}}this.push=function(chunk){var tag,frameStart,frameSize,frame,i,frameHeader;if(chunk.type!=="timed-metadata"){return}if(chunk.dataAlignmentIndicator){bufferSize=0;buffer.length=0}if(buffer.length===0&&(chunk.data.length<10||chunk.data[0]!=="I".charCodeAt(0)||chunk.data[1]!=="D".charCodeAt(0)||chunk.data[2]!=="3".charCodeAt(0))){if(settings.debug){console.log("Skipping unrecognized metadata packet")}return}buffer.push(chunk);bufferSize+=chunk.data.byteLength;if(buffer.length===1){tagSize=parseSyncSafeInteger(chunk.data.subarray(6,10));tagSize+=10}if(bufferSize<tagSize){return}tag={data:new Uint8Array(tagSize),frames:[],pts:buffer[0].pts,dts:buffer[0].dts};for(i=0;i<tagSize;){tag.data.set(buffer[0].data.subarray(0,tagSize-i),i);i+=buffer[0].data.byteLength;bufferSize-=buffer[0].data.byteLength;buffer.shift()}frameStart=10;if(tag.data[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger(tag.data.subarray(10,14));tagSize-=parseSyncSafeInteger(tag.data.subarray(16,20))}do{frameSize=parseSyncSafeInteger(tag.data.subarray(frameStart+4,frameStart+8));if(frameSize<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}frameHeader=String.fromCharCode(tag.data[frameStart],tag.data[frameStart+1],tag.data[frameStart+2],tag.data[frameStart+3]);frame={id:frameHeader,data:tag.data.subarray(frameStart+10,frameStart+frameSize+10)};frame.key=frame.id;if(tagParsers[frame.id]){tagParsers[frame.id](frame);if(frame.owner==="com.apple.streaming.transportStreamTimestamp"){var d=frame.data,size=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&3;frame.timeStamp=size;if(tag.pts===undefined&&tag.dts===undefined){tag.pts=frame.timeStamp;tag.dts=frame.timeStamp}this.trigger("timestamp",frame)}}tag.frames.push(frame);frameStart+=10;frameStart+=frameSize}while(frameStart<tagSize);this.trigger("data",tag)}};_MetadataStream.prototype=new stream;var metadataStream=_MetadataStream;var TimestampRolloverStream$1=timestampRolloverStream.TimestampRolloverStream;var _TransportPacketStream,_TransportParseStream,_ElementaryStream;var MP2T_PACKET_LENGTH=188,SYNC_BYTE=71;_TransportPacketStream=function TransportPacketStream(){var buffer=new Uint8Array(MP2T_PACKET_LENGTH),bytesInBuffer=0;_TransportPacketStream.prototype.init.call(this);this.push=function(bytes){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,everything;if(bytesInBuffer){everything=new Uint8Array(bytes.byteLength+bytesInBuffer);everything.set(buffer.subarray(0,bytesInBuffer));everything.set(bytes,bytesInBuffer);bytesInBuffer=0}else{everything=bytes}while(endIndex<everything.byteLength){if(everything[startIndex]===SYNC_BYTE&&everything[endIndex]===SYNC_BYTE){this.trigger("data",everything.subarray(startIndex,endIndex));startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue}startIndex++;endIndex++}if(startIndex<everything.byteLength){buffer.set(everything.subarray(startIndex),0);bytesInBuffer=everything.byteLength-startIndex}};this.flush=function(){if(bytesInBuffer===MP2T_PACKET_LENGTH&&buffer[0]===SYNC_BYTE){this.trigger("data",buffer);bytesInBuffer=0}this.trigger("done")}};_TransportPacketStream.prototype=new stream;_TransportParseStream=function TransportParseStream(){var parsePsi,parsePat,parsePmt,self;_TransportParseStream.prototype.init.call(this);self=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;parsePsi=function parsePsi(payload,psi){var offset=0;if(psi.payloadUnitStartIndicator){offset+=payload[offset]+1}if(psi.type==="pat"){parsePat(payload.subarray(offset),psi)}else{parsePmt(payload.subarray(offset),psi)}};parsePat=function parsePat(payload,pat){pat.section_number=payload[7];pat.last_section_number=payload[8];self.pmtPid=(payload[10]&31)<<8|payload[11];pat.pmtPid=self.pmtPid};parsePmt=function parsePmt(payload,pmt){var sectionLength,tableEnd,programInfoLength,offset;if(!(payload[5]&1)){return}self.programMapTable={video:null,audio:null,"timed-metadata":{}};sectionLength=(payload[1]&15)<<8|payload[2];tableEnd=3+sectionLength-4;programInfoLength=(payload[10]&15)<<8|payload[11];offset=12+programInfoLength;while(offset<tableEnd){var streamType=payload[offset];var pid=(payload[offset+1]&31)<<8|payload[offset+2];if(streamType===streamTypes.H264_STREAM_TYPE&&self.programMapTable.video===null){self.programMapTable.video=pid}else if(streamType===streamTypes.ADTS_STREAM_TYPE&&self.programMapTable.audio===null){self.programMapTable.audio=pid}else if(streamType===streamTypes.METADATA_STREAM_TYPE){self.programMapTable["timed-metadata"][pid]=streamType}offset+=((payload[offset+3]&15)<<8|payload[offset+4])+5}pmt.programMapTable=self.programMapTable};this.push=function(packet){var result={},offset=4;result.payloadUnitStartIndicator=!!(packet[1]&64);result.pid=packet[1]&31;result.pid<<=8;result.pid|=packet[2];if((packet[3]&48)>>>4>1){offset+=packet[offset]+1}if(result.pid===0){result.type="pat";parsePsi(packet.subarray(offset),result);this.trigger("data",result)}else if(result.pid===this.pmtPid){result.type="pmt";parsePsi(packet.subarray(offset),result);this.trigger("data",result);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([packet,offset,result])}else{this.processPes_(packet,offset,result)}};this.processPes_=function(packet,offset,result){if(result.pid===this.programMapTable.video){result.streamType=streamTypes.H264_STREAM_TYPE}else if(result.pid===this.programMapTable.audio){result.streamType=streamTypes.ADTS_STREAM_TYPE}else{result.streamType=this.programMapTable["timed-metadata"][result.pid]}result.type="pes";result.data=packet.subarray(offset);this.trigger("data",result)}};_TransportParseStream.prototype=new stream;_TransportParseStream.STREAM_TYPES={h264:27,adts:15};_ElementaryStream=function ElementaryStream(){var self=this,video={data:[],size:0},audio={data:[],size:0},timedMetadata={data:[],size:0},parsePes=function parsePes(payload,pes){var ptsDtsFlags;pes.packetLength=6+(payload[4]<<8|payload[5]);pes.dataAlignmentIndicator=(payload[6]&4)!==0;ptsDtsFlags=payload[7];if(ptsDtsFlags&192){pes.pts=(payload[9]&14)<<27|(payload[10]&255)<<20|(payload[11]&254)<<12|(payload[12]&255)<<5|(payload[13]&254)>>>3;pes.pts*=4;pes.pts+=(payload[13]&6)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&64){pes.dts=(payload[14]&14)<<27|(payload[15]&255)<<20|(payload[16]&254)<<12|(payload[17]&255)<<5|(payload[18]&254)>>>3;pes.dts*=4;pes.dts+=(payload[18]&6)>>>1}}pes.data=payload.subarray(9+payload[8])},flushStream=function flushStream(stream$$1,type,forceFlush){var packetData=new Uint8Array(stream$$1.size),event={type:type},i=0,offset=0,packetFlushable=false,fragment;if(!stream$$1.data.length||stream$$1.size<9){return}event.trackId=stream$$1.data[0].pid;for(i=0;i<stream$$1.data.length;i++){fragment=stream$$1.data[i];packetData.set(fragment.data,offset);offset+=fragment.data.byteLength}parsePes(packetData,event);packetFlushable=type==="video"||event.packetLength<=stream$$1.size;if(forceFlush||packetFlushable){stream$$1.size=0;stream$$1.data.length=0}if(packetFlushable){self.trigger("data",event)}};_ElementaryStream.prototype.init.call(this);this.push=function(data){({pat:function pat(){},pes:function pes(){var stream$$1,streamType;switch(data.streamType){case streamTypes.H264_STREAM_TYPE:case streamTypes.H264_STREAM_TYPE:stream$$1=video;streamType="video";break;case streamTypes.ADTS_STREAM_TYPE:stream$$1=audio;streamType="audio";break;case streamTypes.METADATA_STREAM_TYPE:stream$$1=timedMetadata;streamType="timed-metadata";break;default:return}if(data.payloadUnitStartIndicator){flushStream(stream$$1,streamType,true)}stream$$1.data.push(data);stream$$1.size+=data.data.byteLength},pmt:function pmt(){var event={type:"metadata",tracks:[]},programMapTable=data.programMapTable;if(programMapTable.video!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.video,codec:"avc",type:"video"})}if(programMapTable.audio!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.audio,codec:"adts",type:"audio"})}self.trigger("data",event)}})[data.type]()};this.flush=function(){flushStream(video,"video");flushStream(audio,"audio");flushStream(timedMetadata,"timed-metadata");this.trigger("done")}};_ElementaryStream.prototype=new stream;var m2ts={PAT_PID:0,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH,TransportPacketStream:_TransportPacketStream,TransportParseStream:_TransportParseStream,ElementaryStream:_ElementaryStream,TimestampRolloverStream:TimestampRolloverStream$1,CaptionStream:captionStream.CaptionStream,Cea608Stream:captionStream.Cea608Stream,MetadataStream:metadataStream};for(var type in streamTypes){if(streamTypes.hasOwnProperty(type)){m2ts[type]=streamTypes[type]}}var m2ts_1=m2ts;var _AdtsStream;var ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_AdtsStream=function AdtsStream(){var buffer;_AdtsStream.prototype.init.call(this);this.push=function(packet){var i=0,frameNum=0,frameLength,protectionSkipBytes,frameEnd,oldBuffer,sampleCount,adtsFrameDuration;if(packet.type!=="audio"){return}if(buffer){oldBuffer=buffer;buffer=new Uint8Array(oldBuffer.byteLength+packet.data.byteLength);buffer.set(oldBuffer);buffer.set(packet.data,oldBuffer.byteLength)}else{buffer=packet.data}while(i+5<buffer.length){if(buffer[i]!==255||(buffer[i+1]&246)!==240){i++;continue}protectionSkipBytes=(~buffer[i+1]&1)*2;frameLength=(buffer[i+3]&3)<<11|buffer[i+4]<<3|(buffer[i+5]&224)>>5;sampleCount=((buffer[i+6]&3)+1)*1024;adtsFrameDuration=sampleCount*9e4/ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&60)>>>2];frameEnd=i+frameLength;if(buffer.byteLength<frameEnd){return}this.trigger("data",{pts:packet.pts+frameNum*adtsFrameDuration,dts:packet.dts+frameNum*adtsFrameDuration,sampleCount:sampleCount,audioobjecttype:(buffer[i+2]>>>6&3)+1,channelcount:(buffer[i+2]&1)<<2|(buffer[i+3]&192)>>>6,samplerate:ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&60)>>>2],samplingfrequencyindex:(buffer[i+2]&60)>>>2,samplesize:16,data:buffer.subarray(i+7+protectionSkipBytes,frameEnd)});if(buffer.byteLength===frameEnd){buffer=undefined;return}frameNum++;buffer=buffer.subarray(frameEnd)}};this.flush=function(){this.trigger("done")}};_AdtsStream.prototype=new stream;var adts=_AdtsStream;var ExpGolomb;ExpGolomb=function ExpGolomb(workingData){var workingBytesAvailable=workingData.byteLength,workingWord=0,workingBitsAvailable=0;this.length=function(){return 8*workingBytesAvailable};this.bitsAvailable=function(){return 8*workingBytesAvailable+workingBitsAvailable};this.loadWord=function(){var position=workingData.byteLength-workingBytesAvailable,workingBytes=new Uint8Array(4),availableBytes=Math.min(4,workingBytesAvailable);if(availableBytes===0){throw new Error("no bytes available")}workingBytes.set(workingData.subarray(position,position+availableBytes));workingWord=new DataView(workingBytes.buffer).getUint32(0);workingBitsAvailable=availableBytes*8;workingBytesAvailable-=availableBytes};this.skipBits=function(count){var skipBytes;if(workingBitsAvailable>count){workingWord<<=count;workingBitsAvailable-=count}else{count-=workingBitsAvailable;skipBytes=Math.floor(count/8);count-=skipBytes*8;workingBytesAvailable-=skipBytes;this.loadWord();workingWord<<=count;workingBitsAvailable-=count}};this.readBits=function(size){var bits=Math.min(workingBitsAvailable,size),valu=workingWord>>>32-bits;workingBitsAvailable-=bits;if(workingBitsAvailable>0){workingWord<<=bits}else if(workingBytesAvailable>0){this.loadWord()}bits=size-bits;if(bits>0){return valu<<bits|this.readBits(bits)}return valu};this.skipLeadingZeros=function(){var leadingZeroCount;for(leadingZeroCount=0;leadingZeroCount<workingBitsAvailable;++leadingZeroCount){if((workingWord&2147483648>>>leadingZeroCount)!==0){workingWord<<=leadingZeroCount;workingBitsAvailable-=leadingZeroCount;return leadingZeroCount}}this.loadWord();return leadingZeroCount+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var clz=this.skipLeadingZeros();return this.readBits(clz+1)-1};this.readExpGolomb=function(){var valu=this.readUnsignedExpGolomb();if(1&valu){return 1+valu>>>1}return-1*(valu>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var expGolomb=ExpGolomb;var _H264Stream,_NalByteStream;var PROFILES_WITH_OPTIONAL_SPS_DATA;_NalByteStream=function NalByteStream(){var syncPoint=0,i,buffer;_NalByteStream.prototype.init.call(this);this.push=function(data){var swapBuffer;if(!buffer){buffer=data.data}else{swapBuffer=new Uint8Array(buffer.byteLength+data.data.byteLength);swapBuffer.set(buffer);swapBuffer.set(data.data,buffer.byteLength);buffer=swapBuffer}for(;syncPoint<buffer.byteLength-3;syncPoint++){if(buffer[syncPoint+2]===1){i=syncPoint+5;break}}while(i<buffer.byteLength){switch(buffer[i]){case 0:if(buffer[i-1]!==0){i+=2;break}else if(buffer[i-2]!==0){i++;break}if(syncPoint+3!==i-2){this.trigger("data",buffer.subarray(syncPoint+3,i-2))}do{i++}while(buffer[i]!==1&&i<buffer.length);syncPoint=i-2;i+=3;break;case 1:if(buffer[i-1]!==0||buffer[i-2]!==0){i+=3;break}this.trigger("data",buffer.subarray(syncPoint+3,i-2));syncPoint=i-2;i+=3;break;default:i+=3;break}}buffer=buffer.subarray(syncPoint);i-=syncPoint;syncPoint=0};this.flush=function(){if(buffer&&buffer.byteLength>3){this.trigger("data",buffer.subarray(syncPoint+3))}buffer=null;syncPoint=0;this.trigger("done")}};_NalByteStream.prototype=new stream;PROFILES_WITH_OPTIONAL_SPS_DATA={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};_H264Stream=function H264Stream(){var nalByteStream=new _NalByteStream,self,trackId,currentPts,currentDts,discardEmulationPreventionBytes,readSequenceParameterSet,skipScalingList;_H264Stream.prototype.init.call(this);self=this;this.push=function(packet){if(packet.type!=="video"){return}trackId=packet.trackId;currentPts=packet.pts;currentDts=packet.dts;nalByteStream.push(packet)};nalByteStream.on("data",function(data){var event={trackId:trackId,pts:currentPts,dts:currentDts,data:data};switch(data[0]&31){case 5:event.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:event.nalUnitType="sei_rbsp";event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));break;case 7:event.nalUnitType="seq_parameter_set_rbsp";event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));event.config=readSequenceParameterSet(event.escapedRBSP);break;case 8:event.nalUnitType="pic_parameter_set_rbsp";break;case 9:event.nalUnitType="access_unit_delimiter_rbsp";break;default:break}self.trigger("data",event)});nalByteStream.on("done",function(){self.trigger("done")});this.flush=function(){nalByteStream.flush()};skipScalingList=function skipScalingList(count,expGolombDecoder){var lastScale=8,nextScale=8,j,deltaScale;for(j=0;j<count;j++){if(nextScale!==0){deltaScale=expGolombDecoder.readExpGolomb();nextScale=(lastScale+deltaScale+256)%256}lastScale=nextScale===0?lastScale:nextScale}};discardEmulationPreventionBytes=function discardEmulationPreventionBytes(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===3){emulationPreventionBytesPositions.push(i+2);i+=2}else{i++}}if(emulationPreventionBytesPositions.length===0){return data}newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift()}newData[i]=data[sourceIndex]}return newData};readSequenceParameterSet=function readSequenceParameterSet(data){var frameCropLeftOffset=0,frameCropRightOffset=0,frameCropTopOffset=0,frameCropBottomOffset=0,sarScale=1,expGolombDecoder,profileIdc,levelIdc,profileCompatibility,chromaFormatIdc,picOrderCntType,numRefFramesInPicOrderCntCycle,picWidthInMbsMinus1,picHeightInMapUnitsMinus1,frameMbsOnlyFlag,scalingListCount,sarRatio,aspectRatioIdc,i;expGolombDecoder=new expGolomb(data);profileIdc=expGolombDecoder.readUnsignedByte();profileCompatibility=expGolombDecoder.readUnsignedByte();levelIdc=expGolombDecoder.readUnsignedByte();expGolombDecoder.skipUnsignedExpGolomb();if(PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]){chromaFormatIdc=expGolombDecoder.readUnsignedExpGolomb();if(chromaFormatIdc===3){expGolombDecoder.skipBits(1)}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){scalingListCount=chromaFormatIdc!==3?8:12;for(i=0;i<scalingListCount;i++){if(expGolombDecoder.readBoolean()){if(i<6){skipScalingList(16,expGolombDecoder)}else{skipScalingList(64,expGolombDecoder)}}}}}expGolombDecoder.skipUnsignedExpGolomb();picOrderCntType=expGolombDecoder.readUnsignedExpGolomb();if(picOrderCntType===0){expGolombDecoder.readUnsignedExpGolomb()}else if(picOrderCntType===1){expGolombDecoder.skipBits(1);expGolombDecoder.skipExpGolomb();expGolombDecoder.skipExpGolomb();numRefFramesInPicOrderCntCycle=expGolombDecoder.readUnsignedExpGolomb();for(i=0;i<numRefFramesInPicOrderCntCycle;i++){expGolombDecoder.skipExpGolomb()}}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);picWidthInMbsMinus1=expGolombDecoder.readUnsignedExpGolomb();picHeightInMapUnitsMinus1=expGolombDecoder.readUnsignedExpGolomb();frameMbsOnlyFlag=expGolombDecoder.readBits(1);if(frameMbsOnlyFlag===0){expGolombDecoder.skipBits(1)}expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){frameCropLeftOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropRightOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropTopOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropBottomOffset=expGolombDecoder.readUnsignedExpGolomb()}if(expGolombDecoder.readBoolean()){if(expGolombDecoder.readBoolean()){aspectRatioIdc=expGolombDecoder.readUnsignedByte();switch(aspectRatioIdc){case 1:sarRatio=[1,1];break;case 2:sarRatio=[12,11];break;case 3:sarRatio=[10,11];break;case 4:sarRatio=[16,11];break;case 5:sarRatio=[40,33];break;case 6:sarRatio=[24,11];break;case 7:sarRatio=[20,11];break;case 8:sarRatio=[32,11];break;case 9:sarRatio=[80,33];break;case 10:sarRatio=[18,11];break;case 11:sarRatio=[15,11];break;case 12:sarRatio=[64,33];break;case 13:sarRatio=[160,99];break;case 14:sarRatio=[4,3];break;case 15:sarRatio=[3,2];break;case 16:sarRatio=[2,1];break;case 255:{sarRatio=[expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte(),expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte()];break}}if(sarRatio){sarScale=sarRatio[0]/sarRatio[1]}}}return{profileIdc:profileIdc,levelIdc:levelIdc,profileCompatibility:profileCompatibility,width:Math.ceil(((picWidthInMbsMinus1+1)*16-frameCropLeftOffset*2-frameCropRightOffset*2)*sarScale),height:(2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16-frameCropTopOffset*2-frameCropBottomOffset*2}}};_H264Stream.prototype=new stream;var h264={H264Stream:_H264Stream,NalByteStream:_NalByteStream};var ADTS_SAMPLING_FREQUENCIES$1=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var isLikelyAacData=function isLikelyAacData(data){if(data[0]==="I".charCodeAt(0)&&data[1]==="D".charCodeAt(0)&&data[2]==="3".charCodeAt(0)){return true}return false};var parseSyncSafeInteger$1=function parseSyncSafeInteger(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3]};var percentEncode$1=function percentEncode(bytes,start,end){var i,result="";for(i=start;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2)}return result};var parseIso88591$1=function parseIso88591(bytes,start,end){return unescape(percentEncode$1(bytes,start,end))};var parseId3TagSize=function parseId3TagSize(header,byteIndex){var returnSize=header[byteIndex+6]<<21|header[byteIndex+7]<<14|header[byteIndex+8]<<7|header[byteIndex+9],flags=header[byteIndex+5],footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20}return returnSize+10};var parseAdtsSize=function parseAdtsSize(header,byteIndex){var lowThree=(header[byteIndex+5]&224)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&3<<11;return highTwo|middle|lowThree};var parseType$1=function parseType(header,byteIndex){if(header[byteIndex]==="I".charCodeAt(0)&&header[byteIndex+1]==="D".charCodeAt(0)&&header[byteIndex+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(header[byteIndex]&255===255&&(header[byteIndex+1]&240)===240){return"audio"}return null};var parseSampleRate=function parseSampleRate(packet){var i=0;while(i+5<packet.length){if(packet[i]!==255||(packet[i+1]&246)!==240){i++;continue}return ADTS_SAMPLING_FREQUENCIES$1[(packet[i+2]&60)>>>2]}return null};var parseAacTimestamp=function parseAacTimestamp(packet){var frameStart,frameSize,frame,frameHeader;frameStart=10;if(packet[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger$1(packet.subarray(10,14))}do{frameSize=parseSyncSafeInteger$1(packet.subarray(frameStart+4,frameStart+8));if(frameSize<1){return null}frameHeader=String.fromCharCode(packet[frameStart],packet[frameStart+1],packet[frameStart+2],packet[frameStart+3]);if(frameHeader==="PRIV"){frame=packet.subarray(frameStart+10,frameStart+frameSize+10);for(var i=0;i<frame.byteLength;i++){if(frame[i]===0){var owner=parseIso88591$1(frame,0,i);if(owner==="com.apple.streaming.transportStreamTimestamp"){var d=frame.subarray(i+1);var size=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&3;return size}break}}}frameStart+=10;frameStart+=frameSize}while(frameStart<packet.byteLength);return null};var utils={isLikelyAacData:isLikelyAacData,parseId3TagSize:parseId3TagSize,parseAdtsSize:parseAdtsSize,parseType:parseType$1,parseSampleRate:parseSampleRate,parseAacTimestamp:parseAacTimestamp};var _AacStream;_AacStream=function AacStream(){var everything=new Uint8Array,timeStamp=0;_AacStream.prototype.init.call(this);this.setTimestamp=function(timestamp){timeStamp=timestamp};this.push=function(bytes){var frameSize=0,byteIndex=0,bytesLeft,chunk,packet,tempLength;if(everything.length){tempLength=everything.length;everything=new Uint8Array(bytes.byteLength+tempLength);everything.set(everything.subarray(0,tempLength));everything.set(bytes,tempLength)}else{everything=bytes}while(everything.length-byteIndex>=3){if(everything[byteIndex]==="I".charCodeAt(0)&&everything[byteIndex+1]==="D".charCodeAt(0)&&everything[byteIndex+2]==="3".charCodeAt(0)){if(everything.length-byteIndex<10){break}frameSize=utils.parseId3TagSize(everything,byteIndex);if(byteIndex+frameSize>everything.length){break}chunk={type:"timed-metadata",data:everything.subarray(byteIndex,byteIndex+frameSize)};this.trigger("data",chunk);byteIndex+=frameSize;continue}else if((everything[byteIndex]&255)===255&&(everything[byteIndex+1]&240)===240){if(everything.length-byteIndex<7){break}frameSize=utils.parseAdtsSize(everything,byteIndex);if(byteIndex+frameSize>everything.length){break}packet={type:"audio",data:everything.subarray(byteIndex,byteIndex+frameSize),pts:timeStamp,dts:timeStamp};this.trigger("data",packet);byteIndex+=frameSize;continue}byteIndex++}bytesLeft=everything.length-byteIndex;if(bytesLeft>0){everything=everything.subarray(byteIndex)}else{everything=new Uint8Array}}};_AacStream.prototype=new stream;var aac=_AacStream;var H264Stream=h264.H264Stream;var isLikelyAacData$1=utils.isLikelyAacData;var AUDIO_PROPERTIES=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var VIDEO_PROPERTIES=["width","height","profileIdc","levelIdc","profileCompatibility"];var _VideoSegmentStream,_AudioSegmentStream,_Transmuxer,_CoalesceStream;var arrayEquals=function arrayEquals(a,b){var i;if(a.length!==b.length){return false}for(i=0;i<a.length;i++){if(a[i]!==b[i]){return false}}return true};var generateVideoSegmentTimingInfo=function generateVideoSegmentTimingInfo(baseMediaDecodeTime,startDts,startPts,endDts,endPts,prependedContentDuration){var ptsOffsetFromDts=startPts-startDts,decodeDuration=endDts-startDts,presentationDuration=endPts-startPts;return{start:{dts:baseMediaDecodeTime,pts:baseMediaDecodeTime+ptsOffsetFromDts},end:{dts:baseMediaDecodeTime+decodeDuration,pts:baseMediaDecodeTime+presentationDuration},prependedContentDuration:prependedContentDuration,baseMediaDecodeTime:baseMediaDecodeTime}};_AudioSegmentStream=function AudioSegmentStream(track,options){var adtsFrames=[],sequenceNumber=0,earliestAllowedDts=0,audioAppendStartTs=0,videoBaseMediaDecodeTime=Infinity;options=options||{};_AudioSegmentStream.prototype.init.call(this);this.push=function(data){trackDecodeInfo.collectDtsInfo(track,data);if(track){AUDIO_PROPERTIES.forEach(function(prop){track[prop]=data[prop]})}
adtsFrames.push(data)};this.setEarliestDts=function(earliestDts){earliestAllowedDts=earliestDts-track.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(baseMediaDecodeTime){videoBaseMediaDecodeTime=baseMediaDecodeTime};this.setAudioAppendStart=function(timestamp){audioAppendStartTs=timestamp};this.flush=function(){var frames,moof,mdat,boxes;if(adtsFrames.length===0){this.trigger("done","AudioSegmentStream");return}frames=audioFrameUtils.trimAdtsFramesByEarliestDts(adtsFrames,track,earliestAllowedDts);track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);audioFrameUtils.prefixWithSilence(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime);track.samples=audioFrameUtils.generateSampleTable(frames);mdat=mp4Generator.mdat(audioFrameUtils.concatenateFrameData(frames));adtsFrames=[];moof=mp4Generator.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);trackDecodeInfo.clearDtsInfo(track);this.trigger("data",{track:track,boxes:boxes});this.trigger("done","AudioSegmentStream")}};_AudioSegmentStream.prototype=new stream;_VideoSegmentStream=function VideoSegmentStream(track,options){var sequenceNumber=0,nalUnits=[],gopsToAlignWith=[],config,pps;options=options||{};_VideoSegmentStream.prototype.init.call(this);delete track.minPTS;this.gopCache_=[];this.push=function(nalUnit){trackDecodeInfo.collectDtsInfo(track,nalUnit);if(nalUnit.nalUnitType==="seq_parameter_set_rbsp"&&!config){config=nalUnit.config;track.sps=[nalUnit.data];VIDEO_PROPERTIES.forEach(function(prop){track[prop]=config[prop]},this)}if(nalUnit.nalUnitType==="pic_parameter_set_rbsp"&&!pps){pps=nalUnit.data;track.pps=[nalUnit.data]}nalUnits.push(nalUnit)};this.flush=function(){var frames,gopForFusion,gops,moof,mdat,boxes,prependedContentDuration=0,firstGop,lastGop;while(nalUnits.length){if(nalUnits[0].nalUnitType==="access_unit_delimiter_rbsp"){break}nalUnits.shift()}if(nalUnits.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}frames=frameUtils.groupNalsIntoFrames(nalUnits);gops=frameUtils.groupFramesIntoGops(frames);if(!gops[0][0].keyFrame){gopForFusion=this.getGopForFusion_(nalUnits[0],track);if(gopForFusion){prependedContentDuration=gopForFusion.duration;gops.unshift(gopForFusion);gops.byteLength+=gopForFusion.byteLength;gops.nalCount+=gopForFusion.nalCount;gops.pts=gopForFusion.pts;gops.dts=gopForFusion.dts;gops.duration+=gopForFusion.duration}else{gops=frameUtils.extendFirstKeyFrame(gops)}}if(gopsToAlignWith.length){var alignedGops;if(options.alignGopsAtEnd){alignedGops=this.alignGopsAtEnd_(gops)}else{alignedGops=this.alignGopsAtStart_(gops)}if(!alignedGops){this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}trackDecodeInfo.clearDtsInfo(track);gops=alignedGops}trackDecodeInfo.collectDtsInfo(track,gops);track.samples=frameUtils.generateSampleTable(gops);mdat=mp4Generator.mdat(frameUtils.concatenateNalData(gops));track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);this.trigger("processedGopsInfo",gops.map(function(gop){return{pts:gop.pts,dts:gop.dts,byteLength:gop.byteLength}}));firstGop=gops[0];lastGop=gops[gops.length-1];this.trigger("segmentTimingInfo",generateVideoSegmentTimingInfo(track.baseMediaDecodeTime,firstGop.dts,firstGop.pts,lastGop.dts+lastGop.duration,lastGop.pts+lastGop.duration,prependedContentDuration));this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.trigger("baseMediaDecodeTime",track.baseMediaDecodeTime);this.trigger("timelineStartInfo",track.timelineStartInfo);moof=mp4Generator.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);this.trigger("data",{track:track,boxes:boxes});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){trackDecodeInfo.clearDtsInfo(track);config=undefined;pps=undefined};this.getGopForFusion_=function(nalUnit){var halfSecond=45e3,allowableOverlap=1e4,nearestDistance=Infinity,dtsDistance,nearestGopObj,currentGop,currentGopObj,i;for(i=0;i<this.gopCache_.length;i++){currentGopObj=this.gopCache_[i];currentGop=currentGopObj.gop;if(!(track.pps&&arrayEquals(track.pps[0],currentGopObj.pps[0]))||!(track.sps&&arrayEquals(track.sps[0],currentGopObj.sps[0]))){continue}if(currentGop.dts<track.timelineStartInfo.dts){continue}dtsDistance=nalUnit.dts-currentGop.dts-currentGop.duration;if(dtsDistance>=-allowableOverlap&&dtsDistance<=halfSecond){if(!nearestGopObj||nearestDistance>dtsDistance){nearestGopObj=currentGopObj;nearestDistance=dtsDistance}}}if(nearestGopObj){return nearestGopObj.gop}return null};this.alignGopsAtStart_=function(gops){var alignIndex,gopIndex,align,gop,byteLength,nalCount,duration,alignedGops;byteLength=gops.byteLength;nalCount=gops.nalCount;duration=gops.duration;alignIndex=gopIndex=0;while(alignIndex<gopsToAlignWith.length&&gopIndex<gops.length){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){break}if(gop.pts>align.pts){alignIndex++;continue}gopIndex++;byteLength-=gop.byteLength;nalCount-=gop.nalCount;duration-=gop.duration}if(gopIndex===0){return gops}if(gopIndex===gops.length){return null}alignedGops=gops.slice(gopIndex);alignedGops.byteLength=byteLength;alignedGops.duration=duration;alignedGops.nalCount=nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops};this.alignGopsAtEnd_=function(gops){var alignIndex,gopIndex,align,gop,alignEndIndex,matchFound;alignIndex=gopsToAlignWith.length-1;gopIndex=gops.length-1;alignEndIndex=null;matchFound=false;while(alignIndex>=0&&gopIndex>=0){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){matchFound=true;break}if(align.pts>gop.pts){alignIndex--;continue}if(alignIndex===gopsToAlignWith.length-1){alignEndIndex=gopIndex}gopIndex--}if(!matchFound&&alignEndIndex===null){return null}var trimIndex;if(matchFound){trimIndex=gopIndex}else{trimIndex=alignEndIndex}if(trimIndex===0){return gops}var alignedGops=gops.slice(trimIndex);var metadata=alignedGops.reduce(function(total,gop){total.byteLength+=gop.byteLength;total.duration+=gop.duration;total.nalCount+=gop.nalCount;return total},{byteLength:0,duration:0,nalCount:0});alignedGops.byteLength=metadata.byteLength;alignedGops.duration=metadata.duration;alignedGops.nalCount=metadata.nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops};this.alignGopsWith=function(newGopsToAlignWith){gopsToAlignWith=newGopsToAlignWith}};_VideoSegmentStream.prototype=new stream;_CoalesceStream=function CoalesceStream(options,metadataStream){this.numberOfTracks=0;this.metadataStream=metadataStream;options=options||{};if(typeof options.remux!=="undefined"){this.remuxTracks=!!options.remux}else{this.remuxTracks=true}if(typeof options.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=options.keepOriginalTimestamps}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;_CoalesceStream.prototype.init.call(this);this.push=function(output){if(output.text){return this.pendingCaptions.push(output)}if(output.frames){return this.pendingMetadata.push(output)}this.pendingTracks.push(output.track);this.pendingBoxes.push(output.boxes);this.pendingBytes+=output.boxes.byteLength;if(output.track.type==="video"){this.videoTrack=output.track}if(output.track.type==="audio"){this.audioTrack=output.track}}};_CoalesceStream.prototype=new stream;_CoalesceStream.prototype.flush=function(flushSource){var offset=0,event={captions:[],captionStreams:{},metadata:[],info:{}},caption,id3,initSegment,timelineStartPts=0,i;if(this.pendingTracks.length<this.numberOfTracks){if(flushSource!=="VideoSegmentStream"&&flushSource!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts;VIDEO_PROPERTIES.forEach(function(prop){event.info[prop]=this.videoTrack[prop]},this)}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts;AUDIO_PROPERTIES.forEach(function(prop){event.info[prop]=this.audioTrack[prop]},this)}if(this.pendingTracks.length===1){event.type=this.pendingTracks[0].type}else{event.type="combined"}this.emittedTracks+=this.pendingTracks.length;initSegment=mp4Generator.initSegment(this.pendingTracks);event.initSegment=new Uint8Array(initSegment.byteLength);event.initSegment.set(initSegment);event.data=new Uint8Array(this.pendingBytes);for(i=0;i<this.pendingBoxes.length;i++){event.data.set(this.pendingBoxes[i],offset);offset+=this.pendingBoxes[i].byteLength}for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=caption.startPts;if(!this.keepOriginalTimestamps){caption.startTime-=timelineStartPts}caption.startTime/=9e4;caption.endTime=caption.endPts;if(!this.keepOriginalTimestamps){caption.endTime-=timelineStartPts}caption.endTime/=9e4;event.captionStreams[caption.stream]=true;event.captions.push(caption)}for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=id3.pts;if(!this.keepOriginalTimestamps){id3.cueTime-=timelineStartPts}id3.cueTime/=9e4;event.metadata.push(id3)}event.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",event);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};_Transmuxer=function Transmuxer(options){var self=this,hasFlushed=true,videoTrack,audioTrack;_Transmuxer.prototype.init.call(this);options=options||{};this.baseMediaDecodeTime=options.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="aac";pipeline.metadataStream=new m2ts_1.MetadataStream;pipeline.aacStream=new aac;pipeline.audioTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("audio");pipeline.timedMetadataTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("timed-metadata");pipeline.adtsStream=new adts;pipeline.coalesceStream=new _CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.aacStream;pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.metadataStream.on("timestamp",function(frame){pipeline.aacStream.setTimestamp(frame.timeStamp)});pipeline.aacStream.on("data",function(data){if(data.type==="timed-metadata"&&!pipeline.audioSegmentStream){audioTrack=audioTrack||{timelineStartInfo:{baseMediaDecodeTime:self.baseMediaDecodeTime},codec:"adts",type:"audio"};pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream(audioTrack,options);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream)}});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="ts";pipeline.metadataStream=new m2ts_1.MetadataStream;pipeline.packetStream=new m2ts_1.TransportPacketStream;pipeline.parseStream=new m2ts_1.TransportParseStream;pipeline.elementaryStream=new m2ts_1.ElementaryStream;pipeline.videoTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("video");pipeline.audioTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("audio");pipeline.timedMetadataTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("timed-metadata");pipeline.adtsStream=new adts;pipeline.h264Stream=new H264Stream;pipeline.captionStream=new m2ts_1.CaptionStream;pipeline.coalesceStream=new _CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.packetStream;pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream);pipeline.elementaryStream.pipe(pipeline.videoTimestampRolloverStream).pipe(pipeline.h264Stream);pipeline.elementaryStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.elementaryStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);pipeline.elementaryStream.on("data",function(data){var i;if(data.type==="metadata"){i=data.tracks.length;while(i--){if(!videoTrack&&data.tracks[i].type==="video"){videoTrack=data.tracks[i];videoTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime}else if(!audioTrack&&data.tracks[i].type==="audio"){audioTrack=data.tracks[i];audioTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime}}if(videoTrack&&!pipeline.videoSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.videoSegmentStream=new _VideoSegmentStream(videoTrack,options);pipeline.videoSegmentStream.on("timelineStartInfo",function(timelineStartInfo){if(audioTrack){audioTrack.timelineStartInfo=timelineStartInfo;pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts)}});pipeline.videoSegmentStream.on("processedGopsInfo",self.trigger.bind(self,"gopInfo"));pipeline.videoSegmentStream.on("segmentTimingInfo",self.trigger.bind(self,"videoSegmentTimingInfo"));pipeline.videoSegmentStream.on("baseMediaDecodeTime",function(baseMediaDecodeTime){if(audioTrack){pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime)}});pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream)}if(audioTrack&&!pipeline.audioSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream(audioTrack,options);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream)}}});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(baseMediaDecodeTime){var pipeline=this.transmuxPipeline_;if(!options.keepOriginalTimestamps){this.baseMediaDecodeTime=baseMediaDecodeTime}if(audioTrack){audioTrack.timelineStartInfo.dts=undefined;audioTrack.timelineStartInfo.pts=undefined;trackDecodeInfo.clearDtsInfo(audioTrack);if(!options.keepOriginalTimestamps){audioTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime}if(pipeline.audioTimestampRolloverStream){pipeline.audioTimestampRolloverStream.discontinuity()}}if(videoTrack){if(pipeline.videoSegmentStream){pipeline.videoSegmentStream.gopCache_=[];pipeline.videoTimestampRolloverStream.discontinuity()}videoTrack.timelineStartInfo.dts=undefined;videoTrack.timelineStartInfo.pts=undefined;trackDecodeInfo.clearDtsInfo(videoTrack);pipeline.captionStream.reset();if(!options.keepOriginalTimestamps){videoTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime}}if(pipeline.timedMetadataTimestampRolloverStream){pipeline.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(timestamp){if(audioTrack){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp)}};this.alignGopsWith=function(gopsToAlignWith){if(videoTrack&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith)}};this.push=function(data){if(hasFlushed){var isAac=isLikelyAacData$1(data);if(isAac&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!isAac&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}hasFlushed=false}this.transmuxPipeline_.headOfPipeline.push(data)};this.flush=function(){hasFlushed=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};_Transmuxer.prototype=new stream;var transmuxer={Transmuxer:_Transmuxer,VideoSegmentStream:_VideoSegmentStream,AudioSegmentStream:_AudioSegmentStream,AUDIO_PROPERTIES:AUDIO_PROPERTIES,VIDEO_PROPERTIES:VIDEO_PROPERTIES,generateVideoSegmentTimingInfo:generateVideoSegmentTimingInfo};var inspectMp4,_textifyMp,parseType$2=probe$$1.parseType,parseMp4Date=function parseMp4Date(seconds){return new Date(seconds*1e3-20828448e5)},parseSampleFlags=function parseSampleFlags(flags){return{isLeading:(flags[0]&12)>>>2,dependsOn:flags[0]&3,isDependedOn:(flags[1]&192)>>>6,hasRedundancy:(flags[1]&48)>>>4,paddingValue:(flags[1]&14)>>>1,isNonSyncSample:flags[1]&1,degradationPriority:flags[2]<<8|flags[3]}},nalParse=function nalParse(avcStream){var avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result=[],i,length;for(i=0;i+4<avcStream.length;i+=length){length=avcView.getUint32(i);i+=4;if(length<=0){result.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(avcStream[i]&31){case 1:result.push("slice_layer_without_partitioning_rbsp");break;case 5:result.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:result.push("sei_rbsp");break;case 7:result.push("seq_parameter_set_rbsp");break;case 8:result.push("pic_parameter_set_rbsp");break;case 9:result.push("access_unit_delimiter_rbsp");break;default:result.push("UNKNOWN NAL - "+avcStream[i]&31);break}}return result},parse$$1={avc1:function avc1(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{dataReferenceIndex:view.getUint16(6),width:view.getUint16(24),height:view.getUint16(26),horizresolution:view.getUint16(28)+view.getUint16(30)/16,vertresolution:view.getUint16(32)+view.getUint16(34)/16,frameCount:view.getUint16(40),depth:view.getUint16(74),config:inspectMp4(data.subarray(78,data.byteLength))}},avcC:function avcC(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={configurationVersion:data[0],avcProfileIndication:data[1],profileCompatibility:data[2],avcLevelIndication:data[3],lengthSizeMinusOne:data[4]&3,sps:[],pps:[]},numOfSequenceParameterSets=data[5]&31,numOfPictureParameterSets,nalSize,offset,i;offset=6;for(i=0;i<numOfSequenceParameterSets;i++){nalSize=view.getUint16(offset);offset+=2;result.sps.push(new Uint8Array(data.subarray(offset,offset+nalSize)));offset+=nalSize}numOfPictureParameterSets=data[offset];offset++;for(i=0;i<numOfPictureParameterSets;i++){nalSize=view.getUint16(offset);offset+=2;result.pps.push(new Uint8Array(data.subarray(offset,offset+nalSize)));offset+=nalSize}return result},btrt:function btrt(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{bufferSizeDB:view.getUint32(0),maxBitrate:view.getUint32(4),avgBitrate:view.getUint32(8)}},esds:function esds(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),esId:data[6]<<8|data[7],streamPriority:data[8]&31,decoderConfig:{objectProfileIndication:data[11],streamType:data[12]>>>2&63,bufferSize:data[13]<<16|data[14]<<8|data[15],maxBitrate:data[16]<<24|data[17]<<16|data[18]<<8|data[19],avgBitrate:data[20]<<24|data[21]<<16|data[22]<<8|data[23],decoderConfigDescriptor:{tag:data[24],length:data[25],audioObjectType:data[26]>>>3&31,samplingFrequencyIndex:(data[26]&7)<<1|data[27]>>>7&1,channelConfiguration:data[27]>>>3&15}}}},ftyp:function ftyp(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={majorBrand:parseType$2(data.subarray(0,4)),minorVersion:view.getUint32(4),compatibleBrands:[]},i=8;while(i<data.byteLength){result.compatibleBrands.push(parseType$2(data.subarray(i,i+4)));i+=4}return result},dinf:function dinf(data){return{boxes:inspectMp4(data)}},dref:function dref(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),dataReferences:inspectMp4(data.subarray(8))}},hdlr:function hdlr(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),handlerType:parseType$2(data.subarray(8,12)),name:""},i=8;for(i=24;i<data.byteLength;i++){if(data[i]===0){i++;break}result.name+=String.fromCharCode(data[i])}result.name=decodeURIComponent(escape(result.name));return result},mdat:function mdat(data){return{byteLength:data.byteLength,nals:nalParse(data)}},mdhd:function mdhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,language,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),language:""};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=8;result.duration=view.getUint32(i)}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=4;result.duration=view.getUint32(i)}i+=4;language=view.getUint16(i);result.language+=String.fromCharCode((language>>10)+96);result.language+=String.fromCharCode(((language&992)>>5)+96);result.language+=String.fromCharCode((language&31)+96);return result},mdia:function mdia(data){return{boxes:inspectMp4(data)}},mfhd:function mfhd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sequenceNumber:data[4]<<24|data[5]<<16|data[6]<<8|data[7]}},minf:function minf(data){return{boxes:inspectMp4(data)}},mp4a:function mp4a(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={dataReferenceIndex:view.getUint16(6),channelcount:view.getUint16(16),samplesize:view.getUint16(18),samplerate:view.getUint16(24)+view.getUint16(26)/65536};if(data.byteLength>28){result.streamDescriptor=inspectMp4(data.subarray(28))[0]}return result},moof:function moof(data){return{boxes:inspectMp4(data)}},moov:function moov(data){return{boxes:inspectMp4(data)}},mvex:function mvex(data){return{boxes:inspectMp4(data)}},mvhd:function mvhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=8;result.duration=view.getUint32(i)}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=4;result.duration=view.getUint32(i)}i+=4;result.rate=view.getUint16(i)+view.getUint16(i+2)/16;i+=4;result.volume=view.getUint8(i)+view.getUint8(i+1)/8;i+=2;i+=2;i+=2*4;result.matrix=new Uint32Array(data.subarray(i,i+9*4));i+=9*4;i+=6*4;result.nextTrackId=view.getUint32(i);return result},pdin:function pdin(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),rate:view.getUint32(4),initialDelay:view.getUint32(8)}},sdtp:function sdtp(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},i;for(i=4;i<data.byteLength;i++){result.samples.push({dependsOn:(data[i]&48)>>4,isDependedOn:(data[i]&12)>>2,hasRedundancy:data[i]&3})}return result},sidx:function sidx(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),references:[],referenceId:view.getUint32(4),timescale:view.getUint32(8),earliestPresentationTime:view.getUint32(12),firstOffset:view.getUint32(16)},referenceCount=view.getUint16(22),i;for(i=24;referenceCount;i+=12,referenceCount--){result.references.push({referenceType:(data[i]&128)>>>7,referencedSize:view.getUint32(i)&2147483647,subsegmentDuration:view.getUint32(i+4),startsWithSap:!!(data[i+8]&128),sapType:(data[i+8]&112)>>>4,sapDeltaTime:view.getUint32(i+8)&268435455})}return result},smhd:function smhd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),balance:data[4]+data[5]/256}},stbl:function stbl(data){return{boxes:inspectMp4(data)}},stco:function stco(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),chunkOffsets:[]},entryCount=view.getUint32(4),i;for(i=8;entryCount;i+=4,entryCount--){result.chunkOffsets.push(view.getUint32(i))}return result},stsc:function stsc(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),entryCount=view.getUint32(4),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleToChunks:[]},i;for(i=8;entryCount;i+=12,entryCount--){result.sampleToChunks.push({firstChunk:view.getUint32(i),samplesPerChunk:view.getUint32(i+4),sampleDescriptionIndex:view.getUint32(i+8)})}return result},stsd:function stsd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleDescriptions:inspectMp4(data.subarray(8))}},stsz:function stsz(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleSize:view.getUint32(4),entries:[]},i;for(i=12;i<data.byteLength;i+=4){result.entries.push(view.getUint32(i))}return result},stts:function stts(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),timeToSamples:[]},entryCount=view.getUint32(4),i;for(i=8;entryCount;i+=8,entryCount--){result.timeToSamples.push({sampleCount:view.getUint32(i),sampleDelta:view.getUint32(i+4)})}return result},styp:function styp(data){return parse$$1.ftyp(data)},tfdt:function tfdt(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),baseMediaDecodeTime:data[4]<<24|data[5]<<16|data[6]<<8|data[7]};if(result.version===1){result.baseMediaDecodeTime*=Math.pow(2,32);result.baseMediaDecodeTime+=data[8]<<24|data[9]<<16|data[10]<<8|data[11]}return result},tfhd:function tfhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4)},baseDataOffsetPresent=result.flags[2]&1,sampleDescriptionIndexPresent=result.flags[2]&2,defaultSampleDurationPresent=result.flags[2]&8,defaultSampleSizePresent=result.flags[2]&16,defaultSampleFlagsPresent=result.flags[2]&32,durationIsEmpty=result.flags[0]&65536,defaultBaseIsMoof=result.flags[0]&131072,i;i=8;if(baseDataOffsetPresent){i+=4;result.baseDataOffset=view.getUint32(12);i+=4}if(sampleDescriptionIndexPresent){result.sampleDescriptionIndex=view.getUint32(i);i+=4}if(defaultSampleDurationPresent){result.defaultSampleDuration=view.getUint32(i);i+=4}if(defaultSampleSizePresent){result.defaultSampleSize=view.getUint32(i);i+=4}if(defaultSampleFlagsPresent){result.defaultSampleFlags=view.getUint32(i)}if(durationIsEmpty){result.durationIsEmpty=true}if(!baseDataOffsetPresent&&defaultBaseIsMoof){result.baseDataOffsetIsMoof=true}return result},tkhd:function tkhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.trackId=view.getUint32(i);i+=4;i+=8;result.duration=view.getUint32(i)}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.trackId=view.getUint32(i);i+=4;i+=4;result.duration=view.getUint32(i)}i+=4;i+=2*4;result.layer=view.getUint16(i);i+=2;result.alternateGroup=view.getUint16(i);i+=2;result.volume=view.getUint8(i)+view.getUint8(i+1)/8;i+=2;i+=2;result.matrix=new Uint32Array(data.subarray(i,i+9*4));i+=9*4;result.width=view.getUint16(i)+view.getUint16(i+2)/16;i+=4;result.height=view.getUint16(i)+view.getUint16(i+2)/16;return result},traf:function traf(data){return{boxes:inspectMp4(data)}},trak:function trak(data){return{boxes:inspectMp4(data)}},trex:function trex(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4),defaultSampleDescriptionIndex:view.getUint32(8),defaultSampleDuration:view.getUint32(12),defaultSampleSize:view.getUint32(16),sampleDependsOn:data[20]&3,sampleIsDependedOn:(data[21]&192)>>6,sampleHasRedundancy:(data[21]&48)>>4,samplePaddingValue:(data[21]&14)>>1,sampleIsDifferenceSample:!!(data[21]&1),sampleDegradationPriority:view.getUint16(22)}},trun:function trun(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},view=new DataView(data.buffer,data.byteOffset,data.byteLength),dataOffsetPresent=result.flags[2]&1,firstSampleFlagsPresent=result.flags[2]&4,sampleDurationPresent=result.flags[1]&1,sampleSizePresent=result.flags[1]&2,sampleFlagsPresent=result.flags[1]&4,sampleCompositionTimeOffsetPresent=result.flags[1]&8,sampleCount=view.getUint32(4),offset=8,sample;if(dataOffsetPresent){result.dataOffset=view.getInt32(offset);offset+=4}if(firstSampleFlagsPresent&&sampleCount){sample={flags:parseSampleFlags(data.subarray(offset,offset+4))};offset+=4;if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4}if(sampleCompositionTimeOffsetPresent){sample.compositionTimeOffset=view.getUint32(offset);offset+=4}result.samples.push(sample);sampleCount--}while(sampleCount--){sample={};if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4}if(sampleFlagsPresent){sample.flags=parseSampleFlags(data.subarray(offset,offset+4));offset+=4}if(sampleCompositionTimeOffsetPresent){sample.compositionTimeOffset=view.getUint32(offset);offset+=4}result.samples.push(sample)}return result},"url ":function url(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4))}},vmhd:function vmhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),graphicsmode:view.getUint16(4),opcolor:new Uint16Array([view.getUint16(6),view.getUint16(8),view.getUint16(10)])}}};inspectMp4=function inspectMp4(data){var i=0,result=[],view,size,type,end,box;var ab=new ArrayBuffer(data.length);var v=new Uint8Array(ab);for(var z=0;z<data.length;++z){v[z]=data[z]}view=new DataView(ab);while(i<data.byteLength){size=view.getUint32(i);type=parseType$2(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;box=(parse$$1[type]||function(data){return{data:data}})(data.subarray(i+8,end));box.size=size;box.type=type;result.push(box);i=end}return result};_textifyMp=function textifyMp4(inspectedMp4,depth){var indent;depth=depth||0;indent=new Array(depth*2+1).join(" ");return inspectedMp4.map(function(box,index){return indent+box.type+"\n"+Object.keys(box).filter(function(key){return key!=="type"&&key!=="boxes"}).map(function(key){var prefix=indent+"  "+key+": ",value=box[key];if(value instanceof Uint8Array||value instanceof Uint32Array){var bytes=Array.prototype.slice.call(new Uint8Array(value.buffer,value.byteOffset,value.byteLength)).map(function(byte){return" "+("00"+byte.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);if(!bytes){return prefix+"<>"}if(bytes.length===1){return prefix+"<"+bytes.join("").slice(1)+">"}return prefix+"<\n"+bytes.map(function(line){return indent+"  "+line}).join("\n")+"\n"+indent+"  >";
}return prefix+JSON.stringify(value,null,2).split("\n").map(function(line,index){if(index===0){return line}return indent+"  "+line}).join("\n")}).join("\n")+(box.boxes?"\n"+_textifyMp(box.boxes,depth+1):"")}).join("\n")};var mp4Inspector={inspect:inspectMp4,textify:_textifyMp,parseTfdt:parse$$1.tfdt,parseHdlr:parse$$1.hdlr,parseTfhd:parse$$1.tfhd,parseTrun:parse$$1.trun,parseSidx:parse$$1.sidx};var discardEmulationPreventionBytes$1=captionPacketParser.discardEmulationPreventionBytes;var CaptionStream$1=captionStream.CaptionStream;var mapToSample=function mapToSample(offset,samples){var approximateOffset=offset;for(var i=0;i<samples.length;i++){var sample=samples[i];if(approximateOffset<sample.size){return sample}approximateOffset-=sample.size}return null};var findSeiNals=function findSeiNals(avcStream,samples,trackId){var avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result=[],seiNal,i,length,lastMatchedSample;for(i=0;i+4<avcStream.length;i+=length){length=avcView.getUint32(i);i+=4;if(length<=0){continue}switch(avcStream[i]&31){case 6:var data=avcStream.subarray(i+1,i+1+length);var matchingSample=mapToSample(i,samples);seiNal={nalUnitType:"sei_rbsp",size:length,data:data,escapedRBSP:discardEmulationPreventionBytes$1(data),trackId:trackId};if(matchingSample){seiNal.pts=matchingSample.pts;seiNal.dts=matchingSample.dts;lastMatchedSample=matchingSample}else{seiNal.pts=lastMatchedSample.pts;seiNal.dts=lastMatchedSample.dts}result.push(seiNal);break;default:break}}return result};var parseSamples=function parseSamples(truns,baseMediaDecodeTime,tfhd){var currentDts=baseMediaDecodeTime;var defaultSampleDuration=tfhd.defaultSampleDuration||0;var defaultSampleSize=tfhd.defaultSampleSize||0;var trackId=tfhd.trackId;var allSamples=[];truns.forEach(function(trun){var trackRun=mp4Inspector.parseTrun(trun);var samples=trackRun.samples;samples.forEach(function(sample){if(sample.duration===undefined){sample.duration=defaultSampleDuration}if(sample.size===undefined){sample.size=defaultSampleSize}sample.trackId=trackId;sample.dts=currentDts;if(sample.compositionTimeOffset===undefined){sample.compositionTimeOffset=0}sample.pts=currentDts+sample.compositionTimeOffset;currentDts+=sample.duration});allSamples=allSamples.concat(samples)});return allSamples};var parseCaptionNals=function parseCaptionNals(segment,videoTrackId){var trafs=probe$$1.findBox(segment,["moof","traf"]);var mdats=probe$$1.findBox(segment,["mdat"]);var captionNals={};var mdatTrafPairs=[];mdats.forEach(function(mdat,index){var matchingTraf=trafs[index];mdatTrafPairs.push({mdat:mdat,traf:matchingTraf})});mdatTrafPairs.forEach(function(pair){var mdat=pair.mdat;var traf=pair.traf;var tfhd=probe$$1.findBox(traf,["tfhd"]);var headerInfo=mp4Inspector.parseTfhd(tfhd[0]);var trackId=headerInfo.trackId;var tfdt=probe$$1.findBox(traf,["tfdt"]);var baseMediaDecodeTime=tfdt.length>0?mp4Inspector.parseTfdt(tfdt[0]).baseMediaDecodeTime:0;var truns=probe$$1.findBox(traf,["trun"]);var samples;var seiNals;if(videoTrackId===trackId&&truns.length>0){samples=parseSamples(truns,baseMediaDecodeTime,headerInfo);seiNals=findSeiNals(mdat,samples,trackId);if(!captionNals[trackId]){captionNals[trackId]=[]}captionNals[trackId]=captionNals[trackId].concat(seiNals)}});return captionNals};var parseEmbeddedCaptions=function parseEmbeddedCaptions(segment,trackId,timescale){var seiNals;if(!trackId){return null}seiNals=parseCaptionNals(segment,trackId);return{seiNals:seiNals[trackId],timescale:timescale}};var CaptionParser$$1=function CaptionParser$$1(){var isInitialized=false;var captionStream$$1;var segmentCache;var trackId;var timescale;var parsedCaptions;this.isInitialized=function(){return isInitialized};this.init=function(){captionStream$$1=new CaptionStream$1;isInitialized=true;captionStream$$1.on("data",function(event){event.startTime=event.startPts/timescale;event.endTime=event.endPts/timescale;parsedCaptions.captions.push(event);parsedCaptions.captionStreams[event.stream]=true})};this.isNewInit=function(videoTrackIds,timescales){if(videoTrackIds&&videoTrackIds.length===0||timescales&&(typeof timescales==="undefined"?"undefined":_typeof2(timescales))==="object"&&Object.keys(timescales).length===0){return false}return trackId!==videoTrackIds[0]||timescale!==timescales[trackId]};this.parse=function(segment,videoTrackIds,timescales){var parsedData;if(!this.isInitialized()){return null}else if(!videoTrackIds||!timescales){return null}else if(this.isNewInit(videoTrackIds,timescales)){trackId=videoTrackIds[0];timescale=timescales[trackId]}else if(!trackId||!timescale){segmentCache.push(segment);return null}while(segmentCache.length>0){var cachedSegment=segmentCache.shift();this.parse(cachedSegment,videoTrackIds,timescales)}parsedData=parseEmbeddedCaptions(segment,trackId,timescale);if(parsedData===null||!parsedData.seiNals){return null}this.pushNals(parsedData.seiNals);this.flushStream();return parsedCaptions};this.pushNals=function(nals){if(!this.isInitialized()||!nals||nals.length===0){return null}nals.forEach(function(nal){captionStream$$1.push(nal)})};this.flushStream=function(){if(!this.isInitialized()){return null}captionStream$$1.flush()};this.clearParsedCaptions=function(){parsedCaptions.captions=[];parsedCaptions.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}captionStream$$1.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){segmentCache=[];trackId=null;timescale=null;if(!parsedCaptions){parsedCaptions={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var captionParser=CaptionParser$$1;var mp4$$1={generator:mp4Generator,probe:probe$$1,Transmuxer:transmuxer.Transmuxer,AudioSegmentStream:transmuxer.AudioSegmentStream,VideoSegmentStream:transmuxer.VideoSegmentStream,CaptionParser:captionParser};var classCallCheck=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var wireTransmuxerEvents=function wireTransmuxerEvents(self,transmuxer){transmuxer.on("data",function(segment){var initArray=segment.initSegment;segment.initSegment={data:initArray.buffer,byteOffset:initArray.byteOffset,byteLength:initArray.byteLength};var typedArray=segment.data;segment.data=typedArray.buffer;self.postMessage({action:"data",segment:segment,byteOffset:typedArray.byteOffset,byteLength:typedArray.byteLength},[segment.data])});if(transmuxer.captionStream){transmuxer.captionStream.on("data",function(caption){self.postMessage({action:"caption",data:caption})})}transmuxer.on("done",function(data){self.postMessage({action:"done"})});transmuxer.on("gopInfo",function(gopInfo){self.postMessage({action:"gopInfo",gopInfo:gopInfo})});transmuxer.on("videoSegmentTimingInfo",function(videoSegmentTimingInfo){self.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:videoSegmentTimingInfo})})};var MessageHandlers=function(){function MessageHandlers(self,options){classCallCheck(this,MessageHandlers);this.options=options||{};this.self=self;this.init()}createClass(MessageHandlers,[{key:"init",value:function init(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new mp4$$1.Transmuxer(this.options);wireTransmuxerEvents(this.self,this.transmuxer)}},{key:"push",value:function push(data){var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);this.transmuxer.push(segment)}},{key:"reset",value:function reset(){this.init()}},{key:"setTimestampOffset",value:function setTimestampOffset(data){var timestampOffset=data.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(timestampOffset*9e4))}},{key:"setAudioAppendStart",value:function setAudioAppendStart(data){this.transmuxer.setAudioAppendStart(Math.ceil(data.appendStart*9e4))}},{key:"flush",value:function flush(data){this.transmuxer.flush()}},{key:"resetCaptions",value:function resetCaptions(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function alignGopsWith(data){this.transmuxer.alignGopsWith(data.gopsToAlignWith.slice())}}]);return MessageHandlers}();var TransmuxerWorker=function TransmuxerWorker(self){self.onmessage=function(event){if(event.data.action==="init"&&event.data.options){this.messageHandlers=new MessageHandlers(self,event.data.options);return}if(!this.messageHandlers){this.messageHandlers=new MessageHandlers(self)}if(event.data&&event.data.action&&event.data.action!=="init"){if(this.messageHandlers[event.data.action]){this.messageHandlers[event.data.action](event.data)}}}};var transmuxerWorker=new TransmuxerWorker(self);return transmuxerWorker}()});var defaultCodecs={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var translateLegacyCodecs=function translateLegacyCodecs(codecs){return codecs.map(function(codec){return codec.replace(/avc1\.(\d+)\.(\d+)/i,function(orig,profile,avcLevel){var profileHex=("00"+Number(profile).toString(16)).slice(-2);var avcLevelHex=("00"+Number(avcLevel).toString(16)).slice(-2);return"avc1."+profileHex+"00"+avcLevelHex})})};var parseCodecs=function parseCodecs(){var codecs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var result={codecCount:0};var parsed=void 0;result.codecCount=codecs.split(",").length;result.codecCount=result.codecCount||2;parsed=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(codecs);if(parsed){result.videoCodec=parsed[2];result.videoObjectTypeIndicator=parsed[3]}result.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(codecs);result.audioProfile=result.audioProfile&&result.audioProfile[2];return result};var mapLegacyAvcCodecs=function mapLegacyAvcCodecs(codecString){return codecString.replace(/avc1\.(\d+)\.(\d+)/i,function(match){return translateLegacyCodecs([match])[0]})};var makeMimeTypeString=function makeMimeTypeString(type,container,codecs){return type+"/"+container+'; codecs="'+codecs.filter(function(c){return!!c}).join(", ")+'"'};var getContainerType=function getContainerType(media){if(media.segments&&media.segments.length&&media.segments[0].map){return"mp4"}return"mp2t"};var getCodecs=function getCodecs(media){var mediaAttributes=media.attributes||{};if(mediaAttributes.CODECS){return parseCodecs(mediaAttributes.CODECS)}return defaultCodecs};var audioProfileFromDefault=function audioProfileFromDefault(master,audioGroupId){if(!master.mediaGroups.AUDIO||!audioGroupId){return null}var audioGroup=master.mediaGroups.AUDIO[audioGroupId];if(!audioGroup){return null}for(var name in audioGroup){var audioType=audioGroup[name];if(audioType.default&&audioType.playlists){return parseCodecs(audioType.playlists[0].attributes.CODECS).audioProfile}}return null};var mimeTypesForPlaylist=function mimeTypesForPlaylist(master,media){var containerType=getContainerType(media);var codecInfo=getCodecs(media);var mediaAttributes=media.attributes||{};var isMuxed=true;var isMaat=false;if(!media){return[]}if(master.mediaGroups.AUDIO&&mediaAttributes.AUDIO){var audioGroup=master.mediaGroups.AUDIO[mediaAttributes.AUDIO];if(audioGroup){isMaat=true;isMuxed=false;for(var groupId in audioGroup){if(!audioGroup[groupId].uri&&!audioGroup[groupId].playlists){isMuxed=true;break}}}}if(isMaat&&!codecInfo.audioProfile){if(!isMuxed){codecInfo.audioProfile=audioProfileFromDefault(master,mediaAttributes.AUDIO)}if(!codecInfo.audioProfile){videojs$1.log.warn("Multiple audio tracks present but no audio codec string is specified. "+"Attempting to use the default audio codec (mp4a.40.2)");codecInfo.audioProfile=defaultCodecs.audioProfile}}var codecStrings={};if(codecInfo.videoCodec){codecStrings.video=""+codecInfo.videoCodec+codecInfo.videoObjectTypeIndicator}if(codecInfo.audioProfile){codecStrings.audio="mp4a.40."+codecInfo.audioProfile}var justAudio=makeMimeTypeString("audio",containerType,[codecStrings.audio]);var justVideo=makeMimeTypeString("video",containerType,[codecStrings.video]);var bothVideoAudio=makeMimeTypeString("video",containerType,[codecStrings.video,codecStrings.audio]);if(isMaat){if(!isMuxed&&codecStrings.video){return[justVideo,justAudio]}if(!isMuxed&&!codecStrings.video){return[justAudio,justAudio]}return[bothVideoAudio,justAudio]}if(!codecStrings.video){return[justAudio]}return[bothVideoAudio]};var parseContentType=function parseContentType(type){var object={type:"",parameters:{}};var parameters=type.trim().split(";");object.type=parameters.shift().trim();parameters.forEach(function(parameter){var pair=parameter.trim().split("=");if(pair.length>1){var name=pair[0].replace(/"/g,"").trim();var value=pair[1].replace(/"/g,"").trim();object.parameters[name]=value}});return object};var isAudioCodec=function isAudioCodec(codec){return/mp4a\.\d+.\d+/i.test(codec)};var isVideoCodec=function isVideoCodec(codec){return/avc1\.[\da-f]+/i.test(codec)};var gopsSafeToAlignWith=function gopsSafeToAlignWith(buffer,currentTime,mapping){if(typeof currentTime==="undefined"||currentTime===null||!buffer.length){return[]}var currentTimePts=Math.ceil((currentTime-mapping+3)*9e4);var i=void 0;for(i=0;i<buffer.length;i++){if(buffer[i].pts>currentTimePts){break}}return buffer.slice(i)};var updateGopBuffer=function updateGopBuffer(buffer,gops,replace){if(!gops.length){return buffer}if(replace){return gops.slice()}var start=gops[0].pts;var i=0;for(i;i<buffer.length;i++){if(buffer[i].pts>=start){break}}return buffer.slice(0,i).concat(gops)};var removeGopBuffer=function removeGopBuffer(buffer,start,end,mapping){var startPts=Math.ceil((start-mapping)*9e4);var endPts=Math.ceil((end-mapping)*9e4);var updatedBuffer=buffer.slice();var i=buffer.length;while(i--){if(buffer[i].pts<=endPts){break}}if(i===-1){return updatedBuffer}var j=i+1;while(j--){if(buffer[j].pts<=startPts){break}}j=Math.max(j,0);updatedBuffer.splice(j,i-j+1);return updatedBuffer};var buffered=function buffered(videoBuffer,audioBuffer,audioDisabled){var start=null;var end=null;var arity=0;var extents=[];var ranges=[];if(!videoBuffer&&!audioBuffer){return videojs$1.createTimeRange()}if(!videoBuffer){return audioBuffer.buffered}if(!audioBuffer){return videoBuffer.buffered}if(audioDisabled){return videoBuffer.buffered}if(videoBuffer.buffered.length===0&&audioBuffer.buffered.length===0){return videojs$1.createTimeRange()}var videoBuffered=videoBuffer.buffered;var audioBuffered=audioBuffer.buffered;var count=videoBuffered.length;while(count--){extents.push({time:videoBuffered.start(count),type:"start"});extents.push({time:videoBuffered.end(count),type:"end"})}count=audioBuffered.length;while(count--){extents.push({time:audioBuffered.start(count),type:"start"});extents.push({time:audioBuffered.end(count),type:"end"})}extents.sort(function(a,b){return a.time-b.time});for(count=0;count<extents.length;count++){if(extents[count].type==="start"){arity++;if(arity===2){start=extents[count].time}}else if(extents[count].type==="end"){arity--;if(arity===1){end=extents[count].time}}if(start!==null&&end!==null){ranges.push([start,end]);start=null;end=null}}return videojs$1.createTimeRanges(ranges)};var ONE_SECOND_IN_TS$3=9e4;var makeWrappedSourceBuffer=function makeWrappedSourceBuffer(mediaSource,mimeType){var sourceBuffer=mediaSource.addSourceBuffer(mimeType);var wrapper=Object.create(null);wrapper.updating=false;wrapper.realBuffer_=sourceBuffer;var _loop=function _loop(key){if(typeof sourceBuffer[key]==="function"){wrapper[key]=function(){return sourceBuffer[key].apply(sourceBuffer,arguments)}}else if(typeof wrapper[key]==="undefined"){Object.defineProperty(wrapper,key,{get:function get$$1(){return sourceBuffer[key]},set:function set$$1(v){return sourceBuffer[key]=v}})}};for(var key in sourceBuffer){_loop(key)}return wrapper};var VirtualSourceBuffer=function(_videojs$EventTarget){inherits$1(VirtualSourceBuffer,_videojs$EventTarget);function VirtualSourceBuffer(mediaSource,codecs){classCallCheck$1(this,VirtualSourceBuffer);var _this=possibleConstructorReturn$1(this,(VirtualSourceBuffer.__proto__||Object.getPrototypeOf(VirtualSourceBuffer)).call(this,videojs$1.EventTarget));_this.timestampOffset_=0;_this.pendingBuffers_=[];_this.bufferUpdating_=false;_this.mediaSource_=mediaSource;_this.codecs_=codecs;_this.audioCodec_=null;_this.videoCodec_=null;_this.audioDisabled_=false;_this.appendAudioInitSegment_=true;_this.gopBuffer_=[];_this.timeMapping_=0;_this.safeAppend_=videojs$1.browser.IE_VERSION>=11;var options={remux:false,alignGopsAtEnd:_this.safeAppend_};_this.codecs_.forEach(function(codec){if(isAudioCodec(codec)){_this.audioCodec_=codec}else if(isVideoCodec(codec)){_this.videoCodec_=codec}});_this.transmuxer_=new TransmuxWorker;_this.transmuxer_.postMessage({action:"init",options:options});_this.transmuxer_.onmessage=function(event){if(event.data.action==="data"){return _this.data_(event)}if(event.data.action==="done"){return _this.done_(event)}if(event.data.action==="gopInfo"){return _this.appendGopInfo_(event)}if(event.data.action==="videoSegmentTimingInfo"){return _this.videoSegmentTimingInfo_(event.data.videoSegmentTimingInfo)}};Object.defineProperty(_this,"timestampOffset",{get:function get$$1(){return this.timestampOffset_},set:function set$$1(val){if(typeof val==="number"&&val>=0){this.timestampOffset_=val;this.appendAudioInitSegment_=true;this.gopBuffer_.length=0;this.timeMapping_=0;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:val})}}});Object.defineProperty(_this,"appendWindowStart",{get:function get$$1(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function set$$1(start){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=start}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=start}}});Object.defineProperty(_this,"updating",{get:function get$$1(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(_this,"buffered",{get:function get$$1(){return buffered(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return _this}createClass$1(VirtualSourceBuffer,[{key:"data_",value:function data_(event){var segment=event.data.segment;segment.data=new Uint8Array(segment.data,event.data.byteOffset,event.data.byteLength);segment.initSegment=new Uint8Array(segment.initSegment.data,segment.initSegment.byteOffset,segment.initSegment.byteLength);createTextTracksIfNecessary(this,this.mediaSource_,segment);this.pendingBuffers_.push(segment);return}},{key:"done_",value:function done_(event){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"videoSegmentTimingInfo_",value:function videoSegmentTimingInfo_(timingInfo){var timingInfoInSeconds={start:{decode:timingInfo.start.dts/ONE_SECOND_IN_TS$3,presentation:timingInfo.start.pts/ONE_SECOND_IN_TS$3},end:{decode:timingInfo.end.dts/ONE_SECOND_IN_TS$3,presentation:timingInfo.end.pts/ONE_SECOND_IN_TS$3},baseMediaDecodeTime:timingInfo.baseMediaDecodeTime/ONE_SECOND_IN_TS$3};if(timingInfo.prependedContentDuration){timingInfoInSeconds.prependedContentDuration=timingInfo.prependedContentDuration/ONE_SECOND_IN_TS$3}this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:timingInfoInSeconds})}},{key:"createRealSourceBuffers_",value:function createRealSourceBuffers_(){var _this2=this;var types=["audio","video"];types.forEach(function(type){if(!_this2[type+"Codec_"]){return}if(_this2[type+"Buffer_"]){return}var buffer=null;if(_this2.mediaSource_[type+"Buffer_"]){buffer=_this2.mediaSource_[type+"Buffer_"];buffer.updating=false}else{var codecProperty=type+"Codec_";var mimeType=type+'/mp4;codecs="'+_this2[codecProperty]+'"';buffer=makeWrappedSourceBuffer(_this2.mediaSource_.nativeMediaSource_,mimeType);_this2.mediaSource_[type+"Buffer_"]=buffer}_this2[type+"Buffer_"]=buffer;["update","updatestart","updateend"].forEach(function(event){buffer.addEventListener(event,function(){if(type==="audio"&&_this2.audioDisabled_){return}if(event==="updateend"){_this2[type+"Buffer_"].updating=false}var shouldTrigger=types.every(function(t){if(t==="audio"&&_this2.audioDisabled_){return true}if(type!==t&&_this2[t+"Buffer_"]&&_this2[t+"Buffer_"].updating){return false}return true});if(shouldTrigger){return _this2.trigger(event)}})})})}},{key:"appendBuffer",value:function appendBuffer(segment){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var audioBuffered=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:audioBuffered.end(audioBuffered.length-1)})}if(this.videoBuffer_){this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:gopsSafeToAlignWith(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)})}this.transmuxer_.postMessage({action:"push",data:segment.buffer,byteOffset:segment.byteOffset,byteLength:segment.byteLength},[segment.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function appendGopInfo_(event){this.gopBuffer_=updateGopBuffer(this.gopBuffer_,event.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function remove(start,end){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(start,end);this.gopBuffer_=removeGopBuffer(this.gopBuffer_,start,end,this.timeMapping_)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(start,end)}removeCuesFromTrack(start,end,this.metadataTrack_);if(this.inbandTextTracks_){for(var track in this.inbandTextTracks_){removeCuesFromTrack(start,end,this.inbandTextTracks_[track])}}}},{key:"processPendingSegments_",value:function processPendingSegments_(){var sortedSegments={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};sortedSegments=this.pendingBuffers_.reduce(function(segmentObj,segment){var type=segment.type;var data=segment.data;var initSegment=segment.initSegment;segmentObj[type].segments.push(data);segmentObj[type].bytes+=data.byteLength;segmentObj[type].initSegment=initSegment;if(segment.captions){segmentObj.captions=segmentObj.captions.concat(segment.captions)}if(segment.info){segmentObj[type].info=segment.info}if(segment.metadata){segmentObj.metadata=segmentObj.metadata.concat(segment.metadata)}return segmentObj},sortedSegments);if(!this.videoBuffer_&&!this.audioBuffer_){if(sortedSegments.video.bytes===0){this.videoCodec_=null}if(sortedSegments.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(sortedSegments.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:sortedSegments.audio.info})}if(sortedSegments.video.info){this.mediaSource_.trigger({type:"videoinfo",info:sortedSegments.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){sortedSegments.audio.segments.unshift(sortedSegments.audio.initSegment);sortedSegments.audio.bytes+=sortedSegments.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}var triggerUpdateend=false;if(this.videoBuffer_&&sortedSegments.video.bytes){sortedSegments.video.segments.unshift(sortedSegments.video.initSegment);sortedSegments.video.bytes+=sortedSegments.video.initSegment.byteLength;this.concatAndAppendSegments_(sortedSegments.video,this.videoBuffer_)}else if(this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)){triggerUpdateend=true}addTextTrackData(this,sortedSegments.captions,sortedSegments.metadata);if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(sortedSegments.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;if(triggerUpdateend){this.trigger("updateend")}this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function concatAndAppendSegments_(segmentObj,destinationBuffer){var offset=0;var tempBuffer=void 0;if(segmentObj.bytes){tempBuffer=new Uint8Array(segmentObj.bytes);segmentObj.segments.forEach(function(segment){tempBuffer.set(segment,offset);offset+=segment.byteLength});try{destinationBuffer.updating=true;destinationBuffer.appendBuffer(tempBuffer)}catch(error){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:error.message,originalError:error})}}}}},{key:"abort",value:function abort(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}}]);return VirtualSourceBuffer}(videojs$1.EventTarget);var HtmlMediaSource=function(_videojs$EventTarget){inherits$1(HtmlMediaSource,_videojs$EventTarget);function HtmlMediaSource(){classCallCheck$1(this,HtmlMediaSource);var _this=possibleConstructorReturn$1(this,(HtmlMediaSource.__proto__||Object.getPrototypeOf(HtmlMediaSource)).call(this));var property=void 0;_this.nativeMediaSource_=new window_1.MediaSource;for(property in _this.nativeMediaSource_){if(!(property in HtmlMediaSource.prototype)&&typeof _this.nativeMediaSource_[property]==="function"){_this[property]=_this.nativeMediaSource_[property].bind(_this.nativeMediaSource_)}}_this.duration_=NaN;Object.defineProperty(_this,"duration",{get:function get$$1(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function set$$1(duration){this.duration_=duration;if(duration!==Infinity){this.nativeMediaSource_.duration=duration;return}}});Object.defineProperty(_this,"seekable",{get:function get$$1(){if(this.duration_===Infinity){return videojs$1.createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(_this,"readyState",{get:function get$$1(){return this.nativeMediaSource_.readyState}});Object.defineProperty(_this,"activeSourceBuffers",{get:function get$$1(){return this.activeSourceBuffers_}});_this.sourceBuffers=[];_this.activeSourceBuffers_=[];_this.updateActiveSourceBuffers_=function(){_this.activeSourceBuffers_.length=0;if(_this.sourceBuffers.length===1){var sourceBuffer=_this.sourceBuffers[0];sourceBuffer.appendAudioInitSegment_=true;sourceBuffer.audioDisabled_=!sourceBuffer.audioCodec_;_this.activeSourceBuffers_.push(sourceBuffer);return}var disableCombined=false;var disableAudioOnly=true;for(var i=0;i<_this.player_.audioTracks().length;i++){var track=_this.player_.audioTracks()[i];if(track.enabled&&track.kind!=="main"){disableCombined=true;disableAudioOnly=false;break}}_this.sourceBuffers.forEach(function(sourceBuffer,index){sourceBuffer.appendAudioInitSegment_=true;if(sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=disableCombined}else if(sourceBuffer.videoCodec_&&!sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=true;disableAudioOnly=false}else if(!sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=index?disableAudioOnly:!disableAudioOnly;if(sourceBuffer.audioDisabled_){return}}_this.activeSourceBuffers_.push(sourceBuffer)})};_this.onPlayerMediachange_=function(){_this.sourceBuffers.forEach(function(sourceBuffer){sourceBuffer.appendAudioInitSegment_=true})};_this.onHlsReset_=function(){_this.sourceBuffers.forEach(function(sourceBuffer){if(sourceBuffer.transmuxer_){sourceBuffer.transmuxer_.postMessage({action:"resetCaptions"})}})};_this.onHlsSegmentTimeMapping_=function(event){_this.sourceBuffers.forEach(function(buffer){return buffer.timeMapping_=event.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(eventName){this.nativeMediaSource_.addEventListener(eventName,this.trigger.bind(this))},_this);_this.on("sourceopen",function(event){var video=document_1.querySelector('[src="'+_this.url_+'"]');if(!video){return}_this.player_=videojs$1(video.parentNode);if(!_this.player_){return}_this.player_.tech_.on("hls-reset",_this.onHlsReset_);_this.player_.tech_.on("hls-segment-time-mapping",_this.onHlsSegmentTimeMapping_);if(_this.player_.audioTracks&&_this.player_.audioTracks()){_this.player_.audioTracks().on("change",_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on("addtrack",_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on("removetrack",_this.updateActiveSourceBuffers_)}_this.player_.on("mediachange",_this.onPlayerMediachange_)});_this.on("sourceended",function(event){var duration=durationOfVideo(_this.duration);for(var i=0;i<_this.sourceBuffers.length;i++){var sourcebuffer=_this.sourceBuffers[i];var cues=sourcebuffer.metadataTrack_&&sourcebuffer.metadataTrack_.cues;if(cues&&cues.length){cues[cues.length-1].endTime=duration}}});_this.on("sourceclose",function(event){this.sourceBuffers.forEach(function(sourceBuffer){if(sourceBuffer.transmuxer_){sourceBuffer.transmuxer_.terminate()}});this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_)}if(this.player_.tech_&&this.player_.tech_.el_){this.player_.tech_.off("hls-reset",this.onHlsReset_);this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)}});return _this}createClass$1(HtmlMediaSource,[{key:"addSeekableRange_",value:function addSeekableRange_(start,end){var error=void 0;if(this.duration!==Infinity){error=new Error("MediaSource.addSeekableRange() can only be invoked "+"when the duration is Infinity");error.name="InvalidStateError";error.code=11;throw error}if(end>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=end}}},{key:"addSourceBuffer",value:function addSourceBuffer(type){var buffer=void 0;var parsedType=parseContentType(type);if(/^(video|audio)\/mp2t$/i.test(parsedType.type)){var codecs=[];if(parsedType.parameters&&parsedType.parameters.codecs){codecs=parsedType.parameters.codecs.split(",");codecs=translateLegacyCodecs(codecs);codecs=codecs.filter(function(codec){return isAudioCodec(codec)||isVideoCodec(codec)})}if(codecs.length===0){codecs=["avc1.4d400d","mp4a.40.2"]}buffer=new VirtualSourceBuffer(this,codecs);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();buffer.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{buffer=this.nativeMediaSource_.addSourceBuffer(type)}this.sourceBuffers.push(buffer);return buffer}}]);return HtmlMediaSource}(videojs$1.EventTarget);var urlCount=0;videojs$1.mediaSources={};var open=function open(msObjectURL,swfId){var mediaSource=videojs$1.mediaSources[msObjectURL];if(mediaSource){mediaSource.trigger({type:"sourceopen",swfId:swfId})}else{throw new Error("Media Source not found (Video.js)")}};var supportsNativeMediaSources=function supportsNativeMediaSources(){return!!window_1.MediaSource&&!!window_1.MediaSource.isTypeSupported&&window_1.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var MediaSource=function MediaSource(){this.MediaSource={open:open,supportsNativeMediaSources:supportsNativeMediaSources};if(supportsNativeMediaSources()){return new HtmlMediaSource}throw new Error("Cannot use create a virtual MediaSource for this video")};MediaSource.open=open;MediaSource.supportsNativeMediaSources=supportsNativeMediaSources;var URL$1={createObjectURL:function createObjectURL(object){
var objectUrlPrefix="blob:vjs-media-source/";var url=void 0;if(object instanceof HtmlMediaSource){url=window_1.URL.createObjectURL(object.nativeMediaSource_);object.url_=url;return url}if(!(object instanceof HtmlMediaSource)){url=window_1.URL.createObjectURL(object);object.url_=url;return url}url=objectUrlPrefix+urlCount;urlCount++;videojs$1.mediaSources[url]=object;return url}};videojs$1.MediaSource=MediaSource;videojs$1.URL=URL$1;var EventTarget$1$1=videojs$1.EventTarget,mergeOptions$2=videojs$1.mergeOptions;var updateMaster$1=function updateMaster$$1(oldMaster,newMaster){var noChanges=void 0;var update=mergeOptions$2(oldMaster,{duration:newMaster.duration,minimumUpdatePeriod:newMaster.minimumUpdatePeriod});for(var i=0;i<newMaster.playlists.length;i++){var playlistUpdate=updateMaster(update,newMaster.playlists[i]);if(playlistUpdate){update=playlistUpdate}else{noChanges=true}}forEachMediaGroup(newMaster,function(properties,type,group,label){if(properties.playlists&&properties.playlists.length){var uri=properties.playlists[0].uri;var _playlistUpdate=updateMaster(update,properties.playlists[0]);if(_playlistUpdate){update=_playlistUpdate;update.mediaGroups[type][group][label].playlists[0]=update.playlists[uri];noChanges=false}}});if(noChanges){return null}return update};var DashPlaylistLoader=function(_EventTarget){inherits$1(DashPlaylistLoader,_EventTarget);function DashPlaylistLoader(srcUrlOrPlaylist,hls){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var masterPlaylistLoader=arguments[3];classCallCheck$1(this,DashPlaylistLoader);var _this=possibleConstructorReturn$1(this,(DashPlaylistLoader.__proto__||Object.getPrototypeOf(DashPlaylistLoader)).call(this));var _options$withCredenti=options.withCredentials,withCredentials=_options$withCredenti===undefined?false:_options$withCredenti,_options$handleManife=options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===undefined?false:_options$handleManife;_this.hls_=hls;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;if(!srcUrlOrPlaylist){throw new Error("A non-empty playlist URL or playlist is required")}_this.on("minimumUpdatePeriod",function(){_this.refreshXml_()});_this.on("mediaupdatetimeout",function(){_this.refreshMedia_()});_this.state="HAVE_NOTHING";_this.loadedPlaylists_={};if(typeof srcUrlOrPlaylist==="string"){_this.srcUrl=srcUrlOrPlaylist;return possibleConstructorReturn$1(_this)}_this.setupChildLoader(masterPlaylistLoader,srcUrlOrPlaylist);return _this}createClass$1(DashPlaylistLoader,[{key:"setupChildLoader",value:function setupChildLoader(masterPlaylistLoader,playlist){this.masterPlaylistLoader_=masterPlaylistLoader;this.childPlaylist_=playlist}},{key:"dispose",value:function dispose(){this.stopRequest();this.loadedPlaylists_={};window_1.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function hasPendingRequest(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort()}}},{key:"media",value:function media(playlist){if(!playlist){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var startingState=this.state;if(typeof playlist==="string"){if(!this.master.playlists[playlist]){throw new Error("Unknown playlist URI: "+playlist)}playlist=this.master.playlists[playlist]}var mediaChange=!this.media_||playlist.uri!==this.media_.uri;if(mediaChange&&this.loadedPlaylists_[playlist.uri]&&this.loadedPlaylists_[playlist.uri].endList){this.state="HAVE_METADATA";this.media_=playlist;if(mediaChange){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!mediaChange){return}if(this.media_){this.trigger("mediachanging")}this.mediaRequest_=window_1.setTimeout(this.haveMetadata.bind(this,{startingState:startingState,playlist:playlist}),0)}},{key:"haveMetadata",value:function haveMetadata(_ref){var startingState=_ref.startingState,playlist=_ref.playlist;this.state="HAVE_METADATA";this.media_=playlist;this.loadedPlaylists_[playlist.uri]=playlist;this.mediaRequest_=null;this.refreshMedia_();if(startingState==="HAVE_MASTER"){this.trigger("loadedmetadata")}else{this.trigger("mediachange")}}},{key:"pause",value:function pause(){this.stopRequest();window_1.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}}},{key:"load",value:function load(isFinalRendition){var _this2=this;window_1.clearTimeout(this.mediaUpdateTimeout);var media=this.media();if(isFinalRendition){var delay=media?media.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=window_1.setTimeout(function(){return _this2.load()},delay);return}if(!this.started){this.start();return}this.trigger("loadedplaylist")}},{key:"parseMasterXml",value:function parseMasterXml(){var master=parse(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});master.uri=this.srcUrl;for(var i=0;i<master.playlists.length;i++){var phonyUri="placeholder-uri-"+i;master.playlists[i].uri=phonyUri;master.playlists[phonyUri]=master.playlists[i]}forEachMediaGroup(master,function(properties,mediaType,groupKey,labelKey){if(properties.playlists&&properties.playlists.length){var _phonyUri="placeholder-uri-"+mediaType+"-"+groupKey+"-"+labelKey;properties.playlists[0].uri=_phonyUri;master.playlists[_phonyUri]=properties.playlists[0]}});setupMediaPlaylists(master);resolveMediaGroupUris(master);return master}},{key:"start",value:function start(){var _this3=this;this.started=true;if(this.masterPlaylistLoader_){this.mediaRequest_=window_1.setTimeout(this.haveMaster_.bind(this),0);return}this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(error,req){if(!_this3.request){return}_this3.request=null;if(error){_this3.error={status:req.status,message:"DASH playlist request error at URL: "+_this3.srcUrl,responseText:req.responseText,code:2};if(_this3.state==="HAVE_NOTHING"){_this3.started=false}return _this3.trigger("error")}_this3.masterXml_=req.responseText;if(req.responseHeaders&&req.responseHeaders.date){_this3.masterLoaded_=Date.parse(req.responseHeaders.date)}else{_this3.masterLoaded_=Date.now()}_this3.srcUrl=resolveManifestRedirect(_this3.handleManifestRedirects,_this3.srcUrl,req);_this3.syncClientServerClock_(_this3.onClientServerClockSync_.bind(_this3))})}},{key:"syncClientServerClock_",value:function syncClientServerClock_(done){var _this4=this;var utcTiming=parseUTCTiming(this.masterXml_);if(utcTiming===null){this.clientOffset_=this.masterLoaded_-Date.now();return done()}if(utcTiming.method==="DIRECT"){this.clientOffset_=utcTiming.value-Date.now();return done()}this.request=this.hls_.xhr({uri:resolveUrl$1(this.srcUrl,utcTiming.value),method:utcTiming.method,withCredentials:this.withCredentials},function(error,req){if(!_this4.request){return}if(error){_this4.clientOffset_=_this4.masterLoaded_-Date.now();return done()}var serverTime=void 0;if(utcTiming.method==="HEAD"){if(!req.responseHeaders||!req.responseHeaders.date){serverTime=_this4.masterLoaded_}else{serverTime=Date.parse(req.responseHeaders.date)}}else{serverTime=Date.parse(req.responseText)}_this4.clientOffset_=serverTime-Date.now();done()})}},{key:"haveMaster_",value:function haveMaster_(){this.state="HAVE_MASTER";this.mediaRequest_=null;if(!this.masterPlaylistLoader_){this.master=this.parseMasterXml();this.trigger("loadedplaylist")}else if(!this.media_){this.media(this.childPlaylist_)}}},{key:"onClientServerClockSync_",value:function onClientServerClockSync_(){var _this5=this;this.haveMaster_();if(!this.hasPendingRequest()&&!this.media_){this.media(this.master.playlists[0])}if(this.master&&this.master.minimumUpdatePeriod){window_1.setTimeout(function(){_this5.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}}},{key:"refreshXml_",value:function refreshXml_(){var _this6=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(error,req){if(!_this6.request){return}_this6.request=null;if(error){_this6.error={status:req.status,message:"DASH playlist request error at URL: "+_this6.srcUrl,responseText:req.responseText,code:2};if(_this6.state==="HAVE_NOTHING"){_this6.started=false}return _this6.trigger("error")}_this6.masterXml_=req.responseText;var newMaster=_this6.parseMasterXml();var updatedMaster=updateMaster$1(_this6.master,newMaster);if(updatedMaster){_this6.master=updatedMaster}window_1.setTimeout(function(){_this6.trigger("minimumUpdatePeriod")},_this6.master.minimumUpdatePeriod)})}},{key:"refreshMedia_",value:function refreshMedia_(){var _this7=this;var oldMaster=void 0;var newMaster=void 0;if(this.masterPlaylistLoader_){oldMaster=this.masterPlaylistLoader_.master;newMaster=this.masterPlaylistLoader_.parseMasterXml()}else{oldMaster=this.master;newMaster=this.parseMasterXml()}var updatedMaster=updateMaster$1(oldMaster,newMaster);if(updatedMaster){if(this.masterPlaylistLoader_){this.masterPlaylistLoader_.master=updatedMaster}else{this.master=updatedMaster}this.media_=updatedMaster.playlists[this.media_.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){this.mediaUpdateTimeout=window_1.setTimeout(function(){_this7.trigger("mediaupdatetimeout")},refreshDelay(this.media(),!!updatedMaster))}this.trigger("loadedplaylist")}}]);return DashPlaylistLoader}(EventTarget$1$1);var logger=function logger(source){if(videojs$1.log.debug){return videojs$1.log.debug.bind(videojs$1,"VHS:",source+" >")}return function(){}};function noop$1(){}var SourceUpdater=function(){function SourceUpdater(mediaSource,mimeType,type,sourceBufferEmitter){classCallCheck$1(this,SourceUpdater);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=mediaSource;this.processedAppend_=false;this.type_=type;this.mimeType_=mimeType;this.logger_=logger("SourceUpdater["+type+"]["+mimeType+"]");if(mediaSource.readyState==="closed"){mediaSource.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,mimeType,sourceBufferEmitter))}else{this.createSourceBuffer_(mimeType,sourceBufferEmitter)}}createClass$1(SourceUpdater,[{key:"createSourceBuffer_",value:function createSourceBuffer_(mimeType,sourceBufferEmitter){var _this=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(mimeType);this.logger_("created SourceBuffer");if(sourceBufferEmitter){sourceBufferEmitter.trigger("sourcebufferadded");if(this.mediaSource.sourceBuffers.length<2){sourceBufferEmitter.on("sourcebufferadded",function(){_this.start_()});return}}this.start_()}},{key:"start_",value:function start_(){var _this2=this;this.started_=true;this.onUpdateendCallback_=function(){var pendingCallback=_this2.pendingCallback_;_this2.pendingCallback_=null;_this2.logger_("buffered ["+printableRange(_this2.buffered())+"]");if(pendingCallback){pendingCallback()}_this2.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function abort(done){var _this3=this;if(this.processedAppend_){this.queueCallback_(function(){_this3.sourceBuffer_.abort()},done)}}},{key:"appendBuffer",value:function appendBuffer(config,done){var _this4=this;this.processedAppend_=true;this.queueCallback_(function(){if(config.videoSegmentTimingInfoCallback){_this4.sourceBuffer_.addEventListener("videoSegmentTimingInfo",config.videoSegmentTimingInfoCallback)}_this4.sourceBuffer_.appendBuffer(config.bytes)},function(){if(config.videoSegmentTimingInfoCallback){_this4.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",config.videoSegmentTimingInfoCallback)}done()})}},{key:"buffered",value:function buffered(){if(!this.sourceBuffer_){return videojs$1.createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function remove(start,end){var _this5=this;var done=arguments.length>2&&arguments[2]!==undefined?arguments[2]:noop$1;if(this.processedAppend_){this.queueCallback_(function(){_this5.logger_("remove ["+start+" => "+end+"]");_this5.sourceBuffer_.remove(start,end)},done)}}},{key:"updating",value:function updating(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==noop$1}},{key:"timestampOffset",value:function timestampOffset(offset){var _this6=this;if(typeof offset!=="undefined"){this.queueCallback_(function(){_this6.sourceBuffer_.timestampOffset=offset});this.timestampOffset_=offset}return this.timestampOffset_}},{key:"queueCallback_",value:function queueCallback_(callback,done){this.callbacks_.push([callback.bind(this),done]);this.runCallback_()}},{key:"runCallback_",value:function runCallback_(){var callbacks=void 0;if(!this.updating()&&this.callbacks_.length&&this.started_){callbacks=this.callbacks_.shift();this.pendingCallback_=callbacks[1];callbacks[0]()}}},{key:"dispose",value:function dispose(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==="open"){this.sourceBuffer_.abort()}}}]);return SourceUpdater}();var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};var REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102};var byterangeStr=function byterangeStr(byterange){var byterangeStart=void 0;var byterangeEnd=void 0;byterangeEnd=byterange.offset+byterange.length-1;byterangeStart=byterange.offset;return"bytes="+byterangeStart+"-"+byterangeEnd};var segmentXhrHeaders=function segmentXhrHeaders(segment){var headers={};if(segment.byterange){headers.Range=byterangeStr(segment.byterange)}return headers};var abortAll=function abortAll(activeXhrs){activeXhrs.forEach(function(xhr$$1){xhr$$1.abort()})};var getRequestStats=function getRequestStats(request){return{bandwidth:request.bandwidth,bytesReceived:request.bytesReceived||0,roundTripTime:request.roundTripTime||0}};var getProgressStats=function getProgressStats(progressEvent){var request=progressEvent.target;var roundTripTime=Date.now()-request.requestTime;var stats={bandwidth:Infinity,bytesReceived:0,roundTripTime:roundTripTime||0};stats.bytesReceived=progressEvent.loaded;stats.bandwidth=Math.floor(stats.bytesReceived/stats.roundTripTime*8*1e3);return stats};var handleErrors=function handleErrors(error,request){if(request.timedout){return{status:request.status,message:"HLS request timed-out at URL: "+request.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:request}}if(request.aborted){return{status:request.status,message:"HLS request aborted at URL: "+request.uri,code:REQUEST_ERRORS.ABORTED,xhr:request}}if(error){return{status:request.status,message:"HLS request errored at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request}}return null};var handleKeyResponse=function handleKeyResponse(segment,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment)}if(response.byteLength!==16){return finishProcessingFn({status:request.status,message:"Invalid HLS key at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment)}var view=new DataView(response);segment.key.bytes=new Uint32Array([view.getUint32(0),view.getUint32(4),view.getUint32(8),view.getUint32(12)]);return finishProcessingFn(null,segment)}};var handleInitSegmentResponse=function handleInitSegmentResponse(segment,captionParser,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment)}if(response.byteLength===0){return finishProcessingFn({status:request.status,message:"Empty HLS segment content at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment)}segment.map.bytes=new Uint8Array(request.response);if(!captionParser.isInitialized()){captionParser.init()}segment.map.timescales=probe.timescale(segment.map.bytes);segment.map.videoTrackIds=probe.videoTrackIds(segment.map.bytes);return finishProcessingFn(null,segment)}};var handleSegmentResponse=function handleSegmentResponse(segment,captionParser,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);var parsed=void 0;if(errorObj){return finishProcessingFn(errorObj,segment)}if(response.byteLength===0){return finishProcessingFn({status:request.status,message:"Empty HLS segment content at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment)}segment.stats=getRequestStats(request);if(segment.key){segment.encryptedBytes=new Uint8Array(request.response)}else{segment.bytes=new Uint8Array(request.response)}if(segment.map&&segment.map.bytes){if(!captionParser.isInitialized()){captionParser.init()}parsed=captionParser.parse(segment.bytes,segment.map.videoTrackIds,segment.map.timescales);if(parsed&&parsed.captions){segment.captionStreams=parsed.captionStreams;segment.fmp4Captions=parsed.captions}}return finishProcessingFn(null,segment)}};var decryptSegment=function decryptSegment(decrypter,segment,doneFn){var decryptionHandler=function decryptionHandler(event){if(event.data.source===segment.requestId){decrypter.removeEventListener("message",decryptionHandler);var decrypted=event.data.decrypted;segment.bytes=new Uint8Array(decrypted.bytes,decrypted.byteOffset,decrypted.byteLength);return doneFn(null,segment)}};decrypter.addEventListener("message",decryptionHandler);decrypter.postMessage(createTransferableMessage({source:segment.requestId,encrypted:segment.encryptedBytes,key:segment.key.bytes,iv:segment.key.iv}),[segment.encryptedBytes.buffer,segment.key.bytes.buffer])};var waitForCompletion=function waitForCompletion(activeXhrs,decrypter,doneFn){var count=0;var didError=false;return function(error,segment){if(didError){return}if(error){didError=true;abortAll(activeXhrs);return doneFn(error,segment)}count+=1;if(count===activeXhrs.length){segment.endOfAllRequests=Date.now();if(segment.encryptedBytes){return decryptSegment(decrypter,segment,doneFn)}return doneFn(null,segment)}}};var handleProgress=function handleProgress(segment,progressFn){return function(event){segment.stats=videojs$1.mergeOptions(segment.stats,getProgressStats(event));if(!segment.stats.firstBytesReceivedAt&&segment.stats.bytesReceived){segment.stats.firstBytesReceivedAt=Date.now()}return progressFn(event,segment)}};var mediaSegmentRequest=function mediaSegmentRequest(xhr$$1,xhrOptions,decryptionWorker,captionParser,segment,progressFn,doneFn){var activeXhrs=[];var finishProcessingFn=waitForCompletion(activeXhrs,decryptionWorker,doneFn);if(segment.key){var keyRequestOptions=videojs$1.mergeOptions(xhrOptions,{uri:segment.key.resolvedUri,responseType:"arraybuffer"});var keyRequestCallback=handleKeyResponse(segment,finishProcessingFn);var keyXhr=xhr$$1(keyRequestOptions,keyRequestCallback);activeXhrs.push(keyXhr)}if(segment.map&&!segment.map.bytes){var initSegmentOptions=videojs$1.mergeOptions(xhrOptions,{uri:segment.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(segment.map)});var initSegmentRequestCallback=handleInitSegmentResponse(segment,captionParser,finishProcessingFn);var initSegmentXhr=xhr$$1(initSegmentOptions,initSegmentRequestCallback);activeXhrs.push(initSegmentXhr)}var segmentRequestOptions=videojs$1.mergeOptions(xhrOptions,{uri:segment.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(segment)});var segmentRequestCallback=handleSegmentResponse(segment,captionParser,finishProcessingFn);var segmentXhr=xhr$$1(segmentRequestOptions,segmentRequestCallback);segmentXhr.addEventListener("progress",handleProgress(segment,progressFn));activeXhrs.push(segmentXhr);return function(){return abortAll(activeXhrs)}};var safeGetComputedStyle=function safeGetComputedStyle(el,property){var result=void 0;if(!el){return""}result=window_1.getComputedStyle(el);if(!result){return""}return result[property]};var stableSort=function stableSort(array,sortFn){var newArray=array.slice();array.sort(function(left,right){var cmp=sortFn(left,right);if(cmp===0){return newArray.indexOf(left)-newArray.indexOf(right)}return cmp})};var comparePlaylistBandwidth=function comparePlaylistBandwidth(left,right){var leftBandwidth=void 0;var rightBandwidth=void 0;if(left.attributes.BANDWIDTH){leftBandwidth=left.attributes.BANDWIDTH}leftBandwidth=leftBandwidth||window_1.Number.MAX_VALUE;if(right.attributes.BANDWIDTH){rightBandwidth=right.attributes.BANDWIDTH}rightBandwidth=rightBandwidth||window_1.Number.MAX_VALUE;return leftBandwidth-rightBandwidth};var comparePlaylistResolution=function comparePlaylistResolution(left,right){var leftWidth=void 0;var rightWidth=void 0;if(left.attributes.RESOLUTION&&left.attributes.RESOLUTION.width){leftWidth=left.attributes.RESOLUTION.width}leftWidth=leftWidth||window_1.Number.MAX_VALUE;if(right.attributes.RESOLUTION&&right.attributes.RESOLUTION.width){rightWidth=right.attributes.RESOLUTION.width}rightWidth=rightWidth||window_1.Number.MAX_VALUE;if(leftWidth===rightWidth&&left.attributes.BANDWIDTH&&right.attributes.BANDWIDTH){return left.attributes.BANDWIDTH-right.attributes.BANDWIDTH}return leftWidth-rightWidth};var simpleSelector=function simpleSelector(master,playerBandwidth,playerWidth,playerHeight,limitRenditionByPlayerDimensions){var sortedPlaylistReps=master.playlists.map(function(playlist){var width=void 0;var height=void 0;var bandwidth=void 0;width=playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.width;height=playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.height;bandwidth=playlist.attributes.BANDWIDTH;bandwidth=bandwidth||window_1.Number.MAX_VALUE;return{bandwidth:bandwidth,width:width,height:height,playlist:playlist}});stableSort(sortedPlaylistReps,function(left,right){return left.bandwidth-right.bandwidth});sortedPlaylistReps=sortedPlaylistReps.filter(function(rep){return!Playlist.isIncompatible(rep.playlist)});var enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return Playlist.isEnabled(rep.playlist)});if(!enabledPlaylistReps.length){enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return!Playlist.isDisabled(rep.playlist)})}var bandwidthPlaylistReps=enabledPlaylistReps.filter(function(rep){return rep.bandwidth*Config.BANDWIDTH_VARIANCE<playerBandwidth});var highestRemainingBandwidthRep=bandwidthPlaylistReps[bandwidthPlaylistReps.length-1];var bandwidthBestRep=bandwidthPlaylistReps.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth})[0];if(limitRenditionByPlayerDimensions===false){var _chosenRep=bandwidthBestRep||enabledPlaylistReps[0]||sortedPlaylistReps[0];return _chosenRep?_chosenRep.playlist:null}var haveResolution=bandwidthPlaylistReps.filter(function(rep){return rep.width&&rep.height});stableSort(haveResolution,function(left,right){return left.width-right.width});var resolutionBestRepList=haveResolution.filter(function(rep){return rep.width===playerWidth&&rep.height===playerHeight});highestRemainingBandwidthRep=resolutionBestRepList[resolutionBestRepList.length-1];var resolutionBestRep=resolutionBestRepList.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth})[0];var resolutionPlusOneList=void 0;var resolutionPlusOneSmallest=void 0;var resolutionPlusOneRep=void 0;if(!resolutionBestRep){resolutionPlusOneList=haveResolution.filter(function(rep){return rep.width>playerWidth||rep.height>playerHeight});resolutionPlusOneSmallest=resolutionPlusOneList.filter(function(rep){return rep.width===resolutionPlusOneList[0].width&&rep.height===resolutionPlusOneList[0].height});highestRemainingBandwidthRep=resolutionPlusOneSmallest[resolutionPlusOneSmallest.length-1];resolutionPlusOneRep=resolutionPlusOneSmallest.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth})[0]}var chosenRep=resolutionPlusOneRep||resolutionBestRep||bandwidthBestRep||enabledPlaylistReps[0]||sortedPlaylistReps[0];return chosenRep?chosenRep.playlist:null};var lastBandwidthSelector=function lastBandwidthSelector(){return simpleSelector(this.playlists.master,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10),parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)};var minRebufferMaxBandwidthSelector=function minRebufferMaxBandwidthSelector(settings){var master=settings.master,currentTime=settings.currentTime,bandwidth=settings.bandwidth,duration$$1=settings.duration,segmentDuration=settings.segmentDuration,timeUntilRebuffer=settings.timeUntilRebuffer,currentTimeline=settings.currentTimeline,syncController=settings.syncController;var compatiblePlaylists=master.playlists.filter(function(playlist){return!Playlist.isIncompatible(playlist)});var enabledPlaylists=compatiblePlaylists.filter(Playlist.isEnabled);if(!enabledPlaylists.length){enabledPlaylists=compatiblePlaylists.filter(function(playlist){return!Playlist.isDisabled(playlist)})}var bandwidthPlaylists=enabledPlaylists.filter(Playlist.hasAttribute.bind(null,"BANDWIDTH"));var rebufferingEstimates=bandwidthPlaylists.map(function(playlist){var syncPoint=syncController.getSyncPoint(playlist,duration$$1,currentTimeline,currentTime);var numRequests=syncPoint?1:2;var requestTimeEstimate=Playlist.estimateSegmentRequestTime(segmentDuration,bandwidth,playlist);var rebufferingImpact=requestTimeEstimate*numRequests-timeUntilRebuffer;return{playlist:playlist,rebufferingImpact:rebufferingImpact}});var noRebufferingPlaylists=rebufferingEstimates.filter(function(estimate){return estimate.rebufferingImpact<=0});stableSort(noRebufferingPlaylists,function(a,b){return comparePlaylistBandwidth(b.playlist,a.playlist)});if(noRebufferingPlaylists.length){return noRebufferingPlaylists[0]}stableSort(rebufferingEstimates,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return rebufferingEstimates[0]||null};var lowestBitrateCompatibleVariantSelector=function lowestBitrateCompatibleVariantSelector(){var playlists=this.playlists.master.playlists.filter(Playlist.isEnabled);stableSort(playlists,function(a,b){return comparePlaylistBandwidth(a,b)});var playlistsWithVideo=playlists.filter(function(playlist){return parseCodecs(playlist.attributes.CODECS).videoCodec});return playlistsWithVideo[0]||null};var createCaptionsTrackIfNotExists=function createCaptionsTrackIfNotExists(inbandTextTracks,tech,captionStreams){for(var trackId in captionStreams){if(!inbandTextTracks[trackId]){tech.trigger({type:"usage",name:"hls-608"});var track=tech.textTracks().getTrackById(trackId);if(track){inbandTextTracks[trackId]=track}else{inbandTextTracks[trackId]=tech.addRemoteTextTrack({kind:"captions",id:trackId,label:trackId},false).track}}}};var addCaptionData=function addCaptionData(_ref){var inbandTextTracks=_ref.inbandTextTracks,captionArray=_ref.captionArray,timestampOffset=_ref.timestampOffset;if(!captionArray){return}var Cue=window.WebKitDataCue||window.VTTCue;captionArray.forEach(function(caption){var track=caption.stream;var startTime=caption.startTime;var endTime=caption.endTime;if(!inbandTextTracks[track]){return}startTime+=timestampOffset;endTime+=timestampOffset;inbandTextTracks[track].addCue(new Cue(startTime,endTime,caption.text))})};var CHECK_BUFFER_DELAY=500;var detectEndOfStream=function detectEndOfStream(playlist,mediaSource,segmentIndex){if(!playlist||!mediaSource){return false}var segments=playlist.segments;var appendedLastSegment=segmentIndex===segments.length;return playlist.endList&&mediaSource.readyState==="open"&&appendedLastSegment};var finite=function finite(num){return typeof num==="number"&&isFinite(num)};var illegalMediaSwitch=function illegalMediaSwitch(loaderType,startingMedia,newSegmentMedia){if(loaderType!=="main"||!startingMedia||!newSegmentMedia){return null}if(!newSegmentMedia.containsAudio&&!newSegmentMedia.containsVideo){return"Neither audio nor video found in segment."}if(startingMedia.containsVideo&&!newSegmentMedia.containsVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!startingMedia.containsVideo&&newSegmentMedia.containsVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};var safeBackBufferTrimTime=function safeBackBufferTrimTime(seekable$$1,currentTime,targetDuration){var removeToTime=void 0;if(seekable$$1.length&&seekable$$1.start(0)>0&&seekable$$1.start(0)<currentTime){removeToTime=seekable$$1.start(0)}else{removeToTime=currentTime-30}return Math.min(removeToTime,currentTime-targetDuration)};var segmentInfoString=function segmentInfoString(segmentInfo){var _segmentInfo$segment=segmentInfo.segment,start=_segmentInfo$segment.start,end=_segmentInfo$segment.end,_segmentInfo$playlist=segmentInfo.playlist,seq=_segmentInfo$playlist.mediaSequence,id=_segmentInfo$playlist.id,_segmentInfo$playlist2=_segmentInfo$playlist.segments,segments=_segmentInfo$playlist2===undefined?[]:_segmentInfo$playlist2,index=segmentInfo.mediaIndex,timeline=segmentInfo.timeline;return["appending ["+index+"] of ["+seq+", "+(seq+segments.length)+"] from playlist ["+id+"]","["+start+" => "+end+"] in timeline ["+timeline+"]"].join(" ")};var SegmentLoader=function(_videojs$EventTarget){inherits$1(SegmentLoader,_videojs$EventTarget);function SegmentLoader(settings){classCallCheck$1(this,SegmentLoader);var _this=possibleConstructorReturn$1(this,(SegmentLoader.__proto__||Object.getPrototypeOf(SegmentLoader)).call(this));if(!settings){throw new TypeError("Initialization settings are required")}if(typeof settings.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!settings.mediaSource){throw new TypeError("No MediaSource specified")}_this.bandwidth=settings.bandwidth;_this.throughput={rate:0,count:0};_this.roundTrip=NaN;_this.resetStats_();_this.mediaIndex=null;_this.hasPlayed_=settings.hasPlayed;_this.currentTime_=settings.currentTime;_this.seekable_=settings.seekable;_this.seeking_=settings.seeking;_this.duration_=settings.duration;_this.mediaSource_=settings.mediaSource;_this.hls_=settings.hls;_this.loaderType_=settings.loaderType;_this.startingMedia_=void 0;_this.segmentMetadataTrack_=settings.segmentMetadataTrack;_this.goalBufferLength_=settings.goalBufferLength;_this.sourceType_=settings.sourceType;_this.inbandTextTracks_=settings.inbandTextTracks;_this.state_="INIT";_this.checkBufferTimeout_=null;_this.error_=void 0;_this.currentTimeline_=-1;_this.pendingSegment_=null;_this.mimeType_=null;_this.sourceUpdater_=null;_this.xhrOptions_=null;_this.activeInitSegmentId_=null;_this.initSegments_={};_this.captionParser_=new mp4_6;_this.decrypter_=settings.decrypter;_this.syncController_=settings.syncController;_this.syncPoint_={segmentIndex:0,time:0};_this.syncController_.on("syncinfoupdate",function(){return _this.trigger("syncinfoupdate")});_this.mediaSource_.addEventListener("sourceopen",function(){return _this.ended_=false});_this.fetchAtBuffer_=false;_this.logger_=logger("SegmentLoader["+_this.loaderType_+"]");Object.defineProperty(_this,"state",{get:function get$$1(){return this.state_},set:function set$$1(newState){if(newState!==this.state_){this.logger_(this.state_+" -> "+newState);this.state_=newState}}});return _this}createClass$1(SegmentLoader,[{key:"resetStats_",value:function resetStats_(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function dispose(){this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_();
this.captionParser_.reset()}},{key:"abort",value:function abort(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function abort_(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function error(_error){if(typeof _error!=="undefined"){this.error_=_error}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function endOfStream(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function buffered_(){if(!this.sourceUpdater_){return videojs$1.createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function initSegment(map){var set$$1=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!map){return null}var id=initSegmentId(map);var storedMap=this.initSegments_[id];if(set$$1&&!storedMap&&map.bytes){this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:map.bytes,timescales:map.timescales,videoTrackIds:map.videoTrackIds}}return storedMap||map}},{key:"couldBeginLoading_",value:function couldBeginLoading_(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function load(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function init_(){this.state="READY";this.sourceUpdater_=new SourceUpdater(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function playlist(newPlaylist){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!newPlaylist){return}var oldPlaylist=this.playlist_;var segmentInfo=this.pendingSegment_;this.playlist_=newPlaylist;this.xhrOptions_=options;if(!this.hasPlayed_()){newPlaylist.syncInfo={mediaSequence:newPlaylist.mediaSequence,time:0}}var oldId=null;if(oldPlaylist){if(oldPlaylist.id){oldId=oldPlaylist.id}else if(oldPlaylist.uri){oldId=oldPlaylist.uri}}this.logger_("playlist update ["+oldId+" => "+(newPlaylist.id||newPlaylist.uri)+"]");this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!oldPlaylist||oldPlaylist.uri!==newPlaylist.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;this.logger_("live window shift ["+mediaSequenceDiff+"]");if(this.mediaIndex!==null){this.mediaIndex-=mediaSequenceDiff}if(segmentInfo){segmentInfo.mediaIndex-=mediaSequenceDiff;if(segmentInfo.mediaIndex>=0){segmentInfo.segment=newPlaylist.segments[segmentInfo.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(oldPlaylist,newPlaylist)}},{key:"pause",value:function pause(){if(this.checkBufferTimeout_){window_1.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function paused(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function mimeType(_mimeType,sourceBufferEmitter){if(this.mimeType_){return}this.mimeType_=_mimeType;this.sourceBufferEmitter_=sourceBufferEmitter;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function resetEverything(done){this.ended_=false;this.resetLoader();this.remove(0,this.duration_(),done);this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function resetLoader(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function resyncLoader(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function remove(start,end,done){if(this.sourceUpdater_){this.sourceUpdater_.remove(start,end,done)}removeCuesFromTrack(start,end,this.segmentMetadataTrack_);if(this.inbandTextTracks_){for(var id in this.inbandTextTracks_){removeCuesFromTrack(start,end,this.inbandTextTracks_[id])}}}},{key:"monitorBuffer_",value:function monitorBuffer_(){if(this.checkBufferTimeout_){window_1.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=window_1.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function monitorBufferTick_(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){window_1.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=window_1.setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY)}},{key:"fillBuffer_",value:function fillBuffer_(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var segmentInfo=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!segmentInfo){return}if(this.isEndOfStream_(segmentInfo.mediaIndex)){this.endOfStream();return}if(segmentInfo.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(segmentInfo.timeline!==this.currentTimeline_||segmentInfo.startOfSegment!==null&&segmentInfo.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();segmentInfo.timestampOffset=segmentInfo.startOfSegment;this.captionParser_.clearAllCaptions()}this.loadSegment_(segmentInfo)}},{key:"isEndOfStream_",value:function isEndOfStream_(mediaIndex){var playlist=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.playlist_;return detectEndOfStream(playlist,this.mediaSource_,mediaIndex)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function checkBuffer_(buffered,playlist,mediaIndex,hasPlayed,currentTime,syncPoint){var lastBufferedEnd=0;var startOfSegment=void 0;if(buffered.length){lastBufferedEnd=buffered.end(buffered.length-1)}var bufferedTime=Math.max(0,lastBufferedEnd-currentTime);if(!playlist.segments.length){return null}if(bufferedTime>=this.goalBufferLength_()){return null}if(!hasPlayed&&bufferedTime>=1){return null}if(syncPoint===null){mediaIndex=this.getSyncSegmentCandidate_(playlist);return this.generateSegmentInfo_(playlist,mediaIndex,null,true)}if(mediaIndex!==null){var segment=playlist.segments[mediaIndex];if(segment&&segment.end){startOfSegment=segment.end}else{startOfSegment=lastBufferedEnd}return this.generateSegmentInfo_(playlist,mediaIndex+1,startOfSegment,false)}if(this.fetchAtBuffer_){var mediaSourceInfo=Playlist.getMediaInfoForTime(playlist,lastBufferedEnd,syncPoint.segmentIndex,syncPoint.time);mediaIndex=mediaSourceInfo.mediaIndex;startOfSegment=mediaSourceInfo.startTime}else{var _mediaSourceInfo=Playlist.getMediaInfoForTime(playlist,currentTime,syncPoint.segmentIndex,syncPoint.time);mediaIndex=_mediaSourceInfo.mediaIndex;startOfSegment=_mediaSourceInfo.startTime}return this.generateSegmentInfo_(playlist,mediaIndex,startOfSegment,false)}},{key:"getSyncSegmentCandidate_",value:function getSyncSegmentCandidate_(playlist){var _this2=this;if(this.currentTimeline_===-1){return 0}var segmentIndexArray=playlist.segments.map(function(s,i){return{timeline:s.timeline,segmentIndex:i}}).filter(function(s){return s.timeline===_this2.currentTimeline_});if(segmentIndexArray.length){return segmentIndexArray[Math.min(segmentIndexArray.length-1,1)].segmentIndex}return Math.max(playlist.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function generateSegmentInfo_(playlist,mediaIndex,startOfSegment,isSyncRequest){if(mediaIndex<0||mediaIndex>=playlist.segments.length){return null}var segment=playlist.segments[mediaIndex];return{requestId:"segment-loader-"+Math.random(),uri:segment.resolvedUri,mediaIndex:mediaIndex,isSyncRequest:isSyncRequest,startOfSegment:startOfSegment,playlist:playlist,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:segment.timeline,duration:segment.duration,segment:segment}}},{key:"abortRequestEarly_",value:function abortRequestEarly_(stats){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(stats.firstBytesReceivedAt||Date.now())<1e3){return false}var currentTime=this.currentTime_();var measuredBandwidth=stats.bandwidth;var segmentDuration=this.pendingSegment_.duration;var requestTimeRemaining=Playlist.estimateSegmentRequestTime(segmentDuration,measuredBandwidth,this.playlist_,stats.bytesReceived);var timeUntilRebuffer$$1=timeUntilRebuffer(this.buffered_(),currentTime,this.hls_.tech_.playbackRate())-1;if(requestTimeRemaining<=timeUntilRebuffer$$1){return false}var switchCandidate=minRebufferMaxBandwidthSelector({master:this.hls_.playlists.master,currentTime:currentTime,bandwidth:measuredBandwidth,duration:this.duration_(),segmentDuration:segmentDuration,timeUntilRebuffer:timeUntilRebuffer$$1,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!switchCandidate){return}var rebufferingImpact=requestTimeRemaining-timeUntilRebuffer$$1;var timeSavedBySwitching=rebufferingImpact-switchCandidate.rebufferingImpact;var minimumTimeSaving=.5;if(timeUntilRebuffer$$1<=TIME_FUDGE_FACTOR){minimumTimeSaving=1}if(!switchCandidate.playlist||switchCandidate.playlist.uri===this.playlist_.uri||timeSavedBySwitching<minimumTimeSaving){return false}this.bandwidth=switchCandidate.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function handleProgress_(event,simpleSegment){if(!this.pendingSegment_||simpleSegment.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(simpleSegment.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function loadSegment_(segmentInfo){this.state="WAITING";this.pendingSegment_=segmentInfo;this.trimBackBuffer_(segmentInfo);segmentInfo.abortRequests=mediaSegmentRequest(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(segmentInfo),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function trimBackBuffer_(segmentInfo){var removeToTime=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(removeToTime>0){this.remove(0,removeToTime)}}},{key:"createSimplifiedSegmentObj_",value:function createSimplifiedSegmentObj_(segmentInfo){var segment=segmentInfo.segment;var simpleSegment={resolvedUri:segment.resolvedUri,byterange:segment.byterange,requestId:segmentInfo.requestId};if(segment.key){var iv=segment.key.iv||new Uint32Array([0,0,0,segmentInfo.mediaIndex+segmentInfo.playlist.mediaSequence]);simpleSegment.key={resolvedUri:segment.key.resolvedUri,iv:iv}}if(segment.map){simpleSegment.map=this.initSegment(segment.map)}return simpleSegment}},{key:"segmentRequestFinished_",value:function segmentRequestFinished_(error,simpleSegment){this.mediaRequests+=1;if(simpleSegment.stats){this.mediaBytesTransferred+=simpleSegment.stats.bytesReceived;this.mediaTransferDuration+=simpleSegment.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(simpleSegment.requestId!==this.pendingSegment_.requestId){return}if(error){this.pendingSegment_=null;this.state="READY";if(error.code===REQUEST_ERRORS.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(error.code===REQUEST_ERRORS.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(error);this.trigger("error");return}this.bandwidth=simpleSegment.stats.bandwidth;this.roundTrip=simpleSegment.stats.roundTripTime;if(simpleSegment.map){simpleSegment.map=this.initSegment(simpleSegment.map,true)}this.processSegmentResponse_(simpleSegment)}},{key:"processSegmentResponse_",value:function processSegmentResponse_(simpleSegment){var segmentInfo=this.pendingSegment_;segmentInfo.bytes=simpleSegment.bytes;if(simpleSegment.map){segmentInfo.segment.map.bytes=simpleSegment.map.bytes}segmentInfo.endOfAllRequests=simpleSegment.endOfAllRequests;if(simpleSegment.fmp4Captions){createCaptionsTrackIfNotExists(this.inbandTextTracks_,this.hls_.tech_,simpleSegment.captionStreams);addCaptionData({inbandTextTracks:this.inbandTextTracks_,captionArray:simpleSegment.fmp4Captions,timestampOffset:0});this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function handleSegment_(){var _this3=this;if(!this.pendingSegment_){this.state="READY";return}var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;var timingInfo=this.syncController_.probeSegmentInfo(segmentInfo);if(typeof this.startingMedia_==="undefined"&&timingInfo&&(timingInfo.containsAudio||timingInfo.containsVideo)){this.startingMedia_={containsAudio:timingInfo.containsAudio,containsVideo:timingInfo.containsVideo}}var illegalMediaSwitchError=illegalMediaSwitch(this.loaderType_,this.startingMedia_,timingInfo);if(illegalMediaSwitchError){this.error({message:illegalMediaSwitchError,blacklistDuration:Infinity});this.trigger("error");return}if(segmentInfo.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(segmentInfo.timestampOffset!==null&&segmentInfo.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(segmentInfo.timestampOffset);this.trigger("timestampoffset")}var timelineMapping=this.syncController_.mappingForTimeline(segmentInfo.timeline);if(timelineMapping!==null){this.trigger({type:"segmenttimemapping",mapping:timelineMapping})}this.state="APPENDING";if(segment.map){var initId=initSegmentId(segment.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==initId){var initSegment=this.initSegment(segment.map);this.sourceUpdater_.appendBuffer({bytes:initSegment.bytes},function(){_this3.activeInitSegmentId_=initId})}}segmentInfo.byteLength=segmentInfo.bytes.byteLength;if(typeof segment.start==="number"&&typeof segment.end==="number"){this.mediaSecondsLoaded+=segment.end-segment.start}else{this.mediaSecondsLoaded+=segment.duration}this.logger_(segmentInfoString(segmentInfo));this.sourceUpdater_.appendBuffer({bytes:segmentInfo.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,segmentInfo.requestId)},this.handleUpdateEnd_.bind(this))}},{key:"handleVideoSegmentTimingInfo_",value:function handleVideoSegmentTimingInfo_(requestId,event){if(!this.pendingSegment_||requestId!==this.pendingSegment_.requestId){return}var segment=this.pendingSegment_.segment;if(!segment.videoTimingInfo){segment.videoTimingInfo={}}segment.videoTimingInfo.transmuxerPrependedSeconds=event.videoSegmentTimingInfo.prependedContentDuration||0;segment.videoTimingInfo.transmuxedPresentationStart=event.videoSegmentTimingInfo.start.presentation;segment.videoTimingInfo.transmuxedPresentationEnd=event.videoSegmentTimingInfo.end.presentation;segment.videoTimingInfo.baseMediaDecodeTime=event.videoSegmentTimingInfo.baseMediaDecodeTime}},{key:"handleUpdateEnd_",value:function handleUpdateEnd_(){if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;var isWalkingForward=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(segmentInfo);this.addSegmentMetadataCue_(segmentInfo);this.state="READY";this.mediaIndex=segmentInfo.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=segmentInfo.timeline;this.trigger("syncinfoupdate");if(segment.end&&this.currentTime_()-segment.end>segmentInfo.playlist.targetDuration*3){this.resetEverything();return}if(isWalkingForward){this.trigger("bandwidthupdate")}this.trigger("progress");if(this.isEndOfStream_(segmentInfo.mediaIndex+1,segmentInfo.playlist)){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function recordThroughput_(segmentInfo){var rate=this.throughput.rate;var segmentProcessingTime=Date.now()-segmentInfo.endOfAllRequests+1;var segmentProcessingThroughput=Math.floor(segmentInfo.byteLength/segmentProcessingTime*8*1e3);this.throughput.rate+=(segmentProcessingThroughput-rate)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function addSegmentMetadataCue_(segmentInfo){if(!this.segmentMetadataTrack_){return}var segment=segmentInfo.segment;var start=segment.start;var end=segment.end;if(!finite(start)||!finite(end)){return}removeCuesFromTrack(start,end,this.segmentMetadataTrack_);var Cue=window_1.WebKitDataCue||window_1.VTTCue;var value={custom:segment.custom,dateTimeObject:segment.dateTimeObject,dateTimeString:segment.dateTimeString,bandwidth:segmentInfo.playlist.attributes.BANDWIDTH,resolution:segmentInfo.playlist.attributes.RESOLUTION,codecs:segmentInfo.playlist.attributes.CODECS,byteLength:segmentInfo.byteLength,uri:segmentInfo.uri,timeline:segmentInfo.timeline,playlist:segmentInfo.playlist.uri,start:start,end:end};var data=JSON.stringify(value);var cue=new Cue(start,end,data);cue.value=value;this.segmentMetadataTrack_.addCue(cue)}}]);return SegmentLoader}(videojs$1.EventTarget);var uint8ToUtf8=function uint8ToUtf8(uintArray){return decodeURIComponent(escape(String.fromCharCode.apply(null,uintArray)))};var VTT_LINE_TERMINATORS=new Uint8Array("\n\n".split("").map(function(char){return char.charCodeAt(0)}));var VTTSegmentLoader=function(_SegmentLoader){inherits$1(VTTSegmentLoader,_SegmentLoader);function VTTSegmentLoader(settings){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck$1(this,VTTSegmentLoader);var _this=possibleConstructorReturn$1(this,(VTTSegmentLoader.__proto__||Object.getPrototypeOf(VTTSegmentLoader)).call(this,settings,options));_this.mediaSource_=null;_this.subtitlesTrack_=null;return _this}createClass$1(VTTSegmentLoader,[{key:"buffered_",value:function buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return videojs$1.createTimeRanges()}var cues=this.subtitlesTrack_.cues;var start=cues[0].startTime;var end=cues[cues.length-1].startTime;return videojs$1.createTimeRanges([[start,end]])}},{key:"initSegment",value:function initSegment(map){var set$$1=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!map){return null}var id=initSegmentId(map);var storedMap=this.initSegments_[id];if(set$$1&&!storedMap&&map.bytes){var combinedByteLength=VTT_LINE_TERMINATORS.byteLength+map.bytes.byteLength;var combinedSegment=new Uint8Array(combinedByteLength);combinedSegment.set(map.bytes);combinedSegment.set(VTT_LINE_TERMINATORS,map.bytes.byteLength);this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:combinedSegment}}return storedMap||map}},{key:"couldBeginLoading_",value:function couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function track(_track){if(typeof _track==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=_track;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function remove(start,end){removeCuesFromTrack(start,end,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function fillBuffer_(){var _this2=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var segmentInfo=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);segmentInfo=this.skipEmptySegments_(segmentInfo);if(!segmentInfo){return}if(this.syncController_.timestampOffsetForTimeline(segmentInfo.timeline)===null){var checkTimestampOffset=function checkTimestampOffset(){_this2.state="READY";if(!_this2.paused()){_this2.monitorBuffer_()}};this.syncController_.one("timestampoffset",checkTimestampOffset);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(segmentInfo)}},{key:"skipEmptySegments_",value:function skipEmptySegments_(segmentInfo){while(segmentInfo&&segmentInfo.segment.empty){segmentInfo=this.generateSegmentInfo_(segmentInfo.playlist,segmentInfo.mediaIndex+1,segmentInfo.startOfSegment+segmentInfo.duration,segmentInfo.isSyncRequest)}return segmentInfo}},{key:"handleSegment_",value:function handleSegment_(){var _this3=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;if(typeof window_1.WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var loadHandler=function loadHandler(){_this3.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",loadHandler);this.subtitlesTrack_.tech_.one("vttjserror",function(){_this3.subtitlesTrack_.tech_.off("vttjsloaded",loadHandler);_this3.error({message:"Error loading vtt.js"});_this3.state="READY";_this3.pause();_this3.trigger("error")});return}segment.requested=true;try{this.parseVTTCues_(segmentInfo)}catch(e){this.error({message:e.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(segmentInfo,this.syncController_.timelines[segmentInfo.timeline],this.playlist_);if(segmentInfo.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}segmentInfo.byteLength=segmentInfo.bytes.byteLength;this.mediaSecondsLoaded+=segment.duration;if(segmentInfo.cues.length){this.remove(segmentInfo.cues[0].endTime,segmentInfo.cues[segmentInfo.cues.length-1].endTime)}segmentInfo.cues.forEach(function(cue){_this3.subtitlesTrack_.addCue(cue)});this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function parseVTTCues_(segmentInfo){var decoder=void 0;var decodeBytesToString=false;if(typeof window_1.TextDecoder==="function"){decoder=new window_1.TextDecoder("utf8")}else{decoder=window_1.WebVTT.StringDecoder();decodeBytesToString=true}var parser=new window_1.WebVTT.Parser(window_1,window_1.vttjs,decoder);segmentInfo.cues=[];segmentInfo.timestampmap={MPEGTS:0,LOCAL:0};parser.oncue=segmentInfo.cues.push.bind(segmentInfo.cues);parser.ontimestampmap=function(map){return segmentInfo.timestampmap=map};parser.onparsingerror=function(error){videojs$1.log.warn("Error encountered when parsing cues: "+error.message)};if(segmentInfo.segment.map){var mapData=segmentInfo.segment.map.bytes;if(decodeBytesToString){mapData=uint8ToUtf8(mapData)}parser.parse(mapData)}var segmentData=segmentInfo.bytes;if(decodeBytesToString){segmentData=uint8ToUtf8(segmentData)}parser.parse(segmentData);parser.flush()}},{key:"updateTimeMapping_",value:function updateTimeMapping_(segmentInfo,mappingObj,playlist){var segment=segmentInfo.segment;if(!mappingObj){return}if(!segmentInfo.cues.length){segment.empty=true;return}var timestampmap=segmentInfo.timestampmap;var diff=timestampmap.MPEGTS/9e4-timestampmap.LOCAL+mappingObj.mapping;segmentInfo.cues.forEach(function(cue){cue.startTime+=diff;cue.endTime+=diff});if(!playlist.syncInfo){var firstStart=segmentInfo.cues[0].startTime;var lastStart=segmentInfo.cues[segmentInfo.cues.length-1].startTime;playlist.syncInfo={mediaSequence:playlist.mediaSequence+segmentInfo.mediaIndex,time:Math.min(firstStart,lastStart-segment.duration)}}}}]);return VTTSegmentLoader}(SegmentLoader);var findAdCue=function findAdCue(track,mediaTime){var cues=track.cues;for(var i=0;i<cues.length;i++){var cue=cues[i];if(mediaTime>=cue.adStartTime&&mediaTime<=cue.adEndTime){return cue}}return null};var updateAdCues=function updateAdCues(media,track){var offset=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!media.segments){return}var mediaTime=offset;var cue=void 0;for(var i=0;i<media.segments.length;i++){var segment=media.segments[i];if(!cue){cue=findAdCue(track,mediaTime+segment.duration/2)}if(cue){if("cueIn"in segment){cue.endTime=mediaTime;cue.adEndTime=mediaTime;mediaTime+=segment.duration;cue=null;continue}if(mediaTime<cue.endTime){mediaTime+=segment.duration;continue}cue.endTime+=segment.duration}else{if("cueOut"in segment){cue=new window_1.VTTCue(mediaTime,mediaTime+segment.duration,segment.cueOut);cue.adStartTime=mediaTime;cue.adEndTime=mediaTime+parseFloat(segment.cueOut);track.addCue(cue)}if("cueOutCont"in segment){var adOffset=void 0;var adTotal=void 0;var _segment$cueOutCont$s=segment.cueOutCont.split("/").map(parseFloat);var _segment$cueOutCont$s2=slicedToArray(_segment$cueOutCont$s,2);adOffset=_segment$cueOutCont$s2[0];adTotal=_segment$cueOutCont$s2[1];cue=new window_1.VTTCue(mediaTime,mediaTime+segment.duration,"");cue.adStartTime=mediaTime-adOffset;cue.adEndTime=cue.adStartTime+adTotal;track.addCue(cue)}}mediaTime+=segment.duration}};var tsprobe=tsInspector.inspect;var syncPointStrategies=[{name:"VOD",run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){if(duration$$1!==Infinity){var syncPoint={time:0,segmentIndex:0};return syncPoint}return null}},{name:"ProgramDateTime",run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){if(!syncController.datetimeToDisplayTime){return null}var segments=playlist.segments||[];var syncPoint=null;var lastDistance=null;currentTime=currentTime||0;for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment.dateTimeObject){var segmentTime=segment.dateTimeObject.getTime()/1e3;var segmentStart=segmentTime+syncController.datetimeToDisplayTime;var distance=Math.abs(currentTime-segmentStart);if(lastDistance!==null&&lastDistance<distance){break}lastDistance=distance;syncPoint={time:segmentStart,segmentIndex:i}}}return syncPoint}},{name:"Segment",run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){var segments=playlist.segments||[];var syncPoint=null;var lastDistance=null;currentTime=currentTime||0;for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment.timeline===currentTimeline&&typeof segment.start!=="undefined"){var distance=Math.abs(currentTime-segment.start);if(lastDistance!==null&&lastDistance<distance){break}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:segment.start,segmentIndex:i}}}}return syncPoint}},{name:"Discontinuity",run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){var syncPoint=null;currentTime=currentTime||0;if(playlist.discontinuityStarts&&playlist.discontinuityStarts.length){var lastDistance=null;for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var discontinuitySync=syncController.discontinuities[discontinuity];if(discontinuitySync){var distance=Math.abs(currentTime-discontinuitySync.time);if(lastDistance!==null&&lastDistance<distance){break}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:discontinuitySync.time,segmentIndex:segmentIndex}}}}}return syncPoint}},{name:"Playlist",run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){if(playlist.syncInfo){var syncPoint={time:playlist.syncInfo.time,segmentIndex:playlist.syncInfo.mediaSequence-playlist.mediaSequence};return syncPoint}return null}}];var SyncController=function(_videojs$EventTarget){inherits$1(SyncController,_videojs$EventTarget);function SyncController(){classCallCheck$1(this,SyncController);var _this=possibleConstructorReturn$1(this,(SyncController.__proto__||Object.getPrototypeOf(SyncController)).call(this));_this.inspectCache_=undefined;_this.timelines=[];_this.discontinuities=[];_this.datetimeToDisplayTime=null;_this.logger_=logger("SyncController");return _this}createClass$1(SyncController,[{key:"getSyncPoint",value:function getSyncPoint(playlist,duration$$1,currentTimeline,currentTime){var syncPoints=this.runStrategies_(playlist,duration$$1,currentTimeline,currentTime);if(!syncPoints.length){return null}return this.selectSyncPoint_(syncPoints,{key:"time",value:currentTime})}},{key:"getExpiredTime",value:function getExpiredTime(playlist,duration$$1){if(!playlist||!playlist.segments){return null}var syncPoints=this.runStrategies_(playlist,duration$$1,playlist.discontinuitySequence,0);if(!syncPoints.length){return null}var syncPoint=this.selectSyncPoint_(syncPoints,{key:"segmentIndex",value:0});if(syncPoint.segmentIndex>0){syncPoint.time*=-1}return Math.abs(syncPoint.time+sumDurations(playlist,syncPoint.segmentIndex,0))}},{key:"runStrategies_",value:function runStrategies_(playlist,duration$$1,currentTimeline,currentTime){var syncPoints=[];for(var i=0;i<syncPointStrategies.length;i++){var strategy=syncPointStrategies[i];var syncPoint=strategy.run(this,playlist,duration$$1,currentTimeline,currentTime);if(syncPoint){syncPoint.strategy=strategy.name;syncPoints.push({strategy:strategy.name,syncPoint:syncPoint})}}return syncPoints}},{key:"selectSyncPoint_",value:function selectSyncPoint_(syncPoints,target){var bestSyncPoint=syncPoints[0].syncPoint;var bestDistance=Math.abs(syncPoints[0].syncPoint[target.key]-target.value);var bestStrategy=syncPoints[0].strategy;for(var i=1;i<syncPoints.length;i++){var newDistance=Math.abs(syncPoints[i].syncPoint[target.key]-target.value);if(newDistance<bestDistance){bestDistance=newDistance;bestSyncPoint=syncPoints[i].syncPoint;bestStrategy=syncPoints[i].strategy}}this.logger_("syncPoint for ["+target.key+": "+target.value+"] chosen with strategy"+(" ["+bestStrategy+"]: [time:"+bestSyncPoint.time+",")+(" segmentIndex:"+bestSyncPoint.segmentIndex+"]"));return bestSyncPoint}},{key:"saveExpiredSegmentInfo",value:function saveExpiredSegmentInfo(oldPlaylist,newPlaylist){var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;for(var i=mediaSequenceDiff-1;i>=0;i--){var lastRemovedSegment=oldPlaylist.segments[i];if(lastRemovedSegment&&typeof lastRemovedSegment.start!=="undefined"){newPlaylist.syncInfo={mediaSequence:oldPlaylist.mediaSequence+i,time:lastRemovedSegment.start};this.logger_("playlist refresh sync: [time:"+newPlaylist.syncInfo.time+","+(" mediaSequence: "+newPlaylist.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function setDateTimeMapping(playlist){if(!this.datetimeToDisplayTime&&playlist.segments&&playlist.segments.length&&playlist.segments[0].dateTimeObject){var playlistTimestamp=playlist.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-playlistTimestamp}}},{key:"reset",value:function reset(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function probeSegmentInfo(segmentInfo){var segment=segmentInfo.segment;var playlist=segmentInfo.playlist;var timingInfo=void 0;if(segment.map){timingInfo=this.probeMp4Segment_(segmentInfo)}else{timingInfo=this.probeTsSegment_(segmentInfo)}if(timingInfo){if(this.calculateSegmentTimeMapping_(segmentInfo,timingInfo)){this.saveDiscontinuitySyncInfo_(segmentInfo);if(!playlist.syncInfo){playlist.syncInfo={mediaSequence:playlist.mediaSequence+segmentInfo.mediaIndex,time:segment.start}}}}return timingInfo}},{key:"probeMp4Segment_",value:function probeMp4Segment_(segmentInfo){var segment=segmentInfo.segment;var timescales=probe.timescale(segment.map.bytes);var startTime=probe.startTime(timescales,segmentInfo.bytes);if(segmentInfo.timestampOffset!==null){segmentInfo.timestampOffset-=startTime}return{start:startTime,end:startTime+segment.duration}}},{key:"probeTsSegment_",value:function probeTsSegment_(segmentInfo){var timeInfo=tsprobe(segmentInfo.bytes,this.inspectCache_);var segmentStartTime=void 0;var segmentEndTime=void 0;if(!timeInfo){return null}if(timeInfo.video&&timeInfo.video.length===2){this.inspectCache_=timeInfo.video[1].dts;segmentStartTime=timeInfo.video[0].dtsTime;
segmentEndTime=timeInfo.video[1].dtsTime}else if(timeInfo.audio&&timeInfo.audio.length===2){this.inspectCache_=timeInfo.audio[1].dts;segmentStartTime=timeInfo.audio[0].dtsTime;segmentEndTime=timeInfo.audio[1].dtsTime}var probedInfo={start:segmentStartTime,end:segmentEndTime,containsVideo:timeInfo.video&&timeInfo.video.length===2,containsAudio:timeInfo.audio&&timeInfo.audio.length===2};return probedInfo}},{key:"timestampOffsetForTimeline",value:function timestampOffsetForTimeline(timeline){if(typeof this.timelines[timeline]==="undefined"){return null}return this.timelines[timeline].time}},{key:"mappingForTimeline",value:function mappingForTimeline(timeline){if(typeof this.timelines[timeline]==="undefined"){return null}return this.timelines[timeline].mapping}},{key:"calculateSegmentTimeMapping_",value:function calculateSegmentTimeMapping_(segmentInfo,timingInfo){var segment=segmentInfo.segment;var mappingObj=this.timelines[segmentInfo.timeline];if(segmentInfo.timestampOffset!==null){mappingObj={time:segmentInfo.startOfSegment,mapping:segmentInfo.startOfSegment-timingInfo.start};this.timelines[segmentInfo.timeline]=mappingObj;this.trigger("timestampoffset");this.logger_("time mapping for timeline "+segmentInfo.timeline+": "+("[time: "+mappingObj.time+"] [mapping: "+mappingObj.mapping+"]"));segment.start=segmentInfo.startOfSegment;segment.end=timingInfo.end+mappingObj.mapping}else if(mappingObj){segment.start=timingInfo.start+mappingObj.mapping;segment.end=timingInfo.end+mappingObj.mapping}else{return false}return true}},{key:"saveDiscontinuitySyncInfo_",value:function saveDiscontinuitySyncInfo_(segmentInfo){var playlist=segmentInfo.playlist;var segment=segmentInfo.segment;if(segment.discontinuity){this.discontinuities[segment.timeline]={time:segment.start,accuracy:0}}else if(playlist.discontinuityStarts&&playlist.discontinuityStarts.length){for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var mediaIndexDiff=segmentIndex-segmentInfo.mediaIndex;var accuracy=Math.abs(mediaIndexDiff);if(!this.discontinuities[discontinuity]||this.discontinuities[discontinuity].accuracy>accuracy){var time=void 0;if(mediaIndexDiff<0){time=segment.start-sumDurations(playlist,segmentInfo.mediaIndex,segmentIndex)}else{time=segment.end+sumDurations(playlist,segmentInfo.mediaIndex+1,segmentIndex)}this.discontinuities[discontinuity]={time:time,accuracy:accuracy}}}}}}]);return SyncController}(videojs$1.EventTarget);var Decrypter$1=new shimWorker("./decrypter-worker.worker.js",function(window,document$$1){var self=this;var decrypterWorker=function(){function unpad(padded){return padded.subarray(0,padded.byteLength-padded[padded.byteLength-1])}var classCallCheck=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var inherits=function inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};var possibleConstructorReturn=function possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self};var precompute=function precompute(){var tables=[[[],[],[],[],[]],[[],[],[],[],[]]];var encTable=tables[0];var decTable=tables[1];var sbox=encTable[4];var sboxInv=decTable[4];var i=void 0;var x=void 0;var xInv=void 0;var d=[];var th=[];var x2=void 0;var x4=void 0;var x8=void 0;var s=void 0;var tEnc=void 0;var tDec=void 0;for(i=0;i<256;i++){th[(d[i]=i<<1^(i>>7)*283)^i]=i}for(x=xInv=0;!sbox[x];x^=x2||1,xInv=th[xInv]||1){s=xInv^xInv<<1^xInv<<2^xInv<<3^xInv<<4;s=s>>8^s&255^99;sbox[x]=s;sboxInv[s]=x;x8=d[x4=d[x2=d[x]]];tDec=x8*16843009^x4*65537^x2*257^x*16843008;tEnc=d[s]*257^s*16843008;for(i=0;i<4;i++){encTable[i][x]=tEnc=tEnc<<24^tEnc>>>8;decTable[i][s]=tDec=tDec<<24^tDec>>>8}}for(i=0;i<5;i++){encTable[i]=encTable[i].slice(0);decTable[i]=decTable[i].slice(0)}return tables};var aesTables=null;var AES=function(){function AES(key){classCallCheck(this,AES);if(!aesTables){aesTables=precompute()}this._tables=[[aesTables[0][0].slice(),aesTables[0][1].slice(),aesTables[0][2].slice(),aesTables[0][3].slice(),aesTables[0][4].slice()],[aesTables[1][0].slice(),aesTables[1][1].slice(),aesTables[1][2].slice(),aesTables[1][3].slice(),aesTables[1][4].slice()]];var i=void 0;var j=void 0;var tmp=void 0;var encKey=void 0;var decKey=void 0;var sbox=this._tables[0][4];var decTable=this._tables[1];var keyLen=key.length;var rcon=1;if(keyLen!==4&&keyLen!==6&&keyLen!==8){throw new Error("Invalid aes key size")}encKey=key.slice(0);decKey=[];this._key=[encKey,decKey];for(i=keyLen;i<4*keyLen+28;i++){tmp=encKey[i-1];if(i%keyLen===0||keyLen===8&&i%keyLen===4){tmp=sbox[tmp>>>24]<<24^sbox[tmp>>16&255]<<16^sbox[tmp>>8&255]<<8^sbox[tmp&255];if(i%keyLen===0){tmp=tmp<<8^tmp>>>24^rcon<<24;rcon=rcon<<1^(rcon>>7)*283}}encKey[i]=encKey[i-keyLen]^tmp}for(j=0;i;j++,i--){tmp=encKey[j&3?i:i-4];if(i<=4||j<4){decKey[j]=tmp}else{decKey[j]=decTable[0][sbox[tmp>>>24]]^decTable[1][sbox[tmp>>16&255]]^decTable[2][sbox[tmp>>8&255]]^decTable[3][sbox[tmp&255]]}}}AES.prototype.decrypt=function decrypt$$1(encrypted0,encrypted1,encrypted2,encrypted3,out,offset){var key=this._key[1];var a=encrypted0^key[0];var b=encrypted3^key[1];var c=encrypted2^key[2];var d=encrypted1^key[3];var a2=void 0;var b2=void 0;var c2=void 0;var nInnerRounds=key.length/4-2;var i=void 0;var kIndex=4;var table=this._tables[1];var table0=table[0];var table1=table[1];var table2=table[2];var table3=table[3];var sbox=table[4];for(i=0;i<nInnerRounds;i++){a2=table0[a>>>24]^table1[b>>16&255]^table2[c>>8&255]^table3[d&255]^key[kIndex];b2=table0[b>>>24]^table1[c>>16&255]^table2[d>>8&255]^table3[a&255]^key[kIndex+1];c2=table0[c>>>24]^table1[d>>16&255]^table2[a>>8&255]^table3[b&255]^key[kIndex+2];d=table0[d>>>24]^table1[a>>16&255]^table2[b>>8&255]^table3[c&255]^key[kIndex+3];kIndex+=4;a=a2;b=b2;c=c2}for(i=0;i<4;i++){out[(3&-i)+offset]=sbox[a>>>24]<<24^sbox[b>>16&255]<<16^sbox[c>>8&255]<<8^sbox[d&255]^key[kIndex++];a2=a;a=b;b=c;c=d;d=a2}};return AES}();var Stream=function(){function Stream(){classCallCheck(this,Stream);this.listeners={}}Stream.prototype.on=function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[]}this.listeners[type].push(listener)};Stream.prototype.off=function off(type,listener){if(!this.listeners[type]){return false}var index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1};Stream.prototype.trigger=function trigger(type){var callbacks=this.listeners[type];if(!callbacks){return}if(arguments.length===2){var length=callbacks.length;for(var i=0;i<length;++i){callbacks[i].call(this,arguments[1])}}else{var args=Array.prototype.slice.call(arguments,1);var _length=callbacks.length;for(var _i=0;_i<_length;++_i){callbacks[_i].apply(this,args)}}};Stream.prototype.dispose=function dispose(){this.listeners={}};Stream.prototype.pipe=function pipe(destination){this.on("data",function(data){destination.push(data)})};return Stream}();var AsyncStream$$1=function(_Stream){inherits(AsyncStream$$1,_Stream);function AsyncStream$$1(){classCallCheck(this,AsyncStream$$1);var _this=possibleConstructorReturn(this,_Stream.call(this,Stream));_this.jobs=[];_this.delay=1;_this.timeout_=null;return _this}AsyncStream$$1.prototype.processJob_=function processJob_(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};AsyncStream$$1.prototype.push=function push(job){this.jobs.push(job);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return AsyncStream$$1}(Stream);var ntoh=function ntoh(word){return word<<24|(word&65280)<<8|(word&16711680)>>8|word>>>24};var decrypt$$1=function decrypt$$1(encrypted,key,initVector){var encrypted32=new Int32Array(encrypted.buffer,encrypted.byteOffset,encrypted.byteLength>>2);var decipher=new AES(Array.prototype.slice.call(key));var decrypted=new Uint8Array(encrypted.byteLength);var decrypted32=new Int32Array(decrypted.buffer);var init0=void 0;var init1=void 0;var init2=void 0;var init3=void 0;var encrypted0=void 0;var encrypted1=void 0;var encrypted2=void 0;var encrypted3=void 0;var wordIx=void 0;init0=initVector[0];init1=initVector[1];init2=initVector[2];init3=initVector[3];for(wordIx=0;wordIx<encrypted32.length;wordIx+=4){encrypted0=ntoh(encrypted32[wordIx]);encrypted1=ntoh(encrypted32[wordIx+1]);encrypted2=ntoh(encrypted32[wordIx+2]);encrypted3=ntoh(encrypted32[wordIx+3]);decipher.decrypt(encrypted0,encrypted1,encrypted2,encrypted3,decrypted32,wordIx);decrypted32[wordIx]=ntoh(decrypted32[wordIx]^init0);decrypted32[wordIx+1]=ntoh(decrypted32[wordIx+1]^init1);decrypted32[wordIx+2]=ntoh(decrypted32[wordIx+2]^init2);decrypted32[wordIx+3]=ntoh(decrypted32[wordIx+3]^init3);init0=encrypted0;init1=encrypted1;init2=encrypted2;init3=encrypted3}return decrypted};var Decrypter$$1=function(){function Decrypter$$1(encrypted,key,initVector,done){classCallCheck(this,Decrypter$$1);var step=Decrypter$$1.STEP;var encrypted32=new Int32Array(encrypted.buffer);var decrypted=new Uint8Array(encrypted.byteLength);var i=0;this.asyncStream_=new AsyncStream$$1;this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));for(i=step;i<encrypted32.length;i+=step){initVector=new Uint32Array([ntoh(encrypted32[i-4]),ntoh(encrypted32[i-3]),ntoh(encrypted32[i-2]),ntoh(encrypted32[i-1])]);this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted))}this.asyncStream_.push(function(){done(null,unpad(decrypted))})}Decrypter$$1.prototype.decryptChunk_=function decryptChunk_(encrypted,key,initVector,decrypted){return function(){var bytes=decrypt$$1(encrypted,key,initVector);decrypted.set(bytes,encrypted.byteOffset)}};createClass(Decrypter$$1,null,[{key:"STEP",get:function get$$1(){return 32e3}}]);return Decrypter$$1}();var createTransferableMessage=function createTransferableMessage(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(ArrayBuffer.isView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength}}else{transferable[key]=value}});return transferable};var DecrypterWorker=function DecrypterWorker(self){self.onmessage=function(event){var data=event.data;var encrypted=new Uint8Array(data.encrypted.bytes,data.encrypted.byteOffset,data.encrypted.byteLength);var key=new Uint32Array(data.key.bytes,data.key.byteOffset,data.key.byteLength/4);var iv=new Uint32Array(data.iv.bytes,data.iv.byteOffset,data.iv.byteLength/4);new Decrypter$$1(encrypted,key,iv,function(err,bytes){self.postMessage(createTransferableMessage({source:data.source,decrypted:bytes}),[bytes.buffer])})}};var decrypterWorker=new DecrypterWorker(self);return decrypterWorker}()});var audioTrackKind_=function audioTrackKind_(properties){var kind=properties.default?"main":"alternative";if(properties.characteristics&&properties.characteristics.indexOf("public.accessibility.describes-video")>=0){kind="main-desc"}return kind};var stopLoaders=function stopLoaders(segmentLoader,mediaType){segmentLoader.abort();segmentLoader.pause();if(mediaType&&mediaType.activePlaylistLoader){mediaType.activePlaylistLoader.pause();mediaType.activePlaylistLoader=null}};var startLoaders=function startLoaders(playlistLoader,mediaType){mediaType.activePlaylistLoader=playlistLoader;playlistLoader.load()};var onGroupChanged=function onGroupChanged(type,settings){return function(){var _settings$segmentLoad=settings.segmentLoaders,segmentLoader=_settings$segmentLoad[type],mainSegmentLoader=_settings$segmentLoad.main,mediaType=settings.mediaTypes[type];var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup(activeTrack);var previousActiveLoader=mediaType.activePlaylistLoader;stopLoaders(segmentLoader,mediaType);if(!activeGroup){return}if(!activeGroup.playlistLoader){if(previousActiveLoader){mainSegmentLoader.resetEverything()}return}segmentLoader.resyncLoader();startLoaders(activeGroup.playlistLoader,mediaType)}};var onTrackChanged=function onTrackChanged(type,settings){return function(){var _settings$segmentLoad2=settings.segmentLoaders,segmentLoader=_settings$segmentLoad2[type],mainSegmentLoader=_settings$segmentLoad2.main,mediaType=settings.mediaTypes[type];var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup(activeTrack);var previousActiveLoader=mediaType.activePlaylistLoader;stopLoaders(segmentLoader,mediaType);if(!activeGroup){return}if(!activeGroup.playlistLoader){mainSegmentLoader.resetEverything();return}if(previousActiveLoader===activeGroup.playlistLoader){startLoaders(activeGroup.playlistLoader,mediaType);return}if(segmentLoader.track){segmentLoader.track(activeTrack)}segmentLoader.resetEverything();startLoaders(activeGroup.playlistLoader,mediaType)}};var onError={AUDIO:function AUDIO(type,settings){return function(){var segmentLoader=settings.segmentLoaders[type],mediaType=settings.mediaTypes[type],blacklistCurrentPlaylist=settings.blacklistCurrentPlaylist;stopLoaders(segmentLoader,mediaType);var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup();var id=(activeGroup.filter(function(group){return group.default})[0]||activeGroup[0]).id;var defaultTrack=mediaType.tracks[id];if(activeTrack===defaultTrack){blacklistCurrentPlaylist({message:"Problem encountered loading the default audio track."});return}videojs$1.log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var trackId in mediaType.tracks){mediaType.tracks[trackId].enabled=mediaType.tracks[trackId]===defaultTrack}mediaType.onTrackChanged()}},SUBTITLES:function SUBTITLES(type,settings){return function(){var segmentLoader=settings.segmentLoaders[type],mediaType=settings.mediaTypes[type];videojs$1.log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");stopLoaders(segmentLoader,mediaType);var track=mediaType.activeTrack();if(track){track.mode="disabled"}mediaType.onTrackChanged()}}};var setupListeners={AUDIO:function AUDIO(type,playlistLoader,settings){if(!playlistLoader){return}var tech=settings.tech,requestOptions=settings.requestOptions,segmentLoader=settings.segmentLoaders[type];playlistLoader.on("loadedmetadata",function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);if(!tech.paused()||media.endList&&tech.preload()!=="none"){segmentLoader.load()}});playlistLoader.on("loadedplaylist",function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);if(!tech.paused()){segmentLoader.load()}});playlistLoader.on("error",onError[type](type,settings))},SUBTITLES:function SUBTITLES(type,playlistLoader,settings){var tech=settings.tech,requestOptions=settings.requestOptions,segmentLoader=settings.segmentLoaders[type],mediaType=settings.mediaTypes[type];playlistLoader.on("loadedmetadata",function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);segmentLoader.track(mediaType.activeTrack());if(!tech.paused()||media.endList&&tech.preload()!=="none"){segmentLoader.load()}});playlistLoader.on("loadedplaylist",function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);if(!tech.paused()){segmentLoader.load()}});playlistLoader.on("error",onError[type](type,settings))}};var byGroupId=function byGroupId(type,groupId){return function(playlist){return playlist.attributes[type]===groupId}};var byResolvedUri=function byResolvedUri(resolvedUri){return function(playlist){return playlist.resolvedUri===resolvedUri}};var initialize={AUDIO:function AUDIO(type,settings){var hls=settings.hls,sourceType=settings.sourceType,segmentLoader=settings.segmentLoaders[type],requestOptions=settings.requestOptions,_settings$master=settings.master,mediaGroups=_settings$master.mediaGroups,playlists=_settings$master.playlists,_settings$mediaTypes$=settings.mediaTypes[type],groups=_settings$mediaTypes$.groups,tracks=_settings$mediaTypes$.tracks,masterPlaylistLoader=settings.masterPlaylistLoader;if(!mediaGroups[type]||Object.keys(mediaGroups[type]).length===0){mediaGroups[type]={main:{"default":{"default":true}}}}for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[]}var groupPlaylists=playlists.filter(byGroupId(type,groupId));for(var variantLabel in mediaGroups[type][groupId]){var properties=mediaGroups[type][groupId][variantLabel];var matchingPlaylists=groupPlaylists.filter(byResolvedUri(properties.resolvedUri));if(matchingPlaylists.length){delete properties.resolvedUri}var playlistLoader=void 0;if(properties.resolvedUri){playlistLoader=new PlaylistLoader(properties.resolvedUri,hls,requestOptions)}else if(properties.playlists&&sourceType==="dash"){playlistLoader=new DashPlaylistLoader(properties.playlists[0],hls,requestOptions,masterPlaylistLoader)}else{playlistLoader=null}properties=videojs$1.mergeOptions({id:variantLabel,playlistLoader:playlistLoader},properties);setupListeners[type](type,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==="undefined"){var track=new videojs$1.AudioTrack({id:variantLabel,kind:audioTrackKind_(properties),enabled:false,language:properties.language,"default":properties.default,label:variantLabel});tracks[variantLabel]=track}}}segmentLoader.on("error",onError[type](type,settings))},SUBTITLES:function SUBTITLES(type,settings){var tech=settings.tech,hls=settings.hls,sourceType=settings.sourceType,segmentLoader=settings.segmentLoaders[type],requestOptions=settings.requestOptions,mediaGroups=settings.master.mediaGroups,_settings$mediaTypes$2=settings.mediaTypes[type],groups=_settings$mediaTypes$2.groups,tracks=_settings$mediaTypes$2.tracks,masterPlaylistLoader=settings.masterPlaylistLoader;for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[]}for(var variantLabel in mediaGroups[type][groupId]){if(mediaGroups[type][groupId][variantLabel].forced){continue}var properties=mediaGroups[type][groupId][variantLabel];var playlistLoader=void 0;if(sourceType==="hls"){playlistLoader=new PlaylistLoader(properties.resolvedUri,hls,requestOptions)}else if(sourceType==="dash"){playlistLoader=new DashPlaylistLoader(properties.playlists[0],hls,requestOptions,masterPlaylistLoader)}properties=videojs$1.mergeOptions({id:variantLabel,playlistLoader:playlistLoader},properties);setupListeners[type](type,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==="undefined"){var track=tech.addRemoteTextTrack({id:variantLabel,kind:"subtitles","default":properties.default&&properties.autoselect,language:properties.language,label:variantLabel},false).track;tracks[variantLabel]=track}}}segmentLoader.on("error",onError[type](type,settings))},"CLOSED-CAPTIONS":function CLOSEDCAPTIONS(type,settings){var tech=settings.tech,mediaGroups=settings.master.mediaGroups,_settings$mediaTypes$3=settings.mediaTypes[type],groups=_settings$mediaTypes$3.groups,tracks=_settings$mediaTypes$3.tracks;for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[]}for(var variantLabel in mediaGroups[type][groupId]){var properties=mediaGroups[type][groupId][variantLabel];if(!properties.instreamId.match(/CC\d/)){continue}groups[groupId].push(videojs$1.mergeOptions({id:variantLabel},properties));if(typeof tracks[variantLabel]==="undefined"){var track=tech.addRemoteTextTrack({id:properties.instreamId,kind:"captions","default":properties.default&&properties.autoselect,language:properties.language,label:variantLabel},false).track;tracks[variantLabel]=track}}}}};var activeGroup=function activeGroup(type,settings){return function(track){var masterPlaylistLoader=settings.masterPlaylistLoader,groups=settings.mediaTypes[type].groups;var media=masterPlaylistLoader.media();if(!media){return null}var variants=null;if(media.attributes[type]){variants=groups[media.attributes[type]]}variants=variants||groups.main;if(typeof track==="undefined"){return variants}if(track===null){return null}return variants.filter(function(props){return props.id===track.id})[0]||null}};var activeTrack={AUDIO:function AUDIO(type,settings){return function(){var tracks=settings.mediaTypes[type].tracks;for(var id in tracks){if(tracks[id].enabled){return tracks[id]}}return null}},SUBTITLES:function SUBTITLES(type,settings){return function(){var tracks=settings.mediaTypes[type].tracks;for(var id in tracks){if(tracks[id].mode==="showing"){return tracks[id]}}return null}}};var setupMediaGroups=function setupMediaGroups(settings){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(type){initialize[type](type,settings)});var mediaTypes=settings.mediaTypes,masterPlaylistLoader=settings.masterPlaylistLoader,tech=settings.tech,hls=settings.hls;["AUDIO","SUBTITLES"].forEach(function(type){mediaTypes[type].activeGroup=activeGroup(type,settings);mediaTypes[type].activeTrack=activeTrack[type](type,settings);mediaTypes[type].onGroupChanged=onGroupChanged(type,settings);mediaTypes[type].onTrackChanged=onTrackChanged(type,settings)});var audioGroup=mediaTypes.AUDIO.activeGroup();var groupId=(audioGroup.filter(function(group){return group.default})[0]||audioGroup[0]).id;mediaTypes.AUDIO.tracks[groupId].enabled=true;mediaTypes.AUDIO.onTrackChanged();masterPlaylistLoader.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(type){return mediaTypes[type].onGroupChanged()})});var onAudioTrackChanged=function onAudioTrackChanged(){mediaTypes.AUDIO.onTrackChanged();tech.trigger({type:"usage",name:"hls-audio-change"})};tech.audioTracks().addEventListener("change",onAudioTrackChanged);tech.remoteTextTracks().addEventListener("change",mediaTypes.SUBTITLES.onTrackChanged);hls.on("dispose",function(){tech.audioTracks().removeEventListener("change",onAudioTrackChanged);tech.remoteTextTracks().removeEventListener("change",mediaTypes.SUBTITLES.onTrackChanged)});tech.clearTracks("audio");for(var id in mediaTypes.AUDIO.tracks){tech.audioTracks().addTrack(mediaTypes.AUDIO.tracks[id])}};var createMediaTypes=function createMediaTypes(){var mediaTypes={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(type){mediaTypes[type]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop$1,activeTrack:noop$1,onGroupChanged:noop$1,onTrackChanged:noop$1}});return mediaTypes};var ABORT_EARLY_BLACKLIST_SECONDS=60*2;var Hls=void 0;var loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var sumLoaderStat=function sumLoaderStat(stat){return this.audioSegmentLoader_[stat]+this.mainSegmentLoader_[stat]};var MasterPlaylistController=function(_videojs$EventTarget){inherits$1(MasterPlaylistController,_videojs$EventTarget);function MasterPlaylistController(options){classCallCheck$1(this,MasterPlaylistController);var _this=possibleConstructorReturn$1(this,(MasterPlaylistController.__proto__||Object.getPrototypeOf(MasterPlaylistController)).call(this));var url=options.url,handleManifestRedirects=options.handleManifestRedirects,withCredentials=options.withCredentials,tech=options.tech,bandwidth=options.bandwidth,externHls=options.externHls,useCueTags=options.useCueTags,blacklistDuration=options.blacklistDuration,enableLowInitialPlaylist=options.enableLowInitialPlaylist,sourceType=options.sourceType,seekTo=options.seekTo;if(!url){throw new Error("A non-empty playlist URL is required")}Hls=externHls;_this.withCredentials=withCredentials;_this.tech_=tech;_this.hls_=tech.hls;_this.seekTo_=seekTo;_this.sourceType_=sourceType;_this.useCueTags_=useCueTags;_this.blacklistDuration=blacklistDuration;_this.enableLowInitialPlaylist=enableLowInitialPlaylist;if(_this.useCueTags_){_this.cueTagsTrack_=_this.tech_.addTextTrack("metadata","ad-cues");_this.cueTagsTrack_.inBandMetadataTrackDispatchType=""}_this.requestOptions_={withCredentials:withCredentials,handleManifestRedirects:handleManifestRedirects,timeout:null};_this.mediaTypes_=createMediaTypes();_this.mediaSource=new videojs$1.MediaSource;_this.mediaSource.addEventListener("sourceopen",_this.handleSourceOpen_.bind(_this));_this.seekable_=videojs$1.createTimeRanges();_this.hasPlayed_=function(){return false};_this.syncController_=new SyncController(options);_this.segmentMetadataTrack_=tech.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;_this.decrypter_=new Decrypter$1;_this.inbandTextTracks_={};var segmentLoaderSettings={hls:_this.hls_,mediaSource:_this.mediaSource,currentTime:_this.tech_.currentTime.bind(_this.tech_),seekable:function seekable$$1(){return _this.seekable()},seeking:function seeking(){return _this.tech_.seeking()},duration:function duration$$1(){return _this.mediaSource.duration},hasPlayed:function hasPlayed(){return _this.hasPlayed_()},goalBufferLength:function goalBufferLength(){return _this.goalBufferLength()},bandwidth:bandwidth,syncController:_this.syncController_,decrypter:_this.decrypter_,sourceType:_this.sourceType_,inbandTextTracks:_this.inbandTextTracks_};_this.masterPlaylistLoader_=_this.sourceType_==="dash"?new DashPlaylistLoader(url,_this.hls_,_this.requestOptions_):new PlaylistLoader(url,_this.hls_,_this.requestOptions_);_this.setupMasterPlaylistLoaderListeners_();_this.mainSegmentLoader_=new SegmentLoader(videojs$1.mergeOptions(segmentLoaderSettings,{segmentMetadataTrack:_this.segmentMetadataTrack_,loaderType:"main"}),options);_this.audioSegmentLoader_=new SegmentLoader(videojs$1.mergeOptions(segmentLoaderSettings,{loaderType:"audio"}),options);_this.subtitleSegmentLoader_=new VTTSegmentLoader(videojs$1.mergeOptions(segmentLoaderSettings,{loaderType:"vtt"}),options);_this.setupSegmentLoaderListeners_();loaderStats.forEach(function(stat){_this[stat+"_"]=sumLoaderStat.bind(_this,stat)});_this.logger_=logger("MPC");_this.masterPlaylistLoader_.load();return _this}createClass$1(MasterPlaylistController,[{key:"setupMasterPlaylistLoaderListeners_",value:function setupMasterPlaylistLoaderListeners_(){var _this2=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=media.targetDuration*1.5*1e3;if(isLowestEnabledRendition(_this2.masterPlaylistLoader_.master,_this2.masterPlaylistLoader_.media())){_this2.requestOptions_.timeout=0}else{_this2.requestOptions_.timeout=requestTimeout}if(media.endList&&_this2.tech_.preload()!=="none"){_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load()}setupMediaGroups({sourceType:_this2.sourceType_,segmentLoaders:{AUDIO:_this2.audioSegmentLoader_,SUBTITLES:_this2.subtitleSegmentLoader_,main:_this2.mainSegmentLoader_},tech:_this2.tech_,requestOptions:_this2.requestOptions_,masterPlaylistLoader:_this2.masterPlaylistLoader_,hls:_this2.hls_,master:_this2.master(),mediaTypes:_this2.mediaTypes_,blacklistCurrentPlaylist:_this2.blacklistCurrentPlaylist.bind(_this2)});_this2.triggerPresenceUsage_(_this2.master(),media);try{_this2.setupSourceBuffers_()}catch(e){videojs$1.log.warn("Failed to create SourceBuffers",e);return _this2.mediaSource.endOfStream("decode")}_this2.setupFirstPlay();if(!_this2.mediaTypes_.AUDIO.activePlaylistLoader||_this2.mediaTypes_.AUDIO.activePlaylistLoader.media()){_this2.trigger("selectedinitialmedia")}else{_this2.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){_this2.trigger("selectedinitialmedia")})}});this.masterPlaylistLoader_.on("loadedplaylist",function(){var updatedPlaylist=_this2.masterPlaylistLoader_.media();if(!updatedPlaylist){_this2.excludeUnsupportedVariants_();var selectedMedia=void 0;if(_this2.enableLowInitialPlaylist){selectedMedia=_this2.selectInitialPlaylist()}if(!selectedMedia){selectedMedia=_this2.selectPlaylist()}_this2.initialMedia_=selectedMedia;_this2.masterPlaylistLoader_.media(_this2.initialMedia_);return}if(_this2.useCueTags_){_this2.updateAdCues_(updatedPlaylist)}_this2.mainSegmentLoader_.playlist(updatedPlaylist,_this2.requestOptions_);_this2.updateDuration();if(!_this2.tech_.paused()){_this2.mainSegmentLoader_.load();if(_this2.audioSegmentLoader_){_this2.audioSegmentLoader_.load()}}if(!updatedPlaylist.endList){var addSeekableRange=function addSeekableRange(){var seekable$$1=_this2.seekable();if(seekable$$1.length!==0){_this2.mediaSource.addSeekableRange_(seekable$$1.start(0),seekable$$1.end(0))}};if(_this2.duration()!==Infinity){var onDurationchange=function onDurationchange(){if(_this2.duration()===Infinity){addSeekableRange()}else{_this2.tech_.one("durationchange",onDurationchange)}};_this2.tech_.one("durationchange",onDurationchange)}else{addSeekableRange()}}});this.masterPlaylistLoader_.on("error",function(){_this2.blacklistCurrentPlaylist(_this2.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){_this2.mainSegmentLoader_.abort();_this2.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=media.targetDuration*1.5*1e3;if(isLowestEnabledRendition(_this2.masterPlaylistLoader_.master,_this2.masterPlaylistLoader_.media())){_this2.requestOptions_.timeout=0}else{_this2.requestOptions_.timeout=requestTimeout}_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load();_this2.tech_.trigger({type:"mediachange",bubbles:true})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var updatedPlaylist=_this2.masterPlaylistLoader_.media();var playlistOutdated=_this2.stuckAtPlaylistEnd_(updatedPlaylist);if(playlistOutdated){_this2.blacklistCurrentPlaylist({message:"Playlist no longer updating."});_this2.tech_.trigger("playliststuck")}});this.masterPlaylistLoader_.on("renditiondisabled",function(){_this2.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){_this2.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function triggerPresenceUsage_(master,media){var mediaGroups=master.mediaGroups||{};var defaultDemuxed=true;var audioGroupKeys=Object.keys(mediaGroups.AUDIO);for(var mediaGroup in mediaGroups.AUDIO){for(var label in mediaGroups.AUDIO[mediaGroup]){var properties=mediaGroups.AUDIO[mediaGroup][label];if(!properties.uri){defaultDemuxed=false}}}if(defaultDemuxed){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(mediaGroups.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(Hls.Playlist.isAes(media)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(Hls.Playlist.isFmp4(media)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(audioGroupKeys.length&&Object.keys(mediaGroups.AUDIO[audioGroupKeys[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"
})}}},{key:"setupSegmentLoaderListeners_",value:function setupSegmentLoaderListeners_(){var _this3=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var nextPlaylist=_this3.selectPlaylist();var currentPlaylist=_this3.masterPlaylistLoader_.media();var buffered=_this3.tech_.buffered();var forwardBuffer=buffered.length?buffered.end(buffered.length-1)-_this3.tech_.currentTime():0;var bufferLowWaterLine=_this3.bufferLowWaterLine();if(!currentPlaylist.endList||_this3.duration()<Config.MAX_BUFFER_LOW_WATER_LINE||nextPlaylist.attributes.BANDWIDTH<currentPlaylist.attributes.BANDWIDTH||forwardBuffer>=bufferLowWaterLine){_this3.masterPlaylistLoader_.media(nextPlaylist)}_this3.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){_this3.trigger("progress")});this.mainSegmentLoader_.on("error",function(){_this3.blacklistCurrentPlaylist(_this3.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){_this3.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){_this3.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){_this3.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){_this3.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){_this3.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},ABORT_EARLY_BLACKLIST_SECONDS)});this.mainSegmentLoader_.on("reseteverything",function(){_this3.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(event){_this3.tech_.trigger({type:"hls-segment-time-mapping",mapping:event.mapping})});this.audioSegmentLoader_.on("ended",function(){_this3.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function load(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"smoothQualityChange_",value:function smoothQualityChange_(){var media=this.selectPlaylist();if(media!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(media);this.mainSegmentLoader_.resetLoader()}}},{key:"fastQualityChange_",value:function fastQualityChange_(){var _this4=this;var media=this.selectPlaylist();if(media===this.masterPlaylistLoader_.media()){return}this.masterPlaylistLoader_.media(media);this.mainSegmentLoader_.resetEverything(function(){if(videojs$1.browser.IE_VERSION||videojs$1.browser.IS_EDGE){_this4.tech_.setCurrentTime(_this4.tech_.currentTime()+.04)}else{_this4.tech_.setCurrentTime(_this4.tech_.currentTime())}})}},{key:"play",value:function play(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.seekTo_(0)}if(this.hasPlayed_()){this.load()}var seekable$$1=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<seekable$$1.start(0)){return this.seekTo_(seekable$$1.end(seekable$$1.length-1))}}}},{key:"setupFirstPlay",value:function setupFirstPlay(){var _this5=this;var media=this.masterPlaylistLoader_.media();if(!media||this.tech_.paused()||this.hasPlayed_()){return false}if(!media.endList){var seekable$$1=this.seekable();if(!seekable$$1.length){return false}if(videojs$1.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",function(){_this5.trigger("firstplay");_this5.seekTo_(seekable$$1.end(0));_this5.hasPlayed_=function(){return true}});return false}this.trigger("firstplay");this.seekTo_(seekable$$1.end(0))}this.hasPlayed_=function(){return true};this.load();return true}},{key:"handleSourceOpen_",value:function handleSourceOpen_(){try{this.setupSourceBuffers_()}catch(e){videojs$1.log.warn("Failed to create Source Buffers",e);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var playPromise=this.tech_.play();if(typeof playPromise!=="undefined"&&typeof playPromise.then==="function"){playPromise.then(null,function(e){})}}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function onEndOfStream(){var isEndOfStream=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo){isEndOfStream=isEndOfStream&&this.audioSegmentLoader_.ended_}else{isEndOfStream=this.audioSegmentLoader_.ended_}}if(!isEndOfStream){return}this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){videojs$1.log.warn("Failed to call media source endOfStream",e)}}},{key:"stuckAtPlaylistEnd_",value:function stuckAtPlaylistEnd_(playlist){var seekable$$1=this.seekable();if(!seekable$$1.length){return false}var expired=this.syncController_.getExpiredTime(playlist,this.mediaSource.duration);if(expired===null){return false}var absolutePlaylistEnd=Hls.Playlist.playlistEnd(playlist,expired);var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(!buffered.length){return absolutePlaylistEnd-currentTime<=SAFE_TIME_DELTA}var bufferedEnd=buffered.end(buffered.length-1);return bufferedEnd-currentTime<=SAFE_TIME_DELTA&&absolutePlaylistEnd-bufferedEnd<=SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function blacklistCurrentPlaylist(){var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var blacklistDuration=arguments[1];var currentPlaylist=void 0;var nextPlaylist=void 0;currentPlaylist=error.playlist||this.masterPlaylistLoader_.media();blacklistDuration=blacklistDuration||error.blacklistDuration||this.blacklistDuration;if(!currentPlaylist){this.error=error;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var isFinalRendition=this.masterPlaylistLoader_.master.playlists.filter(isEnabled).length===1;if(isFinalRendition){videojs$1.log.warn("Problem encountered with the current "+"HLS playlist. Trying again since it is the final playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(isFinalRendition)}currentPlaylist.excludeUntil=Date.now()+blacklistDuration*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});nextPlaylist=this.selectPlaylist();videojs$1.log.warn("Problem encountered with the current HLS playlist."+(error.message?" "+error.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(nextPlaylist)}},{key:"pauseLoading",value:function pauseLoading(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function setCurrentTime(currentTime){var buffered=findRange(this.tech_.buffered(),currentTime);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(buffered&&buffered.length){return currentTime}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function duration$$1(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return Hls.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function seekable$$1(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function onSyncInfoUpdate_(){var mainSeekable=void 0;var audioSeekable=void 0;if(!this.masterPlaylistLoader_){return}var media=this.masterPlaylistLoader_.media();if(!media){return}var expired=this.syncController_.getExpiredTime(media,this.mediaSource.duration);if(expired===null){return}mainSeekable=Hls.Playlist.seekable(media,expired);if(mainSeekable.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){media=this.mediaTypes_.AUDIO.activePlaylistLoader.media();expired=this.syncController_.getExpiredTime(media,this.mediaSource.duration);if(expired===null){return}audioSeekable=Hls.Playlist.seekable(media,expired);if(audioSeekable.length===0){return}}var oldEnd=void 0;var oldStart=void 0;if(this.seekable_&&this.seekable_.length){oldEnd=this.seekable_.end(0);oldStart=this.seekable_.start(0)}if(!audioSeekable){this.seekable_=mainSeekable}else if(audioSeekable.start(0)>mainSeekable.end(0)||mainSeekable.start(0)>audioSeekable.end(0)){this.seekable_=mainSeekable}else{this.seekable_=videojs$1.createTimeRanges([[audioSeekable.start(0)>mainSeekable.start(0)?audioSeekable.start(0):mainSeekable.start(0),audioSeekable.end(0)<mainSeekable.end(0)?audioSeekable.end(0):mainSeekable.end(0)]])}if(this.seekable_&&this.seekable_.length){if(this.seekable_.end(0)===oldEnd&&this.seekable_.start(0)===oldStart){return}}this.logger_("seekable updated ["+printableRange(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function updateDuration(){var _this6=this;var oldDuration=this.mediaSource.duration;var newDuration=Hls.Playlist.duration(this.masterPlaylistLoader_.media());var buffered=this.tech_.buffered();var setDuration=function setDuration(){_this6.logger_("Setting duration from "+_this6.mediaSource.duration+" => "+newDuration);try{_this6.mediaSource.duration=newDuration}catch(e){videojs$1.log.warn("Failed to set media source duration",e)}_this6.tech_.trigger("durationchange");_this6.mediaSource.removeEventListener("sourceopen",setDuration)};if(buffered.length>0){newDuration=Math.max(newDuration,buffered.end(buffered.length-1))}if(oldDuration!==newDuration){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",setDuration)}else{setDuration()}}}},{key:"dispose",value:function dispose(){var _this7=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(type){var groups=_this7.mediaTypes_[type].groups;for(var id in groups){groups[id].forEach(function(group){if(group.playlistLoader){group.playlistLoader.dispose()}})}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function master(){return this.masterPlaylistLoader_.master}},{key:"media",value:function media(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function setupSourceBuffers_(){var media=this.masterPlaylistLoader_.media();var mimeTypes=void 0;if(!media||this.mediaSource.readyState!=="open"){return}mimeTypes=mimeTypesForPlaylist(this.masterPlaylistLoader_.master,media);if(mimeTypes.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+media.resolvedUri;return this.mediaSource.endOfStream("decode")}this.configureLoaderMimeTypes_(mimeTypes);this.excludeIncompatibleVariants_(media)}},{key:"configureLoaderMimeTypes_",value:function configureLoaderMimeTypes_(mimeTypes){var sourceBufferEmitter=mimeTypes.length>1&&mimeTypes[0].indexOf(",")===-1&&mimeTypes[0]!==mimeTypes[1]?new videojs$1.EventTarget:null;this.mainSegmentLoader_.mimeType(mimeTypes[0],sourceBufferEmitter);if(mimeTypes[1]){this.audioSegmentLoader_.mimeType(mimeTypes[1],sourceBufferEmitter)}}},{key:"excludeUnsupportedVariants_",value:function excludeUnsupportedVariants_(){this.master().playlists.forEach(function(variant){if(variant.attributes.CODECS&&window_1.MediaSource&&window_1.MediaSource.isTypeSupported&&!window_1.MediaSource.isTypeSupported('video/mp4; codecs="'+mapLegacyAvcCodecs(variant.attributes.CODECS)+'"')){variant.excludeUntil=Infinity}})}},{key:"excludeIncompatibleVariants_",value:function excludeIncompatibleVariants_(media){var codecCount=2;var videoCodec=null;var codecs=void 0;if(media.attributes.CODECS){codecs=parseCodecs(media.attributes.CODECS);videoCodec=codecs.videoCodec;codecCount=codecs.codecCount}this.master().playlists.forEach(function(variant){var variantCodecs={codecCount:2,videoCodec:null};if(variant.attributes.CODECS){variantCodecs=parseCodecs(variant.attributes.CODECS)}if(variantCodecs.codecCount!==codecCount){variant.excludeUntil=Infinity}if(variantCodecs.videoCodec!==videoCodec){variant.excludeUntil=Infinity}})}},{key:"updateAdCues_",value:function updateAdCues_(media){var offset=0;var seekable$$1=this.seekable();if(seekable$$1.length){offset=seekable$$1.start(0)}updateAdCues(media,this.cueTagsTrack_,offset)}},{key:"goalBufferLength",value:function goalBufferLength(){var currentTime=this.tech_.currentTime();var initial=Config.GOAL_BUFFER_LENGTH;var rate=Config.GOAL_BUFFER_LENGTH_RATE;var max=Math.max(initial,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(initial+currentTime*rate,max)}},{key:"bufferLowWaterLine",value:function bufferLowWaterLine(){var currentTime=this.tech_.currentTime();var initial=Config.BUFFER_LOW_WATER_LINE;var rate=Config.BUFFER_LOW_WATER_LINE_RATE;var max=Math.max(initial,Config.MAX_BUFFER_LOW_WATER_LINE);return Math.min(initial+currentTime*rate,max)}}]);return MasterPlaylistController}(videojs$1.EventTarget);var enableFunction=function enableFunction(loader,playlistUri,changePlaylistFn){return function(enable){var playlist=loader.master.playlists[playlistUri];var incompatible=isIncompatible(playlist);var currentlyEnabled=isEnabled(playlist);if(typeof enable==="undefined"){return currentlyEnabled}if(enable){delete playlist.disabled}else{playlist.disabled=true}if(enable!==currentlyEnabled&&!incompatible){changePlaylistFn();if(enable){loader.trigger("renditionenabled")}else{loader.trigger("renditiondisabled")}}return enable}};var Representation=function Representation(hlsHandler,playlist,id){classCallCheck$1(this,Representation);var mpc=hlsHandler.masterPlaylistController_,smoothQualityChange=hlsHandler.options_.smoothQualityChange;var changeType=smoothQualityChange?"smooth":"fast";var qualityChangeFunction=mpc[changeType+"QualityChange_"].bind(mpc);if(playlist.attributes.RESOLUTION){var resolution=playlist.attributes.RESOLUTION;this.width=resolution.width;this.height=resolution.height}this.bandwidth=playlist.attributes.BANDWIDTH;this.id=id;this.enabled=enableFunction(hlsHandler.playlists,playlist.uri,qualityChangeFunction)};var renditionSelectionMixin=function renditionSelectionMixin(hlsHandler){var playlists=hlsHandler.playlists;hlsHandler.representations=function(){return playlists.master.playlists.filter(function(media){return!isIncompatible(media)}).map(function(e,i){return new Representation(hlsHandler,e,e.uri)})}};var timerCancelEvents=["seeking","seeked","pause","playing","error"];var PlaybackWatcher=function(){function PlaybackWatcher(options){var _this=this;classCallCheck$1(this,PlaybackWatcher);this.tech_=options.tech;this.seekable=options.seekable;this.seekTo=options.seekTo;this.allowSeeksWithinUnsafeLiveWindow=options.allowSeeksWithinUnsafeLiveWindow;this.media=options.media;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=logger("PlaybackWatcher");this.logger_("initialize");var canPlayHandler=function canPlayHandler(){return _this.monitorCurrentTime_()};var waitingHandler=function waitingHandler(){return _this.techWaiting_()};var cancelTimerHandler=function cancelTimerHandler(){return _this.cancelTimer_()};var fixesBadSeeksHandler=function fixesBadSeeksHandler(){return _this.fixesBadSeeks_()};this.tech_.on("seekablechanged",fixesBadSeeksHandler);this.tech_.on("waiting",waitingHandler);this.tech_.on(timerCancelEvents,cancelTimerHandler);this.tech_.on("canplay",canPlayHandler);this.dispose=function(){_this.logger_("dispose");_this.tech_.off("seekablechanged",fixesBadSeeksHandler);_this.tech_.off("waiting",waitingHandler);_this.tech_.off(timerCancelEvents,cancelTimerHandler);_this.tech_.off("canplay",canPlayHandler);if(_this.checkCurrentTimeTimeout_){window_1.clearTimeout(_this.checkCurrentTimeTimeout_)}_this.cancelTimer_()}}createClass$1(PlaybackWatcher,[{key:"monitorCurrentTime_",value:function monitorCurrentTime_(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){window_1.clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=window_1.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function checkCurrentTime_(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(this.lastRecordedTime===currentTime&&(!buffered.length||currentTime+SAFE_TIME_DELTA>=buffered.end(buffered.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&currentTime===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(currentTime===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=currentTime}}},{key:"cancelTimer_",value:function cancelTimer_(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function fixesBadSeeks_(){var seeking=this.tech_.seeking();if(!seeking){return false}var seekable=this.seekable();var currentTime=this.tech_.currentTime();var isAfterSeekableRange=this.afterSeekableWindow_(seekable,currentTime,this.media(),this.allowSeeksWithinUnsafeLiveWindow);var seekTo=void 0;if(isAfterSeekableRange){var seekableEnd=seekable.end(seekable.length-1);seekTo=seekableEnd}if(this.beforeSeekableWindow_(seekable,currentTime)){var seekableStart=seekable.start(0);seekTo=seekableStart+SAFE_TIME_DELTA}if(typeof seekTo!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+currentTime+" with "+("seekable range "+printableRange(seekable)+". Seeking to ")+(seekTo+"."));this.seekTo(seekTo);return true}return false}},{key:"waiting_",value:function waiting_(){if(this.techWaiting_()){return}var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();var currentRange=findRange(buffered,currentTime);if(currentRange.length&&currentTime+3<=currentRange.end(0)){this.cancelTimer_();this.seekTo(currentTime);this.logger_("Stopped at "+currentTime+" while inside a buffered region "+("["+currentRange.start(0)+" -> "+currentRange.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function techWaiting_(){var seekable=this.seekable();var currentTime=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(seekable,currentTime)){var livePoint=seekable.end(seekable.length-1);this.logger_("Fell out of live window at time "+currentTime+". Seeking to "+("live point (seekable end) "+livePoint));this.cancelTimer_();this.seekTo(livePoint);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var buffered=this.tech_.buffered();var nextRange=findNextRange(buffered,currentTime);if(this.videoUnderflow_(nextRange,buffered,currentTime)){this.cancelTimer_();this.seekTo(currentTime);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(nextRange.length>0){var difference=nextRange.start(0)-currentTime;this.logger_("Stopped at "+currentTime+", setting timer for "+difference+", seeking "+("to "+nextRange.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),difference*1e3,currentTime);return true}return false}},{key:"afterSeekableWindow_",value:function afterSeekableWindow_(seekable,currentTime,playlist){var allowSeeksWithinUnsafeLiveWindow=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!seekable.length){return false}var allowedEnd=seekable.end(seekable.length-1)+SAFE_TIME_DELTA;var isLive=!playlist.endList;if(isLive&&allowSeeksWithinUnsafeLiveWindow){allowedEnd=seekable.end(seekable.length-1)+playlist.targetDuration*3}if(currentTime>allowedEnd){return true}return false}},{key:"beforeSeekableWindow_",value:function beforeSeekableWindow_(seekable,currentTime){if(seekable.length&&seekable.start(0)>0&&currentTime<seekable.start(0)-SAFE_TIME_DELTA){return true}return false}},{key:"videoUnderflow_",value:function videoUnderflow_(nextRange,buffered,currentTime){if(nextRange.length===0){var gap=this.gapFromVideoUnderflow_(buffered,currentTime);if(gap){this.logger_("Encountered a gap in video from "+gap.start+" to "+gap.end+". "+("Seeking to current time "+currentTime));return true}}return false}},{key:"skipTheGap_",value:function skipTheGap_(scheduledCurrentTime){var buffered=this.tech_.buffered();var currentTime=this.tech_.currentTime();var nextRange=findNextRange(buffered,currentTime);this.cancelTimer_();if(nextRange.length===0||currentTime!==scheduledCurrentTime){return}this.logger_("skipTheGap_:","currentTime:",currentTime,"scheduled currentTime:",scheduledCurrentTime,"nextRange start:",nextRange.start(0));this.seekTo(nextRange.start(0)+TIME_FUDGE_FACTOR);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function gapFromVideoUnderflow_(buffered,currentTime){var gaps=findGaps(buffered);for(var i=0;i<gaps.length;i++){var start=gaps.start(i);var end=gaps.end(i);if(currentTime-start<4&&currentTime-start>2){return{start:start,end:end}}}return null}}]);return PlaybackWatcher}();var defaultOptions={errorInterval:30,getSource:function getSource(next){var tech=this.tech({IWillNotUseThisInPlugins:true});var sourceObj=tech.currentSource_;return next(sourceObj)}};var initPlugin=function initPlugin(player,options){var lastCalled=0;var seekTo=0;var localOptions=videojs$1.mergeOptions(defaultOptions,options);player.ready(function(){player.trigger({type:"usage",name:"hls-error-reload-initialized"})});var loadedMetadataHandler=function loadedMetadataHandler(){if(seekTo){player.currentTime(seekTo)}};var setSource=function setSource(sourceObj){if(sourceObj===null||sourceObj===undefined){return}seekTo=player.duration()!==Infinity&&player.currentTime()||0;player.one("loadedmetadata",loadedMetadataHandler);player.src(sourceObj);player.trigger({type:"usage",name:"hls-error-reload"});player.play()};var errorHandler=function errorHandler(){if(Date.now()-lastCalled<localOptions.errorInterval*1e3){player.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!localOptions.getSource||typeof localOptions.getSource!=="function"){videojs$1.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}lastCalled=Date.now();return localOptions.getSource.call(player,setSource)};var cleanupEvents=function cleanupEvents(){player.off("loadedmetadata",loadedMetadataHandler);player.off("error",errorHandler);player.off("dispose",cleanupEvents)};var reinitPlugin=function reinitPlugin(newOptions){cleanupEvents();initPlugin(player,newOptions)};player.on("error",errorHandler);player.on("dispose",cleanupEvents);player.reloadSourceOnError=reinitPlugin};var reloadSourceOnError=function reloadSourceOnError(options){initPlugin(this,options)};var version$1$1="1.9.3";videojs$1.use("*",function(player){return{setSource:function setSource(srcObj,next){next(null,srcObj)},setCurrentTime:function setCurrentTime(time){if(player.vhs&&player.currentSource().src===player.vhs.source_.src){player.vhs.setCurrentTime(time)}return time},play:function play(){if(player.vhs&&player.currentSource().src===player.vhs.source_.src){player.vhs.setCurrentTime(player.tech_.currentTime())}}}});var Hls$1={PlaylistLoader:PlaylistLoader,Playlist:Playlist,Decrypter:Decrypter,AsyncStream:AsyncStream,decrypt:decrypt,utils:utils$1,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:comparePlaylistBandwidth,comparePlaylistResolution:comparePlaylistResolution,xhr:xhrFactory()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(prop){Object.defineProperty(Hls$1,prop,{get:function get$$1(){videojs$1.log.warn("using Hls."+prop+" is UNSAFE be sure you know what you are doing");return Config[prop]},set:function set$$1(value){videojs$1.log.warn("using Hls."+prop+" is UNSAFE be sure you know what you are doing");if(typeof value!=="number"||value<0){videojs$1.log.warn("value of Hls."+prop+" must be greater than or equal to 0");return}Config[prop]=value}})});var LOCAL_STORAGE_KEY$1="videojs-vhs";var simpleTypeFromSourceType=function simpleTypeFromSourceType(type){var mpegurlRE=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(mpegurlRE.test(type)){return"hls"}var dashRE=/^application\/dash\+xml/i;if(dashRE.test(type)){return"dash"}return null};var handleHlsMediaChange=function handleHlsMediaChange(qualityLevels,playlistLoader){var newPlaylist=playlistLoader.media();var selectedIndex=-1;for(var i=0;i<qualityLevels.length;i++){if(qualityLevels[i].id===newPlaylist.uri){selectedIndex=i;break}}qualityLevels.selectedIndex_=selectedIndex;qualityLevels.trigger({selectedIndex:selectedIndex,type:"change"})};var handleHlsLoadedMetadata=function handleHlsLoadedMetadata(qualityLevels,hls){hls.representations().forEach(function(rep){qualityLevels.addQualityLevel(rep)});handleHlsMediaChange(qualityLevels,hls.playlists)};Hls$1.canPlaySource=function(){return videojs$1.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var emeKeySystems=function emeKeySystems(keySystemOptions,videoPlaylist,audioPlaylist){if(!keySystemOptions){return keySystemOptions}var keySystemContentTypes={};for(var keySystem in keySystemOptions){keySystemContentTypes[keySystem]={audioContentType:'audio/mp4; codecs="'+audioPlaylist.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+videoPlaylist.attributes.CODECS+'"'};if(videoPlaylist.contentProtection&&videoPlaylist.contentProtection[keySystem]&&videoPlaylist.contentProtection[keySystem].pssh){keySystemContentTypes[keySystem].pssh=videoPlaylist.contentProtection[keySystem].pssh}if(typeof keySystemOptions[keySystem]==="string"){keySystemContentTypes[keySystem].url=keySystemOptions[keySystem]}}return videojs$1.mergeOptions(keySystemOptions,keySystemContentTypes)};var setupEmeOptions=function setupEmeOptions(hlsHandler){if(hlsHandler.options_.sourceType!=="dash"){return}var player=videojs$1.players[hlsHandler.tech_.options_.playerId];if(player.eme){var sourceOptions=emeKeySystems(hlsHandler.source_.keySystems,hlsHandler.playlists.media(),hlsHandler.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());if(sourceOptions){player.currentSource().keySystems=sourceOptions;if(player.eme.initializeMediaKeys){player.eme.initializeMediaKeys()}}}};var getVhsLocalStorage=function getVhsLocalStorage(){if(!window.localStorage){return null}var storedObject=window.localStorage.getItem(LOCAL_STORAGE_KEY$1);if(!storedObject){return null}try{return JSON.parse(storedObject)}catch(e){return null}};var updateVhsLocalStorage=function updateVhsLocalStorage(options){if(!window.localStorage){return false}var objectToStore=getVhsLocalStorage();objectToStore=objectToStore?videojs$1.mergeOptions(objectToStore,options):options;try{window.localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(objectToStore))}catch(e){return false}return objectToStore};Hls$1.supportsNativeHls=function(){var video=document_1.createElement("video");if(!videojs$1.getTech("Html5").isSupported()){return false}var canPlay=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return canPlay.some(function(canItPlay){return/maybe|probably/i.test(video.canPlayType(canItPlay))})}();Hls$1.supportsNativeDash=function(){if(!videojs$1.getTech("Html5").isSupported()){return false}return/maybe|probably/i.test(document_1.createElement("video").canPlayType("application/dash+xml"))}();Hls$1.supportsTypeNatively=function(type){if(type==="hls"){return Hls$1.supportsNativeHls}if(type==="dash"){return Hls$1.supportsNativeDash}return false};Hls$1.isSupported=function(){return videojs$1.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var Component$1=videojs$1.getComponent("Component");var HlsHandler=function(_Component){inherits$1(HlsHandler,_Component);function HlsHandler(source,tech,options){classCallCheck$1(this,HlsHandler);var _this=possibleConstructorReturn$1(this,(HlsHandler.__proto__||Object.getPrototypeOf(HlsHandler)).call(this,tech,options.hls));if(tech.options_&&tech.options_.playerId){var _player=videojs$1(tech.options_.playerId);if(!_player.hasOwnProperty("hls")){Object.defineProperty(_player,"hls",{get:function get$$1(){videojs$1.log.warn("player.hls is deprecated. Use player.tech().hls instead.");tech.trigger({type:"usage",name:"hls-player-access"});return _this},configurable:true})}_player.vhs=_this;_player.dash=_this;_this.player_=_player}_this.tech_=tech;_this.source_=source;_this.stats={};_this.setOptions_();if(_this.options_.overrideNative&&tech.overrideNativeAudioTracks&&tech.overrideNativeVideoTracks){tech.overrideNativeAudioTracks(true);tech.overrideNativeVideoTracks(true)}else if(_this.options_.overrideNative&&(tech.featuresNativeVideoTracks||tech.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}_this.on(document_1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(event){var fullscreenElement=document_1.fullscreenElement||document_1.webkitFullscreenElement||document_1.mozFullScreenElement||document_1.msFullscreenElement;if(fullscreenElement&&fullscreenElement.contains(_this.tech_.el())){_this.masterPlaylistController_.smoothQualityChange_()}});_this.on(_this.tech_,"seeking",function(){if(this.tech_.currentTime()===0&&this.tech_.player_.loop()){this.setCurrentTime(0)}});_this.on(_this.tech_,"error",function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}});_this.on(_this.tech_,"play",_this.play);return _this}createClass$1(HlsHandler,[{key:"setOptions_",value:function setOptions_(){var _this2=this;this.options_.withCredentials=this.options_.withCredentials||false;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||false;this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions===false?false:true;this.options_.smoothQualityChange=this.options_.smoothQualityChange||false;this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!=="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||false;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){if(this.options_.useBandwidthFromLocalStorage){var storedObject=getVhsLocalStorage();if(storedObject&&storedObject.bandwidth){this.options_.bandwidth=storedObject.bandwidth;this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})}if(storedObject&&storedObject.throughput){this.options_.throughput=storedObject.throughput;this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"})}}}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=Config.INITIAL_BANDWIDTH}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH;
["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects"].forEach(function(option){if(typeof _this2.source_[option]!=="undefined"){_this2.options_[option]=_this2.source_[option]}});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function src(_src,type){var _this3=this;if(!_src){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=Hls$1;this.options_.sourceType=simpleTypeFromSourceType(type);this.options_.seekTo=function(time){_this3.tech_.setCurrentTime(time);_this3.setCurrentTime(time)};this.masterPlaylistController_=new MasterPlaylistController(this.options_);this.playbackWatcher_=new PlaybackWatcher(videojs$1.mergeOptions(this.options_,{seekable:function seekable$$1(){return _this3.seekable()},media:function media(){return _this3.masterPlaylistController_.media()}}));this.masterPlaylistController_.on("error",function(){var player=videojs$1.players[_this3.tech_.options_.playerId];player.error(_this3.masterPlaylistController_.error)});this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Hls$1.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=Hls$1.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function get$$1(){return this.masterPlaylistController_.selectPlaylist},set:function set$$1(selectPlaylist){this.masterPlaylistController_.selectPlaylist=selectPlaylist.bind(this)}},throughput:{get:function get$$1(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function set$$1(throughput){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=throughput;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function get$$1(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function set$$1(bandwidth){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=bandwidth;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function get$$1(){var invBandwidth=1/(this.bandwidth||1);var invThroughput=void 0;if(this.throughput>0){invThroughput=1/this.throughput}else{invThroughput=0}var systemBitrate=Math.floor(1/(invBandwidth+invThroughput));return systemBitrate},set:function set$$1(){videojs$1.log.error('The "systemBandwidth" property is read-only')}}});if(this.options_.bandwidth){this.bandwidth=this.options_.bandwidth}if(this.options_.throughput){this.throughput=this.options_.throughput}Object.defineProperties(this.stats,{bandwidth:{get:function get$$1(){return _this3.bandwidth||0},enumerable:true},mediaRequests:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function get$$1(){return _this3.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function get$$1(){return _this3.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function get$$1(){return _this3.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true},buffered:{get:function get$$1(){return timeRangesToArray(_this3.tech_.buffered())},enumerable:true},currentTime:{get:function get$$1(){return _this3.tech_.currentTime()},enumerable:true},currentSource:{get:function get$$1(){return _this3.tech_.currentSource_},enumerable:true},currentTech:{get:function get$$1(){return _this3.tech_.name_},enumerable:true},duration:{get:function get$$1(){return _this3.tech_.duration()},enumerable:true},master:{get:function get$$1(){return _this3.playlists.master},enumerable:true},playerDimensions:{get:function get$$1(){return _this3.tech_.currentDimensions()},enumerable:true},seekable:{get:function get$$1(){return timeRangesToArray(_this3.tech_.seekable())},enumerable:true},timestamp:{get:function get$$1(){return Date.now()},enumerable:true},videoPlaybackQuality:{get:function get$$1(){return _this3.tech_.getVideoPlaybackQuality()},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.tech_.on("bandwidthupdate",function(){if(_this3.options_.useBandwidthFromLocalStorage){updateVhsLocalStorage({bandwidth:_this3.bandwidth,throughput:Math.round(_this3.throughput)})}});this.masterPlaylistController_.on("selectedinitialmedia",function(){renditionSelectionMixin(_this3);setupEmeOptions(_this3)});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")});this.tech_.ready(function(){return _this3.setupQualityLevels_()});if(!this.tech_.el()){return}this.tech_.src(videojs$1.URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function setupQualityLevels_(){var _this4=this;var player=videojs$1.players[this.tech_.options_.playerId];if(player&&player.qualityLevels){this.qualityLevels_=player.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){handleHlsLoadedMetadata(_this4.qualityLevels_,_this4)});this.playlists.on("mediachange",function(){handleHlsMediaChange(_this4.qualityLevels_,_this4.playlists)})}}},{key:"play",value:function play(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function setCurrentTime(currentTime){this.masterPlaylistController_.setCurrentTime(currentTime)}},{key:"duration",value:function duration$$1(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function seekable$$1(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function dispose(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}if(this.player_){delete this.player_.vhs;delete this.player_.dash;delete this.player_.hls}if(this.tech_&&this.tech_.hls){delete this.tech_.hls}get$1(HlsHandler.prototype.__proto__||Object.getPrototypeOf(HlsHandler.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function convertToProgramTime(time,callback){return getProgramTime({playlist:this.masterPlaylistController_.media(),time:time,callback:callback})}},{key:"seekToProgramTime",value:function seekToProgramTime$$1(programTime,callback){var pauseAfterSeek=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var retryCount=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2;return seekToProgramTime({programTime:programTime,playlist:this.masterPlaylistController_.media(),retryCount:retryCount,pauseAfterSeek:pauseAfterSeek,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:callback})}}]);return HlsHandler}(Component$1);var HlsSourceHandler={name:"videojs-http-streaming",VERSION:version$1$1,canHandleSource:function canHandleSource(srcObj){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var localOptions=videojs$1.mergeOptions(videojs$1.options,options);return HlsSourceHandler.canPlayType(srcObj.type,localOptions)},handleSource:function handleSource(source,tech){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var localOptions=videojs$1.mergeOptions(videojs$1.options,options);tech.hls=new HlsHandler(source,tech,localOptions);tech.hls.xhr=xhrFactory();tech.hls.src(source.src,source.type);return tech.hls},canPlayType:function canPlayType(type){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _videojs$mergeOptions=videojs$1.mergeOptions(videojs$1.options,options),overrideNative=_videojs$mergeOptions.hls.overrideNative;var supportedType=simpleTypeFromSourceType(type);var canUseMsePlayback=supportedType&&(!Hls$1.supportsTypeNatively(supportedType)||overrideNative);return canUseMsePlayback?"maybe":""}};if(typeof videojs$1.MediaSource==="undefined"||typeof videojs$1.URL==="undefined"){videojs$1.MediaSource=MediaSource;videojs$1.URL=URL$1}if(MediaSource.supportsNativeMediaSources()){videojs$1.getTech("Html5").registerSourceHandler(HlsSourceHandler,0)}videojs$1.HlsHandler=HlsHandler;videojs$1.HlsSourceHandler=HlsSourceHandler;videojs$1.Hls=Hls$1;if(!videojs$1.use){videojs$1.registerComponent("Hls",Hls$1)}videojs$1.options.hls=videojs$1.options.hls||{};if(videojs$1.registerPlugin){videojs$1.registerPlugin("reloadSourceOnError",reloadSourceOnError)}else{videojs$1.plugin("reloadSourceOnError",reloadSourceOnError)}function _inheritsLoose$2(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}function _assertThisInitialized$2(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}var QualityLevel=function QualityLevel(representation){var level=this;if(videojs$1.browser.IS_IE8){level=document_1.createElement("custom");for(var prop in QualityLevel.prototype){if(prop!=="constructor"){level[prop]=QualityLevel.prototype[prop]}}}level.id=representation.id;level.label=level.id;level.width=representation.width;level.height=representation.height;level.bitrate=representation.bandwidth;level.enabled_=representation.enabled;Object.defineProperty(level,"enabled",{get:function get(){return level.enabled_()},set:function set(enable){level.enabled_(enable)}});return level};var QualityLevelList=function(_videojs$EventTarget){_inheritsLoose$2(QualityLevelList,_videojs$EventTarget);function QualityLevelList(){var _this;_this=_videojs$EventTarget.call(this)||this;var list=_assertThisInitialized$2(_assertThisInitialized$2(_this));if(videojs$1.browser.IS_IE8){list=document_1.createElement("custom");for(var prop in QualityLevelList.prototype){if(prop!=="constructor"){list[prop]=QualityLevelList.prototype[prop]}}}list.levels_=[];list.selectedIndex_=-1;Object.defineProperty(list,"selectedIndex",{get:function get(){return list.selectedIndex_}});Object.defineProperty(list,"length",{get:function get(){return list.levels_.length}});return list||_assertThisInitialized$2(_this)}var _proto=QualityLevelList.prototype;_proto.addQualityLevel=function addQualityLevel(representation){var qualityLevel=this.getQualityLevelById(representation.id);if(qualityLevel){return qualityLevel}var index=this.levels_.length;qualityLevel=new QualityLevel(representation);if(!(""+index in this)){Object.defineProperty(this,index,{get:function get(){return this.levels_[index]}})}this.levels_.push(qualityLevel);this.trigger({qualityLevel:qualityLevel,type:"addqualitylevel"});return qualityLevel};_proto.removeQualityLevel=function removeQualityLevel(qualityLevel){var removed=null;for(var i=0,l=this.length;i<l;i++){if(this[i]===qualityLevel){removed=this.levels_.splice(i,1)[0];if(this.selectedIndex_===i){this.selectedIndex_=-1}else if(this.selectedIndex_>i){this.selectedIndex_--}break}}if(removed){this.trigger({qualityLevel:qualityLevel,type:"removequalitylevel"})}return removed};_proto.getQualityLevelById=function getQualityLevelById(id){for(var i=0,l=this.length;i<l;i++){var level=this[i];if(level.id===id){return level}}return null};_proto.dispose=function dispose(){this.selectedIndex_=-1;this.levels_.length=0};return QualityLevelList}(videojs$1.EventTarget);QualityLevelList.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(var event$2 in QualityLevelList.prototype.allowedEvents_){QualityLevelList.prototype["on"+event$2]=null}var version$3="2.0.9";var registerPlugin=videojs$1.registerPlugin||videojs$1.plugin;var initPlugin$1=function initPlugin(player,options){var originalPluginFn=player.qualityLevels;var qualityLevelList=new QualityLevelList;var disposeHandler=function disposeHandler(){qualityLevelList.dispose();player.qualityLevels=originalPluginFn;player.off("dispose",disposeHandler)};player.on("dispose",disposeHandler);player.qualityLevels=function(){return qualityLevelList};player.qualityLevels.VERSION=version$3;return qualityLevelList};var qualityLevels=function qualityLevels(options){return initPlugin$1(this,videojs$1.mergeOptions({},options))};registerPlugin("qualityLevels",qualityLevels);qualityLevels.VERSION=version$3;var classCallCheck$2=function classCallCheck$2(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass$2=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var defineProperty$1=function defineProperty$1(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj};var get$2=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var inherits$2=function inherits$2(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};var possibleConstructorReturn$2=function possibleConstructorReturn$2(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof2(call))==="object"||typeof call==="function")?call:self};var slicedToArray$1=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var Component$2=videojs$1.getComponent("Component");var dom=videojs$1.dom;var Toggle=function(_Component){inherits$2(Toggle,_Component);function Toggle(player){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$checked=_ref.checked,checked=_ref$checked===undefined?false:_ref$checked,_ref$readonly=_ref.readonly,readonly=_ref$readonly===undefined?false:_ref$readonly;classCallCheck$2(this,Toggle);var _this=possibleConstructorReturn$2(this,(Toggle.__proto__||Object.getPrototypeOf(Toggle)).apply(this,arguments));_this._isReadonly=readonly;if(!_this._isReadonly){_this.on(["tap","click"],_this._onClick)}if(checked){_this.check()}return _this}createClass$2(Toggle,[{key:"createEl",value:function createEl(){var el=dom.createEl("div",{className:"vjs-toggle"});this._input=dom.createEl("input",{className:"vjs-toggle-input"},{id:this.id(),type:"checkbox"});this._label=dom.createEl("label",{className:"vjs-toggle-label"},{"for":this.id()});el.appendChild(this._input);el.appendChild(this._label);return el}},{key:"check",value:function check(){this._input.setAttribute("checked","true");this._isChecked=true;this.trigger("check")}},{key:"uncheck",value:function uncheck(){this._input.removeAttribute("checked");this._isChecked=false;this.trigger("uncheck")}},{key:"_onClick",value:function _onClick(){if(this._isChecked){this.uncheck()}else{this.check()}}}]);return Toggle}(Component$2);videojs$1.registerComponent("Toggle",Toggle);function assert(desc,test){if(!test){throw new Error("Assertion Failed: "+desc)}}var Player$1=videojs$1.getComponent("Player");function classFromRatio(ratio){var parts=ratio.split(":");return"vjs-"+parts[0]+"-"+parts[1]}var supportedRatios=["auto","16:9","4:3","1:1"];var PlayerExt=function(_Player){inherits$2(PlayerExt,_Player);function PlayerExt(){classCallCheck$2(this,PlayerExt);return possibleConstructorReturn$2(this,(PlayerExt.__proto__||Object.getPrototypeOf(PlayerExt)).apply(this,arguments))}createClass$2(PlayerExt,[{key:"aspectRatio",value:function aspectRatio(ratio){if(ratio===undefined){return this.aspectRatio_}assert("media-player: Aspect ratio "+ratio+" is not supported",supportedRatios.indexOf(ratio)>-1);if(this.aspectRatio_&&this.aspectRatio_!=="auto"){this.removeClass(classFromRatio(this.aspectRatio_))}if(ratio!=="auto"){this.addClass(classFromRatio(ratio))}this.aspectRatio_=ratio;return ratio}}]);return PlayerExt}(Player$1);videojs$1.registerComponent("Player",PlayerExt);var Component$3=videojs$1.getComponent("Component");var dom$1=videojs$1.dom;var CustomCaptionsDisplay=function(_Component){inherits$2(CustomCaptionsDisplay,_Component);function CustomCaptionsDisplay(player){classCallCheck$2(this,CustomCaptionsDisplay);var _this=possibleConstructorReturn$2(this,(CustomCaptionsDisplay.__proto__||Object.getPrototypeOf(CustomCaptionsDisplay)).apply(this,arguments));_this.addClass("vjs-custom-captions-display");_this.hide();_this.one(player,"playing",_this._onPlaying);return _this}createClass$2(CustomCaptionsDisplay,[{key:"contentEl",value:function contentEl(){return this._cue}},{key:"hide",value:function hide(){get$2(CustomCaptionsDisplay.prototype.__proto__||Object.getPrototypeOf(CustomCaptionsDisplay.prototype),"hide",this).call(this);if(!this._hasPlayed){this._showOnPlayed=false}}},{key:"show",value:function show(){if(this._hasPlayed){get$2(CustomCaptionsDisplay.prototype.__proto__||Object.getPrototypeOf(CustomCaptionsDisplay.prototype),"show",this).call(this)}else{this._showOnPlayed=true}}},{key:"createEl",value:function createEl(){this._display=dom$1.createEl("div",undefined,{"class":"vjs-custom-captions-display"});this._cue=dom$1.createEl("div",undefined,{"class":"vjs-custom-captions-cue",id:this.id()});return dom$1.appendContent(this._display,this._cue)}},{key:"setText",value:function setText(text){dom$1.textContent(this.contentEl(),text)}},{key:"_onPlaying",value:function _onPlaying(){this._hasPlayed=true;if(this._showOnPlayed){this.show()}}}]);return CustomCaptionsDisplay}(Component$3);videojs$1.registerComponent("CustomCaptionsDisplay",CustomCaptionsDisplay);var mergeOptions$3=videojs$1.mergeOptions;var Button$1=videojs$1.getComponent("Button");var ACTIVE_CLASS="vjs-captions-active";var USER_PREFS_KEY="captions";var DEFAULTS={useCustomCaptions:false,selected:false};var CaptionsToggle=function(_Button){inherits$2(CaptionsToggle,_Button);function CaptionsToggle(player,options){classCallCheck$2(this,CaptionsToggle);var _this=possibleConstructorReturn$2(this,(CaptionsToggle.__proto__||Object.getPrototypeOf(CaptionsToggle)).call(this,player,mergeOptions$3({},DEFAULTS,options)));_this._player=player;_this._isActive=false;if(!_this.options_.useCustomCaptions){_this.hide()}_this.controlText("Show Captions");_this.addClass("vjs-captions-toggle");if(_this._player.usingPlugin("userPreferences")){_this._userPrefs=_this._player.userPreferences();_this._player.ready(function(){if(_this._userPrefs.get(USER_PREFS_KEY)){_this.activate()}})}if(!_this.options_.useCustomCaptions){var textTracks=_this._player.textTracks();if(textTracks){_this.on(textTracks,"addtrack",_this._handleAddTrack)}}return _this}createClass$2(CaptionsToggle,[{key:"handleClick",value:function handleClick(){if(this._isActive){this.deactivate()}else{this.activate()}if(this._userPrefs){this._userPrefs.set(USER_PREFS_KEY,this._isActive)}}},{key:"activate",value:function activate(){if(this._isActive){return}if(this.options_.useCustomCaptions){this._player.getChild("customCaptionsDisplay").show()}else if(this._textTrack){this._textTrack.mode="showing"}this.addClass(ACTIVE_CLASS);this.controlText("Hide Captions");this._isActive=true;this.trigger("activate")}},{key:"deactivate",value:function deactivate(){if(!this._isActive){return}if(this.options_.useCustomCaptions){this._player.getChild("customCaptionsDisplay").hide()}else if(this._textTrack){this._textTrack.mode="hidden"}this.removeClass(ACTIVE_CLASS);this.controlText("Show Captions");this._isActive=false;this.trigger("deactivate")}},{key:"_handleAddTrack",value:function _handleAddTrack(event){if(event.track&&event.track.kind==="captions"){this._textTrack=event.track;this.show();if(this.options_.selected&&!this._hasShownCaptions){this._hasShownCaptions=true;this.activate()}this.trigger("addCaptionsTrack")}}}]);return CaptionsToggle}(Button$1);videojs$1.registerComponent("CaptionsToggle",CaptionsToggle);var Button$2=videojs$1.getComponent("Button");var PreviousButton=function(_Button){inherits$2(PreviousButton,_Button);function PreviousButton(player,_ref){var _ref$disabled=_ref.disabled,disabled=_ref$disabled===undefined?false:_ref$disabled;classCallCheck$2(this,PreviousButton);var _this=possibleConstructorReturn$2(this,(PreviousButton.__proto__||Object.getPrototypeOf(PreviousButton)).apply(this,arguments));_this.controlText("Previous");_this.addClass("vjs-previous-button");if(disabled){_this.disable()}return _this}createClass$2(PreviousButton,[{key:"handleClick",value:function handleClick(){this.trigger("previous")}}]);return PreviousButton}(Button$2);videojs$1.registerComponent("PreviousButton",PreviousButton);var Button$3=videojs$1.getComponent("Button");var NextButton=function(_Button){inherits$2(NextButton,_Button);function NextButton(player,_ref){var _ref$disabled=_ref.disabled,disabled=_ref$disabled===undefined?false:_ref$disabled;classCallCheck$2(this,NextButton);var _this=possibleConstructorReturn$2(this,(NextButton.__proto__||Object.getPrototypeOf(NextButton)).apply(this,arguments));_this.controlText("Next");_this.addClass("vjs-next-button");if(disabled){_this.disable()}return _this}createClass$2(NextButton,[{key:"handleClick",value:function handleClick(){this.trigger("next")}}]);return NextButton}(Button$3);videojs$1.registerComponent("NextButton",NextButton);var Button$4=videojs$1.getComponent("Button");var DEFAULTS$1={DURATION:10};var SkipAheadButton=function(_Button){inherits$2(SkipAheadButton,_Button);function SkipAheadButton(player,_ref){var _ref$duration=_ref.duration,duration=_ref$duration===undefined?DEFAULTS$1.DURATION:_ref$duration;classCallCheck$2(this,SkipAheadButton);var _this=possibleConstructorReturn$2(this,(SkipAheadButton.__proto__||Object.getPrototypeOf(SkipAheadButton)).apply(this,arguments));_this._player=player;_this._duration=duration;_this.controlText("Skip ahead");_this.addClass("vjs-skip-ahead-button");return _this}createClass$2(SkipAheadButton,[{key:"handleClick",value:function handleClick(){var maybeAheadTime=this._player.currentTime()+this._duration;var skipTime=maybeAheadTime>=this._player.duration()?0:maybeAheadTime;this._player.currentTime(skipTime);this.trigger("skipAhead")}}]);return SkipAheadButton}(Button$4);videojs$1.registerComponent("SkipAheadButton",SkipAheadButton);var Button$5=videojs$1.getComponent("Button");var DEFAULTS$2={DURATION:10};var SkipBackButton=function(_Button){inherits$2(SkipBackButton,_Button);function SkipBackButton(player,_ref){var _ref$duration=_ref.duration,duration=_ref$duration===undefined?DEFAULTS$2.DURATION:_ref$duration;classCallCheck$2(this,SkipBackButton);var _this=possibleConstructorReturn$2(this,(SkipBackButton.__proto__||Object.getPrototypeOf(SkipBackButton)).apply(this,arguments));_this._player=player;_this._duration=duration;_this.controlText("Skip back");_this.addClass("vjs-skip-back-button");return _this}createClass$2(SkipBackButton,[{key:"handleClick",value:function handleClick(){var maybeSkipTime=this._player.currentTime()-this._duration;var skipTime=maybeSkipTime<0?0:maybeSkipTime;this._player.currentTime(skipTime);this.trigger("skipBack")}}]);return SkipBackButton}(Button$5);videojs$1.registerComponent("SkipBackButton",SkipBackButton);var VIDEO_CONTROL_NAMES={VIDEO_TOOLBAR_PLAY:"video_toolbar_play",VIDEO_TOOLBAR_PAUSE:"video_toolbar_pause",VIDEO_TOOLBAR_MUTE_UNMUTE:"video_toolbar_mute_unmute",VIDEO_TOOLBAR_VOLUME_SLIDER:"video_toolbar_volume_slider",VIDEO_TOOLBAR_FULLSCREEN_TOGGLE:"video_toolbar_fullscreen_toggle",VIDEO_TOOLBAR_SCRUBBER:"video_toolbar_scrubber",VIDEO_TOOLBAR_REPLAY:"video_toolbar_replay",VIDEO_BACK_TO_START:"video_toolbar_back_to_start"};var CONTROL_INTERACTIONS={SHORT_PRESS:"SHORT_PRESS",DRAG:"DRAG",SWIPE_RIGHT:"SWIPE_RIGHT",SWIPE_LEFT:"SWIPE_LEFT"};var Button$6=videojs$1.getComponent("Button");var BackToStartButton=function(_Button){inherits$2(BackToStartButton,_Button);function BackToStartButton(player){classCallCheck$2(this,BackToStartButton);var _this=possibleConstructorReturn$2(this,(BackToStartButton.__proto__||Object.getPrototypeOf(BackToStartButton)).apply(this,arguments));_this._player=player;_this.controlText("Back to start");_this.addClass("vjs-back-to-start-button");return _this}createClass$2(BackToStartButton,[{key:"handleClick",value:function handleClick(){this._player.currentTime(0);if(this._player.usingPlugin("controlInteraction")){this._player.controlInteraction().fireControlInteractionEvent({controlName:VIDEO_CONTROL_NAMES.VIDEO_BACK_TO_START})}this.trigger("backToStart")}}]);return BackToStartButton}(Button$6);videojs$1.registerComponent("BackToStartButton",BackToStartButton);var PlaybackRateMenuButton$1=videojs$1.getComponent("PlaybackRateMenuButton");var Menu$1=videojs$1.getComponent("Menu");var PlaybackRateMenuItem$1=videojs$1.getComponent("PlaybackRateMenuItem");var dom$2=videojs$1.dom;var PlaybackRateMenuButtonExt=function(_PlaybackRateMenuButt){inherits$2(PlaybackRateMenuButtonExt,_PlaybackRateMenuButt);function PlaybackRateMenuButtonExt(){classCallCheck$2(this,PlaybackRateMenuButtonExt);return possibleConstructorReturn$2(this,(PlaybackRateMenuButtonExt.__proto__||Object.getPrototypeOf(PlaybackRateMenuButtonExt)).apply(this,arguments))}createClass$2(PlaybackRateMenuButtonExt,[{key:"createMenu",value:function createMenu(){var _this2=this;var menu=new Menu$1(this.player(),{menuButton:this});var rates=this.playbackRates();if(rates){rates.forEach(function(rate){var item=new PlaybackRateMenuItem$1(_this2.player(),{rate:rate+"x"});var icon=dom$2.createEl("span",{className:"vjs-icon-placeholder"});dom$2.prependTo(icon,item.el());item.addClass("vjs-menu-item-checkable");menu.addItem(item)})}return menu}},{key:"handleClick",value:function handleClick(){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}}}]);return PlaybackRateMenuButtonExt}(PlaybackRateMenuButton$1);videojs$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButtonExt);var Component$4=videojs$1.getComponent("Component");var dom$3=videojs$1.dom;var SIDES={LEFT:"LEFT",RIGHT:"RIGHT"};var SIDE_CLASS_NAMES={LEFT:"vjs-tooltip-left",RIGHT:"vjs-tooltip-right"};var ControlTooltip=function(_Component){inherits$2(ControlTooltip,_Component);function ControlTooltip(player){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},control=_ref.control;classCallCheck$2(this,ControlTooltip);assert("tooltip: must be pased a control",control);assert("tooltip: control must have a controlText method",control.controlText);var _this=possibleConstructorReturn$2(this,(ControlTooltip.__proto__||Object.getPrototypeOf(ControlTooltip)).apply(this,arguments));_this._player=player;_this._control=control;_this.setText(control.controlText_);var origControlText=control.controlText;control.controlText=function(text,el){_this.setText(text);origControlText.call(control,text,el)};_this.on(control,"mouseenter",_this._onMouseenter);_this.on(control,"mouseleave",_this._onMouseleave);_this.on(control,"dispose",function(){return _this.dispose()});return _this}createClass$2(ControlTooltip,[{key:"createEl",value:function createEl(){var sideClass=SIDE_CLASS_NAMES[this.options_.side]||"";return get$2(ControlTooltip.prototype.__proto__||Object.getPrototypeOf(ControlTooltip.prototype),"createEl",this).call(this,"div",{className:"vjs-tooltip "+sideClass},{"aria-hidden":"true",role:"tooltip"})}},{key:"show",value:function show(){if(this._isShowing){return}this.addClass("vjs-tooltip-active");this._control.el().removeAttribute("title");this._isShowing=true}},{key:"hide",value:function hide(){if(!this._isShowing){return}this.removeClass("vjs-tooltip-active");this._control.el().setAttribute("title",this._text);this._isShowing=false}},{key:"setText",value:function setText(text){var localizedText=this._player.localize(text);dom$3.textContent(this.el(),localizedText);this._text=localizedText}},{key:"_onMouseenter",value:function _onMouseenter(){this.show()}},{key:"_onMouseleave",value:function _onMouseleave(){this.hide()}}]);return ControlTooltip}(Component$4);ControlTooltip.prototype.options_={name:"ControlTooltip"};videojs$1.registerComponent("ControlTooltip",ControlTooltip);var Menu$2=videojs$1.getComponent("Menu");var dom$4=videojs$1.dom;var SUB_MENU_ACTIVE_CLASS="vjs-settings-menu-sub-menu-active";var SettingsMenu=function(_Menu){inherits$2(SettingsMenu,_Menu);function SettingsMenu(){classCallCheck$2(this,SettingsMenu);var _this=possibleConstructorReturn$2(this,(SettingsMenu.__proto__||Object.getPrototypeOf(SettingsMenu)).apply(this,arguments));_this.on("focusout",_this._onFocusout);return _this}createClass$2(SettingsMenu,[{key:"createEl",value:function createEl(){var el=get$2(SettingsMenu.prototype.__proto__||Object.getPrototypeOf(SettingsMenu.prototype),"createEl",this).apply(this,arguments);dom$4.addClass(el,"vjs-settings-menu");this._subMenus=dom$4.createEl("div",{className:"vjs-settings-menu-sub-menus"});el.appendChild(this._subMenus);return el}},{key:"addItem",value:function addItem(component){var _this2=this;this.addChild(component);var subMenu=component.getMenu();if(subMenu){this._subMenus.appendChild(subMenu.el());this.on(component,"select",function(){return _this2._onSelectSubMenu(component)});this.on(component,"deselect",function(){return _this2._onDeselectSubMenu(component)})}}},{key:"_onFocusout",value:function _onFocusout(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},relatedTarget=_ref.relatedTarget;if(this.menuButton_&&!this.el().contains(relatedTarget)&&!this.menuButton_.el().contains(relatedTarget)){this.menuButton_.unpressButton()}}},{key:"_onSelectSubMenu",value:function _onSelectSubMenu(component){var menu=component.getMenu();if(menu){menu.focus();this.addClass(SUB_MENU_ACTIVE_CLASS)}}},{key:"_onDeselectSubMenu",value:function _onDeselectSubMenu(component){var menu=component.getMenu();if(menu){this.removeClass(SUB_MENU_ACTIVE_CLASS);component.focus()}}}]);return SettingsMenu}(Menu$2);videojs$1.registerComponent("SettingsMenu",SettingsMenu);var MenuItem$1=videojs$1.getComponent("MenuItem");
var dom$5=videojs$1.dom,mergeOptions$4=videojs$1.mergeOptions;var ACTIVE_CLASS$1="vjs-settings-menu-item-active";var DEFAULTS$3={selectable:true,valueText:undefined};var SettingsMenuItem=function(_MenuItem){inherits$2(SettingsMenuItem,_MenuItem);function SettingsMenuItem(player,options){classCallCheck$2(this,SettingsMenuItem);return possibleConstructorReturn$2(this,(SettingsMenuItem.__proto__||Object.getPrototypeOf(SettingsMenuItem)).call(this,player,mergeOptions$4({},DEFAULTS$3,options)))}createClass$2(SettingsMenuItem,[{key:"createMenu",value:function createMenu(){}},{key:"getMenu",value:function getMenu(){return this._menu}},{key:"createEl",value:function createEl(){var _this2=this;var el=get$2(SettingsMenuItem.prototype.__proto__||Object.getPrototypeOf(SettingsMenuItem.prototype),"createEl",this).apply(this,arguments);var _options_=this.options_,valueText=_options_.valueText,icon=_options_.icon;dom$5.addClass(el,"vjs-settings-menu-item");this._menu=this.createMenu();this._value=dom$5.createEl("div",{className:"vjs-settings-menu-item-value"});if(valueText){this.setValueText(valueText)}el.appendChild(this._value);if(icon){dom$5.prependTo(dom$5.createEl("span",{className:"vjs-icon-placeholder"}),el)}if(this._menu){var header=new SettingsMenuItem(this.player(),{label:this.options_.label,icon:true,selectable:false});header.addClass("vjs-settings-menu-item-header");header.on(["tap","click"],function(){_this2.selected(false)});this._menu.addChild(header,{},0);dom$5.addClass(el,"vjs-settings-menu-item-expandable");el.appendChild(dom$5.createEl("span",{className:"vjs-icon-placeholder"}));el.setAttribute("aria-haspopup","true");el.setAttribute("aria-expanded","false")}return el}},{key:"setValueText",value:function setValueText(text){if(text){dom$5.textContent(this._value,this.localize(text))}}},{key:"selected",value:function selected(isSelected){get$2(SettingsMenuItem.prototype.__proto__||Object.getPrototypeOf(SettingsMenuItem.prototype),"selected",this).apply(this,arguments);if(this.selectable){if(isSelected){this._select()}else{this._deselect()}}}},{key:"_select",value:function _select(){if(this._menu){this._menu.addClass(ACTIVE_CLASS$1);this.el().setAttribute("aria-expanded","true")}this.trigger("select")}},{key:"_deselect",value:function _deselect(){if(this._menu){this._menu.removeClass(ACTIVE_CLASS$1);this.el().setAttribute("aria-expanded","false")}this.trigger("deselect")}}]);return SettingsMenuItem}(MenuItem$1);videojs$1.registerComponent("SettingsMenuItem",SettingsMenuItem);function capitalize(){var str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str.charAt(0).toUpperCase()+str.slice(1)}var SettingsMenu$1=videojs$1.getComponent("SettingsMenu");var MenuButton$1=videojs$1.getComponent("MenuButton");var SettingsMenuButton=function(_MenuButton){inherits$2(SettingsMenuButton,_MenuButton);function SettingsMenuButton(){classCallCheck$2(this,SettingsMenuButton);var _this=possibleConstructorReturn$2(this,(SettingsMenuButton.__proto__||Object.getPrototypeOf(SettingsMenuButton)).apply(this,arguments));_this.addClass("vjs-settings-menu-button");return _this}createClass$2(SettingsMenuButton,[{key:"createMenu",value:function createMenu(){var menu=new SettingsMenu$1(this.player(),{menuButton:this});this.hideThreshold_=0;if(!this.items){this.items=this.createItems()}this.items.forEach(function(item){menu.addItem(item)});return menu}},{key:"createItems",value:function createItems(){var _this2=this;var items=void 0;var itemOptions=this.options_&&this.options_.items||[];if(Array.isArray(itemOptions)){items=itemOptions;itemOptions={}}else{items=Object.keys(itemOptions)}return items.map(function(itemName){var componentName=capitalize(itemName);var ItemComponent=videojs$1.getComponent(componentName);assert("settings-menu: Component "+componentName+" must exist",ItemComponent);var item=new ItemComponent(_this2.player(),itemOptions[itemName]||{});item.addClass("vjs-settings-menu-button-item");return item})}}]);return SettingsMenuButton}(MenuButton$1);SettingsMenuButton.prototype.controlText_="Settings";videojs$1.registerComponent("SettingsMenuButton",SettingsMenuButton);function isPresent(value){return!!value||value===false||value===0}var mergeOptions$5=videojs$1.mergeOptions;var SettingsMenuItem$1=videojs$1.getComponent("SettingsMenuItem");var Toggle$1=videojs$1.getComponent("Toggle");var DEFAULTS$4={multiselectable:true,selected:true};var AutoplaySetting=function(_SettingsMenuItem){inherits$2(AutoplaySetting,_SettingsMenuItem);function AutoplaySetting(player,options){classCallCheck$2(this,AutoplaySetting);var _this=possibleConstructorReturn$2(this,(AutoplaySetting.__proto__||Object.getPrototypeOf(AutoplaySetting)).call(this,player,mergeOptions$5({},DEFAULTS$4,options)));_this.addClass("vjs-autoplay-setting");if(player.usingPlugin("userPreferences")){_this._userPrefs=player.userPreferences();_this._userPrefsKey=_this.options_.userPrefsKey;player.ready(function(){var autoplayPref=_this._userPrefs.get(_this._userPrefsKey);if(isPresent(autoplayPref)){_this.selected(autoplayPref)}})}return _this}createClass$2(AutoplaySetting,[{key:"createEl",value:function createEl(){var el=get$2(AutoplaySetting.prototype.__proto__||Object.getPrototypeOf(AutoplaySetting.prototype),"createEl",this).apply(this,arguments);this._toggle=this._createToggle();el.appendChild(this._toggle.el());return el}},{key:"handleClick",value:function handleClick(){this.selected(!this.isSelected_);if(this._userPrefs){this._userPrefs.set(this._userPrefsKey,this.isSelected_)}}},{key:"selected",value:function selected(isSelected){if(isPresent(isSelected)){get$2(AutoplaySetting.prototype.__proto__||Object.getPrototypeOf(AutoplaySetting.prototype),"selected",this).apply(this,arguments);if(isSelected){this.setValueText("On");this._toggle.check()}else{this.setValueText("Off");this._toggle.uncheck()}}return this.isSelected_}},{key:"_createToggle",value:function _createToggle(){var toggle=new Toggle$1(this.player(),{readonly:true});toggle.el().setAttribute("aria-hidden","true");return toggle}}]);return AutoplaySetting}(SettingsMenuItem$1);AutoplaySetting.prototype.options_=mergeOptions$5(SettingsMenuItem$1.prototype.options_,{label:"Autoplay",name:"AutoplaySetting",userPrefsKey:"autoplay"});videojs$1.registerComponent("AutoplaySetting",AutoplaySetting);var mergeOptions$6=videojs$1.mergeOptions;var SettingsMenu$2=videojs$1.getComponent("SettingsMenu");var SettingsMenuItem$2=videojs$1.getComponent("SettingsMenuItem");var DEFAULTS$5={multiselectable:false,selected:false};var QualitySetting=function(_SettingsMenuItem){inherits$2(QualitySetting,_SettingsMenuItem);function QualitySetting(player,options){classCallCheck$2(this,QualitySetting);var _this=possibleConstructorReturn$2(this,(QualitySetting.__proto__||Object.getPrototypeOf(QualitySetting)).call(this,player,mergeOptions$6({},DEFAULTS$5,options)));assert("quality-setting: The qualityLevels plugin is required",player.hasPlugin("qualityLevels"));_this.addClass("vjs-quality-setting");_this._qualityLevels=player.qualityLevels();_this._items=[];_this._selectedItem=null;if(player.usingPlugin("userPreferences")){_this._userPrefs=player.userPreferences();_this._userPrefsKey=_this.options_.userPrefsKey}_this.on(_this._qualityLevels,"addqualitylevel",_this._onAddQualityLevel);_this.one(_this.player_,"loadedmetadata",_this._onLoadedMetadata);_this.player_.ready(function(){_this._isHLS=_this.player_.tech({IWillNotUseThisInPlugins:true}).hls;if(_this._isHLS){_this._addQualityLevelMenuItem({height:"auto"})}});return _this}createClass$2(QualitySetting,[{key:"createMenu",value:function createMenu(){var menu=new SettingsMenu$2(this.player_);menu.addClass("vjs-quality-setting-sub-menu");return menu}},{key:"_onLoadedMetadata",value:function _onLoadedMetadata(){var qualityLevels=this._qualityLevels;var qualityPref=this._userPrefs&&this._userPrefs.get(this._userPrefsKey);var selectedQuality=this._items[qualityPref]&&qualityPref;if(!selectedQuality){if(this._isHLS){selectedQuality="auto"}else{var selectedLevel=qualityLevels[qualityLevels.selectedIndex];selectedQuality=selectedLevel&&selectedLevel.height}}var item=this._items[selectedQuality];if(item){item.selected(true)}}},{key:"_onAddQualityLevel",value:function _onAddQualityLevel(_ref){var qualityLevel=_ref.qualityLevel;this._addQualityLevelMenuItem(qualityLevel)}},{key:"_addQualityLevelMenuItem",value:function _addQualityLevelMenuItem(qualityLevel){var _this2=this;var height=qualityLevel.height;var item=new SettingsMenuItem$2(this.player_,{icon:true,label:this._formatLabel(height),selected:false});this.on(item,"select",function(){_this2.trigger("change",qualityLevel);_this2._onSelectQuality(qualityLevel)});item.addClass("vjs-quality-setting-level");item.addClass("vjs-menu-item-checkable");this._items[height]=item;this._menu.addItem(item)}},{key:"_getSelectedQualityLevel",value:function _getSelectedQualityLevel(){if(!this._qualityLevels){return null}var qualityLevels=this._qualityLevels;return qualityLevels[qualityLevels.selectedIndex]}},{key:"_onSelectQuality",value:function _onSelectQuality(_ref2){var height=_ref2.height;var qualityLevels=this._qualityLevels;var selectedItem=this._items[height];if(this._selectedItem){this._selectedItem.selected(false)}for(var i=0;i<qualityLevels.length;i++){var qualityLevel=qualityLevels[i];qualityLevel.enabled=qualityLevel.height===height||height==="auto"}this.setValueText(this._formatLabel(height));this._selectedItem=selectedItem;this.selected(false);if(this._userPrefs){this._userPrefs.set(this._userPrefsKey,height)}}},{key:"_formatLabel",value:function _formatLabel(quality){if(quality==="auto"){return"Auto"}return quality+"p"}}]);return QualitySetting}(SettingsMenuItem$2);QualitySetting.prototype.options_=mergeOptions$6(SettingsMenuItem$2.prototype.options_,{label:"Quality",name:"QualitySetting",userPrefsKey:"quality"});videojs$1.registerComponent("QualitySetting",QualitySetting);var webTrackingTransport=createCommonjsModule$1(function(module,exports){(function(global,factory){if(typeof undefined==="function"&&undefined.amd){undefined(["exports","module"],factory)}else{factory(exports,module)}})(commonjsGlobal$1,function(exports,module){var isBrowser=typeof window!=="undefined"&&window&&window.appEnvironment!=="node";var useRequestIdleCallback=isBrowser&&!!window.requestIdleCallback;var idleThreshold=8;var webTrackingTransport={AJAX_METHOD:"POST",DEFAULT_PAGE_TYPE:"ajax",globalTrackingUrl:null,globalTrackingAppId:"no.app.id",queue:[],paused:false,maxQueueSize:1,queueTimeout:1e3,timeoutId:null,csrfToken:"",testId:"",testSegId:"",setProperty:function setProperty(key,value){if(value){this[key]=value}},setTrackingUrl:function setTrackingUrl(trackingUrl){this.setProperty("globalTrackingUrl",trackingUrl)},setAppId:function setAppId(appId){this.setProperty("globalTrackingAppId",appId)},setCsrfToken:function setCsrfToken(token){this.setProperty("csrfToken",token)},setTestId:function setTestId(testId){this.setProperty("testId",testId)},setTestSegId:function setTestSegId(testSegId){this.setProperty("testSegId",testSegId)},getCookieString:function getCookieString(){return document.cookie},getCsrfToken:function getCsrfToken(){var token="JSESSIONID=";var ca=this.getCookieString().split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1)}if(c.indexOf(token)!==-1){var value=c.substring(token.length,c.length);if(value[0]==='"'&&value[value.length-1]==='"'){value=value.substring(1,value.length-1)}return value}}return""},createXmlHttpObject:function createXmlHttpObject(){return isBrowser&&!!window.XMLHttpRequest?new XMLHttpRequest:null},ajax:function ajax(postData,success,failure,trackingEndpointUrl){var req;trackingEndpointUrl=trackingEndpointUrl||this.globalTrackingUrl;if(!trackingEndpointUrl){if(failure){failure("Tracking url is not defined")}return}req=this.createXmlHttpObject();if(!req){return}req.open(this.AJAX_METHOD,trackingEndpointUrl,true);req.withCredentials=true;req.setRequestHeader("Content-type","application/json");if(!this.csrfToken){req.setRequestHeader("Csrf-Token",this.getCsrfToken())}else{req.setRequestHeader("Csrf-Token",this.csrfToken)}if(this.testId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_ID",this.testId)}if(this.testSegId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_SEGMENT_ID",this.testSegId)}req.onreadystatechange=function(){if(req.readyState!==4){return}if(req.status!==200&&req.status!==304){if(failure){failure(req)}return}if("function"===typeof success){success(req)}};if(req.readyState===4){return}req.send(postData)},pause:function pause(){this.paused=true},unpause:function unpause(){this.paused=false;if(this.queue.length>=this.maxQueueSize){this.flush()}},flush:function flush(){if(this.queue.length>0){var self=this;this.ajax(JSON.stringify(this.queue),null,self.logError);this.queue=[]}if(useRequestIdleCallback){cancelIdleCallback(this.timeoutId)}else{clearTimeout(this.timeoutId)}this.timeoutId=null;this.paused=false},idleFlush:function idleFlush(timeout){var _this=this;var startTime=Date.now();return requestIdleCallback(function(deadline){if(deadline.timeRemaining()>idleThreshold||deadline.didTimeout){_this.flush()}else{_this.timeoutId=_this.idleFlush(timeout-(Date.now()-startTime))}},{timeout:timeout})},addToQueue:function addToQueue(payload){this.queue.push(payload);if(this.queue.length>=this.maxQueueSize&&!this.paused){return this.flush()}if(!this.timeoutId){var self=this;if(useRequestIdleCallback&&!this.paused){this.timeoutId=this.idleFlush(this.queueTimeout)}else{this.timeoutId=setTimeout(function(){self.flush()},this.queueTimeout)}}},validateEvent:function validateEvent(eventInfoOrName,eventBody,callback){this.ajax(JSON.stringify([{eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)}]),function(requestObject){return callback(null,requestObject)},function(requestObject){return callback(requestObject)},this.globalTrackingUrl+"/validate")},sendEvent:function sendEvent(eventInfoOrName,eventBody){this.addToQueue({eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)})},getTimestamp:function getTimestamp(){return Math.round((new Date).getTime()/1e3)},populateEventInfo:function populateEventInfo(eventInfo){if(typeof eventInfo==="string"){eventInfo={eventName:eventInfo}}if(!eventInfo||(typeof eventInfo==="undefined"?"undefined":_typeof2(eventInfo))!=="object"){this.logError("Event info must be object");return{}}if(!eventInfo.appId){eventInfo.appId=this.globalTrackingAppId}return eventInfo},populateEventHeaders:function populateEventHeaders(eventBody){if(!eventBody||(typeof eventBody==="undefined"?"undefined":_typeof2(eventBody))!=="object"){this.logError("Event body must be object");return{}}return eventBody},logError:function logError(message){var console=window.console;if(console&&console.error){console.error(message)}},init:function init(){this.setTrackingUrl();this.setAppId();this.onBeforeUnload=this.onBeforeUnload.bind(this);if(isBrowser){window.addEventListener("beforeunload",this.onBeforeUnload)}},destroy:function destroy(){if(isBrowser){window.removeEventListener("beforeunload",this.onBeforeUnload)}},onBeforeUnload:function onBeforeUnload(){this.flush()}};webTrackingTransport.init();module.exports=webTrackingTransport})});var rum_video_module=createCommonjsModule$1(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _linkedinWebTrackingTransport2=_interopRequireDefault(webTrackingTransport);function RumVideoTracking(configJson){var videoTrackingId,applicationName,pageKey,videoUrn,initializationStartTs,initializationEndTs,bufferingRanges,webTracking,validPlaybackErrorTypes={CUSTOM:true,NETWORK:true,DECODING:true,SOURCE_FILE:true,ENCRYPTION:true,AUDIO:true,RENDERING:true},exceptionFieldToDefaults={message:"",lineNumber:-1,columnNumber:-1,sourceFile:"",stackTrace:"",programLanguage:"JAVASCRIPT",type:""},mediaHeader,trackingEnabled,bitrateChangedFields=["newBitrate","viewingDisplaySize","encodedDisplaySize","audioCodec","videoCodec","newSegmentDuration","targetSegmentDuration","frameRate"];function init(configJson){var trackingUrl;bufferingRanges={};configJson=configJson||{};trackingEnabled=configJson.trackingEnabled===false?false:true;if(trackingEnabled){if(_typeof2(configJson["web-tracking-obj"])==="object"){webTracking=configJson["web-tracking-obj"]}else{webTracking=_linkedinWebTrackingTransport2["default"];if((typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){trackingUrl=configJson["tracking-url"]||"https://www.linkedin.com/li/track";webTracking.setTrackingUrl(trackingUrl)}}}}function sendVideoInitializationBeacon(isStart){var eventBody={header:{time:isStart?initializationStartTs:initializationEndTs},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId},initializationStartTime:initializationStartTs},eventInfo={eventName:isStart?"MediaInitializationStartEvent":"MediaInitializationEndEvent",appId:applicationName};if(!isStart){eventBody.duration=initializationEndTs-initializationStartTs}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function sendBufferingEventBeacon(bufferingId,isStart){var bufferingRange=bufferingRanges[bufferingId],eventBody={header:{time:isStart?bufferingRange.start:bufferingRange.end},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId},bufferingType:bufferingRange.type,initializationStartTime:initializationStartTs,bufferingStartTime:bufferingRange.start},eventInfo={eventName:isStart?"MediaBufferingStartEvent":"MediaBufferingEndEvent",appId:applicationName};if(!isStart){eventBody.duration=bufferingRange.end-bufferingRange.start;deleteBufferingRangeById(bufferingId)}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function sendMediaPlaybackErrorEventBeacon(errorType,errorMsg,errorException,url,ts){var eventBody={header:{time:ts},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId},errorType:errorType},eventInfo={eventName:"MediaPlaybackErrorV2Event",appId:applicationName};if(typeof errorMsg==="string"){eventBody.errorMessage=errorMsg}if((typeof errorException==="undefined"?"undefined":_typeof2(errorException))==="object"){eventBody.errorException=errorException}else{eventBody.errorException=null}if(typeof url==="string"&&url!=""){eventBody.url=url}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function sendMediaBitrateChangedEventBeacon(extraFields,ts){var eventBody={header:{time:ts},requestHeader:{pageKey:pageKey},mobileHeader:null,mediaHeader:(typeof mediaHeader==="undefined"?"undefined":_typeof2(mediaHeader))==="object"?mediaHeader:{},mediaTrackingObject:{objectUrn:typeof videoUrn==="string"?videoUrn:"",trackingId:videoTrackingId}},eventInfo={eventName:"MediaBitrateChangedEvent",appId:applicationName};if((typeof extraFields==="undefined"?"undefined":_typeof2(extraFields))==="object"){eventBody=extend(eventBody,extraFields)}if(trackingEnabled&&(typeof webTracking==="undefined"?"undefined":_typeof2(webTracking))==="object"){webTracking.sendEvent(eventInfo,eventBody)}else if(!trackingEnabled){return{eventInfo:eventInfo,eventBody:eventBody}}}function deleteBufferingRangeById(bufferingId){delete bufferingRanges[bufferingId]}function throwErrorIfInitializationEventInvalid(isStart){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if(!isStart){if(typeof initializationStartTs!=="number"){throw new Error("videoInitializationStart not called")}}}function throwErrorIfBufferingEventInvalid(bufferingId,isStart){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if(typeof initializationStartTs!=="number"){throw new Error("videoInitializationStart not called")}else if(typeof bufferingId!=="number"){throw new TypeError("bufferingId not a number")}if(isStart){if(_typeof2(bufferingRanges[bufferingId])==="object"){throw new Error("duplicate bufferingId")}}else{if(_typeof2(bufferingRanges[bufferingId])!=="object"||typeof bufferingRanges[bufferingId].start!=="number"||typeof bufferingRanges[bufferingId].end!=="undefined"||bufferingRanges[bufferingId].type!==null){throw new Error("incorrect bufferingId or wrong buffering type")}}}function throwErrorIfPlaybackErrorEventIsInvalid(errorType,errorMessage,errorException,url){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if(typeof errorType!=="string"||!(errorType in validPlaybackErrorTypes)){throw new Error("invalid error type. Expected one of: "+Object.keys(validPlaybackErrorTypes))}if(typeof errorMessage!=="string"&&typeof errorMessage!=="undefined"){throw new TypeError("error message is not a string or undefined")}if((typeof errorException==="undefined"?"undefined":_typeof2(errorException))==="object"){Object.keys(errorException).forEach(function(key){if(!(key in exceptionFieldToDefaults)){throw new Error("invalid field in the exception object")}})}else if(typeof errorException!=="undefined"){throw new TypeError("error exception is not an object or undefined")}if(typeof url!=="string"&&typeof url!=="undefined"){throw new TypeError("video-rum: url is not a string or undefined")}}function throwErrorIfBitrateChangedEventInvalid(extraFields){if(trackingEnabled&&(videoTrackingId===undefined||applicationName===undefined)){throw new Error("must set videoTrackingId and applicationName before recording events")}if((typeof extraFields==="undefined"?"undefined":_typeof2(extraFields))==="object"){bitrateChangedFields.forEach(function(key){if(!(key in extraFields)){throw new Error("key: "+key+" not in fields")}})}else if(typeof extraFields==="undefined"){throw new TypeError("extraFields is not an object or undefined")}}init(configJson);function getPerformanceTime(){return window.performance&&window.performance.timing&&typeof window.performance.now==="function"?Math.round(window.performance.now())+window.performance.timing.navigationStart:(new Date).getTime()}function getExceptionObjectFromFieldsAndDefaults(exceptionFields){return extend(exceptionFieldToDefaults,exceptionFields)}function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key]}}return a}this.setVideoTrackingId=function(id){videoTrackingId=id};this.setApplicationName=function(appName){applicationName=appName;if(typeof pageKey!=="string"){pageKey=appName}};this.setPageKey=function(videoPageKey){pageKey=videoPageKey};this.setVideoUrn=function(urn){videoUrn=urn};this.setMediaHeader=function(mediaHeaderObj){mediaHeader=mediaHeaderObj};this.videoInitializationStart=function(){var isStart=true;initializationStartTs=getPerformanceTime();throwErrorIfInitializationEventInvalid(isStart);return sendVideoInitializationBeacon(isStart)};this.videoInitializationEnd=function(){var ts=getPerformanceTime(),isStart=false;throwErrorIfInitializationEventInvalid(isStart);initializationEndTs=ts;return sendVideoInitializationBeacon(isStart)};this.bufferingStart=function(bufferingId){var ts=getPerformanceTime(),isStart=true;throwErrorIfBufferingEventInvalid(bufferingId,isStart);bufferingRanges[bufferingId]={};bufferingRanges[bufferingId].start=ts;bufferingRanges[bufferingId].type=null;return sendBufferingEventBeacon(bufferingId,isStart)};this.bufferingEnd=function(bufferingId){var ts=getPerformanceTime(),isStart=false;throwErrorIfBufferingEventInvalid(bufferingId,isStart);bufferingRanges[bufferingId].end=ts;return sendBufferingEventBeacon(bufferingId,isStart)};this.mediaPlaybackError=function(errorType,errorMsg,exceptionFields,url){var ts=getPerformanceTime(),exceptionObj;throwErrorIfPlaybackErrorEventIsInvalid(errorType,errorMsg,exceptionFields,url);if((typeof exceptionFields==="undefined"?"undefined":_typeof2(exceptionFields))==="object"){exceptionObj=getExceptionObjectFromFieldsAndDefaults(exceptionFields)}if(typeof url==="string"&&url!=""){url=url.match("^[^?]+")[0]}return sendMediaPlaybackErrorEventBeacon(errorType,errorMsg,exceptionObj,url,ts)};this.bitrateChangedEvent=function(bitrateChangedFields){var ts=getPerformanceTime();throwErrorIfBitrateChangedEventInvalid(bitrateChangedFields);return sendMediaBitrateChangedEventBeacon(bitrateChangedFields,ts)}}exports["default"]=RumVideoTracking;module.exports=exports["default"]});var RumVideoTracking=unwrapExports$1(rum_video_module);var RUM_ERROR_TYPES={CUSTOM:"CUSTOM",ABORTED:"ABORTED",NETWORK:"NETWORK",DECODING:"DECODING",SOURCE_FILE:"SOURCE_FILE",ENCRYPTION:"ENCRYPTION"};var TIMEUPDATE_THRESHOLD=500;var PLAYER_STATES={STOPPED:"STOPPED",WAITING:"WAITING",PLAYING:"PLAYING"};var ERROR_TYPE_MAP={0:RUM_ERROR_TYPES.CUSTOM,1:RUM_ERROR_TYPES.ABORTED,2:RUM_ERROR_TYPES.NETWORK,3:RUM_ERROR_TYPES.DECODING,4:RUM_ERROR_TYPES.SOURCE_FILE,5:RUM_ERROR_TYPES.ENCRYPTION};var Plugin$1=videojs$1.getPlugin("plugin");var RumPlugin=function(_Plugin){inherits$2(RumPlugin,_Plugin);function RumPlugin(player,_ref){var mediaUrn=_ref.mediaUrn,trackingId=_ref.trackingId,mediaHeader=_ref.mediaHeader;classCallCheck$2(this,RumPlugin);var _this=possibleConstructorReturn$2(this,(RumPlugin.__proto__||Object.getPrototypeOf(RumPlugin)).apply(this,arguments));_this._player=player;_this._bufferId=0;_this.setState({mediaUrn:mediaUrn,trackingId:trackingId,mediaHeader:mediaHeader});_this.on(player,"loadedmetadata",_this._onLoadedMetadata);_this.on(player,"loadeddata",_this._onLoadedData);_this.on(player,"loadstart",_this._onLoadStart);_this.on(player,"pause",_this._onPause);_this.on(player,"play",_this._onPlay);_this.on(player,"seeked",_this._onSeeked);_this.on(player,"seeking",_this._onSeeking);_this.on(player,"timeupdate",_this._onTimeUpdate);_this.on(player,"waiting",_this._onWaiting);_this.on(player,"error",_this._onError);_this.on(player,"sourceset",_this._onSourceSet);player.ready(function(){if(_this._player.usingPlugin("playlist")){_this.on(player.playlist(),"itemchange",function(event){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref2$plugins=_ref2.plugins,plugins=_ref2$plugins===undefined?{}:_ref2$plugins;assert("rum must be updated on playlist item change",plugins.rum)})}});return _this}createClass$2(RumPlugin,[{key:"handleStateChanged",value:function handleStateChanged(_ref3){var changes=_ref3.changes;var mediaUrn=changes.mediaUrn,trackingId=changes.trackingId,mediaHeader=changes.mediaHeader;if(mediaUrn||trackingId){assert("rum: trackingId is required",trackingId.to);assert("rum: mediaUrn is required",mediaUrn.to);this.tracker=new RumVideoTracking({trackingEnabled:false});this.tracker.setVideoUrn(mediaUrn.to);this.tracker.setVideoTrackingId(trackingId.to);if(mediaHeader){this.tracker.setMediaHeader(mediaHeader.to)}}}},{key:"_setInitializationStart",value:function _setInitializationStart(){if(!this._isInitializationStarted){this._trigger(this.tracker.videoInitializationStart());this._isInitializationStarted=true}}},{key:"_setInitializationEnd",value:function _setInitializationEnd(){if(!this._isInitializationEnded){this._setInitializationStart();this._trigger(this.tracker.videoInitializationEnd());this._isInitializationEnded=true}}},{key:"_setBufferingStart",value:function _setBufferingStart(){if(!this._isSeeking){this._setInitializationStart();this._isBuffering=true;this._bufferId++;this._trigger(this.tracker.bufferingStart(this._bufferId))}}},{key:"_setBufferingEnd",value:function _setBufferingEnd(){if(!this._isSeeking&&this._isBuffering){this._trigger(this.tracker.bufferingEnd(this._bufferId));this._isBuffering=false}}},{key:"_onLoadedMetadata",value:function _onLoadedMetadata(){this._metadataTrack=this.player.textTracks().tracks_.find(function(track){return track.label==="segment-metadata"});if(this._metadataTrack){this.on(this._metadataTrack,"cuechange",this._onBitrateChange)}}},{key:"_onSourceSet",value:function _onSourceSet(){this._isInitializationStarted=false;this._isInitializationEnded=false;this._isSeeking=false;this._isBuffering=false;this._playerState=PLAYER_STATES.STOPPED;if(this._metadataTrack){this.off(this._metadataTrack,"cuechange",this._onBitrateChange)}}},{key:"_onSeeking",value:function _onSeeking(){this._isSeeking=true}},{key:"_onSeeked",value:function _onSeeked(){this._isSeeking=false}},{key:"_onWaiting",value:function _onWaiting(){if(this._playerState===PLAYER_STATES.PLAYING){this._playerState=PLAYER_STATES.WAITING;this._setBufferingStart();this._setBufferingStartTime=Date.now()}}},{key:"_onTimeUpdate",value:function _onTimeUpdate(){var isTimeupdateFiredDuringBuffering=Date.now()-this._setBufferingStartTime<TIMEUPDATE_THRESHOLD;if(!isTimeupdateFiredDuringBuffering&&this._playerState===PLAYER_STATES.WAITING){this._playerState=PLAYER_STATES.PLAYING;this._setBufferingEnd()}}},{key:"_onPause",value:function _onPause(){this._playerState=PLAYER_STATES.STOPPED}},{key:"_onPlay",value:function _onPlay(){if(this._player.preload()==="none"){this._setInitializationStart()}this._playerState=PLAYER_STATES.PLAYING}},{key:"_onLoadStart",value:function _onLoadStart(){if(this._player.preload()!=="none"){this._setInitializationStart()}}},{key:"_onLoadedData",value:function _onLoadedData(){this._setInitializationEnd()}},{key:"_onBitrateChange",value:function _onBitrateChange(){var activeCue=this._metadataTrack.activeCues[0];var cueValue=activeCue&&activeCue.value;if(cueValue&&cueValue.playlist!==this._lastCuePlaylist){var newSegmentDuration=Math.floor((cueValue.end-cueValue.start)*1e3);var _ref4=cueValue.codecs?cueValue.codecs.split(",").map(function(item){return item.trim()}):[],_ref5=slicedToArray$1(_ref4,2),videoCodec=_ref5[0],audioCodec=_ref5[1];this._trigger(this.tracker.bitrateChangedEvent({newBitrate:cueValue.bandwidth,viewingDisplaySize:{width:this.player.currentWidth(),height:this.player.currentHeight()},encodedDisplaySize:cueValue.resolution,audioCodec:audioCodec,videoCodec:videoCodec,newSegmentDuration:newSegmentDuration,targetSegmentDuration:6e3,frameRate:60}));this._lastCuePlaylist=cueValue.playlist}}},{key:"_onError",value:function _onError(){var videoError=this.player.error();var url=this.player.currentSrc();var rumTrackingEvent=this.tracker.mediaPlaybackError(ERROR_TYPE_MAP[videoError.code],videoError.message,undefined,url);this._trigger(rumTrackingEvent)}},{key:"_trigger",value:function _trigger(rumTrackingEvent){var eventData=rumTrackingEvent.eventBody,eventName=rumTrackingEvent.eventInfo.eventName;this.trigger(eventName,eventData);this.trigger("track",{eventName:eventName,eventData:eventData})}}]);return RumPlugin}(Plugin$1);videojs$1.registerPlugin("rum",RumPlugin);function debounce$1(func,wait,immediate){var timeout,args,context,timestamp,result;if(null==wait)wait=100;function later(){var last=Date.now()-timestamp;
if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);context=args=null}}}var debounced=function debounced(){context=this;args=arguments;timestamp=Date.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result};debounced.clear=function(){if(timeout){clearTimeout(timeout);timeout=null}};debounced.flush=function(){if(timeout){result=func.apply(context,args);context=args=null;clearTimeout(timeout);timeout=null}};return debounced}debounce$1.debounce=debounce$1;var debounce_1=debounce$1;var TRACKING_EVENT_TYPES={PLAYER_BEACON_EVENT:"PlayerBeaconEvent",PLAYER_PLAY_PAUSE_EVENT:"PlayerPlayPauseEvent",PLAYER_SEEK_EVENT:"PlayerSeekEvent",PLAYER_VOLUME_CHANGED_EVENT:"PlayerVolumeChangedEvent"};var PLAYER_STATE_CHANGED_REASONS={ENTERED_VIEWPORT:"ENTERED_VIEWPORT",EXITED_VIEWPORT:"EXITED_VIEWPORT",USER_TRIGGERED:"USER_TRIGGERED",VIDEO_PRIORITY_CHANGED:"VIDEO_PRIORITY_CHANGED"};var PLAYER_FEATURE_STATES={ON:"ON",OFF:"OFF",NOT_SUPPORTED:"NOT_SUPPORTED",NOT_MEASURED:"NOT_MEASURED"};var Plugin$2=videojs$1.getPlugin("plugin");var BEACON_INTERVALS=[0,3e3,7e3,2e4,3e4];var EVENT_DEBOUNCE=300;var TrackingPlugin=function(_Plugin){inherits$2(TrackingPlugin,_Plugin);function TrackingPlugin(player,_ref){var mediaUrn=_ref.mediaUrn,trackingId=_ref.trackingId,_ref$debugBeaconOutli=_ref.debugBeaconOutliers,debugBeaconOutliers=_ref$debugBeaconOutli===undefined?false:_ref$debugBeaconOutli;classCallCheck$2(this,TrackingPlugin);var _this=possibleConstructorReturn$2(this,(TrackingPlugin.__proto__||Object.getPrototypeOf(TrackingPlugin)).apply(this,arguments));assert("tracking: userInteraction plugin is required",player.hasPlugin("userInteraction"));_this._player=player;_this._qualityLevels=player.qualityLevels();_this._isPlaying=false;_this._previousVolume=_this._getVolume();_this._debugBeaconOutliers=debugBeaconOutliers;_this.setState({mediaUrn:mediaUrn,trackingId:trackingId});var onUnload=_this._onUnload.bind(_this);var onSeeked=debounce_1(_this._onSeeked,EVENT_DEBOUNCE);var onVolumeChange=debounce_1(_this._onVolumeChange,EVENT_DEBOUNCE);_this.on(player,"fullscreenchange",_this._onFullscreenChange);_this.on(player,"pause",_this._onPause);_this.on(player,"play",_this._onPlay);_this.on(player,"playing",_this._onPlaying);_this.on(player,"ratechange",_this._onRateChange);_this.on(player,"seeked",onSeeked);_this.on(player,"seeking",_this._onSeeking);_this.on(player,"userinteraction",_this._onUserInteraction);_this.on(player,"volumechange",onVolumeChange);_this.on(player,"waiting",_this._onWaiting);_this.on(player,"sourceset",_this._onSourceSet);_this.on(player,"ended",_this._onEnded);var unloadEventName="onpagehide"in window?"pagehide":"beforeunload";window.addEventListener(unloadEventName,onUnload);if(_this._debugBeaconOutliers){_this._wasWindowHidden=false;_this._isWindowHidden=false;var onVisibilityChange=_this._onVisibilityChange.bind(_this);window.addEventListener("visibilitychange",onVisibilityChange);_this.on("dispose",function(){window.removeEventListener("visibilitychange",onVisibilityChange)})}_this.on("dispose",function(){window.removeEventListener(unloadEventName,onUnload);onSeeked.clear();onVolumeChange.clear()});player.ready(function(){if(_this._player.usingPlugin("playlist")){_this.on(player.playlist(),"itemchange",function(event){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref2$plugins=_ref2.plugins,plugins=_ref2$plugins===undefined?{}:_ref2$plugins;assert("tracking must be updated on playlist item change",plugins.tracking)})}});return _this}createClass$2(TrackingPlugin,[{key:"getEventHash",value:function getEventHash(){var hash=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return hash}},{key:"handleStateChanged",value:function handleStateChanged(_ref3){var changes=_ref3.changes;if(changes.mediaUrn||changes.trackingId){var _state=this.state,mediaUrn=_state.mediaUrn,trackingId=_state.trackingId;assert("tracking: trackingId is required when updating medaUrn",trackingId);assert("tracking: mediaUrn is required when updateing trackingId",mediaUrn);this._lastAction="CHANGE_MEDIA";this.stopBeaconPolling();this._mediaUrn=mediaUrn;this._trackingId=trackingId;this._mediaTrackingObject={objectUrn:mediaUrn,trackingId:trackingId};this._userInteracted=false;this._previousTimeElapsed=0;this._playbackRate=null}}},{key:"getPlayerState",value:function getPlayerState(){var selectedQualityLevel=this._qualityLevels[this._qualityLevels.selectedIndex];if(!this._playbackRate){this._playbackRate=this._player.playbackRate()}return{bitrate:selectedQualityLevel&&selectedQualityLevel.bitrate||null,casting:PLAYER_FEATURE_STATES.NOT_MEASURED,ccVisible:PLAYER_FEATURE_STATES.NOT_MEASURED,downloaded:PLAYER_FEATURE_STATES.NOT_MEASURED,fullScreen:this._getFullScreenState(),isAudioOnly:false,isPlaying:this._isPlaying,length:this._getDuration(),mediaUrn:this._mediaUrn,mediaViewTrackingId:this._trackingId,speed:this._playbackRate,timeElapsed:this._player.currentTime(),volume:this._getVolume()}}},{key:"startBeaconPolling",value:function startBeaconPolling(){this._isPolling=true;this._cancelBeaconInterval();this._runBeaconInterval(BEACON_INTERVALS[0])}},{key:"restartBeaconPolling",value:function restartBeaconPolling(){if(this._isPolling){this.startBeaconPolling()}}},{key:"stopBeaconPolling",value:function stopBeaconPolling(){var fireBeacon=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this._isPolling){this._isPolling=false;this._cancelBeaconInterval();if(fireBeacon){this._fireBeaconEvent("STOP")}this._timeLastBeaconCalled=null}}},{key:"dispose",value:function dispose(){this._lastAction="DISPOSE";this.stopBeaconPolling();get$2(TrackingPlugin.prototype.__proto__||Object.getPrototypeOf(TrackingPlugin.prototype),"dispose",this).call(this)}},{key:"_onPlay",value:function _onPlay(){this._isPlaying=true;this._trigger(TRACKING_EVENT_TYPES.PLAYER_PLAY_PAUSE_EVENT,{mediaTrackingObject:this._mediaTrackingObject,reason:PLAYER_STATE_CHANGED_REASONS.USER_TRIGGERED,state:this.getPlayerState()})}},{key:"_onPlaying",value:function _onPlaying(){this._lastAction="PLAYING";this._isPlaying=true;if(this._debugBeaconOutliers&&this._isPolling){this.trigger("info",{name:"BEACON_ALREADY_STARTED",data:{state:this.getPlayerState()}})}this.startBeaconPolling()}},{key:"_onPause",value:function _onPause(){this._lastAction="PAUSE";this._isPlaying=false;this._trigger(TRACKING_EVENT_TYPES.PLAYER_PLAY_PAUSE_EVENT,{mediaTrackingObject:this._mediaTrackingObject,reason:PLAYER_STATE_CHANGED_REASONS.USER_TRIGGERED,state:this.getPlayerState()});this.stopBeaconPolling()}},{key:"_onWaiting",value:function _onWaiting(){if(this._lastAction!=="SEEK"){this._lastAction="WAITING"}this._isPlaying=false;this.stopBeaconPolling()}},{key:"_onSourceSet",value:function _onSourceSet(){this._lastAction="SOURCE_SET";this._isPlaying=false;this.stopBeaconPolling()}},{key:"_onVolumeChange",value:function _onVolumeChange(){this._lastAction="VOLUME";var playerState=this.getPlayerState();this._trigger(TRACKING_EVENT_TYPES.PLAYER_VOLUME_CHANGED_EVENT,{mediaTrackingObject:this._mediaTrackingObject,state:playerState,previousVolume:this._previousVolume});this.restartBeaconPolling();this._previousVolume=playerState.volume}},{key:"_onFullscreenChange",value:function _onFullscreenChange(){this._lastAction="FULLSCREEN";this.restartBeaconPolling()}},{key:"_onRateChange",value:function _onRateChange(){this._lastAction="RATE";this.restartBeaconPolling();this._playbackRate=this._player.playbackRate()}},{key:"_onSeeking",value:function _onSeeking(){if(!this._isSeeking){this._lastAction="SEEK";this._previousTimeElapsed=this._player.currentTime();this._isSeeking=true}}},{key:"_onSeeked",value:function _onSeeked(){this._trigger(TRACKING_EVENT_TYPES.PLAYER_SEEK_EVENT,{mediaTrackingObject:this._mediaTrackingObject,previousTimeElapsed:this._previousTimeElapsed,state:this.getPlayerState()});this._isSeeking=false}},{key:"_onEnded",value:function _onEnded(){this._lastAction="ENDED"}},{key:"_onUserInteraction",value:function _onUserInteraction(){this._userInteracted=true}},{key:"_onUnload",value:function _onUnload(){this._lastAction="UNLOAD";this.stopBeaconPolling()}},{key:"_onVisibilityChange",value:function _onVisibilityChange(){this._isWindowHidden=document.visibilityState==="hidden";if(this._isWindowHidden){this._wasWindowHidden=true}}},{key:"_runBeaconInterval",value:function _runBeaconInterval(interval){var _this2=this;var _getPlayerState=this.getPlayerState(),timeElapsed=_getPlayerState.timeElapsed;if(timeElapsed===this._beaconTimeElapsed&&interval>0){if(this._debugBeaconOutliers){this.trigger("info",{name:"CANCEL_BEACON_NO_TIME_ELAPSED",data:{state:this.getPlayerState(),interval:interval}})}this._lastAction="CANCEL";this.stopBeaconPolling(false);return}this._beaconTimeElapsed=timeElapsed;var nextInterval=BEACON_INTERVALS[BEACON_INTERVALS.indexOf(interval)+1]||BEACON_INTERVALS[BEACON_INTERVALS.length-1];this._fireBeaconEvent(interval);this._beaconPoll=this._player.setTimeout(function(){return _this2._runBeaconInterval(nextInterval)},nextInterval)}},{key:"_cancelBeaconInterval",value:function _cancelBeaconInterval(){if(this._beaconPoll){this._player.clearTimeout(this._beaconPoll);this._beaconPoll=null}}},{key:"_fireBeaconEvent",value:function _fireBeaconEvent(reason){var _this3=this;var now=Date.now();var timeSinceLastBeacon=now-(this._timeLastBeaconCalled||now);if(this._debugBeaconOutliers){var state=this.getPlayerState();var timeElapsed=state.timeElapsed;var previousTimeElapsed=this._previousBeaconTimeElapsed===undefined?timeElapsed:this._previousBeaconTimeElapsed;var mediaTimeSinceLastBeacon=timeElapsed-previousTimeElapsed;if(timeSinceLastBeacon>32e3){this.trigger("info",{name:"TIME_SINCE_LAST_BEACON_INVALID",data:{lastAction:this._lastAction,reason:reason,now:now,timeSinceLastBeacon:timeSinceLastBeacon,mediaTimeSinceLastBeacon:mediaTimeSinceLastBeacon,timeLastBeaconCalled:this._timeLastBeaconCalled,windowVisibility:document.visibilityState,wasWindowHidden:this._wasWindowHidden,state:state}})}else if(timeSinceLastBeacon>3e3){var expectedMediaTimeElapsed=timeSinceLastBeacon/1e3*state.speed;if(mediaTimeSinceLastBeacon<expectedMediaTimeElapsed*.7){setTimeout(function(){_this3.trigger("info",{name:"TIME_ELAPSED_BELOW_EXPECTED",data:{lastAction:_this3._lastAction,reason:reason,state:_this3.getPlayerState(),mediaTimeSinceLastBeacon:mediaTimeSinceLastBeacon,expectedMediaTimeElapsed:expectedMediaTimeElapsed,timeSinceLastBeacon:timeSinceLastBeacon}})},0)}}this._wasWindowHidden=this._isWindowHidden;this._previousBeaconTimeElapsed=timeElapsed}this._timeLastBeaconCalled=now;this._trigger(TRACKING_EVENT_TYPES.PLAYER_BEACON_EVENT,{isAutoplaying:this._isAutoplaying(),timeSinceLastBeacon:timeSinceLastBeacon,state:this.getPlayerState(),mediaTrackingObject:this._mediaTrackingObject});this._lastAction=""}},{key:"_isAutoplaying",value:function _isAutoplaying(){return!this._userInteracted&&!!this._player.autoplay()}},{key:"_getFullScreenState",value:function _getFullScreenState(){return this._player.isFullscreen()?PLAYER_FEATURE_STATES.ON:PLAYER_FEATURE_STATES.OFF}},{key:"_getDuration",value:function _getDuration(){var length=this.player.duration();if(length&&isFinite(length)){return length}return 0}},{key:"_getVolume",value:function _getVolume(){return this._player.muted()?0:Math.round(this._player.volume()*100)}},{key:"_trigger",value:function _trigger(eventName,eventData){this.trigger(eventName,eventData);this.trigger("track",{eventName:eventName,eventData:eventData})}}]);return TrackingPlugin}(Plugin$2);videojs$1.registerPlugin("tracking",TrackingPlugin);function userInteraction(){var _this=this;this.on(["click","touchstart","mousedown"],function(){_this.trigger("userinteraction")})}videojs$1.registerPlugin("userInteraction",userInteraction);var POSTER_BACKGROUND_CLASS="vjs-poster-background";var Component$5=videojs$1.getComponent("Component");var PosterBackground=function(_Component){inherits$2(PosterBackground,_Component);function PosterBackground(player,options){classCallCheck$2(this,PosterBackground);var _this=possibleConstructorReturn$2(this,(PosterBackground.__proto__||Object.getPrototypeOf(PosterBackground)).call(this,player,options));_this._player=player;_this.addClass(POSTER_BACKGROUND_CLASS);_this._attach();return _this}createClass$2(PosterBackground,[{key:"_attach",value:function _attach(){this.hide();this._player.addChild(this,{},0)}},{key:"setImage",value:function setImage(){this.el().style.backgroundImage="url("+this._player.poster()+")";this.show()}}]);return PosterBackground}(Component$5);videojs$1.registerComponent("PosterBackground",PosterBackground);var Plugin$3=videojs$1.getPlugin("plugin");var PosterBackground$1=function(_Plugin){inherits$2(PosterBackground$$1,_Plugin);function PosterBackground$$1(player){classCallCheck$2(this,PosterBackground$$1);var _this=possibleConstructorReturn$2(this,(PosterBackground$$1.__proto__||Object.getPrototypeOf(PosterBackground$$1)).apply(this,arguments));_this._player=player;_this._poster=new PosterBackground(_this._player);if(_this._player.poster()){_this._poster.setImage()}_this.on(_this._player,"posterchange",function(){return _this._poster.setImage()});return _this}return PosterBackground$$1}(Plugin$3);videojs$1.registerPlugin("posterBackground",PosterBackground$1);function mediaInteraction(){var _this=this;var player=this;var videoEl=player.el().querySelector("video");function getVolume(){return player.muted()?0:Math.round(player.volume()*100)}this.on(["click","touchstart"],function(evt){if(evt.target===videoEl){_this.trigger("mediaInteraction",{state:{isPlaying:!_this.paused(),volume:getVolume()}})}})}videojs$1.registerPlugin("mediaInteraction",mediaInteraction);var ModalDialog$1=videojs$1.getComponent("ModalDialog");var mergeOptions$7=videojs$1.mergeOptions;var ACTIVE_CLASS_NAME="vjs-screen-active";var ScreenComponent=function(_ModalDialog){inherits$2(ScreenComponent,_ModalDialog);function ScreenComponent(player){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},id=_ref.id,classNames=_ref.classNames;classCallCheck$2(this,ScreenComponent);var _this=possibleConstructorReturn$2(this,(ScreenComponent.__proto__||Object.getPrototypeOf(ScreenComponent)).apply(this,arguments));_this._player=player;_this.addClass("vjs-screen");if(id){_this.contentEl().setAttribute("id",id)}(classNames||[]).forEach(function(className){_this.setAttribute("class",className)});_this.fill();_this.on("modalopen",_this._onOpen);_this.on("modalclose",_this._onClose);return _this}createClass$2(ScreenComponent,[{key:"_onOpen",value:function _onOpen(){this._player.addClass(ACTIVE_CLASS_NAME);this.trigger("show")}},{key:"_onClose",value:function _onClose(){this._player.removeClass(ACTIVE_CLASS_NAME);this.trigger("hide")}}]);return ScreenComponent}(ModalDialog$1);ScreenComponent.prototype.options_=mergeOptions$7(ModalDialog$1.prototype.options_,{uncloseable:true,pauseOnOpen:true,temporary:false});videojs$1.registerComponent("Screen",ScreenComponent);var Plugin$4=videojs$1.getPlugin("plugin");var StartScreenPlugin=function(_Plugin){inherits$2(StartScreenPlugin,_Plugin);function StartScreenPlugin(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck$2(this,StartScreenPlugin);var _this=possibleConstructorReturn$2(this,(StartScreenPlugin.__proto__||Object.getPrototypeOf(StartScreenPlugin)).apply(this,arguments));_this._player=player;_this._options=options;_this.screen=_this._createScreen();_this.on(_this._player,"play",_this._onPlay);_this.on(_this._player,"sourceset",_this._onSourceset);_this.on("dispose",_this._onDispose);_this._player.ready(function(){if(_this.screen){_this.screen.open()}});return _this}createClass$2(StartScreenPlugin,[{key:"_createScreen",value:function _createScreen(){var _this2=this;var screen=new ScreenComponent(this._player,this._options);screen.content();screen.addClass("vjs-start-screen");screen.on(["show","hide"],function(event){_this2.trigger(event.type,{screen:_this2.screen})});this._player.addChild(screen);return screen}},{key:"_onPlay",value:function _onPlay(){this.screen.close()}},{key:"_onSourceset",value:function _onSourceset(){this.screen.open()}},{key:"_onDispose",value:function _onDispose(){this._player.removeChild(this.screen);this.screen=null}}]);return StartScreenPlugin}(Plugin$4);videojs$1.registerPlugin("startScreen",StartScreenPlugin);var Plugin$5=videojs$1.getPlugin("plugin");var EndScreenPlugin=function(_Plugin){inherits$2(EndScreenPlugin,_Plugin);function EndScreenPlugin(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck$2(this,EndScreenPlugin);var _this=possibleConstructorReturn$2(this,(EndScreenPlugin.__proto__||Object.getPrototypeOf(EndScreenPlugin)).apply(this,arguments));_this._player=player;_this.screen=_this._createScreen(options);_this.on(_this._player,"ended",_this._onEnded);_this.on(_this._player,"play",_this._onPlay);_this.on(_this._player,"sourceset",_this._onSourceset);_this.on(_this._player,"playerreset",_this._onPlayerreset);_this.on("dispose",_this._onDispose);_this.enable();return _this}createClass$2(EndScreenPlugin,[{key:"enable",value:function enable(){this._isEnabled=true;if(this._isEnded){this.screen.open()}}},{key:"disable",value:function disable(){this._isEnabled=false;if(this._isEnded){this.screen.close()}}},{key:"enabled",value:function enabled(){return this._isEnabled}},{key:"_createScreen",value:function _createScreen(){var _this2=this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},id=_ref.id,classNames=_ref.classNames,_ref$closeable=_ref.closeable,closeable=_ref$closeable===undefined?true:_ref$closeable;var screen=new ScreenComponent(this._player,{id:id,classNames:classNames,uncloseable:!closeable});screen.addClass("vjs-end-screen");screen.on(["show","hide"],function(event){_this2.trigger(event.type,{screen:_this2.screen})});this._player.addChild(screen);return screen}},{key:"_onEnded",value:function _onEnded(){this._isEnded=true;if(!this._player.loop()&&this.enabled()){this.screen.open()}}},{key:"_onPlay",value:function _onPlay(){this._isEnded=false;this.screen.close()}},{key:"_onSourceset",value:function _onSourceset(){this._isEnded=false;this.screen.close()}},{key:"_onPlayerreset",value:function _onPlayerreset(){this._isEnded=false;this.screen.close()}},{key:"_onDispose",value:function _onDispose(){this._player.removeChild(this.screen);this.screen=null}}]);return EndScreenPlugin}(Plugin$5);videojs$1.registerPlugin("endScreen",EndScreenPlugin);var Plugin$6=videojs$1.getPlugin("plugin");var ErrorScreenPlugin=function(_Plugin){inherits$2(ErrorScreenPlugin,_Plugin);function ErrorScreenPlugin(player,options){classCallCheck$2(this,ErrorScreenPlugin);var _this=possibleConstructorReturn$2(this,(ErrorScreenPlugin.__proto__||Object.getPrototypeOf(ErrorScreenPlugin)).apply(this,arguments));_this._player=player;_this._options=options;_this.screen=_this._createScreen();_this._player.ready(function(){_this._disableErrorDisplay()});_this.on(_this._player,"error",_this._onError);_this.on(_this._player,"play",_this._onPlay);_this.on(_this._player,"sourceset",_this._onSourceset);_this.on(_this._player,"playerreset",_this._onPlayerreset);_this.on("dispose",_this._onDispose);return _this}createClass$2(ErrorScreenPlugin,[{key:"_createScreen",value:function _createScreen(){var _this2=this;var screen=new ScreenComponent(this._player,this._options);screen.addClass("vjs-error-screen");screen.on(["show","hide"],function(event){_this2.trigger(event.type,{screen:_this2.screen,error:_this2._player.error()})});this._player.addChild(screen);return screen}},{key:"_disableErrorDisplay",value:function _disableErrorDisplay(){var errorDisplay=this._player.getChild("errorDisplay");if(errorDisplay){errorDisplay.dispose()}}},{key:"_onError",value:function _onError(){this.screen.open()}},{key:"_onPlay",value:function _onPlay(){this.screen.close()}},{key:"_onSourceset",value:function _onSourceset(){this.screen.close()}},{key:"_onPlayerreset",value:function _onPlayerreset(){this.screen.close()}},{key:"_onDispose",value:function _onDispose(){this._player.removeChild(this.screen);this.screen=null}}]);return ErrorScreenPlugin}(Plugin$6);videojs$1.registerPlugin("errorScreen",ErrorScreenPlugin);var Component$6=videojs$1.getComponent("Component");var Plugin$7=videojs$1.getPlugin("plugin");var CustomControlPlugin=function(_Plugin){inherits$2(CustomControlPlugin,_Plugin);function CustomControlPlugin(player,options){classCallCheck$2(this,CustomControlPlugin);var _this=possibleConstructorReturn$2(this,(CustomControlPlugin.__proto__||Object.getPrototypeOf(CustomControlPlugin)).call(this,player,options));_this._player=player;return _this}createClass$2(CustomControlPlugin,[{key:"createControl",value:function createControl(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var control=new Component$6(this._player);if(options.id){control.setAttribute("id",options.id)}if(options.className){control.setAttribute("class",options.className)}control.addClass("vjs-control");return this._player.getChild("controlBar").addChild(control,{},options.index)}}]);return CustomControlPlugin}(Plugin$7);videojs$1.registerPlugin("customControl",CustomControlPlugin);var Plugin$8=videojs$1.getPlugin("plugin");var ControlInteractionPlugin=function(_Plugin){inherits$2(ControlInteractionPlugin,_Plugin);function ControlInteractionPlugin(player,options){classCallCheck$2(this,ControlInteractionPlugin);var _this=possibleConstructorReturn$2(this,(ControlInteractionPlugin.__proto__||Object.getPrototypeOf(ControlInteractionPlugin)).call(this,player,options));_this.player=player;_this.player.ready(function(){return _this._onReady()});_this.on(player,"ended",_this._onEnded);_this.on(player,"play",_this._onPlay);_this.on(player,"volumechange",_this._onVolumechange);return _this}createClass$2(ControlInteractionPlugin,[{key:"_attachControlEventListeners",value:function _attachControlEventListeners(){var controlBar=this.player.getChild("controlBar");if(!controlBar){return}var volumePanel=controlBar.getChild("volumePanel");var playToggle=controlBar.getChild("playToggle");var progressControl=controlBar.getChild("progressControl");var fullscreenToggle=controlBar.getChild("fullscreenToggle");var muteToggle=void 0;var volumeControl=void 0;if(volumePanel){muteToggle=volumePanel.getChild("muteToggle");volumeControl=volumePanel.getChild("volumeControl")}if(muteToggle){this.on(muteToggle,["tap","mouseup"],this._onMuteToggleInteraction)}if(volumeControl){this.on(volumeControl,["tap","mouseup"],this._onVolumeControlInteraction)}if(playToggle){this.on(playToggle,["tap","mouseup"],this._onPlayToggleInteraction)}if(progressControl){this.on(progressControl,["tap","mouseup"],this._onProgressControlInteraction)}if(fullscreenToggle){this.on(fullscreenToggle,["tap","mouseup"],this._onFullscreenToggleInteraction)}}},{key:"_onReady",value:function _onReady(){this._attachControlEventListeners()}},{key:"_onEnded",value:function _onEnded(){this._isVideoEnded=true}},{key:"_onPlay",value:function _onPlay(){this._isVideoEnded=false}},{key:"_onVolumechange",value:function _onVolumechange(){var currentVolume=this.player.volume();this._previousVolume=Number.isNaN(this._currentVolume)?currentVolume:this._currentVolume;this._currentVolume=currentVolume}},{key:"_onPlayToggleInteraction",value:function _onPlayToggleInteraction(){var controlName=void 0;if(this._isVideoEnded){controlName=VIDEO_CONTROL_NAMES.VIDEO_TOOLBAR_REPLAY}else if(this.player.paused()){controlName=VIDEO_CONTROL_NAMES.VIDEO_TOOLBAR_PLAY}else{controlName=VIDEO_CONTROL_NAMES.VIDEO_TOOLBAR_PAUSE}this.fireControlInteractionEvent({controlName:controlName})}},{key:"_onProgressControlInteraction",value:function _onProgressControlInteraction(){this.fireControlInteractionEvent({controlName:VIDEO_CONTROL_NAMES.VIDEO_TOOLBAR_SCRUBBER,eventInfo:{interactionType:CONTROL_INTERACTIONS.DRAG}})}},{key:"_onMuteToggleInteraction",value:function _onMuteToggleInteraction(){this.fireControlInteractionEvent({controlName:VIDEO_CONTROL_NAMES.VIDEO_TOOLBAR_MUTE_UNMUTE})}},{key:"_onVolumeControlInteraction",value:function _onVolumeControlInteraction(){var eventInfo={};if(this._previousVolume<this._currentVolume){eventInfo.interactionType=CONTROL_INTERACTIONS.SWIPE_RIGHT}else{eventInfo.interactionType=CONTROL_INTERACTIONS.SWIPE_LEFT}this.fireControlInteractionEvent({eventInfo:eventInfo,controlName:VIDEO_CONTROL_NAMES.VIDEO_TOOLBAR_VOLUME_SLIDER})}},{key:"_onFullscreenToggleInteraction",value:function _onFullscreenToggleInteraction(){this.fireControlInteractionEvent({controlName:VIDEO_CONTROL_NAMES.VIDEO_TOOLBAR_FULLSCREEN_TOGGLE})}},{key:"fireControlInteractionEvent",value:function fireControlInteractionEvent(eventData){assert("controlInteraction: controlName must be a property on eventData",eventData.controlName);this.trigger("track",eventData)}}]);return ControlInteractionPlugin}(Plugin$8);videojs$1.registerPlugin("controlInteraction",ControlInteractionPlugin);var Plugin$9=videojs$1.getPlugin("plugin");var mergeOptions$8=videojs$1.mergeOptions;var DEFAULTS$6={namespace:undefined};var STORAGE_KEY="media-player-prefs";var PROP_KEYS={RATE:"rate",VOLUME:"volume",MUTED:"muted"};var UserPreferences=function(_Plugin){inherits$2(UserPreferences,_Plugin);function UserPreferences(player,options){classCallCheck$2(this,UserPreferences);var _this=possibleConstructorReturn$2(this,(UserPreferences.__proto__||Object.getPrototypeOf(UserPreferences)).apply(this,arguments));var _mergeOptions=mergeOptions$8(DEFAULTS$6,options),namespace=_mergeOptions.namespace;_this._key=namespace?namespace+":"+STORAGE_KEY:STORAGE_KEY;_this._player=player;_this._player.ready(function(){_this._setInitialRate();_this._setInitialVolume();_this.on(_this._player,"ratechange",_this._onRatechange);_this.on(_this._player,"volumechange",_this._onVolumechange)});return _this}createClass$2(UserPreferences,[{key:"set",value:function set$$1(name,value){if(this._cache&&this._cache[name]===value){return}var data=mergeOptions$8(this._cache,defineProperty$1({},name,value));try{this.localStorage.setItem(this._key,JSON.stringify(data))}catch(e){}this._cache=data}},{key:"save",value:function save(data){try{this.localStorage.setItem(this._key,JSON.stringify(data))}catch(e){}}},{key:"get",value:function get(name){if(this._cache){return this._cache[name]}try{var value=this.localStorage.getItem(this._key);this._cache=value?JSON.parse(value):{}}catch(e){this._cache={}}return this._cache[name]}},{key:"_onRatechange",value:function _onRatechange(){var rate=this._player.playbackRate();this.set(PROP_KEYS.RATE,rate);this._player.defaultPlaybackRate(rate)}},{key:"_onVolumechange",value:function _onVolumechange(){this.set(PROP_KEYS.MUTED,this._player.muted());this.set(PROP_KEYS.VOLUME,this._player.volume())}},{key:"_setInitialVolume",value:function _setInitialVolume(){var volumePref=this.get(PROP_KEYS.VOLUME);var mutedPref=this.get(PROP_KEYS.MUTED);if(isPresent(volumePref)){this._player.volume(volumePref)}if(isPresent(mutedPref)&&!isPresent(this._player.options_.muted)){this._player.muted(mutedPref)}}},{key:"_setInitialRate",value:function _setInitialRate(){var ratePref=this.get(PROP_KEYS.RATE);var playbackRateMenu=this._player.getChild("controlBar").getChild("playbackRateMenuButton");if(ratePref&&playbackRateMenu&&playbackRateMenu.playbackRates().indexOf(ratePref)>-1){this._player.playbackRate(ratePref)}}}]);return UserPreferences}(Plugin$9);if(IS_BROWSER){UserPreferences.prototype.localStorage=localStorage}videojs$1.registerPlugin("userPreferences",UserPreferences);function getDeepChild(component,path){var names=path.split(".");return names.reduce(function(item,name){return item?item.getChild(name):null},component)}var Plugin$10=videojs$1.getPlugin("plugin");var ControlTooltip$1=videojs$1.getComponent("ControlTooltip");var CONTROLS=["PlayToggle","SkipBackButton","SkipAheadButton","PreviousButton","NextButton","CaptionsToggle","FullscreenToggle","SettingsMenuButton.SettingsMenuButton","PlaybackRateMenuButton.PlaybackRateMenuButton"];var ControlTooltips=function(_Plugin){inherits$2(ControlTooltips,_Plugin);function ControlTooltips(player){classCallCheck$2(this,ControlTooltips);var _this=possibleConstructorReturn$2(this,(ControlTooltips.__proto__||Object.getPrototypeOf(ControlTooltips)).apply(this,arguments));_this._player=player;player.ready(function(){_this._controlBar=player.getChild("controlBar");_this._controls=_this._controlBar.children();_this._middleIndex=_this._getMiddleIndex();CONTROLS.forEach(function(controlName){var control=getDeepChild(_this._controlBar,controlName);if(control){var maybeParent=control;var path=controlName.split(".");if(path.length>1){maybeParent=_this._controlBar.getChild(path[0])}_this.addTooltip(control,{side:_this._getSide(maybeParent)})}});_this._middleIndex=null});return _this}createClass$2(ControlTooltips,[{key:"addTooltip",value:function addTooltip(control,_ref){var side=_ref.side;var tooltip=new ControlTooltip$1(this._player,{control:control,side:side});control.addChild(tooltip)}},{key:"_getSide",value:function _getSide(control){var middle=this._middleIndex||this._getMiddleIndex();if(middle){var index=this._controls.indexOf(control);return index>middle?SIDES.RIGHT:SIDES.LEFT}return null}},{key:"_getMiddleIndex",value:function _getMiddleIndex(){var spacer=this._controlBar.getChild("CustomControlSpacer");var index=spacer&&this._controls.indexOf(spacer);return index>-1?index:null}}]);return ControlTooltips}(Plugin$10);videojs$1.registerPlugin("controlTooltips",ControlTooltips);var Plugin$11=videojs$1.getPlugin("plugin");var Playlist$1=function(_Plugin){inherits$2(Playlist,_Plugin);function Playlist(player){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$autoplay=_ref.autoplay,autoplay=_ref$autoplay===undefined?true:_ref$autoplay;classCallCheck$2(this,Playlist);var _this=possibleConstructorReturn$2(this,(Playlist.__proto__||Object.getPrototypeOf(Playlist)).apply(this,arguments));_this._autoplay=autoplay;player.ready(function(){var nextButton=getDeepChild(player,"controlBar.nextButton");var previousButton=getDeepChild(player,"controlBar.previousButton");if(nextButton){_this.on(nextButton,"next",function(){_this.next({autoplay:autoplay&&!player.paused()})})}if(previousButton){_this.on(previousButton,"previous",function(){_this.previous({autoplay:autoplay&&!player.paused()})})}_this.on(player,"ended",_this._onEnded)});return _this}createClass$2(Playlist,[{key:"previous",value:function previous(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},autoplay=_ref2.autoplay;this.player.options({autoplay:autoplay?"play":false});this.trigger("previous")}},{key:"next",value:function next(){var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},autoplay=_ref3.autoplay;this.player.options({autoplay:autoplay?"play":false});this.trigger("next")}},{key:"setCurrentItem",value:function setCurrentItem(options){var _this2=this;var source=options.source,autoplay=options.autoplay,_options$plugins=options.plugins,plugins=_options$plugins===undefined?{}:_options$plugins;assert("playlist setCurrentItem(): source is required",source);if(isPresent(autoplay)){this.player.options({autoplay:autoplay})}Object.keys(plugins).forEach(function(pluginName){_this2.player[pluginName]().setState(plugins[pluginName])});this.player.src(source);this.trigger("itemchange",options)}},{key:"_onEnded",value:function _onEnded(){var player=this.player;var settings=getDeepChild(player,"controlBar.settingsMenuButton");var autoplaySetting=settings&&settings.menu.getChild("autoplaySetting");var hasAutoplaySetting=autoplaySetting?autoplaySetting.selected():true;var autoplay=this._autoplay&&hasAutoplaySetting&&!player.loop();this.trigger("ended",{autoplay:autoplay,next:this.next.bind(this)
})}}]);return Playlist}(Plugin$11);videojs$1.registerPlugin("playlist",Playlist$1);function disableContextMenu(){this.on("contextmenu",function(event){event.preventDefault()})}videojs$1.registerPlugin("disableContextMenu",disableContextMenu);function getLegacyControls(){return{playToggle:{},backToStartButton:{},skipBackButton:{},skipAheadButton:{},previousButton:{},nextButton:{},progressControl:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},liveDisplay:{},playbackRateMenuButton:{},volumePanel:{inline:false},captionsToggle:{},settingsMenuButton:{},fullscreenToggle:{}}}function createPlayer(element){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var isLegacyTheme=options.theme==="legacy";var defaults={customCaptionsDisplay:false,children:{mediaLoader:{},posterImage:{},bigPlayButton:{},loadingSpinner:{},controlBar:{},errorDisplay:{},customCaptionsDisplay:{},textTrackDisplay:{},resizeManager:{}},controlBar:{skipBackButton:false,skipAheadButton:false,previousButton:false,nextButton:false,settingsMenuButton:false,backToStartButton:false,fullscreenToggle:false,captionsToggle:false,children:{progressControl:{},playToggle:{},backToStartButton:{},skipBackButton:{},skipAheadButton:{},previousButton:{},nextButton:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},liveDisplay:{},customControlSpacer:{},playbackRateMenuButton:{},captionsToggle:{},settingsMenuButton:{},volumePanel:{inline:false},fullscreenToggle:{}}},plugins:{disableContextMenu:true,userInteraction:true,qualityLevels:{}},controls:true,fluid:true,responsive:true,aspectRatio:"auto",enableSourceset:true,techOrder:["html5"],html5:{hls:{withCredentials:false},nativeTextTracks:false}};if(isLegacyTheme){defaults.controlBar.children=getLegacyControls()}var player=videojs$1(element,videojs$1.mergeOptions(defaults,options,{autoplay:options.autoplay===true?"any":options.autoplay||false}));if(isLegacyTheme){player.addClass("vjs-theme-legacy")}return player}var webTrackingTransport$1=createCommonjsModule(function(module,exports){(function(global,factory){if(typeof undefined==="function"&&undefined.amd){undefined(["exports","module"],factory)}else{factory(exports,module)}})(commonjsGlobal,function(exports,module){var isBrowser=typeof window!=="undefined"&&window&&window.appEnvironment!=="node";var useRequestIdleCallback=isBrowser&&!!window.requestIdleCallback;var idleThreshold=8;var webTrackingTransport={AJAX_METHOD:"POST",DEFAULT_PAGE_TYPE:"ajax",globalTrackingUrl:null,globalTrackingAppId:"no.app.id",queue:[],paused:false,maxQueueSize:1,queueTimeout:1e3,timeoutId:null,disableSendBeacon:true,csrfToken:"",testId:"",testSegId:"",setProperty:function setProperty(key,value){if(typeof value!=="undefined"){this[key]=value}},setTrackingUrl:function setTrackingUrl(trackingUrl){this.setProperty("globalTrackingUrl",trackingUrl)},setAppId:function setAppId(appId){this.setProperty("globalTrackingAppId",appId)},setCsrfToken:function setCsrfToken(token){this.setProperty("csrfToken",token)},setTestId:function setTestId(testId){this.setProperty("testId",testId)},setTestSegId:function setTestSegId(testSegId){this.setProperty("testSegId",testSegId)},getCookieString:function getCookieString(){return document.cookie},getCsrfToken:function getCsrfToken(){var token="JSESSIONID=";var ca=this.getCookieString().split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1)}if(c.indexOf(token)!==-1){var value=c.substring(token.length,c.length);if(value[0]==='"'&&value[value.length-1]==='"'){value=value.substring(1,value.length-1)}return value}}return""},createXmlHttpObject:function createXmlHttpObject(){return isBrowser&&!!window.XMLHttpRequest?new XMLHttpRequest:null},beacon:function beacon(postData,success,failure,trackingEndpointUrl){this._beacon(postData,success,failure,trackingEndpointUrl||this.globalTrackingUrl,this.disableSendBeacon?null:isBrowser&&navigator.sendBeacon&&navigator.sendBeacon.bind(navigator))},_beacon:function _beacon(postData,success,failure,trackingEndpointUrl,sendBeacon){if(sendBeacon){var result=undefined;try{result=sendBeacon(trackingEndpointUrl,postData)}catch(e){if((typeof e==="undefined"?"undefined":_typeof2(e))==="object"){e.message="Error sending ["+postData+"] to "+trackingEndpointUrl+" using sendBeacon:"+e.message;e.tags=["tracking"]}throw e}if(result){if(success){success(result)}return}}this.ajax(postData,success,failure,trackingEndpointUrl)},ajax:function ajax(postData,success,failure,trackingEndpointUrl){var req;if(!trackingEndpointUrl){if(failure){failure("Tracking url is not defined")}return}req=this.createXmlHttpObject();if(!req){return}req.open(this.AJAX_METHOD,trackingEndpointUrl,true);req.withCredentials=true;req.setRequestHeader("Content-type","application/json");if(!this.csrfToken){req.setRequestHeader("Csrf-Token",this.getCsrfToken())}else{req.setRequestHeader("Csrf-Token",this.csrfToken)}if(this.testId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_ID",this.testId)}if(this.testSegId){req.setRequestHeader("X-LinkedIn-traceDataContext-ENG_TEST_SEGMENT_ID",this.testSegId)}req.onreadystatechange=function(){if(req.readyState!==4){return}if(req.status!==200&&req.status!==304){if(failure){failure('Response is not "OK" or "Not Modified" for tracking request')}return}if("function"===typeof success){success(req)}};if(req.readyState===4){return}req.send(postData)},pause:function pause(){this.paused=true},unpause:function unpause(){this.paused=false;if(this.queue.length>=this.maxQueueSize){this.flush()}},flush:function flush(){if(this.queue.length>0){var self=this;this.beacon(JSON.stringify(this.queue),null,self.logError);this.queue=[]}if(useRequestIdleCallback){cancelIdleCallback(this.timeoutId)}else{clearTimeout(this.timeoutId)}this.timeoutId=null;this.paused=false},idleFlush:function idleFlush(timeout){var _this=this;var startTime=Date.now();return requestIdleCallback(function(deadline){if(deadline.timeRemaining()>idleThreshold||deadline.didTimeout){_this.flush()}else{_this.timeoutId=_this.idleFlush(timeout-(Date.now()-startTime))}},{timeout:timeout})},addToQueue:function addToQueue(payload){this.queue.push(payload);if(this.queue.length>=this.maxQueueSize&&!this.paused){return this.flush()}if(!this.timeoutId){var self=this;if(useRequestIdleCallback&&!this.paused){this.timeoutId=this.idleFlush(this.queueTimeout)}else{this.timeoutId=setTimeout(function(){self.flush()},this.queueTimeout)}}},validateEvent:function validateEvent(eventInfoOrName,eventBody,callback){this.beacon(JSON.stringify([{eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)}]),function(requestObject){return callback(null,requestObject)},function(requestObject){return callback(requestObject)},this.globalTrackingUrl+"/validate")},sendEvent:function sendEvent(eventInfoOrName,eventBody){this.addToQueue({eventInfo:this.populateEventInfo(eventInfoOrName),eventBody:this.populateEventHeaders(eventBody)})},getTimestamp:function getTimestamp(){return Math.round((new Date).getTime()/1e3)},populateEventInfo:function populateEventInfo(eventInfo){if(typeof eventInfo==="string"){eventInfo={eventName:eventInfo}}if(!eventInfo||(typeof eventInfo==="undefined"?"undefined":_typeof2(eventInfo))!=="object"){this.logError("Event info must be object");return{}}if(!eventInfo.appId){eventInfo.appId=this.globalTrackingAppId}return eventInfo},populateEventHeaders:function populateEventHeaders(eventBody){if(!eventBody||(typeof eventBody==="undefined"?"undefined":_typeof2(eventBody))!=="object"){this.logError("Event body must be object");return{}}return eventBody},logError:function logError(message){var console=window.console;if(console&&console.error){console.error(message)}},init:function init(){this.setTrackingUrl();this.setAppId();this.onBeforeUnload=this.onBeforeUnload.bind(this);if(isBrowser){window.addEventListener("beforeunload",this.onBeforeUnload)}},destroy:function destroy(){this.flush();if(isBrowser){window.removeEventListener("beforeunload",this.onBeforeUnload)}},onBeforeUnload:function onBeforeUnload(){this.flush()}};module.exports=webTrackingTransport})});var _rng,_mathRNG,_nodeRNG,_whatwgRNG;var _window="undefined"!==typeof window?window:null;function setupBrowser(){var _crypto=_window.crypto||_window.msCrypto;if(!_rng&&_crypto&&_crypto.getRandomValues){try{var _rnds8=new Uint8Array(16);_whatwgRNG=_rng=function whatwgRNG(){_crypto.getRandomValues(_rnds8);return _rnds8};_rng()}catch(e){}}if(!_rng){var _rnds=new Array(16);_mathRNG=_rng=function _rng(){for(var i=0,r;i<16;i++){if((i&3)===0){r=Math.random()*4294967296}_rnds[i]=r>>>((i&3)<<3)&255}return _rnds};if("undefined"!==typeof console&&console.warn){console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}}function setupNode(){if("function"===typeof require){try{var _rb=require("crypto").randomBytes;_nodeRNG=_rng=_rb&&function(){return _rb(16)};_rng()}catch(e){}}}if(_window){setupBrowser()}else{setupNode()}var BufferClass="function"===typeof Buffer?Buffer:Array;var _byteToHex=[];for(var i$1=0;i$1<256;i$1++){_byteToHex[i$1]=(i$1+256).toString(16).substr(1)}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options==="string"){buf=options==="binary"?new BufferClass(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||_rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;ii++){buf[i+ii]=rnds[ii]}}return buf||unparse(rnds)}var uuid=v4;uuid.v4=v4;uuid.unparse=unparse;uuid.BufferClass=BufferClass;uuid._rng=_rng;uuid._mathRNG=_mathRNG;uuid._nodeRNG=_nodeRNG;uuid._whatwgRNG=_whatwgRNG;function uint8ToBase64(uint8){var characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str=[];var bits;var i=0;var length=uint8.length;var extra=length%3;var bytes=length-extra;while(i<bytes){bits=uint8[i]<<16;bits|=uint8[i+1]<<8;bits|=uint8[i+2];str.push(characters.charAt(bits>>>18&63));str.push(characters.charAt(bits>>>12&63));str.push(characters.charAt(bits>>>6&63));str.push(characters.charAt(bits&63));i+=3}switch(extra){case 2:{bits=uint8[i]<<16;bits|=uint8[i+1]<<8;str.push(characters.charAt(bits>>>18&63));str.push(characters.charAt(bits>>>12&63));str.push(characters.charAt(bits>>>6&63));str.push("=");break}case 1:{bits=uint8[i]<<16;str.push(characters.charAt(bits>>>18&63));str.push(characters.charAt(bits>>>12&63));str.push("=");str.push("=");break}}return str.join("")}function generateTrackingId(){var trackingId=new Array(16);uuid.v4(null,trackingId);return uint8ToBase64(trackingId)}function getPageUrn(pageKey){if(!pageKey){throw"Page key is required."}return"urn:li:page:"+pageKey}function firePageViewEvent(_ref7){var _ref7$appId=_ref7.appId,appId=_ref7$appId===undefined?"":_ref7$appId,_ref7$eventName=_ref7.eventName,eventName=_ref7$eventName===undefined?"PageViewEvent":_ref7$eventName,_ref7$pageKey=_ref7.pageKey,pageKey=_ref7$pageKey===undefined?"":_ref7$pageKey,_ref7$pageType=_ref7.pageType,pageType=_ref7$pageType===undefined?"ajax":_ref7$pageType,_ref7$requestHeader=_ref7.requestHeader,requestHeader=_ref7$requestHeader===undefined?{pageKey:pageKey,referer:document.referrer||null}:_ref7$requestHeader,_ref7$topicName=_ref7.topicName,topicName=_ref7$topicName===undefined?"LearningPageViewEvent":_ref7$topicName,_ref7$trackingId=_ref7.trackingId,trackingId=_ref7$trackingId===undefined?generateTrackingId():_ref7$trackingId,_ref7$trackingInfo=_ref7.trackingInfo,trackingInfo=_ref7$trackingInfo===undefined?{}:_ref7$trackingInfo;webTrackingTransport$1.sendEvent({eventName:eventName,topicName:topicName,appId:appId},{requestHeader:requestHeader,header:{pageInstance:{pageUrn:getPageUrn(pageKey),trackingId:trackingId}},trackingInfo:trackingInfo,pageType:pageType})}function sendTrackingEvent(_ref8){var _ref8$eventName=_ref8.eventName,eventName=_ref8$eventName===undefined?"":_ref8$eventName,_ref8$pageKey=_ref8.pageKey,pageKey=_ref8$pageKey===undefined?"":_ref8$pageKey,_ref8$eventData=_ref8.eventData,eventData=_ref8$eventData===undefined?{}:_ref8$eventData,_ref8$requestHeader=_ref8.requestHeader,requestHeader=_ref8$requestHeader===undefined?{pageKey:pageKey,referer:document.referrer||null}:_ref8$requestHeader;var eventBody=eventData;eventBody.requestHeader=requestHeader;webTrackingTransport$1.sendEvent(eventName,eventBody)}var utils$2=createCommonjsModule(function(module,exports){exports.__esModule=true;exports.extend=extend;exports.indexOf=indexOf;exports.escapeExpression=escapeExpression;exports.isEmpty=isEmpty;exports.createFrame=createFrame;exports.blockParams=blockParams;exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"};var badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/;function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(Object.prototype.hasOwnProperty.call(arguments[i],key)){obj[key]=arguments[i][key]}}}return obj}var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function isFunction(value){return typeof value==="function"};if(isFunction(/x/)){exports.isFunction=isFunction=function isFunction(value){return typeof value==="function"&&toString.call(value)==="[object Function]"}}exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&(typeof value==="undefined"?"undefined":_typeof2(value))==="object"?toString.call(value)==="[object Array]":false};exports.isArray=isArray;function indexOf(array,value){for(var i=0,len=array.length;i<len;i++){if(array[i]===value){return i}}return-1}function escapeExpression(string){if(typeof string!=="string"){if(string&&string.toHTML){return string.toHTML()}else if(string==null){return""}else if(!string){return string+""}string=""+string}if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)}function isEmpty(value){if(!value&&value!==0){return true}else if(isArray(value)&&value.length===0){return true}else{return false}}function createFrame(object){var frame=extend({},object);frame._parent=object;return frame}function blockParams(params,ids){params.path=ids;return params}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}});unwrapExports(utils$2);var utils_1=utils$2.extend;var utils_2=utils$2.indexOf;var utils_3=utils$2.escapeExpression;var utils_4=utils$2.isEmpty;var utils_5=utils$2.createFrame;var utils_6=utils$2.blockParams;var utils_7=utils$2.appendContextPath;var utils_8=utils$2.isFunction;var utils_9=utils$2.isArray;var exception=createCommonjsModule(function(module,exports){exports.__esModule=true;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var loc=node&&node.loc,line=undefined,column=undefined;if(loc){line=loc.start.line;column=loc.start.column;message+=" - "+line+":"+column}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}if(Error.captureStackTrace){Error.captureStackTrace(this,Exception)}try{if(loc){this.lineNumber=line;if(Object.defineProperty){Object.defineProperty(this,"column",{value:column,enumerable:true})}else{this.column=column}}}catch(nop){}}Exception.prototype=new Error;exports["default"]=Exception;module.exports=exports["default"]});unwrapExports(exception);var blockHelperMissing=createCommonjsModule(function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(utils$2.isArray(context)){if(context.length>0){if(options.ids){options.ids=[options.name]}return instance.helpers.each(context,options)}else{return inverse(this)}}else{if(options.data&&options.ids){var data=utils$2.createFrame(options.data);data.contextPath=utils$2.appendContextPath(options.data.contextPath,options.name);options={data:data}}return fn(context,options)}})};module.exports=exports["default"]});unwrapExports(blockHelperMissing);var each$1=createCommonjsModule(function(module,exports){exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _exception2=_interopRequireDefault(exception);exports["default"]=function(instance){instance.registerHelper("each",function(context,options){if(!options){throw new _exception2["default"]("Must pass iterator to #each")}var fn=options.fn,inverse=options.inverse,i=0,ret="",data=undefined,contextPath=undefined;if(options.data&&options.ids){contextPath=utils$2.appendContextPath(options.data.contextPath,options.ids[0])+"."}if(utils$2.isFunction(context)){context=context.call(this)}if(options.data){data=utils$2.createFrame(options.data)}function execIteration(field,index,last){if(data){data.key=field;data.index=index;data.first=index===0;data.last=!!last;if(contextPath){data.contextPath=contextPath+field}}ret=ret+fn(context[field],{data:data,blockParams:utils$2.blockParams([context[field],field],[contextPath+field,null])})}if(context&&(typeof context==="undefined"?"undefined":_typeof2(context))==="object"){if(utils$2.isArray(context)){for(var j=context.length;i<j;i++){if(i in context){execIteration(i,i,i===context.length-1)}}}else{var priorKey=undefined;for(var key in context){if(context.hasOwnProperty(key)){if(priorKey!==undefined){execIteration(priorKey,i-1)}priorKey=key;i++}}if(priorKey!==undefined){execIteration(priorKey,i-1,true)}}}if(i===0){ret=inverse(this)}return ret})};module.exports=exports["default"]});unwrapExports(each$1);var helperMissing=createCommonjsModule(function(module,exports){exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _exception2=_interopRequireDefault(exception);exports["default"]=function(instance){instance.registerHelper("helperMissing",function(){if(arguments.length===1){return undefined}else{throw new _exception2["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}})};module.exports=exports["default"]});unwrapExports(helperMissing);var _if=createCommonjsModule(function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerHelper("if",function(conditional,options){if(utils$2.isFunction(conditional)){conditional=conditional.call(this)}if(!options.hash.includeZero&&!conditional||utils$2.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})})};module.exports=exports["default"]});unwrapExports(_if);var log$2=createCommonjsModule(function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerHelper("log",function(){var args=[undefined],options=arguments[arguments.length-1];for(var i=0;i<arguments.length-1;i++){args.push(arguments[i])}var level=1;if(options.hash.level!=null){level=options.hash.level}else if(options.data&&options.data.level!=null){level=options.data.level}args[0]=level;instance.log.apply(instance,args)})};module.exports=exports["default"]});unwrapExports(log$2);var lookup=createCommonjsModule(function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})};module.exports=exports["default"]});unwrapExports(lookup);var _with=createCommonjsModule(function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerHelper("with",function(context,options){if(utils$2.isFunction(context)){context=context.call(this)}var fn=options.fn;if(!utils$2.isEmpty(context)){var data=options.data;if(options.data&&options.ids){data=utils$2.createFrame(options.data);data.contextPath=utils$2.appendContextPath(options.data.contextPath,options.ids[0])}return fn(context,{data:data,blockParams:utils$2.blockParams([context],[data&&data.contextPath])})}else{return options.inverse(this)}})};module.exports=exports["default"]});unwrapExports(_with);var helpers=createCommonjsModule(function(module,exports){exports.__esModule=true;exports.registerDefaultHelpers=registerDefaultHelpers;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _helpersBlockHelperMissing2=_interopRequireDefault(blockHelperMissing);var _helpersEach2=_interopRequireDefault(each$1);var _helpersHelperMissing2=_interopRequireDefault(helperMissing);var _helpersIf2=_interopRequireDefault(_if);var _helpersLog2=_interopRequireDefault(log$2);var _helpersLookup2=_interopRequireDefault(lookup);var _helpersWith2=_interopRequireDefault(_with);function registerDefaultHelpers(instance){_helpersBlockHelperMissing2["default"](instance);_helpersEach2["default"](instance);_helpersHelperMissing2["default"](instance);_helpersIf2["default"](instance);_helpersLog2["default"](instance);_helpersLookup2["default"](instance);_helpersWith2["default"](instance)}});unwrapExports(helpers);var helpers_1=helpers.registerDefaultHelpers;var inline=createCommonjsModule(function(module,exports){exports.__esModule=true;exports["default"]=function(instance){instance.registerDecorator("inline",function(fn,props,container,options){var ret=fn;if(!props.partials){props.partials={};ret=function ret(context,options){var original=container.partials;container.partials=utils$2.extend({},original,props.partials);var ret=fn(context,options);container.partials=original;return ret}}props.partials[options.args[0]]=options.fn;return ret})};module.exports=exports["default"]});unwrapExports(inline);var decorators=createCommonjsModule(function(module,exports){exports.__esModule=true;exports.registerDefaultDecorators=registerDefaultDecorators;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _decoratorsInline2=_interopRequireDefault(inline);function registerDefaultDecorators(instance){_decoratorsInline2["default"](instance)}});unwrapExports(decorators);var decorators_1=decorators.registerDefaultDecorators;var logger_1=createCommonjsModule(function(module,exports){exports.__esModule=true;var logger={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function lookupLevel(level){if(typeof level==="string"){var levelMap=utils$2.indexOf(logger.methodMap,level.toLowerCase());if(levelMap>=0){level=levelMap}else{level=parseInt(level,10)}}return level},log:function log(level){level=logger.lookupLevel(level);if(typeof console!=="undefined"&&logger.lookupLevel(logger.level)<=level){var method=logger.methodMap[level];if(!console[method]){method="log"}for(var _len=arguments.length,message=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){message[_key-1]=arguments[_key]}console[method].apply(console,message)}}};exports["default"]=logger;module.exports=exports["default"]});unwrapExports(logger_1);var base=createCommonjsModule(function(module,exports){exports.__esModule=true;exports.HandlebarsEnvironment=HandlebarsEnvironment;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _exception2=_interopRequireDefault(exception);var _logger2=_interopRequireDefault(logger_1);var VERSION="4.0.12";exports.VERSION=VERSION;var COMPILER_REVISION=7;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};exports.REVISION_CHANGES=REVISION_CHANGES;var objectType="[object Object]";function HandlebarsEnvironment(helpers$$1,partials,decorators$$1){this.helpers=helpers$$1||{};this.partials=partials||{};this.decorators=decorators$$1||{};helpers.registerDefaultHelpers(this);decorators.registerDefaultDecorators(this)}HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2["default"],log:_logger2["default"].log,registerHelper:function registerHelper(name,fn){if(utils$2.toString.call(name)===objectType){if(fn){throw new _exception2["default"]("Arg not supported with multiple helpers")}utils$2.extend(this.helpers,name)}else{this.helpers[name]=fn}},unregisterHelper:function unregisterHelper(name){delete this.helpers[name]},registerPartial:function registerPartial(name,partial){if(utils$2.toString.call(name)===objectType){utils$2.extend(this.partials,name)}else{if(typeof partial==="undefined"){throw new _exception2["default"]('Attempting to register a partial called "'+name+'" as undefined')}this.partials[name]=partial}},unregisterPartial:function unregisterPartial(name){delete this.partials[name]},registerDecorator:function registerDecorator(name,fn){if(utils$2.toString.call(name)===objectType){if(fn){throw new _exception2["default"]("Arg not supported with multiple decorators")}utils$2.extend(this.decorators,name)}else{this.decorators[name]=fn}},unregisterDecorator:function unregisterDecorator(name){delete this.decorators[name]}};var log=_logger2["default"].log;exports.log=log;exports.createFrame=utils$2.createFrame;exports.logger=_logger2["default"]});unwrapExports(base);var base_1=base.HandlebarsEnvironment;var base_2=base.VERSION;var base_3=base.COMPILER_REVISION;var base_4=base.REVISION_CHANGES;var base_5=base.log;var base_6=base.createFrame;var base_7=base.logger;var safeString=createCommonjsModule(function(module,exports){exports.__esModule=true;function SafeString(string){this.string=string}SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string};exports["default"]=SafeString;module.exports=exports["default"]});unwrapExports(safeString);var runtime=createCommonjsModule(function(module,exports){exports.__esModule=true;exports.checkRevision=checkRevision;exports.template=template;exports.wrapProgram=wrapProgram;exports.resolvePartial=resolvePartial;exports.invokePartial=invokePartial;exports.noop=noop;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var Utils=_interopRequireWildcard(utils$2);var _exception2=_interopRequireDefault(exception);function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=base.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=base.REVISION_CHANGES[currentRevision],compilerVersions=base.REVISION_CHANGES[compilerRevision];throw new _exception2["default"]("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}else{throw new _exception2["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").")}}}function template(templateSpec,env){if(!env){throw new _exception2["default"]("No environment passed to template")}if(!templateSpec||!templateSpec.main){throw new _exception2["default"]("Unknown template object: "+(typeof templateSpec==="undefined"?"undefined":_typeof2(templateSpec)))}templateSpec.main.decorator=templateSpec.main_d;env.VM.checkRevision(templateSpec.compiler);function invokePartialWrapper(partial,context,options){if(options.hash){context=Utils.extend({},context,options.hash);if(options.ids){options.ids[0]=true}}partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(result==null&&env.compile){options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env);result=options.partials[options.name](context,options)}if(result!=null){if(options.indent){var lines=result.split("\n");for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l){break}lines[i]=options.indent+lines[i]}result=lines.join("\n")}return result}else{throw new _exception2["default"]("The partial "+options.name+" could not be compiled when running in runtime-only mode")}}var container={strict:function strict(obj,name){if(!(name in obj)){throw new _exception2["default"]('"'+name+'" not defined in '+obj)}return obj[name]},lookup:function lookup(depths,name){var len=depths.length;for(var i=0;i<len;i++){if(depths[i]&&depths[i][name]!=null){return depths[i][name]}}},lambda:function lambda(current,context){return typeof current==="function"?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function fn(i){var ret=templateSpec[i];ret.decorator=templateSpec[i+"_d"];return ret},programs:[],program:function program(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||depths||blockParams||declaredBlockParams){programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths)}else if(!programWrapper){programWrapper=this.programs[i]=wrapProgram(this,i,fn)}return programWrapper},data:function data(value,depth){while(value&&depth--){value=value._parent}return value},merge:function merge(param,common){var obj=param||common;if(param&&common&&param!==common){obj=Utils.extend({},common,param)}return obj},nullContext:Object.seal({}),noop:env.VM.noop,compilerInfo:templateSpec.compiler};function ret(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData){data=initData(context,data)}var depths=undefined,blockParams=templateSpec.useBlockParams?[]:undefined;if(templateSpec.useDepths){if(options.depths){depths=context!=options.depths[0]?[context].concat(options.depths):options.depths}else{depths=[context]}}function main(context){return""+templateSpec.main(container,context,container.helpers,container.partials,data,blockParams,depths)}main=executeDecorators(templateSpec.main,main,container,options.depths||[],data,blockParams);return main(context,options)}ret.isTop=true;ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial){container.partials=container.merge(options.partials,env.partials)}if(templateSpec.usePartial||templateSpec.useDecorators){container.decorators=container.merge(options.decorators,env.decorators)}}else{container.helpers=options.helpers;container.partials=options.partials;container.decorators=options.decorators}};ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams){throw new _exception2["default"]("must pass block params")}if(templateSpec.useDepths&&!depths){throw new _exception2["default"]("must pass parent depths")}return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)};return ret}function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var currentDepths=depths;if(depths&&context!=depths[0]&&!(context===container.nullContext&&depths[0]===null)){currentDepths=[context].concat(depths)}return fn(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),currentDepths)}prog=executeDecorators(fn,prog,container,depths,data,blockParams);
prog.program=i;prog.depth=depths?depths.length:0;prog.blockParams=declaredBlockParams||0;return prog}function resolvePartial(partial,context,options){if(!partial){if(options.name==="@partial-block"){partial=options.data["partial-block"]}else{partial=options.partials[options.name]}}else if(!partial.call&&!options.name){options.name=partial;partial=options.partials[partial]}return partial}function invokePartial(partial,context,options){var currentPartialBlock=options.data&&options.data["partial-block"];options.partial=true;if(options.ids){options.data.contextPath=options.ids[0]||options.data.contextPath}var partialBlock=undefined;if(options.fn&&options.fn!==noop){(function(){options.data=base.createFrame(options.data);var fn=options.fn;partialBlock=options.data["partial-block"]=function partialBlockWrapper(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];options.data=base.createFrame(options.data);options.data["partial-block"]=currentPartialBlock;return fn(context,options)};if(fn.partials){options.partials=Utils.extend({},options.partials,fn.partials)}})()}if(partial===undefined&&partialBlock){partial=partialBlock}if(partial===undefined){throw new _exception2["default"]("The partial "+options.name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}}function noop(){return""}function initData(context,data){if(!data||!("root"in data)){data=data?base.createFrame(data):{};data.root=context}return data}function executeDecorators(fn,prog,container,depths,data,blockParams){if(fn.decorator){var props={};prog=fn.decorator(prog,props,container,depths&&depths[0],data,blockParams,depths);Utils.extend(prog,props)}return prog}});unwrapExports(runtime);var runtime_1=runtime.checkRevision;var runtime_2=runtime.template;var runtime_3=runtime.wrapProgram;var runtime_4=runtime.resolvePartial;var runtime_5=runtime.invokePartial;var runtime_6=runtime.noop;var noConflict=createCommonjsModule(function(module,exports){exports.__esModule=true;exports["default"]=function(Handlebars){var root=typeof commonjsGlobal!=="undefined"?commonjsGlobal:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){if(root.Handlebars===Handlebars){root.Handlebars=$Handlebars}return Handlebars}};module.exports=exports["default"]});unwrapExports(noConflict);var handlebars_runtime=createCommonjsModule(function(module,exports){exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var base$$1=_interopRequireWildcard(base);var _handlebarsSafeString2=_interopRequireDefault(safeString);var _handlebarsException2=_interopRequireDefault(exception);var Utils=_interopRequireWildcard(utils$2);var runtime$$1=_interopRequireWildcard(runtime);var _handlebarsNoConflict2=_interopRequireDefault(noConflict);function create(){var hb=new base$$1.HandlebarsEnvironment;Utils.extend(hb,base$$1);hb.SafeString=_handlebarsSafeString2["default"];hb.Exception=_handlebarsException2["default"];hb.Utils=Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime$$1;hb.template=function(spec){return runtime$$1.template(spec,hb)};return hb}var inst=create();inst.create=create;_handlebarsNoConflict2["default"](inst);inst["default"]=inst;exports["default"]=inst;module.exports=exports["default"]});unwrapExports(handlebars_runtime);var runtime$2=handlebars_runtime["default"];var Templates={};Templates["button"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){return"disabled"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,helper,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3="function",alias4=container.escapeExpression;return'<button class="'+alias4((helper=(helper=helpers.buttonClass||(depth0!=null?depth0.buttonClass:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"buttonClass",hash:{},data:data}):helper))+'" data-ssplayer-event="'+alias4((helper=(helper=helpers.event||(depth0!=null?depth0.event:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"event",hash:{},data:data}):helper))+'" '+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.disabled:depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+'>\n  <li-icon class="'+alias4((helper=(helper=helpers.iconClass||(depth0!=null?depth0.iconClass:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"iconClass",hash:{},data:data}):helper))+'" type="'+alias4((helper=(helper=helpers.icon||(depth0!=null?depth0.icon:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"icon",hash:{},data:data}):helper))+'-icon" a11y-text="'+alias4((helper=(helper=helpers.text||(depth0!=null?depth0.text:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"text",hash:{},data:data}):helper))+'"></li-icon>\n</button>\n'},useData:true});Templates["endcards/embed-endcard-v2"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){return"embed-endcard__current--single-card"},3:function _(container,depth0,helpers,partials,data,blockParams){var stack1,alias1=depth0!=null?depth0:container.nullContext||{};return'    <div class="embed-endcard__related">\n      <h3 class="embed-endcard__headline">\n        '+container.escapeExpression((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(alias1,"or_explore_related_courses",{name:"t8",hash:{},data:data,blockParams:blockParams}))+'\n      </h3>\n        <ul class="embed-endcard__related-list">\n'+((stack1=helpers.each.call(alias1,depth0!=null?depth0.relatedCourses:depth0,{name:"each",hash:{},fn:container.program(4,data,1,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))!=null?stack1:"")+"        </ul>\n    </div>\n"},4:function _(container,depth0,helpers,partials,data,blockParams){var stack1;return'            <li class="embed-endcard__related-item">\n'+((stack1=container.invokePartial(partials["endcards/entities/video-entity"],depth0,{name:"endcards/entities/video-entity",hash:{entity:blockParams[0][0]},data:data,blockParams:blockParams,indent:"              ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"            </li>\n"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data,blockParams){var stack1,alias1=depth0!=null?depth0:container.nullContext||{};return'<div class="embed-endcard">\n  <div class="embed-endcard__current '+((stack1=helpers.unless.call(alias1,(stack1=depth0!=null?depth0.relatedCourses:depth0)!=null?stack1.length:stack1,{name:"unless",hash:{},fn:container.program(1,data,0,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))!=null?stack1:"")+'">\n    <h3 class="embed-endcard__headline">\n      '+container.escapeExpression((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(alias1,"watch_more_from_this_course",{name:"t8",hash:{},data:data,blockParams:blockParams}))+"\n    </h3>\n"+((stack1=container.invokePartial(partials["endcards/entities/video-entity"],depth0,{name:"endcards/entities/video-entity",hash:{entity:depth0!=null?depth0.course:depth0},data:data,blockParams:blockParams,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"  </div>\n\n"+((stack1=helpers["if"].call(alias1,(stack1=depth0!=null?depth0.relatedCourses:depth0)!=null?stack1.length:stack1,{name:"if",hash:{},fn:container.program(3,data,0,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))!=null?stack1:"")+"</div>\n"},usePartial:true,useData:true,useBlockParams:true});Templates["endcards/embed-endcard"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){return"embed-endcard__current--single-card"},3:function _(container,depth0,helpers,partials,data,blockParams){var stack1,alias1=depth0!=null?depth0:container.nullContext||{};return'        <div class="embed-endcard__related">\n          <h3 class="embed-endcard__headline">\n            '+container.escapeExpression((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(alias1,"or_explore_related_courses",{name:"t8",hash:{},data:data,blockParams:blockParams}))+'\n          </h3>\n            <ul class="embed-endcard__related-list">\n'+((stack1=helpers.each.call(alias1,depth0!=null?depth0.relatedCourses:depth0,{name:"each",hash:{},fn:container.program(4,data,1,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))!=null?stack1:"")+"            </ul>\n        </div>\n"},4:function _(container,depth0,helpers,partials,data,blockParams){var stack1;return'                <li class="embed-endcard__related-item">\n'+((stack1=container.invokePartial(partials["endcards/entities/video-entity"],depth0,{name:"endcards/entities/video-entity",hash:{entity:blockParams[0][0]},data:data,blockParams:blockParams,indent:"                  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"                </li>\n"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data,blockParams){var stack1,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'<div class="ssplayer-modal ssplayer-component-hide embed-endcard-modal">\n  <button class="ssplayer-modal-close" data-ssplayer-modal-close>\n    <li-icon type="cancel-icon" aria-hidden="true"></li-icon>\n    <span class="a11y-text">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"close",{name:"t8",hash:{},data:data,blockParams:blockParams}))+'</span>\n  </button>\n  <div class="ssplayer-modal-content">\n    <div class="embed-endcard">\n\n      <div class="embed-endcard__current '+((stack1=helpers.unless.call(alias1,(stack1=depth0!=null?depth0.relatedCourses:depth0)!=null?stack1.length:stack1,{name:"unless",hash:{},fn:container.program(1,data,0,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))!=null?stack1:"")+'">\n        <h3 class="embed-endcard__headline">\n          '+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"watch_more_from_this_course",{name:"t8",hash:{},data:data,blockParams:blockParams}))+"\n        </h3>\n"+((stack1=container.invokePartial(partials["endcards/entities/video-entity"],depth0,{name:"endcards/entities/video-entity",hash:{entity:depth0!=null?depth0.course:depth0},data:data,blockParams:blockParams,indent:"        ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"      </div>\n\n"+((stack1=helpers["if"].call(alias1,(stack1=depth0!=null?depth0.relatedCourses:depth0)!=null?stack1.length:stack1,{name:"if",hash:{},fn:container.program(3,data,0,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))!=null?stack1:"")+"    </div>\n  </div>\n</div>\n"},usePartial:true,useData:true,useBlockParams:true});Templates["endcards/entities/video-entity"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,helper,alias1=container.lambda,alias2=container.escapeExpression;return'<div class="video-entity">\n  <a class="video-entity__link" href="'+alias2(alias1((stack1=depth0!=null?depth0.entity:depth0)!=null?stack1.url:stack1,depth0))+'" target="'+alias2((helper=(helper=helpers["external-link-target"]||(depth0!=null?depth0["external-link-target"]:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0!=null?depth0:container.nullContext||{},{name:"external-link-target",hash:{},data:data}):helper))+'">\n    <img class="video-entity__img" src="'+alias2(alias1((stack1=depth0!=null?depth0.entity:depth0)!=null?stack1.mobileThumbnail:stack1,depth0))+'">\n    <div class="video-entity__content">\n      <div class="video-entity__title">'+alias2(alias1((stack1=depth0!=null?depth0.entity:depth0)!=null?stack1.title:stack1,depth0))+"</div>\n    </div>\n  </a>\n</div>\n"},useData:true});Templates["endcards/feed-endcard-v2"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){var stack1,alias1=container.lambda,alias2=container.escapeExpression,alias3=depth0!=null?depth0:container.nullContext||{};return'  <div class="feed-endcard feed-endcard--with-next-video">\n    <div class="feed-endcard__next-video">\n      <div class="feed-endcard__next-video-img-container">\n        <span class="feed-endcard__next-video-icon-container">\n          <li-icon class="feed-endcard__next-video-icon" type="play-icon"></li-icon>\n        </span>\n        <img class="feed-endcard__next-video-img" src="'+alias2(alias1((stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.defaultThumbnail:stack1,depth0))+'">\n      </div>\n      <div class="feed-endcard__content">\n        <div class="feed-endcard__label">'+alias2((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(alias3,"next_video",{name:"t8",hash:{},data:data}))+'</div>\n        <div class="feed-endcard__title">'+alias2(alias1((stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.title:stack1,depth0))+"</div>\n"+((stack1=helpers["if"].call(alias3,(stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.durationInSeconds:stack1,{name:"if",hash:{},fn:container.program(2,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+"      </div>\n    </div>\n  </div>\n"},2:function _(container,depth0,helpers,partials,data){var stack1;return'          <div class="feed-endcard__meta">'+container.escapeExpression((helpers["format-duration"]||depth0&&depth0["format-duration"]||helpers.helperMissing).call(depth0!=null?depth0:container.nullContext||{},(stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.durationInSeconds:stack1,{name:"format-duration",hash:{},data:data}))+"</div>\n"},4:function _(container,depth0,helpers,partials,data){var stack1,helper,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression,alias4=container.lambda;return'  <div class="feed-endcard">\n    <h3 class="feed-endcard__headline">\n      '+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"watch_more_on_linkedin_learning",{name:"t8",hash:{},data:data}))+'\n    </h3>\n    <div class="feed-endcard__course">\n      <a class="feed-endcard__link" href="'+alias3(alias4((stack1=depth0!=null?depth0.course:depth0)!=null?stack1.url:stack1,depth0))+'" target="'+alias3((helper=(helper=helpers["external-link-target"]||(depth0!=null?depth0["external-link-target"]:depth0))!=null?helper:alias2,typeof helper==="function"?helper.call(alias1,{name:"external-link-target",hash:{},data:data}):helper))+'">\n        <div class="feed-endcard__img-container">\n          <img class="feed-endcard__img" src="'+alias3(alias4((stack1=depth0!=null?depth0.course:depth0)!=null?stack1.mobileThumbnail:stack1,depth0))+'">\n        </div>\n        <div class="feed-endcard__content">\n          <div class="feed-endcard__label">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"course",{name:"t8",hash:{},data:data}))+'</div>\n          <div class="feed-endcard__title">'+alias3(alias4((stack1=depth0!=null?depth0.course:depth0)!=null?stack1.title:stack1,depth0))+'</div>\n          <div class="feed-endcard__meta">\n            '+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"with_author_name",{name:"t8",hash:{authorName:(helpers["format-name"]||depth0&&depth0["format-name"]||alias2).call(alias1,(stack1=(stack1=depth0!=null?depth0.course:depth0)!=null?stack1.authors:stack1)!=null?stack1["0"]:stack1,{name:"format-name",hash:{},data:data})},data:data}))+"\n          </div>\n        </div>\n      </a>\n    </div>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0!=null?depth0:container.nullContext||{},depth0!=null?depth0.hasNextVideo:depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.program(4,data,0),data:data}))!=null?stack1:""},useData:true});Templates["endcards/feed-endcard"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){var stack1,alias1=container.lambda,alias2=container.escapeExpression,alias3=depth0!=null?depth0:container.nullContext||{};return'      <div class="feed-endcard feed-endcard--with-next-video">\n        <div class="feed-endcard__next-video">\n          <div class="feed-endcard__next-video-img-container">\n            <span class="feed-endcard__next-video-icon-container">\n              <li-icon class="feed-endcard__next-video-icon" type="play-icon"></li-icon>\n            </span>\n            <img class="feed-endcard__next-video-img" src="'+alias2(alias1((stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.defaultThumbnail:stack1,depth0))+'">\n          </div>\n          <div class="feed-endcard__content">\n            <div class="feed-endcard__label">'+alias2((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(alias3,"next_video",{name:"t8",hash:{},data:data}))+'</div>\n            <div class="feed-endcard__title">'+alias2(alias1((stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.title:stack1,depth0))+"</div>\n"+((stack1=helpers["if"].call(alias3,(stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.durationInSeconds:stack1,{name:"if",hash:{},fn:container.program(2,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+"          </div>\n        </div>\n      </div>\n"},2:function _(container,depth0,helpers,partials,data){var stack1;return'              <div class="feed-endcard__meta">'+container.escapeExpression((helpers["format-duration"]||depth0&&depth0["format-duration"]||helpers.helperMissing).call(depth0!=null?depth0:container.nullContext||{},(stack1=depth0!=null?depth0.nextVideo:depth0)!=null?stack1.durationInSeconds:stack1,{name:"format-duration",hash:{},data:data}))+"</div>\n"},4:function _(container,depth0,helpers,partials,data){var stack1,helper,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression,alias4=container.lambda;return'      <div class="feed-endcard">\n        <h3 class="feed-endcard__headline">\n          '+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"watch_more_on_linkedin_learning",{name:"t8",hash:{},data:data}))+'\n        </h3>\n        <div class="feed-endcard__course">\n          <a class="feed-endcard__link" href="'+alias3(alias4((stack1=depth0!=null?depth0.course:depth0)!=null?stack1.url:stack1,depth0))+'" target="'+alias3((helper=(helper=helpers["external-link-target"]||(depth0!=null?depth0["external-link-target"]:depth0))!=null?helper:alias2,typeof helper==="function"?helper.call(alias1,{name:"external-link-target",hash:{},data:data}):helper))+'">\n            <div class="feed-endcard__img-container">\n              <img class="feed-endcard__img" src="'+alias3(alias4((stack1=depth0!=null?depth0.course:depth0)!=null?stack1.mobileThumbnail:stack1,depth0))+'">\n            </div>\n            <div class="feed-endcard__content">\n              <div class="feed-endcard__label">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"course",{name:"t8",hash:{},data:data}))+'</div>\n              <div class="feed-endcard__title">'+alias3(alias4((stack1=depth0!=null?depth0.course:depth0)!=null?stack1.title:stack1,depth0))+'</div>\n              <div class="feed-endcard__meta">\n                '+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"with_author_name",{name:"t8",hash:{authorName:(helpers["format-name"]||depth0&&depth0["format-name"]||alias2).call(alias1,(stack1=(stack1=depth0!=null?depth0.course:depth0)!=null?stack1.authors:stack1)!=null?stack1["0"]:stack1,{name:"format-name",hash:{},data:data})},data:data}))+"\n              </div>\n            </div>\n          </a>\n        </div>\n      </div>\n"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{};return'<div class="ssplayer-modal ssplayer-component-hide feed-endcard-modal">\n  <button class="ssplayer-modal-close" data-ssplayer-modal-close>\n    <li-icon type="cancel-icon" aria-hidden="true"></li-icon>\n    <span class="a11y-text">'+container.escapeExpression((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(alias1,"close",{name:"t8",hash:{},data:data}))+'</span>\n  </button>\n  <div class="ssplayer-modal-content">\n'+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.hasNextVideo:depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.program(4,data,0),data:data}))!=null?stack1:"")+"  </div>\n</div>\n"},useData:true});Templates["layers/captions"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){return'<div class="captions">\n  <span class="captions__text"></span>\n</div>\n'},useData:true});Templates["lil-brand"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var helper,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3="function",alias4=container.escapeExpression;return'<a\n  class="lil-brand '+alias4((helper=(helper=helpers["class"]||(depth0!=null?depth0["class"]:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"class",hash:{},data:data}):helper))+'"\n  data-ssplayer-event="linkedin"\n  href="https://www.linkedin.com/learning"\n  target="'+alias4((helper=(helper=helpers["external-link-target"]||(depth0!=null?depth0["external-link-target"]:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"external-link-target",hash:{},data:data}):helper))+'">\n  <linkedin-logo type="inverse-bug" size="21dp" color="inverse">LEARNING</linkedin-logo>\n</a>\n'},useData:true});Templates["share-overlay"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){var stack1,alias1=container.escapeExpression;return'        <li>\n          <button class="ssplayer-share-btn"\n            data-ssplayer-network="linkedin"\n            data-ssplayer-url="'+alias1(container.lambda((stack1=depth0!=null?depth0.urls:depth0)!=null?stack1.linkedinUrl:stack1,depth0))+'"\n            >\n            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 100 100">\n              <g fill="none">\n                <path d="M0 90C0 95.5 4.5 100 10 100L90 100C95.5 100 100 95.5 100 90L100 10C100 4.5 95.5 0 90 0L10 0C4.5 0 0 4.5 0 10L0 90Z" fill="#0077B5"/>\n                <path d="M53.8 42C55.9 38.4 61.2 34.3 68.6 34.3 80.3 34.3 86.4 41 86.4 52.5L86.4 84.7 72.1 84.7 72.1 59.3C72.1 52.5 70.2 48.6 63.8 48.6 56.7 48.6 54.3 54.7 54.3 61.1L54.3 84.7 40 84.7 40 34.7 53.8 34.7 53.8 42Z" fill="#FFF"/>\n                <polygon points="15.5 85.5 29.8 85.5 29.8 35.5 15.5 35.5" fill="#FFF"/>\n                <path d="M22.6 12.9C27.2 12.9 31 16.6 31 21.2 31 25.8 27.2 29.5 22.6 29.5 18 29.5 14.3 25.8 14.3 21.2 14.3 16.6 18 12.9 22.6 12.9Z" fill="#FFF"/>\n              </g>\n            </svg>\n            <span class="a11y-text">'+alias1((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(depth0!=null?depth0:container.nullContext||{},"share_this_course_on_linkedin",{name:"t8",hash:{},data:data}))+"</span>\n          </button>\n        </li>\n"},3:function _(container,depth0,helpers,partials,data){var stack1,alias1=container.escapeExpression;return'        <li>\n          <button class="ssplayer-share-btn"\n            data-ssplayer-network="facebook"\n            data-ssplayer-url="'+alias1(container.lambda((stack1=depth0!=null?depth0.urls:depth0)!=null?stack1.facebookUrl:stack1,depth0))+'"\n            >\n            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 100 100">\n              <g fill="none">\n                <path d="M0 90C0 95.5 4.5 100 10 100L90 100C95.5 100 100 95.5 100 90L100 10C100 4.5 95.5 0 90 0L10 0C4.5 0 0 4.5 0 10L0 90Z" fill="#395185"/>\n                <path d="M69.6 101L69.6 62.2 82.5 62.2 84.5 47.1 69.6 47.1 69.6 37.5C69.6 33.1 70.8 30.1 77 30.1L85 30.1 85 16.6C83.6 16.4 78.9 16 73.4 16 61.9 16 54 23 54 36L54 47.1 41 47.1 41 62.2 54 62.2 54 101 69.6 101Z" fill="#FFF"/>\n              </g>\n            </svg>\n            <span class="a11y-text">'+alias1((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(depth0!=null?depth0:container.nullContext||{},"share_this_course_on_facebook",{name:"t8",hash:{},data:data}))+"</span>\n          </button>\n        </li>\n"},5:function _(container,depth0,helpers,partials,data){var stack1,alias1=container.escapeExpression;return'        <li>\n          <button class="ssplayer-share-btn"\n            data-ssplayer-network="twitter"\n            data-ssplayer-url="'+alias1(container.lambda((stack1=depth0!=null?depth0.urls:depth0)!=null?stack1.twitterUrl:stack1,depth0))+'"\n            >\n            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 100 100">\n              <g fill="none">\n                <path d="M0 90C0 95.523 4.475 100 10 100L90 100C95.523 100 100 95.525 100 90L100 10C100 4.477 95.525 0 90 0L10 0C4.477 0 0 4.475 0 10L0 90Z" fill="#55acee"/>\n                <path d="M82.993 30.161C80.523 31.195 77.874 31.862 75.082 32.162 77.946 30.594 80.129 28.093 81.132 25.124 78.483 26.592 75.548 27.659 72.398 28.226 69.892 25.758 66.313 24.19 62.375 24.19 54.751 24.19 48.595 29.894 48.595 36.932 48.595 37.933 48.702 38.9 48.953 39.834 37.498 39.3 27.369 34.23 20.568 26.525 19.387 28.393 18.706 30.594 18.706 32.929 18.706 37.332 21.14 41.235 24.827 43.536 22.572 43.469 20.46 42.902 18.599 41.935L18.599 42.102C18.599 48.272 23.36 53.409 29.624 54.577 28.478 54.877 27.261 55.01 26.008 55.01 25.114 55.01 24.255 54.943 23.431 54.81 25.185 59.847 30.268 63.549 36.281 63.649 31.557 67.051 25.651 69.086 19.172 69.086 18.062 69.086 16.988 69.019 15.914 68.919 22 72.521 29.23 74.623 36.997 74.623 62.34 74.623 76.156 55.244 76.156 38.399L76.12 36.765C78.841 34.964 81.167 32.729 82.993 30.161Z" fill="#FFF"/>\n              </g>\n            </svg>\n            <span class="a11y-text">'+alias1((helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(depth0!=null?depth0:container.nullContext||{},"share_this_course_on_twitter",{name:"t8",hash:{},data:data}))+"</span>\n          </button>\n        </li>\n"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'<div class="ssplayer-modal ssplayer-component-hide embed-share-modal">\n  <button class="ssplayer-modal-close" data-ssplayer-modal-close>\n    <li-icon type="cancel-icon" aria-hidden="true"></li-icon>\n    <span class="a11y-text">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"close",{name:"t8",hash:{},data:data}))+'</span>\n  </button>\n  <div class="ssplayer-modal-content">\n    <h4 class="ssplayer-share-title">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"share_this_course",{name:"t8",hash:{},data:data}))+'</h4>\n    <ul class="ssplayer-share-btn-list">\n'+((stack1=helpers["if"].call(alias1,(stack1=depth0!=null?depth0.urls:depth0)!=null?stack1.linkedinUrl:stack1,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(alias1,(stack1=depth0!=null?depth0.urls:depth0)!=null?stack1.facebookUrl:stack1,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+((stack1=helpers["if"].call(alias1,(stack1=depth0!=null?depth0.urls:depth0)!=null?stack1.twitterUrl:stack1,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+'    </ul>\n    <p class="ssplayer-share-link">\n      '+alias3(container.lambda((stack1=depth0!=null?depth0.urls:depth0)!=null?stack1.courseUrl:stack1,depth0))+"\n    </p>\n  </div>\n</div>\n"},useData:true});Templates["toolbars/bottom-toolbar"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing;return(stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"skip_back_num_seconds",{name:"t8",hash:{seconds:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"10",{name:"format-number",hash:{},data:data})},data:data}),icon:"rewind-ten",event:"play",buttonClass:"ssplayer-rewind-button"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:""},3:function _(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'      <div class="video-player__toolbar-menu">\n'+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"settings",{name:"t8",hash:{},data:data}),icon:"gear",buttonClass:"ssplayer-settings-button ssplayer-toolbar-menu-button"},data:data,indent:"        ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+'        <span class="video-player__toolbar-menu-content video-player__toolbar-menu-right">\n          <div class="">\n            <section class="settings-menu__section">\n              <p class="settings-menu__title">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed",{name:"t8",hash:{},data:data}))+'</p>\n              <ul class="settings-menu__options-list">\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed_x",{name:"t8",hash:{speed:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"2",{name:"format-number",hash:{},data:data})},data:data}))+'</li>\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed_x",{name:"t8",hash:{speed:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"1.75",{name:"format-number",hash:{},data:data})},data:data}))+'</li>\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed_x",{name:"t8",hash:{speed:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"1.5",{name:"format-number",hash:{},data:data})},data:data}))+'</li>\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed_x",{name:"t8",hash:{speed:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"1.25",{name:"format-number",hash:{},data:data})},data:data}))+'</li>\n                <li class="settings-menu__option settings-menu__option--active">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed_x",{name:"t8",hash:{speed:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"1",{name:"format-number",hash:{},data:data})},data:data}))+'</li>\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed_x",{
name:"t8",hash:{speed:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"0.75",{name:"format-number",hash:{},data:data})},data:data}))+'</li>\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"playback_speed_x",{name:"t8",hash:{speed:(helpers["format-number"]||depth0&&depth0["format-number"]||alias2).call(alias1,"2",{name:"format-number",hash:{},data:data})},data:data}))+'</li>\n              </ul>\n            </section>\n            <section class="settings-menu__section">\n              <p class="settings-menu__title">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"video_quality",{name:"t8",hash:{},data:data}))+'</p>\n              <ul class="settings-menu__options-list">\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"video_quality_360p",{name:"t8",hash:{},data:data}))+'</li>\n                <li class="settings-menu__option settings-menu__option--active">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"video_quality_540p",{name:"t8",hash:{},data:data}))+'</li>\n                <li class="settings-menu__option">'+alias3((helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"video_quality_720p",{name:"t8",hash:{},data:data}))+"</li>\n              </ul>\n            </section>\n          </div>\n        </span>\n      </div>\n"},5:function _(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing;return'      <div class="video-player__toolbar-menu">\n'+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"share",{name:"t8",hash:{},data:data}),icon:"share-linkedin",event:"share",buttonClass:"ssplayer-share-button"},data:data,indent:"        ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.tooltip,depth0,{name:"tooltip",hash:{"static":(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"share",{name:"t8",hash:{},data:data}),position:"right"},data:data,indent:"        ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"      </div>\n"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing;return'<div class="ssplayer-video-toolbar ssplayer-video-toolbar-bottom ssplayer-superposed ssplayer-slide-down">\n  <div class="ssplayer-progress ssplayer-progress-slider ssplayer-autoexpand">\n    <progress class="ssplayer-primary"></progress>\n    <progress class="ssplayer-buffer ssplayer-secondary ssplayer-animate"></progress>\n  </div>\n  <div class="ssplayer-left-actions">\n    <div class="video-player__toolbar-menu">\n'+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"replay",{name:"t8",hash:{},data:data}),icon:"replay",event:"play",buttonClass:"ssplayer-replay-button playback__button"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"play",{name:"t8",hash:{},data:data}),icon:"play",event:"play",buttonClass:"ssplayer-play-button playback__button"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"pause",{name:"t8",hash:{},data:data}),icon:"pause",event:"pause",buttonClass:"ssplayer-pause-button playback__button"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.tooltip,depth0,{name:"tooltip",hash:{dynamic2:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"replay",{name:"t8",hash:{},data:data}),dynamic1:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"pause",{name:"t8",hash:{},data:data}),dynamic0:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"play",{name:"t8",hash:{},data:data}),position:"left"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"    </div>\n"+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.rewind:depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+'    <div class="ssplayer-time-display">\n      <span class="ssplayer-time-display-current-time"></span>\n      <span class="ssplayer-time-display-separator">/</span>\n      <span class="ssplayer-time-display-duration"></span>\n    </div>\n  </div>\n  <div class="ssplayer-right-actions">\n\n'+((stack1=container.invokePartial(partials["toolbars/captions-button"],depth0,{name:"toolbars/captions-button",data:data,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+'\n    <div class="ssplayer-toolbar-menu">\n      <button class="ssplayer-volume-switch ssplayer-toolbar-menu-button">\n        <li-icon class="ssplayer-volume-muted" type="mute-icon"></li-icon>\n        <li-icon class="ssplayer-volume-min" type="volume-min-icon"></li-icon>\n        <li-icon class="ssplayer-volume-med" type="volume-med-icon"></li-icon>\n        <li-icon class="ssplayer-volume-max" type="volume-max-icon"></li-icon>\n      </button>\n      <span class="ssplayer-toolbar-menu-content ssplayer-vertical video-player__volume-slider-menu">\n        <div class="ssplayer-volume-slider">\n          <span class="ssplayer-handle"></span>\n          <progress class="ssplayer-primary"></progress>\n        </div>\n      </span>\n    </div>\n'+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.settings:depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+'\n    <div class="video-player__toolbar-menu">\n'+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"fullscreen",{name:"t8",hash:{},data:data}),icon:"fullscreen",event:"enterFullscreen",buttonClass:"ssplayer-fullscreen-on-button fullscreen__button"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"exit_fullscreen",{name:"t8",hash:{},data:data}),icon:"exit-fullscreen",event:"exitFullscreen",buttonClass:"ssplayer-fullscreen-off-button fullscreen__button"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.tooltip,depth0,{name:"tooltip",hash:{dynamic1:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"exit_fullscreen",{name:"t8",hash:{},data:data}),dynamic0:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"fullscreen",{name:"t8",hash:{},data:data}),position:"right"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"    </div>\n"+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.withShare:depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+"  </div>\n</div>\n"},usePartial:true,useData:true});Templates["toolbars/captions-button"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing;return'<div class="video-player__toolbar-menu captions-button">\n'+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{disabled:true,text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"turn_captions_off",{name:"t8",hash:{},data:data}),icon:"closed-caption-filled",event:"hideCaptions",buttonClass:"captions-button__on ssplayer-toolbar-menu-button"},data:data,indent:"  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{disabled:true,text:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"turn_captions_on",{name:"t8",hash:{},data:data}),icon:"closed-caption",event:"showCaptions",buttonClass:"captions-button__off ssplayer-toolbar-menu-button"},data:data,indent:"  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.tooltip,depth0,{name:"tooltip",hash:{dynamic2:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"captions_unavailable",{name:"t8",hash:{},data:data}),dynamic1:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"turn_captions_off",{name:"t8",hash:{},data:data}),dynamic0:(helpers.t8||depth0&&depth0.t8||alias2).call(alias1,"turn_captions_on",{name:"t8",hash:{},data:data}),position:"right"},data:data,indent:"  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"</div>\n"},usePartial:true,useData:true});Templates["toolbars/top-toolbar"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,helper,alias1=container.lambda,alias2=container.escapeExpression;return'<div class="ssplayer-video-toolbar top-toolbar slide-up">\n'+((stack1=container.invokePartial(partials["lil-brand"],depth0,{name:"lil-brand",hash:{"class":"top-toolbar__brand top-toolbar__item"},data:data,indent:"  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+'\n  <a\n    class="top-toolbar__item top-toolbar__link"\n    href="'+alias2(alias1((stack1=depth0!=null?depth0.course:depth0)!=null?stack1.url:stack1,depth0))+'"\n    target="'+alias2((helper=(helper=helpers["external-link-target"]||(depth0!=null?depth0["external-link-target"]:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0!=null?depth0:container.nullContext||{},{name:"external-link-target",hash:{},data:data}):helper))+'">\n    <span class="top-toolbar__title top-toolbar__item">'+alias2(alias1((stack1=depth0!=null?depth0.video:depth0)!=null?stack1.title:stack1,depth0))+"</span>\n  </a>\n</div>\n"},usePartial:true,useData:true});Templates["tooltip"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){var stack1,helper,alias1=depth0!=null?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3="function",alias4=container.escapeExpression;return'  <div\n    class="video-player__toolbar-menu-content'+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.position:depth0,{name:"if",hash:{},fn:container.program(2,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+' video-player__tooltip"\n    data-tooltip-text-0="'+alias4((helper=(helper=helpers.dynamic0||(depth0!=null?depth0.dynamic0:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"dynamic0",hash:{},data:data}):helper))+'"\n    data-tooltip-text-1="'+alias4((helper=(helper=helpers.dynamic1||(depth0!=null?depth0.dynamic1:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"dynamic1",hash:{},data:data}):helper))+'"\n    data-tooltip-text-2="'+alias4((helper=(helper=helpers.dynamic2||(depth0!=null?depth0.dynamic2:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"dynamic2",hash:{},data:data}):helper))+'"\n  >'+alias4((helper=(helper=helpers["static"]||(depth0!=null?depth0["static"]:depth0))!=null?helper:alias2,(typeof helper==="undefined"?"undefined":_typeof2(helper))===alias3?helper.call(alias1,{name:"static",hash:{},data:data}):helper))+"</div>\n"},2:function _(container,depth0,helpers,partials,data){var helper;return" video-player__toolbar-menu-"+container.escapeExpression((helper=(helper=helpers.position||(depth0!=null?depth0.position:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0!=null?depth0:container.nullContext||{},{name:"position",hash:{},data:data}):helper))},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0!=null?depth0:container.nullContext||{},depth0!=null?depth0.dynamic0:depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))!=null?stack1:""},useData:true});Templates["video-errorcard-v2"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,helper;return'<div class="video-errorcard">\n'+((stack1=container.invokePartial(partials["lil-brand"],depth0,{name:"lil-brand",hash:{"class":"video-errorcard__brand"},data:data,indent:"  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+'\n  <h3 class="video-errorcard__title">\n    This video is no longer available\n  </h3>\n\n  <p class="video-errorcard__subtitle">\n    Get business, technology, and creative skills you need with\n    expert-led online courses on LinkedIn Learning.\n  </p>\n\n  <div class="video-errorcard__site">\n    <a\n      class="video-errorcard__site-link"\n      data-ssplayer-event="linkedin"\n      href="https://www.linkedin.com/learning"\n      target="'+container.escapeExpression((helper=(helper=helpers["external-link-target"]||(depth0!=null?depth0["external-link-target"]:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0!=null?depth0:container.nullContext||{},{name:"external-link-target",hash:{},data:data}):helper))+'">\n      Go to LinkedIn Learning\n    </a>\n  </div>\n</div>\n'},usePartial:true,useData:true});Templates["video-errorcard"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,helper;return'<div class="ssplayer-modal ssplayer-errorcard-modal">\n  <div class="ssplayer-modal-content">\n    <div class="video-errorcard">\n'+((stack1=container.invokePartial(partials["lil-brand"],depth0,{name:"lil-brand",hash:{"class":"video-errorcard__brand"},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+'\n      <h3 class="video-errorcard__title">\n        This video is no longer available\n      </h3>\n\n      <p class="video-errorcard__subtitle">\n        Get business, technology, and creative skills you need with\n        expert-led online courses on LinkedIn Learning.\n      </p>\n\n      <div class="video-errorcard__site">\n        <a\n          class="video-errorcard__site-link"\n          data-ssplayer-event="linkedin"\n          href="https://www.linkedin.com/learning"\n          target="'+container.escapeExpression((helper=(helper=helpers["external-link-target"]||(depth0!=null?depth0["external-link-target"]:depth0))!=null?helper:helpers.helperMissing,typeof helper==="function"?helper.call(depth0!=null?depth0:container.nullContext||{},{name:"external-link-target",hash:{},data:data}):helper))+'">\n          Go to LinkedIn Learning\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n'},usePartial:true,useData:true});Templates["video-player"]=runtime$2.template({1:function _(container,depth0,helpers,partials,data){var stack1,alias1=depth0!=null?depth0:container.nullContext||{};return"\n"+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.withTopToolbar:depth0,{name:"if",hash:{},fn:container.program(2,data,0),inverse:container.noop,data:data}))!=null?stack1:"")+'\n  <video\n    class="video-js media-player__player"\n    style="width: 100%; height: 100%;"\n  >\n  </video>\n\n  <div class="video-endcards">\n'+((stack1=helpers["if"].call(alias1,depth0!=null?depth0.isFeedPlayer:depth0,{name:"if",hash:{},fn:container.program(4,data,0),inverse:container.program(6,data,0),data:data}))!=null?stack1:"")+((stack1=container.invokePartial(partials["video-errorcard-v2"],depth0,{name:"video-errorcard-v2",data:data,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"  </div>\n\n"},2:function _(container,depth0,helpers,partials,data){var stack1;return(stack1=container.invokePartial(partials["toolbars/top-toolbar"],depth0,{name:"toolbars/top-toolbar",hash:{video:depth0!=null?depth0.video:depth0,course:depth0!=null?depth0.course:depth0},data:data,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:""},4:function _(container,depth0,helpers,partials,data){var stack1;return(stack1=container.invokePartial(partials["endcards/feed-endcard-v2"],depth0,{name:"endcards/feed-endcard-v2",hash:{hasNextVideo:depth0!=null?depth0.hasNextVideo:depth0,nextVideo:depth0!=null?depth0.nextVideo:depth0,course:depth0!=null?depth0.course:depth0},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:""},6:function _(container,depth0,helpers,partials,data){var stack1;return(stack1=container.invokePartial(partials["endcards/embed-endcard-v2"],depth0,{name:"endcards/embed-endcard-v2",hash:{relatedCourses:depth0!=null?depth0.relatedCourses:depth0,course:depth0!=null?depth0.course:depth0},data:data,indent:"      ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:""},8:function _(container,depth0,helpers,partials,data){var stack1;return'  <div class="ssplayer-loader">\n    <li-icon type="loader"></li-icon>\n  </div>\n\n'+((stack1=container.invokePartial(partials["toolbars/top-toolbar"],depth0,{name:"toolbars/top-toolbar",hash:{video:depth0!=null?depth0.video:depth0,course:depth0!=null?depth0.course:depth0},data:data,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"\n"+((stack1=container.invokePartial(partials["toolbars/bottom-toolbar"],depth0,{name:"toolbars/bottom-toolbar",hash:{withShare:depth0!=null?depth0.withShare:depth0},data:data,indent:"  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"\n"+((stack1=container.invokePartial(partials["video-errorcard"],depth0,{name:"video-errorcard",data:data,indent:"  ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+'\n  <div class="video-filter video-container">\n'+((stack1=container.invokePartial(partials.button,depth0,{name:"button",hash:{text:(helpers.t8||depth0&&depth0.t8||helpers.helperMissing).call(depth0!=null?depth0:container.nullContext||{},"play",{name:"t8",hash:{},data:data}),icon:"play",buttonClass:"ssplayer-big-play-button ssplayer-big-button"},data:data,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+((stack1=container.invokePartial(partials.video,depth0,{name:"video",hash:{video:depth0!=null?depth0.video:depth0},data:data,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"\n"+((stack1=container.invokePartial(partials["layers/captions"],depth0,{name:"layers/captions",data:data,indent:"    ",helpers:helpers,partials:partials,decorators:container.decorators}))!=null?stack1:"")+"  </div>\n\n"},compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1;return(stack1=helpers["if"].call(depth0!=null?depth0:container.nullContext||{},depth0!=null?depth0.withMediaPlayer:depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.program(8,data,0),data:data}))!=null?stack1:""},usePartial:true,useData:true});Templates["video"]=runtime$2.template({compiler:[7,">= 4.0.0"],main:function main(container,depth0,helpers,partials,data){var stack1,alias1=container.lambda,alias2=container.escapeExpression;return'<video\n  class="video-js player"\n  preload=""\n  webkit-playsinline=""\n  data-continuous-play=""\n  src="'+alias2(alias1((stack1=depth0!=null?depth0.video:depth0)!=null?stack1.src:stack1,depth0))+'"\n  poster="'+alias2(alias1((stack1=depth0!=null?depth0.video:depth0)!=null?stack1.poster:stack1,depth0))+'"\n  width="790"\n  height="444"\n  style="width: 100%; height: 100%;">\n</video>\n'},useData:true});var i18nMessages={en_US:{turn_captions_off:"Turn captions off",turn_captions_on:"Turn captions on",captions_unavailable:"No captions available",course:"COURSE",exit_fullscreen:"Exit fullscreen",fullscreen:"Fullscreen",pause:"Pause",play:"Play",playback_speed:"Playback speed",playback_speed_x:"{:speed}x",replay:"Replay",settings:"Settings",share:"Share",skip_back_num_seconds:"Skip back {:seconds} seconds",video_quality:"Video quality",video_quality_360p:"360p",video_quality_540p:"540p",video_quality_720p:"720p HD",share_this_course:"Share this course",share_this_course_on_linkedin:"Share this course on LinkedIn",share_this_course_on_twitter:"Share this course on Twitter",share_this_course_on_facebook:"Share this course on Facebook",watch_more_from_this_course:"Watch more from this course",or_explore_related_courses:"Or explore related courses",close:"Close",watch_more_on_linkedin_learning:"Watch more on LinkedIn Learning",with_author_name:"With {:authorName}",next_video:"NEXT VIDEO",duration_minutes:"{:minutes}m {:seconds}s",duration_seconds:"{:seconds}s"},es_ES:{turn_captions_off:"Desactivar los subtítulos",turn_captions_on:"Activar los subtítulos",captions_unavailable:"No hay subtítulos",exit_fullscreen:"Salir de la pantalla completa",replay:"Volver a reproducir",settings:"Configuración",play:"Reproducir",pause:"Pausa",fullscreen:"Pantalla completa",playback_speed:"Velocidad de reproducción",skip_back_num_seconds:"Retroceder {:seconds} segundos",playback_speed_x:"{:speed}x",course:"CURSO",share:"Compartir",video_quality:"Calidad de vídeo",video_quality_360p:"360p",video_quality_540p:"540p",video_quality_720p:"720p HD",share_this_course:"Compartir este curso",share_this_course_on_linkedin:"Compartir este curso en LinkedIn",share_this_course_on_twitter:"Compartir este curso en Twitter",share_this_course_on_facebook:"Compartir este curso en Facebook",watch_more_from_this_course:"Ver más de este curso",or_explore_related_courses:"O explorar otros cursos relacionados",close:"Cerrar",watch_more_on_linkedin_learning:"Ver más en LinkedIn Learning",with_author_name:"Con {:authorName}",next_video:"SIGUIENTE VÍDEO",duration_minutes:"{:minutes} m {:seconds} s",duration_seconds:"{:seconds} s"},fr_FR:{turn_captions_off:"Désactiver les sous-titres",turn_captions_on:"Activer les sous-titres",captions_unavailable:"Aucun sous-titre disponible",exit_fullscreen:"Sortir du plein écran",replay:"Relancer",settings:"Préférences",play:"Lire",pause:"Interrompre",fullscreen:"Plein écran",playback_speed:"Vitesse de lecture",skip_back_num_seconds:"Retour de {:seconds} secondes",playback_speed_x:"{:speed}x",video_quality:"Qualité de la vidéo",video_quality_360p:"360p",video_quality_540p:"540p",video_quality_720p:"720p HD",course:"COURS",share:"Partager",share_this_course:"Partager ce cours",share_this_course_on_linkedin:"Partager ce cours sur LinkedIn",share_this_course_on_twitter:"Partager ce cours sur Twitter",share_this_course_on_facebook:"Partager ce cours sur Facebook",watch_more_from_this_course:"En voir plus de ce cours",or_explore_related_courses:"Ou découvrir des cours connexes",close:"Fermer",watch_more_on_linkedin_learning:"En voir plus sur LinkedIn Learning",with_author_name:"Avec {:authorName}",next_video:"VIDÉO SUIVANTE",duration_minutes:"{:minutes} min {:seconds} sec",duration_seconds:"{:seconds} sec"},de_DE:{turn_captions_off:"Untertitel ausschalten",turn_captions_on:"Untertitel einschalten",captions_unavailable:"Keine Untertitel verfügbar",exit_fullscreen:"Vollbild beenden",replay:"Erneut abspielen",settings:"Einstellungen",play:"Ansehen",pause:"Anhalten",fullscreen:"Vollbild",playback_speed:"Abspielgeschwindigkeit",skip_back_num_seconds:"{:seconds} Sekunden zurückspringen",playback_speed_x:"{:speed}x",video_quality:"Videoqualität",video_quality_360p:"360p",video_quality_540p:"540p",video_quality_720p:"720p HD",course:"Kurs",share:"Teilen",share_this_course:"Diesen Kurs teilen",share_this_course_on_linkedin:"Kurs auf LinkedIn teilen",share_this_course_on_twitter:"Kurs auf Twitter teilen",share_this_course_on_facebook:"Kurs auf Facebook teilen",watch_more_from_this_course:"Mehr aus diesem Kurs ansehen",or_explore_related_courses:"Oder ähnliche Kurse ansehen",close:"Schließen",watch_more_on_linkedin_learning:"Mehr auf LinkedIn Learning ansehen",with_author_name:"Mit {:authorName}",next_video:"NÄCHSTES VIDEO",duration_minutes:"{:minutes} Min. {:seconds} Sek.",duration_seconds:"{:seconds} Sek."},ja_JP:{turn_captions_off:"字幕: 無効にする",turn_captions_on:"字幕: 有効にする",captions_unavailable:"字幕: なし",exit_fullscreen:"全画面モードを解除",replay:"もう一度見る",settings:"設定",play:"再生",pause:"一時停止",fullscreen:"フルスクリーン",playback_speed:"再生速度",skip_back_num_seconds:"スキップして{:seconds}秒戻る",playback_speed_x:"{:speed}x",video_quality:"動画品質",video_quality_360p:"360p",video_quality_540p:"540p",video_quality_720p:"720p HD",course:"コース",share:"シェア",share_this_course:"このコースをシェアする",share_this_course_on_linkedin:"このコースをLinkedInでシェアする",share_this_course_on_twitter:"このコースをTwitterでシェアする",share_this_course_on_facebook:"このコースをFacebookでシェアする",watch_more_from_this_course:"このコースの動画をさらに視聴する",or_explore_related_courses:"関連するコースを検索する",close:"閉じる",watch_more_on_linkedin_learning:"LinkedInラーニングで視聴する",with_author_name:"講師: {:authorName}",next_video:"次の動画",duration_minutes:"{:minutes}分{:seconds}秒",duration_seconds:"{:seconds}秒"},pt_BR:{turn_captions_off:"Desativar legendas",turn_captions_on:"Ativar legendas",captions_unavailable:"Não há legendas disponíveis",course:"CURSO",exit_fullscreen:"Sair da tela cheia",fullscreen:"Tela cheia",pause:"Pausar",play:"Reproduzir",playback_speed:"Velocidade de reprodução",playback_speed_x:"{:speed}x",replay:"Reproduzir novamente",settings:"Comprado",share:"Compartilhar",skip_back_num_seconds:"Voltar {:seconds} segundos",video_quality:"Qualidade do vídeo",video_quality_360p:"360p",video_quality_540p:"540p",video_quality_720p:"720p HD",share_this_course:"Compartilhar este curso",share_this_course_on_linkedin:"Compartilhar este curso no LinkedIn",share_this_course_on_twitter:"Compartilhar este curso no Twitter",share_this_course_on_facebook:"Compartilhar este curso no Facebook",watch_more_from_this_course:"Assistir mais deste curso",or_explore_related_courses:"Ou explorar cursos relacionados",close:"Fechar",watch_more_on_linkedin_learning:"Assistir mais no LinkedIn Learning",with_author_name:"com {:authorName}",next_video:"PRÓXIMO VÍDEO",duration_minutes:"{:minutes}m {:seconds}s",duration_seconds:"{:seconds}s"},zh_CN:{turn_captions_off:"关闭字幕",turn_captions_on:"打开字幕",captions_unavailable:"无可用字幕",course:"课程",exit_fullscreen:"退出全屏",fullscreen:"全屏",pause:"暂停",play:"播放",playback_speed:"播放速度",playback_speed_x:"{:speed} 倍",replay:"重播",settings:"设置",share:"分享",skip_back_num_seconds:"后退 {:seconds} 秒",video_quality:"视频质量",video_quality_360p:"360p",video_quality_540p:"540p",video_quality_720p:"720p 高清",share_this_course:"分享本课程",share_this_course_on_linkedin:"将此课程分享到领英",share_this_course_on_twitter:"将此课程分享到推特",share_this_course_on_facebook:"将此课程分享到 Facebook",watch_more_from_this_course:"观看本课程的更多内容",or_explore_related_courses:"或探索相关课程",close:"关闭",watch_more_on_linkedin_learning:"在领英学习上观看更多课程",with_author_name:"{:authorName}",next_video:"下一个视频",duration_minutes:"{:minutes} 分钟 {:seconds} 秒",duration_seconds:"{:seconds} 秒"}};var t8_1=createCommonjsModule(function(module,exports){(function(root,factory){var lib=factory();root["t8"]=lib;{module.exports=lib}})(commonjsGlobal,function(){var __localeData={};var Utils=function(){var ISO_DATE_PATTERN=/^(\d{4})-(\d{2})-(\d{2})((T(\d{2}):(\d{2}):(\d{2}))?(?:\.(\d+))?(Z|([+-])(\d{2})(?::(\d{2}))?))?$/,RIGHT_TO_LEFT_MARK_PATTERN=/\u200e/g;function indexOf(array,item,isSorted){if(array===null||array===undefined){return-1}var nativeIndexOf=Array.prototype.indexOf;if(nativeIndexOf&&array.indexOf===nativeIndexOf){return array.indexOf(item,isSorted)}for(var i=0,length=array.length;i<length;i++){if(array[i]===item){return i}}return-1}function isDefined(obj){return typeof obj!=="undefined"&&obj!==null}function isArray(obj){return Object.prototype.toString.call(obj)==="[object Array]"}function isString(obj){return Object.prototype.toString.call(obj)==="[object String]"}function assert(condition,message){if(!condition){throw new Error(message)}}function parseDateString(pDate,useTimeZone){var d=pDate;if(!(pDate instanceof Date)){if(!isNaN(pDate)){d=new Date(parseInt(pDate+"",10))}else if(typeof pDate==="string"){d=parseISO8601(pDate)}else{throw new Error("Invalid date parameter '"+pDate+"'. Expected number or string timestamp or ISO date string")}}if(!d){throw new Error("t8 could not parse date string '"+pDate+"'")}if(useTimeZone){d=convertUTCToLocal(d)}return d}function parseISO8601(s){var d=s.match(ISO_DATE_PATTERN),i,len,timezoneOffset,isNegativeOffset=d&&d[11]==="-";if(!d){return null}for(i=0,len=d.length;i<len;i++){d[i]=~~d[i]}timezoneOffset=(d[12]*60+d[13])*6e4*(isNegativeOffset?1:-1);return new Date(Date.UTC(d[1],d[2]-1,d[3],d[6],d[7],d[8],d[9])+timezoneOffset)}function convertUTCToLocal(date){var localDate=new Date(date.getTime());localDate.setMinutes(date.getMinutes()-date.getTimezoneOffset());return localDate}var errorObject={value:null};function tryCatch(fn,ctx,args){errorObject.value=null;try{return fn.apply(ctx,args)}catch(e){errorObject.value=e;return errorObject}}return{parseDateString:parseDateString,assert:assert,isString:isString,isArray:isArray,isDefined:isDefined,indexOf:indexOf,tryCatch:tryCatch,errorObject:errorObject,RTL_PATTERN:RIGHT_TO_LEFT_MARK_PATTERN}}();{module.exports=Utils}var CurrencyFormatter=function(){var formatter=function formatter(){};formatter.prototype.format=function(amount,currency,locale){var fmt,formattedValue="",localeData=__localeData[locale],options={style:"currency",currency:currency,currencyDisplay:"code",minimumFractionDigits:2,maximumFractionDigits:2};if(!localeData){throw new Error("No locale data found for locale "+locale)}else if(!localeData.intlLocale){throw new Error("IntlLocale is not specified for locale "+locale)}if(localeData.currency&&typeof localeData.currency.getCurrencyDisplay==="function"){options.currencyDisplay=localeData.currency.getCurrencyDisplay(currency)}if(currency==="JPY"){options.minimumFractionDigits=0;options.maximumFractionDigits=0}try{fmt=new Intl.NumberFormat(localeData.intlLocale+"-u-nu-latn-ca-gregory",options);formattedValue=fmt.format(amount)}catch(err){if(options.currencyDisplay==="code"){try{options.currencyDisplay="symbol";fmt=new Intl.NumberFormat(localeData.intlLocale+"-u-nu-latn-ca-gregory",options);formattedValue=fmt.format(amount);var currencySymbols=["(AU|A|US|BR|R|CAN|CA|C|A|HK|NZ|SG)\\u0024","\\u0024(AU|A|US|BR|R|CAN|CA|C|A|HK|NZ|SG)|\\u0024","GB£|£GB|£","€","ر.ه.‏","JP¥|¥JP|¥","₹|Rs","Dkr","NKr","kr"],re=new RegExp("("+currencySymbols.join("|")+")");formattedValue=formattedValue.replace(re,currency)}catch(e){formattedValue=amount+" "+currency}}}formattedValue=formattedValue.replace(/\u0020/g," ");if(localeData.currency&&localeData.currency.postFormatting){formattedValue=localeData.currency.postFormatting(currency,amount,formattedValue)}return formattedValue};return formatter}();var DateFormatter=function(){var RTL_PATTERN=Utils.RTL_PATTERN,formatter=function formatter(){this.instanceCache={}};function pad(number){if(number<10){return"0"+number}return number}function toISODateString(date){return date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())}formatter.prototype.format=function(date,locale,format,useTimeZone){
var fmt,formattedValue="",localeData=__localeData[locale],options,intlLocale,dateToFormat=Utils.parseDateString(date,useTimeZone),tryCatch=Utils.tryCatch,cache=this.instanceCache,cacheKey,result;if(format==="d.narrow"&&localeData.date.narrowDayNames){return localeData.date.narrowDayNames[dateToFormat.getDay()]}if(format==="iso"){return toISODateString(dateToFormat)}if(!localeData){throw new Error("No locale data found for locale "+locale)}else if(!localeData.intlLocale){throw new Error("IntlLocale is not specified for locale "+locale)}options=localeData.date.intlOptions[format];options.timeZone="UTC";result=tryCatch(function(){intlLocale=localeData.intlLocale;if(intlLocale!=="zh"){intlLocale+="-u-nu-latn-ca-gregory"}cacheKey=intlLocale+format;fmt=cache[cacheKey];if(!fmt){fmt=cache[cacheKey]=new Intl.DateTimeFormat(intlLocale,options)}formattedValue=fmt.format(dateToFormat)},void 0);if(result===Utils.errorObject){Utils.errorObject.value=null;formattedValue=dateToFormat.toLocaleDateString()}formattedValue=formattedValue.replace(RTL_PATTERN,"");if(localeData.date&&localeData.date.postFormatting){formattedValue=localeData.date.postFormatting(format,date,formattedValue)}return formattedValue};return formatter}();var NameFormatter=function(){var TRIM_WHITESPACE_REGEX=/(^\s+|\s+$)/g,formatter=function formatter(){};formatter.formats={FAMILIAR_NAME:"FAMILIAR_NAME",FULL_NAME:"FULL_NAME",MICROFORMAT:"MICROFORMAT",LIST_VIEW:"LIST_VIEW"};formatter.templates={MICROFORMAT:{firstName:function firstName(value){return'<span class="given-name">'+value+"</span>"},lastName:function lastName(value){return'<span class="family-name">'+value+"</span>"},maidenName:function maidenName(value){return'<span class="additional-name">'+value+"</span>"}},FAMILIAR_NAME:{defaultTemplate:function defaultTemplate(firstName,lastName,maidenName){return firstName},localeTemplates:[{locales:["de_DE","pl_PL","ro_RO","tr_TR"],template:function template(firstName,lastName,maidenName){return firstName+" "+lastName}},{locales:["CJK"],template:function template(firstName,lastName,maidenName){return lastName+firstName}},{locales:["CJK-ja_JP"],template:function template(firstName,lastName,maidenName){return lastName+" "+firstName}}]},FULL_NAME:{defaultTemplate:function defaultTemplate(firstName,lastName,maidenName){return firstName+(maidenName?" ("+maidenName+")":"")+" "+lastName},localeTemplates:[{locales:["ar_AE","th_TH"],template:function template(firstName,lastName,maidenName){return firstName+(maidenName?" "+maidenName:"")+(lastName?" "+lastName:"")}},{locales:["cs_CZ"],template:function template(firstName,lastName,maidenName){return firstName+(lastName?" "+lastName:"")+(maidenName?" (roz. "+maidenName+")":"")}},{locales:["de_DE"],template:function template(firstName,lastName,maidenName){return firstName+(lastName?" "+lastName:"")+(maidenName?" geb. "+maidenName:"")}},{locales:["CJK-ja_JP"],template:function template(firstName,lastName,maidenName){return lastName+(firstName?" "+firstName:"")+(maidenName?" ("+maidenName+")":"")}},{locales:["CJK"],template:function template(firstName,lastName,maidenName){return lastName+firstName+(maidenName?" ("+maidenName+")":"")}},{locales:["ms_MY"],template:function template(firstName,lastName,maidenName){return firstName+(lastName?" "+lastName:"")+(maidenName?" ("+maidenName+")":"")}},{locales:["nl_NL"],template:function template(firstName,lastName,maidenName){return firstName+" "+lastName+(maidenName?"-"+maidenName:"")}},{locales:["pl_PL"],template:function template(firstName,lastName,maidenName){return firstName+(lastName?" "+lastName:"")+(maidenName?" z d. "+maidenName:"")}}]},LIST_VIEW:{defaultTemplate:function defaultTemplate(firstName,lastName,maidenName){return(lastName?lastName+", ":"")+firstName},localeTemplates:[{locales:["CJK"],template:function template(firstName,lastName,maidenName){return lastName+firstName}},{locales:["CJK-ja_JP"],template:function template(firstName,lastName,maidenName){return lastName+" "+firstName}},{locales:["ar_AE","in_ID","ms_MY","th_TH"],template:function template(firstName,lastName,maidenName){return firstName+" "+lastName}}]}};formatter.locales={CJK:"CJK",CJK_ja_JP:"CJK-ja_JP",ja_JP:"ja_JP"};formatter.charsets={korean:{lowerbound:44032,upperbound:55215},CJ:[{lowerbound:19968,upperbound:40895},{lowerbound:12448,upperbound:12543},{lowerbound:65377,upperbound:65439},{lowerbound:12352,upperbound:12447}]};formatter.prototype.htmlEncode=function(str){if(str===null||str===undefined){return null}return str.toString().replace(/(.)/g,function(a){if(a==="<"){return"&lt;"}else if(a===">"){return"&gt;"}else if(a==="&"){return"&amp;"}else if(a==='"'){return"&quot;"}else if(a==="'"){return"&#39;"}else if(a==="\\"){return"&#92;"}else if(a==="="){return"&#61;"}else if(a==="\0"){return"�;"}else{return a}})};function isKoreanCharset(str){if(!str){return false}var koreanCharset=formatter.charsets.korean,firstCharCode=str.charCodeAt(0);return firstCharCode>=koreanCharset.lowerbound&&firstCharCode<=koreanCharset.upperbound}function isCJCharset(str){if(!str){return false}var firstCharCode=str.charCodeAt(0),charset=formatter.charsets.CJ;for(var i=0,len=charset.length;i<len;i++){if(firstCharCode>=charset[i].lowerbound&&firstCharCode>=charset[i].upperbound){return true}}return false}function getLocaleTemplate(formatTemplates,locale){var localeTemplate=formatTemplates.defaultTemplate,otherTemplates=formatTemplates.localeTemplates;for(var i=0,len=otherTemplates.length;i<len;i++){if(Utils.indexOf(otherTemplates[i].locales,locale)>=0){localeTemplate=otherTemplates[i].template}}return localeTemplate}function getFormatTemplates(format){var formats=NameFormatter.formats,templates=NameFormatter.templates;if(!format){return templates.FAMILIAR_NAME}if(Utils.isString(format)){format=[format]}if(!Utils.isArray(format)){return templates.FAMILIAR_NAME}if(Utils.indexOf(format,formats.FULL_NAME)>=0){return templates.FULL_NAME}if(Utils.indexOf(format,formats.LIST_VIEW)>=0){return templates.LIST_VIEW}return templates.FAMILIAR_NAME}function hasMicroformat(format){if(format){if(Utils.isArray(format)){return Utils.indexOf(format,NameFormatter.formats.MICROFORMAT)>=0}else if(Utils.isString(format)){return format===NameFormatter.formats.MICROFORMAT}}return false}function processInputValue(value,isHTMLOutput,useMicroformat,htmlEncode,microformatTemplate){if(!value){return""}var processedValue=value.replace(TRIM_WHITESPACE_REGEX,"");if(isHTMLOutput){processedValue=htmlEncode(processedValue)}if(useMicroformat){processedValue=microformatTemplate(processedValue)}return processedValue}formatter.prototype.format=function(name,format,locale){var useMicroformat=hasMicroformat(format),isHTMLOutput=useMicroformat||name.lastNameWithHighlight,microformatTemplates=NameFormatter.templates.MICROFORMAT,firstName=processInputValue(name.firstName,isHTMLOutput,useMicroformat,this.htmlEncode,microformatTemplates.firstName),lastName=processInputValue(name.lastName,isHTMLOutput,useMicroformat,this.htmlEncode,microformatTemplates.lastName),maidenName=processInputValue(name.maidenName,isHTMLOutput,useMicroformat,this.htmlEncode,microformatTemplates.maidenName),lastNameWithHighlight=processInputValue(name.lastNameWithHighlight,false,useMicroformat,this.htmlEncode,microformatTemplates.lastName),formatTemplate="",nameFormatted="";if(isKoreanCharset(name.lastName)){locale=NameFormatter.locales.CJK}else if(isCJCharset(name.lastName)){if(locale===NameFormatter.locales.ja_JP){locale=NameFormatter.locales.CJK_ja_JP}else{locale=NameFormatter.locales.CJK}}formatTemplate=getLocaleTemplate(getFormatTemplates(format),locale);nameFormatted=formatTemplate(firstName,lastNameWithHighlight?lastNameWithHighlight:lastName,maidenName);nameFormatted=nameFormatted.replace(TRIM_WHITESPACE_REGEX,"");return nameFormatted};return formatter}();var NumberFormatter=function(){function tryFormatting(fmt,value){try{return fmt.format(value)}catch(err){return value+""}}function getFormatter(cache,intlLocale,options){var fmt=cache[intlLocale];if(!fmt){fmt=cache[intlLocale]=new Intl.NumberFormat(intlLocale,options)}return fmt}var formatter=function formatter(){this.instanceCache={}};formatter.prototype.format=function(value,locale){var intlFormatter,formattedValue="",localeData=__localeData[locale],options={maximumFractionDigits:3};if(!localeData){throw new Error("No locale data found for locale "+locale)}else if(!localeData.intlLocale){throw new Error("IntlLocale is not specified for locale "+locale)}if(localeData.number&&localeData.number.maximumFractionDigits){options.maximumFractionDigits=localeData.number.maximumFractionDigits}try{intlFormatter=getFormatter(this.instanceCache,localeData.intlLocale+"-u-nu-latn-ca-gregory",options)}catch(e){intlFormatter=getFormatter(this.instanceCache,localeData.intlLocale,options)}formattedValue=tryFormatting(intlFormatter,value);if(localeData.number&&localeData.number.postFormatting){formattedValue=localeData.number.postFormatting(value,formattedValue)}return formattedValue};return formatter}();var Possessive=function(){var formatter=function formatter(){};formatter.prototype.format=function(text,locale){var localeData=__localeData[locale],possessiveRules=localeData.possessive?localeData.possessive:{},suffixFromRules;if(Utils.isDefined(possessiveRules)){suffixFromRules=possessiveRules.fallback;for(var suffix in possessiveRules.rules){if(new RegExp(suffix).test(text)){suffixFromRules=possessiveRules.rules[suffix];break}}}if(Utils.isDefined(suffixFromRules)){return text+suffixFromRules}else{return text}return text};return formatter}();var TimeFormatter=function(){var RTL_PATTERN=Utils.RTL_PATTERN,formatter=function formatter(){this.instanceCache={}};formatter.prototype.format=function(date,locale,format,useTimeZone){var fmt,formattedValue="",localeData=__localeData[locale],options,intlLocale,dateToFormat=Utils.parseDateString(date,useTimeZone),intlOptions={hm:{hour:"numeric",minute:"numeric"},hms:{hour:"numeric",minute:"numeric",second:"numeric"}},tryCatch=Utils.tryCatch,cache=this.instanceCache,cacheKey,result;if(!localeData){throw new Error("No locale data found for locale "+locale)}else if(!localeData.intlLocale){throw new Error("IntlLocale is not specified for locale "+locale)}options=localeData.time&&localeData.time.intlOptions?localeData.time.intlOptions[format]:intlOptions[format];if(!options){options=intlOptions.hms}options.timeZone="UTC";result=tryCatch(function(){intlLocale=localeData.intlLocale;if(intlLocale!=="zh"){intlLocale+="-u-nu-latn-ca-gregory"}cacheKey=intlLocale+format;fmt=cache[cacheKey];if(!fmt){fmt=cache[cacheKey]=new Intl.DateTimeFormat(intlLocale,options)}formattedValue=fmt.format(dateToFormat)},void 0);if(result===Utils.errorObject){Utils.errorObject.value=null;formattedValue=dateToFormat.toLocaleTimeString()}formattedValue=formattedValue.replace(RTL_PATTERN,"");if(localeData.time&&localeData.time.postFormatting){formattedValue=localeData.time.postFormatting(format,date,formattedValue)}return formattedValue};return formatter}();var TruncationFormatter=function(){var _ellipsis="...",formatter=function formatter(ellipsis){_ellipsis=typeof ellipsis!=="undefined"?ellipsis:_ellipsis};formatter.prototype.format=function(value,limit){if(!value||typeof value!=="string"){if(typeof value==="undefined"||value===""){return""}return null}if(typeof limit==="undefined"){return"..."}if(!limit||typeof limit!=="number"||limit>=value.length||limit<0){return value}var truncated=value.substr(0,limit),chars=truncated.split(""),idx=limit-1,output="",regexPunctuation=/\s|\?|\!|\.|\,|\;|\:/g;while(idx>=0){if(!regexPunctuation.test(chars[idx])){idx--}else{break}}if(idx>0){output=truncated.substr(0,idx)}else{output=truncated}output+=_ellipsis;return output};return formatter}();var Chooser=function(){var formatter=function formatter(){},isDefined=Utils.isDefined,grammarLongestEndsWith=2,defaultGrammarRules;formatter.CATEGORIES={SINGULAR:0,PLURAL:1,DUAL:2,FEW:3,MANY:4,ZERO:5};defaultGrammarRules={equals:{1:formatter.CATEGORIES.SINGULAR},endsWith:{0:formatter.CATEGORIES.PLURAL,1:formatter.CATEGORIES.PLURAL,2:formatter.CATEGORIES.PLURAL,3:formatter.CATEGORIES.PLURAL,4:formatter.CATEGORIES.PLURAL,5:formatter.CATEGORIES.PLURAL,6:formatter.CATEGORIES.PLURAL,7:formatter.CATEGORIES.PLURAL,8:formatter.CATEGORIES.PLURAL,9:formatter.CATEGORIES.PLURAL}};formatter.COMPARISONS={eq:function eq(left,right){return left===right},gt:function gt(left,right){return left>right},gte:function gte(left,right){return left>=right},endsWith:function endsWith(left,right){return _endsWith(left.toString(),right.toString())}};function asNumber(value){if(typeof value==="number"&&value===value){return value}return bestEffortNumberConversion(value)}function bestEffortNumberConversion(value){try{if(typeof value!=="undefined"){if(!isNaN(value)){return parseInt(value+"",10)}var digitsOnly=value.replace(/[^0-9]/g,""),asInt=parseInt(digitsOnly,10);if(isNaN(asInt)){return 0}else{return asInt}}}catch(e){}return 0}function _endsWith(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1}formatter.prototype.findRule=function(rules,value,comparison){var rule;if(!isDefined(rules)){return rule}for(var ruleIdx=0,rulesLen=rules.length;ruleIdx<rulesLen;ruleIdx++){rule=rules[ruleIdx];for(var valueIdx=0,valuesLen=rule.values.length;valueIdx<valuesLen;valueIdx++){if(comparison(value,rule.values[valueIdx])){return rule}}}return undefined};formatter.prototype.pickCategory=function(gramma,value,longestEndsWith){if(isDefined(gramma)&&isDefined(value)&&isDefined(longestEndsWith)){var asString=value.toString();if(isDefined(gramma.equals)&&isDefined(gramma.equals[asString])){return gramma.equals[asString]}if(isDefined(gramma.endsWith)){var max=Math.min(longestEndsWith,asString.length);for(var i=max;i>0;i--){var suffix=asString.slice(-1*i);if(isDefined(gramma.endsWith[suffix])){return gramma.endsWith[suffix]}}}}return undefined};formatter.prototype.findCategoryMatch=function(value,rules,grammarRules){value=Math.floor(value);var numberMatch=this.findNumberMatchNoRanges(value,rules);if(isDefined(numberMatch)){return numberMatch}var categoryId=this.pickCategory(grammarRules,value,grammarLongestEndsWith),category,pluralRule;if(isDefined(categoryId)){for(var currCategory in formatter.CATEGORIES){if(formatter.CATEGORIES[currCategory]===categoryId){category=currCategory.toLowerCase()}}for(var ruleIdx=0,rulesLen=rules.length;ruleIdx<rulesLen;ruleIdx++){if(rules[ruleIdx].category===category){return rules[ruleIdx]}if(rules[ruleIdx].category==="plural"){pluralRule=rules[ruleIdx]}}if(pluralRule){return pluralRule}}return undefined};formatter.prototype.findNumberMatchNoRanges=function(value,rules){var rulesWithoutRanges=[],rule,eqRule;for(var i=0,len=rules.length;i<len;i++){rule=rules[i];eqRule={};if(isDefined(rule.arg)&&rule.comparison==="gte"){for(var prop in rule){eqRule[prop]=rule[prop]}eqRule.comparison="eq";rulesWithoutRanges.push(eqRule)}else{rulesWithoutRanges.push(rule)}}return this.findNumberMatch(value,rulesWithoutRanges)};formatter.prototype.findNumberMatch=function(value,rules){var bestMatch;for(var i=0;i<rules.length;i++){var rule=rules[i],comparison=Chooser.COMPARISONS[rule.comparison];if(comparison(value,rule.arg)&&(!isDefined(bestMatch)||rule.arg>bestMatch.arg)){bestMatch=rule}}return bestMatch};formatter.prototype.isValidCategory=function(str){return typeof formatter.CATEGORIES[str.toUpperCase()]!=="undefined"};formatter.prototype.format=function(value,rules,locale){var localeData=__localeData[locale],grammarRules=localeData.chooser?localeData.chooser:defaultGrammarRules,numericValue=asNumber(value),hasCategory=false,match,text;for(var ruleIdx=0,rulesLen=rules.length;ruleIdx<rulesLen;ruleIdx++){if(isDefined(rules[ruleIdx].category)){hasCategory=true;break}}if(hasCategory){match=this.findCategoryMatch(numericValue,rules,grammarRules)}else{match=this.findNumberMatch(numericValue,rules)}if(match){text=match.text;if(typeof text==="function"){return text()}}return text};return formatter}();var Resources=function(){var formatter=function formatter(i18nCacheStatic,i18nCacheDynamic){this.i18nCacheStatic=i18nCacheStatic;this.i18nCacheDynamic=i18nCacheDynamic};var DYNAMIC_KEY_PREFIX="__i18n__";formatter.prototype.get=function(key,namespace,context,callback){Utils.assert(callback,"get called with null callback");Utils.assert(key,"get called with null or empty key");Utils.assert(namespace,"get called with null or empty namespace");var staticString=this.getStaticString(key,namespace);if(Utils.isDefined(staticString)){callback(null,staticString)}else{this.renderDynamicString(key,namespace,context,callback)}};formatter.prototype.getStaticString=function(key,namespace){Utils.assert(key,"getStaticString called with null or empty key");Utils.assert(namespace,"getStaticString called with null or empty namespace");if(this.i18nCacheStatic&&this.i18nCacheStatic.cache&&this.i18nCacheStatic.cache[namespace]){return this.i18nCacheStatic.cache[namespace][key]}return};formatter.prototype.renderDynamicString=function(key,namespace,context,callback){Utils.assert(callback,"renderDynamicString called with null callback");Utils.assert(key,"renderDynamicString called with null or empty key");Utils.assert(namespace,"renderDynamicString called with null or empty namespace");var dynamicKeyName=this.dynamicKeyName(key,namespace);if(this.i18nCacheDynamic&&this.i18nCacheDynamic.cache&&this.i18nCacheDynamic.cache[dynamicKeyName]){t8.renderDynamicString(dynamicKeyName,this.i18nCacheDynamic.cache[dynamicKeyName],context,callback)}else{callback("Could not find static i18n key "+key+" in static i18n cache nor dynamic i18n template "+dynamicKeyName+" in dynamic i18n cache.")}};formatter.prototype.dynamicKeyName=function(key,namespace){Utils.assert(key,"dynamicKeyName called with null or empty key");Utils.assert(namespace,"dynamicKeyName called with null or empty namespace");return DYNAMIC_KEY_PREFIX+namespace+"__"+key};return formatter}();var Rtl=function(){var formatter=function formatter(){};var WHITESPACES=" \n\r\t\f \u2028\u2029".split(""),EXCLUDED_CHARACTERS="~!@#$%^&*()_+`1234567890-={}|[]\\:\";'<>?,./".split(""),EXCLUSION_SET=WHITESPACES.concat(EXCLUDED_CHARACTERS),ARABIC_LOW="֐",ARABIC_HIGH="ۿ";function firstRtlCharacter(content){if(!Utils.isDefined(content)){return-1}var i=0,ch="\0",contentLength=content.length;for(i=0;i<contentLength;i++){ch=content.charAt(i);if(EXCLUSION_SET.indexOf(ch)<0){break}}if(i>=contentLength){return-1}else{return ch>=ARABIC_LOW&&ch<=ARABIC_HIGH?i:-1}}var htmlDecode=function(undefined){var namedEntities={nbsp:" ",lt:"<",gt:">",amp:"&",quot:'"'};var rEntities=/&(?:(lt|gt|amp|quot|nbsp)|#x([\da-f]{1,4})|#(\d{1,5}));/gi;return function(encodedText){if(encodedText===null||encodedText===undefined){return null}return(encodedText+"").replace(rEntities,function(match,named,hex,dec){if(named){return namedEntities[named]}else if(hex||dec){return String.fromCharCode(parseInt(hex||dec,hex?16:10)||65533)}return"�"})}}();formatter.prototype.isRtl=function(content){return firstRtlCharacter(htmlDecode(content))!==-1};return formatter}();return{Chooser:Chooser,CurrencyFormatter:CurrencyFormatter,DateFormatter:DateFormatter,NameFormatter:NameFormatter,NumberFormatter:NumberFormatter,Possessive:Possessive,Resources:Resources,Rtl:Rtl,TimeFormatter:TimeFormatter,TruncationFormatter:TruncationFormatter,__addLocaleData:function __addLocaleData(locale,localeData){__localeData[locale]=localeData}}})});(function(){var localeData={intlLocale:"en",date:{intlOptions:{}},time:{},currency:{},number:{}};localeData.date.postFormatting=function(format,date,formattedValue){var formatName=format.split(".")[0];formattedValue=formattedValue.replace(/\s0/," ");if(formatName==="my"){formattedValue=formattedValue.replace(/,/g,"")}else if(formatName==="time"){formattedValue=formattedValue.split(" ");if(formattedValue.length===5&&!/,$/.test(formattedValue[2])){formattedValue[2]=formattedValue[2]+","}else if(formattedValue.length===3&&!/,$/.test(formattedValue[0])){formattedValue[0]=formattedValue[0]+","}formattedValue=formattedValue.join(" ")}return formattedValue};localeData.date.narrowDayNames=["S","M","T","W","T","F","S"];var intlOpts=localeData.date.intlOptions;intlOpts["time"]={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};intlOpts["time.long"]=intlOpts["time"];intlOpts["time.medium"]=intlOpts["time"];intlOpts["time.short"]={year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};intlOpts["mdy"]={year:"numeric",month:"long",day:"numeric"};intlOpts["mdy.long"]=intlOpts["mdy"];intlOpts["mdy.medium"]={year:"numeric",month:"short",day:"numeric"};intlOpts["mdy.short"]={year:"numeric",month:"numeric",day:"numeric"};intlOpts["my"]={year:"numeric",month:"long"};intlOpts["my.long"]=intlOpts["my"];intlOpts["my.medium"]={year:"numeric",month:"short"};intlOpts["my.short"]=intlOpts["my.medium"];intlOpts["md"]={month:"long",day:"numeric"};intlOpts["md.long"]=intlOpts["md"];intlOpts["md.medium"]={month:"short",day:"numeric"};intlOpts["md.short"]=intlOpts["md.medium"];intlOpts["m"]={month:"long"};intlOpts["m.long"]=intlOpts["m"];intlOpts["m.medium"]={month:"short"};intlOpts["m.short"]={month:"numeric"};intlOpts["d"]={weekday:"long"};intlOpts["d.long"]=intlOpts["d"];intlOpts["d.medium"]={weekday:"short"};intlOpts["d.short"]={day:"numeric"};intlOpts["d.narrow"]={weekday:"narrow"};intlOpts["y"]={year:"numeric"};intlOpts["y.long"]=intlOpts["y"];intlOpts["y.medium"]=intlOpts["y"];intlOpts["y.short"]={year:"2-digit"};localeData.currency.getCurrencyDisplay=function(currency){if(/^(DKK|NOK|SGD|ZAR|SEK|CHF)$/.test(currency)){return"code"}return"symbol"};localeData.currency.postFormatting=function(currency,amount,formattedValue){var dollarSignRegex=/^(\(|-)?\$/,currencySymbol={AUD:"A$",CAD:"CA$",HKD:"HK$",NZD:"NZ$"};if(typeof currencySymbol[currency]!=="undefined"){formattedValue=formattedValue.replace(dollarSignRegex,currencySymbol[currency])}else if(currency==="INR"){formattedValue=formattedValue.replace(/Rs\./,"₹")}if(amount<0&&formattedValue.indexOf(")")>=0){formattedValue="-"+formattedValue.replace(/[\(\)]/g,"")}return formattedValue.replace(/\s/,"")};localeData.possessive={fallback:"’s",rules:{".*[Ss]$":"’",".*[A-RT-Z]$":"’S",".*[a-rt-z]$":"’s"}};t8.__addLocaleData("en_US",localeData)})();(function(){var localeData={intlLocale:"fr",date:{intlOptions:{}},time:{},currency:{},number:{}};localeData.date.postFormatting=function(format,date,formattedValue){var formatName=format.split(".")[0];if(formatName==="m"||formatName==="my"){formattedValue=formattedValue.toLocaleLowerCase()}if(formattedValue.indexOf(" à ")>-1){formattedValue=formattedValue.replace(" à "," ")}formattedValue=formattedValue.replace(/^0/,"").replace(/\/0/,"/");return formattedValue};var intlOpts=localeData.date.intlOptions;intlOpts["time"]={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"numeric"};intlOpts["time.long"]=intlOpts["time"];intlOpts["time.medium"]=intlOpts["time"];intlOpts["time.short"]={year:"2-digit",month:"numeric",day:"numeric",hour:"2-digit",minute:"numeric"};intlOpts["mdy"]={year:"numeric",month:"long",day:"numeric"};intlOpts["mdy.long"]=intlOpts["mdy"];intlOpts["mdy.medium"]={year:"numeric",month:"short",day:"numeric"};intlOpts["mdy.short"]={year:"numeric",month:"numeric",day:"numeric"};intlOpts["my"]={year:"numeric",month:"long"};intlOpts["my.long"]=intlOpts["my"];intlOpts["my.medium"]={year:"numeric",month:"short"};intlOpts["my.short"]=intlOpts["my.medium"];intlOpts["md"]={month:"long",day:"numeric"};intlOpts["md.long"]=intlOpts["md"];intlOpts["md.medium"]={month:"short",day:"numeric"};intlOpts["md.short"]=intlOpts["md.medium"];intlOpts["m"]={month:"long"};intlOpts["m.long"]=intlOpts["m"];intlOpts["m.medium"]={month:"short"};intlOpts["m.short"]={month:"numeric"};intlOpts["d"]={weekday:"long"};intlOpts["d.long"]=intlOpts["d"];intlOpts["d.medium"]={weekday:"short"};intlOpts["d.short"]={day:"numeric"};intlOpts["d.narrow"]={weekday:"narrow"};intlOpts["y"]={year:"numeric"};intlOpts["y.long"]=intlOpts["y"];intlOpts["y.medium"]=intlOpts["y"];intlOpts["y.short"]={year:"numeric"};localeData.time.postFormatting=function(format,date,formattedValue){if(/^\d:/.test(formattedValue)){formattedValue="0"+formattedValue}return formattedValue};var categories=t8.Chooser.CATEGORIES;localeData.chooser={equals:{0:categories.SINGULAR,1:categories.SINGULAR},endsWith:{0:categories.PLURAL,1:categories.PLURAL,2:categories.PLURAL,3:categories.PLURAL,4:categories.PLURAL,5:categories.PLURAL,6:categories.PLURAL,7:categories.PLURAL,8:categories.PLURAL,9:categories.PLURAL}};t8.__addLocaleData("fr_FR",localeData)})();(function(){var localeData={intlLocale:"es",date:{intlOptions:{}},time:{},currency:{},number:{}};localeData.date.postFormatting=function(format,date,formattedValue){var formatName=format.split(".")[0];if(/^(d|m|my)$/.test(formatName)){formattedValue=formattedValue.toLocaleLowerCase()}else if(formatName==="md"&&!/\sde\s/.test(formattedValue)){formattedValue=formattedValue.replace(/\s/," de ")}else if(format==="mdy.medium"&&!/\sde\s/.test(formattedValue)){formattedValue=formattedValue.split(" ");formattedValue.splice(1,0,"de");formattedValue.splice(3,0,"de");formattedValue=formattedValue.join(" ")}if((format==="my.medium"||format==="my.short")&&!/\.\sde/.test(formattedValue)){formattedValue=formattedValue.replace(/\.\s/,". de ")}if(/((d|m|md)\.medium)|md\.short/.test(format)&&!/\.$/.test(formattedValue)){formattedValue+="."}if(format!=="y.short"){formattedValue=formattedValue.replace(/^0/,"").replace(/\/0/g,"/")}return formattedValue.replace("sep.","sept.")};localeData.date.narrowDayNames=["D","L","M","X","J","V","S"];var intlOpts=localeData.date.intlOptions;intlOpts["time"]={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};intlOpts["time.long"]=intlOpts["time"];intlOpts["time.medium"]=intlOpts["time"];intlOpts["time.short"]={year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};intlOpts["mdy"]={year:"numeric",month:"long",day:"numeric"};intlOpts["mdy.long"]=intlOpts["mdy"];intlOpts["mdy.medium"]={year:"numeric",month:"short",day:"numeric"};intlOpts["mdy.short"]={year:"numeric",month:"numeric",day:"numeric"};intlOpts["my"]={year:"numeric",month:"long"};intlOpts["my.long"]=intlOpts["my"];intlOpts["my.medium"]={year:"numeric",month:"short"};intlOpts["my.short"]=intlOpts["my.medium"];intlOpts["md"]={month:"long",day:"numeric"};intlOpts["md.long"]=intlOpts["md"];intlOpts["md.medium"]={month:"short",day:"numeric"};intlOpts["md.short"]=intlOpts["md.medium"];intlOpts["m"]={month:"long"};intlOpts["m.long"]=intlOpts["m"];intlOpts["m.medium"]={month:"short"};intlOpts["m.short"]={month:"numeric"};intlOpts["d"]={weekday:"long"};intlOpts["d.long"]=intlOpts["d"];intlOpts["d.medium"]={weekday:"short"};intlOpts["d.short"]={day:"numeric"};intlOpts["d.narrow"]={weekday:"narrow"};intlOpts["y"]={year:"numeric"};intlOpts["y.long"]=intlOpts["y"];intlOpts["y.medium"]=intlOpts["y"];intlOpts["y.short"]={year:"2-digit"};localeData.currency.getCurrencyDisplay=function(currency){if(currency==="EUR"){return"symbol"}return"code"};localeData.currency.postFormatting=function(currency,amount,formattedValue){return formattedValue.replace(/\s/g,".").replace(/\.(?=[^\.]*$)/," ")};localeData.number.postFormatting=function(value,formattedValue){return formattedValue.replace(/\s/g,".")};t8.__addLocaleData("es_ES",localeData)})();(function(){var localeData={intlLocale:"de",date:{intlOptions:{}},time:{},currency:{},number:{}};localeData.date.postFormatting=function(format,date,formattedValue){var formatName=format.split(".")[0];if(formatName==="md"&&!/\.\s/.test(formattedValue)){formattedValue=formattedValue.replace(/\s/g,". ")}else if(format==="mdy.medium"||format==="my.medium"||format==="my.short"){formattedValue=formattedValue.replace(/\./g,"").replace(/\s/g,". ")}if(/^(d|m|md)\.medium|^md\.short/.test(format)&&!/\.$/.test(formattedValue)){formattedValue+="."}formattedValue=formattedValue.replace(/^0/,"").replace(/\.0/g,".").replace(/Mrz\.|M\u00E4r(z)?\./g,"März").replace(/Mai\./,"Mai").replace(/Jun(i)?\./,"Juni").replace(/Jul(i)?\./,"Juli").replace(",","");return formattedValue};localeData.date.narrowDayNames=["So","Mo","Di","Mi","Do","Fr","Sa"];var intlOpts=localeData.date.intlOptions;intlOpts["time"]={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"numeric"};intlOpts["time.long"]=intlOpts["time"];intlOpts["time.medium"]=intlOpts["time"];intlOpts["time.short"]={year:"2-digit",month:"numeric",day:"numeric",hour:"2-digit",minute:"numeric"};intlOpts["mdy"]={year:"numeric",month:"long",day:"numeric"};intlOpts["mdy.long"]=intlOpts["mdy"];intlOpts["mdy.medium"]={year:"numeric",month:"short",day:"numeric"};intlOpts["mdy.short"]={year:"numeric",month:"numeric",day:"numeric"};intlOpts["my"]={year:"numeric",month:"long"};intlOpts["my.long"]=intlOpts["my"];intlOpts["my.medium"]={year:"numeric",month:"short"};intlOpts["my.short"]=intlOpts["my.medium"];intlOpts["md"]={month:"long",day:"numeric"};intlOpts["md.long"]=intlOpts["md"];intlOpts["md.medium"]={month:"short",day:"numeric"};intlOpts["md.short"]=intlOpts["md.medium"];intlOpts["m"]={month:"long"};intlOpts["m.long"]=intlOpts["m"];intlOpts["m.medium"]={month:"short"};intlOpts["m.short"]={month:"numeric"};intlOpts["d"]={weekday:"long"};intlOpts["d.long"]=intlOpts["d"];intlOpts["d.medium"]={weekday:"short"};intlOpts["d.short"]={day:"numeric"};intlOpts["y"]={year:"numeric"};intlOpts["y.long"]=intlOpts["y"];intlOpts["y.medium"]=intlOpts["y"];intlOpts["y.short"]={year:"numeric"};localeData.time.postFormatting=function(format,date,formattedValue){if(/^\d:/.test(formattedValue)){formattedValue="0"+formattedValue}return formattedValue};localeData.currency.postFormatting=function(currency,amount,formattedValue){if(currency==="CNY"){formattedValue=formattedValue.replace(/CNY|\uFFE5/,"CN¥")}return formattedValue};localeData.possessive={fallback:"s",rules:{".*[SsXxZzß]$":"’",".*[A-RT-WYÄÖÜ]$":"S",".*[a-rt-wyäöü]$":"s"}};t8.__addLocaleData("de_DE",localeData)})();(function(){var localeData={intlLocale:"ja",date:{intlOptions:{}},time:{},currency:{},number:{}};localeData.date.postFormatting=function(format,date,formattedValue){if(/^m\.(short|medium)/.test(format)&&!/\u6708/.test(formattedValue)){formattedValue+="月"}else if(/^(mdy|time)\.short/.test(format)){formattedValue=formattedValue.replace(/(\u5E74|\u6708)/g,"/").replace(/\u65E5/,"")}return formattedValue.replace("月月","月")};var intlOpts=localeData.date.intlOptions;intlOpts["time"]={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};intlOpts["time.long"]=intlOpts["time"];intlOpts["time.medium"]=intlOpts["time"];intlOpts["time.short"]={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};intlOpts["mdy"]={year:"numeric",month:"long",day:"numeric"};intlOpts["mdy.long"]=intlOpts["mdy"];intlOpts["mdy.medium"]={year:"numeric",month:"short",day:"numeric"};intlOpts["mdy.short"]={year:"numeric",month:"numeric",day:"numeric"};intlOpts["my"]={year:"numeric",month:"long"};intlOpts["my.long"]=intlOpts["my"];intlOpts["my.medium"]={year:"numeric",month:"short"};intlOpts["my.short"]=intlOpts["my.medium"];intlOpts["md"]={month:"long",day:"numeric"};intlOpts["md.long"]=intlOpts["md"];intlOpts["md.medium"]={month:"short",day:"numeric"};intlOpts["md.short"]=intlOpts["md.medium"];intlOpts["m"]={month:"long"};intlOpts["m.long"]=intlOpts["m"];intlOpts["m.medium"]={month:"short"};intlOpts["m.short"]={month:"numeric"};intlOpts["d"]={weekday:"narrow"};intlOpts["d.long"]=intlOpts["d"];intlOpts["d.medium"]={weekday:"short"};intlOpts["d.short"]={day:"numeric"};intlOpts["d.narrow"]={weekday:"narrow"};intlOpts["y"]={year:"numeric"};intlOpts["y.long"]=intlOpts["y"];intlOpts["y.medium"]=intlOpts["y"];intlOpts["y.short"]={year:"numeric"};localeData.currency.getCurrencyDisplay=function(currency){if(/^(INR|DKK|NOK|SGD|ZAR|SEK|CHF)$/.test(currency)){return"code"}return"symbol"};
localeData.currency.postFormatting=function(currency,amount,formattedValue){var dollarSignRegex=/^(-)?\$/,currencySymbol={AUD:"AU$",CAD:"CA$",HKD:"HK$",NZD:"NZ$"};if(typeof currencySymbol[currency]!=="undefined"&&dollarSignRegex.test(formattedValue)){formattedValue=formattedValue.replace(dollarSignRegex,currencySymbol[currency])}if(currency==="AUD"&&formattedValue.indexOf("A$")>-1){formattedValue=formattedValue.replace("A$","AU$")}if(amount<0&&!/^-/.test(formattedValue)){formattedValue="-"+formattedValue.replace(/(-|(|))/g,"")}return formattedValue.replace(/\s/g,"").replace(/\u00A5/g,"￥")};t8.__addLocaleData("ja_JP",localeData)})();(function(){var localeData={intlLocale:"pt",date:{intlOptions:{}},time:{},currency:{},number:{}};localeData.date.postFormatting=function(format,date,formattedValue){if(/^(mdy|m)\.medium|^md\./.test(format)){formattedValue=formattedValue.replace(/^0/,"").replace(/\./g," de ")}return formattedValue};var intlOpts=localeData.date.intlOptions;intlOpts["time"]={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"numeric"};intlOpts["time.long"]=intlOpts["time"];intlOpts["time.medium"]=intlOpts["time"];intlOpts["time.short"]={year:"2-digit",month:"numeric",day:"numeric",hour:"2-digit",minute:"numeric"};intlOpts["mdy"]={year:"numeric",month:"long",day:"numeric"};intlOpts["mdy.long"]=intlOpts["mdy"];intlOpts["mdy.medium"]={year:"numeric",month:"short",day:"numeric"};intlOpts["mdy.short"]={year:"numeric",month:"numeric",day:"numeric"};intlOpts["my"]={year:"numeric",month:"long"};intlOpts["my.long"]=intlOpts["my"];intlOpts["my.medium"]={year:"numeric",month:"short"};intlOpts["my.short"]=intlOpts["my.medium"];intlOpts["md"]={month:"long",day:"numeric"};intlOpts["md.long"]=intlOpts["md"];intlOpts["md.medium"]={month:"short",day:"numeric"};intlOpts["md.short"]=intlOpts["md.medium"];intlOpts["m"]={month:"long"};intlOpts["m.long"]=intlOpts["m"];intlOpts["m.medium"]={month:"short"};intlOpts["m.short"]={month:"numeric"};intlOpts["d"]={weekday:"long"};intlOpts["d.long"]=intlOpts["d"];intlOpts["d.medium"]={weekday:"short"};intlOpts["d.short"]={day:"numeric"};intlOpts["d.narrow"]={weekday:"narrow"};intlOpts["y"]={year:"numeric"};intlOpts["y.long"]=intlOpts["y"];intlOpts["y.medium"]=intlOpts["y"];intlOpts["y.short"]={year:"2-digit"};localeData.time.postFormatting=function(format,date,formattedValue){if(/^\d:/.test(formattedValue)){formattedValue="0"+formattedValue}return formattedValue};localeData.currency.postFormatting=function(currency,amount,formattedValue){if(amount<0&&!/^-/.test(formattedValue)){formattedValue="-"+formattedValue.replace(/-/,"")}if(currency==="CNY"){formattedValue=formattedValue.replace(/CNY|\uFFE5/,"CN¥")}return formattedValue.replace(/\s/,"")};t8.__addLocaleData("pt_BR",localeData)})();(function(){var localeData={intlLocale:"zh",date:{intlOptions:{}},time:{},currency:{},number:{}};localeData.date.postFormatting=function(format,date,formattedValue){var keywords=["月","日","年"],formatName=format.split(".")[0],formatLength=format.split(".")[1],TRIM_WHITESPACE_REGEX=/(^\s+|\s+$)/g;if(formatName!=="d"||formatLength==="short"){for(var i=0;i<keywords.length;i++){formattedValue=formattedValue.replace(keywords[i]," "+keywords[i]+" ")}}if(formatName==="m"){formattedValue=formattedValue.split("月")[0]+"月"}else if(format==="time.short"||format==="mdy.short"){formattedValue=formattedValue.replace(/\s(\u6708|\u5E74)\s/g,"/").replace(/\s\u65E5\s/g,"")}return formattedValue.replace("  "," ").replace("月 月","月 ").replace(TRIM_WHITESPACE_REGEX,"").replace(/\u5348\s/,"午")};var intlOpts=localeData.date.intlOptions;intlOpts["time"]={year:"numeric",month:"narrow",day:"numeric",hour:"numeric",minute:"numeric",hour12:true};intlOpts["time.long"]=intlOpts["time"];intlOpts["time.medium"]=intlOpts["time"];intlOpts["time.short"]={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:true};intlOpts["mdy"]={year:"numeric",month:"narrow",day:"numeric"};intlOpts["mdy.long"]=intlOpts["mdy"];intlOpts["mdy.medium"]={year:"numeric",month:"short",day:"numeric"};intlOpts["mdy.short"]={year:"numeric",month:"numeric",day:"numeric"};intlOpts["my"]={year:"numeric",month:"narrow"};intlOpts["my.long"]=intlOpts["my"];intlOpts["my.medium"]={year:"numeric",month:"short"};intlOpts["my.short"]=intlOpts["my.medium"];intlOpts["md"]={month:"narrow",day:"numeric"};intlOpts["md.long"]=intlOpts["md"];intlOpts["md.medium"]={month:"short",day:"numeric"};intlOpts["md.short"]=intlOpts["md.medium"];intlOpts["m"]=intlOpts["md.short"];intlOpts["m.long"]=intlOpts["m"];intlOpts["m.medium"]=intlOpts["m"];intlOpts["m.short"]=intlOpts["m"];intlOpts["d"]={weekday:"long"};intlOpts["d.long"]=intlOpts["d"];intlOpts["d.medium"]={weekday:"short"};intlOpts["d.short"]={day:"numeric"};intlOpts["d.narrow"]={weekday:"narrow"};intlOpts["y"]={year:"numeric"};intlOpts["y.long"]=intlOpts["y"];intlOpts["y.medium"]=intlOpts["y"];intlOpts["y.short"]={year:"numeric"};localeData.time.intlOptions={hm:{hour:"numeric",minute:"numeric",hour12:true},hms:{hour:"numeric",minute:"numeric",second:"numeric",hour12:true}};localeData.time.postFormatting=function(format,date,formattedValue){if(formattedValue.indexOf("午 ")<0){formattedValue=formattedValue.replace("午","午 ")}if(formattedValue.indexOf("12:")>=0){formattedValue=formattedValue.replace("上午","午夜").replace("下午","中午")}return formattedValue};localeData.currency.getCurrencyDisplay=function(currency){if(/^(DKK|NOK|SGD|ZAR|SEK|CHF)$/.test(currency)){return"code"}return"symbol"};localeData.currency.postFormatting=function(currency,amount,formattedValue){var numberRegex=/[0-9]/,dollarSignRegex=/^(\(|-)?\$/,currencySymbol={AUD:"AU$",CAD:"CA$",HKD:"HK$",NZD:"NZ$",USD:"US$"};if(typeof currencySymbol[currency]!=="undefined"){formattedValue=formattedValue.replace(dollarSignRegex,currencySymbol[currency]+" ")}else if(currency==="JPY"&&!/JP\u00A5/.test(formattedValue)){formattedValue=formattedValue.replace(/\u00A5/,"JP¥ ")}else if(currency==="EUR"&&!/\u20AC\u00A0/.test(formattedValue)){formattedValue=formattedValue.replace(/\u20AC/,"€ ")}else if(currency==="INR"){formattedValue=formattedValue.replace(/Rs\./,"₹");if(!/\u20B9\u00A0/.test(formattedValue)){formattedValue=formattedValue.replace(/\u20B9/,"₹ ")}}else if(currency==="GBP"&&!/\u00A3\u00A0/.test(formattedValue)){formattedValue=formattedValue.replace(/\u00A3/,"£ ")}else if(!/\$\u00A0/.test(formattedValue)){formattedValue=formattedValue.replace(/\$/,"$ ")}var firstNumberIndex=formattedValue.search(numberRegex);if(firstNumberIndex>0){if(!/\s/.test(formattedValue.charAt(firstNumberIndex-1))){formattedValue=formattedValue.slice(0,firstNumberIndex)+" "+formattedValue.slice(firstNumberIndex)}}if(amount<0&&formattedValue.indexOf(")")>=0){formattedValue="-"+formattedValue.replace(/[\(\)]/g,"")}return formattedValue};t8.__addLocaleData("zh_CN",localeData)})();var t8$1=window.t8;var supportedLocales=["en_US","fr_FR","es_ES","de_DE","ja_JP","pt_BR","zh_CN"];var I18nService=function(){function I18nService(){_classCallCheck2(this,I18nService);this.locale="en_US"}_createClass2(I18nService,[{key:"formatName",value:function formatName(nameObj){var formatType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"FULL_NAME";return(new t8$1.NameFormatter).format(nameObj,formatType,this.locale)}},{key:"formatNumber",value:function formatNumber(nameObj){return(new t8$1.NumberFormatter).format(nameObj,this.locale)}},{key:"locale",set:function set(locale){if(supportedLocales.indexOf(locale)>-1){this._locale=locale}},get:function get(){return this._locale}}]);return I18nService}();var i18n=new I18nService;function replaceVars(i18nStr){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return(i18nStr||"").replace(/{:((\w|\d)+)}/g,function(match,key){return data[key]||""})}function t8$2(i18nKey,options){var messages=i18nMessages[i18n.locale]||{};var message=messages[i18nKey];if(message){return replaceVars(message,options.hash)}return i18nKey}runtime$2.registerHelper("t8",t8$2);runtime$2.registerHelper("format-number",function(num){return i18n.formatNumber(num)});runtime$2.registerHelper("format-name",function(name,options){return i18n.formatName(name,options.hash.type)});runtime$2.registerHelper("format-duration",function(durationInSeconds){var minutes=Math.floor(durationInSeconds/60);var seconds=durationInSeconds%60;return minutes>0?t8$2("duration_minutes",{hash:{minutes:String(minutes),seconds:String(seconds)}}):t8$2("duration_seconds",{hash:{seconds:String(seconds)}})});var mobileRegex=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/;var getUserAgent=function getUserAgent(){var userAgent=void 0;return function(){if(!userAgent){userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera}return userAgent}}();function isMobileDevice(){var ua=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getUserAgent();return mobileRegex.test(ua)}var isMobile=isMobileDevice();runtime$2.registerHelper("external-link-target",function(){return isMobile?"_top":"_blank"});var LixService=function(){function LixService(){_classCallCheck2(this,LixService);this._lixTreatments={}}_createClass2(LixService,[{key:"getTreatmentIsEnabled",value:function getTreatmentIsEnabled(lixKey){return this._lixTreatments[lixKey]!=="control"}},{key:"lixTreatments",set:function set(lixTreatments){this._lixTreatments=lixTreatments},get:function get(){return this._lixTreatments}}]);return LixService}();var lix=new LixService;var jSecure=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){var VERY_COMMON_ATTRS="aria-[a-z0-9_\\-]+|class|data-[a-z0-9_\\-]+|dir|id"+"|role|tabindex";var COMMON_ATTRS="alt|checked|colgroup|cols|colspan|disabled|height|hidden|maxlength"+"|method|multiple|name|placeholder|readonly|rel|required|rows|rowspan|spellcheck|target|title|width";var OTHER_ATTRS="border|caption|color|controls|coords|hreflang|label|lang|loop"+"|marginheight|marginwidth|preload|reversed|type|usemap|clear|headers|ismap"+"|start|datetime|accept|max|min|size|step";var TEXT_CONTENT_PROP=hasTextContent()?"textContent":"innerText";var FORMATTING_TAGS=["b","del","em","i","s","strong","sub","sup"];var ALLOWED_TAGS=FORMATTING_TAGS.concat(["a","abbr","address","area","article","aside","audio","bdi","bdo","big","blockquote","br","button","center","cite","code","datalist","dd","details","dfn","div","dl","dt","fieldset","figcaption","figure","font","footer","h1","h2","h3","h4","h5","h6","header","hgroup","hr","img","ins","kbd","label","legend","li","map","mark","marquee","nav","nobr","ol","p","pre","q","rp","rt","ruby","samp","section","small","source","span","strike","table","tbody","td","tfoot","th","thead","time","tr","u","ul","var","video","wbr"]);var ALLOWED_ATTRS=[VERY_COMMON_ATTRS,COMMON_ATTRS,OTHER_ATTRS].join("|");var ALLOWED_URL_ATTRS="href|src";var ALLOWED_URL_PREFIXES="data:image/(?:gif|jpg|jpeg|png);base64,";var constants__ALLOWED_URL_SCHEMES="https?|ftp|mailto";function ValueString(){}function hasTextContent(){if(typeof document==="undefined"){return true}return"textContent"in document.createElement("div")}var jSecure={ALLOWED_TAGS:ALLOWED_TAGS,FORMATTING_TAGS:FORMATTING_TAGS};var log=jSecure.log=function(message,level){level=level||"log";if(window&&window.jet&&level.toLowerCase()==="error"){try{throw new Error(message)}catch(e){window.jet.error(e)}}if(typeof console!=="undefined"&&typeof console[level]==="function"){console[level](message)}};var unsafe=jSecure.unsafe=function(text){return text};var htmlEncode=jSecure.htmlEncode=function(){var rHtmlChars=/[&<>"'\u0000\\=]/g,htmlCharsToEntities;htmlCharsToEntities={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","\0":"�","\\":"&#92;","=":"&#61;"};return function(str){if(str===null||str===undefined){return null}return str.toString().replace(rHtmlChars,function(match){return htmlCharsToEntities[match]})}}();var htmlUnencode=jSecure.htmlUnencode=function(){var helperDiv,rEntities=/&(?:([a-z0-9]+)|#x([\da-f]{1,6})|#(\d{1,8}));/gi,decodeNumericEntity;if(typeof document==="undefined"){return function(){throw new Error("document is undefined (i.e. you are probably in Node.js)")}}helperDiv=document.createElement("div");var decodedEntities={nbsp:" ",lt:"<",gt:">",amp:"&",quot:'"'};function decodeNamedEntity(entity){var decoded;if(decodedEntities.hasOwnProperty(entity)){return decodedEntities[entity]}helperDiv.innerHTML="&"+entity+";";decoded=helperDiv[TEXT_CONTENT_PROP];decodedEntities[entity]=decoded;return decoded}if(typeof String.fromCodePoint==="function"){decodeNumericEntity=function decodeNumericEntity(num){return String.fromCodePoint(num)}}else{decodeNumericEntity=function decodeNumericEntity(num){return num<=65535?String.fromCharCode(num):"�"}}return function htmlUnencode(encodedText){if(encodedText===null||encodedText===undefined){return null}return(encodedText+"").replace(rEntities,function(match,named,hex,dec){if(named){return decodeNamedEntity(named)}else if(hex||dec){return decodeNumericEntity(parseInt(hex||dec,hex?16:10)||65533)}return"�"})}}();var reEncode=jSecure.reEncode=function(string){return jSecure.htmlEncode(jSecure.htmlUnencode(string))};var text=jSecure.text=function(string){jSecure.log("jSecure.text() is deprecated. Please use jSecure.htmlEncode().","warn");return jSecure.htmlEncode(string)};var isArray=Array.isArray||function(arg){return Object.prototype.toString.call(arg)==="[object Array]"};function containsHTML(string){return string.indexOf("<")>-1||string.indexOf("&")>-1}function extend(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}return target}function flattenShallow(array){return array.reduce(function(newArray,el){return newArray.concat(el)},[])}var forEach=function(){if(Array.prototype.forEach){return function(array,fn){Array.prototype.forEach.call(array,fn)}}return function(array,fn){for(var i=0,length=array.length;i<length;i++){fn(array[i],i)}}}();var OPTIONAL_WHITESPACE="[ \t\r\n]*";var SOME_WHITESPACE="[ \t\r\n]+";function generateWhitelist(options){options=isArray(options)?options:[options];var tags,attrs,checkUrlAttrs,captureGroupCount=0,r="<(?!/?";r+="(?:";forEach(options,function(o,idx){tags=o.tags||ALLOWED_TAGS;attrs=o.attrs||ALLOWED_ATTRS;checkUrlAttrs=o.checkUrlAttrs||false;if(idx!==0){r+="|"}r+="(?:"+tags.join("|")+")";r+="(?:";r+=OPTIONAL_WHITESPACE;r+="|"+SOME_WHITESPACE;r+="(?:(?:";r+="(?:"+attrs+")"+"(?:=([\"'])[^'\"<>]*\\"+ ++captureGroupCount+")?";if(checkUrlAttrs){r+="|(?:"+ALLOWED_URL_ATTRS+")"+"=([\"'])(?:(?:"+constants__ALLOWED_URL_SCHEMES+")(?::|&#(?:58|x3a);)|(?:"+ALLOWED_URL_PREFIXES+")|[/.#?]|&#(?:35|4[67]|63|x(?:2[3ef]|3f));)[^'\"<>]*\\"+ ++captureGroupCount}r+=")"+OPTIONAL_WHITESPACE+")+";r+=")"});r+=")";r+="/?>)";return new RegExp(r,"i")}function createHTMLWhitelist(tags){tags=tags||ALLOWED_TAGS;return generateWhitelist({tags:tags,checkUrlAttrs:true})}function createCustomElementWhitelist(){var liIconCustomElement={tag:"li-icon",attrs:"active|color|size|type"};return generateWhitelist([{tags:ALLOWED_TAGS,checkUrlAttrs:true},{tags:[liIconCustomElement.tag],attrs:[VERY_COMMON_ATTRS,liIconCustomElement.attrs].join("|"),checkUrlAttrs:false}])}function isSafeHTML(string,options){var isSafe=false,rHtmlWhitelist;options=options||{};var customTagWhitelist=options.allowTags,checkCustomElement=options.hasCustomElementMarkup!==false;if(customTagWhitelist){rHtmlWhitelist=createHTMLWhitelist(customTagWhitelist);return!rHtmlWhitelist.test(string)}else if(checkCustomElement){return!isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT.test(string)}else{return!isSafeHTML.R_UNSAFE_HTML.test(string)}return isSafe}isSafeHTML.R_UNSAFE_HTML=createHTMLWhitelist();isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT=createCustomElementWhitelist();function stripTags(string){return string.replace(/<[^>]*>|[<>'"&\\]/g,"")}function processString(string,replacements,options){var replacedString=replacements?replacePlaceholders(string,replacements):string,origString=string;if(containsHTML(replacedString)&&!isSafeHTML(replacedString,options)){replacedString=stripTags(replacedString);log("Content contains non-whitelisted tags or attributes:\n"+"Content: "+origString,"error")}return replacedString}function replacePlaceholders(string,replacements){var processedReplacements={};return string.replace(/\{([^}]+)\}/g,function(match,placeholder){var replacement=match,isString,isNumber;if(processedReplacements.hasOwnProperty(placeholder)){return processedReplacements[placeholder]}if(replacements.hasOwnProperty(placeholder)){replacement=replacements[placeholder];isString=typeof replacement==="string";isNumber=typeof replacement==="number";if(!isString&&!(replacement instanceof ValueString)&&!isNumber){throw new Error("Only strings, numbers, and jSecure types are allowed as placeholder replacements.")}replacement=isString?htmlEncode(replacement):replacement.toString()}processedReplacements[placeholder]=replacement;return replacement})}function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first}var wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;var rtagName=/<([\w:]+)/;function buildFragment(htmls,context){var tag,wrap,fragment=context.createDocumentFragment(),wrapped,tmp,nodes=[],html,i,j,l;for(i=0,l=htmls.length;i<l;i++){html=htmls[i];if(html||html===0){if(typeof html==="string"){tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(html)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;wrapped=wrap[1]+html+wrap[2];jSecure.setElementContent(tmp,wrapped);j=wrap[0];while(j--){if(tmp.lastChild&&tmp.lastChild.nodeType===Node.ELEMENT_NODE){tmp=tmp.lastChild}}merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}else{merge(nodes,html.nodeType?[html]:html)}}}fragment.textContent="";i=0;html=nodes[i];while(html){fragment.appendChild(html);i++;html=nodes[i]}return fragment}function parseHTML(template,context){context=context||document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument(""):document;var parsed;if(typeof template==="string"){parsed=buildFragment([template],context)}else if(isArray(template)){parsed=buildFragment(template,context)}else{return template}return merge([],parsed.childNodes)}var processTemplate=jSecure.processTemplate=processString;var sanitizeHTML=jSecure.sanitizeHTML=function(htmlString){return processString(htmlString)};var setElementContent=jSecure.setElementContent=function(el,template,replacements){var processedTemplate=processString(template,replacements);if(containsHTML(processedTemplate)){el.innerHTML=processedTemplate}else{el[TEXT_CONTENT_PROP]=processedTemplate}return processedTemplate};jSecure.parseHTML=parseHTML;var parseSelector=jSecure.parseSelector=function(selector){var rQuickExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;if(typeof selector==="string"&&rQuickExpr.test(selector)){return[]}return selector};var UnsafeString=jSecure.UnsafeString=function(string,options){if(!(this instanceof UnsafeString)){return new UnsafeString(string,options)}options=options||{};options.allowTags=options.allowTags?flattenShallow(options.allowTags):jSecure.ALLOWED_TAGS;this._string=string;this._options=options};UnsafeString.prototype=extend(new ValueString,{toString:function toString(){var string=this._string,stringVal=this._stringVal,origString=string;if(stringVal!==undefined){return stringVal}if(!isSafeHTML(string,this._options)){origString=string;string=stripTags(string);jSecure.log("UnsafeString contains non-whitelisted tags or attributes.\n"+"String: "+origString,"error")}this._stringVal=string;return string}});var safeUrl__ALLOWED_URL_SCHEMES="https?|ftp|mailto|tel|blob";var RELATIVE_HASH_OR_QUERY_ONLY="[/.#?]";var rALL_SPACES=/ /g;var rBAD_CHARS=/[\s\u0000<>"]|%00/;var rBACKSLASH_SEMICOLON=/[\\;]/;var rDOT_DOT=/([.]|%2e){2}/i;var rAllowedStartOfUrl=new RegExp("^(?:"+safeUrl__ALLOWED_URL_SCHEMES+"|"+RELATIVE_HASH_OR_QUERY_ONLY+")");var sanitizeUrl=jSecure.sanitizeUrl=function(url){var testUrl=undefined;var defaultUrl="invalid://";if(typeof url!=="string"){jSecure.log("jSecure Warning: url must be a string","error");return defaultUrl}testUrl=url.trim();if(testUrl.indexOf(" ")>-1){jSecure.log("jSecure Warning: url should not contain spaces: "+url,"warn")}testUrl=testUrl.replace(rALL_SPACES,"+");if(!rAllowedStartOfUrl.test(testUrl)){jSecure.log("jSecure Error: URL should be absolute with allowed schemas, relative, a hash fragment or query string. "+url,"error");return defaultUrl}if(rBAD_CHARS.test(testUrl)){jSecure.log("jSecure Error: not valid url character found in url: "+url,"error");return defaultUrl}var path=testUrl.split("?")[0];if(rBACKSLASH_SEMICOLON.test(path)||rDOT_DOT.test(path)||rDOT_DOT.test(decodeURI(path))){jSecure.log("jSecure Error: malicious data found in url path: "+path,"error");return defaultUrl}return url};var _redirect=jSecure._redirect=function(sanitizedUrl){if(window){window.location.href=sanitizedUrl}};var redirect=jSecure.redirect=function(url){var sanitizedUrl=undefined;sanitizedUrl=jSecure.sanitizeUrl(url);if(sanitizedUrl===url){jSecure._redirect(sanitizedUrl)}};var index=jSecure;return index})});var learningUrl="https://www.linkedin.com/learning";function buildCourseUrl(courseSlug){return jSecure.sanitizeUrl(learningUrl+"/"+courseSlug)}function buildVideoUrl(courseSlug,videoSlug){return jSecure.sanitizeUrl(buildCourseUrl(courseSlug)+"/"+videoSlug)}function buildLinkedInShareUrl(shareUrl){var encodedShareUrl=encodeURIComponent(shareUrl);return jSecure.sanitizeUrl("https://www.linkedin.com/shareArticle?mini=true&url="+encodedShareUrl)}function buildFacebookShareUrl(shareUrl){var encodedShareUrl=encodeURIComponent(shareUrl);return jSecure.sanitizeUrl("https://facebook.com/sharer/sharer.php?u="+encodedShareUrl)}function buildTwitterShareUrl(shareUrl){var encodedShareUrl=encodeURIComponent(shareUrl);return jSecure.sanitizeUrl("https://twitter.com/intent/tweet?url="+encodedShareUrl)}function buildAuthorUrl(authorSlug){return jSecure.sanitizeUrl(learningUrl+"/instructors/"+authorSlug)}function getQueryParams(){var queryString=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var output={};var query=queryString;if(!query){query=window.location.search}if(query.indexOf("?")>-1){query=query.split("?")[1]}query=query.split("&");if(query.length){query.forEach(function(param){if(param){var item=param.split("=");var key=item[0];var value=item[1]&&decodeURIComponent(item[1]);output[key]=value}})}return output}function addQueryParam(path,key,value){var config=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{shouldEncode:true};var newValue=value;var newPath=path;if(!key){return newPath}if(newValue===undefined||newValue===null){newValue=""}if(newValue instanceof Array){newValue=newValue.join(",")}if((typeof newValue==="undefined"?"undefined":_typeof2(newValue))==="object"){newValue=newValue.toString()}var fragment="";var fragmentCharPosition=newPath.indexOf("#");if(fragmentCharPosition!==-1){var _newPath$split=newPath.split("#");var _newPath$split2=_slicedToArray2(_newPath$split,2);newPath=_newPath$split2[0];fragment=_newPath$split2[1];fragment="#"+fragment}var paramToBeAdded=null;paramToBeAdded=key+"="+(config.shouldEncode?encodeURIComponent(newValue):newValue);var paramStartPosition=newPath.indexOf("?");var paramSeperatorChar="&";if(paramStartPosition===-1){paramSeperatorChar="?"}return""+newPath+paramSeperatorChar+paramToBeAdded+fragment}var trkKey="trk";var claim="unknown";var queryParams=getQueryParams();if(queryParams&&queryParams.claim){claim=queryParams.claim}function appendTrk(url,trkType){return addQueryParam(url,trkKey,"embed_"+claim+"_"+trkType+"_learning")}var jSecure$1=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){var VERY_COMMON_ATTRS="aria-[a-z0-9_\\-]+|class|data-[a-z0-9_\\-]+|dir|id"+"|role|tabindex";var COMMON_ATTRS="alt|checked|colgroup|cols|colspan|disabled|height|hidden|maxlength"+"|method|multiple|name|placeholder|readonly|rel|required|rows|rowspan|spellcheck|target|title|width";var OTHER_ATTRS="border|caption|color|controls|coords|hreflang|label|lang|loop"+"|marginheight|marginwidth|preload|reversed|type|usemap|clear|headers|ismap"+"|start|datetime|accept|max|min|size|step|style|cellspacing|cellpadding";var TEXT_CONTENT_PROP=hasTextContent()?"textContent":"innerText";var FORMATTING_TAGS=["b","del","em","i","s","strong","sub","sup"];var ALLOWED_TAGS=FORMATTING_TAGS.concat(["a","abbr","address","area","article","aside","audio","bdi","bdo","big","blockquote","br","button","center","cite","code","datalist","dd","details","dfn","div","dl","dt","fieldset","figcaption","figure","font","footer","h1","h2","h3","h4","h5","h6","header","hgroup","hr","img","ins","kbd","label","legend","li","map","mark","marquee","nav","nobr","ol","p","pre","q","rp","rt","ruby","samp","section","small","source","span","strike","table","tbody","td","tfoot","th","thead","time","tr","u","ul","var","video","wbr"]);var ALLOWED_ATTRS=[VERY_COMMON_ATTRS,COMMON_ATTRS,OTHER_ATTRS].join("|");var ALLOWED_URL_ATTRS="href|src";var ALLOWED_URL_PREFIXES="data:image/(?:gif|jpg|jpeg|png);base64,";var constants__ALLOWED_URL_SCHEMES="https?|ftp|mailto|invalid";function ValueString(){}function hasTextContent(){if(typeof document==="undefined"){return true}return"textContent"in document.createElement("div")}function log(message,level){level=level||"log";if(window&&window.jet&&level.toLowerCase()==="error"){try{throw new Error(message)}catch(e){try{window.jet.error(e)}catch(recatch){}}}if(typeof console!=="undefined"&&typeof console[level]==="function"){console[level](message)}}var htmlEncode=function(){var rHtmlChars=/[&<>"'\u0000\\=]/g,htmlCharsToEntities;htmlCharsToEntities={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","\0":"�","\\":"&#92;","=":"&#61;"};return function(str){if(str===null||typeof str==="undefined"){return null}return str.toString().replace(rHtmlChars,function(match){return htmlCharsToEntities[match]})}}();var htmlUnencode=function(){var helperDiv,rEntities=/&(?:([a-z0-9]+)|#x([\da-f]{1,6})|#(\d{1,8}));/gi,decodeNumericEntity;if(typeof document==="undefined"){return function(){throw new Error("document is undefined (i.e. you are probably in Node.js)")}}helperDiv=document.createElement("div");var decodedEntities={nbsp:" ",lt:"<",gt:">",amp:"&",quot:'"'};function decodeNamedEntity(entity){var decoded;if(decodedEntities.hasOwnProperty(entity)){return decodedEntities[entity]}helperDiv.innerHTML="&"+entity+";";decoded=helperDiv[TEXT_CONTENT_PROP];decodedEntities[entity]=decoded;return decoded}if(typeof String.fromCodePoint==="function"){decodeNumericEntity=function decodeNumericEntity(num){return String.fromCodePoint(num)}}else{decodeNumericEntity=function decodeNumericEntity(num){return num<=65535?String.fromCharCode(num):"�"}}return function htmlUnencode(encodedText){if(encodedText===null||typeof encodedText==="undefined"){return null}return(encodedText+"").replace(rEntities,function(match,named,hex,dec){if(named){return decodeNamedEntity(named)}else if(hex||dec){return decodeNumericEntity(parseInt(hex||dec,hex?16:10)||65533)}return"�"})}}();function reEncode(string){return htmlEncode(htmlUnencode(string))}function text(string){log("jSecure.text() is deprecated. Please use jSecure.htmlEncode().","warn");return htmlEncode(string)}var isArray=Array.isArray||function(arg){return Object.prototype.toString.call(arg)==="[object Array]"};function containsHTML(string){return/[<&]/.test(string)}function extend(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}return target}function flattenShallow(array){return array.reduce(function(newArray,el){return newArray.concat(el)},[])}var forEach=function(){if(Array.prototype.forEach){return function(array,fn){Array.prototype.forEach.call(array,fn)}}return function(array,fn){for(var i=0,length=array.length;i<length;i++){fn(array[i],i)}}}();var OPTIONAL_WHITESPACE="[ \t\r\n]*";var SOME_WHITESPACE="[ \t\r\n]+";function generateWhitelist(options){options=isArray(options)?options:[options];var tags,attrs,checkUrlAttrs,captureGroupCount=0,r="<(?!/?";r+="(?:";forEach(options,function(o,idx){tags=o.tags||ALLOWED_TAGS;attrs=o.attrs||ALLOWED_ATTRS;checkUrlAttrs=o.checkUrlAttrs||false;if(idx!==0){r+="|"}r+="(?:"+tags.join("|")+")";r+="(?:";r+=OPTIONAL_WHITESPACE;r+="|"+SOME_WHITESPACE;r+="(?:(?:";r+="(?:"+attrs+")"+"(?:=([\"'])[^'\"<>]*\\"+ ++captureGroupCount+")?";if(checkUrlAttrs){r+="|(?:"+ALLOWED_URL_ATTRS+")"+"=([\"'])(?:(?:"+constants__ALLOWED_URL_SCHEMES+")(?::|&#(?:58|x3a);)|(?:"+ALLOWED_URL_PREFIXES+")|[/.#?]|&#(?:35|4[67]|63|x(?:2[3ef]|3f));)[^'\"<>]*\\"+ ++captureGroupCount}r+=")"+OPTIONAL_WHITESPACE+")+";r+=")"});r+=")";r+="/?>)";return new RegExp(r,"i")}function createHTMLWhitelist(tags){tags=tags||ALLOWED_TAGS;return generateWhitelist({tags:tags,checkUrlAttrs:true})}function createCustomElementWhitelist(){var liIconCustomElement={tag:"li-icon",attrs:"active|a11y-text|animate|color|size|type"};return generateWhitelist([{tags:ALLOWED_TAGS,checkUrlAttrs:true},{tags:[liIconCustomElement.tag],attrs:[VERY_COMMON_ATTRS,liIconCustomElement.attrs].join("|"),checkUrlAttrs:false}])}function isSafeHTML(string,options){var isSafe=false,rHtmlWhitelist;options=options||{};var customTagWhitelist=options.allowTags,checkCustomElement=options.hasCustomElementMarkup!==false;if(customTagWhitelist){rHtmlWhitelist=createHTMLWhitelist(customTagWhitelist);return!rHtmlWhitelist.test(string)}else if(checkCustomElement){return!isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT.test(string)}else{return!isSafeHTML.R_UNSAFE_HTML.test(string)}return isSafe}isSafeHTML.R_UNSAFE_HTML=createHTMLWhitelist();isSafeHTML.R_UNSAFE_CUSTOM_ELEMENT=createCustomElementWhitelist();function stripTags(string){return string.replace(/<[^>]*>|[<>'"&\\]/g,"")}function processString(string,replacements,options){if(string===null||typeof string==="undefined"){return null}string=string.toString();var replacedString=replacements?replacePlaceholders(string,replacements):string,origString=string;if(containsHTML(replacedString)&&!isSafeHTML(replacedString,options)){replacedString=stripTags(replacedString);log("Content contains non-whitelisted tags or attributes:\n"+"Content: "+origString,"error")}return replacedString}function replacePlaceholders(string,replacements){var processedReplacements={};return string.replace(/\{([^}]+)\}/g,function(match,placeholder){var replacement=match,isString,isNumber;if(processedReplacements.hasOwnProperty(placeholder)){return processedReplacements[placeholder]}if(replacements.hasOwnProperty(placeholder)){replacement=replacements[placeholder];isString=typeof replacement==="string";isNumber=typeof replacement==="number";if(!isString&&!(replacement instanceof ValueString)&&!isNumber){throw new Error("Only strings, numbers, and jSecure types are allowed as placeholder replacements.")}replacement=isString?htmlEncode(replacement):replacement.toString()}processedReplacements[placeholder]=replacement;return replacement})}function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first}var wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;
wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;var rtagName=/<([\w:]+)/;function buildFragment(htmls,context){var tag,wrap,fragment=context.createDocumentFragment(),wrapped,tmp,nodes=[],html,i,j,l;for(i=0,l=htmls.length;i<l;i++){html=htmls[i];if(html||html===0){if(typeof html==="string"){tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(html)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;wrapped=wrap[1]+html+wrap[2];setElementContent(tmp,wrapped);j=wrap[0];while(j--){if(tmp.lastChild&&tmp.lastChild.nodeType===Node.ELEMENT_NODE){tmp=tmp.lastChild}}merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}else{merge(nodes,html.nodeType?[html]:html)}}}fragment.textContent="";i=0;html=nodes[i];while(html){fragment.appendChild(html);i++;html=nodes[i]}return fragment}function parseHTML(template,context){context=context||document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument(""):document;var parsed;if(typeof template==="string"){parsed=buildFragment([template],context)}else if(isArray(template)){parsed=buildFragment(template,context)}else{return template}return merge([],parsed.childNodes)}var processTemplate=processString;var sanitizeHTML=processString;function setElementContent(el,template,replacements){var processedTemplate=processString(template,replacements);if(containsHTML(processedTemplate)){el.innerHTML=processedTemplate}else{el[TEXT_CONTENT_PROP]=processedTemplate}return processedTemplate}function parseSelector(selector){var rQuickExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;if(typeof selector==="string"&&rQuickExpr.test(selector)){return[]}return selector}function unsafe(text){return text}function UnsafeString(string,options){if(!(this instanceof UnsafeString)){return new UnsafeString(string,options)}options=options||{};options.allowTags=options.allowTags?flattenShallow(options.allowTags):null;this._string=string;this._options=options}UnsafeString.prototype=extend(new ValueString,{toString:function toString(){var string=this._string,stringVal=this._stringVal,origString=string;if(stringVal!==undefined){return stringVal}if(!isSafeHTML(string,this._options)){origString=string;string=stripTags(string);log("UnsafeString contains non-whitelisted tags or attributes.\n"+"String: "+origString,"error")}this._stringVal=string;return string}});function mk(quasis){for(var _len=arguments.length,params=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){params[_key-1]=arguments[_key]}var html="",param=undefined,l=params.length;if(quasis){quasis.forEach(function(string,i){html+=string;if(i<l){param=params[i];if(param instanceof UnsafeString){html+=param}else{html+=htmlEncode(param)}}})}return sanitizeHTML(html)}var _url__ALLOWED_URL_SCHEMES="https?|ftp|mailto|tel|sms|blob|voyager|android-app|linkedin|chrome-extension|invalid";var ALLOWED_DATA_URI_SCHEMES="data:(?:(?:image/(?:gif|jpe?g|png))|(?:application/x-font-woff)|(?:font/(?:opentype|ttf)))[;,]";var RELATIVE_HASH_OR_QUERY_ONLY="[/.#?]";var rALL_SPACES=/ /g;var rBAD_CHARS=/[\s\u0000<>"]|%00/;var rBACKSLASH=/\\/;var rDOT_DOT=/([.]|%2e){2}/i;var rAllowedStartOfUrl=new RegExp("^(?:"+_url__ALLOWED_URL_SCHEMES+"|"+ALLOWED_DATA_URI_SCHEMES+"|"+RELATIVE_HASH_OR_QUERY_ONLY+")");function sanitizeUrl(url){var testUrl=undefined;var defaultUrl="invalid://";if(typeof url!=="string"){log("jSecure Warning: url must be a string","error");return defaultUrl}testUrl=url.trim();if(testUrl.indexOf(" ")>-1){log("jSecure Warning: url should not contain spaces: "+url,"warn");testUrl=testUrl.replace(rALL_SPACES,"+")}if(!rAllowedStartOfUrl.test(testUrl)){log("jSecure Error: URL should be absolute with allowed schemas, relative, a hash fragment or query string. "+url,"error");return defaultUrl}if(rBAD_CHARS.test(testUrl)){log("jSecure Error: not valid url character found in url: "+url,"error");return defaultUrl}var path=testUrl.split("?")[0];if(rBACKSLASH.test(path)||rDOT_DOT.test(path)||rDOT_DOT.test(decodeURI(path))){log("jSecure Error: malicious data found in url path: "+path,"error");return defaultUrl}return url}var _redirector={redirect:function redirect(sanitizedUrl){if(window){window.location.href=sanitizedUrl}}};function _url__redirect(url){var sanitizedUrl=sanitizeUrl(url);if(sanitizedUrl===url){_redirector.redirect(sanitizedUrl)}}var index={ALLOWED_TAGS:ALLOWED_TAGS,FORMATTING_TAGS:FORMATTING_TAGS,htmlEncode:htmlEncode,htmlUnencode:htmlUnencode,log:log,mk:mk,parseHTML:parseHTML,parseSelector:parseSelector,processTemplate:processTemplate,reEncode:reEncode,_redirector:_redirector,redirect:_url__redirect,sanitizeHTML:sanitizeHTML,sanitizeUrl:sanitizeUrl,setElementContent:setElementContent,text:text,unsafe:unsafe,UnsafeString:UnsafeString};return index})});function initializeEmbed(_ref9){var _ref9$course=_ref9.course,course=_ref9$course===undefined?{}:_ref9$course,_ref9$video=_ref9.video,video=_ref9$video===undefined?{}:_ref9$video,_ref9$similarCourses=_ref9.similarCourses,similarCourses=_ref9$similarCourses===undefined?[]:_ref9$similarCourses;var watchCourse=course;var withMediaPlayer=lix.getTreatmentIsEnabled("learning.web.embed.use-media-player");watchCourse.url=jSecure$1.sanitizeUrl(appendTrk(watchCourse.url,"thiscourse"));var html=Templates["video-player"]({course:watchCourse,relatedCourses:similarCourses,video:video,withShare:true,withMediaPlayer:withMediaPlayer,withTopToolbar:true,isFeedPlayer:false});if(!withMediaPlayer){var courseUrl=course.url;html+=Templates["share-overlay"]({urls:{courseUrl:courseUrl,linkedinUrl:buildLinkedInShareUrl(courseUrl),facebookUrl:buildFacebookShareUrl(courseUrl),twitterUrl:buildTwitterShareUrl(courseUrl)}});watchCourse.url=jSecure$1.sanitizeUrl(appendTrk(watchCourse.url,"thiscourse"));html+=Templates["endcards/embed-endcard"]({course:watchCourse,relatedCourses:similarCourses})}return html}var trkKey$1="trk";var autoplayKey="autoplay";function initializeFeed(_ref10){var _ref10$course=_ref10.course,course=_ref10$course===undefined?{}:_ref10$course,_ref10$video=_ref10.video,video=_ref10$video===undefined?{}:_ref10$video,_ref10$nextVideo=_ref10.nextVideo,nextVideo=_ref10$nextVideo===undefined?{}:_ref10$nextVideo;var watchCourse=course;var trkType="feed-cymbii-"+(isMobileDevice()?"mw":"d")+"_learning_embed_endplate_explore_learning";var watchCourseUrl=watchCourse.url;watchCourseUrl=addQueryParam(watchCourseUrl,trkKey$1,trkType);watchCourseUrl=addQueryParam(watchCourseUrl,autoplayKey,true);watchCourse.url=jSecure$1.sanitizeUrl(watchCourseUrl);var html=Templates["video-player"]({course:watchCourse,video:video,nextVideo:nextVideo,hasNextVideo:!!nextVideo.slug,withMediaPlayer:false,withTopToolbar:false,isFeedPlayer:true});html+=Templates["endcards/feed-endcard"]({course:watchCourse,nextVideo:nextVideo,hasNextVideo:!!nextVideo.slug});return html}var FUNC_ERROR_TEXT="Expected a function";function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}var lodash__basedelay=baseDelay;var FUNC_ERROR_TEXT$1="Expected a function";var nativeMax=Math.max;function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT$1)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}var lodash_restparam=restParam;var defer=lodash_restparam(function(func,args){return lodash__basedelay(func,1,args)});var lodash_defer=defer;function noop$2(){}var lodash_noop=noop$2;var head$1={task:void 0,next:null};var tail=head$1;var flushing=false;var requestFlush=void 0;var isNodeJS=false;function flush(){while(head$1.next){head$1=head$1.next;var task=head$1.task;head$1.task=void 0;var domain=head$1.domain;if(domain){head$1.domain=void 0;domain.enter()}try{task()}catch(e){if(isNodeJS){if(domain){domain.exit()}setTimeout(flush,0);if(domain){domain.enter()}throw e}else{setTimeout(function(){throw e},0)}}if(domain){domain.exit()}}flushing=false}if(typeof process!=="undefined"&&process.nextTick){isNodeJS=true;requestFlush=function requestFlush(){process.nextTick(flush)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){requestFlush=setImmediate.bind(window,flush)}else{requestFlush=function requestFlush(){setImmediate(flush)}}}else if(typeof MessageChannel!=="undefined"){var channel=new MessageChannel;channel.port1.onmessage=flush;requestFlush=function requestFlush(){channel.port2.postMessage(0)}}else{requestFlush=function requestFlush(){setTimeout(flush,0)}}function asap(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null};if(!flushing){flushing=true;requestFlush()}}var asap_1=asap;var core=Promise$1;function Promise$1(fn){if(_typeof2(this)!=="object")throw new TypeError("Promises must be constructed via new");if(typeof fn!=="function")throw new TypeError("not a function");var state=null;var value=null;var deferreds=[];var self=this;this.then=function(onFulfilled,onRejected){return new self.constructor(function(resolve,reject){handle(new Handler(onFulfilled,onRejected,resolve,reject))})};function handle(deferred){if(state===null){deferreds.push(deferred);return}asap_1(function(){var cb=state?deferred.onFulfilled:deferred.onRejected;if(cb===null){(state?deferred.resolve:deferred.reject)(value);return}var ret;try{ret=cb(value)}catch(e){deferred.reject(e);return}deferred.resolve(ret)})}function resolve(newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&((typeof newValue==="undefined"?"undefined":_typeof2(newValue))==="object"||typeof newValue==="function")){var then=newValue.then;if(typeof then==="function"){doResolve(then.bind(newValue),resolve,reject);return}}state=true;value=newValue;finale()}catch(e){reject(e)}}function reject(newValue){state=false;value=newValue;finale()}function finale(){for(var i=0,len=deferreds.length;i<len;i++){handle(deferreds[i])}deferreds=null}doResolve(fn,resolve,reject)}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.resolve=resolve;this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=false;try{fn(function(value){if(done)return;done=true;onFulfilled(value)},function(reason){if(done)return;done=true;onRejected(reason)})}catch(ex){if(done)return;done=true;onRejected(ex)}}core.prototype.done=function(onFulfilled,onRejected){var self=arguments.length?this.then.apply(this,arguments):this;self.then(null,function(err){asap_1(function(){throw err})})};function ValuePromise(value){this.then=function(onFulfilled){if(typeof onFulfilled!=="function")return this;return new core(function(resolve,reject){asap_1(function(){try{resolve(onFulfilled(value))}catch(ex){reject(ex)}})})}}ValuePromise.prototype=core.prototype;var TRUE=new ValuePromise(true);var FALSE=new ValuePromise(false);var NULL=new ValuePromise(null);var UNDEFINED=new ValuePromise(undefined);var ZERO=new ValuePromise(0);var EMPTYSTRING=new ValuePromise("");core.resolve=function(value){if(value instanceof core)return value;if(value===null)return NULL;if(value===undefined)return UNDEFINED;if(value===true)return TRUE;if(value===false)return FALSE;if(value===0)return ZERO;if(value==="")return EMPTYSTRING;if((typeof value==="undefined"?"undefined":_typeof2(value))==="object"||typeof value==="function"){try{var then=value.then;if(typeof then==="function"){return new core(then.bind(value))}}catch(ex){return new core(function(resolve,reject){reject(ex)})}}return new ValuePromise(value)};core.all=function(arr){var args=Array.prototype.slice.call(arr);return new core(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&((typeof val==="undefined"?"undefined":_typeof2(val))==="object"||typeof val==="function")){var then=val.then;if(typeof then==="function"){then.call(val,function(val){res(i,val)},reject);return}}args[i]=val;if(--remaining===0){resolve(args)}}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};core.reject=function(value){return new core(function(resolve,reject){reject(value)})};core.race=function(values){return new core(function(resolve,reject){values.forEach(function(value){core.resolve(value).then(resolve,reject)})})};core.prototype["catch"]=function(onRejected){return this.then(null,onRejected)};core.denodeify=function(fn,argumentCount){argumentCount=argumentCount||Infinity;return function(){var self=this;var args=Array.prototype.slice.call(arguments);return new core(function(resolve,reject){while(args.length&&args.length>argumentCount){args.pop()}args.push(function(err,res){if(err)reject(err);else resolve(res)});var res=fn.apply(self,args);if(res&&((typeof res==="undefined"?"undefined":_typeof2(res))==="object"||typeof res==="function")&&typeof res.then==="function"){resolve(res)}})}};core.nodeify=function(fn){return function(){var args=Array.prototype.slice.call(arguments);var callback=typeof args[args.length-1]==="function"?args.pop():null;var ctx=this;try{return fn.apply(this,arguments).nodeify(callback,ctx)}catch(ex){if(callback===null||typeof callback=="undefined"){return new core(function(resolve,reject){reject(ex)})}else{asap_1(function(){callback.call(ctx,ex)})}}}};core.prototype.nodeify=function(callback,ctx){if(typeof callback!="function")return this;this.then(function(value){asap_1(function(){callback.call(ctx,null,value)})},function(err){asap_1(function(){callback.call(ctx,err)})})};var promise=core;var dom$6=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.createContentLoadedPromise=createContentLoadedPromise;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);function createContentLoadedPromise(){var doc=arguments.length<=0||arguments[0]===undefined?document:arguments[0];return new _promise2["default"](function(resolve){if(doc.readyState==="interactive"||doc.readyState==="complete"){resolve(doc)}else{doc.addEventListener("DOMContentLoaded",function(){return resolve(doc)})}})}var onContentLoaded=createContentLoadedPromise(document);exports.onContentLoaded=onContentLoaded});unwrapExports(dom$6);var dom_1=dom$6.createContentLoadedPromise;var dom_2=dom$6.onContentLoaded;var eventemitter3=createCommonjsModule(function(module){var has=Object.prototype.hasOwnProperty;var prefix=typeof Object.create!=="function"?"~":false;function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false}function EventEmitter(){}EventEmitter.prototype._events=undefined;EventEmitter.prototype.eventNames=function eventNames(){var events=this._events,names=[],name;if(!events)return names;for(name in events){if(has.call(events,name))names.push(prefix?name.slice(1):name)}if(Object.getOwnPropertySymbols){return names.concat(Object.getOwnPropertySymbols(events))}return names};EventEmitter.prototype.listeners=function listeners(event,exists){var evt=prefix?prefix+event:event,available=this._events&&this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++){ee[i]=available[i].fn}return ee};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if("function"===typeof listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i]}listeners.fn.apply(listeners.context,args)}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j]}listeners[i].fn.apply(listeners[i].context,args)}}}return true};EventEmitter.prototype.on=function on(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.once=function once(event,fn,context){var listener=new EE(fn,context||this,true),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return this;var listeners=this._events[evt],events=[];if(fn){if(listeners.fn){if(listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context){events.push(listeners)}}else{for(var i=0,length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i])}}}}if(events.length){this._events[evt]=events.length===1?events[0]:events}else{delete this._events[evt]}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){if(!this._events)return this;if(event)delete this._events[prefix?prefix+event:event];else this._events=prefix?{}:Object.create(null);return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prefixed=prefix;{module.exports=EventEmitter}});var lib=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.mixin=mixin;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function entries(object){return Object.getOwnPropertyNames(object).map(function(key){return[key,object[key]]})}var Mixin=exports.Mixin=function(){function Mixin(){_classCallCheck(this,Mixin)}_createClass(Mixin,null,[{key:"mixin",value:function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var MixedIn=arguments.length<=1||arguments[1]===undefined?this:arguments[1];for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}var instance=new(Function.prototype.bind.apply(MixedIn,[null].concat(args)));entries(MixedIn.prototype).filter(function(_ref){var _ref2=_slicedToArray(_ref,2);var methodName=_ref2[0];var method=_ref2[1];return typeof method==="function"&&methodName!=="constructor"}).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2);var methodName=_ref4[0];var method=_ref4[1];return target[methodName]=method.bind(instance)});return target}}]);return Mixin}();function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var MixedIn=arguments.length<=1||arguments[1]===undefined?Mixin:arguments[1];for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}return Mixin.mixin.apply(Mixin,[target,MixedIn].concat(args))}});unwrapExports(lib);var lib_1=lib.mixin;var lib_2=lib.Mixin;var events=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.mixin=mixin;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _eventemitter32=_interopRequireDefault(eventemitter3);function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return(0,lib.mixin)(target,_eventemitter32["default"])}});unwrapExports(events);var events_1=events.mixin;var fn=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.imperative=imperative;var call=Function.prototype.call;function imperative(method){return function(){return call.apply(method,arguments)}}});unwrapExports(fn);var fn_1=fn.imperative;var lang=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.isDescendantClass=isDescendantClass;exports.assign=assign;exports.defaults=defaults;exports.entries=entries;function isDescendantClass(child,ancestor){return Boolean(ancestor&&child&&child.prototype&&child.prototype instanceof ancestor)}function assign(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var key=_ref2[0];var value=_ref2[1];target[key]=value});return target},target)}var hasOwn=(0,fn.imperative)(Object.prototype.hasOwnProperty);function defaults(target){for(var _len2=arguments.length,sources=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){sources[_key2-1]=arguments[_key2]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref3){var _ref32=_slicedToArray(_ref3,2);var key=_ref32[0];var value=_ref32[1];if(!hasOwn(target,key)){target[key]=value}});return target},target)}var slice=(0,fn.imperative)(Array.prototype.slice);var toArray=function toArray(o){return slice(o)};exports.toArray=toArray;function entries(o){return Object.keys(o).map(function(key){return[key,o[key]]})}});unwrapExports(lang);var lang_1=lang.isDescendantClass;var lang_2=lang.assign;var lang_3=lang.defaults;var lang_4=lang.entries;var lang_5=lang.toArray;var string=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.capitalize=capitalize;function capitalize(word){if(typeof word==="string"){return word.charAt(0).toUpperCase()+word.substring(1)}return""}});unwrapExports(string);var string_1=string.capitalize;var li=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getUrn=getUrn;exports.getPageKey=getPageKey;var urnMap={clip:"slideShareClip",clipboard:"slideShareClipboard",guest:"slideShareGuest",slideshow:"slideShareSlideshow",user:"slideShareUser"};var urnPrefix="urn:li";function getUrn(entityType,entityId){if(!entityType){return null}var urn=urnMap[entityType];if(!urn){urn="slideShare"+(0,string.capitalize)(entityType)}return[urnPrefix,urn,entityId].join(":")}function getPageKey(){var el=arguments.length<=0||arguments[0]===undefined?document.body:arguments[0];var match=/^pagekey-(.*)/.exec(el.id);if(match&&match[1]){return match[1]}}});unwrapExports(li);var li_1=li.getUrn;var li_2=li.getPageKey;var Headers_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var nameToKey=function nameToKey(name){return name.toLowerCase()};var Headers=function(){function Headers(){_classCallCheck(this,Headers);this._values=Object.create(null)}_createClass(Headers,[{key:"append",value:function append(name,value){var key=nameToKey(name);if(!this._values[key]){this._values[key]=[]}this._values[key].push(value)}},{key:"keys",value:function keys(){return Object.keys(this._values)}},{key:"getAll",value:function getAll(name){var key=nameToKey(name);return this._values[key].slice(0)}},{key:"entries",value:function entries(){var _this=this;return this.keys().reduce(function(entries,key){_this.getAll(key).forEach(function(value){return entries.push([key,value])});return entries},[])}},{key:"addTo",value:function addTo(xhr){this.entries().forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var name=_ref2[0];var value=_ref2[1];return xhr.setRequestHeader(name,value)})}},{key:"nameToKey",value:function nameToKey(name){return name.toLowerCase()}}],[{key:"create",value:function create(obj){var objEntries=obj instanceof Headers?obj.entries():(0,lang.entries)(obj);return objEntries.reduce(function(headers,_ref3){var _ref32=_slicedToArray(_ref3,2);var name=_ref32[0];var value=_ref32[1];headers.append(name,value);return headers},new Headers)}}]);return Headers}();exports["default"]=Headers;module.exports=exports["default"]});unwrapExports(Headers_1);var net=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.request=request;exports.requestXml=requestXml;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);var _netHeaders2=_interopRequireDefault(Headers_1);exports.Headers=_netHeaders2["default"];function request(url){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref$method=_ref.method;var method=_ref$method===undefined?"get":_ref$method;var body=_ref.body;var _ref$headers=_ref.headers;var headers=_ref$headers===undefined?{}:_ref$headers;var xhr=new XMLHttpRequest;xhr.open(method,url,true);_netHeaders2["default"].create(headers).addTo(xhr);var promise$$1=new _promise2["default"](function(resolve,reject){xhr.addEventListener("readystatechange",function(){if(this.readyState===4){if(this.status>=200&&this.status<400){resolve(this)}else{reject(this)}}})});xhr.send(body);return promise$$1}function requestXml(){return request.apply(undefined,arguments).then(function(xhr){return xhr.responseXML})}});unwrapExports(net);var net_1=net.request;var net_2=net.requestXml;var net_3=net.Headers;var svg=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getSvgUrls=getSvgUrls;exports.injectSvg=injectSvg;exports.loadSvgs=loadSvgs;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);function getSvgUrls(){var el=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var metaTagName=arguments.length<=1||arguments[1]===undefined?"ss-svg-icons":arguments[1];var metas=(0,lang.toArray)(el.querySelectorAll('meta[name="'+metaTagName+'"]'));return metas.map(function(meta){return meta.getAttribute("content")})}function injectSvg(xml){var el=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var firstChild=xml.firstChild;firstChild.style.display="none";el.insertBefore(firstChild,el.firstChild)}function loadSvgs(){var searchEl=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var destEl=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var svgPromises=getSvgUrls(searchEl).map(function(url){return(0,net.requestXml)(url).then(function(svg){return injectSvg(svg,destEl)})});return _promise2["default"].all(svgPromises)}});unwrapExports(svg);var svg_1=svg.getSvgUrls;var svg_2=svg.injectSvg;var svg_3=svg.loadSvgs;var tracking=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getGlobalTrackingUrl=getGlobalTrackingUrl;var metaTagName="globalTrackingUrl";function getGlobalTrackingUrl(){var meta=document.querySelector('meta[name="'+metaTagName+'"]');return meta?meta.getAttribute("content"):null}});unwrapExports(tracking);var tracking_1=tracking.getGlobalTrackingUrl;var punycode=createCommonjsModule(function(module,exports){(function(root){var freeExports="object"=="object"&&exports&&!exports.nodeType&&exports;var freeModule="object"=="object"&&module&&!module.nodeType&&module;var freeGlobal=(typeof commonjsGlobal==="undefined"?"undefined":_typeof2(commonjsGlobal))=="object"&&commonjsGlobal;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)",
"invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof undefined=="function"&&_typeof2(undefined.amd)=="object"&&undefined.amd){undefined("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(commonjsGlobal)});function hasOwnProperty$2(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var decode=function decode(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty$2(obj,k)){obj[k]=v}else if(Array.isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var stringifyPrimitive=function stringifyPrimitive(v){switch(typeof v==="undefined"?"undefined":_typeof2(v)){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};var encode=function encode(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if((typeof obj==="undefined"?"undefined":_typeof2(obj))==="object"){return Object.keys(obj).map(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(Array.isArray(obj[k])){return obj[k].map(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var querystring=createCommonjsModule(function(module,exports){exports.decode=exports.parse=decode;exports.encode=exports.stringify=encode});var querystring_1=querystring.decode;var querystring_2=querystring.parse;var querystring_3=querystring.encode;var querystring_4=querystring.stringify;var parse$2=urlParse;var resolve=urlResolve;var resolveObject=urlResolveObject;var format=urlFormat;var Url_1=Url$1;function Url$1(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true};function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject$2(url)&&url instanceof Url$1)return url;var u=new Url$1;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url$1.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+(typeof url==="undefined"?"undefined":_typeof2(url)))}var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){var domainArray=this.hostname.split(".");var newOut=[];for(var i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(isString(obj))obj=urlParse(obj);if(!(obj instanceof Url$1))return Url$1.prototype.format.call(obj);return obj.format()}Url$1.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&isObject$2(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url$1.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url$1.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url$1;rel.parse(relative,false,true);relative=rel}var result=new Url$1;Object.keys(this).forEach(function(k){result[k]=this[k]},this);result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){Object.keys(relative).forEach(function(k){if(k!=="protocol")result[k]=relative[k]});if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){Object.keys(relative).forEach(function(k){result[k]=relative[k]});result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift())){}if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last=="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url$1.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host};function isString(arg){return typeof arg==="string"}function isObject$2(arg){return(typeof arg==="undefined"?"undefined":_typeof2(arg))==="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}var url={parse:parse$2,resolve:resolve,resolveObject:resolveObject,format:format,Url:Url_1};var url$1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getTrackingCode=getTrackingCode;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _url2=_interopRequireDefault(url);function getTrackingCode(link){if(typeof link!=="string"){throw new TypeError("link argument must be a string; found "+(typeof link==="undefined"?"undefined":_typeof2(link)))}var query=_url2["default"].parse(link,true).query;if(query){var trk=query.trk;if(trk){return Array.isArray(trk)?trk[trk.length-1]:trk}}return null}});unwrapExports(url$1);var url_1=url$1.getTrackingCode;var cjs=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var dom=_interopRequireWildcard(dom$6);var events$$1=_interopRequireWildcard(events);var fn$$1=_interopRequireWildcard(fn);var lang$$1=_interopRequireWildcard(lang);var li$$1=_interopRequireWildcard(li);var net$$1=_interopRequireWildcard(net);var string$$1=_interopRequireWildcard(string);var svg$$1=_interopRequireWildcard(svg);var tracking$$1=_interopRequireWildcard(tracking);var url=_interopRequireWildcard(url$1);exports["default"]={dom:dom,events:events$$1,fn:fn$$1,lang:lang$$1,li:li$$1,net:net$$1,string:string$$1,svg:svg$$1,tracking:tracking$$1,url:url};module.exports=exports["default"]});var utils$4=unwrapExports(cjs);var dom$8=utils$4.dom;function query(selector){var node=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;return node.querySelector(selector)}function queryAll(selector){var node=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;return Array.from(node.querySelectorAll(selector))}function toggleClass$1(element,className,toggle){element.classList[toggle?"add":"remove"](className)}function onReady(cb){dom$8.onContentLoaded.then(cb).then(lodash_noop,function(error){lodash_defer(function(){throw error})})}function initializeTitle(node,title){jSecure.setElementContent(query(".top-toolbar__title",node),title)}function initializeBrand(node){var brand=query(".top-toolbar__brand",node);brand.href=jSecure.sanitizeUrl(appendTrk(brand.href,"header"))}function initializeVideoPlayer(node,videoStreamUrl,poster){var videoElement=query("video",node);videoElement.src=jSecure.sanitizeUrl(videoStreamUrl);videoElement.poster=jSecure.sanitizeUrl(poster)}function initializePlayer(node,title,videoStreamUrl,poster){initializeTitle(node,title);initializeBrand(node);initializeVideoPlayer(node,videoStreamUrl,poster)}function createAuthor(_ref11){var _ref11$firstName=_ref11.firstName,firstName=_ref11$firstName===undefined?"":_ref11$firstName,_ref11$lastName=_ref11.lastName,lastName=_ref11$lastName===undefined?"":_ref11$lastName,_ref11$mobileThumbnai=_ref11.mobileThumbnail,mobileThumbnail=_ref11$mobileThumbnai===undefined?"":_ref11$mobileThumbnai,_ref11$slug=_ref11.slug,slug=_ref11$slug===undefined?"":_ref11$slug,_ref11$urn=_ref11.urn,urn=_ref11$urn===undefined?"":_ref11$urn,_ref11$webThumbnail=_ref11.webThumbnail,webThumbnail=_ref11$webThumbnail===undefined?"":_ref11$webThumbnail;return{firstName:firstName,lastName:lastName,mobileThumbnail:jSecure$1.sanitizeUrl(mobileThumbnail),slug:slug,url:buildAuthorUrl(slug),urn:urn,webThumbnail:jSecure$1.sanitizeUrl(webThumbnail)}}function getLocale(_ref12){var country=_ref12.country,language=_ref12.language;return language+"_"+country}function getAuthors(){var authors=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return authors.map(function(author){return createAuthor(author)})}function createCourse(_ref13){var _ref13$authors=_ref13.authors,authors=_ref13$authors===undefined?[]:_ref13$authors,_ref13$mobileThumbnai=_ref13.mobileThumbnail,mobileThumbnail=_ref13$mobileThumbnai===undefined?"":_ref13$mobileThumbnai,_ref13$locale=_ref13.locale,locale=_ref13$locale===undefined?{}:_ref13$locale,_ref13$slug=_ref13.slug,slug=_ref13$slug===undefined?"":_ref13$slug,_ref13$title=_ref13.title,title=_ref13$title===undefined?"":_ref13$title,_ref13$urn=_ref13.urn,urn=_ref13$urn===undefined?"":_ref13$urn,_ref13$webThumbnail=_ref13.webThumbnail,webThumbnail=_ref13$webThumbnail===undefined?"":_ref13$webThumbnail;return{authors:getAuthors(authors),mobileThumbnail:jSecure$1.sanitizeUrl(mobileThumbnail),locale:getLocale(locale),slug:slug,title:jSecure$1.sanitizeHTML(title),url:buildCourseUrl(slug),urn:urn,webThumbnail:jSecure$1.sanitizeUrl(webThumbnail)}}function createVideo(_ref14){var _ref14$course=_ref14.course,course=_ref14$course===undefined?{}:_ref14$course,_ref14$defaultThumbna=_ref14.defaultThumbnail,defaultThumbnail=_ref14$defaultThumbna===undefined?"":_ref14$defaultThumbna,_ref14$slug=_ref14.slug,slug=_ref14$slug===undefined?"":_ref14$slug,_ref14$title=_ref14.title,title=_ref14$title===undefined?"":_ref14$title,_ref14$transcript=_ref14.transcript,transcript=_ref14$transcript===undefined?{lines:[]}:_ref14$transcript,_ref14$url=_ref14.url,url=_ref14$url===undefined?{}:_ref14$url,_ref14$urn=_ref14.urn,urn=_ref14$urn===undefined?"":_ref14$urn;var makeCourse=createCourse(course);return{defaultThumbnail:jSecure$1.sanitizeUrl(defaultThumbnail),streamUrl:url.progressiveUrl||"",slug:slug,title:jSecure$1.sanitizeHTML(title),transcript:transcript.lines,url:buildVideoUrl(makeCourse.slug,slug),urn:urn}}function getNextVideo(_ref15,courseSlug){var _ref15$defaultThumbna=_ref15.defaultThumbnail,defaultThumbnail=_ref15$defaultThumbna===undefined?"":_ref15$defaultThumbna,_ref15$slug=_ref15.slug,slug=_ref15$slug===undefined?"":_ref15$slug,_ref15$title=_ref15.title,title=_ref15$title===undefined?"":_ref15$title,_ref15$urn=_ref15.urn,urn=_ref15$urn===undefined?"":_ref15$urn,_ref15$durationInSeco=_ref15.durationInSeconds,durationInSeconds=_ref15$durationInSeco===undefined?0:_ref15$durationInSeco;return{defaultThumbnail:jSecure$1.sanitizeUrl(defaultThumbnail),slug:slug,title:jSecure$1.sanitizeHTML(title),pathname:jSecure$1.sanitizeUrl("/learning/embed/"+courseSlug+"/"+slug),urn:urn,durationInSeconds:durationInSeconds}}function currentCaption(maybeLines,timeInSeconds){var lines=maybeLines||[];if(typeof timeInSeconds!=="number"){throw"current-caption: timeInSeconds is required."}var timeInMilliseconds=timeInSeconds*1e3;return lines.reduce(function(priorLine,maybeCurrentLine){if(maybeCurrentLine.transcriptStartAt<=timeInMilliseconds){return maybeCurrentLine}return priorLine},lines[0])}var $Object$1=Object;var $$1={create:$Object$1.create,getProto:$Object$1.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object$1.getOwnPropertyDescriptor,setDesc:$Object$1.defineProperty,setDescs:$Object$1.defineProperties,getKeys:$Object$1.keys,getNames:$Object$1.getOwnPropertyNames,getSymbols:$Object$1.getOwnPropertySymbols,each:[].forEach};var toString$2={}.toString;var $_cof=function $_cof(it){return toString$2.call(it).slice(8,-1)};var $_iobject=Object("z").propertyIsEnumerable(0)?Object:function(it){return $_cof(it)=="String"?it.split(""):Object(it)};var $_defined=function $_defined(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it};var $_toIobject=function $_toIobject(it){return $_iobject($_defined(it))};var $_global=createCommonjsModule(function(module){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global});var $_core=createCommonjsModule(function(module){var core=module.exports={version:"1.2.6"};if(typeof __e=="number")__e=core});var $_core_1=$_core.version;var $_aFunction=function $_aFunction(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it};var $_ctx=function $_ctx(fn,that,length){$_aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}};var PROTOTYPE="prototype";var $export=function $export(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?$_core:$_core[name]||($_core[name]={}),target=IS_GLOBAL?$_global:IS_STATIC?$_global[name]:($_global[name]||{})[PROTOTYPE],key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&key in target;if(own&&key in exports)continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!="function"?source[key]:IS_BIND&&own?$_ctx(out,$_global):IS_WRAP&&target[key]==out?function(C){var F=function F(param){return this instanceof C?new C(param):C(param)};F[PROTOTYPE]=C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out=="function"?$_ctx(Function.call,out):out;if(IS_PROTO)(exports[PROTOTYPE]||(exports[PROTOTYPE]={}))[key]=out}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;var $_export=$export;var $_fails=function $_fails(exec){try{return!!exec()}catch(e){return true}};var $_objectSap=function $_objectSap(KEY,exec){var fn=($_core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$_export($_export.S+$_export.F*$_fails(function(){fn(1)}),"Object",exp)};$_objectSap("getOwnPropertyDescriptor",function($getOwnPropertyDescriptor){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor($_toIobject(it),key)}});var getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){return $$1.getDesc(it,key)};var getOwnPropertyDescriptor$1=createCommonjsModule(function(module){module.exports={"default":getOwnPropertyDescriptor,__esModule:true}});unwrapExports(getOwnPropertyDescriptor$1);var get$3=createCommonjsModule(function(module,exports){var _Object$getOwnPropertyDescriptor=getOwnPropertyDescriptor$1["default"];exports["default"]=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=_Object$getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};exports.__esModule=true});unwrapExports(get$3);var create=function create(P,D){return $$1.create(P,D)};var create$1=createCommonjsModule(function(module){module.exports={"default":create,__esModule:true}});unwrapExports(create$1);var $_isObject=function $_isObject(it){return(typeof it==="undefined"?"undefined":_typeof2(it))==="object"?it!==null:typeof it==="function"};var $_anObject=function $_anObject(it){if(!$_isObject(it))throw TypeError(it+" is not an object!");return it};var getDesc=$$1.getDesc;var check=function check(O,proto){$_anObject(O);if(!$_isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};var $_setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=$_ctx(Function.call,getDesc(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check};$_export($_export.S,"Object",{setPrototypeOf:$_setProto.set});var setPrototypeOf=$_core.Object.setPrototypeOf;var setPrototypeOf$1=createCommonjsModule(function(module){module.exports={"default":setPrototypeOf,__esModule:true}});unwrapExports(setPrototypeOf$1);var inherits$3=createCommonjsModule(function(module,exports){var _Object$create=create$1["default"];var _Object$setPrototypeOf=setPrototypeOf$1["default"];exports["default"]=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof2(superClass)))}subClass.prototype=_Object$create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)_Object$setPrototypeOf?_Object$setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};exports.__esModule=true});unwrapExports(inherits$3);var classCallCheck$3=createCommonjsModule(function(module,exports){exports["default"]=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};exports.__esModule=true});unwrapExports(classCallCheck$3);var interopRequireDefault=createCommonjsModule(function(module,exports){exports["default"]=function(obj){return obj&&obj.__esModule?obj:{"default":obj}};exports.__esModule=true});unwrapExports(interopRequireDefault);var defineProperty$2=function defineProperty(it,key,desc){return $$1.setDesc(it,key,desc)};var defineProperty$3=createCommonjsModule(function(module){module.exports={"default":defineProperty$2,__esModule:true}});unwrapExports(defineProperty$3);var createClass$3=createCommonjsModule(function(module,exports){var _Object$defineProperty=defineProperty$3["default"];exports["default"]=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;_Object$defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.__esModule=true});unwrapExports(createClass$3);var $_iterStep=function $_iterStep(done,value){return{value:value,done:!!done}};var $_iterators={};var $_library=true;var $_propertyDesc=function $_propertyDesc(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}};var $_descriptors=!$_fails(function(){return Object.defineProperty({},"a",{get:function get(){
return 7}}).a!=7});var $_hide=$_descriptors?function(object,key,value){return $$1.setDesc(object,key,$_propertyDesc(1,value))}:function(object,key,value){object[key]=value;return object};var $_redefine=$_hide;var hasOwnProperty$3={}.hasOwnProperty;var $_has=function $_has(it,key){return hasOwnProperty$3.call(it,key)};var SHARED="__core-js_shared__",store=$_global[SHARED]||($_global[SHARED]={});var $_shared=function $_shared(key){return store[key]||(store[key]={})};var id=0,px=Math.random();var $_uid=function $_uid(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))};var store$1=$_shared("wks"),Symbol$1=$_global.Symbol;var $_wks=function $_wks(name){return store$1[name]||(store$1[name]=Symbol$1&&Symbol$1[name]||(Symbol$1||$_uid)("Symbol."+name))};var def=$$1.setDesc,TAG=$_wks("toStringTag");var $_setToStringTag=function $_setToStringTag(it,tag,stat){if(it&&!$_has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})};var IteratorPrototype={};$_hide(IteratorPrototype,$_wks("iterator"),function(){return this});var $_iterCreate=function $_iterCreate(Constructor,NAME,next){Constructor.prototype=$$1.create(IteratorPrototype,{next:$_propertyDesc(1,next)});$_setToStringTag(Constructor,NAME+" Iterator")};var getProto$1=$$1.getProto,ITERATOR=$_wks("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values";var returnThis=function returnThis(){return this};var $_iterDefine=function $_iterDefine(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$_iterCreate(Constructor,NAME,next);var getMethod=function getMethod(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),methods,key;if($native){var IteratorPrototype=getProto$1($default.call(new Base));$_setToStringTag(IteratorPrototype,TAG,true);if(!$_library&&$_has(proto,FF_ITERATOR))$_hide(IteratorPrototype,ITERATOR,returnThis);if(DEF_VALUES&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}}if((!$_library||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){$_hide(proto,ITERATOR,$default)}$_iterators[NAME]=$default;$_iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:!DEF_VALUES?$default:getMethod("entries")};if(FORCED)for(key in methods){if(!(key in proto))$_redefine(proto,key,methods[key])}else $_export($_export.P+$_export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods};var es6_array_iterator=$_iterDefine(Array,"Array",function(iterated,kind){this._t=$_toIobject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return $_iterStep(1)}if(kind=="keys")return $_iterStep(0,index);if(kind=="values")return $_iterStep(0,O[index]);return $_iterStep(0,[index,O[index]])},"values");$_iterators.Arguments=$_iterators.Array;$_iterators.NodeList=$_iterators.HTMLCollection=$_iterators.Array;var ceil=Math.ceil,floor=Math.floor;var $_toInteger=function $_toInteger(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)};var $_stringAt=function $_stringAt(TO_STRING){return function(that,pos){var s=String($_defined(that)),i=$_toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}};var $at=$_stringAt(true);$_iterDefine(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}});var TAG$1=$_wks("toStringTag"),ARG=$_cof(function(){return arguments}())=="Arguments";var $_classof=function $_classof(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=(O=Object(it))[TAG$1])=="string"?T:ARG?$_cof(O):(B=$_cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B};var ITERATOR$1=$_wks("iterator");var core_getIteratorMethod=$_core.getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR$1]||it["@@iterator"]||$_iterators[$_classof(it)]};var core_getIterator=$_core.getIterator=function(it){var iterFn=core_getIteratorMethod(it);if(typeof iterFn!="function")throw TypeError(it+" is not iterable!");return $_anObject(iterFn.call(it))};var getIterator=core_getIterator;var getIterator$1=createCommonjsModule(function(module){module.exports={"default":getIterator,__esModule:true}});unwrapExports(getIterator$1);var ITERATOR$2=$_wks("iterator");var core_isIterable=$_core.isIterable=function(it){var O=Object(it);return O[ITERATOR$2]!==undefined||"@@iterator"in O||$_iterators.hasOwnProperty($_classof(O))};var isIterable=core_isIterable;var isIterable$1=createCommonjsModule(function(module){module.exports={"default":isIterable,__esModule:true}});unwrapExports(isIterable$1);var slicedToArray$2=createCommonjsModule(function(module,exports){var _getIterator=getIterator$1["default"];var _isIterable=isIterable$1["default"];exports["default"]=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=_getIterator(arr),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(_isIterable(Object(arr))){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.__esModule=true});unwrapExports(slicedToArray$2);var $_toObject=function $_toObject(it){return Object($_defined(it))};var $_iterCall=function $_iterCall(iterator,fn,value,entries){try{return entries?fn($_anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)$_anObject(ret.call(iterator));throw e}};var ITERATOR$3=$_wks("iterator"),ArrayProto=Array.prototype;var $_isArrayIter=function $_isArrayIter(it){return it!==undefined&&($_iterators.Array===it||ArrayProto[ITERATOR$3]===it)};var min=Math.min;var $_toLength=function $_toLength(it){return it>0?min($_toInteger(it),9007199254740991):0};var ITERATOR$4=$_wks("iterator"),SAFE_CLOSING=false;try{var riter=[7][ITERATOR$4]();riter["return"]=function(){SAFE_CLOSING=true}}catch(e){}var $_iterDetect=function $_iterDetect(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR$4]();iter.next=function(){return{done:safe=true}};arr[ITERATOR$4]=function(){return iter};exec(arr)}catch(e){}return safe};$_export($_export.S+$_export.F*!$_iterDetect(function(iter){}),"Array",{from:function from(arrayLike){var O=$_toObject(arrayLike),C=typeof this=="function"?this:Array,$$=arguments,$$len=$$.length,mapfn=$$len>1?$$[1]:undefined,mapping=mapfn!==undefined,index=0,iterFn=core_getIteratorMethod(O),length,result,step,iterator;if(mapping)mapfn=$_ctx(mapfn,$$len>2?$$[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&$_isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){result[index]=mapping?$_iterCall(iterator,mapfn,[step.value,index],true):step.value}}else{length=$_toLength(O.length);for(result=new C(length);length>index;index++){result[index]=mapping?mapfn(O[index],index):O[index]}}result.length=index;return result}});var from_1=$_core.Array.from;var from_1$1=createCommonjsModule(function(module){module.exports={"default":from_1,__esModule:true}});unwrapExports(from_1$1);var toConsumableArray=createCommonjsModule(function(module,exports){var _Array$from=from_1$1["default"];exports["default"]=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return _Array$from(arr)}};exports.__esModule=true});unwrapExports(toConsumableArray);var dom$9=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.createContentLoadedPromise=createContentLoadedPromise;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);function createContentLoadedPromise(){var doc=arguments.length<=0||arguments[0]===undefined?document:arguments[0];return new _promise2["default"](function(resolve){if(doc.readyState==="interactive"||doc.readyState==="complete"){resolve(doc)}else{doc.addEventListener("DOMContentLoaded",function(){return resolve(doc)})}})}var onContentLoaded=createContentLoadedPromise(document);exports.onContentLoaded=onContentLoaded});unwrapExports(dom$9);var dom_1$1=dom$9.createContentLoadedPromise;var dom_2$1=dom$9.onContentLoaded;var events$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.mixin=mixin;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _eventemitter32=_interopRequireDefault(eventemitter3);function mixin(){var target=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return(0,lib.mixin)(target,_eventemitter32["default"])}});unwrapExports(events$2);var events_1$1=events$2.mixin;var fn$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.imperative=imperative;var call=Function.prototype.call;function imperative(method){return function(){return call.apply(method,arguments)}}});unwrapExports(fn$2);var fn_1$1=fn$2.imperative;var lang$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.isDescendantClass=isDescendantClass;exports.assign=assign;exports.defaults=defaults;exports.entries=entries;function isDescendantClass(child,ancestor){return Boolean(ancestor&&child&&child.prototype&&child.prototype instanceof ancestor)}function assign(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var key=_ref2[0];var value=_ref2[1];target[key]=value});return target},target)}var hasOwn=(0,fn$2.imperative)(Object.prototype.hasOwnProperty);function defaults(target){for(var _len2=arguments.length,sources=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){sources[_key2-1]=arguments[_key2]}return sources.reduce(function(target,source){entries(source).forEach(function(_ref3){var _ref32=_slicedToArray(_ref3,2);var key=_ref32[0];var value=_ref32[1];if(!hasOwn(target,key)){target[key]=value}});return target},target)}var slice=(0,fn$2.imperative)(Array.prototype.slice);var toArray=function toArray(o){return slice(o)};exports.toArray=toArray;function entries(o){return Object.keys(o).map(function(key){return[key,o[key]]})}});unwrapExports(lang$2);var lang_1$1=lang$2.isDescendantClass;var lang_2$1=lang$2.assign;var lang_3$1=lang$2.defaults;var lang_4$1=lang$2.entries;var lang_5$1=lang$2.toArray;var string$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.capitalize=capitalize;function capitalize(word){if(typeof word==="string"){return word.charAt(0).toUpperCase()+word.substring(1)}return""}});unwrapExports(string$2);var string_1$1=string$2.capitalize;var li$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getUrn=getUrn;exports.getPageKey=getPageKey;var urnMap={clip:"slideShareClip",clipboard:"slideShareClipboard",guest:"slideShareGuest",slideshow:"slideShareSlideshow",user:"slideShareUser"};var urnPrefix="urn:li";function getUrn(entityType,entityId){if(!entityType){return null}var urn=urnMap[entityType];if(!urn){urn="slideShare"+(0,string$2.capitalize)(entityType)}return[urnPrefix,urn,entityId].join(":")}function getPageKey(){var el=arguments.length<=0||arguments[0]===undefined?document.body:arguments[0];var match=/^pagekey-(.*)/.exec(el.id);if(match&&match[1]){return match[1]}}});unwrapExports(li$2);var li_1$1=li$2.getUrn;var li_2$1=li$2.getPageKey;var Headers_1$1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var nameToKey=function nameToKey(name){return name.toLowerCase()};var Headers=function(){function Headers(){_classCallCheck(this,Headers);this._values=Object.create(null)}_createClass(Headers,[{key:"append",value:function append(name,value){var key=nameToKey(name);if(!this._values[key]){this._values[key]=[]}this._values[key].push(value)}},{key:"keys",value:function keys(){return Object.keys(this._values)}},{key:"getAll",value:function getAll(name){var key=nameToKey(name);return this._values[key].slice(0)}},{key:"entries",value:function entries(){var _this=this;return this.keys().reduce(function(entries,key){_this.getAll(key).forEach(function(value){return entries.push([key,value])});return entries},[])}},{key:"addTo",value:function addTo(xhr){this.entries().forEach(function(_ref){var _ref2=_slicedToArray(_ref,2);var name=_ref2[0];var value=_ref2[1];return xhr.setRequestHeader(name,value)})}},{key:"nameToKey",value:function nameToKey(name){return name.toLowerCase()}}],[{key:"create",value:function create(obj){var objEntries=obj instanceof Headers?obj.entries():(0,lang$2.entries)(obj);return objEntries.reduce(function(headers,_ref3){var _ref32=_slicedToArray(_ref3,2);var name=_ref32[0];var value=_ref32[1];headers.append(name,value);return headers},new Headers)}}]);return Headers}();exports["default"]=Headers;module.exports=exports["default"]});unwrapExports(Headers_1$1);var net$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.request=request;exports.requestXml=requestXml;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);var _netHeaders2=_interopRequireDefault(Headers_1$1);exports.Headers=_netHeaders2["default"];function request(url){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref$method=_ref.method;var method=_ref$method===undefined?"get":_ref$method;var body=_ref.body;var _ref$headers=_ref.headers;var headers=_ref$headers===undefined?{}:_ref$headers;var xhr=new XMLHttpRequest;xhr.open(method,url,true);_netHeaders2["default"].create(headers).addTo(xhr);var promise$$1=new _promise2["default"](function(resolve,reject){xhr.addEventListener("readystatechange",function(){if(this.readyState===4){if(this.status>=200&&this.status<400){resolve(this)}else{reject(this)}}})});xhr.send(body);return promise$$1}function requestXml(){return request.apply(undefined,arguments).then(function(xhr){return xhr.responseXML})}});unwrapExports(net$2);var net_1$1=net$2.request;var net_2$1=net$2.requestXml;var net_3$1=net$2.Headers;var svg$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getSvgUrls=getSvgUrls;exports.injectSvg=injectSvg;exports.loadSvgs=loadSvgs;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise2=_interopRequireDefault(promise);function getSvgUrls(){var el=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var metaTagName=arguments.length<=1||arguments[1]===undefined?"ss-svg-icons":arguments[1];var metas=(0,lang$2.toArray)(el.querySelectorAll('meta[name="'+metaTagName+'"]'));return metas.map(function(meta){return meta.getAttribute("content")})}function injectSvg(xml){var el=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var firstChild=xml.firstChild;firstChild.style.display="none";el.insertBefore(firstChild,el.firstChild)}function loadSvgs(){var searchEl=arguments.length<=0||arguments[0]===undefined?document:arguments[0];var destEl=arguments.length<=1||arguments[1]===undefined?document.body:arguments[1];var svgPromises=getSvgUrls(searchEl).map(function(url){return(0,net$2.requestXml)(url).then(function(svg){return injectSvg(svg,destEl)})});return _promise2["default"].all(svgPromises)}});unwrapExports(svg$2);var svg_1$1=svg$2.getSvgUrls;var svg_2$1=svg$2.injectSvg;var svg_3$1=svg$2.loadSvgs;var tracking$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getGlobalTrackingUrl=getGlobalTrackingUrl;var metaTagName="globalTrackingUrl";function getGlobalTrackingUrl(){var meta=document.querySelector('meta[name="'+metaTagName+'"]');return meta?meta.getAttribute("content"):null}});unwrapExports(tracking$2);var tracking_1$1=tracking$2.getGlobalTrackingUrl;var url$3=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getTrackingCode=getTrackingCode;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _url2=_interopRequireDefault(url);function getTrackingCode(link){if(typeof link!=="string"){throw new TypeError("link argument must be a string; found "+(typeof link==="undefined"?"undefined":_typeof2(link)))}var query=_url2["default"].parse(link,true).query;if(query){var trk=query.trk;if(trk){return Array.isArray(trk)?trk[trk.length-1]:trk}}return null}});unwrapExports(url$3);var url_1$1=url$3.getTrackingCode;var cjs$1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var dom=_interopRequireWildcard(dom$9);var events=_interopRequireWildcard(events$2);var fn=_interopRequireWildcard(fn$2);var lang=_interopRequireWildcard(lang$2);var li=_interopRequireWildcard(li$2);var net=_interopRequireWildcard(net$2);var string=_interopRequireWildcard(string$2);var svg=_interopRequireWildcard(svg$2);var tracking=_interopRequireWildcard(tracking$2);var url=_interopRequireWildcard(url$3);exports["default"]={dom:dom,events:events,fn:fn,lang:lang,li:li,net:net,string:string,svg:svg,tracking:tracking,url:url};module.exports=exports["default"]});unwrapExports(cjs$1);var funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty$4=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty$4).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isFunction$2(value){return isObject$3(value)&&objToString.call(value)==funcTag}function isObject$3(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction$2(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}var lodash__getnative=getNative;var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]";var objectProto$1=Object.prototype;var hasOwnProperty$5=objectProto$1.hasOwnProperty;var objectToString=objectProto$1.toString;var propertyIsEnumerable=objectProto$1.propertyIsEnumerable;function isArguments$1(value){return isArrayLikeObject(value)&&hasOwnProperty$5.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction$3(value)}function isArrayLikeObject(value){return isObjectLike$1(value)&&isArrayLike(value)}function isFunction$3(value){var tag=isObject$4(value)?objectToString.call(value):"";return tag==funcTag$1||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject$4(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isObjectLike$1(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var lodash_isarguments=isArguments$1;var arrayTag="[object Array]",funcTag$2="[object Function]";var reIsHostCtor$1=/^\[object .+?Constructor\]$/;function isObjectLike$2(value){return!!value&&(typeof value==="undefined"?"undefined":_typeof2(value))=="object"}var objectProto$2=Object.prototype;var fnToString$1=Function.prototype.toString;var hasOwnProperty$6=objectProto$2.hasOwnProperty;var objToString$1=objectProto$2.toString;var reIsNative$1=RegExp("^"+fnToString$1.call(hasOwnProperty$6).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var nativeIsArray=getNative$1(Array,"isArray");var MAX_SAFE_INTEGER$1=9007199254740991;function getNative$1(object,key){var value=object==null?undefined:object[key];return isNative$1(value)?value:undefined}function isLength$1(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}var isArray$1=nativeIsArray||function(value){return isObjectLike$2(value)&&isLength$1(value.length)&&objToString$1.call(value)==arrayTag};function isFunction$4(value){return isObject$5(value)&&objToString$1.call(value)==funcTag$2}function isObject$5(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function isNative$1(value){if(value==null){return false}if(isFunction$4(value)){return reIsNative$1.test(fnToString$1.call(value))}return isObjectLike$2(value)&&reIsHostCtor$1.test(value)}var lodash_isarray=isArray$1;var reIsUint=/^\d+$/;var objectProto$3=Object.prototype;var hasOwnProperty$7=objectProto$3.hasOwnProperty;var nativeKeys=lodash__getnative(Object,"keys");var MAX_SAFE_INTEGER$2=9007199254740991;function baseProperty(key){return function(object){return object==null?undefined:object[key]}}var getLength=baseProperty("length");function isArrayLike$1(value){return value!=null&&isLength$2(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER$2:length;return value>-1&&value%1==0&&value<length}function isLength$2(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$2}function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength$2(length)&&(lodash_isarray(object)||lodash_isarguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty$7.call(object,key)){result.push(key)}}return result}function isObject$6(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}var keys$1=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike$1(object)){return shimKeys(object)}return isObject$6(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject$6(object)){object=Object(object)}var length=object.length;length=length&&isLength$2(length)&&(lodash_isarray(object)||lodash_isarguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty$7.call(object,key)))){result.push(key)}}return result}var lodash_keys=keys$1;function toObject(value){return isObject$7(value)?value:Object(value)}function isObject$7(value){var type=typeof value==="undefined"?"undefined":_typeof2(value);return!!value&&(type=="object"||type=="function")}function pairs(object){object=toObject(object);var index=-1,props=lodash_keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}var lodash_pairs=pairs;var abstract_1=createCommonjsModule(function(module,exports){var _classCallCheck=classCallCheck$3["default"];Object.defineProperty(exports,"__esModule",{value:true});var AbstractDOMAdapter=function AbstractDOMAdapter(){_classCallCheck(this,AbstractDOMAdapter);this.components={}};exports["default"]=AbstractDOMAdapter;module.exports=exports["default"]});unwrapExports(abstract_1);var jquery=createCommonjsModule(function(module,exports){var _get=get$3["default"];var _inherits=inherits$3["default"];var _createClass=createClass$3["default"];var _classCallCheck=classCallCheck$3["default"];var _slicedToArray=slicedToArray$2["default"];var _toConsumableArray=toConsumableArray["default"];var _interopRequireDefault=interopRequireDefault["default"];Object.defineProperty(exports,"__esModule",{value:true});var _lodashPairs2=_interopRequireDefault(lodash_pairs);var _abstract2=_interopRequireDefault(abstract_1);var splice=cjs$1.fn.imperative(Array.prototype.splice);var JQueryDOMAdapter=function(_AbstractDOMAdapter){_inherits(JQueryDOMAdapter,_AbstractDOMAdapter);function JQueryDOMAdapter($){_classCallCheck(this,JQueryDOMAdapter);_get(Object.getPrototypeOf(JQueryDOMAdapter.prototype),"constructor",this).call(this);this.$=$}_createClass(JQueryDOMAdapter,[{key:"adapt",value:function adapt(element){return this.$(element)}},{key:"adaptAll",value:function adaptAll(elements){return this.$(elements)}},{key:"query",value:function query(selector){return this.$(this.$(selector)[0])}},{key:"queryAll",value:function queryAll(selector){return this.$(selector)}},{key:"find",value:function find(element,selector){return this.$(element.find(selector)[0])}},{key:"filter",value:function filter(elements,selector,not){return not?elements.not(selector):elements.filter(selector)}},{key:"forEach",value:function forEach(elements,func){this.$.each(elements,function(i,element){func(element,i)})}}]);return JQueryDOMAdapter}(_abstract2["default"]);exports["default"]=JQueryDOMAdapter;var methods={findAll:"find",children:"children",one:"one",getAttr:"attr",setAttr:"attr",removeAttr:"removeAttr",getCss:"css",setCss:"css",getData:"data",setData:"data",getHtml:"html",setHtml:"html",getText:"text",setText:"text",restore:"get",addClass:"addClass",removeClass:"removeClass",toggleClass:"toggleClass",hasClass:"hasClass",wrap:"wrap",wrapAll:"wrapAll",getHeight:"height",setHeight:"height",getWidth:"width",setWidth:"width"};JQueryDOMAdapter.prototype=(0,_lodashPairs2["default"])(methods).reduce(function(prototype,_ref){var _ref2=_slicedToArray(_ref,2);var methodName=_ref2[0];var jMethodName=_ref2[1];prototype[methodName]=function(elements){return elements[jMethodName].apply(elements,_toConsumableArray(splice(arguments,1)))};return prototype},JQueryDOMAdapter.prototype);module.exports=exports["default"]});unwrapExports(jquery);var defineProperties$1=function defineProperties(T,D){return $$1.setDescs(T,D)};var defineProperties$2=createCommonjsModule(function(module){module.exports={"default":defineProperties$1,__esModule:true}});unwrapExports(defineProperties$2);var jqueryInternal=createCommonjsModule(function(module){var _Object$defineProperties=defineProperties$2["default"];(function(global,factory){{module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}})(typeof window!=="undefined"?window:undefined,function(window,noGlobal){var arr=[];var _slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var document=window.document,version="2.1.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated,-effects,-effects/Tween,-effects/animatedSelector,-event-alias,-css/hiddenVisibleSelectors",jQuery=function jQuery(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function fcamelCase(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function toArray(){return _slice.call(this)},get:function get(num){return num!=null?num<0?this[num+this.length]:this[num]:_slice.call(this)},pushStack:function pushStack(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function each(callback,args){return jQuery.each(this,callback,args)},map:function map(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function slice(){return this.pushStack(_slice.apply(this,arguments))},first:function first(){return this.eq(0)},last:function last(){return this.eq(-1)},eq:function eq(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function end(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;
if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if((typeof target==="undefined"?"undefined":_typeof2(target))!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function error(msg){throw new Error(msg)},noop:function noop(){},isFunction:function isFunction(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function isWindow(obj){return obj!=null&&obj===obj.window},isNumeric:function isNumeric(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)>=0},isPlainObject:function isPlainObject(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}return true},isEmptyObject:function isEmptyObject(obj){var name;for(name in obj){return false}return true},type:function type(obj){if(obj==null){return obj+""}return(typeof obj==="undefined"?"undefined":_typeof2(obj))==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj==="undefined"?"undefined":_typeof2(obj)},globalEval:function globalEval(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function camelCase(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function each(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}}return obj},trim:function trim(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function makeArray(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function inArray(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function grep(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function map(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function proxy(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=_slice.call(arguments,2);proxy=function proxy(){return fn.apply(context||this,args.concat(_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}if(obj.nodeType===1&&length){return true}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var docElem=window.document.documentElement,selector_hasDuplicate,matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector,selector_sortOrder=function selector_sortOrder(a,b){if(a===b){selector_hasDuplicate=true;return 0}var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);if(compare){if(compare&1){if(a===document||jQuery.contains(document,a)){return-1}if(b===document||jQuery.contains(document,b)){return 1}return 0}return compare&4?-1:1}return a.compareDocumentPosition?-1:1};jQuery.extend({find:function find(selector,context,results,seed){var elem,nodeType,i=0;results=results||[];context=context||document;if(!selector||typeof selector!=="string"){return results}if((nodeType=context.nodeType)!==1&&nodeType!==9){return[]}if(seed){while(elem=seed[i++]){if(jQuery.find.matchesSelector(elem,selector)){results.push(elem)}}}else{jQuery.merge(results,context.querySelectorAll(selector))}return results},unique:function unique(results){var elem,duplicates=[],i=0,j=0;selector_hasDuplicate=false;results.sort(selector_sortOrder);if(selector_hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}return results},text:function text(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=jQuery.text(node)}}else if(nodeType===1||nodeType===9||nodeType===11){return elem.textContent}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret},contains:function contains(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains(bup))},isXMLDoc:function isXMLDoc(elem){return(elem.ownerDocument||elem).documentElement.nodeName!=="HTML"},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}});jQuery.extend(jQuery.find,{matches:function matches(expr,elements){return jQuery.find(expr,null,null,elements)},matchesSelector:function matchesSelector(elem,expr){return matches.call(elem,expr)},attr:function attr(elem,name){return elem.getAttribute(name)}});var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function find(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function filter(selector){return this.pushStack(winnow(this,selector||[],false))},not:function not(selector){return this.pushStack(winnow(this,selector||[],true))},is:function is(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector){return this}if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function dir(elem,_dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[_dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched},sibling:function sibling(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched}});jQuery.fn.extend({has:function has(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function closest(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function index(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function add(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function addBack(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function parent(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function parents(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function parentsUntil(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function next(elem){return sibling(elem,"nextSibling")},prev:function prev(elem){return sibling(elem,"previousSibling")},nextAll:function nextAll(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function prevAll(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function nextUntil(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function prevUntil(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function siblings(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function children(elem){return jQuery.sibling(elem.firstChild)},contents:function contents(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=/\S+/g;var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,_fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function fire(data){memory=options.memory&&data;_fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else if(memory){list=[]}else{self.disable()}}},self={add:function add(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&type!=="string"){add(arg)}})})(arguments);if(firing){firingLength=list.length}else if(memory){firingStart=start;fire(memory)}}return this},remove:function remove(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function has(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function empty(){list=[];firingLength=0;return this},disable:function disable(){list=stack=memory=undefined;return this},disabled:function disabled(){return!list},lock:function lock(){stack=undefined;if(!memory){self.disable()}return this},locked:function locked(){return!stack},fireWith:function fireWith(context,args){if(list&&(!_fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args)}else{fire(args)}}return this},fire:function fire(){self.fireWith(this,arguments);return this},fired:function fired(){return!!_fired}};return self};jQuery.extend({Deferred:function Deferred(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],_state="pending",_promise={state:function state(){return _state},always:function always(){deferred.done(arguments).fail(arguments);return this},then:function then(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[tuple[0]+"With"](this===_promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function promise(obj){return obj!=null?jQuery.extend(obj,_promise):_promise}},deferred={};_promise.pipe=_promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];_promise[tuple[1]]=list.add;if(stateString){list.add(function(){_state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?_promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});_promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function when(subordinate){var i=0,resolveValues=_slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function updateFunc(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function holdReady(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function ready(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(obj)};jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function fn(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){Object.defineProperty(this.cache={},0,{get:function get(){return{}}});this.expando=jQuery.expando+Math.random()}Data.uid=1;Data.accepts=jQuery.acceptData;Data.prototype={key:function key(owner){if(!Data.accepts(owner)){return 0}var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};_Object$defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor)}}if(!this.cache[unlock]){this.cache[unlock]={}}return unlock},set:function set(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if(typeof data==="string"){cache[data]=value}else{if(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data)}else{for(prop in data){cache[prop]=data[prop]}}}return cache},get:function get(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function access(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function remove(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined){this.cache[unlock]={}}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--){delete cache[name[i]]}}},hasData:function hasData(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function discard(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]]}}};var data_priv=new Data;var data_user=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function hasData(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function data(elem,name,_data){return data_user.access(elem,name,_data)},removeData:function removeData(elem,name){data_user.remove(elem,name)},_data:function _data(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function _removeData(elem,name){data_priv.remove(elem,name)}});jQuery.fn.extend({data:function data(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}data_priv.set(elem,"hasDataAttrs",true)}}return data}if((typeof key==="undefined"?"undefined":_typeof2(key))==="object"){return this.each(function(){data_user.set(this,key)})}return access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined){return data}data=data_user.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function removeData(key){return this.each(function(){data_user.remove(this,key)})}});jQuery.extend({queue:function queue(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function dequeue(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function next(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function _queueHooks(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function queue(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function dequeue(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function clearQueue(type){return this.queue(type||"fx",[])},promise:function promise(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function resolve(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var strundefined=typeof undefined==="undefined"?"undefined":_typeof2(undefined);support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function add(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return(typeof jQuery==="undefined"?"undefined":_typeof2(jQuery))!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function remove(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events")}},trigger:function trigger(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,(typeof event==="undefined"?"undefined":_typeof2(event))==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},dispatch:function dispatch(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=_slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;
ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function handlers(event,_handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=_handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=_handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<_handlers.length){handlerQueue.push({elem:this,handlers:_handlers.slice(delegateCount)})}return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function filter(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function filter(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function fix(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function trigger(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function trigger(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function trigger(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function _default(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function postDispatch(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}},simulate:function simulate(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function preventDefault(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function stopPropagation(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function stopImmediatePropagation(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function handle(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function handler(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function setup(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}data_priv.access(doc,fix,(attaches||0)+1)},teardown:function teardown(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);data_priv.remove(doc,fix)}else{data_priv.access(doc,fix,attaches)}}}})}jQuery.fn.extend({on:function on(types,selector,data,fn,one){var origFn,type;if((typeof types==="undefined"?"undefined":_typeof2(types))==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return this}if(one===1){origFn=fn;fn=function fn(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function one(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function off(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if((typeof types==="undefined"?"undefined":_typeof2(types))==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function trigger(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function triggerHandler(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=data_priv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur)}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}jQuery.extend({clone:function clone(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},buildFragment:function buildFragment(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==-1){continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment},cleanData:function cleanData(elems){var data,elem,type,key,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(jQuery.acceptData(elem)){key=elem[data_priv.expando];if(key&&(data=data_priv.cache[key])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(data_priv.cache[key]){delete data_priv.cache[key]}}}delete data_user.cache[elem[data_user.expando]]}}});jQuery.fn.extend({text:function text(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function append(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function prepend(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function before(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function after(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},remove:function remove(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))}elem.parentNode.removeChild(elem)}}return this},empty:function empty(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function clone(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function html(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function replaceWith(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;jQuery.cleanData(getAll(this));if(arg){arg.replaceChild(elem,this)}});return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function detach(selector){return this.remove(selector,true)},domManip:function domManip(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}self.domManip(args,callback)})}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function getStyles(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name]}if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function get(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;"+"position:absolute";container.appendChild(div);function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";div.innerHTML="";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}if(window.getComputedStyle){jQuery.extend(support,{pixelPosition:function pixelPosition(){computePixelPositionAndBoxSizingReliable();return pixelPositionVal},boxSizingReliable:function boxSizingReliable(){if(boxSizingReliableVal==null){computePixelPositionAndBoxSizingReliable()}return boxSizingReliableVal},reliableMarginRight:function reliableMarginRight(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);return ret}})}})();jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style){return name}var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function get(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function style(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value==="undefined"?"undefined":_typeof2(value);if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||value!==value){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function css(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function get(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function set(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function expand(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function css(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function show(){return showHide(this,true)},hide:function hide(){return showHide(this)},toggle:function toggle(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function attr(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function removeAttr(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function attr(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(_typeof2(elem.getAttribute)===strundefined){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)}else if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}},removeAttr:function removeAttr(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}},attrHooks:{type:{set:function set(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}}});boolHook={set:function set(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function prop(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function removeProp(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function prop(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){return hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value}else{return hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]}},propHooks:{tabIndex:{get:function get(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}});if(!support.optSelected){jQuery.propHooks.selected={get:function get(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function addClass(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(elem.className!==finalValue){elem.className=finalValue}}}}return this},removeClass:function removeClass(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length===0||typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")}}finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue){elem.className=finalValue}}}}return this},toggleClass:function toggleClass(value,stateVal){var type=typeof value==="undefined"?"undefined":_typeof2(value);if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];
while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(type===strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)}this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""}})},hasClass:function hasClass(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function val(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function get(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem))}},select:{get:function get(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function set(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(option.value,values)>=0){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function set(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function hover(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function bind(types,data,fn){return this.on(types,null,data,fn)},unbind:function unbind(types,fn){return this.off(types,null,fn)},delegate:function delegate(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function undelegate(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});jQuery.fn.extend({wrapAll:function wrapAll(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function wrapInner(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function wrap(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function unwrap(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+((typeof v==="undefined"?"undefined":_typeof2(v))==="object"?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function add(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function serialize(){return jQuery.param(this.serializeArray())},serializeArray:function serializeArray(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function setOffset(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function offset(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(_typeof2(elem.getBoundingClientRect)!==strundefined){box=elem.getBoundingClientRect()}win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function position(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function offsetParent(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset)}else{elem[method]=val}},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});if(typeof undefined==="function"&&undefined.amd){undefined("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if((typeof noGlobal==="undefined"?"undefined":_typeof2(noGlobal))===strundefined){window.jQuery=window.$=jQuery}return jQuery})});var jqueryInternal$1=createCommonjsModule(function(module,exports){var _get=get$3["default"];var _inherits=inherits$3["default"];var _classCallCheck=classCallCheck$3["default"];var _interopRequireDefault=interopRequireDefault["default"];Object.defineProperty(exports,"__esModule",{value:true});var _jquery2=_interopRequireDefault(jquery);var _vendorJqueryInternal2=_interopRequireDefault(jqueryInternal);var InternalJqueryDOMAdapter=function(_JQueryDOMAdapter){_inherits(InternalJqueryDOMAdapter,_JQueryDOMAdapter);function InternalJqueryDOMAdapter(){_classCallCheck(this,InternalJqueryDOMAdapter);_get(Object.getPrototypeOf(InternalJqueryDOMAdapter.prototype),"constructor",this).call(this,_vendorJqueryInternal2["default"])}return InternalJqueryDOMAdapter}(_jquery2["default"]);exports["default"]=InternalJqueryDOMAdapter;module.exports=exports["default"]});var InternalJqueryDOMAdapter=unwrapExports(jqueryInternal$1);function areCookiesEnabled(){if(!document||!document.cookie){return false}var value="__iframe_verify=1";document.cookie=value;var supportsCookies=document.cookie.length>=1&&document.cookie.indexOf(value)!==-1;var thePast=new Date(1976,8,16);document.cookie=value+";expires="+thePast.toUTCString();return supportsCookies}function deepFind(obj,path){return path.split(".").reduce(function(accum,key){if(accum&&accum[key]){return accum[key]}return null},obj)}function getDomData(element){try{return JSON.parse(jSecure.htmlUnencode(element.innerText))}catch(e){return null}}runtime$2.partials=Templates;onReady(function(){var domData=getDomData(query("#embed-data"))||{};var queryParams=getQueryParams();var isFeedPlayer=queryParams.variant==="feed";var withAutoplay=queryParams.autoplay==="true";var rawLix=domData.lixTreatments;lix.lixTreatments=rawLix;var withMediaPlayer=!isFeedPlayer&&lix.getTreatmentIsEnabled("learning.web.embed.use-media-player");var cssToRemove=void 0;var containerToRemove=void 0;if(withMediaPlayer){cssToRemove=document.querySelector('link[rel=stylesheet][data-name="index"]');containerToRemove=document.querySelector(".video-player-container")}else{cssToRemove=document.querySelector('link[rel=stylesheet][data-name="index-v2"]');containerToRemove=document.querySelector(".media-player-container")}if(cssToRemove&&cssToRemove.remove){cssToRemove.remove()}if(containerToRemove&&containerToRemove.remove){containerToRemove.remove()}var rawCourse=deepFind(domData,"detailedCourses.elements.0")||{};var rawVideo=rawCourse.selectedVideo||{};var rawSimilarCourses=deepFind(domData,"similarCourses.elements")||[];var courseModel=createCourse(rawCourse);var videoModel=createVideo(rawVideo);var nextVideoModel=getNextVideo(rawCourse.nextVideo||{},courseModel.slug);var similarCourses=rawSimilarCourses.map(function(similarCourse){var similarCourseModel=createCourse(similarCourse);similarCourseModel.url=jSecure$1.sanitizeUrl(appendTrk(similarCourseModel.url,"relatedcourse"));return similarCourseModel});i18n.locale=courseModel.locale;var html="";if(isFeedPlayer){html+=initializeFeed({course:courseModel,video:videoModel,nextVideo:nextVideoModel})}else{html+=initializeEmbed({course:courseModel,video:videoModel,similarCourses:similarCourses})}var headTitleElement=document.querySelector("head title");headTitleElement.innerHTML=jSecure$1.sanitizeHTML(videoModel.title);webTrackingTransport$1.setTrackingUrl(document.querySelector('meta[name="globalTrackingUrl"]').getAttribute("content"));var appId="com.linkedin.web.learning.external";webTrackingTransport$1.setAppId(appId);var trackingId=generateTrackingId();var pageKey=(isMobileDevice()?"mw":"d")+"_learning_embed";var requestHeader={pageKey:pageKey};if(document.referrer){requestHeader.referrer=document.referrer}if(!isFeedPlayer){firePageViewEvent({appId:appId,pageKey:pageKey,pageIdentifier:"learning_embed",requestHeader:requestHeader,trackingId:trackingId,trackingInfo:{cookie_blocked:!areCookiesEnabled()}})}var setupSlidesharePlayer=function setupSlidesharePlayer(){var playerDomClasses={hide:"ssplayer-component-hide",topToolbar:"top-toolbar"};var jQueryDomAdapter=new InternalJqueryDOMAdapter;var $=jQueryDomAdapter.$;var videoPlayerElement=query(".ssplayer-video-player");$(videoPlayerElement).append(html);if(videoModel&&videoModel.streamUrl){var courseThumbnail=jSecure$1.sanitizeUrl(courseModel.webThumbnail);var defaults={autoplay:withAutoplay,videojsElement:query(".video-js"),bigPlayButtonElement:query(".ssplayer-big-play-button"),loaderElement:query(".ssplayer-loader"),progressElement:query(".ssplayer-progress"),bufferElement:query(".ssplayer-buffer"),timeDisplayElement:query(".ssplayer-time-display"),volumeSwitchElement:query(".ssplayer-volume-switch"),volumeSliderElement:query(".ssplayer-volume-slider"),volumeSliderVertical:true,toolbarElement:query(".ssplayer-video-toolbar-bottom"),captions:{element:query(".captions",videoPlayerElement),onButton:query(".captions-button__on"),offButton:query(".captions-button__off"),transcript:videoModel.transcript},playerjs:window.top!==window,firstFocusableElementSelector:null};var options={};initializePlayer(videoPlayerElement,videoModel.title,videoModel.streamUrl,courseThumbnail);var endcardModalElement=void 0;var endcardElement=void 0;if(isFeedPlayer){endcardModalElement=query(".feed-endcard-modal");endcardElement=query(".feed-endcard",endcardModalElement);var topToolbar=query("."+playerDomClasses.topToolbar,videoPlayerElement);$(topToolbar).addClass(playerDomClasses.hide);options=$.extend({},options,{endcardModalElement:endcardModalElement,endcardElement:endcardElement})}else{if(queryParams.endscreen!=="0"){endcardModalElement=query(".embed-endcard-modal");endcardElement=query(".embed-endcard",endcardModalElement)}options=$.extend({},options,{trackingSettings:{appId:appId,requestHeader:requestHeader,mobileHeader:{},mediaUrn:videoModel.urn,mediaViewTrackingId:trackingId,sessionTrackingId:trackingId,bitrate:null,trackingUrl:"/li/track",usePlayerBeaconEvent:true},endcardModalElement:endcardModalElement,endcardElement:endcardElement,shareModalElement:query(".embed-share-modal"),shareLinkElement:query(".ssplayer-share-link"),shareButtons:queryAll(".ssplayer-share-btn").map(function(element){return[element,element.getAttribute("data-ssplayer-network"),element.getAttribute("data-ssplayer-url")]})})}options=$.extend({},defaults,options);if(withAutoplay||isFeedPlayer){options.captions.on=true}var playerInstance=LearningVideoPlayer.create(videoPlayerElement,options);var feedEndcardLink=$(".feed-endcard__link");if(feedEndcardLink.length){playerInstance.registerPlayerJsEvent("endcard_click_view_course");playerInstance.playerJsReady();$(videoPlayerElement).on("click",".feed-endcard .feed-endcard__link",function(){playerInstance.emitPlayerJsEvent("endcard_click_view_course",{controlName:"video_endplate"})})}if(nextVideoModel.pathname){playerInstance.registerPlayerJsEvent("endcard_click_view_next_video");playerInstance.playerJsReady();$(videoPlayerElement).on("click",".feed-endcard .feed-endcard__next-video",function(){var newPath="https://"+window.location.host+nextVideoModel.pathname+window.location.search;if(!withAutoplay){newPath=addQueryParam(newPath,"autoplay","true")}playerInstance.emitPlayerJsEvent("endcard_click_view_next_video",{controlName:"next_learning_video",videoSrc:newPath,urn:nextVideoModel.urn})})}webTrackingTransport$1.setTrackingUrl($('meta[name="globalTrackingUrl"]').attr("content"));if(document.referrer){requestHeader.referrer=document.referrer}if(!isFeedPlayer){firePageViewEvent({appId:appId,pageKey:requestHeader.pageKey,pageIdentifier:"learning_embed",requestHeader:requestHeader,trackingId:trackingId,trackingInfo:{cookie_blocked:!areCookiesEnabled()}})}}else{var errorcardModalElement=query(".ssplayer-errorcard-modal",videoPlayerElement);toggleClass$1(errorcardModalElement,"ssplayer-active",true);toggleClass$1(errorcardModalElement,"ssplayer-modal-front",true)}};var setupCaptions=function setupCaptions(player){var display=player.getChild("customCaptionsDisplay");var activeCaption=void 0;var captions=videoModel.transcript;var setCaption=function setCaption(){var caption=currentCaption(captions,player.currentTime());if(activeCaption!==caption){var text=caption?caption.caption:"";display.setText(text);activeCaption=caption}};player.on("timeupdate",setCaption);if((withAutoplay||isFeedPlayer)&&player.controlBar&&player.controlBar.captionsToggle&&player.controlBar.captionsToggle.activate){player.controlBar.captionsToggle.activate()}};var setupTopToolbar=function setupTopToolbar(player){var updateToolbarVisibility=function updateToolbarVisibility(){var topToolbarElement=document.querySelector(".top-toolbar");if(player.userActive()){topToolbarElement.classList.remove("a11y-text")}else{topToolbarElement.classList.add("a11y-text")}};player.on("timeupdate",updateToolbarVisibility);player.on("pause",updateToolbarVisibility)};var setupTracking=function setupTracking(player){if(!videoModel.urn||!trackingId){return}var plugin=player.tracking({mediaUrn:videoModel.urn,trackingId:trackingId});plugin.on("track",function(event,_ref16){var eventName=_ref16.eventName,eventData=_ref16.eventData;sendTrackingEvent({appId:appId,eventName:eventName,pageKey:pageKey,eventData:eventData,requestHeader:requestHeader})})};var setupEndScreen=function setupEndScreen(player){var plugin=player.endScreen();var endcardContent=void 0;if(isFeedPlayer){endcardContent=document.querySelector(".feed-endcard")}else{endcardContent=document.querySelector(".embed-endcard")}if(endcardContent){plugin.screen.fillWith(endcardContent)}if(isFeedPlayer){var playerInstance=LearningVideoPlayer.create(document.createElement("div"),{videojsElement:document.createElement("div")});var feedEndcardLink=document.querySelector(".feed-endcard__link");if(feedEndcardLink){var ENDCARD_VIEW_COURSE_EVENT="endcard_click_view_course";playerInstance.registerPlayerJsEvent(ENDCARD_VIEW_COURSE_EVENT);feedEndcardLink.addEventListener("click",function(){playerInstance.emitPlayerJsEvent(ENDCARD_VIEW_COURSE_EVENT,{controlName:"video_endplate"})})}else if(nextVideoModel.pathname){var ENDCARD_NEXT_VIDEO_EVENT="endcard_click_view_next_video";playerInstance.registerPlayerJsEvent(ENDCARD_NEXT_VIDEO_EVENT);playerInstance.playerJsReady();endcardContent.addEventListener("click",function(){var newPath="https://"+window.location.host+nextVideoModel.pathname+window.location.search;if(!withAutoplay){newPath=addQueryParam(newPath,"autoplay","true")}playerInstance.emitPlayerJsEvent(ENDCARD_NEXT_VIDEO_EVENT,{controlName:"next_learning_video",videoSrc:newPath,urn:nextVideoModel.urn})})}}};var setupErrorScreen=function setupErrorScreen(player){var plugin=player.errorScreen();plugin.on("show",function(event,_ref17){var screen=_ref17.screen,error=_ref17.error;var errorContent=document.querySelector(".video-errorcard");if(errorContent){plugin.screen.fillWith(errorContent)}else{screen.fillWith(error.message)}})};var setupMediaPlayer=function setupMediaPlayer(){var videoPlayerElement=document.querySelector(".media-player");videoPlayerElement.innerHTML=html;var courseThumbnail=jSecure$1.sanitizeUrl(courseModel.webThumbnail);var player=createPlayer(videoPlayerElement.querySelector("video.video-js"),{autoplay:withAutoplay,bigPlayButton:true,customCaptionsDisplay:videoModel.transcript,poster:courseThumbnail,controlBar:{captionsToggle:{useCustomCaptions:true},fullscreenToggle:true},plugins:{controlTooltips:{}}});player.src(videoModel.streamUrl);player.load();setupCaptions(player);if(!isFeedPlayer){setupTopToolbar(player,videoPlayerElement)}setupTracking(player);setupEndScreen(player);setupErrorScreen(player)};if(withMediaPlayer){setupMediaPlayer()}else{setupSlidesharePlayer()}})})();